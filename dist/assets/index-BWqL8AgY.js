function Aw(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function sv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vu={exports:{}},qi={},Hu={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function jw(){if(Tm)return ye;Tm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=_&&N[_]||N["@@iterator"],typeof N=="function"?N:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,O={};function D(N,M,pe){this.props=N,this.context=M,this.refs=O,this.updater=pe||T}D.prototype.isReactComponent={},D.prototype.setState=function(N,M){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,M,"setState")},D.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ee(){}ee.prototype=D.prototype;function j(N,M,pe){this.props=N,this.context=M,this.refs=O,this.updater=pe||T}var K=j.prototype=new ee;K.constructor=j,R(K,D.prototype),K.isPureReactComponent=!0;var H=Array.isArray,ce=Object.prototype.hasOwnProperty,ae={current:null},J={key:!0,ref:!0,__self:!0,__source:!0};function ue(N,M,pe){var b,Y={},E=null,z=null;if(M!=null)for(b in M.ref!==void 0&&(z=M.ref),M.key!==void 0&&(E=""+M.key),M)ce.call(M,b)&&!J.hasOwnProperty(b)&&(Y[b]=M[b]);var V=arguments.length-2;if(V===1)Y.children=pe;else if(1<V){for(var q=Array(V),re=0;re<V;re++)q[re]=arguments[re+2];Y.children=q}if(N&&N.defaultProps)for(b in V=N.defaultProps,V)Y[b]===void 0&&(Y[b]=V[b]);return{$$typeof:r,type:N,key:E,ref:z,props:Y,_owner:ae.current}}function ge(N,M){return{$$typeof:r,type:N.type,key:M,ref:N.ref,props:N.props,_owner:N._owner}}function Ee(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function Le(N){var M={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(pe){return M[pe]})}var ze=/\/+/g;function ke(N,M){return typeof N=="object"&&N!==null&&N.key!=null?Le(""+N.key):M.toString(36)}function Ge(N,M,pe,b,Y){var E=typeof N;(E==="undefined"||E==="boolean")&&(N=null);var z=!1;if(N===null)z=!0;else switch(E){case"string":case"number":z=!0;break;case"object":switch(N.$$typeof){case r:case e:z=!0}}if(z)return z=N,Y=Y(z),N=b===""?"."+ke(z,0):b,H(Y)?(pe="",N!=null&&(pe=N.replace(ze,"$&/")+"/"),Ge(Y,M,pe,"",function(re){return re})):Y!=null&&(Ee(Y)&&(Y=ge(Y,pe+(!Y.key||z&&z.key===Y.key?"":(""+Y.key).replace(ze,"$&/")+"/")+N)),M.push(Y)),1;if(z=0,b=b===""?".":b+":",H(N))for(var V=0;V<N.length;V++){E=N[V];var q=b+ke(E,V);z+=Ge(E,M,pe,q,Y)}else if(q=y(N),typeof q=="function")for(N=q.call(N),V=0;!(E=N.next()).done;)E=E.value,q=b+ke(E,V++),z+=Ge(E,M,pe,q,Y);else if(E==="object")throw M=String(N),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return z}function it(N,M,pe){if(N==null)return N;var b=[],Y=0;return Ge(N,b,"","",function(E){return M.call(pe,E,Y++)}),b}function Me(N){if(N._status===-1){var M=N._result;M=M(),M.then(function(pe){(N._status===0||N._status===-1)&&(N._status=1,N._result=pe)},function(pe){(N._status===0||N._status===-1)&&(N._status=2,N._result=pe)}),N._status===-1&&(N._status=0,N._result=M)}if(N._status===1)return N._result.default;throw N._result}var Ne={current:null},G={transition:null},ne={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:G,ReactCurrentOwner:ae};function Q(){throw Error("act(...) is not supported in production builds of React.")}return ye.Children={map:it,forEach:function(N,M,pe){it(N,function(){M.apply(this,arguments)},pe)},count:function(N){var M=0;return it(N,function(){M++}),M},toArray:function(N){return it(N,function(M){return M})||[]},only:function(N){if(!Ee(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ye.Component=D,ye.Fragment=t,ye.Profiler=o,ye.PureComponent=j,ye.StrictMode=i,ye.Suspense=m,ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,ye.act=Q,ye.cloneElement=function(N,M,pe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var b=R({},N.props),Y=N.key,E=N.ref,z=N._owner;if(M!=null){if(M.ref!==void 0&&(E=M.ref,z=ae.current),M.key!==void 0&&(Y=""+M.key),N.type&&N.type.defaultProps)var V=N.type.defaultProps;for(q in M)ce.call(M,q)&&!J.hasOwnProperty(q)&&(b[q]=M[q]===void 0&&V!==void 0?V[q]:M[q])}var q=arguments.length-2;if(q===1)b.children=pe;else if(1<q){V=Array(q);for(var re=0;re<q;re++)V[re]=arguments[re+2];b.children=V}return{$$typeof:r,type:N.type,key:Y,ref:E,props:b,_owner:z}},ye.createContext=function(N){return N={$$typeof:u,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:l,_context:N},N.Consumer=N},ye.createElement=ue,ye.createFactory=function(N){var M=ue.bind(null,N);return M.type=N,M},ye.createRef=function(){return{current:null}},ye.forwardRef=function(N){return{$$typeof:f,render:N}},ye.isValidElement=Ee,ye.lazy=function(N){return{$$typeof:w,_payload:{_status:-1,_result:N},_init:Me}},ye.memo=function(N,M){return{$$typeof:g,type:N,compare:M===void 0?null:M}},ye.startTransition=function(N){var M=G.transition;G.transition={};try{N()}finally{G.transition=M}},ye.unstable_act=Q,ye.useCallback=function(N,M){return Ne.current.useCallback(N,M)},ye.useContext=function(N){return Ne.current.useContext(N)},ye.useDebugValue=function(){},ye.useDeferredValue=function(N){return Ne.current.useDeferredValue(N)},ye.useEffect=function(N,M){return Ne.current.useEffect(N,M)},ye.useId=function(){return Ne.current.useId()},ye.useImperativeHandle=function(N,M,pe){return Ne.current.useImperativeHandle(N,M,pe)},ye.useInsertionEffect=function(N,M){return Ne.current.useInsertionEffect(N,M)},ye.useLayoutEffect=function(N,M){return Ne.current.useLayoutEffect(N,M)},ye.useMemo=function(N,M){return Ne.current.useMemo(N,M)},ye.useReducer=function(N,M,pe){return Ne.current.useReducer(N,M,pe)},ye.useRef=function(N){return Ne.current.useRef(N)},ye.useState=function(N){return Ne.current.useState(N)},ye.useSyncExternalStore=function(N,M,pe){return Ne.current.useSyncExternalStore(N,M,pe)},ye.useTransition=function(){return Ne.current.useTransition()},ye.version="18.3.1",ye}var km;function $d(){return km||(km=1,Hu.exports=jw()),Hu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function Dw(){if(Pm)return qi;Pm=1;var r=$d(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(f,m,g){var w,_={},y=null,T=null;g!==void 0&&(y=""+g),m.key!==void 0&&(y=""+m.key),m.ref!==void 0&&(T=m.ref);for(w in m)i.call(m,w)&&!l.hasOwnProperty(w)&&(_[w]=m[w]);if(f&&f.defaultProps)for(w in m=f.defaultProps,m)_[w]===void 0&&(_[w]=m[w]);return{$$typeof:e,type:f,key:y,ref:T,props:_,_owner:o.current}}return qi.Fragment=t,qi.jsx=u,qi.jsxs=u,qi}var bm;function Ow(){return bm||(bm=1,Vu.exports=Dw()),Vu.exports}var d=Ow(),I=$d();const iv=sv(I),Lw=Aw({__proto__:null,default:iv},[I]);var Ga={},qu={exports:{}},Lt={},Gu={exports:{}},Ku={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function Mw(){return Rm||(Rm=1,(function(r){function e(G,ne){var Q=G.length;G.push(ne);e:for(;0<Q;){var N=Q-1>>>1,M=G[N];if(0<o(M,ne))G[N]=ne,G[Q]=M,Q=N;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ne=G[0],Q=G.pop();if(Q!==ne){G[0]=Q;e:for(var N=0,M=G.length,pe=M>>>1;N<pe;){var b=2*(N+1)-1,Y=G[b],E=b+1,z=G[E];if(0>o(Y,Q))E<M&&0>o(z,Y)?(G[N]=z,G[E]=Q,N=E):(G[N]=Y,G[b]=Q,N=b);else if(E<M&&0>o(z,Q))G[N]=z,G[E]=Q,N=E;else break e}}return ne}function o(G,ne){var Q=G.sortIndex-ne.sortIndex;return Q!==0?Q:G.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();r.unstable_now=function(){return u.now()-f}}var m=[],g=[],w=1,_=null,y=3,T=!1,R=!1,O=!1,D=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(G){for(var ne=t(g);ne!==null;){if(ne.callback===null)i(g);else if(ne.startTime<=G)i(g),ne.sortIndex=ne.expirationTime,e(m,ne);else break;ne=t(g)}}function H(G){if(O=!1,K(G),!R)if(t(m)!==null)R=!0,Me(ce);else{var ne=t(g);ne!==null&&Ne(H,ne.startTime-G)}}function ce(G,ne){R=!1,O&&(O=!1,ee(ue),ue=-1),T=!0;var Q=y;try{for(K(ne),_=t(m);_!==null&&(!(_.expirationTime>ne)||G&&!Le());){var N=_.callback;if(typeof N=="function"){_.callback=null,y=_.priorityLevel;var M=N(_.expirationTime<=ne);ne=r.unstable_now(),typeof M=="function"?_.callback=M:_===t(m)&&i(m),K(ne)}else i(m);_=t(m)}if(_!==null)var pe=!0;else{var b=t(g);b!==null&&Ne(H,b.startTime-ne),pe=!1}return pe}finally{_=null,y=Q,T=!1}}var ae=!1,J=null,ue=-1,ge=5,Ee=-1;function Le(){return!(r.unstable_now()-Ee<ge)}function ze(){if(J!==null){var G=r.unstable_now();Ee=G;var ne=!0;try{ne=J(!0,G)}finally{ne?ke():(ae=!1,J=null)}}else ae=!1}var ke;if(typeof j=="function")ke=function(){j(ze)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,it=Ge.port2;Ge.port1.onmessage=ze,ke=function(){it.postMessage(null)}}else ke=function(){D(ze,0)};function Me(G){J=G,ae||(ae=!0,ke())}function Ne(G,ne){ue=D(function(){G(r.unstable_now())},ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){R||T||(R=!0,Me(ce))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(G){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var Q=y;y=ne;try{return G()}finally{y=Q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=y;y=G;try{return ne()}finally{y=Q}},r.unstable_scheduleCallback=function(G,ne,Q){var N=r.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?N+Q:N):Q=N,G){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Q+M,G={id:w++,callback:ne,priorityLevel:G,startTime:Q,expirationTime:M,sortIndex:-1},Q>N?(G.sortIndex=Q,e(g,G),t(m)===null&&G===t(g)&&(O?(ee(ue),ue=-1):O=!0,Ne(H,Q-N))):(G.sortIndex=M,e(m,G),R||T||(R=!0,Me(ce))),G},r.unstable_shouldYield=Le,r.unstable_wrapCallback=function(G){var ne=y;return function(){var Q=y;y=ne;try{return G.apply(this,arguments)}finally{y=Q}}}})(Ku)),Ku}var Am;function Fw(){return Am||(Am=1,Gu.exports=Mw()),Gu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm;function Uw(){if(jm)return Lt;jm=1;var r=$d(),e=Fw();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function y(n){return m.call(_,n)?!0:m.call(w,n)?!1:g.test(n)?_[n]=!0:(w[n]=!0,!1)}function T(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function R(n,s,a,c){if(s===null||typeof s>"u"||T(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function O(n,s,a,c,h,p,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=p,this.removeEmptyString=v}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){D[n]=new O(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];D[s]=new O(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){D[n]=new O(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){D[n]=new O(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){D[n]=new O(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){D[n]=new O(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){D[n]=new O(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){D[n]=new O(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){D[n]=new O(n,5,!1,n.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function j(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ee,j);D[s]=new O(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ee,j);D[s]=new O(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ee,j);D[s]=new O(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){D[n]=new O(n,1,!1,n.toLowerCase(),null,!1,!1)}),D.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){D[n]=new O(n,1,!1,n.toLowerCase(),null,!0,!0)});function K(n,s,a,c){var h=D.hasOwnProperty(s)?D[s]:null;(h!==null?h.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(R(s,a,h,c)&&(a=null),c||h===null?y(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(s=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(s):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var H=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),ae=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),Ee=Symbol.for("react.provider"),Le=Symbol.for("react.context"),ze=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),G=Symbol.iterator;function ne(n){return n===null||typeof n!="object"?null:(n=G&&n[G]||n["@@iterator"],typeof n=="function"?n:null)}var Q=Object.assign,N;function M(n){if(N===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);N=s&&s[1]||""}return`
`+N+n}var pe=!1;function b(n,s){if(!n||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(A){var c=A}Reflect.construct(n,[],s)}else{try{s.call()}catch(A){c=A}n.call(s.prototype)}else{try{throw Error()}catch(A){c=A}n()}}catch(A){if(A&&c&&typeof A.stack=="string"){for(var h=A.stack.split(`
`),p=c.stack.split(`
`),v=h.length-1,x=p.length-1;1<=v&&0<=x&&h[v]!==p[x];)x--;for(;1<=v&&0<=x;v--,x--)if(h[v]!==p[x]){if(v!==1||x!==1)do if(v--,x--,0>x||h[v]!==p[x]){var S=`
`+h[v].replace(" at new "," at ");return n.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",n.displayName)),S}while(1<=v&&0<=x);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?M(n):""}function Y(n){switch(n.tag){case 5:return M(n.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return n=b(n.type,!1),n;case 11:return n=b(n.type.render,!1),n;case 1:return n=b(n.type,!0),n;default:return""}}function E(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case J:return"Fragment";case ae:return"Portal";case ge:return"Profiler";case ue:return"StrictMode";case ke:return"Suspense";case Ge:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Le:return(n.displayName||"Context")+".Consumer";case Ee:return(n._context.displayName||"Context")+".Provider";case ze:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case it:return s=n.displayName||null,s!==null?s:E(n.type)||"Memo";case Me:s=n._payload,n=n._init;try{return E(n(s))}catch{}}return null}function z(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(s);case 8:return s===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function V(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function q(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function re(n){var s=q(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,p=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){c=""+v,p.call(this,v)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Pe(n){n._valueTracker||(n._valueTracker=re(n))}function Vt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=q(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function us(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function li(n,s){var a=s.checked;return Q({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Mo(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=V(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function nc(n,s){s=s.checked,s!=null&&K(n,"checked",s,!1)}function Ve(n,s){nc(n,s);var a=V(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Uo(n,s.type,a):s.hasOwnProperty("defaultValue")&&Uo(n,s.type,V(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Fo(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Uo(n,s,a){(s!=="number"||us(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Gn=Array.isArray;function Kn(n,s,a,c){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+V(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function ci(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function L(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Gn(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:V(a)}}function ie(n,s){var a=V(s.value),c=V(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Ke(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Qe(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Qe(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ie,Cn=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,h)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Ie=Ie||document.createElement("div"),Ie.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ie.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Nn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rc=["Webkit","ms","Moz","O"];Object.keys(Qn).forEach(function(n){rc.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Qn[s]=Qn[n]})});function Yn(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Qn.hasOwnProperty(n)&&Qn[n]?(""+s).trim():s+"px"}function Jn(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=Yn(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var Or=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(n,s){if(s){if(Or[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function be(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sc=null;function ic(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var oc=null,ds=null,hs=null;function Wh(n){if(n=Ri(n)){if(typeof oc!="function")throw Error(t(280));var s=n.stateNode;s&&(s=la(s),oc(n.stateNode,n.type,s))}}function Vh(n){ds?hs?hs.push(n):hs=[n]:ds=n}function Hh(){if(ds){var n=ds,s=hs;if(hs=ds=null,Wh(n),s)for(n=0;n<s.length;n++)Wh(s[n])}}function qh(n,s){return n(s)}function Gh(){}var ac=!1;function Kh(n,s,a){if(ac)return n(s,a);ac=!0;try{return qh(n,s,a)}finally{ac=!1,(ds!==null||hs!==null)&&(Gh(),Hh())}}function ui(n,s){var a=n.stateNode;if(a===null)return null;var c=la(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var lc=!1;if(f)try{var di={};Object.defineProperty(di,"passive",{get:function(){lc=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{lc=!1}function Fy(n,s,a,c,h,p,v,x,S){var A=Array.prototype.slice.call(arguments,3);try{s.apply(a,A)}catch(U){this.onError(U)}}var hi=!1,$o=null,zo=!1,cc=null,Uy={onError:function(n){hi=!0,$o=n}};function $y(n,s,a,c,h,p,v,x,S){hi=!1,$o=null,Fy.apply(Uy,arguments)}function zy(n,s,a,c,h,p,v,x,S){if($y.apply(this,arguments),hi){if(hi){var A=$o;hi=!1,$o=null}else throw Error(t(198));zo||(zo=!0,cc=A)}}function Lr(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Qh(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Yh(n){if(Lr(n)!==n)throw Error(t(188))}function By(n){var s=n.alternate;if(!s){if(s=Lr(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return Yh(h),n;if(p===c)return Yh(h),s;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=p;else{for(var v=!1,x=h.child;x;){if(x===a){v=!0,a=h,c=p;break}if(x===c){v=!0,c=h,a=p;break}x=x.sibling}if(!v){for(x=p.child;x;){if(x===a){v=!0,a=p,c=h;break}if(x===c){v=!0,c=p,a=h;break}x=x.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Jh(n){return n=By(n),n!==null?Xh(n):null}function Xh(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Xh(n);if(s!==null)return s;n=n.sibling}return null}var Zh=e.unstable_scheduleCallback,ef=e.unstable_cancelCallback,Wy=e.unstable_shouldYield,Vy=e.unstable_requestPaint,rt=e.unstable_now,Hy=e.unstable_getCurrentPriorityLevel,uc=e.unstable_ImmediatePriority,tf=e.unstable_UserBlockingPriority,Bo=e.unstable_NormalPriority,qy=e.unstable_LowPriority,nf=e.unstable_IdlePriority,Wo=null,mn=null;function Gy(n){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Wo,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:Yy,Ky=Math.log,Qy=Math.LN2;function Yy(n){return n>>>=0,n===0?32:31-(Ky(n)/Qy|0)|0}var Vo=64,Ho=4194304;function fi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function qo(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,p=n.pingedLanes,v=a&268435455;if(v!==0){var x=v&~h;x!==0?c=fi(x):(p&=v,p!==0&&(c=fi(p)))}else v=a&~h,v!==0?c=fi(v):p!==0&&(c=fi(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&h)===0&&(h=c&-c,p=s&-s,h>=p||h===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-en(s),h=1<<a,c|=n[a],s&=~h;return c}function Jy(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xy(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-en(p),x=1<<v,S=h[v];S===-1?((x&a)===0||(x&c)!==0)&&(h[v]=Jy(x,s)):S<=s&&(n.expiredLanes|=x),p&=~x}}function dc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function rf(){var n=Vo;return Vo<<=1,(Vo&4194240)===0&&(Vo=64),n}function hc(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function pi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-en(s),n[s]=a}function Zy(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-en(a),p=1<<h;s[h]=0,c[h]=-1,n[h]=-1,a&=~p}}function fc(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-en(a),h=1<<c;h&s|n[c]&s&&(n[c]|=s),a&=~h}}var je=0;function sf(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var of,pc,af,lf,cf,mc=!1,Go=[],Xn=null,Zn=null,er=null,mi=new Map,gi=new Map,tr=[],e0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uf(n,s){switch(n){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":mi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":gi.delete(s.pointerId)}}function vi(n,s,a,c,h,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[h]},s!==null&&(s=Ri(s),s!==null&&pc(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function t0(n,s,a,c,h){switch(s){case"focusin":return Xn=vi(Xn,n,s,a,c,h),!0;case"dragenter":return Zn=vi(Zn,n,s,a,c,h),!0;case"mouseover":return er=vi(er,n,s,a,c,h),!0;case"pointerover":var p=h.pointerId;return mi.set(p,vi(mi.get(p)||null,n,s,a,c,h)),!0;case"gotpointercapture":return p=h.pointerId,gi.set(p,vi(gi.get(p)||null,n,s,a,c,h)),!0}return!1}function df(n){var s=Mr(n.target);if(s!==null){var a=Lr(s);if(a!==null){if(s=a.tag,s===13){if(s=Qh(a),s!==null){n.blockedOn=s,cf(n.priority,function(){af(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ko(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=vc(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);sc=c,a.target.dispatchEvent(c),sc=null}else return s=Ri(a),s!==null&&pc(s),n.blockedOn=a,!1;s.shift()}return!0}function hf(n,s,a){Ko(n)&&a.delete(s)}function n0(){mc=!1,Xn!==null&&Ko(Xn)&&(Xn=null),Zn!==null&&Ko(Zn)&&(Zn=null),er!==null&&Ko(er)&&(er=null),mi.forEach(hf),gi.forEach(hf)}function _i(n,s){n.blockedOn===s&&(n.blockedOn=null,mc||(mc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,n0)))}function yi(n){function s(h){return _i(h,n)}if(0<Go.length){_i(Go[0],n);for(var a=1;a<Go.length;a++){var c=Go[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Xn!==null&&_i(Xn,n),Zn!==null&&_i(Zn,n),er!==null&&_i(er,n),mi.forEach(s),gi.forEach(s),a=0;a<tr.length;a++)c=tr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<tr.length&&(a=tr[0],a.blockedOn===null);)df(a),a.blockedOn===null&&tr.shift()}var fs=H.ReactCurrentBatchConfig,Qo=!0;function r0(n,s,a,c){var h=je,p=fs.transition;fs.transition=null;try{je=1,gc(n,s,a,c)}finally{je=h,fs.transition=p}}function s0(n,s,a,c){var h=je,p=fs.transition;fs.transition=null;try{je=4,gc(n,s,a,c)}finally{je=h,fs.transition=p}}function gc(n,s,a,c){if(Qo){var h=vc(n,s,a,c);if(h===null)Dc(n,s,c,Yo,a),uf(n,c);else if(t0(h,n,s,a,c))c.stopPropagation();else if(uf(n,c),s&4&&-1<e0.indexOf(n)){for(;h!==null;){var p=Ri(h);if(p!==null&&of(p),p=vc(n,s,a,c),p===null&&Dc(n,s,c,Yo,a),p===h)break;h=p}h!==null&&c.stopPropagation()}else Dc(n,s,c,null,a)}}var Yo=null;function vc(n,s,a,c){if(Yo=null,n=ic(c),n=Mr(n),n!==null)if(s=Lr(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Qh(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Yo=n,null}function ff(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hy()){case uc:return 1;case tf:return 4;case Bo:case qy:return 16;case nf:return 536870912;default:return 16}default:return 16}}var nr=null,_c=null,Jo=null;function pf(){if(Jo)return Jo;var n,s=_c,a=s.length,c,h="value"in nr?nr.value:nr.textContent,p=h.length;for(n=0;n<a&&s[n]===h[n];n++);var v=a-n;for(c=1;c<=v&&s[a-c]===h[p-c];c++);return Jo=h.slice(n,1<c?1-c:void 0)}function Xo(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zo(){return!0}function mf(){return!1}function Ft(n){function s(a,c,h,p,v){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Zo:mf,this.isPropagationStopped=mf,this}return Q(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),s}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yc=Ft(ps),wi=Q({},ps,{view:0,detail:0}),i0=Ft(wi),wc,xc,xi,ea=Q({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xi&&(xi&&n.type==="mousemove"?(wc=n.screenX-xi.screenX,xc=n.screenY-xi.screenY):xc=wc=0,xi=n),wc)},movementY:function(n){return"movementY"in n?n.movementY:xc}}),gf=Ft(ea),o0=Q({},ea,{dataTransfer:0}),a0=Ft(o0),l0=Q({},wi,{relatedTarget:0}),Ec=Ft(l0),c0=Q({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),u0=Ft(c0),d0=Q({},ps,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h0=Ft(d0),f0=Q({},ps,{data:0}),vf=Ft(f0),p0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v0(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=g0[n])?!!s[n]:!1}function Sc(){return v0}var _0=Q({},wi,{key:function(n){if(n.key){var s=p0[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Xo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?m0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(n){return n.type==="keypress"?Xo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),y0=Ft(_0),w0=Q({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=Ft(w0),x0=Q({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),E0=Ft(x0),S0=Q({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),C0=Ft(S0),N0=Q({},ea,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),I0=Ft(N0),T0=[9,13,27,32],Cc=f&&"CompositionEvent"in window,Ei=null;f&&"documentMode"in document&&(Ei=document.documentMode);var k0=f&&"TextEvent"in window&&!Ei,yf=f&&(!Cc||Ei&&8<Ei&&11>=Ei),wf=" ",xf=!1;function Ef(n,s){switch(n){case"keyup":return T0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ms=!1;function P0(n,s){switch(n){case"compositionend":return Sf(s);case"keypress":return s.which!==32?null:(xf=!0,wf);case"textInput":return n=s.data,n===wf&&xf?null:n;default:return null}}function b0(n,s){if(ms)return n==="compositionend"||!Cc&&Ef(n,s)?(n=pf(),Jo=_c=nr=null,ms=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return yf&&s.locale!=="ko"?null:s.data;default:return null}}var R0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!R0[n.type]:s==="textarea"}function Nf(n,s,a,c){Vh(c),s=ia(s,"onChange"),0<s.length&&(a=new yc("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Si=null,Ci=null;function A0(n){Wf(n,0)}function ta(n){var s=ws(n);if(Vt(s))return n}function j0(n,s){if(n==="change")return s}var If=!1;if(f){var Nc;if(f){var Ic="oninput"in document;if(!Ic){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),Ic=typeof Tf.oninput=="function"}Nc=Ic}else Nc=!1;If=Nc&&(!document.documentMode||9<document.documentMode)}function kf(){Si&&(Si.detachEvent("onpropertychange",Pf),Ci=Si=null)}function Pf(n){if(n.propertyName==="value"&&ta(Ci)){var s=[];Nf(s,Ci,n,ic(n)),Kh(A0,s)}}function D0(n,s,a){n==="focusin"?(kf(),Si=s,Ci=a,Si.attachEvent("onpropertychange",Pf)):n==="focusout"&&kf()}function O0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ta(Ci)}function L0(n,s){if(n==="click")return ta(s)}function M0(n,s){if(n==="input"||n==="change")return ta(s)}function F0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var tn=typeof Object.is=="function"?Object.is:F0;function Ni(n,s){if(tn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!m.call(s,h)||!tn(n[h],s[h]))return!1}return!0}function bf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rf(n,s){var a=bf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bf(a)}}function Af(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Af(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function jf(){for(var n=window,s=us();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=us(n.document)}return s}function Tc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function U0(n){var s=jf(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Af(a.ownerDocument.documentElement,a)){if(c!==null&&Tc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,p=Math.min(c.start,h);c=c.end===void 0?p:Math.min(c.end,h),!n.extend&&p>c&&(h=c,c=p,p=h),h=Rf(a,p);var v=Rf(a,c);h&&v&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(h.node,h.offset),n.removeAllRanges(),p>c?(n.addRange(s),n.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var $0=f&&"documentMode"in document&&11>=document.documentMode,gs=null,kc=null,Ii=null,Pc=!1;function Df(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Pc||gs==null||gs!==us(c)||(c=gs,"selectionStart"in c&&Tc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ii&&Ni(Ii,c)||(Ii=c,c=ia(kc,"onSelect"),0<c.length&&(s=new yc("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=gs)))}function na(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var vs={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionend:na("Transition","TransitionEnd")},bc={},Of={};f&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function ra(n){if(bc[n])return bc[n];if(!vs[n])return n;var s=vs[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Of)return bc[n]=s[a];return n}var Lf=ra("animationend"),Mf=ra("animationiteration"),Ff=ra("animationstart"),Uf=ra("transitionend"),$f=new Map,zf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(n,s){$f.set(n,s),l(s,[n])}for(var Rc=0;Rc<zf.length;Rc++){var Ac=zf[Rc],z0=Ac.toLowerCase(),B0=Ac[0].toUpperCase()+Ac.slice(1);rr(z0,"on"+B0)}rr(Lf,"onAnimationEnd"),rr(Mf,"onAnimationIteration"),rr(Ff,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(Uf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function Bf(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,zy(c,s,void 0,n),n.currentTarget=null}function Wf(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var v=c.length-1;0<=v;v--){var x=c[v],S=x.instance,A=x.currentTarget;if(x=x.listener,S!==p&&h.isPropagationStopped())break e;Bf(h,x,A),p=S}else for(v=0;v<c.length;v++){if(x=c[v],S=x.instance,A=x.currentTarget,x=x.listener,S!==p&&h.isPropagationStopped())break e;Bf(h,x,A),p=S}}}if(zo)throw n=cc,zo=!1,cc=null,n}function Be(n,s){var a=s[$c];a===void 0&&(a=s[$c]=new Set);var c=n+"__bubble";a.has(c)||(Vf(s,n,2,!1),a.add(c))}function jc(n,s,a){var c=0;s&&(c|=4),Vf(a,n,c,s)}var sa="_reactListening"+Math.random().toString(36).slice(2);function ki(n){if(!n[sa]){n[sa]=!0,i.forEach(function(a){a!=="selectionchange"&&(W0.has(a)||jc(a,!1,n),jc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[sa]||(s[sa]=!0,jc("selectionchange",!1,s))}}function Vf(n,s,a,c){switch(ff(s)){case 1:var h=r0;break;case 4:h=s0;break;default:h=gc}a=h.bind(null,s,a,n),h=void 0,!lc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function Dc(n,s,a,c,h){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var x=c.stateNode.containerInfo;if(x===h||x.nodeType===8&&x.parentNode===h)break;if(v===4)for(v=c.return;v!==null;){var S=v.tag;if((S===3||S===4)&&(S=v.stateNode.containerInfo,S===h||S.nodeType===8&&S.parentNode===h))return;v=v.return}for(;x!==null;){if(v=Mr(x),v===null)return;if(S=v.tag,S===5||S===6){c=p=v;continue e}x=x.parentNode}}c=c.return}Kh(function(){var A=p,U=ic(a),$=[];e:{var F=$f.get(n);if(F!==void 0){var X=yc,te=n;switch(n){case"keypress":if(Xo(a)===0)break e;case"keydown":case"keyup":X=y0;break;case"focusin":te="focus",X=Ec;break;case"focusout":te="blur",X=Ec;break;case"beforeblur":case"afterblur":X=Ec;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=a0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=E0;break;case Lf:case Mf:case Ff:X=u0;break;case Uf:X=C0;break;case"scroll":X=i0;break;case"wheel":X=I0;break;case"copy":case"cut":case"paste":X=h0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=_f}var se=(s&4)!==0,st=!se&&n==="scroll",k=se?F!==null?F+"Capture":null:F;se=[];for(var C=A,P;C!==null;){P=C;var B=P.stateNode;if(P.tag===5&&B!==null&&(P=B,k!==null&&(B=ui(C,k),B!=null&&se.push(Pi(C,B,P)))),st)break;C=C.return}0<se.length&&(F=new X(F,te,null,a,U),$.push({event:F,listeners:se}))}}if((s&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",F&&a!==sc&&(te=a.relatedTarget||a.fromElement)&&(Mr(te)||te[In]))break e;if((X||F)&&(F=U.window===U?U:(F=U.ownerDocument)?F.defaultView||F.parentWindow:window,X?(te=a.relatedTarget||a.toElement,X=A,te=te?Mr(te):null,te!==null&&(st=Lr(te),te!==st||te.tag!==5&&te.tag!==6)&&(te=null)):(X=null,te=A),X!==te)){if(se=gf,B="onMouseLeave",k="onMouseEnter",C="mouse",(n==="pointerout"||n==="pointerover")&&(se=_f,B="onPointerLeave",k="onPointerEnter",C="pointer"),st=X==null?F:ws(X),P=te==null?F:ws(te),F=new se(B,C+"leave",X,a,U),F.target=st,F.relatedTarget=P,B=null,Mr(U)===A&&(se=new se(k,C+"enter",te,a,U),se.target=P,se.relatedTarget=st,B=se),st=B,X&&te)t:{for(se=X,k=te,C=0,P=se;P;P=_s(P))C++;for(P=0,B=k;B;B=_s(B))P++;for(;0<C-P;)se=_s(se),C--;for(;0<P-C;)k=_s(k),P--;for(;C--;){if(se===k||k!==null&&se===k.alternate)break t;se=_s(se),k=_s(k)}se=null}else se=null;X!==null&&Hf($,F,X,se,!1),te!==null&&st!==null&&Hf($,st,te,se,!0)}}e:{if(F=A?ws(A):window,X=F.nodeName&&F.nodeName.toLowerCase(),X==="select"||X==="input"&&F.type==="file")var oe=j0;else if(Cf(F))if(If)oe=M0;else{oe=O0;var de=D0}else(X=F.nodeName)&&X.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(oe=L0);if(oe&&(oe=oe(n,A))){Nf($,oe,a,U);break e}de&&de(n,F,A),n==="focusout"&&(de=F._wrapperState)&&de.controlled&&F.type==="number"&&Uo(F,"number",F.value)}switch(de=A?ws(A):window,n){case"focusin":(Cf(de)||de.contentEditable==="true")&&(gs=de,kc=A,Ii=null);break;case"focusout":Ii=kc=gs=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,Df($,a,U);break;case"selectionchange":if($0)break;case"keydown":case"keyup":Df($,a,U)}var he;if(Cc)e:{switch(n){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else ms?Ef(n,a)&&(me="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(me="onCompositionStart");me&&(yf&&a.locale!=="ko"&&(ms||me!=="onCompositionStart"?me==="onCompositionEnd"&&ms&&(he=pf()):(nr=U,_c="value"in nr?nr.value:nr.textContent,ms=!0)),de=ia(A,me),0<de.length&&(me=new vf(me,n,null,a,U),$.push({event:me,listeners:de}),he?me.data=he:(he=Sf(a),he!==null&&(me.data=he)))),(he=k0?P0(n,a):b0(n,a))&&(A=ia(A,"onBeforeInput"),0<A.length&&(U=new vf("onBeforeInput","beforeinput",null,a,U),$.push({event:U,listeners:A}),U.data=he))}Wf($,s)})}function Pi(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ia(n,s){for(var a=s+"Capture",c=[];n!==null;){var h=n,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=ui(n,a),p!=null&&c.unshift(Pi(n,p,h)),p=ui(n,s),p!=null&&c.push(Pi(n,p,h))),n=n.return}return c}function _s(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Hf(n,s,a,c,h){for(var p=s._reactName,v=[];a!==null&&a!==c;){var x=a,S=x.alternate,A=x.stateNode;if(S!==null&&S===c)break;x.tag===5&&A!==null&&(x=A,h?(S=ui(a,p),S!=null&&v.unshift(Pi(a,S,x))):h||(S=ui(a,p),S!=null&&v.push(Pi(a,S,x)))),a=a.return}v.length!==0&&n.push({event:s,listeners:v})}var V0=/\r\n?/g,H0=/\u0000|\uFFFD/g;function qf(n){return(typeof n=="string"?n:""+n).replace(V0,`
`).replace(H0,"")}function oa(n,s,a){if(s=qf(s),qf(n)!==s&&a)throw Error(t(425))}function aa(){}var Oc=null,Lc=null;function Mc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Fc=typeof setTimeout=="function"?setTimeout:void 0,q0=typeof clearTimeout=="function"?clearTimeout:void 0,Gf=typeof Promise=="function"?Promise:void 0,G0=typeof queueMicrotask=="function"?queueMicrotask:typeof Gf<"u"?function(n){return Gf.resolve(null).then(n).catch(K0)}:Fc;function K0(n){setTimeout(function(){throw n})}function Uc(n,s){var a=s,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),yi(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);yi(s)}function sr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Kf(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var ys=Math.random().toString(36).slice(2),gn="__reactFiber$"+ys,bi="__reactProps$"+ys,In="__reactContainer$"+ys,$c="__reactEvents$"+ys,Q0="__reactListeners$"+ys,Y0="__reactHandles$"+ys;function Mr(n){var s=n[gn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[In]||a[gn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Kf(n);n!==null;){if(a=n[gn])return a;n=Kf(n)}return s}n=a,a=n.parentNode}return null}function Ri(n){return n=n[gn]||n[In],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ws(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function la(n){return n[bi]||null}var zc=[],xs=-1;function ir(n){return{current:n}}function We(n){0>xs||(n.current=zc[xs],zc[xs]=null,xs--)}function Fe(n,s){xs++,zc[xs]=n.current,n.current=s}var or={},wt=ir(or),Rt=ir(!1),Fr=or;function Es(n,s){var a=n.type.contextTypes;if(!a)return or;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in a)h[p]=s[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=h),h}function At(n){return n=n.childContextTypes,n!=null}function ca(){We(Rt),We(wt)}function Qf(n,s,a){if(wt.current!==or)throw Error(t(168));Fe(wt,s),Fe(Rt,a)}function Yf(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in s))throw Error(t(108,z(n)||"Unknown",h));return Q({},a,c)}function ua(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||or,Fr=wt.current,Fe(wt,n),Fe(Rt,Rt.current),!0}function Jf(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Yf(n,s,Fr),c.__reactInternalMemoizedMergedChildContext=n,We(Rt),We(wt),Fe(wt,n)):We(Rt),Fe(Rt,a)}var Tn=null,da=!1,Bc=!1;function Xf(n){Tn===null?Tn=[n]:Tn.push(n)}function J0(n){da=!0,Xf(n)}function ar(){if(!Bc&&Tn!==null){Bc=!0;var n=0,s=je;try{var a=Tn;for(je=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Tn=null,da=!1}catch(h){throw Tn!==null&&(Tn=Tn.slice(n+1)),Zh(uc,ar),h}finally{je=s,Bc=!1}}return null}var Ss=[],Cs=0,ha=null,fa=0,Ht=[],qt=0,Ur=null,kn=1,Pn="";function $r(n,s){Ss[Cs++]=fa,Ss[Cs++]=ha,ha=n,fa=s}function Zf(n,s,a){Ht[qt++]=kn,Ht[qt++]=Pn,Ht[qt++]=Ur,Ur=n;var c=kn;n=Pn;var h=32-en(c)-1;c&=~(1<<h),a+=1;var p=32-en(s)+h;if(30<p){var v=h-h%5;p=(c&(1<<v)-1).toString(32),c>>=v,h-=v,kn=1<<32-en(s)+h|a<<h|c,Pn=p+n}else kn=1<<p|a<<h|c,Pn=n}function Wc(n){n.return!==null&&($r(n,1),Zf(n,1,0))}function Vc(n){for(;n===ha;)ha=Ss[--Cs],Ss[Cs]=null,fa=Ss[--Cs],Ss[Cs]=null;for(;n===Ur;)Ur=Ht[--qt],Ht[qt]=null,Pn=Ht[--qt],Ht[qt]=null,kn=Ht[--qt],Ht[qt]=null}var Ut=null,$t=null,He=!1,nn=null;function ep(n,s){var a=Yt(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function tp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Ut=n,$t=sr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Ut=n,$t=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ur!==null?{id:kn,overflow:Pn}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Yt(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Ut=n,$t=null,!0):!1;default:return!1}}function Hc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function qc(n){if(He){var s=$t;if(s){var a=s;if(!tp(n,s)){if(Hc(n))throw Error(t(418));s=sr(a.nextSibling);var c=Ut;s&&tp(n,s)?ep(c,a):(n.flags=n.flags&-4097|2,He=!1,Ut=n)}}else{if(Hc(n))throw Error(t(418));n.flags=n.flags&-4097|2,He=!1,Ut=n}}}function np(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ut=n}function pa(n){if(n!==Ut)return!1;if(!He)return np(n),He=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Mc(n.type,n.memoizedProps)),s&&(s=$t)){if(Hc(n))throw rp(),Error(t(418));for(;s;)ep(n,s),s=sr(s.nextSibling)}if(np(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){$t=sr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}$t=null}}else $t=Ut?sr(n.stateNode.nextSibling):null;return!0}function rp(){for(var n=$t;n;)n=sr(n.nextSibling)}function Ns(){$t=Ut=null,He=!1}function Gc(n){nn===null?nn=[n]:nn.push(n)}var X0=H.ReactCurrentBatchConfig;function Ai(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,p=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(v){var x=h.refs;v===null?delete x[p]:x[p]=v},s._stringRef=p,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ma(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function sp(n){var s=n._init;return s(n._payload)}function ip(n){function s(k,C){if(n){var P=k.deletions;P===null?(k.deletions=[C],k.flags|=16):P.push(C)}}function a(k,C){if(!n)return null;for(;C!==null;)s(k,C),C=C.sibling;return null}function c(k,C){for(k=new Map;C!==null;)C.key!==null?k.set(C.key,C):k.set(C.index,C),C=C.sibling;return k}function h(k,C){return k=mr(k,C),k.index=0,k.sibling=null,k}function p(k,C,P){return k.index=P,n?(P=k.alternate,P!==null?(P=P.index,P<C?(k.flags|=2,C):P):(k.flags|=2,C)):(k.flags|=1048576,C)}function v(k){return n&&k.alternate===null&&(k.flags|=2),k}function x(k,C,P,B){return C===null||C.tag!==6?(C=Fu(P,k.mode,B),C.return=k,C):(C=h(C,P),C.return=k,C)}function S(k,C,P,B){var oe=P.type;return oe===J?U(k,C,P.props.children,B,P.key):C!==null&&(C.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Me&&sp(oe)===C.type)?(B=h(C,P.props),B.ref=Ai(k,C,P),B.return=k,B):(B=Ua(P.type,P.key,P.props,null,k.mode,B),B.ref=Ai(k,C,P),B.return=k,B)}function A(k,C,P,B){return C===null||C.tag!==4||C.stateNode.containerInfo!==P.containerInfo||C.stateNode.implementation!==P.implementation?(C=Uu(P,k.mode,B),C.return=k,C):(C=h(C,P.children||[]),C.return=k,C)}function U(k,C,P,B,oe){return C===null||C.tag!==7?(C=Kr(P,k.mode,B,oe),C.return=k,C):(C=h(C,P),C.return=k,C)}function $(k,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Fu(""+C,k.mode,P),C.return=k,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ce:return P=Ua(C.type,C.key,C.props,null,k.mode,P),P.ref=Ai(k,null,C),P.return=k,P;case ae:return C=Uu(C,k.mode,P),C.return=k,C;case Me:var B=C._init;return $(k,B(C._payload),P)}if(Gn(C)||ne(C))return C=Kr(C,k.mode,P,null),C.return=k,C;ma(k,C)}return null}function F(k,C,P,B){var oe=C!==null?C.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return oe!==null?null:x(k,C,""+P,B);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ce:return P.key===oe?S(k,C,P,B):null;case ae:return P.key===oe?A(k,C,P,B):null;case Me:return oe=P._init,F(k,C,oe(P._payload),B)}if(Gn(P)||ne(P))return oe!==null?null:U(k,C,P,B,null);ma(k,P)}return null}function X(k,C,P,B,oe){if(typeof B=="string"&&B!==""||typeof B=="number")return k=k.get(P)||null,x(C,k,""+B,oe);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ce:return k=k.get(B.key===null?P:B.key)||null,S(C,k,B,oe);case ae:return k=k.get(B.key===null?P:B.key)||null,A(C,k,B,oe);case Me:var de=B._init;return X(k,C,P,de(B._payload),oe)}if(Gn(B)||ne(B))return k=k.get(P)||null,U(C,k,B,oe,null);ma(C,B)}return null}function te(k,C,P,B){for(var oe=null,de=null,he=C,me=C=0,ft=null;he!==null&&me<P.length;me++){he.index>me?(ft=he,he=null):ft=he.sibling;var Re=F(k,he,P[me],B);if(Re===null){he===null&&(he=ft);break}n&&he&&Re.alternate===null&&s(k,he),C=p(Re,C,me),de===null?oe=Re:de.sibling=Re,de=Re,he=ft}if(me===P.length)return a(k,he),He&&$r(k,me),oe;if(he===null){for(;me<P.length;me++)he=$(k,P[me],B),he!==null&&(C=p(he,C,me),de===null?oe=he:de.sibling=he,de=he);return He&&$r(k,me),oe}for(he=c(k,he);me<P.length;me++)ft=X(he,k,me,P[me],B),ft!==null&&(n&&ft.alternate!==null&&he.delete(ft.key===null?me:ft.key),C=p(ft,C,me),de===null?oe=ft:de.sibling=ft,de=ft);return n&&he.forEach(function(gr){return s(k,gr)}),He&&$r(k,me),oe}function se(k,C,P,B){var oe=ne(P);if(typeof oe!="function")throw Error(t(150));if(P=oe.call(P),P==null)throw Error(t(151));for(var de=oe=null,he=C,me=C=0,ft=null,Re=P.next();he!==null&&!Re.done;me++,Re=P.next()){he.index>me?(ft=he,he=null):ft=he.sibling;var gr=F(k,he,Re.value,B);if(gr===null){he===null&&(he=ft);break}n&&he&&gr.alternate===null&&s(k,he),C=p(gr,C,me),de===null?oe=gr:de.sibling=gr,de=gr,he=ft}if(Re.done)return a(k,he),He&&$r(k,me),oe;if(he===null){for(;!Re.done;me++,Re=P.next())Re=$(k,Re.value,B),Re!==null&&(C=p(Re,C,me),de===null?oe=Re:de.sibling=Re,de=Re);return He&&$r(k,me),oe}for(he=c(k,he);!Re.done;me++,Re=P.next())Re=X(he,k,me,Re.value,B),Re!==null&&(n&&Re.alternate!==null&&he.delete(Re.key===null?me:Re.key),C=p(Re,C,me),de===null?oe=Re:de.sibling=Re,de=Re);return n&&he.forEach(function(Rw){return s(k,Rw)}),He&&$r(k,me),oe}function st(k,C,P,B){if(typeof P=="object"&&P!==null&&P.type===J&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case ce:e:{for(var oe=P.key,de=C;de!==null;){if(de.key===oe){if(oe=P.type,oe===J){if(de.tag===7){a(k,de.sibling),C=h(de,P.props.children),C.return=k,k=C;break e}}else if(de.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Me&&sp(oe)===de.type){a(k,de.sibling),C=h(de,P.props),C.ref=Ai(k,de,P),C.return=k,k=C;break e}a(k,de);break}else s(k,de);de=de.sibling}P.type===J?(C=Kr(P.props.children,k.mode,B,P.key),C.return=k,k=C):(B=Ua(P.type,P.key,P.props,null,k.mode,B),B.ref=Ai(k,C,P),B.return=k,k=B)}return v(k);case ae:e:{for(de=P.key;C!==null;){if(C.key===de)if(C.tag===4&&C.stateNode.containerInfo===P.containerInfo&&C.stateNode.implementation===P.implementation){a(k,C.sibling),C=h(C,P.children||[]),C.return=k,k=C;break e}else{a(k,C);break}else s(k,C);C=C.sibling}C=Uu(P,k.mode,B),C.return=k,k=C}return v(k);case Me:return de=P._init,st(k,C,de(P._payload),B)}if(Gn(P))return te(k,C,P,B);if(ne(P))return se(k,C,P,B);ma(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,C!==null&&C.tag===6?(a(k,C.sibling),C=h(C,P),C.return=k,k=C):(a(k,C),C=Fu(P,k.mode,B),C.return=k,k=C),v(k)):a(k,C)}return st}var Is=ip(!0),op=ip(!1),ga=ir(null),va=null,Ts=null,Kc=null;function Qc(){Kc=Ts=va=null}function Yc(n){var s=ga.current;We(ga),n._currentValue=s}function Jc(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function ks(n,s){va=n,Kc=Ts=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(jt=!0),n.firstContext=null)}function Gt(n){var s=n._currentValue;if(Kc!==n)if(n={context:n,memoizedValue:s,next:null},Ts===null){if(va===null)throw Error(t(308));Ts=n,va.dependencies={lanes:0,firstContext:n}}else Ts=Ts.next=n;return s}var zr=null;function Xc(n){zr===null?zr=[n]:zr.push(n)}function ap(n,s,a,c){var h=s.interleaved;return h===null?(a.next=a,Xc(s)):(a.next=h.next,h.next=a),s.interleaved=a,bn(n,c)}function bn(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var lr=!1;function Zc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Rn(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function cr(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Te&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,bn(n,a)}return h=c.interleaved,h===null?(s.next=s,Xc(c)):(s.next=h.next,h.next=s),c.interleaved=s,bn(n,a)}function _a(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,fc(n,a)}}function cp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?h=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?h=p=s:p=p.next=s}else h=p=s;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function ya(n,s,a,c){var h=n.updateQueue;lr=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,x=h.shared.pending;if(x!==null){h.shared.pending=null;var S=x,A=S.next;S.next=null,v===null?p=A:v.next=A,v=S;var U=n.alternate;U!==null&&(U=U.updateQueue,x=U.lastBaseUpdate,x!==v&&(x===null?U.firstBaseUpdate=A:x.next=A,U.lastBaseUpdate=S))}if(p!==null){var $=h.baseState;v=0,U=A=S=null,x=p;do{var F=x.lane,X=x.eventTime;if((c&F)===F){U!==null&&(U=U.next={eventTime:X,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var te=n,se=x;switch(F=s,X=a,se.tag){case 1:if(te=se.payload,typeof te=="function"){$=te.call(X,$,F);break e}$=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=se.payload,F=typeof te=="function"?te.call(X,$,F):te,F==null)break e;$=Q({},$,F);break e;case 2:lr=!0}}x.callback!==null&&x.lane!==0&&(n.flags|=64,F=h.effects,F===null?h.effects=[x]:F.push(x))}else X={eventTime:X,lane:F,tag:x.tag,payload:x.payload,callback:x.callback,next:null},U===null?(A=U=X,S=$):U=U.next=X,v|=F;if(x=x.next,x===null){if(x=h.shared.pending,x===null)break;F=x,x=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);if(U===null&&(S=$),h.baseState=S,h.firstBaseUpdate=A,h.lastBaseUpdate=U,s=h.shared.interleaved,s!==null){h=s;do v|=h.lane,h=h.next;while(h!==s)}else p===null&&(h.shared.lanes=0);Vr|=v,n.lanes=v,n.memoizedState=$}}function up(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var ji={},vn=ir(ji),Di=ir(ji),Oi=ir(ji);function Br(n){if(n===ji)throw Error(t(174));return n}function eu(n,s){switch(Fe(Oi,s),Fe(Di,n),Fe(vn,ji),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:bt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=bt(s,n)}We(vn),Fe(vn,s)}function Ps(){We(vn),We(Di),We(Oi)}function dp(n){Br(Oi.current);var s=Br(vn.current),a=bt(s,n.type);s!==a&&(Fe(Di,n),Fe(vn,a))}function tu(n){Di.current===n&&(We(vn),We(Di))}var Ye=ir(0);function wa(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var nu=[];function ru(){for(var n=0;n<nu.length;n++)nu[n]._workInProgressVersionPrimary=null;nu.length=0}var xa=H.ReactCurrentDispatcher,su=H.ReactCurrentBatchConfig,Wr=0,Je=null,at=null,dt=null,Ea=!1,Li=!1,Mi=0,Z0=0;function xt(){throw Error(t(321))}function iu(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!tn(n[a],s[a]))return!1;return!0}function ou(n,s,a,c,h,p){if(Wr=p,Je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,xa.current=n===null||n.memoizedState===null?rw:sw,n=a(c,h),Li){p=0;do{if(Li=!1,Mi=0,25<=p)throw Error(t(301));p+=1,dt=at=null,s.updateQueue=null,xa.current=iw,n=a(c,h)}while(Li)}if(xa.current=Na,s=at!==null&&at.next!==null,Wr=0,dt=at=Je=null,Ea=!1,s)throw Error(t(300));return n}function au(){var n=Mi!==0;return Mi=0,n}function _n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Je.memoizedState=dt=n:dt=dt.next=n,dt}function Kt(){if(at===null){var n=Je.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var s=dt===null?Je.memoizedState:dt.next;if(s!==null)dt=s,at=n;else{if(n===null)throw Error(t(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},dt===null?Je.memoizedState=dt=n:dt=dt.next=n}return dt}function Fi(n,s){return typeof s=="function"?s(n):s}function lu(n){var s=Kt(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=at,h=c.baseQueue,p=a.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}c.baseQueue=h=p,a.pending=null}if(h!==null){p=h.next,c=c.baseState;var x=v=null,S=null,A=p;do{var U=A.lane;if((Wr&U)===U)S!==null&&(S=S.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),c=A.hasEagerState?A.eagerState:n(c,A.action);else{var $={lane:U,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};S===null?(x=S=$,v=c):S=S.next=$,Je.lanes|=U,Vr|=U}A=A.next}while(A!==null&&A!==p);S===null?v=c:S.next=x,tn(c,s.memoizedState)||(jt=!0),s.memoizedState=c,s.baseState=v,s.baseQueue=S,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do p=h.lane,Je.lanes|=p,Vr|=p,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function cu(n){var s=Kt(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,p=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do p=n(p,v.action),v=v.next;while(v!==h);tn(p,s.memoizedState)||(jt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function hp(){}function fp(n,s){var a=Je,c=Kt(),h=s(),p=!tn(c.memoizedState,h);if(p&&(c.memoizedState=h,jt=!0),c=c.queue,uu(gp.bind(null,a,c,n),[n]),c.getSnapshot!==s||p||dt!==null&&dt.memoizedState.tag&1){if(a.flags|=2048,Ui(9,mp.bind(null,a,c,h,s),void 0,null),ht===null)throw Error(t(349));(Wr&30)!==0||pp(a,s,h)}return h}function pp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Je.updateQueue,s===null?(s={lastEffect:null,stores:null},Je.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function mp(n,s,a,c){s.value=a,s.getSnapshot=c,vp(s)&&_p(n)}function gp(n,s,a){return a(function(){vp(s)&&_p(n)})}function vp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!tn(n,a)}catch{return!0}}function _p(n){var s=bn(n,1);s!==null&&an(s,n,1,-1)}function yp(n){var s=_n();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:n},s.queue=n,n=n.dispatch=nw.bind(null,Je,n),[s.memoizedState,n]}function Ui(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=Je.updateQueue,s===null?(s={lastEffect:null,stores:null},Je.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function wp(){return Kt().memoizedState}function Sa(n,s,a,c){var h=_n();Je.flags|=n,h.memoizedState=Ui(1|s,a,void 0,c===void 0?null:c)}function Ca(n,s,a,c){var h=Kt();c=c===void 0?null:c;var p=void 0;if(at!==null){var v=at.memoizedState;if(p=v.destroy,c!==null&&iu(c,v.deps)){h.memoizedState=Ui(s,a,p,c);return}}Je.flags|=n,h.memoizedState=Ui(1|s,a,p,c)}function xp(n,s){return Sa(8390656,8,n,s)}function uu(n,s){return Ca(2048,8,n,s)}function Ep(n,s){return Ca(4,2,n,s)}function Sp(n,s){return Ca(4,4,n,s)}function Cp(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Np(n,s,a){return a=a!=null?a.concat([n]):null,Ca(4,4,Cp.bind(null,s,n),a)}function du(){}function Ip(n,s){var a=Kt();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&iu(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Tp(n,s){var a=Kt();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&iu(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function kp(n,s,a){return(Wr&21)===0?(n.baseState&&(n.baseState=!1,jt=!0),n.memoizedState=a):(tn(a,s)||(a=rf(),Je.lanes|=a,Vr|=a,n.baseState=!0),s)}function ew(n,s){var a=je;je=a!==0&&4>a?a:4,n(!0);var c=su.transition;su.transition={};try{n(!1),s()}finally{je=a,su.transition=c}}function Pp(){return Kt().memoizedState}function tw(n,s,a){var c=fr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},bp(n))Rp(s,a);else if(a=ap(n,s,a,c),a!==null){var h=It();an(a,n,c,h),Ap(a,s,c)}}function nw(n,s,a){var c=fr(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(bp(n))Rp(s,h);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,x=p(v,a);if(h.hasEagerState=!0,h.eagerState=x,tn(x,v)){var S=s.interleaved;S===null?(h.next=h,Xc(s)):(h.next=S.next,S.next=h),s.interleaved=h;return}}catch{}finally{}a=ap(n,s,h,c),a!==null&&(h=It(),an(a,n,c,h),Ap(a,s,c))}}function bp(n){var s=n.alternate;return n===Je||s!==null&&s===Je}function Rp(n,s){Li=Ea=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Ap(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,fc(n,a)}}var Na={readContext:Gt,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},rw={readContext:Gt,useCallback:function(n,s){return _n().memoizedState=[n,s===void 0?null:s],n},useContext:Gt,useEffect:xp,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Sa(4194308,4,Cp.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Sa(4194308,4,n,s)},useInsertionEffect:function(n,s){return Sa(4,2,n,s)},useMemo:function(n,s){var a=_n();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=_n();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=tw.bind(null,Je,n),[c.memoizedState,n]},useRef:function(n){var s=_n();return n={current:n},s.memoizedState=n},useState:yp,useDebugValue:du,useDeferredValue:function(n){return _n().memoizedState=n},useTransition:function(){var n=yp(!1),s=n[0];return n=ew.bind(null,n[1]),_n().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=Je,h=_n();if(He){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),ht===null)throw Error(t(349));(Wr&30)!==0||pp(c,s,a)}h.memoizedState=a;var p={value:a,getSnapshot:s};return h.queue=p,xp(gp.bind(null,c,p,n),[n]),c.flags|=2048,Ui(9,mp.bind(null,c,p,a,s),void 0,null),a},useId:function(){var n=_n(),s=ht.identifierPrefix;if(He){var a=Pn,c=kn;a=(c&~(1<<32-en(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Mi++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Z0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},sw={readContext:Gt,useCallback:Ip,useContext:Gt,useEffect:uu,useImperativeHandle:Np,useInsertionEffect:Ep,useLayoutEffect:Sp,useMemo:Tp,useReducer:lu,useRef:wp,useState:function(){return lu(Fi)},useDebugValue:du,useDeferredValue:function(n){var s=Kt();return kp(s,at.memoizedState,n)},useTransition:function(){var n=lu(Fi)[0],s=Kt().memoizedState;return[n,s]},useMutableSource:hp,useSyncExternalStore:fp,useId:Pp,unstable_isNewReconciler:!1},iw={readContext:Gt,useCallback:Ip,useContext:Gt,useEffect:uu,useImperativeHandle:Np,useInsertionEffect:Ep,useLayoutEffect:Sp,useMemo:Tp,useReducer:cu,useRef:wp,useState:function(){return cu(Fi)},useDebugValue:du,useDeferredValue:function(n){var s=Kt();return at===null?s.memoizedState=n:kp(s,at.memoizedState,n)},useTransition:function(){var n=cu(Fi)[0],s=Kt().memoizedState;return[n,s]},useMutableSource:hp,useSyncExternalStore:fp,useId:Pp,unstable_isNewReconciler:!1};function rn(n,s){if(n&&n.defaultProps){s=Q({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function hu(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:Q({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ia={isMounted:function(n){return(n=n._reactInternals)?Lr(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=It(),h=fr(n),p=Rn(c,h);p.payload=s,a!=null&&(p.callback=a),s=cr(n,p,h),s!==null&&(an(s,n,h,c),_a(s,n,h))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=It(),h=fr(n),p=Rn(c,h);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=cr(n,p,h),s!==null&&(an(s,n,h,c),_a(s,n,h))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=It(),c=fr(n),h=Rn(a,c);h.tag=2,s!=null&&(h.callback=s),s=cr(n,h,c),s!==null&&(an(s,n,c,a),_a(s,n,c))}};function jp(n,s,a,c,h,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,v):s.prototype&&s.prototype.isPureReactComponent?!Ni(a,c)||!Ni(h,p):!0}function Dp(n,s,a){var c=!1,h=or,p=s.contextType;return typeof p=="object"&&p!==null?p=Gt(p):(h=At(s)?Fr:wt.current,c=s.contextTypes,p=(c=c!=null)?Es(n,h):or),s=new s(a,p),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ia,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=p),s}function Op(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Ia.enqueueReplaceState(s,s.state,null)}function fu(n,s,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},Zc(n);var p=s.contextType;typeof p=="object"&&p!==null?h.context=Gt(p):(p=At(s)?Fr:wt.current,h.context=Es(n,p)),h.state=n.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(hu(n,s,p,a),h.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&Ia.enqueueReplaceState(h,h.state,null),ya(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function bs(n,s){try{var a="",c=s;do a+=Y(c),c=c.return;while(c);var h=a}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:s,stack:h,digest:null}}function pu(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function mu(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var ow=typeof WeakMap=="function"?WeakMap:Map;function Lp(n,s,a){a=Rn(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){ja||(ja=!0,bu=c),mu(n,s)},a}function Mp(n,s,a){a=Rn(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=s.value;a.payload=function(){return c(h)},a.callback=function(){mu(n,s)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){mu(n,s),typeof c!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function Fp(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new ow;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(a)||(h.add(a),n=ww.bind(null,n,s,a),s.then(n,n))}function Up(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function $p(n,s,a,c,h){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Rn(-1,1),s.tag=2,cr(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var aw=H.ReactCurrentOwner,jt=!1;function Nt(n,s,a,c){s.child=n===null?op(s,null,a,c):Is(s,n.child,a,c)}function zp(n,s,a,c,h){a=a.render;var p=s.ref;return ks(s,h),c=ou(n,s,a,c,p,h),a=au(),n!==null&&!jt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~h,An(n,s,h)):(He&&a&&Wc(s),s.flags|=1,Nt(n,s,c,h),s.child)}function Bp(n,s,a,c,h){if(n===null){var p=a.type;return typeof p=="function"&&!Mu(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,Wp(n,s,p,c,h)):(n=Ua(a.type,null,c,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,(n.lanes&h)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ni,a(v,c)&&n.ref===s.ref)return An(n,s,h)}return s.flags|=1,n=mr(p,c),n.ref=s.ref,n.return=s,s.child=n}function Wp(n,s,a,c,h){if(n!==null){var p=n.memoizedProps;if(Ni(p,c)&&n.ref===s.ref)if(jt=!1,s.pendingProps=c=p,(n.lanes&h)!==0)(n.flags&131072)!==0&&(jt=!0);else return s.lanes=n.lanes,An(n,s,h)}return gu(n,s,a,c,h)}function Vp(n,s,a){var c=s.pendingProps,h=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(As,zt),zt|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Fe(As,zt),zt|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Fe(As,zt),zt|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,Fe(As,zt),zt|=c;return Nt(n,s,h,a),s.child}function Hp(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function gu(n,s,a,c,h){var p=At(a)?Fr:wt.current;return p=Es(s,p),ks(s,h),a=ou(n,s,a,c,p,h),c=au(),n!==null&&!jt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~h,An(n,s,h)):(He&&c&&Wc(s),s.flags|=1,Nt(n,s,a,h),s.child)}function qp(n,s,a,c,h){if(At(a)){var p=!0;ua(s)}else p=!1;if(ks(s,h),s.stateNode===null)ka(n,s),Dp(s,a,c),fu(s,a,c,h),c=!0;else if(n===null){var v=s.stateNode,x=s.memoizedProps;v.props=x;var S=v.context,A=a.contextType;typeof A=="object"&&A!==null?A=Gt(A):(A=At(a)?Fr:wt.current,A=Es(s,A));var U=a.getDerivedStateFromProps,$=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function";$||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==c||S!==A)&&Op(s,v,c,A),lr=!1;var F=s.memoizedState;v.state=F,ya(s,c,v,h),S=s.memoizedState,x!==c||F!==S||Rt.current||lr?(typeof U=="function"&&(hu(s,a,U,c),S=s.memoizedState),(x=lr||jp(s,a,x,c,F,S,A))?($||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=S),v.props=c,v.state=S,v.context=A,c=x):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,lp(n,s),x=s.memoizedProps,A=s.type===s.elementType?x:rn(s.type,x),v.props=A,$=s.pendingProps,F=v.context,S=a.contextType,typeof S=="object"&&S!==null?S=Gt(S):(S=At(a)?Fr:wt.current,S=Es(s,S));var X=a.getDerivedStateFromProps;(U=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==$||F!==S)&&Op(s,v,c,S),lr=!1,F=s.memoizedState,v.state=F,ya(s,c,v,h);var te=s.memoizedState;x!==$||F!==te||Rt.current||lr?(typeof X=="function"&&(hu(s,a,X,c),te=s.memoizedState),(A=lr||jp(s,a,A,c,F,te,S)||!1)?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,te,S),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,te,S)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||x===n.memoizedProps&&F===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&F===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=te),v.props=c,v.state=te,v.context=S,c=A):(typeof v.componentDidUpdate!="function"||x===n.memoizedProps&&F===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&F===n.memoizedState||(s.flags|=1024),c=!1)}return vu(n,s,a,c,p,h)}function vu(n,s,a,c,h,p){Hp(n,s);var v=(s.flags&128)!==0;if(!c&&!v)return h&&Jf(s,a,!1),An(n,s,p);c=s.stateNode,aw.current=s;var x=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&v?(s.child=Is(s,n.child,null,p),s.child=Is(s,null,x,p)):Nt(n,s,x,p),s.memoizedState=c.state,h&&Jf(s,a,!0),s.child}function Gp(n){var s=n.stateNode;s.pendingContext?Qf(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Qf(n,s.context,!1),eu(n,s.containerInfo)}function Kp(n,s,a,c,h){return Ns(),Gc(h),s.flags|=256,Nt(n,s,a,c),s.child}var _u={dehydrated:null,treeContext:null,retryLane:0};function yu(n){return{baseLanes:n,cachePool:null,transitions:null}}function Qp(n,s,a){var c=s.pendingProps,h=Ye.current,p=!1,v=(s.flags&128)!==0,x;if((x=v)||(x=n!==null&&n.memoizedState===null?!1:(h&2)!==0),x?(p=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),Fe(Ye,h&1),n===null)return qc(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=c.children,n=c.fallback,p?(c=s.mode,p=s.child,v={mode:"hidden",children:v},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=$a(v,c,0,null),n=Kr(n,c,a,null),p.return=s,n.return=s,p.sibling=n,s.child=p,s.child.memoizedState=yu(a),s.memoizedState=_u,n):wu(s,v));if(h=n.memoizedState,h!==null&&(x=h.dehydrated,x!==null))return lw(n,s,v,c,x,h,a);if(p){p=c.fallback,v=s.mode,h=n.child,x=h.sibling;var S={mode:"hidden",children:c.children};return(v&1)===0&&s.child!==h?(c=s.child,c.childLanes=0,c.pendingProps=S,s.deletions=null):(c=mr(h,S),c.subtreeFlags=h.subtreeFlags&14680064),x!==null?p=mr(x,p):(p=Kr(p,v,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,v=n.child.memoizedState,v=v===null?yu(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~a,s.memoizedState=_u,c}return p=n.child,n=p.sibling,c=mr(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function wu(n,s){return s=$a({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Ta(n,s,a,c){return c!==null&&Gc(c),Is(s,n.child,null,a),n=wu(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function lw(n,s,a,c,h,p,v){if(a)return s.flags&256?(s.flags&=-257,c=pu(Error(t(422))),Ta(n,s,v,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(p=c.fallback,h=s.mode,c=$a({mode:"visible",children:c.children},h,0,null),p=Kr(p,h,v,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&Is(s,n.child,null,v),s.child.memoizedState=yu(v),s.memoizedState=_u,p);if((s.mode&1)===0)return Ta(n,s,v,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var x=c.dgst;return c=x,p=Error(t(419)),c=pu(p,c,void 0),Ta(n,s,v,c)}if(x=(v&n.childLanes)!==0,jt||x){if(c=ht,c!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|v))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,bn(n,h),an(c,n,h,-1))}return Lu(),c=pu(Error(t(421))),Ta(n,s,v,c)}return h.data==="$?"?(s.flags|=128,s.child=n.child,s=xw.bind(null,n),h._reactRetry=s,null):(n=p.treeContext,$t=sr(h.nextSibling),Ut=s,He=!0,nn=null,n!==null&&(Ht[qt++]=kn,Ht[qt++]=Pn,Ht[qt++]=Ur,kn=n.id,Pn=n.overflow,Ur=s),s=wu(s,c.children),s.flags|=4096,s)}function Yp(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Jc(n.return,s,a)}function xu(n,s,a,c,h){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=h)}function Jp(n,s,a){var c=s.pendingProps,h=c.revealOrder,p=c.tail;if(Nt(n,s,c.children,a),c=Ye.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Yp(n,a,s);else if(n.tag===19)Yp(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Fe(Ye,c),(s.mode&1)===0)s.memoizedState=null;else switch(h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&wa(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),xu(s,!1,h,a,p);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&wa(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}xu(s,!0,a,null,p);break;case"together":xu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ka(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function An(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Vr|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=mr(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=mr(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function cw(n,s,a){switch(s.tag){case 3:Gp(s),Ns();break;case 5:dp(s);break;case 1:At(s.type)&&ua(s);break;case 4:eu(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,h=s.memoizedProps.value;Fe(ga,c._currentValue),c._currentValue=h;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Fe(Ye,Ye.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Qp(n,s,a):(Fe(Ye,Ye.current&1),n=An(n,s,a),n!==null?n.sibling:null);Fe(Ye,Ye.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Jp(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Fe(Ye,Ye.current),c)break;return null;case 22:case 23:return s.lanes=0,Vp(n,s,a)}return An(n,s,a)}var Xp,Eu,Zp,em;Xp=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Eu=function(){},Zp=function(n,s,a,c){var h=n.memoizedProps;if(h!==c){n=s.stateNode,Br(vn.current);var p=null;switch(a){case"input":h=li(n,h),c=li(n,c),p=[];break;case"select":h=Q({},h,{value:void 0}),c=Q({},c,{value:void 0}),p=[];break;case"textarea":h=ci(n,h),c=ci(n,c),p=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=aa)}Se(a,c);var v;a=null;for(A in h)if(!c.hasOwnProperty(A)&&h.hasOwnProperty(A)&&h[A]!=null)if(A==="style"){var x=h[A];for(v in x)x.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(o.hasOwnProperty(A)?p||(p=[]):(p=p||[]).push(A,null));for(A in c){var S=c[A];if(x=h!=null?h[A]:void 0,c.hasOwnProperty(A)&&S!==x&&(S!=null||x!=null))if(A==="style")if(x){for(v in x)!x.hasOwnProperty(v)||S&&S.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in S)S.hasOwnProperty(v)&&x[v]!==S[v]&&(a||(a={}),a[v]=S[v])}else a||(p||(p=[]),p.push(A,a)),a=S;else A==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,x=x?x.__html:void 0,S!=null&&x!==S&&(p=p||[]).push(A,S)):A==="children"?typeof S!="string"&&typeof S!="number"||(p=p||[]).push(A,""+S):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(o.hasOwnProperty(A)?(S!=null&&A==="onScroll"&&Be("scroll",n),p||x===S||(p=[])):(p=p||[]).push(A,S))}a&&(p=p||[]).push("style",a);var A=p;(s.updateQueue=A)&&(s.flags|=4)}},em=function(n,s,a,c){a!==c&&(s.flags|=4)};function $i(n,s){if(!He)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Et(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function uw(n,s,a){var c=s.pendingProps;switch(Vc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return At(s.type)&&ca(),Et(s),null;case 3:return c=s.stateNode,Ps(),We(Rt),We(wt),ru(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(pa(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,nn!==null&&(ju(nn),nn=null))),Eu(n,s),Et(s),null;case 5:tu(s);var h=Br(Oi.current);if(a=s.type,n!==null&&s.stateNode!=null)Zp(n,s,a,c,h),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Et(s),null}if(n=Br(vn.current),pa(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[gn]=s,c[bi]=p,n=(s.mode&1)!==0,a){case"dialog":Be("cancel",c),Be("close",c);break;case"iframe":case"object":case"embed":Be("load",c);break;case"video":case"audio":for(h=0;h<Ti.length;h++)Be(Ti[h],c);break;case"source":Be("error",c);break;case"img":case"image":case"link":Be("error",c),Be("load",c);break;case"details":Be("toggle",c);break;case"input":Mo(c,p),Be("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Be("invalid",c);break;case"textarea":L(c,p),Be("invalid",c)}Se(a,p),h=null;for(var v in p)if(p.hasOwnProperty(v)){var x=p[v];v==="children"?typeof x=="string"?c.textContent!==x&&(p.suppressHydrationWarning!==!0&&oa(c.textContent,x,n),h=["children",x]):typeof x=="number"&&c.textContent!==""+x&&(p.suppressHydrationWarning!==!0&&oa(c.textContent,x,n),h=["children",""+x]):o.hasOwnProperty(v)&&x!=null&&v==="onScroll"&&Be("scroll",c)}switch(a){case"input":Pe(c),Fo(c,p,!0);break;case"textarea":Pe(c),Ke(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=aa)}c=h,s.updateQueue=c,c!==null&&(s.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Qe(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[gn]=s,n[bi]=c,Xp(n,s,!1,!1),s.stateNode=n;e:{switch(v=be(a,c),a){case"dialog":Be("cancel",n),Be("close",n),h=c;break;case"iframe":case"object":case"embed":Be("load",n),h=c;break;case"video":case"audio":for(h=0;h<Ti.length;h++)Be(Ti[h],n);h=c;break;case"source":Be("error",n),h=c;break;case"img":case"image":case"link":Be("error",n),Be("load",n),h=c;break;case"details":Be("toggle",n),h=c;break;case"input":Mo(n,c),h=li(n,c),Be("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=Q({},c,{value:void 0}),Be("invalid",n);break;case"textarea":L(n,c),h=ci(n,c),Be("invalid",n);break;default:h=c}Se(a,h),x=h;for(p in x)if(x.hasOwnProperty(p)){var S=x[p];p==="style"?Jn(n,S):p==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&Cn(n,S)):p==="children"?typeof S=="string"?(a!=="textarea"||S!=="")&&Nn(n,S):typeof S=="number"&&Nn(n,""+S):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?S!=null&&p==="onScroll"&&Be("scroll",n):S!=null&&K(n,p,S,v))}switch(a){case"input":Pe(n),Fo(n,c,!1);break;case"textarea":Pe(n),Ke(n);break;case"option":c.value!=null&&n.setAttribute("value",""+V(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Kn(n,!!c.multiple,p,!1):c.defaultValue!=null&&Kn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=aa)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Et(s),null;case 6:if(n&&s.stateNode!=null)em(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Br(Oi.current),Br(vn.current),pa(s)){if(c=s.stateNode,a=s.memoizedProps,c[gn]=s,(p=c.nodeValue!==a)&&(n=Ut,n!==null))switch(n.tag){case 3:oa(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&oa(c.nodeValue,a,(n.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[gn]=s,s.stateNode=c}return Et(s),null;case 13:if(We(Ye),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(He&&$t!==null&&(s.mode&1)!==0&&(s.flags&128)===0)rp(),Ns(),s.flags|=98560,p=!1;else if(p=pa(s),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[gn]=s}else Ns(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),p=!1}else nn!==null&&(ju(nn),nn=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Ye.current&1)!==0?lt===0&&(lt=3):Lu())),s.updateQueue!==null&&(s.flags|=4),Et(s),null);case 4:return Ps(),Eu(n,s),n===null&&ki(s.stateNode.containerInfo),Et(s),null;case 10:return Yc(s.type._context),Et(s),null;case 17:return At(s.type)&&ca(),Et(s),null;case 19:if(We(Ye),p=s.memoizedState,p===null)return Et(s),null;if(c=(s.flags&128)!==0,v=p.rendering,v===null)if(c)$i(p,!1);else{if(lt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=wa(n),v!==null){for(s.flags|=128,$i(p,!1),c=v.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,n=c,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Fe(Ye,Ye.current&1|2),s.child}n=n.sibling}p.tail!==null&&rt()>js&&(s.flags|=128,c=!0,$i(p,!1),s.lanes=4194304)}else{if(!c)if(n=wa(v),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),$i(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!He)return Et(s),null}else 2*rt()-p.renderingStartTime>js&&a!==1073741824&&(s.flags|=128,c=!0,$i(p,!1),s.lanes=4194304);p.isBackwards?(v.sibling=s.child,s.child=v):(a=p.last,a!==null?a.sibling=v:s.child=v,p.last=v)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=rt(),s.sibling=null,a=Ye.current,Fe(Ye,c?a&1|2:a&1),s):(Et(s),null);case 22:case 23:return Ou(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(zt&1073741824)!==0&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function dw(n,s){switch(Vc(s),s.tag){case 1:return At(s.type)&&ca(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ps(),We(Rt),We(wt),ru(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return tu(s),null;case 13:if(We(Ye),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ns()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return We(Ye),null;case 4:return Ps(),null;case 10:return Yc(s.type._context),null;case 22:case 23:return Ou(),null;case 24:return null;default:return null}}var Pa=!1,St=!1,hw=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Rs(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Ze(n,s,c)}else a.current=null}function Su(n,s,a){try{a()}catch(c){Ze(n,s,c)}}var tm=!1;function fw(n,s){if(Oc=Qo,n=jf(),Tc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,x=-1,S=-1,A=0,U=0,$=n,F=null;t:for(;;){for(var X;$!==a||h!==0&&$.nodeType!==3||(x=v+h),$!==p||c!==0&&$.nodeType!==3||(S=v+c),$.nodeType===3&&(v+=$.nodeValue.length),(X=$.firstChild)!==null;)F=$,$=X;for(;;){if($===n)break t;if(F===a&&++A===h&&(x=v),F===p&&++U===c&&(S=v),(X=$.nextSibling)!==null)break;$=F,F=$.parentNode}$=X}a=x===-1||S===-1?null:{start:x,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lc={focusedElem:n,selectionRange:a},Qo=!1,Z=s;Z!==null;)if(s=Z,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Z=n;else for(;Z!==null;){s=Z;try{var te=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var se=te.memoizedProps,st=te.memoizedState,k=s.stateNode,C=k.getSnapshotBeforeUpdate(s.elementType===s.type?se:rn(s.type,se),st);k.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var P=s.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(B){Ze(s,s.return,B)}if(n=s.sibling,n!==null){n.return=s.return,Z=n;break}Z=s.return}return te=tm,tm=!1,te}function zi(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var p=h.destroy;h.destroy=void 0,p!==void 0&&Su(s,a,p)}h=h.next}while(h!==c)}}function ba(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Cu(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function nm(n){var s=n.alternate;s!==null&&(n.alternate=null,nm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[gn],delete s[bi],delete s[$c],delete s[Q0],delete s[Y0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rm(n){return n.tag===5||n.tag===3||n.tag===4}function sm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nu(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=aa));else if(c!==4&&(n=n.child,n!==null))for(Nu(n,s,a),n=n.sibling;n!==null;)Nu(n,s,a),n=n.sibling}function Iu(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Iu(n,s,a),n=n.sibling;n!==null;)Iu(n,s,a),n=n.sibling}var gt=null,sn=!1;function ur(n,s,a){for(a=a.child;a!==null;)im(n,s,a),a=a.sibling}function im(n,s,a){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Wo,a)}catch{}switch(a.tag){case 5:St||Rs(a,s);case 6:var c=gt,h=sn;gt=null,ur(n,s,a),gt=c,sn=h,gt!==null&&(sn?(n=gt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):gt.removeChild(a.stateNode));break;case 18:gt!==null&&(sn?(n=gt,a=a.stateNode,n.nodeType===8?Uc(n.parentNode,a):n.nodeType===1&&Uc(n,a),yi(n)):Uc(gt,a.stateNode));break;case 4:c=gt,h=sn,gt=a.stateNode.containerInfo,sn=!0,ur(n,s,a),gt=c,sn=h;break;case 0:case 11:case 14:case 15:if(!St&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var p=h,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&Su(a,s,v),h=h.next}while(h!==c)}ur(n,s,a);break;case 1:if(!St&&(Rs(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(x){Ze(a,s,x)}ur(n,s,a);break;case 21:ur(n,s,a);break;case 22:a.mode&1?(St=(c=St)||a.memoizedState!==null,ur(n,s,a),St=c):ur(n,s,a);break;default:ur(n,s,a)}}function om(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new hw),s.forEach(function(c){var h=Ew.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function on(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var p=n,v=s,x=v;e:for(;x!==null;){switch(x.tag){case 5:gt=x.stateNode,sn=!1;break e;case 3:gt=x.stateNode.containerInfo,sn=!0;break e;case 4:gt=x.stateNode.containerInfo,sn=!0;break e}x=x.return}if(gt===null)throw Error(t(160));im(p,v,h),gt=null,sn=!1;var S=h.alternate;S!==null&&(S.return=null),h.return=null}catch(A){Ze(h,s,A)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)am(s,n),s=s.sibling}function am(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(on(s,n),yn(n),c&4){try{zi(3,n,n.return),ba(3,n)}catch(se){Ze(n,n.return,se)}try{zi(5,n,n.return)}catch(se){Ze(n,n.return,se)}}break;case 1:on(s,n),yn(n),c&512&&a!==null&&Rs(a,a.return);break;case 5:if(on(s,n),yn(n),c&512&&a!==null&&Rs(a,a.return),n.flags&32){var h=n.stateNode;try{Nn(h,"")}catch(se){Ze(n,n.return,se)}}if(c&4&&(h=n.stateNode,h!=null)){var p=n.memoizedProps,v=a!==null?a.memoizedProps:p,x=n.type,S=n.updateQueue;if(n.updateQueue=null,S!==null)try{x==="input"&&p.type==="radio"&&p.name!=null&&nc(h,p),be(x,v);var A=be(x,p);for(v=0;v<S.length;v+=2){var U=S[v],$=S[v+1];U==="style"?Jn(h,$):U==="dangerouslySetInnerHTML"?Cn(h,$):U==="children"?Nn(h,$):K(h,U,$,A)}switch(x){case"input":Ve(h,p);break;case"textarea":ie(h,p);break;case"select":var F=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var X=p.value;X!=null?Kn(h,!!p.multiple,X,!1):F!==!!p.multiple&&(p.defaultValue!=null?Kn(h,!!p.multiple,p.defaultValue,!0):Kn(h,!!p.multiple,p.multiple?[]:"",!1))}h[bi]=p}catch(se){Ze(n,n.return,se)}}break;case 6:if(on(s,n),yn(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,p=n.memoizedProps;try{h.nodeValue=p}catch(se){Ze(n,n.return,se)}}break;case 3:if(on(s,n),yn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{yi(s.containerInfo)}catch(se){Ze(n,n.return,se)}break;case 4:on(s,n),yn(n);break;case 13:on(s,n),yn(n),h=n.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Pu=rt())),c&4&&om(n);break;case 22:if(U=a!==null&&a.memoizedState!==null,n.mode&1?(St=(A=St)||U,on(s,n),St=A):on(s,n),yn(n),c&8192){if(A=n.memoizedState!==null,(n.stateNode.isHidden=A)&&!U&&(n.mode&1)!==0)for(Z=n,U=n.child;U!==null;){for($=Z=U;Z!==null;){switch(F=Z,X=F.child,F.tag){case 0:case 11:case 14:case 15:zi(4,F,F.return);break;case 1:Rs(F,F.return);var te=F.stateNode;if(typeof te.componentWillUnmount=="function"){c=F,a=F.return;try{s=c,te.props=s.memoizedProps,te.state=s.memoizedState,te.componentWillUnmount()}catch(se){Ze(c,a,se)}}break;case 5:Rs(F,F.return);break;case 22:if(F.memoizedState!==null){um($);continue}}X!==null?(X.return=F,Z=X):um($)}U=U.sibling}e:for(U=null,$=n;;){if($.tag===5){if(U===null){U=$;try{h=$.stateNode,A?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(x=$.stateNode,S=$.memoizedProps.style,v=S!=null&&S.hasOwnProperty("display")?S.display:null,x.style.display=Yn("display",v))}catch(se){Ze(n,n.return,se)}}}else if($.tag===6){if(U===null)try{$.stateNode.nodeValue=A?"":$.memoizedProps}catch(se){Ze(n,n.return,se)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===n)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===n)break e;for(;$.sibling===null;){if($.return===null||$.return===n)break e;U===$&&(U=null),$=$.return}U===$&&(U=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:on(s,n),yn(n),c&4&&om(n);break;case 21:break;default:on(s,n),yn(n)}}function yn(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(rm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(Nn(h,""),c.flags&=-33);var p=sm(n);Iu(n,p,h);break;case 3:case 4:var v=c.stateNode.containerInfo,x=sm(n);Nu(n,x,v);break;default:throw Error(t(161))}}catch(S){Ze(n,n.return,S)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function pw(n,s,a){Z=n,lm(n)}function lm(n,s,a){for(var c=(n.mode&1)!==0;Z!==null;){var h=Z,p=h.child;if(h.tag===22&&c){var v=h.memoizedState!==null||Pa;if(!v){var x=h.alternate,S=x!==null&&x.memoizedState!==null||St;x=Pa;var A=St;if(Pa=v,(St=S)&&!A)for(Z=h;Z!==null;)v=Z,S=v.child,v.tag===22&&v.memoizedState!==null?dm(h):S!==null?(S.return=v,Z=S):dm(h);for(;p!==null;)Z=p,lm(p),p=p.sibling;Z=h,Pa=x,St=A}cm(n)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,Z=p):cm(n)}}function cm(n){for(;Z!==null;){var s=Z;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:St||ba(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!St)if(a===null)c.componentDidMount();else{var h=s.elementType===s.type?a.memoizedProps:rn(s.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&up(s,p,c);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}up(s,v,a)}break;case 5:var x=s.stateNode;if(a===null&&s.flags&4){a=x;var S=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&a.focus();break;case"img":S.src&&(a.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var A=s.alternate;if(A!==null){var U=A.memoizedState;if(U!==null){var $=U.dehydrated;$!==null&&yi($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}St||s.flags&512&&Cu(s)}catch(F){Ze(s,s.return,F)}}if(s===n){Z=null;break}if(a=s.sibling,a!==null){a.return=s.return,Z=a;break}Z=s.return}}function um(n){for(;Z!==null;){var s=Z;if(s===n){Z=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Z=a;break}Z=s.return}}function dm(n){for(;Z!==null;){var s=Z;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{ba(4,s)}catch(S){Ze(s,a,S)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var h=s.return;try{c.componentDidMount()}catch(S){Ze(s,h,S)}}var p=s.return;try{Cu(s)}catch(S){Ze(s,p,S)}break;case 5:var v=s.return;try{Cu(s)}catch(S){Ze(s,v,S)}}}catch(S){Ze(s,s.return,S)}if(s===n){Z=null;break}var x=s.sibling;if(x!==null){x.return=s.return,Z=x;break}Z=s.return}}var mw=Math.ceil,Ra=H.ReactCurrentDispatcher,Tu=H.ReactCurrentOwner,Qt=H.ReactCurrentBatchConfig,Te=0,ht=null,ot=null,vt=0,zt=0,As=ir(0),lt=0,Bi=null,Vr=0,Aa=0,ku=0,Wi=null,Dt=null,Pu=0,js=1/0,jn=null,ja=!1,bu=null,dr=null,Da=!1,hr=null,Oa=0,Vi=0,Ru=null,La=-1,Ma=0;function It(){return(Te&6)!==0?rt():La!==-1?La:La=rt()}function fr(n){return(n.mode&1)===0?1:(Te&2)!==0&&vt!==0?vt&-vt:X0.transition!==null?(Ma===0&&(Ma=rf()),Ma):(n=je,n!==0||(n=window.event,n=n===void 0?16:ff(n.type)),n)}function an(n,s,a,c){if(50<Vi)throw Vi=0,Ru=null,Error(t(185));pi(n,a,c),((Te&2)===0||n!==ht)&&(n===ht&&((Te&2)===0&&(Aa|=a),lt===4&&pr(n,vt)),Ot(n,c),a===1&&Te===0&&(s.mode&1)===0&&(js=rt()+500,da&&ar()))}function Ot(n,s){var a=n.callbackNode;Xy(n,s);var c=qo(n,n===ht?vt:0);if(c===0)a!==null&&ef(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&ef(a),s===1)n.tag===0?J0(fm.bind(null,n)):Xf(fm.bind(null,n)),G0(function(){(Te&6)===0&&ar()}),a=null;else{switch(sf(c)){case 1:a=uc;break;case 4:a=tf;break;case 16:a=Bo;break;case 536870912:a=nf;break;default:a=Bo}a=xm(a,hm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function hm(n,s){if(La=-1,Ma=0,(Te&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ds()&&n.callbackNode!==a)return null;var c=qo(n,n===ht?vt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Fa(n,c);else{s=c;var h=Te;Te|=2;var p=mm();(ht!==n||vt!==s)&&(jn=null,js=rt()+500,qr(n,s));do try{_w();break}catch(x){pm(n,x)}while(!0);Qc(),Ra.current=p,Te=h,ot!==null?s=0:(ht=null,vt=0,s=lt)}if(s!==0){if(s===2&&(h=dc(n),h!==0&&(c=h,s=Au(n,h))),s===1)throw a=Bi,qr(n,0),pr(n,c),Ot(n,rt()),a;if(s===6)pr(n,c);else{if(h=n.current.alternate,(c&30)===0&&!gw(h)&&(s=Fa(n,c),s===2&&(p=dc(n),p!==0&&(c=p,s=Au(n,p))),s===1))throw a=Bi,qr(n,0),pr(n,c),Ot(n,rt()),a;switch(n.finishedWork=h,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Gr(n,Dt,jn);break;case 3:if(pr(n,c),(c&130023424)===c&&(s=Pu+500-rt(),10<s)){if(qo(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){It(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=Fc(Gr.bind(null,n,Dt,jn),s);break}Gr(n,Dt,jn);break;case 4:if(pr(n,c),(c&4194240)===c)break;for(s=n.eventTimes,h=-1;0<c;){var v=31-en(c);p=1<<v,v=s[v],v>h&&(h=v),c&=~p}if(c=h,c=rt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*mw(c/1960))-c,10<c){n.timeoutHandle=Fc(Gr.bind(null,n,Dt,jn),c);break}Gr(n,Dt,jn);break;case 5:Gr(n,Dt,jn);break;default:throw Error(t(329))}}}return Ot(n,rt()),n.callbackNode===a?hm.bind(null,n):null}function Au(n,s){var a=Wi;return n.current.memoizedState.isDehydrated&&(qr(n,s).flags|=256),n=Fa(n,s),n!==2&&(s=Dt,Dt=a,s!==null&&ju(s)),n}function ju(n){Dt===null?Dt=n:Dt.push.apply(Dt,n)}function gw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],p=h.getSnapshot;h=h.value;try{if(!tn(p(),h))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function pr(n,s){for(s&=~ku,s&=~Aa,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-en(s),c=1<<a;n[a]=-1,s&=~c}}function fm(n){if((Te&6)!==0)throw Error(t(327));Ds();var s=qo(n,0);if((s&1)===0)return Ot(n,rt()),null;var a=Fa(n,s);if(n.tag!==0&&a===2){var c=dc(n);c!==0&&(s=c,a=Au(n,c))}if(a===1)throw a=Bi,qr(n,0),pr(n,s),Ot(n,rt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Gr(n,Dt,jn),Ot(n,rt()),null}function Du(n,s){var a=Te;Te|=1;try{return n(s)}finally{Te=a,Te===0&&(js=rt()+500,da&&ar())}}function Hr(n){hr!==null&&hr.tag===0&&(Te&6)===0&&Ds();var s=Te;Te|=1;var a=Qt.transition,c=je;try{if(Qt.transition=null,je=1,n)return n()}finally{je=c,Qt.transition=a,Te=s,(Te&6)===0&&ar()}}function Ou(){zt=As.current,We(As)}function qr(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,q0(a)),ot!==null)for(a=ot.return;a!==null;){var c=a;switch(Vc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ca();break;case 3:Ps(),We(Rt),We(wt),ru();break;case 5:tu(c);break;case 4:Ps();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:Yc(c.type._context);break;case 22:case 23:Ou()}a=a.return}if(ht=n,ot=n=mr(n.current,null),vt=zt=s,lt=0,Bi=null,ku=Aa=Vr=0,Dt=Wi=null,zr!==null){for(s=0;s<zr.length;s++)if(a=zr[s],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,p=a.pending;if(p!==null){var v=p.next;p.next=h,c.next=v}a.pending=c}zr=null}return n}function pm(n,s){do{var a=ot;try{if(Qc(),xa.current=Na,Ea){for(var c=Je.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Ea=!1}if(Wr=0,dt=at=Je=null,Li=!1,Mi=0,Tu.current=null,a===null||a.return===null){lt=1,Bi=s,ot=null;break}e:{var p=n,v=a.return,x=a,S=s;if(s=vt,x.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var A=S,U=x,$=U.tag;if((U.mode&1)===0&&($===0||$===11||$===15)){var F=U.alternate;F?(U.updateQueue=F.updateQueue,U.memoizedState=F.memoizedState,U.lanes=F.lanes):(U.updateQueue=null,U.memoizedState=null)}var X=Up(v);if(X!==null){X.flags&=-257,$p(X,v,x,p,s),X.mode&1&&Fp(p,A,s),s=X,S=A;var te=s.updateQueue;if(te===null){var se=new Set;se.add(S),s.updateQueue=se}else te.add(S);break e}else{if((s&1)===0){Fp(p,A,s),Lu();break e}S=Error(t(426))}}else if(He&&x.mode&1){var st=Up(v);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),$p(st,v,x,p,s),Gc(bs(S,x));break e}}p=S=bs(S,x),lt!==4&&(lt=2),Wi===null?Wi=[p]:Wi.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var k=Lp(p,S,s);cp(p,k);break e;case 1:x=S;var C=p.type,P=p.stateNode;if((p.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(dr===null||!dr.has(P)))){p.flags|=65536,s&=-s,p.lanes|=s;var B=Mp(p,x,s);cp(p,B);break e}}p=p.return}while(p!==null)}vm(a)}catch(oe){s=oe,ot===a&&a!==null&&(ot=a=a.return);continue}break}while(!0)}function mm(){var n=Ra.current;return Ra.current=Na,n===null?Na:n}function Lu(){(lt===0||lt===3||lt===2)&&(lt=4),ht===null||(Vr&268435455)===0&&(Aa&268435455)===0||pr(ht,vt)}function Fa(n,s){var a=Te;Te|=2;var c=mm();(ht!==n||vt!==s)&&(jn=null,qr(n,s));do try{vw();break}catch(h){pm(n,h)}while(!0);if(Qc(),Te=a,Ra.current=c,ot!==null)throw Error(t(261));return ht=null,vt=0,lt}function vw(){for(;ot!==null;)gm(ot)}function _w(){for(;ot!==null&&!Wy();)gm(ot)}function gm(n){var s=wm(n.alternate,n,zt);n.memoizedProps=n.pendingProps,s===null?vm(n):ot=s,Tu.current=null}function vm(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=uw(a,s,zt),a!==null){ot=a;return}}else{if(a=dw(a,s),a!==null){a.flags&=32767,ot=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{lt=6,ot=null;return}}if(s=s.sibling,s!==null){ot=s;return}ot=s=n}while(s!==null);lt===0&&(lt=5)}function Gr(n,s,a){var c=je,h=Qt.transition;try{Qt.transition=null,je=1,yw(n,s,a,c)}finally{Qt.transition=h,je=c}return null}function yw(n,s,a,c){do Ds();while(hr!==null);if((Te&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Zy(n,p),n===ht&&(ot=ht=null,vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Da||(Da=!0,xm(Bo,function(){return Ds(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Qt.transition,Qt.transition=null;var v=je;je=1;var x=Te;Te|=4,Tu.current=null,fw(n,a),am(a,n),U0(Lc),Qo=!!Oc,Lc=Oc=null,n.current=a,pw(a),Vy(),Te=x,je=v,Qt.transition=p}else n.current=a;if(Da&&(Da=!1,hr=n,Oa=h),p=n.pendingLanes,p===0&&(dr=null),Gy(a.stateNode),Ot(n,rt()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)h=s[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(ja)throw ja=!1,n=bu,bu=null,n;return(Oa&1)!==0&&n.tag!==0&&Ds(),p=n.pendingLanes,(p&1)!==0?n===Ru?Vi++:(Vi=0,Ru=n):Vi=0,ar(),null}function Ds(){if(hr!==null){var n=sf(Oa),s=Qt.transition,a=je;try{if(Qt.transition=null,je=16>n?16:n,hr===null)var c=!1;else{if(n=hr,hr=null,Oa=0,(Te&6)!==0)throw Error(t(331));var h=Te;for(Te|=4,Z=n.current;Z!==null;){var p=Z,v=p.child;if((Z.flags&16)!==0){var x=p.deletions;if(x!==null){for(var S=0;S<x.length;S++){var A=x[S];for(Z=A;Z!==null;){var U=Z;switch(U.tag){case 0:case 11:case 15:zi(8,U,p)}var $=U.child;if($!==null)$.return=U,Z=$;else for(;Z!==null;){U=Z;var F=U.sibling,X=U.return;if(nm(U),U===A){Z=null;break}if(F!==null){F.return=X,Z=F;break}Z=X}}}var te=p.alternate;if(te!==null){var se=te.child;if(se!==null){te.child=null;do{var st=se.sibling;se.sibling=null,se=st}while(se!==null)}}Z=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,Z=v;else e:for(;Z!==null;){if(p=Z,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:zi(9,p,p.return)}var k=p.sibling;if(k!==null){k.return=p.return,Z=k;break e}Z=p.return}}var C=n.current;for(Z=C;Z!==null;){v=Z;var P=v.child;if((v.subtreeFlags&2064)!==0&&P!==null)P.return=v,Z=P;else e:for(v=C;Z!==null;){if(x=Z,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:ba(9,x)}}catch(oe){Ze(x,x.return,oe)}if(x===v){Z=null;break e}var B=x.sibling;if(B!==null){B.return=x.return,Z=B;break e}Z=x.return}}if(Te=h,ar(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Wo,n)}catch{}c=!0}return c}finally{je=a,Qt.transition=s}}return!1}function _m(n,s,a){s=bs(a,s),s=Lp(n,s,1),n=cr(n,s,1),s=It(),n!==null&&(pi(n,1,s),Ot(n,s))}function Ze(n,s,a){if(n.tag===3)_m(n,n,a);else for(;s!==null;){if(s.tag===3){_m(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(dr===null||!dr.has(c))){n=bs(a,n),n=Mp(s,n,1),s=cr(s,n,1),n=It(),s!==null&&(pi(s,1,n),Ot(s,n));break}}s=s.return}}function ww(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=It(),n.pingedLanes|=n.suspendedLanes&a,ht===n&&(vt&a)===a&&(lt===4||lt===3&&(vt&130023424)===vt&&500>rt()-Pu?qr(n,0):ku|=a),Ot(n,s)}function ym(n,s){s===0&&((n.mode&1)===0?s=1:(s=Ho,Ho<<=1,(Ho&130023424)===0&&(Ho=4194304)));var a=It();n=bn(n,s),n!==null&&(pi(n,s,a),Ot(n,a))}function xw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),ym(n,a)}function Ew(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),ym(n,a)}var wm;wm=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Rt.current)jt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return jt=!1,cw(n,s,a);jt=(n.flags&131072)!==0}else jt=!1,He&&(s.flags&1048576)!==0&&Zf(s,fa,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;ka(n,s),n=s.pendingProps;var h=Es(s,wt.current);ks(s,a),h=ou(null,s,c,n,h,a);var p=au();return s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,At(c)?(p=!0,ua(s)):p=!1,s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Zc(s),h.updater=Ia,s.stateNode=h,h._reactInternals=s,fu(s,c,n,a),s=vu(null,s,c,!0,p,a)):(s.tag=0,He&&p&&Wc(s),Nt(null,s,h,a),s=s.child),s;case 16:c=s.elementType;e:{switch(ka(n,s),n=s.pendingProps,h=c._init,c=h(c._payload),s.type=c,h=s.tag=Cw(c),n=rn(c,n),h){case 0:s=gu(null,s,c,n,a);break e;case 1:s=qp(null,s,c,n,a);break e;case 11:s=zp(null,s,c,n,a);break e;case 14:s=Bp(null,s,c,rn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:rn(c,h),gu(n,s,c,h,a);case 1:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:rn(c,h),qp(n,s,c,h,a);case 3:e:{if(Gp(s),n===null)throw Error(t(387));c=s.pendingProps,p=s.memoizedState,h=p.element,lp(n,s),ya(s,c,null,a);var v=s.memoizedState;if(c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){h=bs(Error(t(423)),s),s=Kp(n,s,c,a,h);break e}else if(c!==h){h=bs(Error(t(424)),s),s=Kp(n,s,c,a,h);break e}else for($t=sr(s.stateNode.containerInfo.firstChild),Ut=s,He=!0,nn=null,a=op(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ns(),c===h){s=An(n,s,a);break e}Nt(n,s,c,a)}s=s.child}return s;case 5:return dp(s),n===null&&qc(s),c=s.type,h=s.pendingProps,p=n!==null?n.memoizedProps:null,v=h.children,Mc(c,h)?v=null:p!==null&&Mc(c,p)&&(s.flags|=32),Hp(n,s),Nt(n,s,v,a),s.child;case 6:return n===null&&qc(s),null;case 13:return Qp(n,s,a);case 4:return eu(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Is(s,null,c,a):Nt(n,s,c,a),s.child;case 11:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:rn(c,h),zp(n,s,c,h,a);case 7:return Nt(n,s,s.pendingProps,a),s.child;case 8:return Nt(n,s,s.pendingProps.children,a),s.child;case 12:return Nt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,h=s.pendingProps,p=s.memoizedProps,v=h.value,Fe(ga,c._currentValue),c._currentValue=v,p!==null)if(tn(p.value,v)){if(p.children===h.children&&!Rt.current){s=An(n,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var x=p.dependencies;if(x!==null){v=p.child;for(var S=x.firstContext;S!==null;){if(S.context===c){if(p.tag===1){S=Rn(-1,a&-a),S.tag=2;var A=p.updateQueue;if(A!==null){A=A.shared;var U=A.pending;U===null?S.next=S:(S.next=U.next,U.next=S),A.pending=S}}p.lanes|=a,S=p.alternate,S!==null&&(S.lanes|=a),Jc(p.return,a,s),x.lanes|=a;break}S=S.next}}else if(p.tag===10)v=p.type===s.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=a,x=v.alternate,x!==null&&(x.lanes|=a),Jc(v,a,s),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===s){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Nt(n,s,h.children,a),s=s.child}return s;case 9:return h=s.type,c=s.pendingProps.children,ks(s,a),h=Gt(h),c=c(h),s.flags|=1,Nt(n,s,c,a),s.child;case 14:return c=s.type,h=rn(c,s.pendingProps),h=rn(c.type,h),Bp(n,s,c,h,a);case 15:return Wp(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:rn(c,h),ka(n,s),s.tag=1,At(c)?(n=!0,ua(s)):n=!1,ks(s,a),Dp(s,c,h),fu(s,c,h,a),vu(null,s,c,!0,n,a);case 19:return Jp(n,s,a);case 22:return Vp(n,s,a)}throw Error(t(156,s.tag))};function xm(n,s){return Zh(n,s)}function Sw(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(n,s,a,c){return new Sw(n,s,a,c)}function Mu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Cw(n){if(typeof n=="function")return Mu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ze)return 11;if(n===it)return 14}return 2}function mr(n,s){var a=n.alternate;return a===null?(a=Yt(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Ua(n,s,a,c,h,p){var v=2;if(c=n,typeof n=="function")Mu(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case J:return Kr(a.children,h,p,s);case ue:v=8,h|=8;break;case ge:return n=Yt(12,a,s,h|2),n.elementType=ge,n.lanes=p,n;case ke:return n=Yt(13,a,s,h),n.elementType=ke,n.lanes=p,n;case Ge:return n=Yt(19,a,s,h),n.elementType=Ge,n.lanes=p,n;case Ne:return $a(a,h,p,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ee:v=10;break e;case Le:v=9;break e;case ze:v=11;break e;case it:v=14;break e;case Me:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Yt(v,a,s,h),s.elementType=n,s.type=c,s.lanes=p,s}function Kr(n,s,a,c){return n=Yt(7,n,c,s),n.lanes=a,n}function $a(n,s,a,c){return n=Yt(22,n,c,s),n.elementType=Ne,n.lanes=a,n.stateNode={isHidden:!1},n}function Fu(n,s,a){return n=Yt(6,n,null,s),n.lanes=a,n}function Uu(n,s,a){return s=Yt(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Nw(n,s,a,c,h){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hc(0),this.expirationTimes=hc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hc(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function $u(n,s,a,c,h,p,v,x,S){return n=new Nw(n,s,a,x,S),s===1?(s=1,p===!0&&(s|=8)):s=0,p=Yt(3,null,null,s),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zc(p),n}function Iw(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Em(n){if(!n)return or;n=n._reactInternals;e:{if(Lr(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(At(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(At(a))return Yf(n,a,s)}return s}function Sm(n,s,a,c,h,p,v,x,S){return n=$u(a,c,!0,n,h,p,v,x,S),n.context=Em(null),a=n.current,c=It(),h=fr(a),p=Rn(c,h),p.callback=s??null,cr(a,p,h),n.current.lanes=h,pi(n,h,c),Ot(n,c),n}function za(n,s,a,c){var h=s.current,p=It(),v=fr(h);return a=Em(a),s.context===null?s.context=a:s.pendingContext=a,s=Rn(p,v),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=cr(h,s,v),n!==null&&(an(n,h,v,p),_a(n,h,v)),v}function Ba(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function zu(n,s){Cm(n,s),(n=n.alternate)&&Cm(n,s)}function Tw(){return null}var Nm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Bu(n){this._internalRoot=n}Wa.prototype.render=Bu.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));za(n,s,null,null)},Wa.prototype.unmount=Bu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Hr(function(){za(null,n,null,null)}),s[In]=null}};function Wa(n){this._internalRoot=n}Wa.prototype.unstable_scheduleHydration=function(n){if(n){var s=lf();n={blockedOn:null,target:n,priority:s};for(var a=0;a<tr.length&&s!==0&&s<tr[a].priority;a++);tr.splice(a,0,n),a===0&&df(n)}};function Wu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Va(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Im(){}function kw(n,s,a,c,h){if(h){if(typeof c=="function"){var p=c;c=function(){var A=Ba(v);p.call(A)}}var v=Sm(s,c,n,0,null,!1,!1,"",Im);return n._reactRootContainer=v,n[In]=v.current,ki(n.nodeType===8?n.parentNode:n),Hr(),v}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var x=c;c=function(){var A=Ba(S);x.call(A)}}var S=$u(n,0,!1,null,null,!1,!1,"",Im);return n._reactRootContainer=S,n[In]=S.current,ki(n.nodeType===8?n.parentNode:n),Hr(function(){za(s,S,a,c)}),S}function Ha(n,s,a,c,h){var p=a._reactRootContainer;if(p){var v=p;if(typeof h=="function"){var x=h;h=function(){var S=Ba(v);x.call(S)}}za(s,v,n,h)}else v=kw(a,s,n,h,c);return Ba(v)}of=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=fi(s.pendingLanes);a!==0&&(fc(s,a|1),Ot(s,rt()),(Te&6)===0&&(js=rt()+500,ar()))}break;case 13:Hr(function(){var c=bn(n,1);if(c!==null){var h=It();an(c,n,1,h)}}),zu(n,1)}},pc=function(n){if(n.tag===13){var s=bn(n,134217728);if(s!==null){var a=It();an(s,n,134217728,a)}zu(n,134217728)}},af=function(n){if(n.tag===13){var s=fr(n),a=bn(n,s);if(a!==null){var c=It();an(a,n,s,c)}zu(n,s)}},lf=function(){return je},cf=function(n,s){var a=je;try{return je=n,s()}finally{je=a}},oc=function(n,s,a){switch(s){case"input":if(Ve(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var h=la(c);if(!h)throw Error(t(90));Vt(c),Ve(c,h)}}}break;case"textarea":ie(n,a);break;case"select":s=a.value,s!=null&&Kn(n,!!a.multiple,s,!1)}},qh=Du,Gh=Hr;var Pw={usingClientEntryPoint:!1,Events:[Ri,ws,la,Vh,Hh,Du]},Hi={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bw={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Jh(n),n===null?null:n.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||Tw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qa.isDisabled&&qa.supportsFiber)try{Wo=qa.inject(bw),mn=qa}catch{}}return Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pw,Lt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wu(s))throw Error(t(200));return Iw(n,s,null,a)},Lt.createRoot=function(n,s){if(!Wu(n))throw Error(t(299));var a=!1,c="",h=Nm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=$u(n,1,!1,null,null,a,!1,c,h),n[In]=s.current,ki(n.nodeType===8?n.parentNode:n),new Bu(s)},Lt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Jh(s),n=n===null?null:n.stateNode,n},Lt.flushSync=function(n){return Hr(n)},Lt.hydrate=function(n,s,a){if(!Va(s))throw Error(t(200));return Ha(null,n,s,!0,a)},Lt.hydrateRoot=function(n,s,a){if(!Wu(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,p="",v=Nm;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=Sm(s,null,n,1,a??null,h,!1,p,v),n[In]=s.current,ki(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,h]:s.mutableSourceEagerHydrationData.push(a,h);return new Wa(s)},Lt.render=function(n,s,a){if(!Va(s))throw Error(t(200));return Ha(null,n,s,!1,a)},Lt.unmountComponentAtNode=function(n){if(!Va(n))throw Error(t(40));return n._reactRootContainer?(Hr(function(){Ha(null,null,n,!1,function(){n._reactRootContainer=null,n[In]=null})}),!0):!1},Lt.unstable_batchedUpdates=Du,Lt.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Va(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Ha(n,s,a,!1,c)},Lt.version="18.3.1-next-f1338f8080-20240426",Lt}var Dm;function ov(){if(Dm)return qu.exports;Dm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qu.exports=Uw(),qu.exports}var Om;function $w(){if(Om)return Ga;Om=1;var r=ov();return Ga.createRoot=r.createRoot,Ga.hydrateRoot=r.hydrateRoot,Ga}var zw=$w();const Bw=sv(zw);ov();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},lo.apply(this,arguments)}var xr;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(xr||(xr={}));const Lm="popstate";function Ww(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:u,hash:f}=i.location;return fd("",{pathname:l,search:u,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:il(o)}return Hw(e,t,null,r)}function Xe(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function zd(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vw(){return Math.random().toString(36).substr(2,8)}function Mm(r,e){return{usr:r.state,key:r.key,idx:e}}function fd(r,e,t,i){return t===void 0&&(t=null),lo({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Js(e):e,{state:t,key:e&&e.key||i||Vw()})}function il(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Js(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function Hw(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,u=o.history,f=xr.Pop,m=null,g=w();g==null&&(g=0,u.replaceState(lo({},u.state,{idx:g}),""));function w(){return(u.state||{idx:null}).idx}function _(){f=xr.Pop;let D=w(),ee=D==null?null:D-g;g=D,m&&m({action:f,location:O.location,delta:ee})}function y(D,ee){f=xr.Push;let j=fd(O.location,D,ee);g=w()+1;let K=Mm(j,g),H=O.createHref(j);try{u.pushState(K,"",H)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(H)}l&&m&&m({action:f,location:O.location,delta:1})}function T(D,ee){f=xr.Replace;let j=fd(O.location,D,ee);g=w();let K=Mm(j,g),H=O.createHref(j);u.replaceState(K,"",H),l&&m&&m({action:f,location:O.location,delta:0})}function R(D){let ee=o.location.origin!=="null"?o.location.origin:o.location.href,j=typeof D=="string"?D:il(D);return j=j.replace(/ $/,"%20"),Xe(ee,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,ee)}let O={get action(){return f},get location(){return r(o,u)},listen(D){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Lm,_),m=D,()=>{o.removeEventListener(Lm,_),m=null}},createHref(D){return e(o,D)},createURL:R,encodeLocation(D){let ee=R(D);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:y,replace:T,go(D){return u.go(D)}};return O}var Fm;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Fm||(Fm={}));function qw(r,e,t){return t===void 0&&(t="/"),Gw(r,e,t)}function Gw(r,e,t,i){let o=typeof e=="string"?Js(e):e,l=Bs(o.pathname||"/",t);if(l==null)return null;let u=av(r);Kw(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let g=ix(l);f=rx(u[m],g)}return f}function av(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,u,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};m.relativePath.startsWith("/")&&(Xe(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let g=Sr([i,m.relativePath]),w=t.concat(m);l.children&&l.children.length>0&&(Xe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),av(l.children,e,w,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:tx(g,l.index),routesMeta:w})};return r.forEach((l,u)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,u);else for(let m of lv(l.path))o(l,u,m)}),e}function lv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let u=lv(i.join("/")),f=[];return f.push(...u.map(m=>m===""?l:[l,m].join("/"))),o&&f.push(...u),f.map(m=>r.startsWith("/")&&m===""?"/":m)}function Kw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:nx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const Qw=/^:[\w-]+$/,Yw=3,Jw=2,Xw=1,Zw=10,ex=-2,Um=r=>r==="*";function tx(r,e){let t=r.split("/"),i=t.length;return t.some(Um)&&(i+=ex),e&&(i+=Jw),t.filter(o=>!Um(o)).reduce((o,l)=>o+(Qw.test(l)?Yw:l===""?Xw:Zw),i)}function nx(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function rx(r,e,t){let{routesMeta:i}=r,o={},l="/",u=[];for(let f=0;f<i.length;++f){let m=i[f],g=f===i.length-1,w=l==="/"?e:e.slice(l.length)||"/",_=pd({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},w),y=m.route;if(!_)return null;Object.assign(o,_.params),u.push({params:o,pathname:Sr([l,_.pathname]),pathnameBase:ux(Sr([l,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(l=Sr([l,_.pathnameBase]))}return u}function pd(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=sx(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((g,w,_)=>{let{paramName:y,isOptional:T}=w;if(y==="*"){let O=f[_]||"";u=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const R=f[_];return T&&!R?g[y]=void 0:g[y]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:r}}function sx(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),zd(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function ix(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zd(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Bs(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ax=r=>ox.test(r);function lx(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?Js(r):r,l;if(t)if(ax(t))l=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),zd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?l=$m(t.substring(1),"/"):l=$m(t,e)}else l=e;return{pathname:l,search:dx(i),hash:hx(o)}}function $m(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Qu(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cx(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Bd(r,e){let t=cx(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Wd(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=Js(r):(o=lo({},r),Xe(!o.pathname||!o.pathname.includes("?"),Qu("?","pathname","search",o)),Xe(!o.pathname||!o.pathname.includes("#"),Qu("#","pathname","hash",o)),Xe(!o.search||!o.search.includes("#"),Qu("#","search","hash",o)));let l=r===""||o.pathname==="",u=l?"/":o.pathname,f;if(u==null)f=t;else{let _=e.length-1;if(!i&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),_-=1;o.pathname=y.join("/")}f=_>=0?e[_]:"/"}let m=lx(o,f),g=u&&u!=="/"&&u.endsWith("/"),w=(l||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||w)&&(m.pathname+="/"),m}const Sr=r=>r.join("/").replace(/\/\/+/g,"/"),ux=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),dx=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,hx=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function fx(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const cv=["post","put","patch","delete"];new Set(cv);const px=["get",...cv];new Set(px);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},co.apply(this,arguments)}const Al=I.createContext(null),uv=I.createContext(null),Wn=I.createContext(null),jl=I.createContext(null),Ar=I.createContext({outlet:null,matches:[],isDataRoute:!1}),dv=I.createContext(null);function mx(r,e){let{relative:t}=e===void 0?{}:e;Xs()||Xe(!1);let{basename:i,navigator:o}=I.useContext(Wn),{hash:l,pathname:u,search:f}=Dl(r,{relative:t}),m=u;return i!=="/"&&(m=u==="/"?i:Sr([i,u])),o.createHref({pathname:m,search:f,hash:l})}function Xs(){return I.useContext(jl)!=null}function as(){return Xs()||Xe(!1),I.useContext(jl).location}function hv(r){I.useContext(Wn).static||I.useLayoutEffect(r)}function Vd(){let{isDataRoute:r}=I.useContext(Ar);return r?kx():gx()}function gx(){Xs()||Xe(!1);let r=I.useContext(Al),{basename:e,future:t,navigator:i}=I.useContext(Wn),{matches:o}=I.useContext(Ar),{pathname:l}=as(),u=JSON.stringify(Bd(o,t.v7_relativeSplatPath)),f=I.useRef(!1);return hv(()=>{f.current=!0}),I.useCallback(function(g,w){if(w===void 0&&(w={}),!f.current)return;if(typeof g=="number"){i.go(g);return}let _=Wd(g,JSON.parse(u),l,w.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Sr([e,_.pathname])),(w.replace?i.replace:i.push)(_,w.state,w)},[e,i,u,l,r])}function Dl(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=I.useContext(Wn),{matches:o}=I.useContext(Ar),{pathname:l}=as(),u=JSON.stringify(Bd(o,i.v7_relativeSplatPath));return I.useMemo(()=>Wd(r,JSON.parse(u),l,t==="path"),[r,u,l,t])}function vx(r,e){return _x(r,e)}function _x(r,e,t,i){Xs()||Xe(!1);let{navigator:o}=I.useContext(Wn),{matches:l}=I.useContext(Ar),u=l[l.length-1],f=u?u.params:{};u&&u.pathname;let m=u?u.pathnameBase:"/";u&&u.route;let g=as(),w;if(e){var _;let D=typeof e=="string"?Js(e):e;m==="/"||(_=D.pathname)!=null&&_.startsWith(m)||Xe(!1),w=D}else w=g;let y=w.pathname||"/",T=y;if(m!=="/"){let D=m.replace(/^\//,"").split("/");T="/"+y.replace(/^\//,"").split("/").slice(D.length).join("/")}let R=qw(r,{pathname:T}),O=Sx(R&&R.map(D=>Object.assign({},D,{params:Object.assign({},f,D.params),pathname:Sr([m,o.encodeLocation?o.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?m:Sr([m,o.encodeLocation?o.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),l,t,i);return e&&O?I.createElement(jl.Provider,{value:{location:co({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:xr.Pop}},O):O}function yx(){let r=Tx(),e=fx(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:o},t):null,null)}const wx=I.createElement(yx,null);class xx extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?I.createElement(Ar.Provider,{value:this.props.routeContext},I.createElement(dv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ex(r){let{routeContext:e,match:t,children:i}=r,o=I.useContext(Al);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(Ar.Provider,{value:e},i)}function Sx(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let u=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let w=u.findIndex(_=>_.route.id&&(f==null?void 0:f[_.route.id])!==void 0);w>=0||Xe(!1),u=u.slice(0,Math.min(u.length,w+1))}let m=!1,g=-1;if(t&&i&&i.v7_partialHydration)for(let w=0;w<u.length;w++){let _=u[w];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=w),_.route.id){let{loaderData:y,errors:T}=t,R=_.route.loader&&y[_.route.id]===void 0&&(!T||T[_.route.id]===void 0);if(_.route.lazy||R){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((w,_,y)=>{let T,R=!1,O=null,D=null;t&&(T=f&&_.route.id?f[_.route.id]:void 0,O=_.route.errorElement||wx,m&&(g<0&&y===0?(Px("route-fallback"),R=!0,D=null):g===y&&(R=!0,D=_.route.hydrateFallbackElement||null)));let ee=e.concat(u.slice(0,y+1)),j=()=>{let K;return T?K=O:R?K=D:_.route.Component?K=I.createElement(_.route.Component,null):_.route.element?K=_.route.element:K=w,I.createElement(Ex,{match:_,routeContext:{outlet:w,matches:ee,isDataRoute:t!=null},children:K})};return t&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?I.createElement(xx,{location:t.location,revalidation:t.revalidation,component:O,error:T,children:j(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):j()},null)}var fv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(fv||{}),pv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(pv||{});function Cx(r){let e=I.useContext(Al);return e||Xe(!1),e}function Nx(r){let e=I.useContext(uv);return e||Xe(!1),e}function Ix(r){let e=I.useContext(Ar);return e||Xe(!1),e}function mv(r){let e=Ix(),t=e.matches[e.matches.length-1];return t.route.id||Xe(!1),t.route.id}function Tx(){var r;let e=I.useContext(dv),t=Nx(),i=mv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function kx(){let{router:r}=Cx(fv.UseNavigateStable),e=mv(pv.UseNavigateStable),t=I.useRef(!1);return hv(()=>{t.current=!0}),I.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,co({fromRouteId:e},l)))},[r,e])}const zm={};function Px(r,e,t){zm[r]||(zm[r]=!0)}function bx(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Rx(r){let{to:e,replace:t,state:i,relative:o}=r;Xs()||Xe(!1);let{future:l,static:u}=I.useContext(Wn),{matches:f}=I.useContext(Ar),{pathname:m}=as(),g=Vd(),w=Wd(e,Bd(f,l.v7_relativeSplatPath),m,o==="path"),_=JSON.stringify(w);return I.useEffect(()=>g(JSON.parse(_),{replace:t,state:i,relative:o}),[g,_,o,t,i]),null}function Yr(r){Xe(!1)}function Ax(r){let{basename:e="/",children:t=null,location:i,navigationType:o=xr.Pop,navigator:l,static:u=!1,future:f}=r;Xs()&&Xe(!1);let m=e.replace(/^\/*/,"/"),g=I.useMemo(()=>({basename:m,navigator:l,static:u,future:co({v7_relativeSplatPath:!1},f)}),[m,f,l,u]);typeof i=="string"&&(i=Js(i));let{pathname:w="/",search:_="",hash:y="",state:T=null,key:R="default"}=i,O=I.useMemo(()=>{let D=Bs(w,m);return D==null?null:{location:{pathname:D,search:_,hash:y,state:T,key:R},navigationType:o}},[m,w,_,y,T,R,o]);return O==null?null:I.createElement(Wn.Provider,{value:g},I.createElement(jl.Provider,{children:t,value:O}))}function jx(r){let{children:e,location:t}=r;return vx(md(e),t)}new Promise(()=>{});function md(r,e){e===void 0&&(e=[]);let t=[];return I.Children.forEach(r,(i,o)=>{if(!I.isValidElement(i))return;let l=[...e,o];if(i.type===I.Fragment){t.push.apply(t,md(i.props.children,l));return}i.type!==Yr&&Xe(!1),!i.props.index||!i.props.children||Xe(!1);let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=md(i.props.children,l)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ol.apply(this,arguments)}function gv(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function Dx(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Ox(r,e){return r.button===0&&(!e||e==="_self")&&!Dx(r)}const Lx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Mx=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Fx="6";try{window.__reactRouterVersion=Fx}catch{}const Ux=I.createContext({isTransitioning:!1}),$x="startTransition",Bm=Lw[$x];function zx(r){let{basename:e,children:t,future:i,window:o}=r,l=I.useRef();l.current==null&&(l.current=Ww({window:o,v5Compat:!0}));let u=l.current,[f,m]=I.useState({action:u.action,location:u.location}),{v7_startTransition:g}=i||{},w=I.useCallback(_=>{g&&Bm?Bm(()=>m(_)):m(_)},[m,g]);return I.useLayoutEffect(()=>u.listen(w),[u,w]),I.useEffect(()=>bx(i),[i]),I.createElement(Ax,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:u,future:i})}const Bx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vx=I.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:u,state:f,target:m,to:g,preventScrollReset:w,viewTransition:_}=e,y=gv(e,Lx),{basename:T}=I.useContext(Wn),R,O=!1;if(typeof g=="string"&&Wx.test(g)&&(R=g,Bx))try{let K=new URL(window.location.href),H=g.startsWith("//")?new URL(K.protocol+g):new URL(g),ce=Bs(H.pathname,T);H.origin===K.origin&&ce!=null?g=ce+H.search+H.hash:O=!0}catch{}let D=mx(g,{relative:o}),ee=qx(g,{replace:u,state:f,target:m,preventScrollReset:w,relative:o,viewTransition:_});function j(K){i&&i(K),K.defaultPrevented||ee(K)}return I.createElement("a",ol({},y,{href:R||D,onClick:O||l?i:j,ref:t,target:m}))}),Gi=I.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:u=!1,style:f,to:m,viewTransition:g,children:w}=e,_=gv(e,Mx),y=Dl(m,{relative:_.relative}),T=as(),R=I.useContext(uv),{navigator:O,basename:D}=I.useContext(Wn),ee=R!=null&&Gx(y)&&g===!0,j=O.encodeLocation?O.encodeLocation(y).pathname:y.pathname,K=T.pathname,H=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;o||(K=K.toLowerCase(),H=H?H.toLowerCase():null,j=j.toLowerCase()),H&&D&&(H=Bs(H,D)||H);const ce=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let ae=K===j||!u&&K.startsWith(j)&&K.charAt(ce)==="/",J=H!=null&&(H===j||!u&&H.startsWith(j)&&H.charAt(j.length)==="/"),ue={isActive:ae,isPending:J,isTransitioning:ee},ge=ae?i:void 0,Ee;typeof l=="function"?Ee=l(ue):Ee=[l,ae?"active":null,J?"pending":null,ee?"transitioning":null].filter(Boolean).join(" ");let Le=typeof f=="function"?f(ue):f;return I.createElement(Vx,ol({},_,{"aria-current":ge,className:Ee,ref:t,style:Le,to:m,viewTransition:g}),typeof w=="function"?w(ue):w)});var gd;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(gd||(gd={}));var Wm;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Wm||(Wm={}));function Hx(r){let e=I.useContext(Al);return e||Xe(!1),e}function qx(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:u,viewTransition:f}=e===void 0?{}:e,m=Vd(),g=as(),w=Dl(r,{relative:u});return I.useCallback(_=>{if(Ox(_,t)){_.preventDefault();let y=i!==void 0?i:il(g)===il(w);m(r,{replace:y,state:o,preventScrollReset:l,relative:u,viewTransition:f})}},[g,m,w,i,o,t,r,l,u,f])}function Gx(r,e){e===void 0&&(e={});let t=I.useContext(Ux);t==null&&Xe(!1);let{basename:i}=Hx(gd.useViewTransitionState),o=Dl(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Bs(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Bs(t.nextLocation.pathname,i)||t.nextLocation.pathname;return pd(o.pathname,u)!=null||pd(o.pathname,l)!=null}const Kx=()=>{};var Vm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W=function(r,e){if(!r)throw Zs(e)},Zs=function(r){return new Error("Firebase Database ("+vv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Qx=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],u=r[t++],f=r[t++],m=((o&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],u=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Hd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],u=o+1<r.length,f=u?r[o+1]:0,m=o+2<r.length,g=m?r[o+2]:0,w=l>>2,_=(l&3)<<4|f>>4;let y=(f&15)<<2|g>>6,T=g&63;m||(T=64,u||(y=64)),i.push(t[w],t[_],t[y],t[T])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(_v(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Qx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const g=o<r.length?t[r.charAt(o)]:64;++o;const _=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||g==null||_==null)throw new Yx;const y=l<<2|f>>4;if(i.push(y),g!==64){const T=f<<4&240|g>>2;if(i.push(T),_!==64){const R=g<<6&192|_;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Yx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yv=function(r){const e=_v(r);return Hd.encodeByteArray(e,!0)},al=function(r){return yv(r).replace(/\./g,"")},ll=function(r){try{return Hd.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(r){return wv(void 0,r)}function wv(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Xx(t)||(r[t]=wv(r[t],e[t]));return r}function Xx(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=()=>Zx().__FIREBASE_DEFAULTS__,tE=()=>{if(typeof process>"u"||typeof Vm>"u")return;const r=Vm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},nE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ll(r[1]);return e&&JSON.parse(e)},qd=()=>{try{return Kx()||eE()||tE()||nE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},xv=r=>{var e,t;return(t=(e=qd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},rE=r=>{const e=xv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Ev=()=>{var r;return(r=qd())===null||r===void 0?void 0:r.config},Sv=r=>{var e;return(e=qd())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Cv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[al(JSON.stringify(t)),al(JSON.stringify(u)),""].join(".")}const to={};function iE(){const r={prod:[],emulator:[]};for(const e of Object.keys(to))to[e]?r.emulator.push(e):r.prod.push(e);return r}function oE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Hm=!1;function Nv(r,e){if(typeof window>"u"||typeof document>"u"||!ei(window.location.host)||to[r]===e||to[r]||Hm)return;to[r]=e;function t(y){return`__firebase__banner__${y}`}const i="__firebase__banner",l=iE().prod.length>0;function u(){const y=document.getElementById(i);y&&y.remove()}function f(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function m(y,T){y.setAttribute("width","24"),y.setAttribute("id",T),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function g(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Hm=!0,u()},y}function w(y,T){y.setAttribute("id",T),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function _(){const y=oE(i),T=t("text"),R=document.getElementById(T)||document.createElement("span"),O=t("learnmore"),D=document.getElementById(O)||document.createElement("a"),ee=t("preprendIcon"),j=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const K=y.element;f(K),w(D,O);const H=g();m(j,ee),K.append(j,R,D,H),document.body.appendChild(K)}l?(R.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function aE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Iv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cE(){const r=Pt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function uE(){return vv.NODE_ADMIN===!0}function dE(){try{return typeof indexedDB=="object"}catch{return!1}}function hE(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="FirebaseError";class jr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=fE,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,No.prototype.create)}}class No{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?pE(l,i):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new jr(o,f,i)}}function pE(r,e){return r.replace(mE,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const mE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(r){return JSON.parse(r)}function ut(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=function(r){let e={},t={},i={},o="";try{const l=r.split(".");e=uo(ll(l[0])||""),t=uo(ll(l[1])||""),o=l[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:o}},gE=function(r){const e=Tv(r),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},vE=function(r){const e=Tv(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Ws(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function vd(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function cl(r,e,t){const i={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=e.call(t,r[o],o,r));return i}function ts(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],u=e[o];if(qm(l)&&qm(u)){if(!ts(l,u))return!1}else if(l!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function qm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Zi(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function eo(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let _=0;_<16;_++)i[_]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let _=16;_<80;_++){const y=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(y<<1|y>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],u=this.chain_[2],f=this.chain_[3],m=this.chain_[4],g,w;for(let _=0;_<80;_++){_<40?_<20?(g=f^l&(u^f),w=1518500249):(g=l^u^f,w=1859775393):_<60?(g=l&u|f&(l|u),w=2400959708):(g=l^u^f,w=3395469782);const y=(o<<5|o>>>27)+g+m+w+i[_]&4294967295;m=f,f=u,u=(l<<30|l>>>2)&4294967295,l=o,o=y}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let o=0;const l=this.buf_;let u=this.inbuf_;for(;o<t;){if(u===0)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(l[u]=e.charCodeAt(o),++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}else for(;o<t;)if(l[u]=e[o],++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[o]>>l&255,++i;return e}}function yE(r,e){const t=new wE(r,e);return t.subscribe.bind(t)}class wE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");xE(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Yu),o.error===void 0&&(o.error=Yu),o.complete===void 0&&(o.complete=Yu);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Yu(){}function Ol(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);if(o>=55296&&o<=56319){const l=o-55296;i++,W(i<r.length,"Surrogate pair missing trail surrogate.");const u=r.charCodeAt(i)-56320;o=65536+(l<<10)+u}o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):o<65536?(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Ll=function(r){let e=0;for(let t=0;t<r.length;t++){const i=r.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(r){return r&&r._delegate?r._delegate:r}class ns{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Co;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NE(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:CE(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CE(r){return r===Jr?void 0:r}function NE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(De||(De={}));const TE={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},kE=De.INFO,PE={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},bE=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=PE[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kd{constructor(e){this.name=e,this._logLevel=kE,this._logHandler=bE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const RE=(r,e)=>e.some(t=>r instanceof t);let Gm,Km;function AE(){return Gm||(Gm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jE(){return Km||(Km=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kv=new WeakMap,_d=new WeakMap,Pv=new WeakMap,Ju=new WeakMap,Qd=new WeakMap;function DE(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(Cr(r.result)),o()},u=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&kv.set(t,r)}).catch(()=>{}),Qd.set(e,r),e}function OE(r){if(_d.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});_d.set(r,e)}let yd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return _d.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Pv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cr(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function LE(r){yd=r(yd)}function ME(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Xu(this),e,...t);return Pv.set(i,e.sort?e.sort():[e]),Cr(i)}:jE().includes(r)?function(...e){return r.apply(Xu(this),e),Cr(kv.get(this))}:function(...e){return Cr(r.apply(Xu(this),e))}}function FE(r){return typeof r=="function"?ME(r):(r instanceof IDBTransaction&&OE(r),RE(r,AE())?new Proxy(r,yd):r)}function Cr(r){if(r instanceof IDBRequest)return DE(r);if(Ju.has(r))return Ju.get(r);const e=FE(r);return e!==r&&(Ju.set(r,e),Qd.set(e,r)),e}const Xu=r=>Qd.get(r);function UE(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const u=indexedDB.open(r,e),f=Cr(u);return i&&u.addEventListener("upgradeneeded",m=>{i(Cr(u.result),m.oldVersion,m.newVersion,Cr(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const $E=["get","getKey","getAll","getAllKeys","count"],zE=["put","add","delete","clear"],Zu=new Map;function Qm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Zu.get(e))return Zu.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=zE.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||$E.includes(t)))return;const l=async function(u,...f){const m=this.transaction(u,o?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),o&&m.done]))[0]};return Zu.set(e,l),l}LE(r=>({...r,get:(e,t,i)=>Qm(e,t)||r.get(e,t,i),has:(e,t)=>!!Qm(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WE(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function WE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wd="@firebase/app",Ym="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new Kd("@firebase/app"),VE="@firebase/app-compat",HE="@firebase/analytics-compat",qE="@firebase/analytics",GE="@firebase/app-check-compat",KE="@firebase/app-check",QE="@firebase/auth",YE="@firebase/auth-compat",JE="@firebase/database",XE="@firebase/data-connect",ZE="@firebase/database-compat",eS="@firebase/functions",tS="@firebase/functions-compat",nS="@firebase/installations",rS="@firebase/installations-compat",sS="@firebase/messaging",iS="@firebase/messaging-compat",oS="@firebase/performance",aS="@firebase/performance-compat",lS="@firebase/remote-config",cS="@firebase/remote-config-compat",uS="@firebase/storage",dS="@firebase/storage-compat",hS="@firebase/firestore",fS="@firebase/ai",pS="@firebase/firestore-compat",mS="firebase",gS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="[DEFAULT]",vS={[wd]:"fire-core",[VE]:"fire-core-compat",[qE]:"fire-analytics",[HE]:"fire-analytics-compat",[KE]:"fire-app-check",[GE]:"fire-app-check-compat",[QE]:"fire-auth",[YE]:"fire-auth-compat",[JE]:"fire-rtdb",[XE]:"fire-data-connect",[ZE]:"fire-rtdb-compat",[eS]:"fire-fn",[tS]:"fire-fn-compat",[nS]:"fire-iid",[rS]:"fire-iid-compat",[sS]:"fire-fcm",[iS]:"fire-fcm-compat",[oS]:"fire-perf",[aS]:"fire-perf-compat",[lS]:"fire-rc",[cS]:"fire-rc-compat",[uS]:"fire-gcs",[dS]:"fire-gcs-compat",[hS]:"fire-fst",[pS]:"fire-fst-compat",[fS]:"fire-vertex","fire-js":"fire-js",[mS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new Map,_S=new Map,Ed=new Map;function Jm(r,e){try{r.container.addComponent(e)}catch(t){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Vs(r){const e=r.name;if(Ed.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;Ed.set(e,r);for(const t of ul.values())Jm(t,r);for(const t of _S.values())Jm(t,r);return!0}function Yd(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Wt(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new No("app","Firebase",yS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=gS;function bv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:xd,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Nr.create("bad-app-name",{appName:String(o)});if(t||(t=Ev()),!t)throw Nr.create("no-options");const l=ul.get(o);if(l){if(ts(t,l.options)&&ts(i,l.config))return l;throw Nr.create("duplicate-app",{appName:o})}const u=new IE(o);for(const m of Ed.values())u.addComponent(m);const f=new wS(t,i,u);return ul.set(o,f),f}function Rv(r=xd){const e=ul.get(r);if(!e&&r===xd&&Ev())return bv();if(!e)throw Nr.create("no-app",{appName:r});return e}function Ir(r,e,t){var i;let o=(i=vS[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(f.join(" "));return}Vs(new ns(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebase-heartbeat-database",ES=1,ho="firebase-heartbeat-store";let ed=null;function Av(){return ed||(ed=UE(xS,ES,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ho)}catch(t){console.warn(t)}}}}).catch(r=>{throw Nr.create("idb-open",{originalErrorMessage:r.message})})),ed}async function SS(r){try{const t=(await Av()).transaction(ho),i=await t.objectStore(ho).get(jv(r));return await t.done,i}catch(e){if(e instanceof jr)$n.warn(e.message);else{const t=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$n.warn(t.message)}}}async function Xm(r,e){try{const i=(await Av()).transaction(ho,"readwrite");await i.objectStore(ho).put(e,jv(r)),await i.done}catch(t){if(t instanceof jr)$n.warn(t.message);else{const i=Nr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});$n.warn(i.message)}}}function jv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=1024,NS=30;class IS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Zm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>NS){const u=PS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){$n.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zm(),{heartbeatsToSend:i,unsentEntries:o}=TS(this._heartbeatsCache.heartbeats),l=al(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return $n.warn(t),""}}}function Zm(){return new Date().toISOString().substring(0,10)}function TS(r,e=CS){const t=[];let i=r.slice();for(const o of r){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),eg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),eg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class kS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dE()?hE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await SS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function eg(r){return al(JSON.stringify({version:2,heartbeats:r})).length}function PS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(r){Vs(new ns("platform-logger",e=>new BE(e),"PRIVATE")),Vs(new ns("heartbeat",e=>new IS(e),"PRIVATE")),Ir(wd,Ym,r),Ir(wd,Ym,"esm2017"),Ir("fire-js","")}bS("");var tg={};const ng="@firebase/database",rg="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dv="";function RS(r){Dv=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:uo(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Sn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new AS(e)}}catch{}return new jS},Zr=Ov("localStorage"),DS=Ov("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Kd("@firebase/database"),OS=(function(){let r=1;return function(){return r++}})(),Lv=function(r){const e=EE(r),t=new _E;t.update(e);const i=t.digest();return Hd.encodeByteArray(i)},Io=function(...r){let e="";for(let t=0;t<r.length;t++){const i=r[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Io.apply(null,i):typeof i=="object"?e+=ut(i):e+=i,e+=" "}return e};let no=null,sg=!0;const LS=function(r,e){W(!0,"Can't turn on custom loggers persistently."),Ms.logLevel=De.VERBOSE,no=Ms.log.bind(Ms)},_t=function(...r){if(sg===!0&&(sg=!1,no===null&&DS.get("logging_enabled")===!0&&LS()),no){const e=Io.apply(null,r);no(e)}},To=function(r){return function(...e){_t(r,...e)}},Sd=function(...r){const e="FIREBASE INTERNAL ERROR: "+Io(...r);Ms.error(e)},zn=function(...r){const e=`FIREBASE FATAL ERROR: ${Io(...r)}`;throw Ms.error(e),new Error(e)},kt=function(...r){const e="FIREBASE WARNING: "+Io(...r);Ms.warn(e)},MS=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&kt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jd=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},FS=function(r){if(document.readyState==="complete")r();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Hs="[MIN_NAME]",rs="[MAX_NAME]",ls=function(r,e){if(r===e)return 0;if(r===Hs||e===rs)return-1;if(e===Hs||r===rs)return 1;{const t=ig(r),i=ig(e);return t!==null?i!==null?t-i===0?r.length-e.length:t-i:-1:i!==null?1:r<e?-1:1}},US=function(r,e){return r===e?0:r<e?-1:1},Ki=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+ut(e))},Xd=function(r){if(typeof r!="object"||r===null)return ut(r);const e=[];for(const i in r)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=ut(e[i]),t+=":",t+=Xd(r[e[i]]);return t+="}",t},Mv=function(r,e){const t=r.length;if(t<=e)return[r];const i=[];for(let o=0;o<t;o+=e)o+e>t?i.push(r.substring(o,t)):i.push(r.substring(o,o+e));return i};function yt(r,e){for(const t in r)r.hasOwnProperty(t)&&e(t,r[t])}const Fv=function(r){W(!Jd(r),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let o,l,u,f,m;r===0?(l=0,u=0,o=1/r===-1/0?1:0):(o=r<0,r=Math.abs(r),r>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(r)/Math.LN2),i),l=f+i,u=Math.round(r*Math.pow(2,t-f)-Math.pow(2,t))):(l=0,u=Math.round(r/Math.pow(2,1-i-t))));const g=[];for(m=t;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);for(m=e;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(o?1:0),g.reverse();const w=g.join("");let _="";for(m=0;m<64;m+=8){let y=parseInt(w.substr(m,8),2).toString(16);y.length===1&&(y="0"+y),_=_+y}return _.toLowerCase()},$S=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function BS(r,e){let t="Unknown Error";r==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?t="Client doesn't have permission to access the desired data.":r==="unavailable"&&(t="The service is unavailable");const i=new Error(r+" at "+e._path.toString()+": "+t);return i.code=r.toUpperCase(),i}const WS=new RegExp("^-?(0*)\\d{1,10}$"),VS=-2147483648,HS=2147483647,ig=function(r){if(WS.test(r)){const e=Number(r);if(e>=VS&&e<=HS)return e}return null},ri=function(r){try{r()}catch(e){setTimeout(()=>{const t=e.stack||"";throw kt("Exception was thrown by user callback.",t),e},Math.floor(0))}},qS=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ro=function(r,e){const t=setTimeout(r,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Wt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){kt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kt(e)}}class Za{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Za.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="5",Uv="v",$v="s",zv="r",Bv="f",Wv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vv="ls",Hv="p",Cd="ac",qv="websocket",Gv="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t,i,o,l=!1,u="",f=!1,m=!1,g=null){this.secure=t,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function QS(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function Qv(r,e,t){W(typeof e=="string","typeof type must == string"),W(typeof t=="object","typeof params must == object");let i;if(e===qv)i=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===Gv)i=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);QS(r)&&(t.ns=r.namespace);const o=[];return yt(t,(l,u)=>{o.push(l+"="+u)}),i+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.counters_={}}incrementCounter(e,t=1){Sn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Jx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td={},nd={};function eh(r){const e=r.toString();return td[e]||(td[e]=new YS),td[e]}function JS(r,e){const t=r.toString();return nd[t]||(nd[t]=e()),nd[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&ri(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="start",ZS="close",eC="pLPCommand",tC="pRTLPCB",Yv="id",Jv="pw",Xv="ser",nC="cb",rC="seg",sC="ts",iC="d",oC="dframe",Zv=1870,e_=30,aC=Zv-e_,lC=25e3,cC=3e4;class Ls{constructor(e,t,i,o,l,u,f){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=To(e),this.stats_=eh(t),this.urlFn=m=>(this.appCheckToken&&(m[Cd]=this.appCheckToken),Qv(t,Gv,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new XS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(cC)),FS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new th((...l)=>{const[u,f,m,g,w]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===og)this.id=f,this.password=m;else if(u===ZS)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[og]="t",i[Xv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[nC]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Uv]=Zd,this.transportSessionId&&(i[$v]=this.transportSessionId),this.lastSessionId&&(i[Vv]=this.lastSessionId),this.applicationId&&(i[Hv]=this.applicationId),this.appCheckToken&&(i[Cd]=this.appCheckToken),typeof location<"u"&&location.hostname&&Wv.test(location.hostname)&&(i[zv]=Bv);const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ls.forceAllow_=!0}static forceDisallow(){Ls.forceDisallow_=!0}static isAvailable(){return Ls.forceAllow_?!0:!Ls.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!$S()&&!zS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=yv(t),o=Mv(i,aC);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[oC]="t",i[Yv]=e,i[Jv]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ut(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class th{constructor(e,t,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=OS(),window[eC+this.uniqueCallbackIdentifier]=e,window[tC+this.uniqueCallbackIdentifier]=t,this.myIFrame=th.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){_t("frame writing exception"),f.stack&&_t(f.stack),_t(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Yv]=this.myID,e[Jv]=this.myPW,e[Xv]=this.currentSerial;let t=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+e_+i.length<=Zv;){const u=this.pendingSegs.shift();i=i+"&"+rC+o+"="+u.seg+"&"+sC+o+"="+u.ts+"&"+iC+o+"="+u.d,o++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(i,Math.floor(lC)),l=()=>{clearTimeout(o),i()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=16384,dC=45e3;let dl=null;typeof MozWebSocket<"u"?dl=MozWebSocket:typeof WebSocket<"u"&&(dl=WebSocket);class ln{constructor(e,t,i,o,l,u,f){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=To(this.connId),this.stats_=eh(t),this.connURL=ln.connectionURL_(t,u,f,o,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,o,l){const u={};return u[Uv]=Zd,typeof location<"u"&&location.hostname&&Wv.test(location.hostname)&&(u[zv]=Bv),t&&(u[$v]=t),i&&(u[Vv]=i),o&&(u[Cd]=o),l&&(u[Hv]=l),Qv(e,qv,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zr.set("previous_websocket_failure",!0);try{let i;uE(),this.mySock=new dl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){ln.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&dl!==null&&!ln.forceDisallow_}static previouslyFailed(){return Zr.isInMemoryStorage||Zr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=uo(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=Mv(t,uC);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dC))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ln.responsesRequiredToBeHealthy=2;ln.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{static get ALL_TRANSPORTS(){return[Ls,ln]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=ln&&ln.isAvailable();let i=t&&!ln.previouslyFailed();if(e.webSocketOnly&&(t||kt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ln];else{const o=this.transports_=[];for(const l of fo.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);fo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=6e4,fC=5e3,pC=10*1024,mC=100*1024,rd="t",ag="d",gC="s",lg="r",vC="e",cg="o",ug="a",dg="n",hg="p",_C="h";class yC{constructor(e,t,i,o,l,u,f,m,g,w){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=To("c:"+this.id+":"),this.transportManager_=new fo(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=ro(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>mC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>pC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(rd in e){const t=e[rd];t===ug?this.upgradeIfSecondaryHealthy_():t===lg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===cg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ki("t",e),i=Ki("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:hg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ug,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ki("t",e),i=Ki("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ki(rd,e);if(ag in e){const i=e[ag];if(t===_C){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(t===dg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===gC?this.onConnectionShutdown_(i):t===lg?this.onReset_(i):t===vC?Sd("Server Error: "+i):t===cg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Sd("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Zd!==i&&kt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),ro(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ro(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(fC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:hg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{put(e,t,i,o){}merge(e,t,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const o=this.getInitialEvent(e);o&&t.apply(i,o)}off(e,t,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!i||i===o[l].context)){o.splice(l,1);return}}validateEventType_(e){W(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends n_{static getInstance(){return new hl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Gd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return W(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=32,pg=768;class Oe{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ae(){return new Oe("")}function we(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function Pr(r){return r.pieces_.length-r.pieceNum_}function $e(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new Oe(r.pieces_,e)}function nh(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function wC(r){let e="";for(let t=r.pieceNum_;t<r.pieces_.length;t++)r.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[t])));return e||"/"}function po(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function r_(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let t=r.pieceNum_;t<r.pieces_.length-1;t++)e.push(r.pieces_[t]);return new Oe(e,0)}function tt(r,e){const t=[];for(let i=r.pieceNum_;i<r.pieces_.length;i++)t.push(r.pieces_[i]);if(e instanceof Oe)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&t.push(i[o])}return new Oe(t,0)}function Ce(r){return r.pieceNum_>=r.pieces_.length}function Tt(r,e){const t=we(r),i=we(e);if(t===null)return e;if(t===i)return Tt($e(r),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function xC(r,e){const t=po(r,0),i=po(e,0);for(let o=0;o<t.length&&o<i.length;o++){const l=ls(t[o],i[o]);if(l!==0)return l}return t.length===i.length?0:t.length<i.length?-1:1}function rh(r,e){if(Pr(r)!==Pr(e))return!1;for(let t=r.pieceNum_,i=e.pieceNum_;t<=r.pieces_.length;t++,i++)if(r.pieces_[t]!==e.pieces_[i])return!1;return!0}function Jt(r,e){let t=r.pieceNum_,i=e.pieceNum_;if(Pr(r)>Pr(e))return!1;for(;t<r.pieces_.length;){if(r.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class EC{constructor(e,t){this.errorPrefix_=t,this.parts_=po(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Ll(this.parts_[i]);s_(this)}}function SC(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=Ll(e),s_(r)}function CC(r){const e=r.parts_.pop();r.byteLength_-=Ll(e),r.parts_.length>0&&(r.byteLength_-=1)}function s_(r){if(r.byteLength_>pg)throw new Error(r.errorPrefix_+"has a key path longer than "+pg+" bytes ("+r.byteLength_+").");if(r.parts_.length>fg)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fg+") or object contains a cycle "+Xr(r))}function Xr(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends n_{static getInstance(){return new sh}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return W(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=1e3,NC=300*1e3,mg=30*1e3,IC=1.3,TC=3e4,kC="server_kill",gg=3;class Fn extends t_{constructor(e,t,i,o,l,u,f,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=Fn.nextPersistentConnectionId_++,this.log_=To("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qi,this.maxReconnectDelay_=NC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&hl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const o=++this.requestNumber_,l={r:o,a:e,b:t};this.log_(ut(l)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const t=new Co,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const f=u.d;u.s==="ok"?t.resolve(f):t.reject(f)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,i,o){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:t,query:e,tag:i};this.listens.get(u).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),o=t._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i},u="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,f=>{const m=f.d,g=f.s;Fn.warnOnListenWarnings_(m,t),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Sn(e,"w")){const i=Ws(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();kt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||vE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=mg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=gE(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,o=>{const l=o.s,u=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,t)}sendUnlisten_(e,t,i,o){this.log_("Unlisten on "+e+" for "+t);const l={p:e},u="n";o&&(l.q=i,l.t=o),this.sendRequest(u,l)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,o){const l={p:t,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{o&&setTimeout(()=>{o(u.s,u.d)},Math.floor(0))})}put(e,t,i,o){this.putInternal("p",e,t,i,o)}merge(e,t,i,o){this.putInternal("m",e,t,i,o)}putInternal(e,t,i,o,l){this.initConnection_();const u={p:t,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:o}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ut(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Sd("Unrecognized action received from server: "+ut(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>TC&&(this.reconnectDelay_=Qi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*IC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Fn.nextConnectionId_++,l=this.lastSessionId;let u=!1,f=null;const m=function(){f?f.close():(u=!0,i())},g=function(_){W(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(_)};this.realtime_={close:m,sendRequest:g};const w=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,y]=await Promise.all([this.authTokenProvider_.getToken(w),this.appCheckTokenProvider_.getToken(w)]);u?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=y&&y.token,f=new yC(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,T=>{kt(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(kC)},l))}catch(_){this.log_("Failed to get token: "+_),u||(this.repoInfo_.nodeAdmin&&kt(_),m())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vd(this.interruptReasons_)&&(this.reconnectDelay_=Qi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(l=>Xd(l)).join("$"):i="default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,t){const i=new Oe(e).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(t),l.delete(t),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,t){_t("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gg&&(this.reconnectDelay_=mg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){_t("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Dv.replace(/\./g,"-")]=1,Gd()?e["framework.cordova"]=1:Iv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=hl.getInstance().currentlyOnline();return vd(this.interruptReasons_)&&e}}Fn.nextPersistentConnectionId_=0;Fn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new xe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new xe(Hs,e),o=new xe(Hs,t);return this.compare(i,o)!==0}minPost(){return xe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka;class i_ extends Ml{static get __EMPTY_NODE(){return Ka}static set __EMPTY_NODE(e){Ka=e}compare(e,t){return ls(e.name,t.name)}isDefinedOn(e){throw Zs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return xe.MIN}maxPost(){return new xe(rs,Ka)}makePost(e,t){return W(typeof e=="string","KeyIndex indexValue must always be a string."),new xe(e,Ka)}toString(){return".key"}}const Fs=new i_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t,i,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,o&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class mt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??mt.RED,this.left=o??Mt.EMPTY_NODE,this.right=l??Mt.EMPTY_NODE}copy(e,t,i,o,l){return new mt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o=o.copy(null,t,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,o;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Mt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}mt.RED=!0;mt.BLACK=!1;class PC{copy(e,t,i,o,l){return this}insert(e,t,i){return new mt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Mt{constructor(e,t=Mt.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Mt(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,mt.BLACK,null,null))}remove(e){return new Mt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,o=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(o=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Qa(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Qa(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Qa(this.root_,null,this.comparator_,!0,e)}}Mt.EMPTY_NODE=new PC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(r,e){return ls(r.name,e.name)}function ih(r,e){return ls(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd;function RC(r){Nd=r}const o_=function(r){return typeof r=="number"?"number:"+Fv(r):"string:"+r},a_=function(r){if(r.isLeafNode()){const e=r.val();W(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Sn(e,".sv"),"Priority must be a string or number.")}else W(r===Nd||r.isEmpty(),"priority of unexpected type.");W(r===Nd||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg;class pt{static set __childrenNodeConstructor(e){vg=e}static get __childrenNodeConstructor(){return vg}constructor(e,t=pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,W(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),a_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ce(e)?this:we(e)===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=we(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(W(i!==".priority"||Pr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,pt.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+o_(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=Fv(this.value_):e+=this.value_,this.lazyHash_=Lv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pt.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,o=pt.VALUE_TYPE_ORDER.indexOf(t),l=pt.VALUE_TYPE_ORDER.indexOf(i);return W(o>=0,"Unknown leaf type: "+t),W(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l_,c_;function AC(r){l_=r}function jC(r){c_=r}class DC extends Ml{compare(e,t){const i=e.node.getPriority(),o=t.node.getPriority(),l=i.compareTo(o);return l===0?ls(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return xe.MIN}maxPost(){return new xe(rs,new pt("[PRIORITY-POST]",c_))}makePost(e,t){const i=l_(e);return new xe(t,new pt("[PRIORITY-POST]",i))}toString(){return".priority"}}const nt=new DC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=Math.log(2);class LC{constructor(e){const t=l=>parseInt(Math.log(l)/OC,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const o=i(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fl=function(r,e,t,i){r.sort(e);const o=function(m,g){const w=g-m;let _,y;if(w===0)return null;if(w===1)return _=r[m],y=t?t(_):_,new mt(y,_.node,mt.BLACK,null,null);{const T=parseInt(w/2,10)+m,R=o(m,T),O=o(T+1,g);return _=r[T],y=t?t(_):_,new mt(y,_.node,mt.BLACK,R,O)}},l=function(m){let g=null,w=null,_=r.length;const y=function(R,O){const D=_-R,ee=_;_-=R;const j=o(D+1,ee),K=r[D],H=t?t(K):K;T(new mt(H,K.node,O,null,j))},T=function(R){g?(g.left=R,g=R):(w=R,g=R)};for(let R=0;R<m.count;++R){const O=m.nextBitIsOne(),D=Math.pow(2,m.count-(R+1));O?y(D,mt.BLACK):(y(D,mt.BLACK),y(D,mt.RED))}return w},u=new LC(r.length),f=l(u);return new Mt(i||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd;const Os={};class On{static get Default(){return W(Os&&nt,"ChildrenNode.ts has not been loaded"),sd=sd||new On({".priority":Os},{".priority":nt}),sd}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Ws(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Mt?t:null}hasIndex(e){return Sn(this.indexSet_,e.toString())}addIndex(e,t){W(e!==Fs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const l=t.getIterator(xe.Wrap);let u=l.getNext();for(;u;)o=o||e.isDefinedOn(u.node),i.push(u),u=l.getNext();let f;o?f=fl(i,e.getCompare()):f=Os;const m=e.toString(),g=Object.assign({},this.indexSet_);g[m]=e;const w=Object.assign({},this.indexes_);return w[m]=f,new On(w,g)}addToIndexes(e,t){const i=cl(this.indexes_,(o,l)=>{const u=Ws(this.indexSet_,l);if(W(u,"Missing index implementation for "+l),o===Os)if(u.isDefinedOn(e.node)){const f=[],m=t.getIterator(xe.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&f.push(g),g=m.getNext();return f.push(e),fl(f,u.getCompare())}else return Os;else{const f=t.get(e.name);let m=o;return f&&(m=m.remove(new xe(e.name,f))),m.insert(e,e.node)}});return new On(i,this.indexSet_)}removeFromIndexes(e,t){const i=cl(this.indexes_,o=>{if(o===Os)return o;{const l=t.get(e.name);return l?o.remove(new xe(e.name,l)):o}});return new On(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi;class fe{static get EMPTY_NODE(){return Yi||(Yi=new fe(new Mt(ih),null,On.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&a_(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yi}updatePriority(e){return this.children_.isEmpty()?this:new fe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Yi:t}}getChild(e){const t=we(e);return t===null?this:this.getImmediateChild(t).getChild($e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(W(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new xe(e,t);let o,l;t.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(i,this.children_));const u=o.isEmpty()?Yi:this.priorityNode_;return new fe(o,u,l)}}updateChild(e,t){const i=we(e);if(i===null)return t;{W(we(e)!==".priority"||Pr(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild($e(e),t);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,o=0,l=!0;if(this.forEachChild(nt,(u,f)=>{t[u]=f.val(e),i++,l&&fe.INTEGER_REGEXP_.test(u)?o=Math.max(o,Number(u)):l=!1}),!e&&l&&o<2*i){const u=[];for(const f in t)u[f]=t[f];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+o_(this.getPriority().val())+":"),this.forEachChild(nt,(t,i)=>{const o=i.hash();o!==""&&(e+=":"+t+":"+o)}),this.lazyHash_=e===""?"":Lv(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new xe(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new xe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new xe(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>t(o.name,o.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,xe.Wrap);let l=o.peek();for(;l!=null&&t.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,xe.Wrap);let l=o.peek();for(;l!=null&&t.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ko?-1:0}withIndex(e){if(e===Fs||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new fe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Fs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(nt),o=t.getIterator(nt);let l=i.getNext(),u=o.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=o.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===Fs?null:this.indexMap_.get(e.toString())}}fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MC extends fe{constructor(){super(new Mt(ih),fe.EMPTY_NODE,On.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fe.EMPTY_NODE}isEmpty(){return!1}}const ko=new MC;Object.defineProperties(xe,{MIN:{value:new xe(Hs,fe.EMPTY_NODE)},MAX:{value:new xe(rs,ko)}});i_.__EMPTY_NODE=fe.EMPTY_NODE;pt.__childrenNodeConstructor=fe;RC(ko);jC(ko);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=!0;function ct(r,e=null){if(r===null)return fe.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),W(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const t=r;return new pt(t,ct(e))}if(!(r instanceof Array)&&FC){const t=[];let i=!1;if(yt(r,(u,f)=>{if(u.substring(0,1)!=="."){const m=ct(f);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new xe(u,m)))}}),t.length===0)return fe.EMPTY_NODE;const l=fl(t,bC,u=>u.name,ih);if(i){const u=fl(t,nt.getCompare());return new fe(l,ct(e),new On({".priority":u},{".priority":nt}))}else return new fe(l,ct(e),On.Default)}else{let t=fe.EMPTY_NODE;return yt(r,(i,o)=>{if(Sn(r,i)&&i.substring(0,1)!=="."){const l=ct(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(ct(e))}}AC(ct);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC extends Ml{constructor(e){super(),this.indexPath_=e,W(!Ce(e)&&we(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),o=this.extractChild(t.node),l=i.compareTo(o);return l===0?ls(e.name,t.name):l}makePost(e,t){const i=ct(e),o=fe.EMPTY_NODE.updateChild(this.indexPath_,i);return new xe(t,o)}maxPost(){const e=fe.EMPTY_NODE.updateChild(this.indexPath_,ko);return new xe(rs,e)}toString(){return po(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C extends Ml{compare(e,t){const i=e.node.compareTo(t.node);return i===0?ls(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return xe.MIN}maxPost(){return xe.MAX}makePost(e,t){const i=ct(e);return new xe(t,i)}toString(){return".value"}}const zC=new $C;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(r){return{type:"value",snapshotNode:r}}function qs(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function mo(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function go(r,e,t){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:t}}function BC(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this.index_=e}updateChild(e,t,i,o,l,u){W(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(o).equals(i.getChild(o))&&f.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(mo(t,f)):W(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(qs(t,i)):u.trackChildChange(go(t,i,f))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(nt,(o,l)=>{t.hasChild(o)||i.trackChildChange(mo(o,l))}),t.isLeafNode()||t.forEachChild(nt,(o,l)=>{if(e.hasChild(o)){const u=e.getImmediateChild(o);u.equals(l)||i.trackChildChange(go(o,l,u))}else i.trackChildChange(qs(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?fe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.indexedFilter_=new oh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=vo.getStartPost_(e),this.endPost_=vo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,o,l,u){return this.matches(new xe(t,i))||(i=fe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,o,l,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=fe.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(fe.EMPTY_NODE);const l=this;return t.forEachChild(nt,(u,f)=>{l.matches(new xe(u,f))||(o=o.updateImmediateChild(u,fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new vo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,o,l,u){return this.rangedFilter_.matches(new xe(t,i))||(i=fe.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,o,l,u):this.fullLimitUpdateChild_(e,t,i,l,u)}updateFullNode(e,t,i){let o;if(t.isLeafNode()||t.isEmpty())o=fe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){o=fe.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const f=l.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))o=o.updateImmediateChild(f.name,f.node),u++;else break;else continue}}else{o=t.withIndex(this.index_),o=o.updatePriority(fe.EMPTY_NODE);let l;this.reverse_?l=o.getReverseIterator(this.index_):l=o.getIterator(this.index_);let u=0;for(;l.hasNext();){const f=l.getNext();u<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?u++:o=o.updateImmediateChild(f.name,fe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,o,l){let u;if(this.reverse_){const _=this.index_.getCompare();u=(y,T)=>_(T,y)}else u=this.index_.getCompare();const f=e;W(f.numChildren()===this.limit_,"");const m=new xe(t,i),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),w=this.rangedFilter_.matches(m);if(f.hasChild(t)){const _=f.getImmediateChild(t);let y=o.getChildAfterChild(this.index_,g,this.reverse_);for(;y!=null&&(y.name===t||f.hasChild(y.name));)y=o.getChildAfterChild(this.index_,y,this.reverse_);const T=y==null?1:u(y,m);if(w&&!i.isEmpty()&&T>=0)return l!=null&&l.trackChildChange(go(t,i,_)),f.updateImmediateChild(t,i);{l!=null&&l.trackChildChange(mo(t,_));const O=f.updateImmediateChild(t,fe.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(l!=null&&l.trackChildChange(qs(y.name,y.node)),O.updateImmediateChild(y.name,y.node)):O}}else return i.isEmpty()?e:w&&u(g,m)>=0?(l!=null&&(l.trackChildChange(mo(g.name,g.node)),l.trackChildChange(qs(t,i))),f.updateImmediateChild(t,i).updateImmediateChild(g.name,fe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return W(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hs}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return W(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nt}copy(){const e=new ah;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function VC(r){return r.loadsAllData()?new oh(r.getIndex()):r.hasLimit()?new WC(r):new vo(r)}function _g(r){const e={};if(r.isDefault())return e;let t;if(r.index_===nt?t="$priority":r.index_===zC?t="$value":r.index_===Fs?t="$key":(W(r.index_ instanceof UC,"Unrecognized index type!"),t=r.index_.toString()),e.orderBy=ut(t),r.startSet_){const i=r.startAfterSet_?"startAfter":"startAt";e[i]=ut(r.indexStartValue_),r.startNameSet_&&(e[i]+=","+ut(r.indexStartName_))}if(r.endSet_){const i=r.endBeforeSet_?"endBefore":"endAt";e[i]=ut(r.indexEndValue_),r.endNameSet_&&(e[i]+=","+ut(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function yg(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let t=r.viewFrom_;t===""&&(r.isViewFromLeft()?t="l":t="r"),e.vf=t}return r.index_!==nt&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends t_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=To("p:rest:"),this.listens_={}}listen(e,t,i,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=pl.getListenId_(e,i),f={};this.listens_[u]=f;const m=_g(e._queryParams);this.restRequest_(l+".json",m,(g,w)=>{let _=w;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(l,_,!1,i),Ws(this.listens_,u)===f){let y;g?g===401?y="permission_denied":y="rest_error:"+g:y="ok",o(y,null)}})}unlisten(e,t){const i=pl.getListenId_(e,t);delete this.listens_[i]}get(e){const t=_g(e._queryParams),i=e._path.toString(),o=new Co;return this.restRequest_(i+".json",t,(l,u)=>{let f=u;l===404&&(f=null,l=null),l===null?(this.onDataUpdate_(i,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ti(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=uo(f.responseText)}catch{kt("Failed to parse JSON response for "+u+": "+f.responseText)}i(null,m)}else f.status!==401&&f.status!==404&&kt("Got unsuccessful REST response for "+u+" Status: "+f.status),i(f.status);i=null}},f.open("GET",u,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.rootNode_=fe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(){return{value:null,children:new Map}}function d_(r,e,t){if(Ce(e))r.value=t,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,t);else{const i=we(e);r.children.has(i)||r.children.set(i,ml());const o=r.children.get(i);e=$e(e),d_(o,e,t)}}function Id(r,e,t){r.value!==null?t(e,r.value):qC(r,(i,o)=>{const l=new Oe(e.toString()+"/"+i);Id(o,l,t)})}function qC(r,e){r.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&yt(this.last_,(i,o)=>{t[i]=t[i]-o}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=10*1e3,KC=30*1e3,QC=300*1e3;class YC{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new GC(e);const i=wg+(KC-wg)*Math.random();ro(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;yt(e,(o,l)=>{l>0&&Sn(this.statsToReport_,o)&&(t[o]=l,i=!0)}),i&&this.server_.reportStats(t),ro(this.reportStats_.bind(this),Math.floor(Math.random()*2*QC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(cn||(cn={}));function lh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ch(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function uh(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=cn.ACK_USER_WRITE,this.source=lh()}operationForChild(e){if(Ce(this.path)){if(this.affectedTree.value!=null)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Oe(e));return new gl(Ae(),t,this.revert)}}else return W(we(this.path)===e,"operationForChild called for unrelated child."),new gl($e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t){this.source=e,this.path=t,this.type=cn.LISTEN_COMPLETE}operationForChild(e){return Ce(this.path)?new _o(this.source,Ae()):new _o(this.source,$e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=cn.OVERWRITE}operationForChild(e){return Ce(this.path)?new ss(this.source,Ae(),this.snap.getImmediateChild(e)):new ss(this.source,$e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=cn.MERGE}operationForChild(e){if(Ce(this.path)){const t=this.children.subtree(new Oe(e));return t.isEmpty()?null:t.value?new ss(this.source,Ae(),t.value):new Gs(this.source,Ae(),t)}else return W(we(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gs(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ce(e))return this.isFullyInitialized()&&!this.filtered_;const t=we(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function XC(r,e,t,i){const o=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&r.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(BC(u.childName,u.snapshotNode))}),Ji(r,o,"child_removed",e,i,t),Ji(r,o,"child_added",e,i,t),Ji(r,o,"child_moved",l,i,t),Ji(r,o,"child_changed",e,i,t),Ji(r,o,"value",e,i,t),o}function Ji(r,e,t,i,o,l){const u=i.filter(f=>f.type===t);u.sort((f,m)=>eN(r,f,m)),u.forEach(f=>{const m=ZC(r,f,l);o.forEach(g=>{g.respondsTo(f.type)&&e.push(g.createEvent(m,r.query_))})})}function ZC(r,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function eN(r,e,t){if(e.childName==null||t.childName==null)throw Zs("Should only compare child_ events.");const i=new xe(e.childName,e.snapshotNode),o=new xe(t.childName,t.snapshotNode);return r.index_.compare(i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(r,e){return{eventCache:r,serverCache:e}}function so(r,e,t,i){return Fl(new br(e,t,i),r.serverCache)}function h_(r,e,t,i){return Fl(r.eventCache,new br(e,t,i))}function vl(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function is(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id;const tN=()=>(id||(id=new Mt(US)),id);class Ue{static fromObject(e){let t=new Ue(null);return yt(e,(i,o)=>{t=t.set(new Oe(i),o)}),t}constructor(e,t=tN()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ae(),value:this.value};if(Ce(e))return null;{const i=we(e),o=this.children.get(i);if(o!==null){const l=o.findRootMostMatchingPathAndValue($e(e),t);return l!=null?{path:tt(new Oe(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ce(e))return this;{const t=we(e),i=this.children.get(t);return i!==null?i.subtree($e(e)):new Ue(null)}}set(e,t){if(Ce(e))return new Ue(t,this.children);{const i=we(e),l=(this.children.get(i)||new Ue(null)).set($e(e),t),u=this.children.insert(i,l);return new Ue(this.value,u)}}remove(e){if(Ce(e))return this.children.isEmpty()?new Ue(null):new Ue(null,this.children);{const t=we(e),i=this.children.get(t);if(i){const o=i.remove($e(e));let l;return o.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,o),this.value===null&&l.isEmpty()?new Ue(null):new Ue(this.value,l)}else return this}}get(e){if(Ce(e))return this.value;{const t=we(e),i=this.children.get(t);return i?i.get($e(e)):null}}setTree(e,t){if(Ce(e))return t;{const i=we(e),l=(this.children.get(i)||new Ue(null)).setTree($e(e),t);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new Ue(this.value,u)}}fold(e){return this.fold_(Ae(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((o,l)=>{i[o]=l.fold_(tt(e,o),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Ae(),t)}findOnPath_(e,t,i){const o=this.value?i(t,this.value):!1;if(o)return o;if(Ce(e))return null;{const l=we(e),u=this.children.get(l);return u?u.findOnPath_($e(e),tt(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ae(),t)}foreachOnPath_(e,t,i){if(Ce(e))return this;{this.value&&i(t,this.value);const o=we(e),l=this.children.get(o);return l?l.foreachOnPath_($e(e),tt(t,o),i):new Ue(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,t){this.children.inorderTraversal((i,o)=>{o.foreach_(tt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.writeTree_=e}static empty(){return new dn(new Ue(null))}}function io(r,e,t){if(Ce(e))return new dn(new Ue(t));{const i=r.writeTree_.findRootMostValueAndPath(e);if(i!=null){const o=i.path;let l=i.value;const u=Tt(o,e);return l=l.updateChild(u,t),new dn(r.writeTree_.set(o,l))}else{const o=new Ue(t),l=r.writeTree_.setTree(e,o);return new dn(l)}}}function Td(r,e,t){let i=r;return yt(t,(o,l)=>{i=io(i,tt(e,o),l)}),i}function xg(r,e){if(Ce(e))return dn.empty();{const t=r.writeTree_.setTree(e,new Ue(null));return new dn(t)}}function kd(r,e){return cs(r,e)!=null}function cs(r,e){const t=r.writeTree_.findRootMostValueAndPath(e);return t!=null?r.writeTree_.get(t.path).getChild(Tt(t.path,e)):null}function Eg(r){const e=[],t=r.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(nt,(i,o)=>{e.push(new xe(i,o))}):r.writeTree_.children.inorderTraversal((i,o)=>{o.value!=null&&e.push(new xe(i,o.value))}),e}function Tr(r,e){if(Ce(e))return r;{const t=cs(r,e);return t!=null?new dn(new Ue(t)):new dn(r.writeTree_.subtree(e))}}function Pd(r){return r.writeTree_.isEmpty()}function Ks(r,e){return f_(Ae(),r.writeTree_,e)}function f_(r,e,t){if(e.value!=null)return t.updateChild(r,e.value);{let i=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?(W(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):t=f_(tt(r,o),l,t)}),!t.getChild(r).isEmpty()&&i!==null&&(t=t.updateChild(tt(r,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(r,e){return v_(e,r)}function nN(r,e,t,i,o){W(i>r.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),r.allWrites.push({path:e,snap:t,writeId:i,visible:o}),o&&(r.visibleWrites=io(r.visibleWrites,e,t)),r.lastWriteId=i}function rN(r,e,t,i){W(i>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:t,writeId:i,visible:!0}),r.visibleWrites=Td(r.visibleWrites,e,t),r.lastWriteId=i}function sN(r,e){for(let t=0;t<r.allWrites.length;t++){const i=r.allWrites[t];if(i.writeId===e)return i}return null}function iN(r,e){const t=r.allWrites.findIndex(f=>f.writeId===e);W(t>=0,"removeWrite called with nonexistent writeId.");const i=r.allWrites[t];r.allWrites.splice(t,1);let o=i.visible,l=!1,u=r.allWrites.length-1;for(;o&&u>=0;){const f=r.allWrites[u];f.visible&&(u>=t&&oN(f,i.path)?o=!1:Jt(i.path,f.path)&&(l=!0)),u--}if(o){if(l)return aN(r),!0;if(i.snap)r.visibleWrites=xg(r.visibleWrites,i.path);else{const f=i.children;yt(f,m=>{r.visibleWrites=xg(r.visibleWrites,tt(i.path,m))})}return!0}else return!1}function oN(r,e){if(r.snap)return Jt(r.path,e);for(const t in r.children)if(r.children.hasOwnProperty(t)&&Jt(tt(r.path,t),e))return!0;return!1}function aN(r){r.visibleWrites=p_(r.allWrites,lN,Ae()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function lN(r){return r.visible}function p_(r,e,t){let i=dn.empty();for(let o=0;o<r.length;++o){const l=r[o];if(e(l)){const u=l.path;let f;if(l.snap)Jt(t,u)?(f=Tt(t,u),i=io(i,f,l.snap)):Jt(u,t)&&(f=Tt(u,t),i=io(i,Ae(),l.snap.getChild(f)));else if(l.children){if(Jt(t,u))f=Tt(t,u),i=Td(i,f,l.children);else if(Jt(u,t))if(f=Tt(u,t),Ce(f))i=Td(i,Ae(),l.children);else{const m=Ws(l.children,we(f));if(m){const g=m.getChild($e(f));i=io(i,Ae(),g)}}}else throw Zs("WriteRecord should have .snap or .children")}}return i}function m_(r,e,t,i,o){if(!i&&!o){const l=cs(r.visibleWrites,e);if(l!=null)return l;{const u=Tr(r.visibleWrites,e);if(Pd(u))return t;if(t==null&&!kd(u,Ae()))return null;{const f=t||fe.EMPTY_NODE;return Ks(u,f)}}}else{const l=Tr(r.visibleWrites,e);if(!o&&Pd(l))return t;if(!o&&t==null&&!kd(l,Ae()))return null;{const u=function(g){return(g.visible||o)&&(!i||!~i.indexOf(g.writeId))&&(Jt(g.path,e)||Jt(e,g.path))},f=p_(r.allWrites,u,e),m=t||fe.EMPTY_NODE;return Ks(f,m)}}}function cN(r,e,t){let i=fe.EMPTY_NODE;const o=cs(r.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(nt,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(t){const l=Tr(r.visibleWrites,e);return t.forEachChild(nt,(u,f)=>{const m=Ks(Tr(l,new Oe(u)),f);i=i.updateImmediateChild(u,m)}),Eg(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=Tr(r.visibleWrites,e);return Eg(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function uN(r,e,t,i,o){W(i||o,"Either existingEventSnap or existingServerSnap must exist");const l=tt(e,t);if(kd(r.visibleWrites,l))return null;{const u=Tr(r.visibleWrites,l);return Pd(u)?o.getChild(t):Ks(u,o.getChild(t))}}function dN(r,e,t,i){const o=tt(e,t),l=cs(r.visibleWrites,o);if(l!=null)return l;if(i.isCompleteForChild(t)){const u=Tr(r.visibleWrites,o);return Ks(u,i.getNode().getImmediateChild(t))}else return null}function hN(r,e){return cs(r.visibleWrites,e)}function fN(r,e,t,i,o,l,u){let f;const m=Tr(r.visibleWrites,e),g=cs(m,Ae());if(g!=null)f=g;else if(t!=null)f=Ks(m,t);else return[];if(f=f.withIndex(u),!f.isEmpty()&&!f.isLeafNode()){const w=[],_=u.getCompare(),y=l?f.getReverseIteratorFrom(i,u):f.getIteratorFrom(i,u);let T=y.getNext();for(;T&&w.length<o;)_(T,i)!==0&&w.push(T),T=y.getNext();return w}else return[]}function pN(){return{visibleWrites:dn.empty(),allWrites:[],lastWriteId:-1}}function _l(r,e,t,i){return m_(r.writeTree,r.treePath,e,t,i)}function dh(r,e){return cN(r.writeTree,r.treePath,e)}function Sg(r,e,t,i){return uN(r.writeTree,r.treePath,e,t,i)}function yl(r,e){return hN(r.writeTree,tt(r.treePath,e))}function mN(r,e,t,i,o,l){return fN(r.writeTree,r.treePath,e,t,i,o,l)}function hh(r,e,t){return dN(r.writeTree,r.treePath,e,t)}function g_(r,e){return v_(tt(r.treePath,e),r.writeTree)}function v_(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;W(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),W(i!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const l=o.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(i,go(i,e.snapshotNode,o.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(i,mo(i,o.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(i,qs(i,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(i,go(i,e.snapshotNode,o.oldSnap));else throw Zs("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const __=new vN;class fh{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new br(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hh(this.writes_,e,i)}}getChildAfterChild(e,t,i){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:is(this.viewCache_),l=mN(this.writes_,o,t,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(r){return{filter:r}}function yN(r,e){W(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),W(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function wN(r,e,t,i,o){const l=new gN;let u,f;if(t.type===cn.OVERWRITE){const g=t;g.source.fromUser?u=bd(r,e,g.path,g.snap,i,o,l):(W(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered()&&!Ce(g.path),u=wl(r,e,g.path,g.snap,i,o,f,l))}else if(t.type===cn.MERGE){const g=t;g.source.fromUser?u=EN(r,e,g.path,g.children,i,o,l):(W(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered(),u=Rd(r,e,g.path,g.children,i,o,f,l))}else if(t.type===cn.ACK_USER_WRITE){const g=t;g.revert?u=NN(r,e,g.path,i,o,l):u=SN(r,e,g.path,g.affectedTree,i,o,l)}else if(t.type===cn.LISTEN_COMPLETE)u=CN(r,e,t.path,i,l);else throw Zs("Unknown operation type: "+t.type);const m=l.getChanges();return xN(e,u,m),{viewCache:u,changes:m}}function xN(r,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=vl(r);(t.length>0||!r.eventCache.isFullyInitialized()||o&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(u_(vl(e)))}}function y_(r,e,t,i,o,l){const u=e.eventCache;if(yl(i,t)!=null)return e;{let f,m;if(Ce(t))if(W(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=is(e),w=g instanceof fe?g:fe.EMPTY_NODE,_=dh(i,w);f=r.filter.updateFullNode(e.eventCache.getNode(),_,l)}else{const g=_l(i,is(e));f=r.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=we(t);if(g===".priority"){W(Pr(t)===1,"Can't have a priority with additional path components");const w=u.getNode();m=e.serverCache.getNode();const _=Sg(i,t,w,m);_!=null?f=r.filter.updatePriority(w,_):f=u.getNode()}else{const w=$e(t);let _;if(u.isCompleteForChild(g)){m=e.serverCache.getNode();const y=Sg(i,t,u.getNode(),m);y!=null?_=u.getNode().getImmediateChild(g).updateChild(w,y):_=u.getNode().getImmediateChild(g)}else _=hh(i,g,e.serverCache);_!=null?f=r.filter.updateChild(u.getNode(),g,_,w,o,l):f=u.getNode()}}return so(e,f,u.isFullyInitialized()||Ce(t),r.filter.filtersNodes())}}function wl(r,e,t,i,o,l,u,f){const m=e.serverCache;let g;const w=u?r.filter:r.filter.getIndexedFilter();if(Ce(t))g=w.updateFullNode(m.getNode(),i,null);else if(w.filtersNodes()&&!m.isFiltered()){const T=m.getNode().updateChild(t,i);g=w.updateFullNode(m.getNode(),T,null)}else{const T=we(t);if(!m.isCompleteForPath(t)&&Pr(t)>1)return e;const R=$e(t),D=m.getNode().getImmediateChild(T).updateChild(R,i);T===".priority"?g=w.updatePriority(m.getNode(),D):g=w.updateChild(m.getNode(),T,D,R,__,null)}const _=h_(e,g,m.isFullyInitialized()||Ce(t),w.filtersNodes()),y=new fh(o,_,l);return y_(r,_,t,o,y,f)}function bd(r,e,t,i,o,l,u){const f=e.eventCache;let m,g;const w=new fh(o,e,l);if(Ce(t))g=r.filter.updateFullNode(e.eventCache.getNode(),i,u),m=so(e,g,!0,r.filter.filtersNodes());else{const _=we(t);if(_===".priority")g=r.filter.updatePriority(e.eventCache.getNode(),i),m=so(e,g,f.isFullyInitialized(),f.isFiltered());else{const y=$e(t),T=f.getNode().getImmediateChild(_);let R;if(Ce(y))R=i;else{const O=w.getCompleteChild(_);O!=null?nh(y)===".priority"&&O.getChild(r_(y)).isEmpty()?R=O:R=O.updateChild(y,i):R=fe.EMPTY_NODE}if(T.equals(R))m=e;else{const O=r.filter.updateChild(f.getNode(),_,R,y,w,u);m=so(e,O,f.isFullyInitialized(),r.filter.filtersNodes())}}}return m}function Cg(r,e){return r.eventCache.isCompleteForChild(e)}function EN(r,e,t,i,o,l,u){let f=e;return i.foreach((m,g)=>{const w=tt(t,m);Cg(e,we(w))&&(f=bd(r,f,w,g,o,l,u))}),i.foreach((m,g)=>{const w=tt(t,m);Cg(e,we(w))||(f=bd(r,f,w,g,o,l,u))}),f}function Ng(r,e,t){return t.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function Rd(r,e,t,i,o,l,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;Ce(t)?g=i:g=new Ue(null).setTree(t,i);const w=e.serverCache.getNode();return g.children.inorderTraversal((_,y)=>{if(w.hasChild(_)){const T=e.serverCache.getNode().getImmediateChild(_),R=Ng(r,T,y);m=wl(r,m,new Oe(_),R,o,l,u,f)}}),g.children.inorderTraversal((_,y)=>{const T=!e.serverCache.isCompleteForChild(_)&&y.value===null;if(!w.hasChild(_)&&!T){const R=e.serverCache.getNode().getImmediateChild(_),O=Ng(r,R,y);m=wl(r,m,new Oe(_),O,o,l,u,f)}}),m}function SN(r,e,t,i,o,l,u){if(yl(o,t)!=null)return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(Ce(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return wl(r,e,t,m.getNode().getChild(t),o,l,f,u);if(Ce(t)){let g=new Ue(null);return m.getNode().forEachChild(Fs,(w,_)=>{g=g.set(new Oe(w),_)}),Rd(r,e,t,g,o,l,f,u)}else return e}else{let g=new Ue(null);return i.foreach((w,_)=>{const y=tt(t,w);m.isCompleteForPath(y)&&(g=g.set(w,m.getNode().getChild(y)))}),Rd(r,e,t,g,o,l,f,u)}}function CN(r,e,t,i,o){const l=e.serverCache,u=h_(e,l.getNode(),l.isFullyInitialized()||Ce(t),l.isFiltered());return y_(r,u,t,i,__,o)}function NN(r,e,t,i,o,l){let u;if(yl(i,t)!=null)return e;{const f=new fh(i,e,o),m=e.eventCache.getNode();let g;if(Ce(t)||we(t)===".priority"){let w;if(e.serverCache.isFullyInitialized())w=_l(i,is(e));else{const _=e.serverCache.getNode();W(_ instanceof fe,"serverChildren would be complete if leaf node"),w=dh(i,_)}w=w,g=r.filter.updateFullNode(m,w,l)}else{const w=we(t);let _=hh(i,w,e.serverCache);_==null&&e.serverCache.isCompleteForChild(w)&&(_=m.getImmediateChild(w)),_!=null?g=r.filter.updateChild(m,w,_,$e(t),f,l):e.eventCache.getNode().hasChild(w)?g=r.filter.updateChild(m,w,fe.EMPTY_NODE,$e(t),f,l):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=_l(i,is(e)),u.isLeafNode()&&(g=r.filter.updateFullNode(g,u,l)))}return u=e.serverCache.isFullyInitialized()||yl(i,Ae())!=null,so(e,g,u,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new oh(i.getIndex()),l=VC(i);this.processor_=_N(l);const u=t.serverCache,f=t.eventCache,m=o.updateFullNode(fe.EMPTY_NODE,u.getNode(),null),g=l.updateFullNode(fe.EMPTY_NODE,f.getNode(),null),w=new br(m,u.isFullyInitialized(),o.filtersNodes()),_=new br(g,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=Fl(_,w),this.eventGenerator_=new JC(this.query_)}get query(){return this.query_}}function TN(r){return r.viewCache_.serverCache.getNode()}function kN(r){return vl(r.viewCache_)}function PN(r,e){const t=is(r.viewCache_);return t&&(r.query._queryParams.loadsAllData()||!Ce(e)&&!t.getImmediateChild(we(e)).isEmpty())?t.getChild(e):null}function Ig(r){return r.eventRegistrations_.length===0}function bN(r,e){r.eventRegistrations_.push(e)}function Tg(r,e,t){const i=[];if(t){W(e==null,"A cancel should cancel all event registrations.");const o=r.query._path;r.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(t,o);u&&i.push(u)})}if(e){let o=[];for(let l=0;l<r.eventRegistrations_.length;++l){const u=r.eventRegistrations_[l];if(!u.matches(e))o.push(u);else if(e.hasAnyCallback()){o=o.concat(r.eventRegistrations_.slice(l+1));break}}r.eventRegistrations_=o}else r.eventRegistrations_=[];return i}function kg(r,e,t,i){e.type===cn.MERGE&&e.source.queryId!==null&&(W(is(r.viewCache_),"We should always have a full cache before handling merges"),W(vl(r.viewCache_),"Missing event cache, even though we have a server cache"));const o=r.viewCache_,l=wN(r.processor_,o,e,t,i);return yN(r.processor_,l.viewCache),W(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=l.viewCache,w_(r,l.changes,l.viewCache.eventCache.getNode(),null)}function RN(r,e){const t=r.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(nt,(l,u)=>{i.push(qs(l,u))}),t.isFullyInitialized()&&i.push(u_(t.getNode())),w_(r,i,t.getNode(),e)}function w_(r,e,t,i){const o=i?[i]:r.eventRegistrations_;return XC(r.eventGenerator_,e,t,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl;class x_{constructor(){this.views=new Map}}function AN(r){W(!xl,"__referenceConstructor has already been defined"),xl=r}function jN(){return W(xl,"Reference.ts has not been loaded"),xl}function DN(r){return r.views.size===0}function ph(r,e,t,i){const o=e.source.queryId;if(o!==null){const l=r.views.get(o);return W(l!=null,"SyncTree gave us an op for an invalid query."),kg(l,e,t,i)}else{let l=[];for(const u of r.views.values())l=l.concat(kg(u,e,t,i));return l}}function E_(r,e,t,i,o){const l=e._queryIdentifier,u=r.views.get(l);if(!u){let f=_l(t,o?i:null),m=!1;f?m=!0:i instanceof fe?(f=dh(t,i),m=!1):(f=fe.EMPTY_NODE,m=!1);const g=Fl(new br(f,m,!1),new br(i,o,!1));return new IN(e,g)}return u}function ON(r,e,t,i,o,l){const u=E_(r,e,i,o,l);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,u),bN(u,t),RN(u,t)}function LN(r,e,t,i){const o=e._queryIdentifier,l=[];let u=[];const f=Rr(r);if(o==="default")for(const[m,g]of r.views.entries())u=u.concat(Tg(g,t,i)),Ig(g)&&(r.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=r.views.get(o);m&&(u=u.concat(Tg(m,t,i)),Ig(m)&&(r.views.delete(o),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!Rr(r)&&l.push(new(jN())(e._repo,e._path)),{removed:l,events:u}}function S_(r){const e=[];for(const t of r.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function kr(r,e){let t=null;for(const i of r.views.values())t=t||PN(i,e);return t}function C_(r,e){if(e._queryParams.loadsAllData())return $l(r);{const i=e._queryIdentifier;return r.views.get(i)}}function N_(r,e){return C_(r,e)!=null}function Rr(r){return $l(r)!=null}function $l(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El;function MN(r){W(!El,"__referenceConstructor has already been defined"),El=r}function FN(){return W(El,"Reference.ts has not been loaded"),El}let UN=1;class Pg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ue(null),this.pendingWriteTree_=pN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function I_(r,e,t,i,o){return nN(r.pendingWriteTree_,e,t,i,o),o?si(r,new ss(lh(),e,t)):[]}function $N(r,e,t,i){rN(r.pendingWriteTree_,e,t,i);const o=Ue.fromObject(t);return si(r,new Gs(lh(),e,o))}function Er(r,e,t=!1){const i=sN(r.pendingWriteTree_,e);if(iN(r.pendingWriteTree_,e)){let l=new Ue(null);return i.snap!=null?l=l.set(Ae(),!0):yt(i.children,u=>{l=l.set(new Oe(u),!0)}),si(r,new gl(i.path,l,t))}else return[]}function Po(r,e,t){return si(r,new ss(ch(),e,t))}function zN(r,e,t){const i=Ue.fromObject(t);return si(r,new Gs(ch(),e,i))}function BN(r,e){return si(r,new _o(ch(),e))}function WN(r,e,t){const i=gh(r,t);if(i){const o=vh(i),l=o.path,u=o.queryId,f=Tt(l,e),m=new _o(uh(u),f);return _h(r,l,m)}else return[]}function Sl(r,e,t,i,o=!1){const l=e._path,u=r.syncPointTree_.get(l);let f=[];if(u&&(e._queryIdentifier==="default"||N_(u,e))){const m=LN(u,e,t,i);DN(u)&&(r.syncPointTree_=r.syncPointTree_.remove(l));const g=m.removed;if(f=m.events,!o){const w=g.findIndex(y=>y._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(l,(y,T)=>Rr(T));if(w&&!_){const y=r.syncPointTree_.subtree(l);if(!y.isEmpty()){const T=qN(y);for(let R=0;R<T.length;++R){const O=T[R],D=O.query,ee=b_(r,O);r.listenProvider_.startListening(oo(D),yo(r,D),ee.hashFn,ee.onComplete)}}}!_&&g.length>0&&!i&&(w?r.listenProvider_.stopListening(oo(e),null):g.forEach(y=>{const T=r.queryToTagMap.get(zl(y));r.listenProvider_.stopListening(oo(y),T)}))}GN(r,g)}return f}function T_(r,e,t,i){const o=gh(r,i);if(o!=null){const l=vh(o),u=l.path,f=l.queryId,m=Tt(u,e),g=new ss(uh(f),m,t);return _h(r,u,g)}else return[]}function VN(r,e,t,i){const o=gh(r,i);if(o){const l=vh(o),u=l.path,f=l.queryId,m=Tt(u,e),g=Ue.fromObject(t),w=new Gs(uh(f),m,g);return _h(r,u,w)}else return[]}function Ad(r,e,t,i=!1){const o=e._path;let l=null,u=!1;r.syncPointTree_.foreachOnPath(o,(y,T)=>{const R=Tt(y,o);l=l||kr(T,R),u=u||Rr(T)});let f=r.syncPointTree_.get(o);f?(u=u||Rr(f),l=l||kr(f,Ae())):(f=new x_,r.syncPointTree_=r.syncPointTree_.set(o,f));let m;l!=null?m=!0:(m=!1,l=fe.EMPTY_NODE,r.syncPointTree_.subtree(o).foreachChild((T,R)=>{const O=kr(R,Ae());O&&(l=l.updateImmediateChild(T,O))}));const g=N_(f,e);if(!g&&!e._queryParams.loadsAllData()){const y=zl(e);W(!r.queryToTagMap.has(y),"View does not exist, but we have a tag");const T=KN();r.queryToTagMap.set(y,T),r.tagToQueryMap.set(T,y)}const w=Ul(r.pendingWriteTree_,o);let _=ON(f,e,t,w,l,m);if(!g&&!u&&!i){const y=C_(f,e);_=_.concat(QN(r,e,y))}return _}function mh(r,e,t){const o=r.pendingWriteTree_,l=r.syncPointTree_.findOnPath(e,(u,f)=>{const m=Tt(u,e),g=kr(f,m);if(g)return g});return m_(o,e,l,t,!0)}function HN(r,e){const t=e._path;let i=null;r.syncPointTree_.foreachOnPath(t,(g,w)=>{const _=Tt(g,t);i=i||kr(w,_)});let o=r.syncPointTree_.get(t);o?i=i||kr(o,Ae()):(o=new x_,r.syncPointTree_=r.syncPointTree_.set(t,o));const l=i!=null,u=l?new br(i,!0,!1):null,f=Ul(r.pendingWriteTree_,e._path),m=E_(o,e,f,l?u.getNode():fe.EMPTY_NODE,l);return kN(m)}function si(r,e){return k_(e,r.syncPointTree_,null,Ul(r.pendingWriteTree_,Ae()))}function k_(r,e,t,i){if(Ce(r.path))return P_(r,e,t,i);{const o=e.get(Ae());t==null&&o!=null&&(t=kr(o,Ae()));let l=[];const u=we(r.path),f=r.operationForChild(u),m=e.children.get(u);if(m&&f){const g=t?t.getImmediateChild(u):null,w=g_(i,u);l=l.concat(k_(f,m,g,w))}return o&&(l=l.concat(ph(o,r,i,t))),l}}function P_(r,e,t,i){const o=e.get(Ae());t==null&&o!=null&&(t=kr(o,Ae()));let l=[];return e.children.inorderTraversal((u,f)=>{const m=t?t.getImmediateChild(u):null,g=g_(i,u),w=r.operationForChild(u);w&&(l=l.concat(P_(w,f,m,g)))}),o&&(l=l.concat(ph(o,r,i,t))),l}function b_(r,e){const t=e.query,i=yo(r,t);return{hashFn:()=>(TN(e)||fe.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return i?WN(r,t._path,i):BN(r,t._path);{const l=BS(o,t);return Sl(r,t,null,l)}}}}function yo(r,e){const t=zl(e);return r.queryToTagMap.get(t)}function zl(r){return r._path.toString()+"$"+r._queryIdentifier}function gh(r,e){return r.tagToQueryMap.get(e)}function vh(r){const e=r.indexOf("$");return W(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new Oe(r.substr(0,e))}}function _h(r,e,t){const i=r.syncPointTree_.get(e);W(i,"Missing sync point for query tag that we're tracking");const o=Ul(r.pendingWriteTree_,e);return ph(i,t,o,null)}function qN(r){return r.fold((e,t,i)=>{if(t&&Rr(t))return[$l(t)];{let o=[];return t&&(o=S_(t)),yt(i,(l,u)=>{o=o.concat(u)}),o}})}function oo(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(FN())(r._repo,r._path):r}function GN(r,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const o=zl(i),l=r.queryToTagMap.get(o);r.queryToTagMap.delete(o),r.tagToQueryMap.delete(l)}}}function KN(){return UN++}function QN(r,e,t){const i=e._path,o=yo(r,e),l=b_(r,t),u=r.listenProvider_.startListening(oo(e),o,l.hashFn,l.onComplete),f=r.syncPointTree_.subtree(i);if(o)W(!Rr(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((g,w,_)=>{if(!Ce(g)&&w&&Rr(w))return[$l(w).query];{let y=[];return w&&(y=y.concat(S_(w).map(T=>T.query))),yt(_,(T,R)=>{y=y.concat(R)}),y}});for(let g=0;g<m.length;++g){const w=m[g];r.listenProvider_.stopListening(oo(w),yo(r,w))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yh(t)}node(){return this.node_}}class wh{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=tt(this.path_,e);return new wh(this.syncTree_,t)}node(){return mh(this.syncTree_,this.path_)}}const YN=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},bg=function(r,e,t){if(!r||typeof r!="object")return r;if(W(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return JN(r[".sv"],e,t);if(typeof r[".sv"]=="object")return XN(r[".sv"],e);W(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},JN=function(r,e,t){switch(r){case"timestamp":return t.timestamp;default:W(!1,"Unexpected server value: "+r)}},XN=function(r,e,t){r.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const i=r.increment;typeof i!="number"&&W(!1,"Unexpected increment value: "+i);const o=e.node();if(W(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const u=o.getValue();return typeof u!="number"?i:u+i},R_=function(r,e,t,i){return xh(e,new wh(t,r),i)},A_=function(r,e,t){return xh(r,new yh(e),t)};function xh(r,e,t){const i=r.getPriority().val(),o=bg(i,e.getImmediateChild(".priority"),t);let l;if(r.isLeafNode()){const u=r,f=bg(u.getValue(),e,t);return f!==u.getValue()||o!==u.getPriority().val()?new pt(f,ct(o)):r}else{const u=r;return l=u,o!==u.getPriority().val()&&(l=l.updatePriority(new pt(o))),u.forEachChild(nt,(f,m)=>{const g=xh(m,e.getImmediateChild(f),t);g!==m&&(l=l.updateImmediateChild(f,g))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Sh(r,e){let t=e instanceof Oe?e:new Oe(e),i=r,o=we(t);for(;o!==null;){const l=Ws(i.node.children,o)||{children:{},childCount:0};i=new Eh(o,i,l),t=$e(t),o=we(t)}return i}function ii(r){return r.node.value}function j_(r,e){r.node.value=e,jd(r)}function D_(r){return r.node.childCount>0}function ZN(r){return ii(r)===void 0&&!D_(r)}function Bl(r,e){yt(r.node.children,(t,i)=>{e(new Eh(t,r,i))})}function O_(r,e,t,i){t&&e(r),Bl(r,o=>{O_(o,e,!0)})}function eI(r,e,t){let i=r.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function bo(r){return new Oe(r.parent===null?r.name:bo(r.parent)+"/"+r.name)}function jd(r){r.parent!==null&&tI(r.parent,r.name,r)}function tI(r,e,t){const i=ZN(t),o=Sn(r.node.children,e);i&&o?(delete r.node.children[e],r.node.childCount--,jd(r)):!i&&!o&&(r.node.children[e]=t.node,r.node.childCount++,jd(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=/[\[\].#$\/\u0000-\u001F\u007F]/,rI=/[\[\].#$\u0000-\u001F\u007F]/,od=10*1024*1024,Ch=function(r){return typeof r=="string"&&r.length!==0&&!nI.test(r)},L_=function(r){return typeof r=="string"&&r.length!==0&&!rI.test(r)},sI=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),L_(r)},iI=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!Jd(r)||r&&typeof r=="object"&&Sn(r,".sv")},M_=function(r,e,t,i){i&&e===void 0||Wl(Ol(r,"value"),e,t)},Wl=function(r,e,t){const i=t instanceof Oe?new EC(t,r):t;if(e===void 0)throw new Error(r+"contains undefined "+Xr(i));if(typeof e=="function")throw new Error(r+"contains a function "+Xr(i)+" with contents = "+e.toString());if(Jd(e))throw new Error(r+"contains "+e.toString()+" "+Xr(i));if(typeof e=="string"&&e.length>od/3&&Ll(e)>od)throw new Error(r+"contains a string greater than "+od+" utf8 bytes "+Xr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(yt(e,(u,f)=>{if(u===".value")o=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!Ch(u)))throw new Error(r+" contains an invalid key ("+u+") "+Xr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);SC(i,u),Wl(r,f,i),CC(i)}),o&&l)throw new Error(r+' contains ".value" child '+Xr(i)+" in addition to actual children.")}},oI=function(r,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const l=po(i);for(let u=0;u<l.length;u++)if(!(l[u]===".priority"&&u===l.length-1)){if(!Ch(l[u]))throw new Error(r+"contains an invalid key ("+l[u]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(xC);let o=null;for(t=0;t<e.length;t++){if(i=e[t],o!==null&&Jt(o,i))throw new Error(r+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}},aI=function(r,e,t,i){const o=Ol(r,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];yt(e,(u,f)=>{const m=new Oe(u);if(Wl(o,f,tt(t,m)),nh(m)===".priority"&&!iI(f))throw new Error(o+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),oI(o,l)},F_=function(r,e,t,i){if(!L_(t))throw new Error(Ol(r,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},lI=function(r,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),F_(r,e,t)},Nh=function(r,e){if(we(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},cI=function(r,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ch(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!sI(t))throw new Error(Ol(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vl(r,e){let t=null;for(let i=0;i<e.length;i++){const o=e[i],l=o.getPath();t!==null&&!rh(l,t.path)&&(r.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(o)}t&&r.eventLists_.push(t)}function U_(r,e,t){Vl(r,t),$_(r,i=>rh(i,e))}function Xt(r,e,t){Vl(r,t),$_(r,i=>Jt(i,e)||Jt(e,i))}function $_(r,e){r.recursionDepth_++;let t=!0;for(let i=0;i<r.eventLists_.length;i++){const o=r.eventLists_[i];if(o){const l=o.path;e(l)?(dI(r.eventLists_[i]),r.eventLists_[i]=null):t=!1}}t&&(r.eventLists_=[]),r.recursionDepth_--}function dI(r){for(let e=0;e<r.events.length;e++){const t=r.events[e];if(t!==null){r.events[e]=null;const i=t.getEventRunner();no&&_t("event: "+t.toString()),ri(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="repo_interrupt",fI=25;class pI{constructor(e,t,i,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ml(),this.transactionQueueTree_=new Eh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mI(r,e,t){if(r.stats_=eh(r.repoInfo_),r.forceRestClient_||qS())r.server_=new pl(r.repoInfo_,(i,o,l,u)=>{Rg(r,i,o,l,u)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Ag(r,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}r.persistentConnection_=new Fn(r.repoInfo_,e,(i,o,l,u)=>{Rg(r,i,o,l,u)},i=>{Ag(r,i)},i=>{gI(r,i)},r.authTokenProvider_,r.appCheckProvider_,t),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(i=>{r.server_.refreshAuthToken(i)}),r.appCheckProvider_.addTokenChangeListener(i=>{r.server_.refreshAppCheckToken(i.token)}),r.statsReporter_=JS(r.repoInfo_,()=>new YC(r.stats_,r.server_)),r.infoData_=new HC,r.infoSyncTree_=new Pg({startListening:(i,o,l,u)=>{let f=[];const m=r.infoData_.getNode(i._path);return m.isEmpty()||(f=Po(r.infoSyncTree_,i._path,m),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),Ih(r,"connected",!1),r.serverSyncTree_=new Pg({startListening:(i,o,l,u)=>(r.server_.listen(i,l,o,(f,m)=>{const g=u(f,m);Xt(r.eventQueue_,i._path,g)}),[]),stopListening:(i,o)=>{r.server_.unlisten(i,o)}})}function z_(r){const t=r.infoData_.getNode(new Oe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Hl(r){return YN({timestamp:z_(r)})}function Rg(r,e,t,i,o){r.dataUpdateCount++;const l=new Oe(e);t=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,t):t;let u=[];if(o)if(i){const m=cl(t,g=>ct(g));u=VN(r.serverSyncTree_,l,m,o)}else{const m=ct(t);u=T_(r.serverSyncTree_,l,m,o)}else if(i){const m=cl(t,g=>ct(g));u=zN(r.serverSyncTree_,l,m)}else{const m=ct(t);u=Po(r.serverSyncTree_,l,m)}let f=l;u.length>0&&(f=Qs(r,l)),Xt(r.eventQueue_,f,u)}function Ag(r,e){Ih(r,"connected",e),e===!1&&wI(r)}function gI(r,e){yt(e,(t,i)=>{Ih(r,t,i)})}function Ih(r,e,t){const i=new Oe("/.info/"+e),o=ct(t);r.infoData_.updateSnapshot(i,o);const l=Po(r.infoSyncTree_,i,o);Xt(r.eventQueue_,i,l)}function Th(r){return r.nextWriteId_++}function vI(r,e,t){const i=HN(r.serverSyncTree_,e);return i!=null?Promise.resolve(i):r.server_.get(e).then(o=>{const l=ct(o).withIndex(e._queryParams.getIndex());Ad(r.serverSyncTree_,e,t,!0);let u;if(e._queryParams.loadsAllData())u=Po(r.serverSyncTree_,e._path,l);else{const f=yo(r.serverSyncTree_,e);u=T_(r.serverSyncTree_,e._path,l,f)}return Xt(r.eventQueue_,e._path,u),Sl(r.serverSyncTree_,e,t,null,!0),l},o=>(Ro(r,"get for query "+ut(e)+" failed: "+o),Promise.reject(new Error(o))))}function _I(r,e,t,i,o){Ro(r,"set",{path:e.toString(),value:t,priority:i});const l=Hl(r),u=ct(t,i),f=mh(r.serverSyncTree_,e),m=A_(u,f,l),g=Th(r),w=I_(r.serverSyncTree_,e,m,g,!0);Vl(r.eventQueue_,w),r.server_.put(e.toString(),u.val(!0),(y,T)=>{const R=y==="ok";R||kt("set at "+e+" failed: "+y);const O=Er(r.serverSyncTree_,g,!R);Xt(r.eventQueue_,e,O),Dd(r,o,y,T)});const _=Ph(r,e);Qs(r,_),Xt(r.eventQueue_,_,[])}function yI(r,e,t,i){Ro(r,"update",{path:e.toString(),value:t});let o=!0;const l=Hl(r),u={};if(yt(t,(f,m)=>{o=!1,u[f]=R_(tt(e,f),ct(m),r.serverSyncTree_,l)}),o)_t("update() called with empty data.  Don't do anything."),Dd(r,i,"ok",void 0);else{const f=Th(r),m=$N(r.serverSyncTree_,e,u,f);Vl(r.eventQueue_,m),r.server_.merge(e.toString(),t,(g,w)=>{const _=g==="ok";_||kt("update at "+e+" failed: "+g);const y=Er(r.serverSyncTree_,f,!_),T=y.length>0?Qs(r,e):e;Xt(r.eventQueue_,T,y),Dd(r,i,g,w)}),yt(t,g=>{const w=Ph(r,tt(e,g));Qs(r,w)}),Xt(r.eventQueue_,e,[])}}function wI(r){Ro(r,"onDisconnectEvents");const e=Hl(r),t=ml();Id(r.onDisconnect_,Ae(),(o,l)=>{const u=R_(o,l,r.serverSyncTree_,e);d_(t,o,u)});let i=[];Id(t,Ae(),(o,l)=>{i=i.concat(Po(r.serverSyncTree_,o,l));const u=Ph(r,o);Qs(r,u)}),r.onDisconnect_=ml(),Xt(r.eventQueue_,Ae(),i)}function xI(r,e,t){let i;we(e._path)===".info"?i=Ad(r.infoSyncTree_,e,t):i=Ad(r.serverSyncTree_,e,t),U_(r.eventQueue_,e._path,i)}function EI(r,e,t){let i;we(e._path)===".info"?i=Sl(r.infoSyncTree_,e,t):i=Sl(r.serverSyncTree_,e,t),U_(r.eventQueue_,e._path,i)}function SI(r){r.persistentConnection_&&r.persistentConnection_.interrupt(hI)}function Ro(r,...e){let t="";r.persistentConnection_&&(t=r.persistentConnection_.id+":"),_t(t,...e)}function Dd(r,e,t,i){e&&ri(()=>{if(t==="ok")e(null);else{const o=(t||"error").toUpperCase();let l=o;i&&(l+=": "+i);const u=new Error(l);u.code=o,e(u)}})}function B_(r,e,t){return mh(r.serverSyncTree_,e,t)||fe.EMPTY_NODE}function kh(r,e=r.transactionQueueTree_){if(e||ql(r,e),ii(e)){const t=V_(r,e);W(t.length>0,"Sending zero length transaction queue"),t.every(o=>o.status===0)&&CI(r,bo(e),t)}else D_(e)&&Bl(e,t=>{kh(r,t)})}function CI(r,e,t){const i=t.map(g=>g.currentWriteId),o=B_(r,e,i);let l=o;const u=o.hash();for(let g=0;g<t.length;g++){const w=t[g];W(w.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const _=Tt(e,w.path);l=l.updateChild(_,w.currentOutputSnapshotRaw)}const f=l.val(!0),m=e;r.server_.put(m.toString(),f,g=>{Ro(r,"transaction put response",{path:m.toString(),status:g});let w=[];if(g==="ok"){const _=[];for(let y=0;y<t.length;y++)t[y].status=2,w=w.concat(Er(r.serverSyncTree_,t[y].currentWriteId)),t[y].onComplete&&_.push(()=>t[y].onComplete(null,!0,t[y].currentOutputSnapshotResolved)),t[y].unwatcher();ql(r,Sh(r.transactionQueueTree_,e)),kh(r,r.transactionQueueTree_),Xt(r.eventQueue_,e,w);for(let y=0;y<_.length;y++)ri(_[y])}else{if(g==="datastale")for(let _=0;_<t.length;_++)t[_].status===3?t[_].status=4:t[_].status=0;else{kt("transaction at "+m.toString()+" failed: "+g);for(let _=0;_<t.length;_++)t[_].status=4,t[_].abortReason=g}Qs(r,e)}},u)}function Qs(r,e){const t=W_(r,e),i=bo(t),o=V_(r,t);return NI(r,o,i),i}function NI(r,e,t){if(e.length===0)return;const i=[];let o=[];const u=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],g=Tt(t,m.path);let w=!1,_;if(W(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)w=!0,_=m.abortReason,o=o.concat(Er(r.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=fI)w=!0,_="maxretry",o=o.concat(Er(r.serverSyncTree_,m.currentWriteId,!0));else{const y=B_(r,m.path,u);m.currentInputSnapshot=y;const T=e[f].update(y.val());if(T!==void 0){Wl("transaction failed: Data returned ",T,m.path);let R=ct(T);typeof T=="object"&&T!=null&&Sn(T,".priority")||(R=R.updatePriority(y.getPriority()));const D=m.currentWriteId,ee=Hl(r),j=A_(R,y,ee);m.currentOutputSnapshotRaw=R,m.currentOutputSnapshotResolved=j,m.currentWriteId=Th(r),u.splice(u.indexOf(D),1),o=o.concat(I_(r.serverSyncTree_,m.path,j,m.currentWriteId,m.applyLocally)),o=o.concat(Er(r.serverSyncTree_,D,!0))}else w=!0,_="nodata",o=o.concat(Er(r.serverSyncTree_,m.currentWriteId,!0))}Xt(r.eventQueue_,t,o),o=[],w&&(e[f].status=2,(function(y){setTimeout(y,Math.floor(0))})(e[f].unwatcher),e[f].onComplete&&(_==="nodata"?i.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):i.push(()=>e[f].onComplete(new Error(_),!1,null))))}ql(r,r.transactionQueueTree_);for(let f=0;f<i.length;f++)ri(i[f]);kh(r,r.transactionQueueTree_)}function W_(r,e){let t,i=r.transactionQueueTree_;for(t=we(e);t!==null&&ii(i)===void 0;)i=Sh(i,t),e=$e(e),t=we(e);return i}function V_(r,e){const t=[];return H_(r,e,t),t.sort((i,o)=>i.order-o.order),t}function H_(r,e,t){const i=ii(e);if(i)for(let o=0;o<i.length;o++)t.push(i[o]);Bl(e,o=>{H_(r,o,t)})}function ql(r,e){const t=ii(e);if(t){let i=0;for(let o=0;o<t.length;o++)t[o].status!==2&&(t[i]=t[o],i++);t.length=i,j_(e,t.length>0?t:void 0)}Bl(e,i=>{ql(r,i)})}function Ph(r,e){const t=bo(W_(r,e)),i=Sh(r.transactionQueueTree_,e);return eI(i,o=>{ad(r,o)}),ad(r,i),O_(i,o=>{ad(r,o)}),t}function ad(r,e){const t=ii(e);if(t){const i=[];let o=[],l=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(W(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):(W(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),o=o.concat(Er(r.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?j_(e,void 0):t.length=l+1,Xt(r.eventQueue_,bo(e),o);for(let u=0;u<i.length;u++)ri(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(r){let e="";const t=r.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let o=t[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function TI(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const t of r.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):kt(`Invalid query segment '${t}' in query '${r}'`)}return e}const jg=function(r,e){const t=kI(r),i=t.namespace;t.domain==="firebase.com"&&zn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&zn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||MS();const o=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Kv(t.host,t.secure,i,o,e,"",i!==t.subdomain),path:new Oe(t.pathString)}},kI=function(r){let e="",t="",i="",o="",l="",u=!0,f="https",m=443;if(typeof r=="string"){let g=r.indexOf("//");g>=0&&(f=r.substring(0,g-1),r=r.substring(g+2));let w=r.indexOf("/");w===-1&&(w=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),e=r.substring(0,Math.min(w,_)),w<_&&(o=II(r.substring(w,_)));const y=TI(r.substring(Math.min(r.length,_)));g=e.indexOf(":"),g>=0?(u=f==="https"||f==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const T=e.slice(0,g);if(T.toLowerCase()==="localhost")t="localhost";else if(T.split(".").length<=2)t=T;else{const R=e.indexOf(".");i=e.substring(0,R).toLowerCase(),t=e.substring(R+1),l=i}"ns"in y&&(l=y.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:u,scheme:f,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",PI=(function(){let r=0;const e=[];return function(t){const i=t===r;r=t;let o;const l=new Array(8);for(o=7;o>=0;o--)l[o]=Dg.charAt(t%64),t=Math.floor(t/64);W(t===0,"Cannot push at time == 0");let u=l.join("");if(i){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)u+=Dg.charAt(e[o]);return W(u.length===20,"nextPushId: Length should be 20."),u}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,t,i,o){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ut(this.snapshot.exportVal())}}class RI{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return W(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t,i,o){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=o}get key(){return Ce(this._path)?null:nh(this._path)}get ref(){return new Vn(this._repo,this._path)}get _queryIdentifier(){const e=yg(this._queryParams),t=Xd(e);return t==="{}"?"default":t}get _queryObject(){return yg(this._queryParams)}isEqual(e){if(e=Ct(e),!(e instanceof bh))return!1;const t=this._repo===e._repo,i=rh(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return t&&i&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+wC(this._path)}}class Vn extends bh{constructor(e,t){super(e,t,new ah,!1)}get parent(){const e=r_(this._path);return e===null?null:new Vn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class wo{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Oe(e),i=xo(this.ref,e);return new wo(this._node.getChild(t),i,nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,o)=>e(new wo(o,xo(this.ref,i),nt)))}hasChild(e){const t=new Oe(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ve(r,e){return r=Ct(r),r._checkNotDeleted("ref"),e!==void 0?xo(r._root,e):r._root}function xo(r,e){return r=Ct(r),we(r._path)===null?lI("child","path",e):F_("child","path",e),new Vn(r._repo,tt(r._path,e))}function Gl(r,e){r=Ct(r),Nh("push",r._path),M_("push",e,r._path,!0);const t=z_(r._repo),i=PI(t),o=xo(r,i),l=xo(r,i);let u;return u=Promise.resolve(l),o.then=u.then.bind(u),o.catch=u.then.bind(u,void 0),o}function Cl(r){return Nh("remove",r._path),AI(r,null)}function AI(r,e){r=Ct(r),Nh("set",r._path),M_("set",e,r._path,!1);const t=new Co;return _I(r._repo,r._path,e,null,t.wrapCallback(()=>{})),t.promise}function qe(r,e){aI("update",e,r._path);const t=new Co;return yI(r._repo,r._path,e,t.wrapCallback(()=>{})),t.promise}function fn(r){r=Ct(r);const e=new q_(()=>{}),t=new Kl(e);return vI(r._repo,r,t).then(i=>new wo(i,new Vn(r._repo,r._path),r._queryParams.getIndex()))}class Kl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new bI("value",this,new wo(e.snapshotNode,new Vn(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new RI(this,e,t):null}matches(e){return e instanceof Kl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function jI(r,e,t,i,o){const l=new q_(t,void 0),u=new Kl(l);return xI(r._repo,r,u),()=>EI(r._repo,r,u)}function En(r,e,t,i){return jI(r,"value",e)}AN(Vn);MN(Vn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="FIREBASE_DATABASE_EMULATOR_HOST",Od={};let OI=!1;function LI(r,e,t,i){const o=e.lastIndexOf(":"),l=e.substring(0,o),u=ei(l);r.repoInfo_=new Kv(e,u,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(r.authTokenProvider_=i)}function MI(r,e,t,i,o){let l=i||r.options.databaseURL;l===void 0&&(r.options.projectId||zn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",r.options.projectId),l=`${r.options.projectId}-default-rtdb.firebaseio.com`);let u=jg(l,o),f=u.repoInfo,m;typeof process<"u"&&tg&&(m=tg[DI]),m?(l=`http://${m}?ns=${f.namespace}`,u=jg(l,o),f=u.repoInfo):u.repoInfo.secure;const g=new KS(r.name,r.options,e);cI("Invalid Firebase Database URL",u),Ce(u.path)||zn("Database URL must point to the root of a Firebase Database (not including a child path).");const w=UI(f,r,g,new GS(r,t));return new $I(w,r)}function FI(r,e){const t=Od[e];(!t||t[r.key]!==r)&&zn(`Database ${e}(${r.repoInfo_}) has already been deleted.`),SI(r),delete t[r.key]}function UI(r,e,t,i){let o=Od[e.name];o||(o={},Od[e.name]=o);let l=o[r.toURLString()];return l&&zn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new pI(r,OI,t,i),o[r.toURLString()]=l,l}class $I{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(mI(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vn(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(FI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&zn("Cannot call "+e+" on a deleted database.")}}function zI(r=Rv(),e){const t=Yd(r,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=rE("database");i&&BI(t,...i)}return t}function BI(r,e,t,i={}){r=Ct(r),r._checkNotDeleted("useEmulator");const o=`${e}:${t}`,l=r._repoInternal;if(r._instanceStarted){if(o===r._repoInternal.repoInfo_.host&&ts(i,l.repoInfo_.emulatorOptions))return;zn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&zn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Za(Za.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:sE(i.mockUserToken,r.app.options.projectId);u=new Za(f)}ei(e)&&(Cv(e),Nv("Database",!0)),LI(l,o,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(r){RS(ni),Vs(new ns("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return MI(i,o,l,t)},"PUBLIC").setMultipleInstances(!0)),Ir(ng,rg,r),Ir(ng,rg,"esm2017")}Fn.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Fn.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};WI();var VI="firebase",HI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(VI,HI,"app");function Rh(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function G_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qI=G_,K_=new No("auth","Firebase",G_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new Kd("@firebase/auth");function GI(r,...e){Nl.logLevel<=De.WARN&&Nl.warn(`Auth (${ni}): ${r}`,...e)}function el(r,...e){Nl.logLevel<=De.ERROR&&Nl.error(`Auth (${ni}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(r,...e){throw jh(r,...e)}function hn(r,...e){return jh(r,...e)}function Ah(r,e,t){const i=Object.assign(Object.assign({},qI()),{[e]:t});return new No("auth","Firebase",i).create(e,{appName:r.name})}function Un(r){return Ah(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q_(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Zt(r,"argument-error"),Ah(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jh(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return K_.create(r,...e)}function le(r,e,...t){if(!r)throw jh(e,...t)}function Ln(r){const e="INTERNAL ASSERTION FAILED: "+r;throw el(e),new Error(e)}function Bn(r,e){r||Ln(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function KI(){return Og()==="http:"||Og()==="https:"}function Og(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KI()||lE()||"connection"in navigator)?navigator.onLine:!0}function YI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bn(t>e,"Short delay should be less than long delay!"),this.isMobile=Gd()||Iv()}get(){return QI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(r,e){Bn(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZI=new Ao(3e4,6e4);function Dr(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Hn(r,e,t,i,o={}){return J_(r,o,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=ti(Object.assign({key:r.config.apiKey},u)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:m},l);return aE()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&ei(r.emulatorConfig.host)&&(g.credentials="include"),Y_.fetch()(await X_(r,r.config.apiHost,t,f),g)})}async function J_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},JI),e);try{const o=new t1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Ya(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ya(r,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Ya(r,"email-already-in-use",u);if(m==="USER_DISABLED")throw Ya(r,"user-disabled",u);const w=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Ah(r,w,g);Zt(r,w)}}catch(o){if(o instanceof jr)throw o;Zt(r,"network-request-failed",{message:String(o)})}}async function Ql(r,e,t,i,o={}){const l=await Hn(r,e,t,i,o);return"mfaPendingCredential"in l&&Zt(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function X_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,u=l.config.emulator?Dh(r.config,o):`${r.config.apiScheme}://${o}`;return XI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function e1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class t1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(hn(this.auth,"network-request-failed")),ZI.get())})}}function Ya(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=hn(r,e,i);return o.customData._tokenResponse=t,o}function Lg(r){return r!==void 0&&r.enterprise!==void 0}class n1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return e1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function r1(r,e){return Hn(r,"GET","/v2/recaptchaConfig",Dr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(r,e){return Hn(r,"POST","/v1/accounts:delete",e)}async function Tl(r,e){return Hn(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function i1(r,e=!1){const t=Ct(r),i=await t.getIdToken(e),o=Oh(i);le(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ao(ld(o.auth_time)),issuedAtTime:ao(ld(o.iat)),expirationTime:ao(ld(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function ld(r){return Number(r)*1e3}function Oh(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return el("JWT malformed, contained fewer than 3 sections"),null;try{const o=ll(t);return o?JSON.parse(o):(el("Failed to decode base64 JWT payload"),null)}catch(o){return el("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Mg(r){const e=Oh(r);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof jr&&o1(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function o1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ao(this.lastLoginAt),this.creationTime=ao(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(r){var e;const t=r.auth,i=await r.getIdToken(),o=await Eo(r,Tl(t,{idToken:i}));le(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Z_(l.providerUserInfo):[],f=c1(r.providerData,u),m=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),w=m?g:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Ld(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,_)}async function l1(r){const e=Ct(r);await kl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c1(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Z_(r){return r.map(e=>{var{providerId:t}=e,i=Rh(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(r,e){const t=await J_(r,{},async()=>{const i=ti({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,u=await X_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return r.emulatorConfig&&ei(r.emulatorConfig.host)&&(m.credentials="include"),Y_.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function d1(r,e){return Hn(r,"POST","/v2/accounts:revokeToken",Dr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){le(e.length!==0,"internal-error");const t=Mg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await u1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,u=new Us;return i&&(le(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(le(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(le(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Us,this.toJSON())}_performRefresh(){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(r,e){le(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class un{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Rh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new a1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ld(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Eo(this,this.stsTokenManager.getToken(this.auth,e));return le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return i1(this,e)}reload(){return l1(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new un(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await kl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wt(this.auth.app))return Promise.reject(Un(this.auth));const e=await this.getIdToken();return await Eo(this,s1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,u,f,m,g,w;const _=(i=t.displayName)!==null&&i!==void 0?i:void 0,y=(o=t.email)!==null&&o!==void 0?o:void 0,T=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,R=(u=t.photoURL)!==null&&u!==void 0?u:void 0,O=(f=t.tenantId)!==null&&f!==void 0?f:void 0,D=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,ee=(g=t.createdAt)!==null&&g!==void 0?g:void 0,j=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:K,emailVerified:H,isAnonymous:ce,providerData:ae,stsTokenManager:J}=t;le(K&&J,e,"internal-error");const ue=Us.fromJSON(this.name,J);le(typeof K=="string",e,"internal-error"),vr(_,e.name),vr(y,e.name),le(typeof H=="boolean",e,"internal-error"),le(typeof ce=="boolean",e,"internal-error"),vr(T,e.name),vr(R,e.name),vr(O,e.name),vr(D,e.name),vr(ee,e.name),vr(j,e.name);const ge=new un({uid:K,auth:e,email:y,emailVerified:H,displayName:_,isAnonymous:ce,photoURL:R,phoneNumber:T,tenantId:O,stsTokenManager:ue,createdAt:ee,lastLoginAt:j});return ae&&Array.isArray(ae)&&(ge.providerData=ae.map(Ee=>Object.assign({},Ee))),D&&(ge._redirectEventId=D),ge}static async _fromIdTokenResponse(e,t,i=!1){const o=new Us;o.updateFromServerResponse(t);const l=new un({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await kl(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];le(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Z_(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Us;f.updateFromIdToken(i);const m=new un({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Ld(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=new Map;function Mn(r){Bn(r instanceof Function,"Expected a class definition");let e=Fg.get(r);return e?(Bn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Fg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ey.type="NONE";const Ug=ey;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r,e,t){return`firebase:${r}:${e}:${t}`}class $s{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=tl(this.userKey,o.apiKey,l),this.fullPersistenceKey=tl("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tl(this.auth,{idToken:e}).catch(()=>{});return t?un._fromGetAccountInfoResponse(this.auth,t,e):null}return un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new $s(Mn(Ug),e,i);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||Mn(Ug);const u=tl(i,e.config.apiKey,e.name);let f=null;for(const g of t)try{const w=await g._get(u);if(w){let _;if(typeof w=="string"){const y=await Tl(e,{idToken:w}).catch(()=>{});if(!y)break;_=await un._fromGetAccountInfoResponse(e,y,w)}else _=un._fromJSON(e,w);g!==l&&(f=_),l=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new $s(l,e,i):(l=m[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new $s(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ty(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oy(e))return"Blackberry";if(ay(e))return"Webos";if(ny(e))return"Safari";if((e.includes("chrome/")||ry(e))&&!e.includes("edge/"))return"Chrome";if(iy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ty(r=Pt()){return/firefox\//i.test(r)}function ny(r=Pt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ry(r=Pt()){return/crios\//i.test(r)}function sy(r=Pt()){return/iemobile/i.test(r)}function iy(r=Pt()){return/android/i.test(r)}function oy(r=Pt()){return/blackberry/i.test(r)}function ay(r=Pt()){return/webos/i.test(r)}function Lh(r=Pt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function h1(r=Pt()){var e;return Lh(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function f1(){return cE()&&document.documentMode===10}function ly(r=Pt()){return Lh(r)||iy(r)||ay(r)||oy(r)||/windows phone/i.test(r)||sy(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(r,e=[]){let t;switch(r){case"Browser":t=$g(Pt());break;case"Worker":t=`${$g(Pt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ni}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const m=e(l);u(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(r,e={}){return Hn(r,"GET","/v2/passwordPolicy",Dr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=6;class v1{constructor(e){var t,i,o,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:g1,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,u,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zg(this),this.idTokenSubscription=new zg(this),this.beforeStateQueue=new p1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mn(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await $s.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tl(this,{idToken:e}),i=await un._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Wt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wt(this.app))return Promise.reject(Un(this));const t=e?Ct(e):null;return t&&le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wt(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wt(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await m1(this),t=new v1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new No("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await d1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mn(e)||this._popupRedirectResolver;le(t,this,"argument-error"),this.redirectPersistenceManager=await $s.create(this,[Mn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&GI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function qn(r){return Ct(r)}class zg{constructor(e){this.auth=e,this.observer=null,this.addObserver=yE(t=>this.observer=t)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y1(r){Yl=r}function uy(r){return Yl.loadJS(r)}function w1(){return Yl.recaptchaEnterpriseScript}function x1(){return Yl.gapiScript}function E1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class S1{constructor(){this.enterprise=new C1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class C1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const N1="recaptcha-enterprise",dy="NO_RECAPTCHA";class I1{constructor(e){this.type=N1,this.auth=qn(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{r1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new n1(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(m=>{f(m)})})}function o(l,u,f){const m=window.grecaptcha;Lg(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(dy)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new S1().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(f=>{if(!t&&Lg(window.grecaptcha))o(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=w1();m.length!==0&&(m+=f),uy(m).then(()=>{o(f,l,u)}).catch(g=>{u(g)})}}).catch(f=>{u(f)})})}}async function Bg(r,e,t,i=!1,o=!1){const l=new I1(r);let u;if(o)u=dy;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Md(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Bg(r,e,t,t==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Bg(r,e,t,t==="getOobCode");return i(r,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(r,e){const t=Yd(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ts(l,e??{}))return o;Zt(o,"already-initialized")}return t.initialize({options:e})}function k1(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Mn);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function P1(r,e,t){const i=qn(r);le(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=hy(e),{host:u,port:f}=b1(e),m=f===null?"":`:${f}`,g={url:`${l}//${u}${m}/`},w=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){le(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),le(ts(g,i.config.emulator)&&ts(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,ei(u)?(Cv(`${l}//${u}${m}`),Nv("Auth",!0)):R1()}function hy(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function b1(r){const e=hy(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Wg(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:Wg(u)}}}function Wg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function R1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,t){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}async function A1(r,e){return Hn(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(r,e){return Ql(r,"POST","/v1/accounts:signInWithPassword",Dr(r,e))}async function D1(r,e){return Hn(r,"POST","/v1/accounts:sendOobCode",Dr(r,e))}async function O1(r,e){return D1(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(r,e){return Ql(r,"POST","/v1/accounts:signInWithEmailLink",Dr(r,e))}async function M1(r,e){return Ql(r,"POST","/v1/accounts:signInWithEmailLink",Dr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Mh{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new So(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new So(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Md(e,t,"signInWithPassword",j1);case"emailLink":return L1(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Md(e,i,"signUpPassword",A1);case"emailLink":return M1(e,{idToken:t,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(r,e){return Ql(r,"POST","/v1/accounts:signInWithIdp",Dr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="http://localhost";class os extends Mh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Rh(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new os(i,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return zs(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,zs(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zs(e,t)}buildRequest(){const e={requestUri:F1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ti(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $1(r){const e=Zi(eo(r)).link,t=e?Zi(eo(e)).deep_link_id:null,i=Zi(eo(r)).deep_link_id;return(i?Zi(eo(i)).link:null)||i||t||e||r}class Jl{constructor(e){var t,i,o,l,u,f;const m=Zi(eo(e)),g=(t=m.apiKey)!==null&&t!==void 0?t:null,w=(i=m.oobCode)!==null&&i!==void 0?i:null,_=U1((o=m.mode)!==null&&o!==void 0?o:null);le(g&&w&&_,"argument-error"),this.apiKey=g,this.operation=_,this.code=w,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=m.lang)!==null&&u!==void 0?u:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=$1(e);try{return new Jl(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.providerId=oi.PROVIDER_ID}static credential(e,t){return So._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Jl.parseLink(t);return le(i,"argument-error"),So._fromEmailAndCode(e,i.code,i.tenantId)}}oi.PROVIDER_ID="password";oi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Xl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends jo{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.FACEBOOK_SIGN_IN_METHOD="facebook.com";_r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends jo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return os._fromParams({providerId:Dn.PROVIDER_ID,signInMethod:Dn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Dn.credentialFromTaggedObject(e)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Dn.credential(t,i)}catch{return null}}}Dn.GOOGLE_SIGN_IN_METHOD="google.com";Dn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends jo{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends jo{constructor(){super("twitter.com")}static credential(e,t){return os._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return wr.credential(t,i)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await un._fromIdTokenResponse(e,i,o),u=Vg(i);return new Ys({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Vg(i);return new Ys({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Vg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends jr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Pl.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Pl(e,t,i,o)}}function fy(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Pl._fromErrorAndOperation(r,l,e,i):l})}async function z1(r,e,t=!1){const i=await Eo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ys._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(r,e,t=!1){const{auth:i}=r;if(Wt(i.app))return Promise.reject(Un(i));const o="reauthenticate";try{const l=await Eo(r,fy(i,o,e,r),t);le(l.idToken,i,"internal-error");const u=Oh(l.idToken);le(u,i,"internal-error");const{sub:f}=u;return le(r.uid===f,i,"user-mismatch"),Ys._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Zt(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function py(r,e,t=!1){if(Wt(r.app))return Promise.reject(Un(r));const i="signIn",o=await fy(r,i,e),l=await Ys._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function W1(r,e){return py(qn(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(r,e,t){var i;le(((i=t.url)===null||i===void 0?void 0:i.length)>0,r,"invalid-continue-uri"),le(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),le(typeof t.linkDomain>"u"||t.linkDomain.length>0,r,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(le(t.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(le(t.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(r,e,t){const i=qn(r),o={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(u,f){le(f.handleCodeInApp,i,"argument-error"),f&&V1(i,u,f)}l(o,t),await Md(i,o,"getOobCode",O1)}function q1(r,e){const t=Jl.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function G1(r,e,t){if(Wt(r.app))return Promise.reject(Un(r));const i=Ct(r),o=oi.credentialWithLink(e,t||Il());return le(o._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),W1(i,o)}function K1(r,e,t,i){return Ct(r).onIdTokenChanged(e,t,i)}function Q1(r,e,t){return Ct(r).beforeAuthStateChanged(e,t)}function Y1(r,e,t,i){return Ct(r).onAuthStateChanged(e,t,i)}function J1(r){return Ct(r).signOut()}const bl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bl,"1"),this.storage.removeItem(bl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=1e3,Z1=10;class gy extends my{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ly(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);f1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Z1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},X1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gy.type="LOCAL";const eT=gy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy extends my{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vy.type="SESSION";const _y=vy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Zl(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(u).map(async g=>g(t.origin,l)),m=await tT(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((f,m)=>{const g=Fh("",20);o.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(_){const y=_;if(y.data.eventId===g)switch(y.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(y.data.response);break;default:clearTimeout(w),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function rT(r){xn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function sT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iT(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function oT(){return yy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="firebaseLocalStorageDb",aT=1,Rl="firebaseLocalStorage",xy="fbase_key";class Do{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ec(r,e){return r.transaction([Rl],e?"readwrite":"readonly").objectStore(Rl)}function lT(){const r=indexedDB.deleteDatabase(wy);return new Do(r).toPromise()}function Fd(){const r=indexedDB.open(wy,aT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Rl,{keyPath:xy})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Rl)?e(i):(i.close(),await lT(),e(await Fd()))})})}async function Hg(r,e,t){const i=ec(r,!0).put({[xy]:e,value:t});return new Do(i).toPromise()}async function cT(r,e){const t=ec(r,!1).get(e),i=await new Do(t).toPromise();return i===void 0?null:i.value}function qg(r,e){const t=ec(r,!0).delete(e);return new Do(t).toPromise()}const uT=800,dT=3;class Ey{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>dT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zl._getInstance(oT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await sT(),!this.activeServiceWorker)return;this.sender=new nT(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fd();return await Hg(e,bl,"1"),await qg(e,bl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Hg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>cT(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=ec(o,!1).getAll();return new Do(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ey.type="LOCAL";const hT=Ey;new Ao(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(r,e){return e?Mn(e):(le(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends Mh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fT(r){return py(r.auth,new $h(r),r.bypassAuthState)}function pT(r){const{auth:e,user:t}=r;return le(t,e,"internal-error"),B1(t,new $h(r),r.bypassAuthState)}async function mT(r){const{auth:e,user:t}=r;return le(t,e,"internal-error"),z1(t,new $h(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fT;case"linkViaPopup":case"linkViaRedirect":return mT;case"reauthViaPopup":case"reauthViaRedirect":return pT;default:Zt(this.auth,"internal-error")}}resolve(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new Ao(2e3,1e4);async function vT(r,e,t){if(Wt(r.app))return Promise.reject(hn(r,"operation-not-supported-in-this-environment"));const i=qn(r);Q_(r,e,Xl);const o=Uh(i,t);return new es(i,"signInViaPopup",e,o).executeNotNull()}class es extends Sy{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,es.currentPopupAction&&es.currentPopupAction.cancel(),es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Bn(this.filter.length===1,"Popup operations only handle one event");const e=Fh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gT.get())};e()}}es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="pendingRedirect",nl=new Map;class yT extends Sy{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=nl.get(this.auth._key());if(!e){try{const i=await wT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}nl.set(this.auth._key(),e)}return this.bypassAuthState||nl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wT(r,e){const t=Ny(e),i=Cy(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}async function xT(r,e){return Cy(r)._set(Ny(e),"true")}function ET(r,e){nl.set(r._key(),e)}function Cy(r){return Mn(r._redirectPersistence)}function Ny(r){return tl(_T,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(r,e,t){return CT(r,e,t)}async function CT(r,e,t){if(Wt(r.app))return Promise.reject(Un(r));const i=qn(r);Q_(r,e,Xl),await i._initializationPromise;const o=Uh(i,t);return await xT(o,i),o._openRedirect(i,e,"signInViaRedirect")}async function NT(r,e){return await qn(r)._initializationPromise,Iy(r,e,!1)}async function Iy(r,e,t=!1){if(Wt(r.app))return Promise.reject(Un(r));const i=qn(r),o=Uh(i,e),u=await new yT(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=600*1e3;class TT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Ty(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(hn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gg(e))}saveEventToCache(e){this.cachedEventUids.add(Gg(e)),this.lastProcessedEventTime=Date.now()}}function Gg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Ty({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kT(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ty(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PT(r,e={}){return Hn(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RT=/^https?/;async function AT(r){if(r.config.emulator)return;const{authorizedDomains:e}=await PT(r);for(const t of e)try{if(jT(t))return}catch{}Zt(r,"unauthorized-domain")}function jT(r){const e=Il(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!RT.test(t))return!1;if(bT.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Ao(3e4,6e4);function Kg(){const r=xn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function OT(r){return new Promise((e,t)=>{var i,o,l;function u(){Kg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kg(),t(hn(r,"network-request-failed"))},timeout:DT.get()})}if(!((o=(i=xn().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=xn().gapi)===null||l===void 0)&&l.load)u();else{const f=E1("iframefcb");return xn()[f]=()=>{gapi.load?u():t(hn(r,"network-request-failed"))},uy(`${x1()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw rl=null,e})}let rl=null;function LT(r){return rl=rl||OT(r),rl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Ao(5e3,15e3),FT="__/auth/iframe",UT="emulator/auth/iframe",$T={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BT(r){const e=r.config;le(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Dh(e,UT):`https://${r.config.authDomain}/${FT}`,i={apiKey:e.apiKey,appName:r.name,v:ni},o=zT.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ti(i).slice(1)}`}async function WT(r){const e=await LT(r),t=xn().gapi;return le(t,r,"internal-error"),e.open({where:document.body,url:BT(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$T,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const u=hn(r,"network-request-failed"),f=xn().setTimeout(()=>{l(u)},MT.get());function m(){xn().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HT=500,qT=600,GT="_blank",KT="http://localhost";class Qg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QT(r,e,t,i=HT,o=qT){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},VT),{width:i.toString(),height:o.toString(),top:l,left:u}),g=Pt().toLowerCase();t&&(f=ry(g)?GT:t),ty(g)&&(e=e||KT,m.scrollbars="yes");const w=Object.entries(m).reduce((y,[T,R])=>`${y}${T}=${R},`,"");if(h1(g)&&f!=="_self")return YT(e||"",f),new Qg(null);const _=window.open(e||"",f,w);le(_,r,"popup-blocked");try{_.focus()}catch{}return new Qg(_)}function YT(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="__/auth/handler",XT="emulator/auth/handler",ZT=encodeURIComponent("fac");async function Yg(r,e,t,i,o,l){le(r.config.authDomain,r,"auth-domain-config-required"),le(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ni,eventId:o};if(e instanceof Xl){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",vd(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,_]of Object.entries({}))u[w]=_}if(e instanceof jo){const w=e.getScopes().filter(_=>_!=="");w.length>0&&(u.scopes=w.join(","))}r.tenantId&&(u.tid=r.tenantId);const f=u;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const m=await r._getAppCheckToken(),g=m?`#${ZT}=${encodeURIComponent(m)}`:"";return`${ek(r)}?${ti(f).slice(1)}${g}`}function ek({config:r}){return r.emulator?Dh(r,XT):`https://${r.authDomain}/${JT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="webStorageSupport";class tk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_y,this._completeRedirectFn=Iy,this._overrideRedirectResult=ET}async _openPopup(e,t,i,o){var l;Bn((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Yg(e,t,i,Il(),o);return QT(e,u,Fh())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Yg(e,t,i,Il(),o);return rT(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Bn(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await WT(e),i=new TT(e);return t.register("authEvent",o=>(le(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cd,{type:cd},o=>{var l;const u=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[cd];u!==void 0&&t(!!u),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ly()||ny()||Lh()}}const nk=tk;var Jg="@firebase/auth",Xg="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ik(r){Vs(new ns("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;le(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cy(r)},g=new _1(i,o,l,m);return k1(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Vs(new ns("auth-internal",e=>{const t=qn(e.getProvider("auth").getImmediate());return(i=>new rk(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(Jg,Xg,sk(r)),Ir(Jg,Xg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=300,ak=Sv("authIdTokenMaxAge")||ok;let Zg=null;const lk=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ak)return;const o=t==null?void 0:t.token;Zg!==o&&(Zg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ck(r=Rv()){const e=Yd(r,"auth");if(e.isInitialized())return e.getImmediate();const t=T1(r,{popupRedirectResolver:nk,persistence:[hT,eT,_y]}),i=Sv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=lk(l.toString());Q1(t,u,()=>u(t.currentUser)),K1(t,f=>u(f))}}const o=xv("auth");return o&&P1(t,`http://${o}`),t}function uk(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}y1({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=hn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",uk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ik("Browser");const dk={apiKey:"AIzaSyBLRfIvin2GeZzM2k91UvVVBxKzYDFC4XE",authDomain:"vitrineartisan.firebaseapp.com",databaseURL:"https://vitrineartisan-default-rtdb.firebaseio.com",projectId:"vitrineartisan",storageBucket:"vitrineartisan.firebasestorage.app",messagingSenderId:"375022059708",appId:"1:375022059708:web:f059d080070233a5b590b9"},ky=bv(dk),_e=zI(ky),wn=ck(ky),Ud=new Dn;async function hk(r){const e=ve(_e,`tenants/${r}/profile`),t=await fn(e);return t.exists()?t.val():null}function fk(r,e){const t=ve(_e,`tenants/${r}/profile`);return En(t,i=>{e(i.exists()?i.val():null)})}const pk={"dark-copper":{name:"Cuivr sombre",preview:"#e8a87c",vars:{"--bg-primary":"#1a1a2e","--bg-secondary":"#16213e","--bg-card":"#1e2a45","--bg-card-hover":"#253354","--bg-input":"#0f1626","--text-primary":"#e8e8e8","--text-secondary":"#a0a8c0","--text-muted":"#6b7394","--accent":"#e8a87c","--accent-light":"#f5cba7","--accent-dark":"#c47d4e"}},"dark-emerald":{name:"meraude",preview:"#50C878",vars:{"--bg-primary":"#0f1a14","--bg-secondary":"#132418","--bg-card":"#1a3025","--bg-card-hover":"#22402f","--bg-input":"#0a120e","--text-primary":"#e8e8e8","--text-secondary":"#9cb8a8","--text-muted":"#607a6c","--accent":"#50C878","--accent-light":"#82dfa0","--accent-dark":"#38a85e"}},"dark-lavender":{name:"Lavande",preview:"#B39DDB",vars:{"--bg-primary":"#1a1528","--bg-secondary":"#221c38","--bg-card":"#2a2345","--bg-card-hover":"#352d54","--bg-input":"#120e1e","--text-primary":"#e8e8e8","--text-secondary":"#b0a8c8","--text-muted":"#7a6f98","--accent":"#B39DDB","--accent-light":"#d1c4e9","--accent-dark":"#8e79c0"}},"dark-rose":{name:"Ros",preview:"#F48FB1",vars:{"--bg-primary":"#1a1218","--bg-secondary":"#251a22","--bg-card":"#30222c","--bg-card-hover":"#3e2b38","--bg-input":"#140e12","--text-primary":"#e8e8e8","--text-secondary":"#c0a0b0","--text-muted":"#8a6878","--accent":"#F48FB1","--accent-light":"#f8bdd0","--accent-dark":"#e06090"}},"dark-ocean":{name:"Ocan",preview:"#4FC3F7",vars:{"--bg-primary":"#0d1b2a","--bg-secondary":"#1b2838","--bg-card":"#1e3548","--bg-card-hover":"#254458","--bg-input":"#081420","--text-primary":"#e8e8e8","--text-secondary":"#90b8d0","--text-muted":"#5a8098","--accent":"#4FC3F7","--accent-light":"#81d4fa","--accent-dark":"#0394d0"}},"light-natural":{name:"Naturel clair",preview:"#8B6F47",vars:{"--bg-primary":"#faf7f2","--bg-secondary":"#f0ebe2","--bg-card":"#ffffff","--bg-card-hover":"#f5f0e8","--bg-input":"#ffffff","--text-primary":"#2d2418","--text-secondary":"#5c4e3c","--text-muted":"#9a8b78","--accent":"#8B6F47","--accent-light":"#b89868","--accent-dark":"#6a5335"}},"light-sage":{name:"Sauge clair",preview:"#6B8E6B",vars:{"--bg-primary":"#f5f8f5","--bg-secondary":"#e8efe8","--bg-card":"#ffffff","--bg-card-hover":"#f0f5f0","--bg-input":"#ffffff","--text-primary":"#1e2e1e","--text-secondary":"#3c5a3c","--text-muted":"#7a9a7a","--accent":"#6B8E6B","--accent-light":"#8eb88e","--accent-dark":"#4a6e4a"}},"light-minimal":{name:"Minimal blanc",preview:"#333333",vars:{"--bg-primary":"#ffffff","--bg-secondary":"#f5f5f5","--bg-card":"#ffffff","--bg-card-hover":"#fafafa","--bg-input":"#f8f8f8","--text-primary":"#1a1a1a","--text-secondary":"#555555","--text-muted":"#999999","--accent":"#333333","--accent-light":"#666666","--accent-dark":"#111111"}}};function Ja(r){const e=pk[r];if(!e)return;const t=document.documentElement;Object.entries(e.vars).forEach(([i,o])=>{t.style.setProperty(i,o)})}const Py=I.createContext(null);Ud.setCustomParameters({prompt:"select_account"});const mk={url:window.location.origin+"/app",handleCodeInApp:!0};function gk({children:r}){const[e,t]=I.useState(null),[i,o]=I.useState(null),[l,u]=I.useState(!0),[f,m]=I.useState(!1);I.useEffect(()=>{if(NT(wn).catch(()=>{}),q1(wn,window.location.href)){let R=window.localStorage.getItem("emailForSignIn");R||(R=window.prompt("Entrez votre adresse courriel pour confirmer la connexion :")),R&&G1(wn,R,window.location.href).then(()=>{window.localStorage.removeItem("emailForSignIn"),window.history.replaceState(null,"",window.location.origin+window.location.pathname)}).catch(O=>{console.error("Erreur lien magique:",O)})}return Y1(wn,async R=>{if(t(R),R){const O=await hk(R.uid);O?(o(O),m(!1),O.theme&&Ja(O.theme)):(o(null),m(!0))}else o(null),m(!1);u(!1)})},[]),I.useEffect(()=>e?fk(e.uid,R=>{R&&(o(R),m(!1),R.theme&&Ja(R.theme))}):void 0,[e]);const g=async()=>{try{await vT(wn,Ud)}catch(T){if(T.code==="auth/popup-blocked"||T.code==="auth/popup-closed-by-user")await ST(wn,Ud);else throw T}},w=async T=>{await H1(wn,T,mk),window.localStorage.setItem("emailForSignIn",T)},_=async()=>{try{await J1(wn),Ja("dark-copper")}catch(T){console.error("Erreur de deconnexion:",T)}},y=T=>{o(T),m(!1),T.theme&&Ja(T.theme)};return l?d.jsxs("div",{className:"loading-screen",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Chargement..."})]}):d.jsx(Py.Provider,{value:{user:e,tenant:i,needsOnboarding:f,loginWithGoogle:g,sendMagicLink:w,logout:_,completeOnboarding:y},children:r})}function Oo(){const r=I.useContext(Py);if(!r)throw new Error("useAuth doit tre utilis dans un AuthProvider");return r}const by={"dark-copper":{name:"Cuivr sombre",emoji:"",preview:"#e8a87c",vars:{"--bg-primary":"#0f0f1a","--bg-secondary":"#1a1a2e","--bg-card":"#16213e","--bg-card-hover":"#1c2a4a","--bg-input":"#0a0a14","--text-primary":"#e8e8e8","--text-secondary":"#a0a8c0","--text-muted":"#6b7394","--accent":"#e8a87c","--accent-light":"#f0c8a8","--accent-dark":"#c08060"}},"dark-emerald":{name:"meraude",emoji:"",preview:"#66BB6A",vars:{"--bg-primary":"#0a1a14","--bg-secondary":"#122a1e","--bg-card":"#1a3828","--bg-card-hover":"#224832","--bg-input":"#060f0a","--text-primary":"#e8e8e8","--text-secondary":"#a0c8a8","--text-muted":"#5a8a68","--accent":"#66BB6A","--accent-light":"#a5d6a7","--accent-dark":"#388E3C"}},"dark-lavender":{name:"Lavande",emoji:"",preview:"#B39DDB",vars:{"--bg-primary":"#12101a","--bg-secondary":"#1e1a2e","--bg-card":"#28223e","--bg-card-hover":"#342c50","--bg-input":"#0c0a14","--text-primary":"#e8e8e8","--text-secondary":"#b0a8c8","--text-muted":"#7a6f98","--accent":"#B39DDB","--accent-light":"#d1c4e9","--accent-dark":"#8e79c0"}},"dark-rose":{name:"Ros",emoji:"",preview:"#F48FB1",vars:{"--bg-primary":"#1a1218","--bg-secondary":"#251a22","--bg-card":"#30222c","--bg-card-hover":"#3e2b38","--bg-input":"#140e12","--text-primary":"#e8e8e8","--text-secondary":"#c0a0b0","--text-muted":"#8a6878","--accent":"#F48FB1","--accent-light":"#f8bdd0","--accent-dark":"#e06090"}},"dark-ocean":{name:"Ocan",emoji:"",preview:"#4FC3F7",vars:{"--bg-primary":"#0d1b2a","--bg-secondary":"#1b2838","--bg-card":"#1e3548","--bg-card-hover":"#254458","--bg-input":"#081420","--text-primary":"#e8e8e8","--text-secondary":"#90b8d0","--text-muted":"#5a8098","--accent":"#4FC3F7","--accent-light":"#81d4fa","--accent-dark":"#0394d0"}},"light-natural":{name:"Naturel clair",emoji:"",preview:"#8B6F47",vars:{"--bg-primary":"#faf7f2","--bg-secondary":"#f0ebe2","--bg-card":"#ffffff","--bg-card-hover":"#f5f0e8","--bg-input":"#ffffff","--text-primary":"#2d2418","--text-secondary":"#5c4e3c","--text-muted":"#9a8b78","--accent":"#8B6F47","--accent-light":"#b89868","--accent-dark":"#6a5335"}},"light-sage":{name:"Sauge clair",emoji:"",preview:"#6B8E6B",vars:{"--bg-primary":"#f5f8f5","--bg-secondary":"#e8efe8","--bg-card":"#ffffff","--bg-card-hover":"#f0f5f0","--bg-input":"#ffffff","--text-primary":"#1e2e1e","--text-secondary":"#3c5a3c","--text-muted":"#7a9a7a","--accent":"#6B8E6B","--accent-light":"#8eb88e","--accent-dark":"#4a6e4a"}},"light-minimal":{name:"Minimal blanc",emoji:"",preview:"#333333",vars:{"--bg-primary":"#ffffff","--bg-secondary":"#f5f5f5","--bg-card":"#ffffff","--bg-card-hover":"#fafafa","--bg-input":"#f8f8f8","--text-primary":"#1a1a1a","--text-secondary":"#555555","--text-muted":"#999999","--accent":"#333333","--accent-light":"#666666","--accent-dark":"#111111"}}};function zh(r){const e=by[r];if(!e)return;const t=document.documentElement;Object.entries(e.vars).forEach(([i,o])=>{t.style.setProperty(i,o)})}const ud=600,dd=600,vk=.6,Xa=80,_k=.4;function Ry(r){return new Promise((e,t)=>{const i=new FileReader;i.onload=o=>{const l=new Image;l.onload=()=>{const u=document.createElement("canvas");let{width:f,height:m}=l;f>m?f>ud&&(m=Math.round(m*ud/f),f=ud):m>dd&&(f=Math.round(f*dd/m),m=dd),u.width=f,u.height=m,u.getContext("2d").drawImage(l,0,0,f,m);const w=u.toDataURL("image/jpeg",vk);e(w)},l.onerror=()=>t(new Error("Impossible de charger l'image")),l.src=o.target.result},i.onerror=()=>t(new Error("Impossible de lire le fichier")),i.readAsDataURL(r)})}function yk(r){return new Promise((e,t)=>{const i=new FileReader;i.onload=o=>{const l=new Image;l.onload=()=>{const u=document.createElement("canvas");u.width=Xa,u.height=Xa;const f=u.getContext("2d"),m=Math.min(l.width,l.height),g=(l.width-m)/2,w=(l.height-m)/2;f.drawImage(l,g,w,m,m,0,0,Xa,Xa);const _=u.toDataURL("image/jpeg",_k);e(_)},l.onerror=()=>t(new Error("Impossible de charger l'image")),l.src=o.target.result},i.onerror=()=>t(new Error("Impossible de lire le fichier")),i.readAsDataURL(r)})}function Bh(){var e;const r=(e=wn.currentUser)==null?void 0:e.uid;if(!r)throw new Error("Utilisateur non connect");return r}function pn(r){return`tenants/${Bh()}/items`}function ai(r){return`tenants/${Bh()}/photos`}function Lo(r){return`tenants/${Bh()}/stores`}const tc=4;async function wk(r){const e=ve(_e,`${ai()}/${r}`),t=await fn(e);return t.exists()&&t.val().photoBase64||null}async function hd(r){const e=ve(_e,`${ai()}/${r}`),t=await fn(e);if(!t.exists())return[];const i=t.val(),o=[];i.photoBase64&&o.push(i.photoBase64);for(let l=1;l<=tc;l++)i[`photo_${l}`]&&o.push(i[`photo_${l}`]);return o}async function xk(r,e){const t=ve(_e,`${ai()}/${r}`),i=await fn(t),o=i.exists()?i.val():{};let l=null;for(let g=1;g<=tc;g++)if(!o[`photo_${g}`]){l=g;break}if(l===null)return null;const u=await Ry(e);await qe(t,{[`photo_${l}`]:u});const f=Ay(o)+1,m=ve(_e,`${pn()}/${r}`);return await qe(m,{photoCount:f,updatedAt:Date.now()}),l}async function Ek(r,e){if(e<1||e>tc)return;const t=ve(_e,`${ai()}/${r}`);await qe(t,{[`photo_${e}`]:null});const i=await fn(t),o=i.exists()?i.val():{},l=Ay(o),u=ve(_e,`${pn()}/${r}`);await qe(u,{photoCount:l,updatedAt:Date.now()})}function Ay(r){let e=0;r.photoBase64&&e++;for(let t=1;t<=tc;t++)r[`photo_${t}`]&&e++;return e}function jy(r){const e=ve(_e,Lo());return En(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(l.name||"").localeCompare(u.name||"")),r(o)})}async function Dy(r){const e=ve(_e,`${Lo()}/${r}`),t=await fn(e);return t.exists()?{id:r,...t.val()}:null}async function Sk({name:r,commissionPercent:e,locationFee:t}){const i={name:r.trim(),commissionPercent:parseFloat(e)||0,locationFee:parseFloat(t)||0,active:!0,createdAt:Date.now()},o=ve(_e,Lo()),l=Gl(o);return await qe(l,i),{id:l.key,...i}}async function Ck(r,e){const t=ve(_e,`${Lo()}/${r}`);await qe(t,e)}async function Nk(r){const e=ve(_e,`${Lo()}/${r}`);await Cl(e)}async function Ik({uniqueId:r,description:e,longDescription:t,price:i,photoFile:o,category:l,itemDate:u}){const f={uniqueId:r.toUpperCase().trim(),description:e.trim(),longDescription:(t==null?void 0:t.trim())||"",price:parseFloat(i),hasPhoto:!1,photoCount:0,category:l||"",status:"inventory",itemDate:u||new Date().toISOString().split("T")[0],consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,sellerName:"",createdAt:Date.now(),updatedAt:Date.now()},m=ve(_e,pn()),g=Gl(m);if(await qe(g,f),o){const[w,_]=await Promise.all([Ry(o),yk(o)]),y=ve(_e,`${ai()}/${g.key}`);await qe(y,{photoBase64:w}),await qe(g,{hasPhoto:!0,thumbnail:_,photoCount:1}),f.hasPhoto=!0,f.thumbnail=_,f.photoCount=1}return{id:g.key,...f}}async function Tk(r,e){const t=ve(_e,`${pn()}/${r}`);await qe(t,{...e,updatedAt:Date.now()})}async function kk(r){const e=ve(_e,`${pn()}/${r}`),t=ve(_e,`${ai()}/${r}`);await Cl(t),await Cl(e)}async function Oy(r){const e=ve(_e,pn()),t=await fn(e);if(!t.exists())return null;const i=r.toUpperCase().trim();let o=null;return t.forEach(l=>{const u=l.val();u.uniqueId===i&&(o={id:l.key,...u})}),o&&o.hasPhoto&&(o.photoBase64=await wk(o.id)),o}async function ev(r="ART"){const e=ve(_e,pn()),t=await fn(e);let i=0;t.exists()&&t.forEach(l=>{const m=(l.val().uniqueId||"").match(new RegExp(`^${r}-(\\d+)$`,"i"));if(m){const g=parseInt(m[1],10);g>i&&(i=g)}});const o=i+1;return`${r}-${String(o).padStart(3,"0")}`}async function Pk(r,e,t=null,i=null,o="",l=!1,u="",f=null){const m=ve(_e,`${pn()}/${r}`),g=await fn(m),w=g.exists()?g.val():{},_=l?0:i!==null?parseFloat(i):w.price,y={status:"sold",sellerName:e.trim(),saleDate:t||new Date().toISOString().split("T")[0],salePrice:_,marketName:o.trim(),isGift:l,giftNote:l?u.trim():"",updatedAt:Date.now()};if(f&&!l?(y.taxEnabled=!0,y.tpsRate=f.tpsRate,y.tvqRate=f.tvqRate,y.tpsAmount=f.tpsAmount,y.tvqAmount=f.tvqAmount,y.totalWithTax=f.totalWithTax):(y.taxEnabled=!1,y.tpsRate=null,y.tvqRate=null,y.tpsAmount=null,y.tvqAmount=null,y.totalWithTax=null),w.status==="consignment"&&w.consignmentStoreId&&!l){const T=await Dy(w.consignmentStoreId);if(T&&T.commissionPercent>0){const R=Math.round(_*T.commissionPercent)/100;y.commissionPercent=T.commissionPercent,y.commissionAmount=R,y.netRevenue=Math.round((_-R)*100)/100}else y.commissionPercent=0,y.commissionAmount=0,y.netRevenue=_}return await qe(m,y),y}async function bk(r,e,t=null,i=""){const o=ve(_e,`${pn()}/${r}`);await qe(o,{status:"consignment",consignmentStore:e.trim(),consignmentStoreId:i,consignmentDate:t||new Date().toISOString().split("T")[0],updatedAt:Date.now()})}async function Rk(r){const e=ve(_e,`${pn()}/${r}`);await qe(e,{status:"inventory",consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,salePrice:null,marketName:"",sellerName:"",isGift:!1,giftNote:"",commissionPercent:null,commissionAmount:null,netRevenue:null,taxEnabled:null,tpsRate:null,tvqRate:null,tpsAmount:null,tvqAmount:null,totalWithTax:null,updatedAt:Date.now()})}function Ly(r){const e=ve(_e,pn());return En(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(u.createdAt||0)-(l.createdAt||0)),r(o)})}const tv={all:"Tous",inventory:"En stock",consignment:"En consigne",sold:"Vendus"},Ak={inventory:"#2ecc71",consignment:"#f39c12",sold:"#e74c3c"};function Qr(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function jk(){const[r,e]=I.useState([]),[t,i]=I.useState([]),[o,l]=I.useState("all"),[u,f]=I.useState(""),[m,g]=I.useState(null),[w,_]=I.useState(!0),[y,T]=I.useState({}),[R,O]=I.useState({}),[D,ee]=I.useState(null),[j,K]=I.useState({description:"",longDescription:"",price:"",category:""}),[H,ce]=I.useState(!1),[ae,J]=I.useState(null),[ue,ge]=I.useState(""),[Ee,Le]=I.useState(""),ze=I.useRef(null);I.useEffect(()=>Ly(z=>{e(z),_(!1)}),[]),I.useEffect(()=>jy(i),[]);const ke=async E=>{if(m===E.id){g(null);return}if(g(E.id),O(z=>({...z,[E.id]:0})),!y[E.id]&&(E.hasPhoto||E.photoBase64)){const z=await hd(E.id);z.length===0&&E.photoBase64?T(V=>({...V,[E.id]:[E.photoBase64]})):T(V=>({...V,[E.id]:z}))}},Ge=async(E,z)=>{var q;const V=(q=z.target.files)==null?void 0:q[0];if(V){ce(!0);try{if(await xk(E.id,V)===null)alert("Maximum de 5 photos atteint pour cet article.");else{const Pe=await hd(E.id);T(Vt=>({...Vt,[E.id]:Pe}))}}catch(re){console.error("Erreur ajout photo:",re),alert("Erreur lors de l'ajout de la photo.")}finally{ce(!1),ze.current&&(ze.current.value="")}}},it=async(E,z)=>{if(z===0){alert("La photo principale ne peut pas tre supprime ici.");return}if(confirm("Supprimer cette photo?"))try{await Ek(E.id,z);const V=await hd(E.id);T(q=>({...q,[E.id]:V})),O(q=>({...q,[E.id]:0}))}catch(V){console.error("Erreur suppression photo:",V)}},Me=r.filter(E=>{var q,re;const z=o==="all"||E.status===o,V=u===""||((q=E.uniqueId)==null?void 0:q.toLowerCase().includes(u.toLowerCase()))||((re=E.description)==null?void 0:re.toLowerCase().includes(u.toLowerCase()));return z&&V}),Ne={all:r.length,inventory:r.filter(E=>E.status==="inventory").length,consignment:r.filter(E=>E.status==="consignment").length,sold:r.filter(E=>E.status==="sold").length},G=E=>{var z;ee(E.id),K({description:E.description||"",longDescription:E.longDescription||"",price:((z=E.price)==null?void 0:z.toString())||"",category:E.category||""})},ne=async E=>{await Tk(E.id,{description:j.description.trim(),longDescription:j.longDescription.trim(),price:parseFloat(j.price)||0,category:j.category.trim()}),ee(null)},Q=()=>{ee(null)},N=async E=>{confirm(`Remettre "${E.uniqueId}" en inventaire?`)&&(await Rk(E.id),g(null))},M=async E=>{confirm(`Supprimer dfinitivement "${E.uniqueId}"?`)&&(await kk(E.id),g(null),T(z=>{const V={...z};return delete V[E.id],V}))},pe=E=>{J(E.id),ge(""),Le("")},b=async E=>{let z=Ee.trim(),V=ue;if(ue&&ue!=="other"){const q=t.find(re=>re.id===ue);q&&(z=q.name)}if(!z){alert("Entrez le nom du magasin");return}await bk(E.id,z,null,V==="other"?"":V),J(null),g(null)},Y=()=>{J(null)};return w?d.jsxs("div",{className:"page-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Chargement de l'inventaire..."})]}):d.jsxs("div",{className:"page inventory-page",children:[d.jsxs("div",{className:"search-bar",children:[d.jsx("input",{type:"text",placeholder:" Rechercher par # ou description...",value:u,onChange:E=>f(E.target.value),className:"search-input"}),u&&d.jsx("button",{className:"search-clear",onClick:()=>f(""),children:""})]}),d.jsx("div",{className:"status-filters",children:Object.entries(tv).map(([E,z])=>d.jsxs("button",{className:`filter-btn ${o===E?"active":""}`,onClick:()=>l(E),children:[z,d.jsx("span",{className:"filter-count",children:Ne[E]})]},E))}),Me.length===0?d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{className:"empty-icon",children:""}),d.jsx("p",{children:u?"Aucun rsultat trouv":"Aucun item dans cette catgorie"})]}):d.jsx("div",{className:"items-list",children:Me.map(E=>{var z,V,q;return d.jsxs("div",{className:`item-card ${m===E.id?"expanded":""}`,onClick:()=>ke(E),children:[d.jsxs("div",{className:"item-row",children:[d.jsxs("div",{className:"item-photo",children:[E.thumbnail?d.jsx("img",{src:E.thumbnail,alt:E.description,className:"item-thumbnail"}):E.hasPhoto||E.photoBase64?d.jsx("div",{className:"photo-placeholder",children:""}):d.jsx("div",{className:"photo-placeholder",children:""}),E.photoCount>1&&d.jsx("span",{className:"photo-count-badge",children:E.photoCount})]}),d.jsxs("div",{className:"item-info",children:[d.jsxs("div",{className:"item-id-row",children:[d.jsxs("span",{className:"item-unique-id",children:["#",E.uniqueId]}),d.jsx("span",{className:"item-status-badge",style:{backgroundColor:Ak[E.status]},children:tv[E.status]})]}),d.jsx("p",{className:"item-description",children:E.description}),d.jsxs("div",{className:"item-meta",children:[d.jsxs("span",{className:"item-price",children:[Qr(E.price)," $"]}),E.itemDate&&d.jsxs("span",{className:"item-date",children:[" ",E.itemDate]}),E.status==="consignment"&&d.jsxs("span",{className:"item-consignment",children:[" ",E.consignmentStore," ",E.consignmentDate&&`(${E.consignmentDate})`]}),E.status==="sold"&&d.jsxs("span",{className:"item-sold-info",children:[E.isGift?d.jsxs(d.Fragment,{children:[" Cadeau",E.giftNote?`  ${E.giftNote}`:"","  "]}):E.salePrice&&E.salePrice!==E.price?d.jsxs(d.Fragment,{children:[d.jsxs("s",{children:[Qr(E.price)," $"]}),"  ",Qr(E.salePrice)," $  "]}):"",E.saleDate,"  ",E.sellerName,E.marketName?`   ${E.marketName}`:"",E.commissionAmount>0&&d.jsxs(d.Fragment,{children:["   Net: ",Qr(E.netRevenue)," $"]})]})]})]})]}),m===E.id&&d.jsxs("div",{onClick:re=>re.stopPropagation(),children:[y[E.id]&&y[E.id].length>0&&d.jsxs("div",{className:"photo-gallery",children:[d.jsx("div",{className:"gallery-main",children:d.jsx("img",{src:y[E.id][R[E.id]||0],alt:E.description})}),y[E.id].length>1&&d.jsx("div",{className:"gallery-thumbs",children:y[E.id].map((re,Pe)=>d.jsxs("div",{className:`gallery-thumb ${(R[E.id]||0)===Pe?"active":""}`,onClick:()=>O(Vt=>({...Vt,[E.id]:Pe})),children:[d.jsx("img",{src:re,alt:`Photo ${Pe+1}`}),Pe>0&&D===E.id&&d.jsx("button",{className:"gallery-thumb-delete",onClick:Vt=>{Vt.stopPropagation(),it(E,Pe)},children:""})]},Pe))})]}),E.hasPhoto&&!y[E.id]&&d.jsx("div",{className:"item-expanded-photo loading",children:d.jsx("div",{className:"loading-spinner"})}),E.longDescription&&D!==E.id&&d.jsx("div",{className:"item-long-description",children:d.jsx("p",{children:E.longDescription})}),E.status==="sold"&&E.commissionAmount>0&&d.jsxs("div",{className:"item-commission-info",children:[d.jsxs("div",{className:"commission-row",children:[d.jsx("span",{children:"Prix de vente"}),d.jsxs("span",{children:[Qr(E.salePrice)," $"]})]}),d.jsxs("div",{className:"commission-row commission-negative",children:[d.jsxs("span",{children:["Commission ",E.consignmentStore," (",E.commissionPercent,"%)"]}),d.jsxs("span",{children:["-",Qr(E.commissionAmount)," $"]})]}),d.jsxs("div",{className:"commission-row commission-total",children:[d.jsx("span",{children:"Revenu net"}),d.jsxs("span",{children:[Qr(E.netRevenue)," $"]})]})]}),d.jsx("div",{className:"item-actions",children:ae===E.id?d.jsxs("div",{className:"item-edit-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Magasin de consigne"}),t.length>0?d.jsxs("select",{value:ue,onChange:re=>{if(ge(re.target.value),re.target.value!=="other"){const Pe=t.find(Vt=>Vt.id===re.target.value);Pe&&Le(Pe.name)}},className:"form-input",children:[d.jsx("option",{value:"",children:" Choisir un magasin "}),t.map(re=>d.jsxs("option",{value:re.id,children:[re.name,re.commissionPercent>0?` (${re.commissionPercent}%)`:"",re.locationFee>0?` + ${re.locationFee}$/mois`:""]},re.id)),d.jsx("option",{value:"other",children:" Autre magasin..."})]}):d.jsx("input",{type:"text",value:Ee,onChange:re=>Le(re.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),ue==="other"&&d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nom du magasin"}),d.jsx("input",{type:"text",value:Ee,onChange:re=>Le(re.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),d.jsxs("div",{className:"item-edit-actions",children:[d.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>b(E),disabled:!ue&&!Ee.trim(),children:" Confirmer consigne"}),d.jsx("button",{className:"btn btn-small btn-secondary",onClick:Y,children:"Annuler"})]})]}):D===E.id?d.jsxs("div",{className:"item-edit-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Titre"}),d.jsx("input",{type:"text",value:j.description,onChange:re=>K(Pe=>({...Pe,description:re.target.value})),className:"form-input"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Description dtaille"}),d.jsx("textarea",{value:j.longDescription,onChange:re=>K(Pe=>({...Pe,longDescription:re.target.value})),className:"form-input form-textarea",rows:"4",placeholder:"Dcrivez l'article en dtail..."})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Prix ($)"}),d.jsx("input",{type:"number",value:j.price,onChange:re=>K(Pe=>({...Pe,price:re.target.value})),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Catgorie"}),d.jsx("input",{type:"text",value:j.category,onChange:re=>K(Pe=>({...Pe,category:re.target.value})),className:"form-input"})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{className:"form-label",children:[" Photos (",((z=y[E.id])==null?void 0:z.length)||(E.hasPhoto?1:0),"/5)"]}),(((V=y[E.id])==null?void 0:V.length)||0)<5&&d.jsxs(d.Fragment,{children:[d.jsx("input",{ref:ze,type:"file",accept:"image/*",capture:"environment",onChange:re=>Ge(E,re),className:"hidden-input"}),d.jsx("button",{type:"button",className:"btn btn-small btn-add-photo",onClick:()=>{var re;return(re=ze.current)==null?void 0:re.click()},disabled:H,children:H?" Ajout en cours...":" Ajouter une photo"})]}),(((q=y[E.id])==null?void 0:q.length)||0)>=5&&d.jsx("p",{className:"form-hint",children:"Maximum de 5 photos atteint"})]}),d.jsxs("div",{className:"item-edit-actions",children:[d.jsx("button",{className:"btn btn-small btn-save",onClick:()=>ne(E),children:" Sauvegarder"}),d.jsx("button",{className:"btn btn-small btn-secondary",onClick:Q,children:"Annuler"})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>G(E),children:" Modifier"}),E.status==="inventory"&&d.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>pe(E),children:" Consigne"}),(E.status==="consignment"||E.status==="sold")&&d.jsx("button",{className:"btn btn-small btn-return",onClick:()=>N(E),children:" Retour inventaire"}),d.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>M(E),children:" Supprimer"})]})})]})]},E.id)})})]})}const Dk="https://us-central1-stockduloft.cloudfunctions.net/analyzePhoto";async function Ok(r,e=[],t=""){try{const i=await fetch(Dk,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:r,categories:e,userHint:t})});if(!i.ok)throw new Error(`Erreur serveur: ${i.status}`);const o=await i.json();if(o.success)return{category:o.category,title:o.title,description:o.description};throw new Error(o.error||"Erreur inconnue")}catch(i){throw console.error("Erreur AI:",i),i}}function Lk({imageBase64:r,categories:e,onSuggestion:t}){const[i,o]=I.useState(!1),[l,u]=I.useState(null),[f,m]=I.useState(""),g=async()=>{if(!r){u("Prenez une photo d'abord");return}o(!0),u(null);try{const w=await Ok(r,e,f);t(w)}catch(w){u("Impossible d'analyser la photo. Ressayez."),console.error(w)}finally{o(!1)}};return d.jsxs("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[d.jsx("input",{type:"text",value:f,onChange:w=>m(w.target.value),placeholder:"C'est quoi? Ex: butoir de porte, sac  lunch, coussin...",style:{width:"100%",padding:"10px 12px",fontSize:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",marginBottom:"8px",boxSizing:"border-box"}}),d.jsx("button",{type:"button",onClick:g,disabled:i||!r,style:{padding:"10px 20px",backgroundColor:i?"#ccc":"#7c3aed",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:i?"wait":"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:i?d.jsxs(d.Fragment,{children:[d.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid white",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Analyse en cours..."]}):d.jsx(d.Fragment,{children:" Suggestion AI"})}),l&&d.jsx("p",{style:{color:"red",fontSize:"14px",marginTop:"5px"},children:l}),d.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function Mk(){const r=Vd(),{tenant:e}=Oo(),t=(e==null?void 0:e.prefix)||"ART",i=I.useRef(null),[o,l]=I.useState({uniqueId:"",description:"",longDescription:"",price:"",category:"",itemDate:new Date().toISOString().split("T")[0]}),[u,f]=I.useState(null),[m,g]=I.useState(null),[w,_]=I.useState(!1),[y,T]=I.useState(""),[R,O]=I.useState("");I.useEffect(()=>{ev(t).then(J=>{l(ue=>({...ue,uniqueId:J})),O(J)})},[t]);const D=J=>{const{name:ue,value:ge}=J.target;l(Ee=>({...Ee,[ue]:ge})),ue==="uniqueId"&&T("")},ee=J=>{var Ee;const ue=(Ee=J.target.files)==null?void 0:Ee[0];if(!ue)return;f(ue);const ge=new FileReader;ge.onload=Le=>g(Le.target.result),ge.readAsDataURL(ue)},j=()=>{var J;(J=i.current)==null||J.click()},K=()=>{f(null),g(null),i.current&&(i.current.value="")},H=()=>{l(J=>({...J,uniqueId:R})),T("")},ce=J=>{l(ue=>({...ue,...J.category?{category:J.category}:{},...J.title?{description:J.title}:{},...J.description?{longDescription:J.description}:{}}))},ae=async J=>{if(J.preventDefault(),T(""),!o.uniqueId.trim()){T("Le numro unique est requis");return}if(!o.price||parseFloat(o.price)<=0){T("Le prix doit tre suprieur  0");return}if(await Oy(o.uniqueId)){const ge=await ev(t);O(ge),T(`Le numro "${o.uniqueId.toUpperCase()}" existe dj !`);return}_(!0);try{await Ik({uniqueId:o.uniqueId,description:o.description,longDescription:o.longDescription,price:o.price,category:o.category,itemDate:o.itemDate,photoFile:u}),r("/app")}catch(ge){console.error("Erreur:",ge),T("Erreur lors de la sauvegarde. Ressayez.")}finally{_(!1)}};return d.jsxs("div",{className:"page add-item-page",children:[d.jsx("h2",{className:"page-title",children:"Nouvel item"}),d.jsxs("form",{onSubmit:ae,className:"add-form",children:[d.jsxs("div",{className:"photo-section",children:[d.jsx("input",{ref:i,type:"file",accept:"image/*",capture:"environment",onChange:ee,className:"hidden-input"}),m?d.jsxs("div",{className:"photo-preview-container",children:[d.jsx("img",{src:m,alt:"Aperu",className:"photo-preview"}),d.jsx("button",{type:"button",className:"photo-remove",onClick:K,children:""})]}):d.jsxs("button",{type:"button",className:"photo-capture-btn",onClick:j,children:[d.jsx("span",{className:"capture-icon",children:""}),d.jsx("span",{children:"Prendre une photo"})]}),d.jsx("p",{className:"photo-hint",children:" Photo principale  vous pourrez ajouter d'autres photos en modifiant l'article"})]}),m&&d.jsx(Lk,{imageBase64:m,onSuggestion:ce}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Numro unique *"}),d.jsx("input",{type:"text",name:"uniqueId",value:o.uniqueId,onChange:D,placeholder:`Ex: ${t}-001`,className:"form-input",autoComplete:"off",style:{textTransform:"uppercase"}})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Titre / Description courte"}),d.jsx("input",{type:"text",name:"description",value:o.description,onChange:D,placeholder:"Ex: Sac  main fleuri",className:"form-input"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Description dtaille"}),d.jsx("textarea",{name:"longDescription",value:o.longDescription,onChange:D,placeholder:"Dcrivez l'article en dtail : matriaux, dimensions, couleurs, entretien...",className:"form-input form-textarea",rows:"4"}),d.jsx("p",{className:"form-hint",children:"Affich dans la vitrine publique"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Prix ($) *"}),d.jsx("input",{type:"number",name:"price",value:o.price,onChange:D,placeholder:"0.00",className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Catgorie"}),d.jsx("input",{type:"text",name:"category",value:o.category,onChange:D,placeholder:"Ex: Sacs, Vtements, Accessoires...",className:"form-input"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Date de cration"}),d.jsx("input",{type:"date",name:"itemDate",value:o.itemDate,onChange:D,className:"form-input"})]}),y&&d.jsxs("div",{className:"error-block",children:[d.jsx("p",{className:"error-text",children:y}),R&&y.includes("existe dj")&&d.jsxs("button",{type:"button",className:"btn btn-small btn-suggest",onClick:H,children:["Utiliser ",R]})]}),d.jsxs("div",{className:"form-actions",children:[d.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:w,children:w?"Sauvegarde en cours...":" Ajouter  l'inventaire"}),d.jsx("button",{type:"button",className:"btn btn-secondary btn-full",onClick:()=>r("/app"),children:"Annuler"})]})]})]})}function et(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function Fk(){var Y;const{user:r,tenant:e}=Oo(),t=(e==null?void 0:e.prefix)||"ART",[i,o]=I.useState(`${t}-`),[l,u]=I.useState(null),[f,m]=I.useState(null),[g,w]=I.useState(((Y=r==null?void 0:r.displayName)==null?void 0:Y.split(" ")[0])||""),[_,y]=I.useState(new Date().toISOString().split("T")[0]),[T,R]=I.useState(""),[O,D]=I.useState(()=>localStorage.getItem("va_marketName")||""),[ee,j]=I.useState(!1),[K,H]=I.useState(!1),[ce,ae]=I.useState(""),[J,ue]=I.useState(""),[ge,Ee]=I.useState(!1),[Le,ze]=I.useState(""),[ke,Ge]=I.useState(null);I.useEffect(()=>{var q;const E=(q=wn.currentUser)==null?void 0:q.uid;if(!E)return;const z=ve(_e,`tenants/${E}/settings/taxes`);return En(z,re=>{re.exists()?Ge(re.val()):Ge({enabled:!1})})},[]);const it=(ke==null?void 0:ke.enabled)||!1,Me=(ke==null?void 0:ke.tpsRate)||5,Ne=(ke==null?void 0:ke.tvqRate)||9.975,ne=(()=>{if(!it||ge)return null;const E=parseFloat(T)||0;if(E<=0)return null;const z=Math.round(E*Me)/100,V=Math.round(E*Ne*100)/1e4,q=Math.round((E+z+V)*100)/100;return{tpsAmount:z,tvqAmount:V,totalWithTax:q}})(),Q=async E=>{var z;if(E==null||E.preventDefault(),!!i.trim()){j(!0),ae(""),ue(""),u(null),m(null);try{const V=await Oy(i);if(!V){ae(`Aucun item trouv avec le numro "${i.toUpperCase()}"`);return}if(V.status==="sold"){ae(`Cet item est dj vendu (${V.saleDate} par ${V.sellerName})`);return}if(u(V),R(((z=V.price)==null?void 0:z.toFixed(2))||""),V.status==="consignment"&&V.consignmentStoreId){const q=await Dy(V.consignmentStoreId);m(q)}}catch(V){console.error(V),ae("Erreur de recherche. Ressayez.")}finally{j(!1)}}},M=(()=>{if(!f||!f.commissionPercent||ge)return null;const E=parseFloat(T)||0,z=Math.round(E*f.commissionPercent)/100,V=Math.round((E-z)*100)/100;return{commissionAmount:z,netRevenue:V,percent:f.commissionPercent}})(),pe=async()=>{if(!(!l||!g.trim())){H(!0),ae("");try{const E=ge?0:parseFloat(T)||l.price;let z=null;if(it&&!ge&&E>0){const re=Math.round(E*Me)/100,Pe=Math.round(E*Ne*100)/1e4;z={tpsRate:Me,tvqRate:Ne,tpsAmount:re,tvqAmount:Pe,totalWithTax:Math.round((E+re+Pe)*100)/100}}const V=await Pk(l.id,g,_,E,O,ge,Le,z);let q;ge?q=` ${l.uniqueId} donn en cadeau${Le?`  ${Le}`:""}`:V.commissionAmount>0?(q=` ${l.uniqueId} vendu pour ${et(E)} $`,z&&(q+=`
 TPS: ${et(z.tpsAmount)} $ + TVQ: ${et(z.tvqAmount)} $ = Total: ${et(z.totalWithTax)} $`),q+=`
 Commission ${l.consignmentStore}: -${et(V.commissionAmount)} $`,q+=`
 Revenu net: ${et(V.netRevenue)} $`):(q=` ${l.uniqueId} vendu pour ${et(E)} $`,z&&(q+=`
 TPS: ${et(z.tpsAmount)} $ + TVQ: ${et(z.tvqAmount)} $
 Total avec taxes: ${et(z.totalWithTax)} $`),O&&(q+=`${z?"":`
`}${z?"  ":" au "}${O}`)),ue(q),u(null),m(null),o(`${t}-`),R(""),Ee(!1),ze("")}catch(E){console.error(E),ae("Erreur lors de la vente. Ressayez.")}finally{H(!1)}}},b=()=>{o(`${t}-`),u(null),m(null),R(""),ae(""),ue(""),Ee(!1),ze("")};return d.jsxs("div",{className:"page sale-page",children:[d.jsx("h2",{className:"page-title",children:" Vente rapide"}),d.jsx("form",{onSubmit:Q,className:"sale-search-form",children:d.jsxs("div",{className:"sale-search-row",children:[d.jsx("input",{type:"text",value:i,onChange:E=>o(E.target.value.toUpperCase()),placeholder:`Ex: ${t}-001`,className:"form-input sale-search-input",autoComplete:"off",autoFocus:!0}),d.jsx("button",{type:"submit",className:"btn btn-primary sale-search-btn",disabled:ee||!i.trim(),children:ee?"...":""})]})}),J&&d.jsxs("div",{className:"sale-success",children:[d.jsx("p",{style:{whiteSpace:"pre-line"},children:J}),d.jsx("button",{className:"btn btn-primary btn-full",onClick:b,children:"Prochaine vente"})]}),ce&&d.jsxs("div",{className:"sale-error",children:[d.jsx("p",{children:ce}),d.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Ressayer"})]}),l&&d.jsxs("div",{className:"sale-confirmation",children:[d.jsxs("div",{className:"sale-item-card",children:[l.photoBase64?d.jsx("img",{src:l.photoBase64,alt:l.description,className:"sale-item-photo"}):d.jsx("div",{className:"sale-photo-placeholder",children:""}),d.jsxs("div",{className:"sale-item-details",children:[d.jsxs("span",{className:"sale-item-id",children:["#",l.uniqueId]}),d.jsx("p",{className:"sale-item-desc",children:l.description}),d.jsxs("p",{className:"sale-item-price",children:[et(l.price)," $"]}),l.status==="consignment"&&d.jsxs("p",{className:"sale-item-consign",children:[" En consigne: ",l.consignmentStore,f&&f.commissionPercent>0&&d.jsxs("span",{className:"sale-commission-badge",children:[f.commissionPercent,"% commission"]})]})]})]}),d.jsxs("div",{className:"sale-form",children:[d.jsx("div",{className:"form-group",children:d.jsxs("label",{className:"gift-toggle",children:[d.jsx("input",{type:"checkbox",checked:ge,onChange:E=>{var z;Ee(E.target.checked),E.target.checked?R("0"):R(((z=l.price)==null?void 0:z.toFixed(2))||"")}}),d.jsx("span",{children:" Donn en cadeau"})]})}),ge&&d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Note"}),d.jsx("input",{type:"text",value:Le,onChange:E=>ze(E.target.value),className:"form-input",placeholder:"Ex: Cadeau pour maman, change, etc."})]}),!ge&&d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Prix de vente ($)"}),d.jsxs("div",{className:"sale-price-row",children:[d.jsx("input",{type:"number",value:T,onChange:E=>R(E.target.value),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"}),parseFloat(T)<l.price&&d.jsxs("span",{className:"sale-discount",children:["Rabais de ",et(l.price-parseFloat(T))," $"]})]})]}),ne&&d.jsxs("div",{className:"sale-tax-preview",children:[d.jsxs("div",{className:"tax-calc-row",children:[d.jsx("span",{children:"Prix"}),d.jsxs("span",{children:[et(parseFloat(T))," $"]})]}),d.jsxs("div",{className:"tax-calc-row",children:[d.jsxs("span",{children:["TPS (",Me,"%)"]}),d.jsxs("span",{children:[et(ne.tpsAmount)," $"]})]}),d.jsxs("div",{className:"tax-calc-row",children:[d.jsxs("span",{children:["TVQ (",Ne,"%)"]}),d.jsxs("span",{children:[et(ne.tvqAmount)," $"]})]}),d.jsxs("div",{className:"tax-calc-row tax-calc-total",children:[d.jsx("span",{children:" Total  encaisser"}),d.jsxs("span",{children:[et(ne.totalWithTax)," $"]})]})]}),M&&d.jsxs("div",{className:"sale-commission-preview",children:[d.jsxs("div",{className:"commission-row",children:[d.jsx("span",{children:"Prix de vente"}),d.jsxs("span",{children:[et(parseFloat(T))," $"]})]}),d.jsxs("div",{className:"commission-row commission-negative",children:[d.jsxs("span",{children:["Commission ",l.consignmentStore," (",M.percent,"%)"]}),d.jsxs("span",{children:["-",et(M.commissionAmount)," $"]})]}),d.jsxs("div",{className:"commission-row commission-total",children:[d.jsx("span",{children:"Revenu net pour vous"}),d.jsxs("span",{children:[et(M.netRevenue)," $"]})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Vendeur/vendeuse"}),d.jsx("input",{type:"text",value:g,onChange:E=>w(E.target.value),className:"form-input",placeholder:"Nom"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"March / Point de vente"}),d.jsx("input",{type:"text",value:O,onChange:E=>{D(E.target.value),localStorage.setItem("va_marketName",E.target.value)},className:"form-input",placeholder:"Ex: March Jean-Talon, Facebook, etc."})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Date de vente"}),d.jsx("input",{type:"date",value:_,onChange:E=>y(E.target.value),className:"form-input"})]}),d.jsxs("div",{className:"sale-actions",children:[d.jsx("button",{className:"btn btn-sell btn-full",onClick:pe,disabled:K||!g.trim(),children:K?"En cours...":ge?" Confirmer le cadeau":ne?`Confirmer  Total: ${et(ne.totalWithTax)} $`:M?`Confirmer  Net: ${et(M.netRevenue)} $`:`Confirmer la vente  ${et(parseFloat(T||0))} $`}),d.jsx("button",{className:"btn btn-secondary btn-full",onClick:b,children:"Annuler"})]})]})]}),!l&&!ce&&!J&&d.jsxs("div",{className:"sale-hint",children:[d.jsx("p",{className:"hint-icon",children:""}),d.jsxs("p",{children:["Entre le numro de l'tiquette",d.jsx("br",{}),"pour enregistrer une vente"]})]})]})}const Xi="stockduloft/settings";function Bt(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}const Uk={free:{name:"Dcouverte",badge:"",articlesLimit:25,vitrineLimit:10,price:null},artisan:{name:"Artisan",badge:"",articlesLimit:1/0,vitrineLimit:1/0,price:{monthly:12.99,yearly:100}}};function $k(){const[r,e]=I.useState(7),[t,i]=I.useState([]),[o,l]=I.useState([]),[u,f]=I.useState(!1),[m,g]=I.useState(null),[w,_]=I.useState({name:"",commissionPercent:"",locationFee:""}),[y,T]=I.useState(null),[R,O]=I.useState(()=>{const L=new Date;return`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}`}),[D,ee]=I.useState(!1),[j,K]=I.useState("5"),[H,ce]=I.useState("9.975"),[ae,J]=I.useState(""),[ue,ge]=I.useState(""),[Ee,Le]=I.useState(!1),[ze,ke]=I.useState(!1),[Ge,it]=I.useState(null),[Me,Ne]=I.useState("dark-copper");I.useEffect(()=>{const L=ve(_e,Xi);return En(L,Ke=>{if(Ke.exists()){const Qe=Ke.val();Qe.vitrineSoldDays!==void 0&&e(Qe.vitrineSoldDays),Qe.subscription?T(Qe.subscription):T({plan:"free",planType:null,startDate:null,expiryDate:null}),Qe.theme&&Ne(Qe.theme),Qe.taxes&&(ee(Qe.taxes.enabled||!1),Qe.taxes.tpsRate!==void 0&&K(Qe.taxes.tpsRate.toString()),Qe.taxes.tvqRate!==void 0&&ce(Qe.taxes.tvqRate.toString()),Qe.taxes.tpsNumber!==void 0&&J(Qe.taxes.tpsNumber),Qe.taxes.tvqNumber!==void 0&&ge(Qe.taxes.tvqNumber))}})},[]),I.useEffect(()=>jy(i),[]),I.useEffect(()=>Ly(l),[]);const G=async L=>{const ie=parseInt(L);e(ie),await qe(ve(_e,Xi),{vitrineSoldDays:ie})},ne=async L=>{Ne(L),zh(L),await qe(ve(_e,Xi),{theme:L})},Q=async L=>{ee(L),await qe(ve(_e,`${Xi}/taxes`),{enabled:L,tpsRate:parseFloat(j)||5,tvqRate:parseFloat(H)||9.975,tpsNumber:ae,tvqNumber:ue})},N=async()=>{await qe(ve(_e,`${Xi}/taxes`),{enabled:D,tpsRate:parseFloat(j)||5,tvqRate:parseFloat(H)||9.975,tpsNumber:ae.trim(),tvqNumber:ue.trim()})},M=50,pe=Math.round(M*(parseFloat(j)||0))/100,b=Math.round(M*(parseFloat(H)||0)*100)/1e4,Y=M+pe+b,E=Uk[(y==null?void 0:y.plan)||"free"],z=o.filter(L=>L.status!=="sold").length,V=E.articlesLimit===1/0?0:Math.min(100,Math.round(z/E.articlesLimit*100)),q=((y==null?void 0:y.plan)||"free")==="free",re=L=>L?new Date(L).toLocaleDateString("fr-CA",{year:"numeric",month:"long",day:"numeric"}):"",Pe=()=>{if(!(y!=null&&y.expiryDate))return null;const L=new Date,ie=new Date(y.expiryDate);return Math.ceil((ie-L)/(1e3*60*60*24))},Vt=async()=>{w.name.trim()&&(await Sk(w),_({name:"",commissionPercent:"",locationFee:""}),f(!1))},us=L=>{var ie,Ke;g(L.id),_({name:L.name,commissionPercent:((ie=L.commissionPercent)==null?void 0:ie.toString())||"",locationFee:((Ke=L.locationFee)==null?void 0:Ke.toString())||""})},li=async L=>{await Ck(L,{name:w.name.trim(),commissionPercent:parseFloat(w.commissionPercent)||0,locationFee:parseFloat(w.locationFee)||0}),g(null),_({name:"",commissionPercent:"",locationFee:""})},Mo=async L=>{const ie=o.filter(Ke=>Ke.status==="consignment"&&Ke.consignmentStoreId===L.id);if(ie.length>0){alert(`Impossible de supprimer : ${ie.length} article(s) en consigne chez ${L.name}`);return}confirm(`Supprimer le magasin "${L.name}" ?`)&&await Nk(L.id)},Ve=(()=>{const[L,ie]=R.split("-").map(Number),Ke=`${L}-${String(ie).padStart(2,"0")}-01`,Qe=ie===12?`${L+1}-01-01`:`${L}-${String(ie+1).padStart(2,"0")}-01`,bt=o.filter(Se=>Se.status==="sold"&&Se.saleDate&&Se.saleDate>=Ke&&Se.saleDate<Qe),Ie=bt.filter(Se=>!Se.isGift),Cn=bt.filter(Se=>Se.isGift),Nn=Ie.reduce((Se,be)=>Se+(be.salePrice||0),0),Qn=Ie.reduce((Se,be)=>Se+(be.commissionAmount||0),0),rc=Ie.reduce((Se,be)=>be.taxEnabled?Se+(be.tpsAmount||0)+(be.tvqAmount||0):Se,0),Yn={};Ie.forEach(Se=>{const be=Se.consignmentStoreId?` ${Se.consignmentStore||"Consigne"}`:Se.marketName?` ${Se.marketName}`:" Vente directe";Yn[be]||(Yn[be]={count:0,revenue:0}),Yn[be].count++,Yn[be].revenue+=Se.salePrice||0});const Jn={};Ie.forEach(Se=>{const be=Se.category||"Sans catgorie";Jn[be]||(Jn[be]={count:0,revenue:0}),Jn[be].count++,Jn[be].revenue+=Se.salePrice||0});const Or={};return bt.forEach(Se=>{const be=Se.sellerName||"Non spcifi";Or[be]||(Or[be]={count:0,revenue:0}),Or[be].count++,Or[be].revenue+=Se.salePrice||0}),{totalSales:Ie.length,totalGifts:Cn.length,totalRevenue:Nn,totalCommissions:Qn,totalNet:Nn-Qn,totalTaxes:rc,avgPrice:Ie.length>0?Nn/Ie.length:0,byMarket:Object.entries(Yn).sort((Se,be)=>be[1].revenue-Se[1].revenue),byCategory:Object.entries(Jn).sort((Se,be)=>be[1].count-Se[1].count),bySeller:Object.entries(Or).sort((Se,be)=>be[1].count-Se[1].count)}})(),Fo=Ve.totalSales>0||Ve.totalGifts>0,Gn=(()=>{const[L,ie]=R.split("-").map(Number),Ke=`${L}-${String(ie).padStart(2,"0")}-01`,Qe=ie===12?`${L+1}-01-01`:`${L}-${String(ie+1).padStart(2,"0")}-01`,bt={};return t.forEach(Ie=>{bt[Ie.id]={storeName:Ie.name,commissionPercent:Ie.commissionPercent,locationFee:Ie.locationFee,totalSales:0,totalCommission:0,totalNet:0,itemsSold:0,itemsInConsignment:0}}),o.forEach(Ie=>{if(Ie.status==="consignment"&&Ie.consignmentStoreId&&bt[Ie.consignmentStoreId]&&bt[Ie.consignmentStoreId].itemsInConsignment++,Ie.status==="sold"&&Ie.saleDate&&Ie.saleDate>=Ke&&Ie.saleDate<Qe&&Ie.consignmentStoreId&&bt[Ie.consignmentStoreId]){const Cn=bt[Ie.consignmentStoreId];Cn.itemsSold++,Cn.totalSales+=Ie.salePrice||0,Cn.totalCommission+=Ie.commissionAmount||0,Cn.totalNet+=Ie.netRevenue||Ie.salePrice||0}}),Object.values(bt)})(),Kn=Gn.some(L=>L.itemsSold>0||L.itemsInConsignment>0),ci=()=>{const[L,ie]=R.split("-").map(Number);return new Date(L,ie-1).toLocaleDateString("fr-CA",{year:"numeric",month:"long"})};return d.jsxs("div",{className:"page about-page",children:[d.jsx("h2",{className:"page-title",children:"  propos"}),d.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[d.jsx("h4",{children:" Mon abonnement"}),d.jsxs("div",{className:"subscription-section",children:[d.jsx("div",{className:"subscription-plan-row",children:d.jsxs("div",{className:"subscription-plan-info",children:[d.jsxs("span",{className:"subscription-plan-badge",children:[E.badge," ",E.name]}),!q&&(y==null?void 0:y.planType)&&d.jsx("span",{className:"subscription-plan-type",children:y.planType==="yearly"?"100.00 $/an":"12.99 $/mois"})]})}),d.jsxs("div",{className:"subscription-articles",children:[d.jsxs("div",{className:"subscription-articles-label",children:[d.jsx("span",{children:" Articles actifs"}),d.jsxs("span",{children:[z,q?` / ${E.articlesLimit}`:"  Illimit"]})]}),q&&d.jsx("div",{className:"subscription-progress-bar",children:d.jsx("div",{className:`subscription-progress-fill ${V>=80?"warning":""} ${V>=100?"full":""}`,style:{width:`${V}%`}})})]}),d.jsxs("div",{className:"subscription-detail-row",children:[d.jsx("span",{children:" Vitrine publique"}),d.jsx("span",{children:q?`${E.vitrineLimit} articles max`:"Illimite"})]}),d.jsxs("div",{className:"subscription-detail-row",children:[d.jsx("span",{children:" Suivi consignes"}),d.jsx("span",{children:q?"":""})]}),d.jsxs("div",{className:"subscription-detail-row",children:[d.jsx("span",{children:" tiquettes QR"}),d.jsx("span",{children:q?"":""})]}),!q&&(y==null?void 0:y.expiryDate)&&d.jsxs("div",{className:"subscription-renewal",children:[d.jsx("span",{children:" Renouvellement"}),d.jsxs("span",{className:Pe()<=7?"renewal-soon":"",children:[re(y.expiryDate),Pe()<=7&&Pe()>0&&d.jsxs("span",{className:"renewal-badge",children:["Dans ",Pe()," jour(s)"]})]})]}),q?d.jsxs("div",{className:"subscription-upgrade",children:[d.jsx("p",{className:"subscription-upgrade-pitch",children:"Passez au plan Artisan pour des articles illimits, la vitrine complte, le suivi des consignes et plus encore."}),d.jsxs("div",{className:"subscription-upgrade-options",children:[d.jsx("button",{className:"btn btn-upgrade btn-full",onClick:()=>{it("monthly"),ke(!0)},children:" Plan Artisan  12.99 $/mois"}),d.jsxs("button",{className:"btn btn-upgrade-yearly btn-full",onClick:()=>{it("yearly"),ke(!0)},children:[" Plan Annuel  100 $/an",d.jsx("span",{className:"upgrade-savings",children:"conomisez 56 $ !"})]})]})]}):d.jsx("div",{className:"subscription-manage",children:d.jsx("button",{className:"btn btn-small btn-secondary btn-full",children:"Grer mon abonnement"})})]})]}),d.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[d.jsx("h4",{children:" Thme de couleur"}),d.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",margin:"8px 0 12px"},children:"Ce thme s'applique  l'application et  votre vitrine publique."}),d.jsx("div",{className:"theme-grid",children:Object.entries(by).map(([L,ie])=>d.jsxs("button",{className:`theme-swatch ${Me===L?"active":""}`,onClick:()=>ne(L),title:ie.name,children:[d.jsx("div",{className:"theme-swatch-color",style:{background:ie.preview}}),d.jsxs("span",{className:"theme-swatch-label",children:[ie.emoji," ",ie.name]}),Me===L&&d.jsx("span",{className:"theme-swatch-check",children:""})]},L))})]}),d.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[d.jsx("h4",{children:" Rapport des ventes"}),d.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[d.jsx("label",{className:"form-label",children:"Mois"}),d.jsx("input",{type:"month",value:R,onChange:L=>O(L.target.value),className:"form-input"})]}),Fo?d.jsxs("div",{className:"sales-report",children:[d.jsxs("div",{className:"sales-summary-grid",children:[d.jsxs("div",{className:"sales-summary-card sales-summary-highlight",children:[d.jsxs("span",{className:"sales-summary-value",children:[Bt(Ve.totalRevenue)," $"]}),d.jsx("span",{className:"sales-summary-label",children:"Ventes brutes"})]}),d.jsxs("div",{className:"sales-summary-card",children:[d.jsx("span",{className:"sales-summary-value",children:Ve.totalSales}),d.jsx("span",{className:"sales-summary-label",children:"Articles vendus"})]}),d.jsxs("div",{className:"sales-summary-card",children:[d.jsxs("span",{className:"sales-summary-value",children:[Bt(Ve.avgPrice)," $"]}),d.jsx("span",{className:"sales-summary-label",children:"Prix moyen"})]}),Ve.totalGifts>0&&d.jsxs("div",{className:"sales-summary-card",children:[d.jsxs("span",{className:"sales-summary-value",children:[" ",Ve.totalGifts]}),d.jsx("span",{className:"sales-summary-label",children:"Cadeaux"})]})]}),(Ve.totalCommissions>0||Ve.totalTaxes>0)&&d.jsxs("div",{className:"sales-deductions",children:[Ve.totalCommissions>0&&d.jsxs("div",{className:"report-row report-row-negative",children:[d.jsx("span",{children:" Commissions consigne"}),d.jsxs("span",{children:["-",Bt(Ve.totalCommissions)," $"]})]}),Ve.totalTaxes>0&&d.jsxs("div",{className:"report-row",children:[d.jsx("span",{children:" Taxes perues (TPS+TVQ)"}),d.jsxs("span",{children:[Bt(Ve.totalTaxes)," $"]})]}),d.jsxs("div",{className:"report-row report-row-total",children:[d.jsx("span",{children:" Revenu net"}),d.jsxs("span",{children:[Bt(Ve.totalNet)," $"]})]})]}),Ve.byMarket.length>0&&d.jsxs("div",{className:"sales-breakdown",children:[d.jsx("p",{className:"sales-breakdown-title",children:"Par lieu de vente"}),Ve.byMarket.map(([L,ie])=>d.jsxs("div",{className:"sales-breakdown-row",children:[d.jsx("span",{className:"sales-breakdown-name",children:L}),d.jsxs("span",{className:"sales-breakdown-stats",children:[ie.count," article",ie.count>1?"s":"","  ",Bt(ie.revenue)," $"]})]},L))]}),Ve.byCategory.length>0&&d.jsxs("div",{className:"sales-breakdown",children:[d.jsx("p",{className:"sales-breakdown-title",children:"Par catgorie"}),Ve.byCategory.map(([L,ie])=>d.jsxs("div",{className:"sales-breakdown-row",children:[d.jsx("span",{className:"sales-breakdown-name",children:L}),d.jsxs("span",{className:"sales-breakdown-stats",children:[ie.count,"  ",Bt(ie.revenue)," $"]})]},L))]}),Ve.bySeller.length>1&&d.jsxs("div",{className:"sales-breakdown",children:[d.jsx("p",{className:"sales-breakdown-title",children:"Par vendeur"}),Ve.bySeller.map(([L,ie])=>d.jsxs("div",{className:"sales-breakdown-row",children:[d.jsxs("span",{className:"sales-breakdown-name",children:[" ",L]}),d.jsxs("span",{className:"sales-breakdown-stats",children:[ie.count,"  ",Bt(ie.revenue)," $"]})]},L))]})]}):d.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginTop:"10px"},children:["Aucune vente pour ",ci()]})]}),d.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[d.jsx("h4",{children:" Taxes de vente"}),d.jsxs("div",{className:"tax-section",children:[d.jsx("div",{className:"tax-toggle-row",children:d.jsxs("label",{className:"tax-toggle-label",children:[d.jsx("input",{type:"checkbox",checked:D,onChange:L=>Q(L.target.checked)}),d.jsx("span",{className:"tax-toggle-text",children:"Je perois les taxes de vente"})]})}),D&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"store-form-row",style:{marginTop:"12px"},children:[d.jsxs("div",{className:"form-group",style:{flex:1},children:[d.jsx("label",{className:"form-label",children:"TPS (%)"}),d.jsx("input",{type:"number",value:j,onChange:L=>K(L.target.value),onBlur:N,className:"form-input",step:"0.001",min:"0",max:"20",inputMode:"decimal"})]}),d.jsxs("div",{className:"form-group",style:{flex:1},children:[d.jsx("label",{className:"form-label",children:"TVQ (%)"}),d.jsx("input",{type:"number",value:H,onChange:L=>ce(L.target.value),onBlur:N,className:"form-input",step:"0.001",min:"0",max:"20",inputMode:"decimal"})]})]}),d.jsxs("div",{className:"form-group",style:{marginTop:"8px"},children:[d.jsx("label",{className:"form-label",children:"Numro TPS (optionnel)"}),d.jsx("input",{type:"text",value:ae,onChange:L=>J(L.target.value),onBlur:N,className:"form-input",placeholder:"Ex: 123456789RT0001"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Numro TVQ (optionnel)"}),d.jsx("input",{type:"text",value:ue,onChange:L=>ge(L.target.value),onBlur:N,className:"form-input",placeholder:"Ex: 1234567890TQ0001"})]}),d.jsxs("div",{className:"tax-preview",children:[d.jsx("p",{className:"tax-preview-title",children:"Aperu sur un article  50.00 $ :"}),d.jsxs("div",{className:"tax-preview-row",children:[d.jsx("span",{children:"Prix"}),d.jsx("span",{children:"50.00 $"})]}),d.jsxs("div",{className:"tax-preview-row",children:[d.jsxs("span",{children:["TPS (",j,"%)"]}),d.jsxs("span",{children:[pe.toFixed(2)," $"]})]}),d.jsxs("div",{className:"tax-preview-row",children:[d.jsxs("span",{children:["TVQ (",H,"%)"]}),d.jsxs("span",{children:[b.toFixed(2)," $"]})]}),d.jsxs("div",{className:"tax-preview-row tax-preview-total",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{children:[Y.toFixed(2)," $"]})]})]})]}),d.jsx("button",{className:"btn btn-small btn-secondary btn-full",style:{marginTop:"12px"},onClick:()=>Le(!Ee),children:Ee?" Masquer":" Ce que vous devez savoir sur les taxes"}),Ee&&d.jsxs("div",{className:"tax-info-section",children:[d.jsx("h5",{children:" Taxes de vente  Ce que vous devez savoir"}),d.jsxs("div",{className:"tax-info-block",children:[d.jsx("p",{className:"tax-info-subtitle",children:"Suis-je oblig de percevoir les taxes ?"}),d.jsxs("p",{children:["Au Canada, si vos ventes totales sont infrieures  30 000 $ sur quatre trimestres civils conscutifs, vous tes considr  petit fournisseur  et vous n'tes pas ",d.jsx("strong",{children:"oblig"})," de vous inscrire aux taxes (TPS/TVH au fdral et TVQ au Qubec)."]})]}),d.jsxs("div",{className:"tax-info-block",children:[d.jsx("p",{className:"tax-info-subtitle",children:"Avantages de s'inscrire volontairement"}),d.jsx("p",{children:"Mme sous le seuil de 30 000 $, l'inscription volontaire peut tre avantageuse. Vous pouvez rclamer des crdits de taxe sur les intrants (CTI) pour rcuprer la TPS et la TVQ payes sur vos achats de matriaux, fournitures, outils et quipement."})]}),d.jsxs("div",{className:"tax-info-block",children:[d.jsx("p",{className:"tax-info-subtitle",children:"Inconvnients"}),d.jsx("p",{children:"Si vous vous inscrivez, vous devez percevoir les taxes sur toutes vos ventes, produire des dclarations rgulirement, et remettre les montants perus. Vos prix peuvent aussi paratre plus levs face  des artisans non inscrits."})]}),d.jsxs("div",{className:"tax-info-block",children:[d.jsx("p",{className:"tax-info-subtitle",children:"Si vous dpassez 30 000 $"}),d.jsx("p",{children:"Ds que vos ventes dpassent 30 000 $, vous devez vous inscrire dans les 29 jours suivants et commencer  percevoir les taxes."})]}),d.jsxs("div",{className:"tax-info-block",children:[d.jsx("p",{className:"tax-info-subtitle",children:"Taux au Qubec"}),d.jsx("p",{children:"TPS (fdral) : 5 %  TVQ (Qubec) : 9,975 %. Le taux combin effectif est d'environ 14,975 %."})]}),d.jsxs("div",{className:"tax-info-block",children:[d.jsx("p",{className:"tax-info-subtitle",children:"Ressources officielles"}),d.jsxs("p",{children:[" ",d.jsx("a",{href:"https://www.canada.ca/fr/agence-revenu/services/impot/entreprises/sujets/tps-tvh-entreprises/compte-tps-tvh/inscrire-compte.html",target:"_blank",rel:"noopener noreferrer",children:"Agence du revenu du Canada  Inscription TPS/TVH"}),d.jsx("br",{})," ",d.jsx("a",{href:"https://www.revenuquebec.ca/fr/entreprises/taxes/tpstvh-et-tvq/inscription-aux-fichiers-de-la-tps-et-de-la-tvq/",target:"_blank",rel:"noopener noreferrer",children:"Revenu Qubec  Inscription TPS et TVQ"})]})]}),d.jsx("div",{className:"tax-info-disclaimer",children:d.jsxs("p",{children:[" ",d.jsx("strong",{children:"Avis important :"})," Cette information est fournie  titre indicatif seulement. Consultez un comptable ou un professionnel qualifi."]})})]})]})]}),d.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[d.jsx("h4",{children:" Magasins de consigne"}),t.length===0?d.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",margin:"12px 0"},children:"Aucun magasin configur"}):d.jsx("div",{className:"stores-list",children:t.map(L=>d.jsx("div",{className:"store-card",children:m===L.id?d.jsxs("div",{className:"store-edit-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nom"}),d.jsx("input",{type:"text",value:w.name,onChange:ie=>_(Ke=>({...Ke,name:ie.target.value})),className:"form-input"})]}),d.jsxs("div",{className:"store-form-row",children:[d.jsxs("div",{className:"form-group",style:{flex:1},children:[d.jsx("label",{className:"form-label",children:"Commission (%)"}),d.jsx("input",{type:"number",value:w.commissionPercent,onChange:ie=>_(Ke=>({...Ke,commissionPercent:ie.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"0"})]}),d.jsxs("div",{className:"form-group",style:{flex:1},children:[d.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),d.jsx("input",{type:"number",value:w.locationFee,onChange:ie=>_(Ke=>({...Ke,locationFee:ie.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"0"})]})]}),d.jsxs("div",{className:"store-edit-actions",children:[d.jsx("button",{className:"btn btn-small btn-save",onClick:()=>li(L.id),children:" Sauvegarder"}),d.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>g(null),children:"Annuler"})]})]}):d.jsxs("div",{className:"store-info",children:[d.jsxs("div",{className:"store-header",children:[d.jsx("span",{className:"store-name",children:L.name}),d.jsxs("div",{className:"store-actions-btns",children:[d.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>us(L),children:""}),d.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>Mo(L),children:""})]})]}),d.jsxs("div",{className:"store-details",children:[L.commissionPercent>0&&d.jsxs("span",{className:"store-tag store-tag-commission",children:[L.commissionPercent,"% commission"]}),L.locationFee>0&&d.jsxs("span",{className:"store-tag store-tag-location",children:[Bt(L.locationFee)," $/mois loyer"]}),!L.commissionPercent&&!L.locationFee&&d.jsx("span",{className:"store-tag",children:"Aucun frais configur"})]}),o.filter(ie=>ie.status==="consignment"&&ie.consignmentStoreId===L.id).length>0&&d.jsxs("p",{className:"store-consigned-count",children:[" ",o.filter(ie=>ie.status==="consignment"&&ie.consignmentStoreId===L.id).length," article(s) en consigne"]})]})},L.id))}),u?d.jsxs("div",{className:"store-add-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nom du magasin"}),d.jsx("input",{type:"text",value:w.name,onChange:L=>_(ie=>({...ie,name:L.target.value})),className:"form-input",placeholder:"Ex: SF Studios",autoFocus:!0})]}),d.jsxs("div",{className:"store-form-row",children:[d.jsxs("div",{className:"form-group",style:{flex:1},children:[d.jsx("label",{className:"form-label",children:"Commission (%)"}),d.jsx("input",{type:"number",value:w.commissionPercent,onChange:L=>_(ie=>({...ie,commissionPercent:L.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"Ex: 30"})]}),d.jsxs("div",{className:"form-group",style:{flex:1},children:[d.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),d.jsx("input",{type:"number",value:w.locationFee,onChange:L=>_(ie=>({...ie,locationFee:L.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"Ex: 50"})]})]}),d.jsxs("div",{className:"store-edit-actions",children:[d.jsx("button",{className:"btn btn-small btn-save",onClick:Vt,disabled:!w.name.trim(),children:" Ajouter"}),d.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>{f(!1),_({name:"",commissionPercent:"",locationFee:""})},children:"Annuler"})]})]}):d.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{f(!0),_({name:"",commissionPercent:"",locationFee:""})},style:{marginTop:"10px"},children:" Ajouter un magasin"})]}),d.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[d.jsx("h4",{children:" Rapport consignes"}),d.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[d.jsx("label",{className:"form-label",children:"Mois"}),d.jsx("input",{type:"month",value:R,onChange:L=>O(L.target.value),className:"form-input"})]}),Kn?d.jsx("div",{className:"report-list",children:Gn.filter(L=>L.itemsSold>0||L.itemsInConsignment>0).map((L,ie)=>d.jsxs("div",{className:"report-store-card",children:[d.jsx("div",{className:"report-store-name",children:L.storeName}),L.itemsInConsignment>0&&d.jsxs("div",{className:"report-row",children:[d.jsx("span",{children:" En consigne actuellement"}),d.jsxs("span",{children:[L.itemsInConsignment," article(s)"]})]}),L.itemsSold>0&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"report-row",children:[d.jsx("span",{children:" Articles vendus"}),d.jsx("span",{children:L.itemsSold})]}),d.jsxs("div",{className:"report-row",children:[d.jsx("span",{children:" Total ventes"}),d.jsxs("span",{children:[Bt(L.totalSales)," $"]})]}),L.commissionPercent>0&&d.jsxs("div",{className:"report-row report-row-negative",children:[d.jsxs("span",{children:[" Commission (",L.commissionPercent,"%)"]}),d.jsxs("span",{children:["-",Bt(L.totalCommission)," $"]})]}),L.locationFee>0&&d.jsxs("div",{className:"report-row report-row-negative",children:[d.jsx("span",{children:" Loyer mensuel"}),d.jsxs("span",{children:["-",Bt(L.locationFee)," $"]})]}),d.jsxs("div",{className:"report-row report-row-total",children:[d.jsx("span",{children:" Revenu net"}),d.jsxs("span",{children:[Bt(L.totalNet-(L.locationFee||0))," $"]})]})]})]},ie))}):d.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginTop:"10px"},children:"Aucune activit de consigne pour ce mois"})]}),d.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[d.jsx("h4",{children:" Paramtres Vitrine"}),d.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[d.jsx("label",{className:"form-label",children:"Afficher les articles vendus pendant :"}),d.jsxs("select",{value:r,onChange:L=>G(L.target.value),className:"form-input",children:[d.jsx("option",{value:0,children:"Ne pas afficher"}),d.jsx("option",{value:3,children:"3 jours"}),d.jsx("option",{value:7,children:"7 jours (1 semaine)"}),d.jsx("option",{value:14,children:"14 jours (2 semaines)"}),d.jsx("option",{value:30,children:"30 jours (1 mois)"})]}),d.jsx("p",{className:"about-setting-hint",children:"Les articles vendus apparatront avec un bandeau  VENDU  dans la vitrine publique."})]})]}),d.jsxs("div",{className:"about-card",children:[d.jsx("div",{className:"about-logo",children:d.jsx("img",{src:"/pwa-192x192.png",alt:"Vitrine Artisan"})}),d.jsx("h3",{children:" Vitrine Artisan"}),d.jsx("p",{className:"about-version",children:"Version 1.3"}),d.jsx("p",{className:"about-description",children:"Application de gestion d'inventaire conue pour les artisans et crateurs. Grez vos articles, suivez vos consignes et enregistrez vos ventes en toute simplicit."}),d.jsxs("div",{className:"about-author",children:[d.jsxs("p",{children:["Cr par ",d.jsx("strong",{children:"Jean-Marc Lacroix"})]}),d.jsx("p",{children:" 2026  Tous droits rservs"}),d.jsx("p",{style:{marginTop:"12px"},children:" Commentaires et suggestions bienvenus"}),d.jsx("a",{href:"mailto:lacroix.jeanmarc@gmail.com",className:"about-email",children:" lacroix.jeanmarc@gmail.com"})]})]}),ze&&d.jsx("div",{className:"modal-overlay",onClick:()=>ke(!1),children:d.jsxs("div",{className:"modal-content upgrade-modal",onClick:L=>L.stopPropagation(),children:[d.jsx("h3",{children:" Passer au Plan Artisan"}),d.jsx("div",{className:"upgrade-modal-plan-selected",children:Ge==="monthly"?" Plan mensuel  12,99 $ / mois":" Plan annuel  100,00 $ / an (conomisez 56 $!)"}),d.jsxs("div",{className:"upgrade-modal-steps",children:[d.jsx("p",{className:"upgrade-modal-steps-title",children:"Pour activer votre abonnement :"}),d.jsxs("div",{className:"upgrade-modal-step",children:[d.jsx("span",{className:"upgrade-modal-step-number",children:"1"}),d.jsxs("span",{children:["Envoyez un virement Interac de ",d.jsx("strong",{children:Ge==="monthly"?"12,99 $":"100,00 $"}),"  :"]})]}),d.jsxs("div",{className:"upgrade-modal-email-box",children:[d.jsx("span",{className:"upgrade-modal-email-icon",children:""}),d.jsx("span",{className:"upgrade-modal-email-address",children:"lacroix.jeanmarc@gmail.com"})]}),d.jsxs("div",{className:"upgrade-modal-step",children:[d.jsx("span",{className:"upgrade-modal-step-number",children:"2"}),d.jsxs("span",{children:["Dans le message du virement, indiquez le ",d.jsx("strong",{children:"nom de votre entreprise"})]})]}),d.jsxs("div",{className:"upgrade-modal-step",children:[d.jsx("span",{className:"upgrade-modal-step-number",children:"3"}),d.jsxs("span",{children:["Votre plan sera activ dans les ",d.jsx("strong",{children:"24 heures"})," suivant la rception du paiement"]})]})]}),d.jsx("div",{className:"upgrade-modal-note",children:" Une confirmation par courriel vous sera envoye ds l'activation."}),d.jsx("button",{className:"btn btn-secondary btn-full",onClick:()=>ke(!1),style:{marginTop:"16px"},children:"Fermer"})]})})]})}const zk="stockduloft/items",Bk="stockduloft/photos",Wk="stockduloft/settings",Vk=4;function nv(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function Hk(r,e){if(r.status!=="sold"||!r.saleDate)return!1;const t=new Date(r.saleDate);return(new Date-t)/(1e3*60*60*24)<=e}function qk(r){const e=[];if(!r)return e;r.photoBase64&&e.push(r.photoBase64);for(let t=1;t<=Vk;t++)r[`photo_${t}`]&&e.push(r[`photo_${t}`]);return e}function Gk(){const[r,e]=I.useState([]),[t,i]=I.useState(!0),[o,l]=I.useState("all"),[u,f]=I.useState(null),[m,g]=I.useState({}),[w,_]=I.useState({}),[y,T]=I.useState(7);I.useEffect(()=>{const j=ve(_e,Wk);return En(j,H=>{if(H.exists()){const ce=H.val();ce.vitrineSoldDays!==void 0&&T(ce.vitrineSoldDays),ce.theme&&zh(ce.theme)}})},[]),I.useEffect(()=>{const j=ve(_e,zk);return En(j,H=>{const ce=[];H.exists()&&H.forEach(ae=>{const J={id:ae.key,...ae.val()};(J.status==="inventory"||J.status==="consignment"||Hk(J,y))&&ce.push(J)}),ce.sort((ae,J)=>(J.createdAt||0)-(ae.createdAt||0)),e(ce),i(!1),ce.forEach(async ae=>{if(ae.hasPhoto&&!ae.photoBase64)try{const J=ve(_e,`${Bk}/${ae.id}`),ue=await fn(J);if(ue.exists()){const ge=qk(ue.val());g(Ee=>({...Ee,[ae.id]:ge}))}}catch(J){console.error("Erreur photo:",J)}})})},[y]);const R=[...new Set(r.map(j=>j.category).filter(Boolean))].sort(),O=o==="all"?r:r.filter(j=>j.category===o),D=j=>{u===j?f(null):(f(j),_(K=>({...K,[j]:0})))},ee=j=>m[j.id]&&m[j.id].length>0?m[j.id]:j.photoBase64?[j.photoBase64]:[];return t?d.jsx("div",{className:"vitrine",children:d.jsxs("div",{className:"vitrine-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Chargement du catalogue..."})]})}):d.jsxs("div",{className:"vitrine",children:[d.jsxs("header",{className:"vitrine-header",children:[d.jsx("img",{src:"/pwa-192x192.png",alt:"Logo",className:"vitrine-logo"}),d.jsxs("div",{children:[d.jsx("h1",{className:"vitrine-title",children:" L'Atelier du Loft"}),d.jsx("p",{className:"vitrine-subtitle-name",children:"Jose Bourgouin"}),d.jsxs("p",{className:"vitrine-subtitle",children:[O.length," article",O.length>1?"s":""," disponible",O.length>1?"s":""]})]})]}),R.length>0&&d.jsxs("div",{className:"vitrine-filters",children:[d.jsx("button",{className:`vitrine-filter-btn ${o==="all"?"active":""}`,onClick:()=>l("all"),children:"Tous"}),R.map(j=>d.jsx("button",{className:`vitrine-filter-btn ${o===j?"active":""}`,onClick:()=>l(j),children:j},j))]}),O.length===0?d.jsxs("div",{className:"vitrine-empty",children:[d.jsx("p",{children:""}),d.jsx("p",{children:"Aucun article disponible pour le moment"})]}):d.jsx("div",{className:"vitrine-grid",children:O.map(j=>{const K=u===j.id,H=ee(j),ce=w[j.id]||0;return d.jsxs("div",{className:`vitrine-card ${K?"expanded":""}`,onClick:()=>D(j.id),children:[!K&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"vitrine-card-photo",children:[H.length>0?d.jsx("img",{src:H[0],alt:j.description}):j.thumbnail?d.jsx("img",{src:j.thumbnail,alt:j.description,className:"vitrine-thumb-blur"}):d.jsx("div",{className:"vitrine-card-no-photo",children:""}),j.status==="sold"&&d.jsx("div",{className:"vitrine-sold-overlay",children:d.jsx("span",{children:"VENDU"})}),H.length>1&&d.jsxs("span",{className:"vitrine-photo-count",children:[" ",H.length]})]}),d.jsxs("div",{className:"vitrine-card-info",children:[d.jsx("p",{className:"vitrine-card-desc",children:j.description||"Sans description"}),d.jsxs("p",{className:"vitrine-card-price",children:[nv(j.price)," $"]}),j.category&&d.jsx("span",{className:"vitrine-card-category",children:j.category})]})]}),K&&d.jsxs("div",{className:"vitrine-detail",onClick:ae=>ae.stopPropagation(),children:[d.jsx("button",{className:"vitrine-detail-close",onClick:()=>f(null),children:" Fermer"}),H.length>0&&d.jsxs("div",{className:"vitrine-gallery",children:[d.jsxs("div",{className:"vitrine-gallery-main",children:[d.jsx("img",{src:H[ce],alt:j.description}),j.status==="sold"&&d.jsx("div",{className:"vitrine-sold-overlay",children:d.jsx("span",{children:"VENDU"})})]}),H.length>1&&d.jsx("div",{className:"vitrine-gallery-thumbs",children:H.map((ae,J)=>d.jsx("div",{className:`vitrine-gallery-thumb ${ce===J?"active":""}`,onClick:ue=>{ue.stopPropagation(),_(ge=>({...ge,[j.id]:J}))},children:d.jsx("img",{src:ae,alt:`Photo ${J+1}`})},J))})]}),d.jsxs("div",{className:"vitrine-detail-info",children:[d.jsx("h3",{className:"vitrine-detail-title",children:j.description||"Sans titre"}),d.jsxs("p",{className:"vitrine-detail-price",children:[nv(j.price)," $"]}),d.jsxs("p",{className:"vitrine-detail-id",children:["#",j.uniqueId]}),j.category&&d.jsx("span",{className:"vitrine-card-category",children:j.category}),j.longDescription&&d.jsx("div",{className:"vitrine-detail-description",children:d.jsx("p",{children:j.longDescription})}),j.status==="consignment"&&j.consignmentStore&&d.jsxs("p",{className:"vitrine-detail-consignment",children:[" Disponible chez: ",j.consignmentStore]}),j.itemDate&&d.jsxs("p",{className:"vitrine-detail-date",children:[" Cr le ",j.itemDate]})]})]})]},j.id)})}),d.jsxs("footer",{className:"vitrine-footer",children:[d.jsx("p",{children:" L'Atelier du Loft  Jose Bourgouin"}),d.jsx("p",{className:"vitrine-footer-cta",children:"crivez-moi si quelque chose vous intresse!"}),d.jsx("a",{href:"mailto:Jose.Bourgouin@gmail.com",children:" Jose.Bourgouin@gmail.com"})]})]})}const My="payments",Kk="lacroix.jeanmarc@gmail.com";function sl(r){var e;return((e=r==null?void 0:r.email)==null?void 0:e.toLowerCase())===Kk}async function Qk(r,e){var l,u;const t={tenantId:r,amount:parseFloat(e.amount)||0,senderName:((l=e.senderName)==null?void 0:l.trim())||"",referenceNumber:((u=e.referenceNumber)==null?void 0:u.trim())||"",paymentDate:e.paymentDate||new Date().toISOString().split("T")[0],planType:e.planType||"monthly",action:e.action||"activation",recordedAt:Date.now()},i=ve(_e,My),o=Gl(i);return await qe(o,t),await qe(ve(_e,`tenants/${r}/lastPayment`),t),{id:o.key,...t}}function Yk(r){const e=ve(_e,My);return En(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(u.recordedAt||0)-(l.recordedAt||0)),r(o)})}function Jk(r){const e=ve(_e,"tenants");return En(e,i=>{const o=[];i.exists()&&i.forEach(l=>{var f;const u=(f=l.val())==null?void 0:f.profile;u&&o.push({id:l.key,...u})}),o.sort((l,u)=>(u.createdAt||0)-(l.createdAt||0)),r(o)})}async function Xk(r,e="monthly"){const t=new Date,i=t.toISOString().split("T")[0];let o;if(e==="yearly"){const u=new Date(t);u.setFullYear(u.getFullYear()+1),o=u.toISOString().split("T")[0]}else{const u=new Date(t);u.setMonth(u.getMonth()+1),o=u.toISOString().split("T")[0]}const l={plan:"artisan",planType:e,startDate:i,expiryDate:o};await qe(ve(_e,`tenants/${r}/profile`),l)}async function Zk(r,e=null){const t=ve(_e,`tenants/${r}/profile`),i=await fn(t);if(!i.exists())return;const o=i.val(),l=e||o.planType||"monthly",u=o.expiryDate?new Date(o.expiryDate):new Date,f=new Date,m=u>f?u:f;let g;if(l==="yearly"){const w=new Date(m);w.setFullYear(w.getFullYear()+1),g=w.toISOString().split("T")[0]}else{const w=new Date(m);w.setMonth(w.getMonth()+1),g=w.toISOString().split("T")[0]}await qe(t,{plan:"artisan",planType:l,expiryDate:g})}async function eP(r){await qe(ve(_e,`tenants/${r}/profile`),{plan:"free",planType:null,startDate:null,expiryDate:null})}async function tP(r){var t,i,o,l;const e=ve(_e,`tenants/${r.uid||Gl(ve(_e,"tenants")).key}/profile`);await qe(e,{businessName:((t=r.businessName)==null?void 0:t.trim())||"",ownerName:((i=r.ownerName)==null?void 0:i.trim())||"",email:((o=r.email)==null?void 0:o.trim())||"",prefix:((l=r.prefix)==null?void 0:l.toUpperCase())||"ART",slug:r.slug||"",plan:r.plan||"free",notes:r.notes||"",createdAt:Date.now(),updatedAt:Date.now()})}async function nP(r,e){const t=ve(_e,`tenants/${r}/profile`);await qe(t,{...e,updatedAt:Date.now()})}async function rP(r){const e=ve(_e,`tenants/${r}`);await Cl(e)}function rv(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function sP(){const{user:r}=Oo(),[e,t]=I.useState([]),[i,o]=I.useState([]),[l,u]=I.useState(!1),[f,m]=I.useState({businessName:"",ownerName:"",email:"",phone:""}),[g,w]=I.useState(null),[_,y]=I.useState(null),[T,R]=I.useState(""),[O,D]=I.useState(!1),[ee,j]=I.useState(null),[K,H]=I.useState({amount:"",senderName:"",referenceNumber:"",paymentDate:new Date().toISOString().split("T")[0]}),[ce,ae]=I.useState(!1);if(I.useEffect(()=>sl(r)?Jk(t):void 0,[r]),I.useEffect(()=>sl(r)?Yk(o):void 0,[r]),!sl(r))return d.jsxs("div",{className:"page admin-page",children:[d.jsx("h2",{className:"page-title",children:" Accs refus"}),d.jsx("p",{style:{textAlign:"center",color:"var(--text-muted)"},children:"Cette page est rserve  l'administrateur."})]});const J=e.length,ue=e.filter(b=>b.plan==="artisan").length,ge=e.filter(b=>b.plan==="free").length,Ee=e.reduce((b,Y)=>Y.plan!=="artisan"?b:Y.planType==="yearly"?b+100/12:b+12.99,0),Le=e.filter(b=>{if(b.plan!=="artisan"||!b.expiryDate)return!1;const Y=Math.ceil((new Date(b.expiryDate)-new Date)/(1e3*60*60*24));return Y<=7&&Y>0}),ze=e.filter(b=>b.plan!=="artisan"||!b.expiryDate?!1:new Date(b.expiryDate)<new Date),ke=b=>i.filter(Y=>Y.tenantId===b),Ge=(b,Y,E,z,V)=>{const q=V==="yearly"?"100.00":"12.99";j({tenantId:b,tenantName:Y,action:z,planType:V}),H({amount:q,senderName:E||"",referenceNumber:"",paymentDate:new Date().toISOString().split("T")[0]}),D(!0)},it=async()=>{if(!K.referenceNumber.trim()){alert("Le numro de rfrence Interac est obligatoire.");return}if(!K.amount){alert("Le montant est obligatoire.");return}ae(!0);try{const{tenantId:b,action:Y,planType:E}=ee;await Qk(b,{...K,planType:E,action:Y==="activate"?"activation":"renewal"}),Y==="activate"?await Xk(b,E):await Zk(b,E),D(!1),j(null)}catch(b){console.error("Erreur:",b),alert("Erreur lors du traitement. Ressayez.")}finally{ae(!1)}},Me=async()=>{!f.businessName.trim()||!f.ownerName.trim()||(await tP(f),m({businessName:"",ownerName:"",email:"",phone:""}),u(!1))},Ne=async b=>{confirm("Rtrograder au plan gratuit? Le client perdra les fonctions premium.")&&await eP(b)},G=async b=>{confirm(`Supprimer "${b.businessName}" ? Cette action est irrversible.`)&&(await rP(b.id),w(null))},ne=async b=>{await nP(b,{notes:T}),y(null)},Q=b=>b?new Date(b).toLocaleDateString("fr-CA"):"",N=b=>b?Math.ceil((new Date(b)-new Date)/(1e3*60*60*24)):null,M=b=>b.plan==="free"?"plan-badge-free":b.expiryDate&&new Date(b.expiryDate)<new Date?"plan-badge-expired":"plan-badge-artisan",pe=b=>b.plan==="free"?" Dcouverte":b.expiryDate&&new Date(b.expiryDate)<new Date?" Expir":" Artisan";return d.jsxs("div",{className:"page admin-page",children:[d.jsx("h2",{className:"page-title",children:" Admin  Vitrine Artisan"}),d.jsxs("div",{className:"admin-stats",children:[d.jsxs("div",{className:"admin-stat-card",children:[d.jsx("span",{className:"admin-stat-number",children:J}),d.jsx("span",{className:"admin-stat-label",children:"Artisans"})]}),d.jsxs("div",{className:"admin-stat-card stat-paying",children:[d.jsx("span",{className:"admin-stat-number",children:ue}),d.jsx("span",{className:"admin-stat-label",children:"Payants"})]}),d.jsxs("div",{className:"admin-stat-card stat-free",children:[d.jsx("span",{className:"admin-stat-number",children:ge}),d.jsx("span",{className:"admin-stat-label",children:"Gratuits"})]}),d.jsxs("div",{className:"admin-stat-card stat-revenue",children:[d.jsxs("span",{className:"admin-stat-number",children:[rv(Ee)," $"]}),d.jsx("span",{className:"admin-stat-label",children:"Rev./mois"})]})]}),(Le.length>0||ze.length>0)&&d.jsxs("div",{className:"admin-alerts",children:[ze.length>0&&d.jsxs("div",{className:"admin-alert admin-alert-danger",children:[" ",ze.length," plan(s) expir(s)  action requise"]}),Le.length>0&&d.jsxs("div",{className:"admin-alert admin-alert-warning",children:[" ",Le.length," plan(s) expire(nt) dans 7 jours"]})]}),d.jsxs("div",{className:"admin-section",children:[d.jsxs("div",{className:"admin-section-header",children:[d.jsx("h3",{children:" Artisans"}),d.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{u(!l),m({businessName:"",ownerName:"",email:"",phone:""})},children:" Nouveau client"})]}),l&&d.jsxs("div",{className:"admin-add-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nom de l'entreprise"}),d.jsx("input",{type:"text",value:f.businessName,onChange:b=>m(Y=>({...Y,businessName:b.target.value})),className:"form-input",placeholder:"Ex: Les Crations de Marie",autoFocus:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nom du propritaire"}),d.jsx("input",{type:"text",value:f.ownerName,onChange:b=>m(Y=>({...Y,ownerName:b.target.value})),className:"form-input",placeholder:"Ex: Marie Tremblay"})]}),d.jsxs("div",{className:"store-form-row",children:[d.jsxs("div",{className:"form-group",style:{flex:1},children:[d.jsx("label",{className:"form-label",children:"Courriel"}),d.jsx("input",{type:"email",value:f.email,onChange:b=>m(Y=>({...Y,email:b.target.value})),className:"form-input",placeholder:"marie@gmail.com"})]}),d.jsxs("div",{className:"form-group",style:{flex:1},children:[d.jsx("label",{className:"form-label",children:"Tlphone"}),d.jsx("input",{type:"tel",value:f.phone,onChange:b=>m(Y=>({...Y,phone:b.target.value})),className:"form-input",placeholder:"819-555-1234"})]})]}),d.jsxs("div",{className:"store-edit-actions",children:[d.jsx("button",{className:"btn btn-small btn-save",onClick:Me,disabled:!f.businessName.trim()||!f.ownerName.trim(),children:" Ajouter"}),d.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>u(!1),children:"Annuler"})]})]}),e.length===0?d.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",textAlign:"center",padding:"20px 0"},children:"Aucun artisan inscrit"}):d.jsx("div",{className:"admin-tenants-list",children:e.map(b=>{const Y=g===b.id,E=N(b.expiryDate),z=b.plan==="artisan"&&E!==null&&E<=0,V=ke(b.id);return d.jsxs("div",{className:`admin-tenant-card ${Y?"expanded":""} ${z?"tenant-expired":""}`,onClick:()=>w(Y?null:b.id),children:[d.jsxs("div",{className:"admin-tenant-summary",children:[d.jsxs("div",{className:"admin-tenant-info",children:[d.jsx("span",{className:"admin-tenant-business",children:b.businessName}),d.jsx("span",{className:"admin-tenant-owner",children:b.ownerName})]}),d.jsx("span",{className:`admin-plan-badge ${M(b)}`,children:pe(b)})]}),Y&&d.jsxs("div",{className:"admin-tenant-details",onClick:q=>q.stopPropagation(),children:[d.jsxs("div",{className:"admin-detail-grid",children:[d.jsxs("div",{className:"admin-detail-item",children:[d.jsx("span",{className:"admin-detail-label",children:" Courriel"}),d.jsx("span",{className:"admin-detail-value",children:b.email||""})]}),d.jsxs("div",{className:"admin-detail-item",children:[d.jsx("span",{className:"admin-detail-label",children:" Tlphone"}),d.jsx("span",{className:"admin-detail-value",children:b.phone||""})]}),d.jsxs("div",{className:"admin-detail-item",children:[d.jsx("span",{className:"admin-detail-label",children:" Inscrit le"}),d.jsx("span",{className:"admin-detail-value",children:Q(b.createdAt?new Date(b.createdAt).toISOString():null)})]}),b.plan==="artisan"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"admin-detail-item",children:[d.jsx("span",{className:"admin-detail-label",children:" Type"}),d.jsx("span",{className:"admin-detail-value",children:b.planType==="yearly"?"Annuel (100$/an)":"Mensuel (12.99$/mois)"})]}),d.jsxs("div",{className:"admin-detail-item",children:[d.jsx("span",{className:"admin-detail-label",children:" Dbut"}),d.jsx("span",{className:"admin-detail-value",children:Q(b.startDate)})]}),d.jsxs("div",{className:"admin-detail-item",children:[d.jsx("span",{className:"admin-detail-label",children:" Expiration"}),d.jsxs("span",{className:`admin-detail-value ${z?"text-danger":E<=7?"text-warning":""}`,children:[Q(b.expiryDate),E!==null&&d.jsx("span",{className:"admin-days-badge",children:z?`Expir (${Math.abs(E)}j)`:`${E}j`})]})]})]})]}),V.length>0&&d.jsxs("div",{className:"admin-payments-history",children:[d.jsx("p",{className:"admin-payments-title",children:" Historique des paiements"}),V.map(q=>d.jsxs("div",{className:"admin-payment-row",children:[d.jsxs("div",{className:"admin-payment-info",children:[d.jsxs("span",{className:"admin-payment-amount",children:[rv(q.amount)," $"]}),d.jsxs("span",{className:"admin-payment-type",children:[q.action==="activation"?" Activation":" Renouvellement","  ",q.planType==="yearly"?"Annuel":"Mensuel"]})]}),d.jsxs("div",{className:"admin-payment-details",children:[d.jsxs("span",{children:[" ",Q(q.paymentDate)]}),d.jsxs("span",{children:[" ",q.senderName]}),d.jsxs("span",{children:[" ",q.referenceNumber]})]})]},q.id))]}),d.jsx("div",{className:"admin-notes",children:_===b.id?d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:" Notes"}),d.jsx("textarea",{value:T,onChange:q=>R(q.target.value),className:"form-input form-textarea",rows:"3",placeholder:"Notes sur ce client..."}),d.jsxs("div",{className:"store-edit-actions",style:{marginTop:"6px"},children:[d.jsx("button",{className:"btn btn-small btn-save",onClick:()=>ne(b.id),children:""}),d.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>y(null),children:"Annuler"})]})]}):d.jsxs("div",{className:"admin-notes-display",onClick:()=>{y(b.id),R(b.notes||"")},children:[d.jsx("span",{className:"admin-detail-label",children:" Notes"}),d.jsx("p",{children:b.notes||"Cliquez pour ajouter une note..."})]})}),d.jsxs("div",{className:"admin-tenant-actions",children:[b.plan==="free"?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"btn btn-small btn-upgrade",onClick:()=>Ge(b.id,b.businessName,b.ownerName,"activate","monthly"),children:" Activer mensuel"}),d.jsx("button",{className:"btn btn-small btn-upgrade-yearly",onClick:()=>Ge(b.id,b.businessName,b.ownerName,"activate","yearly"),children:" Activer annuel"})]}):d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"btn btn-small btn-save",onClick:()=>Ge(b.id,b.businessName,b.ownerName,"renew",b.planType),children:" Renouveler"}),d.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>Ne(b.id),children:" Plan gratuit"})]}),d.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>G(b),children:" Supprimer"})]})]})]},b.id)})})]}),O&&ee&&d.jsx("div",{className:"modal-overlay",onClick:()=>!ce&&D(!1),children:d.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),style:{maxWidth:"440px"},children:[d.jsxs("h3",{children:[""," ",ee.action==="activate"?"Activer":"Renouveler","  ",ee.tenantName]}),d.jsx("div",{className:"upgrade-modal-plan-selected",children:ee.planType==="yearly"?" Plan annuel  100,00 $ / an":" Plan mensuel  12,99 $ / mois"}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("p",{style:{fontSize:"0.9rem",color:"#333",marginBottom:"12px",fontWeight:600},children:"Informations du virement Interac reu :"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Montant reu ($) *"}),d.jsx("input",{type:"number",value:K.amount,onChange:b=>H(Y=>({...Y,amount:b.target.value})),className:"form-input",step:"0.01",min:"0",inputMode:"decimal",style:{color:"#333",backgroundColor:"#fff"}})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Envoy par *"}),d.jsx("input",{type:"text",value:K.senderName,onChange:b=>H(Y=>({...Y,senderName:b.target.value})),className:"form-input",placeholder:"Nom sur le virement",style:{color:"#333",backgroundColor:"#fff"}})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Numro de rfrence Interac *"}),d.jsx("input",{type:"text",value:K.referenceNumber,onChange:b=>H(Y=>({...Y,referenceNumber:b.target.value})),className:"form-input",placeholder:"Ex: C1A929q3ADx4",style:{color:"#333",backgroundColor:"#fff"}})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Date du paiement"}),d.jsx("input",{type:"date",value:K.paymentDate,onChange:b=>H(Y=>({...Y,paymentDate:b.target.value})),className:"form-input",style:{color:"#333",backgroundColor:"#fff"}})]})]}),d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsx("button",{className:"btn btn-upgrade btn-full",onClick:it,disabled:ce,style:{flex:1},children:ce?"Traitement...":ee.action==="activate"?" Confirmer et activer":" Confirmer et renouveler"}),d.jsx("button",{className:"btn btn-secondary",onClick:()=>D(!1),disabled:ce,style:{flex:0},children:"Annuler"})]})]})})]})}function iP(){const{loginWithGoogle:r,sendMagicLink:e}=Oo(),[t,i]=I.useState("main"),[o,l]=I.useState(""),[u,f]=I.useState(""),[m,g]=I.useState(""),[w,_]=I.useState(!1),y=async O=>{if(O.preventDefault(),f(""),g(""),!o.trim()){f("Entrez votre adresse courriel.");return}_(!0);try{await e(o),g("Un lien de connexion a t envoy  "+o+". Vrifiez votre bote de rception (et vos courriels indsirables).")}catch(D){D.code==="auth/invalid-email"?f("Adresse courriel invalide."):D.code==="auth/too-many-requests"?f("Trop de tentatives. Ressayez plus tard."):f("Erreur de connexion. Ressayez.")}finally{_(!1)}},T=async()=>{f(""),_(!0);try{await r()}catch{f("Erreur de connexion avec Google.")}finally{_(!1)}},R=O=>{i(O),f(""),g("")};return d.jsx("div",{className:"login-page",children:d.jsxs("div",{className:"login-card",children:[d.jsx("div",{className:"login-logo",children:""}),d.jsx("h1",{className:"login-title",children:"Vitrine Artisan"}),d.jsxs("p",{className:"login-subtitle",children:["Gestion d'inventaire pour",d.jsx("br",{}),"les artisans du Qubec"]}),d.jsxs("button",{onClick:T,className:"btn-google-login",disabled:w,children:[d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]}),d.jsx("div",{className:"login-divider",children:d.jsx("span",{children:"ou"})}),t==="main"&&d.jsx("button",{onClick:()=>R("magiclink"),className:"btn-magic-link",disabled:w,children:" Recevoir un lien de connexion par courriel"}),t==="magiclink"&&d.jsxs("form",{onSubmit:y,className:"login-form",children:[d.jsx("p",{className:"login-reset-info",children:"Entrez votre courriel. Vous recevrez un lien  cliquez dessus et vous serez connect. Aucun mot de passe ncessaire!"}),d.jsx("div",{className:"form-group",children:d.jsx("input",{type:"email",value:o,onChange:O=>l(O.target.value),className:"login-input",placeholder:"Adresse courriel",required:!0,autoComplete:"email",autoFocus:!0})}),d.jsx("button",{type:"submit",className:"btn btn-primary btn-login",disabled:w,children:w?"Envoi...":" Envoyer le lien de connexion"}),d.jsx("div",{className:"login-links",children:d.jsx("button",{type:"button",className:"link-btn",onClick:()=>R("main"),children:" Retour"})})]}),u&&d.jsx("p",{className:"login-error",children:u}),m&&d.jsx("p",{className:"login-success",children:m})]})})}const oP="stockduloft/settings";function aP(){var i;const{user:r,logout:e}=Oo(),t=as();return I.useEffect(()=>{const o=ve(_e,`${oP}/theme`);return En(o,u=>{u.exists()&&zh(u.val())})},[]),t.pathname==="/vitrine"?d.jsx(Gk,{}):r?d.jsxs("div",{className:"app",children:[d.jsx("header",{className:"app-header",children:d.jsxs("div",{className:"header-content",children:[d.jsxs("h1",{className:"app-title",children:[d.jsx("span",{className:"title-icon",children:""})," Stock du Loft"]}),d.jsxs("div",{className:"header-user",children:[d.jsx("span",{className:"user-name",children:(i=r.displayName)==null?void 0:i.split(" ")[0]}),d.jsx("button",{onClick:e,className:"btn-logout",title:"Dconnexion",children:""})]})]})}),d.jsx("main",{className:"app-main",children:d.jsxs(jx,{children:[d.jsx(Yr,{path:"/",element:d.jsx(jk,{})}),d.jsx(Yr,{path:"/add",element:d.jsx(Mk,{})}),d.jsx(Yr,{path:"/sale",element:d.jsx(Fk,{})}),d.jsx(Yr,{path:"/about",element:d.jsx($k,{})}),d.jsx(Yr,{path:"/admin",element:d.jsx(sP,{})}),d.jsx(Yr,{path:"*",element:d.jsx(Rx,{to:"/",replace:!0})})]})}),d.jsxs("nav",{className:"bottom-nav",children:[d.jsxs(Gi,{to:"/",end:!0,className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[d.jsx("span",{className:"nav-icon",children:""}),d.jsx("span",{className:"nav-label",children:"Inventaire"})]}),d.jsxs(Gi,{to:"/sale",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[d.jsx("span",{className:"nav-icon",children:""}),d.jsx("span",{className:"nav-label",children:"Vente"})]}),d.jsxs(Gi,{to:"/add",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[d.jsx("span",{className:"nav-icon",children:""}),d.jsx("span",{className:"nav-label",children:"Ajouter"})]}),d.jsxs(Gi,{to:"/about",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[d.jsx("span",{className:"nav-icon",children:""}),d.jsx("span",{className:"nav-label",children:"Info"})]}),sl(r)&&d.jsxs(Gi,{to:"/admin",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[d.jsx("span",{className:"nav-icon",children:""}),d.jsx("span",{className:"nav-label",children:"Admin"})]})]})]}):d.jsx(iP,{})}function lP(){return d.jsx(gk,{children:d.jsx(aP,{})})}Bw.createRoot(document.getElementById("root")).render(d.jsx(iv.StrictMode,{children:d.jsx(zx,{children:d.jsx(lP,{})})}));
