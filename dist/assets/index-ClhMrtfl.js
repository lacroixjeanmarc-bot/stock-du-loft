function w0(r,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Kg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ou={exports:{}},Wi={},Lu={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function x0(){if(_m)return _e;_m=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=_&&I[_]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,M={};function D(I,L,ce){this.props=I,this.context=L,this.refs=M,this.updater=ce||b}D.prototype.isReactComponent={},D.prototype.setState=function(I,L){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,L,"setState")},D.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function X(){}X.prototype=D.prototype;function j(I,L,ce){this.props=I,this.context=L,this.refs=M,this.updater=ce||b}var G=j.prototype=new X;G.constructor=j,A(G,D.prototype),G.isPureReactComponent=!0;var V=Array.isArray,Q=Object.prototype.hasOwnProperty,ne={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function me(I,L,ce){var N,$={},S=null,K=null;if(L!=null)for(N in L.ref!==void 0&&(K=L.ref),L.key!==void 0&&(S=""+L.key),L)Q.call(L,N)&&!Z.hasOwnProperty(N)&&($[N]=L[N]);var ee=arguments.length-2;if(ee===1)$.children=ce;else if(1<ee){for(var ie=Array(ee),le=0;le<ee;le++)ie[le]=arguments[le+2];$.children=ie}if(I&&I.defaultProps)for(N in ee=I.defaultProps,ee)$[N]===void 0&&($[N]=ee[N]);return{$$typeof:r,type:I,key:S,ref:K,props:$,_owner:ne.current}}function Ee(I,L){return{$$typeof:r,type:I.type,key:L,ref:I.ref,props:I.props,_owner:I._owner}}function Ie(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function be(I){var L={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ce){return L[ce]})}var We=/\/+/g;function Ue(I,L){return typeof I=="object"&&I!==null&&I.key!=null?be(""+I.key):L.toString(36)}function $e(I,L,ce,N,$){var S=typeof I;(S==="undefined"||S==="boolean")&&(I=null);var K=!1;if(I===null)K=!0;else switch(S){case"string":case"number":K=!0;break;case"object":switch(I.$$typeof){case r:case e:K=!0}}if(K)return K=I,$=$(K),I=N===""?"."+Ue(K,0):N,V($)?(ce="",I!=null&&(ce=I.replace(We,"$&/")+"/"),$e($,L,ce,"",function(le){return le})):$!=null&&(Ie($)&&($=Ee($,ce+(!$.key||K&&K.key===$.key?"":(""+$.key).replace(We,"$&/")+"/")+I)),L.push($)),1;if(K=0,N=N===""?".":N+":",V(I))for(var ee=0;ee<I.length;ee++){S=I[ee];var ie=N+Ue(S,ee);K+=$e(S,L,ce,ie,$)}else if(ie=y(I),typeof ie=="function")for(I=ie.call(I),ee=0;!(S=I.next()).done;)S=S.value,ie=N+Ue(S,ee++),K+=$e(S,L,ce,ie,$);else if(S==="object")throw L=String(I),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return K}function Ye(I,L,ce){if(I==null)return I;var N=[],$=0;return $e(I,N,"","",function(S){return L.call(ce,S,$++)}),N}function Je(I){if(I._status===-1){var L=I._result;L=L(),L.then(function(ce){(I._status===0||I._status===-1)&&(I._status=1,I._result=ce)},function(ce){(I._status===0||I._status===-1)&&(I._status=2,I._result=ce)}),I._status===-1&&(I._status=0,I._result=L)}if(I._status===1)return I._result.default;throw I._result}var Ce={current:null},H={transition:null},ae={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:H,ReactCurrentOwner:ne};function q(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:Ye,forEach:function(I,L,ce){Ye(I,function(){L.apply(this,arguments)},ce)},count:function(I){var L=0;return Ye(I,function(){L++}),L},toArray:function(I){return Ye(I,function(L){return L})||[]},only:function(I){if(!Ie(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},_e.Component=D,_e.Fragment=n,_e.Profiler=o,_e.PureComponent=j,_e.StrictMode=i,_e.Suspense=m,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,_e.act=q,_e.cloneElement=function(I,L,ce){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var N=A({},I.props),$=I.key,S=I.ref,K=I._owner;if(L!=null){if(L.ref!==void 0&&(S=L.ref,K=ne.current),L.key!==void 0&&($=""+L.key),I.type&&I.type.defaultProps)var ee=I.type.defaultProps;for(ie in L)Q.call(L,ie)&&!Z.hasOwnProperty(ie)&&(N[ie]=L[ie]===void 0&&ee!==void 0?ee[ie]:L[ie])}var ie=arguments.length-2;if(ie===1)N.children=ce;else if(1<ie){ee=Array(ie);for(var le=0;le<ie;le++)ee[le]=arguments[le+2];N.children=ee}return{$$typeof:r,type:I.type,key:$,ref:S,props:N,_owner:K}},_e.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:l,_context:I},I.Consumer=I},_e.createElement=me,_e.createFactory=function(I){var L=me.bind(null,I);return L.type=I,L},_e.createRef=function(){return{current:null}},_e.forwardRef=function(I){return{$$typeof:p,render:I}},_e.isValidElement=Ie,_e.lazy=function(I){return{$$typeof:w,_payload:{_status:-1,_result:I},_init:Je}},_e.memo=function(I,L){return{$$typeof:g,type:I,compare:L===void 0?null:L}},_e.startTransition=function(I){var L=H.transition;H.transition={};try{I()}finally{H.transition=L}},_e.unstable_act=q,_e.useCallback=function(I,L){return Ce.current.useCallback(I,L)},_e.useContext=function(I){return Ce.current.useContext(I)},_e.useDebugValue=function(){},_e.useDeferredValue=function(I){return Ce.current.useDeferredValue(I)},_e.useEffect=function(I,L){return Ce.current.useEffect(I,L)},_e.useId=function(){return Ce.current.useId()},_e.useImperativeHandle=function(I,L,ce){return Ce.current.useImperativeHandle(I,L,ce)},_e.useInsertionEffect=function(I,L){return Ce.current.useInsertionEffect(I,L)},_e.useLayoutEffect=function(I,L){return Ce.current.useLayoutEffect(I,L)},_e.useMemo=function(I,L){return Ce.current.useMemo(I,L)},_e.useReducer=function(I,L,ce){return Ce.current.useReducer(I,L,ce)},_e.useRef=function(I){return Ce.current.useRef(I)},_e.useState=function(I){return Ce.current.useState(I)},_e.useSyncExternalStore=function(I,L,ce){return Ce.current.useSyncExternalStore(I,L,ce)},_e.useTransition=function(){return Ce.current.useTransition()},_e.version="18.3.1",_e}var ym;function bd(){return ym||(ym=1,Lu.exports=x0()),Lu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function S0(){if(wm)return Wi;wm=1;var r=bd(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(p,m,g){var w,_={},y=null,b=null;g!==void 0&&(y=""+g),m.key!==void 0&&(y=""+m.key),m.ref!==void 0&&(b=m.ref);for(w in m)i.call(m,w)&&!l.hasOwnProperty(w)&&(_[w]=m[w]);if(p&&p.defaultProps)for(w in m=p.defaultProps,m)_[w]===void 0&&(_[w]=m[w]);return{$$typeof:e,type:p,key:y,ref:b,props:_,_owner:o.current}}return Wi.Fragment=n,Wi.jsx=u,Wi.jsxs=u,Wi}var xm;function C0(){return xm||(xm=1,Ou.exports=S0()),Ou.exports}var h=C0(),k=bd();const Qg=Kg(k),E0=w0({__proto__:null,default:Qg},[k]);var Ua={},Mu={exports:{}},Ot={},Fu={exports:{}},Uu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function N0(){return Sm||(Sm=1,(function(r){function e(H,ae){var q=H.length;H.push(ae);e:for(;0<q;){var I=q-1>>>1,L=H[I];if(0<o(L,ae))H[I]=ae,H[q]=L,q=I;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ae=H[0],q=H.pop();if(q!==ae){H[0]=q;e:for(var I=0,L=H.length,ce=L>>>1;I<ce;){var N=2*(I+1)-1,$=H[N],S=N+1,K=H[S];if(0>o($,q))S<L&&0>o(K,$)?(H[I]=K,H[S]=q,I=S):(H[I]=$,H[N]=q,I=N);else if(S<L&&0>o(K,q))H[I]=K,H[S]=q,I=S;else break e}}return ae}function o(H,ae){var q=H.sortIndex-ae.sortIndex;return q!==0?q:H.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,p=u.now();r.unstable_now=function(){return u.now()-p}}var m=[],g=[],w=1,_=null,y=3,b=!1,A=!1,M=!1,D=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(H){for(var ae=n(g);ae!==null;){if(ae.callback===null)i(g);else if(ae.startTime<=H)i(g),ae.sortIndex=ae.expirationTime,e(m,ae);else break;ae=n(g)}}function V(H){if(M=!1,G(H),!A)if(n(m)!==null)A=!0,Je(Q);else{var ae=n(g);ae!==null&&Ce(V,ae.startTime-H)}}function Q(H,ae){A=!1,M&&(M=!1,X(me),me=-1),b=!0;var q=y;try{for(G(ae),_=n(m);_!==null&&(!(_.expirationTime>ae)||H&&!be());){var I=_.callback;if(typeof I=="function"){_.callback=null,y=_.priorityLevel;var L=I(_.expirationTime<=ae);ae=r.unstable_now(),typeof L=="function"?_.callback=L:_===n(m)&&i(m),G(ae)}else i(m);_=n(m)}if(_!==null)var ce=!0;else{var N=n(g);N!==null&&Ce(V,N.startTime-ae),ce=!1}return ce}finally{_=null,y=q,b=!1}}var ne=!1,Z=null,me=-1,Ee=5,Ie=-1;function be(){return!(r.unstable_now()-Ie<Ee)}function We(){if(Z!==null){var H=r.unstable_now();Ie=H;var ae=!0;try{ae=Z(!0,H)}finally{ae?Ue():(ne=!1,Z=null)}}else ne=!1}var Ue;if(typeof j=="function")Ue=function(){j(We)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,Ye=$e.port2;$e.port1.onmessage=We,Ue=function(){Ye.postMessage(null)}}else Ue=function(){D(We,0)};function Je(H){Z=H,ne||(ne=!0,Ue())}function Ce(H,ae){me=D(function(){H(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){A||b||(A=!0,Je(Q))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return n(m)},r.unstable_next=function(H){switch(y){case 1:case 2:case 3:var ae=3;break;default:ae=y}var q=y;y=ae;try{return H()}finally{y=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=y;y=H;try{return ae()}finally{y=q}},r.unstable_scheduleCallback=function(H,ae,q){var I=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?I+q:I):q=I,H){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=q+L,H={id:w++,callback:ae,priorityLevel:H,startTime:q,expirationTime:L,sortIndex:-1},q>I?(H.sortIndex=q,e(g,H),n(m)===null&&H===n(g)&&(M?(X(me),me=-1):M=!0,Ce(V,q-I))):(H.sortIndex=L,e(m,H),A||b||(A=!0,Je(Q))),H},r.unstable_shouldYield=be,r.unstable_wrapCallback=function(H){var ae=y;return function(){var q=y;y=ae;try{return H.apply(this,arguments)}finally{y=q}}}})(Uu)),Uu}var Cm;function I0(){return Cm||(Cm=1,Fu.exports=N0()),Fu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function T0(){if(Em)return Ot;Em=1;var r=bd(),e=I0();function n(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(t,s){u(t,s),u(t+"Capture",s)}function u(t,s){for(o[t]=s,t=0;t<s.length;t++)i.add(s[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function y(t){return m.call(_,t)?!0:m.call(w,t)?!1:g.test(t)?_[t]=!0:(w[t]=!0,!1)}function b(t,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function A(t,s,a,c){if(s===null||typeof s>"u"||b(t,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function M(t,s,a,c,d,f,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=t,this.type=s,this.sanitizeURL=f,this.removeEmptyString=v}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){D[t]=new M(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];D[s]=new M(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){D[t]=new M(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){D[t]=new M(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){D[t]=new M(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){D[t]=new M(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){D[t]=new M(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){D[t]=new M(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){D[t]=new M(t,5,!1,t.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function j(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(X,j);D[s]=new M(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(X,j);D[s]=new M(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(X,j);D[s]=new M(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){D[t]=new M(t,1,!1,t.toLowerCase(),null,!1,!1)}),D.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){D[t]=new M(t,1,!1,t.toLowerCase(),null,!0,!0)});function G(t,s,a,c){var d=D.hasOwnProperty(s)?D[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(A(s,a,d,c)&&(a=null),c||d===null?y(s)&&(a===null?t.removeAttribute(s):t.setAttribute(s,""+a)):d.mustUseProperty?t[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?t.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?t.setAttributeNS(c,s,a):t.setAttribute(s,a))))}var V=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),ne=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),me=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),Ie=Symbol.for("react.provider"),be=Symbol.for("react.context"),We=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),Ye=Symbol.for("react.memo"),Je=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),H=Symbol.iterator;function ae(t){return t===null||typeof t!="object"?null:(t=H&&t[H]||t["@@iterator"],typeof t=="function"?t:null)}var q=Object.assign,I;function L(t){if(I===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);I=s&&s[1]||""}return`
`+I+t}var ce=!1;function N(t,s){if(!t||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(R){var c=R}Reflect.construct(t,[],s)}else{try{s.call()}catch(R){c=R}t.call(s.prototype)}else{try{throw Error()}catch(R){c=R}t()}}catch(R){if(R&&c&&typeof R.stack=="string"){for(var d=R.stack.split(`
`),f=c.stack.split(`
`),v=d.length-1,x=f.length-1;1<=v&&0<=x&&d[v]!==f[x];)x--;for(;1<=v&&0<=x;v--,x--)if(d[v]!==f[x]){if(v!==1||x!==1)do if(v--,x--,0>x||d[v]!==f[x]){var C=`
`+d[v].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=v&&0<=x);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?L(t):""}function $(t){switch(t.tag){case 5:return L(t.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return t=N(t.type,!1),t;case 11:return t=N(t.type.render,!1),t;case 1:return t=N(t.type,!0),t;default:return""}}function S(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Z:return"Fragment";case ne:return"Portal";case Ee:return"Profiler";case me:return"StrictMode";case Ue:return"Suspense";case $e:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case be:return(t.displayName||"Context")+".Consumer";case Ie:return(t._context.displayName||"Context")+".Provider";case We:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ye:return s=t.displayName||null,s!==null?s:S(t.type)||"Memo";case Je:s=t._payload,t=t._init;try{return S(t(s))}catch{}}return null}function K(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(s);case 8:return s===me?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ee(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ie(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function le(t){var s=ie(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),c=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,f.call(this,v)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Oe(t){t._valueTracker||(t._valueTracker=le(t))}function Wt(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return t&&(c=ie(t)?t.checked?"true":"false":t.value),t=c,t!==a?(s.setValue(t),!0):!1}function ii(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ve(t,s){var a=s.checked;return q({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function Po(t,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=ee(s.value!=null?s.value:a),t._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ql(t,s){s=s.checked,s!=null&&G(t,"checked",s,!1)}function ss(t,s){ql(t,s);var a=ee(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?oi(t,s.type,a):s.hasOwnProperty("defaultValue")&&oi(t,s.type,ee(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Ro(t,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,a||s===t.value||(t.value=s),t.defaultValue=s}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function oi(t,s,a){(s!=="number"||ii(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var O=Array.isArray;function oe(t,s,a,c){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&c&&(t[a].defaultSelected=!0)}else{for(a=""+ee(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,c&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function He(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return q({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nt(t,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(n(92));if(O(a)){if(1<a.length)throw Error(n(93));a=a[0]}s=a}s==null&&(s=""),a=s}t._wrapperState={initialValue:ee(a)}}function Mt(t,s){var a=ee(s.value),c=ee(s.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),s.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),c!=null&&(t.defaultValue=""+c)}function Te(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function En(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tr(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?En(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kr,bo=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return t(s,a,c,d)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(kr=kr||document.createElement("div"),kr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=kr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Zt(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pr=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(t){Pr.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),en[s]=en[t]})});function Se(t,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||en.hasOwnProperty(t)&&en[t]?(""+s).trim():s+"px"}function Re(t,s){t=t.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Se(a,s[a],c);a==="float"&&(a="cssFloat"),c?t.setProperty(a,d):t[a]=d}}var Ny=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gl(t,s){if(s){if(Ny[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function Kl(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ql=null;function Yl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jl=null,is=null,os=null;function Dh(t){if(t=ki(t)){if(typeof Jl!="function")throw Error(n(280));var s=t.stateNode;s&&(s=ea(s),Jl(t.stateNode,t.type,s))}}function Oh(t){is?os?os.push(t):os=[t]:is=t}function Lh(){if(is){var t=is,s=os;if(os=is=null,Dh(t),s)for(t=0;t<s.length;t++)Dh(s[t])}}function Mh(t,s){return t(s)}function Fh(){}var Xl=!1;function Uh(t,s,a){if(Xl)return t(s,a);Xl=!0;try{return Mh(t,s,a)}finally{Xl=!1,(is!==null||os!==null)&&(Fh(),Lh())}}function ai(t,s){var a=t.stateNode;if(a===null)return null;var c=ea(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(n(231,s,typeof a));return a}var Zl=!1;if(p)try{var li={};Object.defineProperty(li,"passive",{get:function(){Zl=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Zl=!1}function Iy(t,s,a,c,d,f,v,x,C){var R=Array.prototype.slice.call(arguments,3);try{s.apply(a,R)}catch(U){this.onError(U)}}var ci=!1,Ao=null,jo=!1,ec=null,Ty={onError:function(t){ci=!0,Ao=t}};function ky(t,s,a,c,d,f,v,x,C){ci=!1,Ao=null,Iy.apply(Ty,arguments)}function Py(t,s,a,c,d,f,v,x,C){if(ky.apply(this,arguments),ci){if(ci){var R=Ao;ci=!1,Ao=null}else throw Error(n(198));jo||(jo=!0,ec=R)}}function Rr(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function $h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function zh(t){if(Rr(t)!==t)throw Error(n(188))}function Ry(t){var s=t.alternate;if(!s){if(s=Rr(t),s===null)throw Error(n(188));return s!==t?null:t}for(var a=t,c=s;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return zh(d),t;if(f===c)return zh(d),s;f=f.sibling}throw Error(n(188))}if(a.return!==c.return)a=d,c=f;else{for(var v=!1,x=d.child;x;){if(x===a){v=!0,a=d,c=f;break}if(x===c){v=!0,c=d,a=f;break}x=x.sibling}if(!v){for(x=f.child;x;){if(x===a){v=!0,a=f,c=d;break}if(x===c){v=!0,c=f,a=d;break}x=x.sibling}if(!v)throw Error(n(189))}}if(a.alternate!==c)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?t:s}function Bh(t){return t=Ry(t),t!==null?Wh(t):null}function Wh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Wh(t);if(s!==null)return s;t=t.sibling}return null}var Vh=e.unstable_scheduleCallback,Hh=e.unstable_cancelCallback,by=e.unstable_shouldYield,Ay=e.unstable_requestPaint,rt=e.unstable_now,jy=e.unstable_getCurrentPriorityLevel,tc=e.unstable_ImmediatePriority,qh=e.unstable_UserBlockingPriority,Do=e.unstable_NormalPriority,Dy=e.unstable_LowPriority,Gh=e.unstable_IdlePriority,Oo=null,mn=null;function Oy(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Oo,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Fy,Ly=Math.log,My=Math.LN2;function Fy(t){return t>>>=0,t===0?32:31-(Ly(t)/My|0)|0}var Lo=64,Mo=4194304;function ui(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fo(t,s){var a=t.pendingLanes;if(a===0)return 0;var c=0,d=t.suspendedLanes,f=t.pingedLanes,v=a&268435455;if(v!==0){var x=v&~d;x!==0?c=ui(x):(f&=v,f!==0&&(c=ui(f)))}else v=a&~d,v!==0?c=ui(v):f!==0&&(c=ui(f));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,f=s&-s,d>=f||d===16&&(f&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=c;0<s;)a=31-tn(s),d=1<<a,c|=t[a],s&=~d;return c}function Uy(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $y(t,s){for(var a=t.suspendedLanes,c=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes;0<f;){var v=31-tn(f),x=1<<v,C=d[v];C===-1?((x&a)===0||(x&c)!==0)&&(d[v]=Uy(x,s)):C<=s&&(t.expiredLanes|=x),f&=~x}}function nc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kh(){var t=Lo;return Lo<<=1,(Lo&4194240)===0&&(Lo=64),t}function rc(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function di(t,s,a){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-tn(s),t[s]=a}function zy(t,s){var a=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<a;){var d=31-tn(a),f=1<<d;s[d]=0,c[d]=-1,t[d]=-1,a&=~f}}function sc(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var c=31-tn(a),d=1<<c;d&s|t[c]&s&&(t[c]|=s),a&=~d}}var Ae=0;function Qh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Yh,ic,Jh,Xh,Zh,oc=!1,Uo=[],Wn=null,Vn=null,Hn=null,hi=new Map,fi=new Map,qn=[],By="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ef(t,s){switch(t){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":hi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(s.pointerId)}}function pi(t,s,a,c,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=ki(s),s!==null&&ic(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function Wy(t,s,a,c,d){switch(s){case"focusin":return Wn=pi(Wn,t,s,a,c,d),!0;case"dragenter":return Vn=pi(Vn,t,s,a,c,d),!0;case"mouseover":return Hn=pi(Hn,t,s,a,c,d),!0;case"pointerover":var f=d.pointerId;return hi.set(f,pi(hi.get(f)||null,t,s,a,c,d)),!0;case"gotpointercapture":return f=d.pointerId,fi.set(f,pi(fi.get(f)||null,t,s,a,c,d)),!0}return!1}function tf(t){var s=br(t.target);if(s!==null){var a=Rr(s);if(a!==null){if(s=a.tag,s===13){if(s=$h(a),s!==null){t.blockedOn=s,Zh(t.priority,function(){Jh(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $o(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=lc(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var c=new a.constructor(a.type,a);Ql=c,a.target.dispatchEvent(c),Ql=null}else return s=ki(a),s!==null&&ic(s),t.blockedOn=a,!1;s.shift()}return!0}function nf(t,s,a){$o(t)&&a.delete(s)}function Vy(){oc=!1,Wn!==null&&$o(Wn)&&(Wn=null),Vn!==null&&$o(Vn)&&(Vn=null),Hn!==null&&$o(Hn)&&(Hn=null),hi.forEach(nf),fi.forEach(nf)}function mi(t,s){t.blockedOn===s&&(t.blockedOn=null,oc||(oc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vy)))}function gi(t){function s(d){return mi(d,t)}if(0<Uo.length){mi(Uo[0],t);for(var a=1;a<Uo.length;a++){var c=Uo[a];c.blockedOn===t&&(c.blockedOn=null)}}for(Wn!==null&&mi(Wn,t),Vn!==null&&mi(Vn,t),Hn!==null&&mi(Hn,t),hi.forEach(s),fi.forEach(s),a=0;a<qn.length;a++)c=qn[a],c.blockedOn===t&&(c.blockedOn=null);for(;0<qn.length&&(a=qn[0],a.blockedOn===null);)tf(a),a.blockedOn===null&&qn.shift()}var as=V.ReactCurrentBatchConfig,zo=!0;function Hy(t,s,a,c){var d=Ae,f=as.transition;as.transition=null;try{Ae=1,ac(t,s,a,c)}finally{Ae=d,as.transition=f}}function qy(t,s,a,c){var d=Ae,f=as.transition;as.transition=null;try{Ae=4,ac(t,s,a,c)}finally{Ae=d,as.transition=f}}function ac(t,s,a,c){if(zo){var d=lc(t,s,a,c);if(d===null)Nc(t,s,c,Bo,a),ef(t,c);else if(Wy(d,t,s,a,c))c.stopPropagation();else if(ef(t,c),s&4&&-1<By.indexOf(t)){for(;d!==null;){var f=ki(d);if(f!==null&&Yh(f),f=lc(t,s,a,c),f===null&&Nc(t,s,c,Bo,a),f===d)break;d=f}d!==null&&c.stopPropagation()}else Nc(t,s,c,null,a)}}var Bo=null;function lc(t,s,a,c){if(Bo=null,t=Yl(c),t=br(t),t!==null)if(s=Rr(t),s===null)t=null;else if(a=s.tag,a===13){if(t=$h(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Bo=t,null}function rf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jy()){case tc:return 1;case qh:return 4;case Do:case Dy:return 16;case Gh:return 536870912;default:return 16}default:return 16}}var Gn=null,cc=null,Wo=null;function sf(){if(Wo)return Wo;var t,s=cc,a=s.length,c,d="value"in Gn?Gn.value:Gn.textContent,f=d.length;for(t=0;t<a&&s[t]===d[t];t++);var v=a-t;for(c=1;c<=v&&s[a-c]===d[f-c];c++);return Wo=d.slice(t,1<c?1-c:void 0)}function Vo(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ho(){return!0}function of(){return!1}function Ft(t){function s(a,c,d,f,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(a=t[x],this[x]=a?a(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ho:of,this.isPropagationStopped=of,this}return q(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),s}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uc=Ft(ls),vi=q({},ls,{view:0,detail:0}),Gy=Ft(vi),dc,hc,_i,qo=q({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_i&&(_i&&t.type==="mousemove"?(dc=t.screenX-_i.screenX,hc=t.screenY-_i.screenY):hc=dc=0,_i=t),dc)},movementY:function(t){return"movementY"in t?t.movementY:hc}}),af=Ft(qo),Ky=q({},qo,{dataTransfer:0}),Qy=Ft(Ky),Yy=q({},vi,{relatedTarget:0}),fc=Ft(Yy),Jy=q({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Xy=Ft(Jy),Zy=q({},ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ew=Ft(Zy),tw=q({},ls,{data:0}),lf=Ft(tw),nw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iw(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=sw[t])?!!s[t]:!1}function pc(){return iw}var ow=q({},vi,{key:function(t){if(t.key){var s=nw[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Vo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(t){return t.type==="keypress"?Vo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aw=Ft(ow),lw=q({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cf=Ft(lw),cw=q({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),uw=Ft(cw),dw=q({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),hw=Ft(dw),fw=q({},qo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pw=Ft(fw),mw=[9,13,27,32],mc=p&&"CompositionEvent"in window,yi=null;p&&"documentMode"in document&&(yi=document.documentMode);var gw=p&&"TextEvent"in window&&!yi,uf=p&&(!mc||yi&&8<yi&&11>=yi),df=" ",hf=!1;function ff(t,s){switch(t){case"keyup":return mw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cs=!1;function vw(t,s){switch(t){case"compositionend":return pf(s);case"keypress":return s.which!==32?null:(hf=!0,df);case"textInput":return t=s.data,t===df&&hf?null:t;default:return null}}function _w(t,s){if(cs)return t==="compositionend"||!mc&&ff(t,s)?(t=sf(),Wo=cc=Gn=null,cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return uf&&s.locale!=="ko"?null:s.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!yw[t.type]:s==="textarea"}function gf(t,s,a,c){Oh(c),s=Jo(s,"onChange"),0<s.length&&(a=new uc("onChange","change",null,a,c),t.push({event:a,listeners:s}))}var wi=null,xi=null;function ww(t){Df(t,0)}function Go(t){var s=ps(t);if(Wt(s))return t}function xw(t,s){if(t==="change")return s}var vf=!1;if(p){var gc;if(p){var vc="oninput"in document;if(!vc){var _f=document.createElement("div");_f.setAttribute("oninput","return;"),vc=typeof _f.oninput=="function"}gc=vc}else gc=!1;vf=gc&&(!document.documentMode||9<document.documentMode)}function yf(){wi&&(wi.detachEvent("onpropertychange",wf),xi=wi=null)}function wf(t){if(t.propertyName==="value"&&Go(xi)){var s=[];gf(s,xi,t,Yl(t)),Uh(ww,s)}}function Sw(t,s,a){t==="focusin"?(yf(),wi=s,xi=a,wi.attachEvent("onpropertychange",wf)):t==="focusout"&&yf()}function Cw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Go(xi)}function Ew(t,s){if(t==="click")return Go(s)}function Nw(t,s){if(t==="input"||t==="change")return Go(s)}function Iw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var nn=typeof Object.is=="function"?Object.is:Iw;function Si(t,s){if(nn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!m.call(s,d)||!nn(t[d],s[d]))return!1}return!0}function xf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sf(t,s){var a=xf(t);t=0;for(var c;a;){if(a.nodeType===3){if(c=t+a.textContent.length,t<=s&&c>=s)return{node:a,offset:s-t};t=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xf(a)}}function Cf(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Cf(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Ef(){for(var t=window,s=ii();s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=ii(t.document)}return s}function _c(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Tw(t){var s=Ef(),a=t.focusedElem,c=t.selectionRange;if(s!==a&&a&&a.ownerDocument&&Cf(a.ownerDocument.documentElement,a)){if(c!==null&&_c(a)){if(s=c.start,t=c.end,t===void 0&&(t=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(t,a.value.length);else if(t=(s=a.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var d=a.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!t.extend&&f>c&&(d=c,c=f,f=d),d=Sf(a,f);var v=Sf(a,c);d&&v&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),t.removeAllRanges(),f>c?(t.addRange(s),t.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),t.addRange(s)))}}for(s=[],t=a;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)t=s[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kw=p&&"documentMode"in document&&11>=document.documentMode,us=null,yc=null,Ci=null,wc=!1;function Nf(t,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wc||us==null||us!==ii(c)||(c=us,"selectionStart"in c&&_c(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ci&&Si(Ci,c)||(Ci=c,c=Jo(yc,"onSelect"),0<c.length&&(s=new uc("onSelect","select",null,s,a),t.push({event:s,listeners:c}),s.target=us)))}function Ko(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var ds={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},xc={},If={};p&&(If=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Qo(t){if(xc[t])return xc[t];if(!ds[t])return t;var s=ds[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in If)return xc[t]=s[a];return t}var Tf=Qo("animationend"),kf=Qo("animationiteration"),Pf=Qo("animationstart"),Rf=Qo("transitionend"),bf=new Map,Af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kn(t,s){bf.set(t,s),l(s,[t])}for(var Sc=0;Sc<Af.length;Sc++){var Cc=Af[Sc],Pw=Cc.toLowerCase(),Rw=Cc[0].toUpperCase()+Cc.slice(1);Kn(Pw,"on"+Rw)}Kn(Tf,"onAnimationEnd"),Kn(kf,"onAnimationIteration"),Kn(Pf,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(Rf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function jf(t,s,a){var c=t.type||"unknown-event";t.currentTarget=a,Py(c,s,void 0,t),t.currentTarget=null}function Df(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var c=t[a],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var v=c.length-1;0<=v;v--){var x=c[v],C=x.instance,R=x.currentTarget;if(x=x.listener,C!==f&&d.isPropagationStopped())break e;jf(d,x,R),f=C}else for(v=0;v<c.length;v++){if(x=c[v],C=x.instance,R=x.currentTarget,x=x.listener,C!==f&&d.isPropagationStopped())break e;jf(d,x,R),f=C}}}if(jo)throw t=ec,jo=!1,ec=null,t}function ze(t,s){var a=s[bc];a===void 0&&(a=s[bc]=new Set);var c=t+"__bubble";a.has(c)||(Of(s,t,2,!1),a.add(c))}function Ec(t,s,a){var c=0;s&&(c|=4),Of(a,t,c,s)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function Ni(t){if(!t[Yo]){t[Yo]=!0,i.forEach(function(a){a!=="selectionchange"&&(bw.has(a)||Ec(a,!1,t),Ec(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Yo]||(s[Yo]=!0,Ec("selectionchange",!1,s))}}function Of(t,s,a,c){switch(rf(s)){case 1:var d=Hy;break;case 4:d=qy;break;default:d=ac}a=d.bind(null,s,a,t),d=void 0,!Zl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function Nc(t,s,a,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var x=c.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var C=v.tag;if((C===3||C===4)&&(C=v.stateNode.containerInfo,C===d||C.nodeType===8&&C.parentNode===d))return;v=v.return}for(;x!==null;){if(v=br(x),v===null)return;if(C=v.tag,C===5||C===6){c=f=v;continue e}x=x.parentNode}}c=c.return}Uh(function(){var R=f,U=Yl(a),z=[];e:{var F=bf.get(t);if(F!==void 0){var Y=uc,te=t;switch(t){case"keypress":if(Vo(a)===0)break e;case"keydown":case"keyup":Y=aw;break;case"focusin":te="focus",Y=fc;break;case"focusout":te="blur",Y=fc;break;case"beforeblur":case"afterblur":Y=fc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=af;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Qy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=uw;break;case Tf:case kf:case Pf:Y=Xy;break;case Rf:Y=hw;break;case"scroll":Y=Gy;break;case"wheel":Y=pw;break;case"copy":case"cut":case"paste":Y=ew;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=cf}var re=(s&4)!==0,st=!re&&t==="scroll",T=re?F!==null?F+"Capture":null:F;re=[];for(var E=R,P;E!==null;){P=E;var B=P.stateNode;if(P.tag===5&&B!==null&&(P=B,T!==null&&(B=ai(E,T),B!=null&&re.push(Ii(E,B,P)))),st)break;E=E.return}0<re.length&&(F=new Y(F,te,null,a,U),z.push({event:F,listeners:re}))}}if((s&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",F&&a!==Ql&&(te=a.relatedTarget||a.fromElement)&&(br(te)||te[Nn]))break e;if((Y||F)&&(F=U.window===U?U:(F=U.ownerDocument)?F.defaultView||F.parentWindow:window,Y?(te=a.relatedTarget||a.toElement,Y=R,te=te?br(te):null,te!==null&&(st=Rr(te),te!==st||te.tag!==5&&te.tag!==6)&&(te=null)):(Y=null,te=R),Y!==te)){if(re=af,B="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(re=cf,B="onPointerLeave",T="onPointerEnter",E="pointer"),st=Y==null?F:ps(Y),P=te==null?F:ps(te),F=new re(B,E+"leave",Y,a,U),F.target=st,F.relatedTarget=P,B=null,br(U)===R&&(re=new re(T,E+"enter",te,a,U),re.target=P,re.relatedTarget=st,B=re),st=B,Y&&te)t:{for(re=Y,T=te,E=0,P=re;P;P=hs(P))E++;for(P=0,B=T;B;B=hs(B))P++;for(;0<E-P;)re=hs(re),E--;for(;0<P-E;)T=hs(T),P--;for(;E--;){if(re===T||T!==null&&re===T.alternate)break t;re=hs(re),T=hs(T)}re=null}else re=null;Y!==null&&Lf(z,F,Y,re,!1),te!==null&&st!==null&&Lf(z,st,te,re,!0)}}e:{if(F=R?ps(R):window,Y=F.nodeName&&F.nodeName.toLowerCase(),Y==="select"||Y==="input"&&F.type==="file")var se=xw;else if(mf(F))if(vf)se=Nw;else{se=Cw;var ue=Sw}else(Y=F.nodeName)&&Y.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(se=Ew);if(se&&(se=se(t,R))){gf(z,se,a,U);break e}ue&&ue(t,F,R),t==="focusout"&&(ue=F._wrapperState)&&ue.controlled&&F.type==="number"&&oi(F,"number",F.value)}switch(ue=R?ps(R):window,t){case"focusin":(mf(ue)||ue.contentEditable==="true")&&(us=ue,yc=R,Ci=null);break;case"focusout":Ci=yc=us=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,Nf(z,a,U);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":Nf(z,a,U)}var de;if(mc)e:{switch(t){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else cs?ff(t,a)&&(fe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(fe="onCompositionStart");fe&&(uf&&a.locale!=="ko"&&(cs||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&cs&&(de=sf()):(Gn=U,cc="value"in Gn?Gn.value:Gn.textContent,cs=!0)),ue=Jo(R,fe),0<ue.length&&(fe=new lf(fe,t,null,a,U),z.push({event:fe,listeners:ue}),de?fe.data=de:(de=pf(a),de!==null&&(fe.data=de)))),(de=gw?vw(t,a):_w(t,a))&&(R=Jo(R,"onBeforeInput"),0<R.length&&(U=new lf("onBeforeInput","beforeinput",null,a,U),z.push({event:U,listeners:R}),U.data=de))}Df(z,s)})}function Ii(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Jo(t,s){for(var a=s+"Capture",c=[];t!==null;){var d=t,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=ai(t,a),f!=null&&c.unshift(Ii(t,f,d)),f=ai(t,s),f!=null&&c.push(Ii(t,f,d))),t=t.return}return c}function hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lf(t,s,a,c,d){for(var f=s._reactName,v=[];a!==null&&a!==c;){var x=a,C=x.alternate,R=x.stateNode;if(C!==null&&C===c)break;x.tag===5&&R!==null&&(x=R,d?(C=ai(a,f),C!=null&&v.unshift(Ii(a,C,x))):d||(C=ai(a,f),C!=null&&v.push(Ii(a,C,x)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var Aw=/\r\n?/g,jw=/\u0000|\uFFFD/g;function Mf(t){return(typeof t=="string"?t:""+t).replace(Aw,`
`).replace(jw,"")}function Xo(t,s,a){if(s=Mf(s),Mf(t)!==s&&a)throw Error(n(425))}function Zo(){}var Ic=null,Tc=null;function kc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Pc=typeof setTimeout=="function"?setTimeout:void 0,Dw=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,Ow=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(t){return Ff.resolve(null).then(t).catch(Lw)}:Pc;function Lw(t){setTimeout(function(){throw t})}function Rc(t,s){var a=s,c=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){t.removeChild(d),gi(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);gi(s)}function Qn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Uf(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}var fs=Math.random().toString(36).slice(2),gn="__reactFiber$"+fs,Ti="__reactProps$"+fs,Nn="__reactContainer$"+fs,bc="__reactEvents$"+fs,Mw="__reactListeners$"+fs,Fw="__reactHandles$"+fs;function br(t){var s=t[gn];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Nn]||a[gn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Uf(t);t!==null;){if(a=t[gn])return a;t=Uf(t)}return s}t=a,a=t.parentNode}return null}function ki(t){return t=t[gn]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function ea(t){return t[Ti]||null}var Ac=[],ms=-1;function Yn(t){return{current:t}}function Be(t){0>ms||(t.current=Ac[ms],Ac[ms]=null,ms--)}function Le(t,s){ms++,Ac[ms]=t.current,t.current=s}var Jn={},wt=Yn(Jn),Rt=Yn(!1),Ar=Jn;function gs(t,s){var a=t.type.contextTypes;if(!a)return Jn;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=s[f];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=d),d}function bt(t){return t=t.childContextTypes,t!=null}function ta(){Be(Rt),Be(wt)}function $f(t,s,a){if(wt.current!==Jn)throw Error(n(168));Le(wt,s),Le(Rt,a)}function zf(t,s,a){var c=t.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(n(108,K(t)||"Unknown",d));return q({},a,c)}function na(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jn,Ar=wt.current,Le(wt,t),Le(Rt,Rt.current),!0}function Bf(t,s,a){var c=t.stateNode;if(!c)throw Error(n(169));a?(t=zf(t,s,Ar),c.__reactInternalMemoizedMergedChildContext=t,Be(Rt),Be(wt),Le(wt,t)):Be(Rt),Le(Rt,a)}var In=null,ra=!1,jc=!1;function Wf(t){In===null?In=[t]:In.push(t)}function Uw(t){ra=!0,Wf(t)}function Xn(){if(!jc&&In!==null){jc=!0;var t=0,s=Ae;try{var a=In;for(Ae=1;t<a.length;t++){var c=a[t];do c=c(!0);while(c!==null)}In=null,ra=!1}catch(d){throw In!==null&&(In=In.slice(t+1)),Vh(tc,Xn),d}finally{Ae=s,jc=!1}}return null}var vs=[],_s=0,sa=null,ia=0,Vt=[],Ht=0,jr=null,Tn=1,kn="";function Dr(t,s){vs[_s++]=ia,vs[_s++]=sa,sa=t,ia=s}function Vf(t,s,a){Vt[Ht++]=Tn,Vt[Ht++]=kn,Vt[Ht++]=jr,jr=t;var c=Tn;t=kn;var d=32-tn(c)-1;c&=~(1<<d),a+=1;var f=32-tn(s)+d;if(30<f){var v=d-d%5;f=(c&(1<<v)-1).toString(32),c>>=v,d-=v,Tn=1<<32-tn(s)+d|a<<d|c,kn=f+t}else Tn=1<<f|a<<d|c,kn=t}function Dc(t){t.return!==null&&(Dr(t,1),Vf(t,1,0))}function Oc(t){for(;t===sa;)sa=vs[--_s],vs[_s]=null,ia=vs[--_s],vs[_s]=null;for(;t===jr;)jr=Vt[--Ht],Vt[Ht]=null,kn=Vt[--Ht],Vt[Ht]=null,Tn=Vt[--Ht],Vt[Ht]=null}var Ut=null,$t=null,qe=!1,rn=null;function Hf(t,s){var a=Qt(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=t,s=t.deletions,s===null?(t.deletions=[a],t.flags|=16):s.push(a)}function qf(t,s){switch(t.tag){case 5:var a=t.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ut=t,$t=Qn(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ut=t,$t=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=jr!==null?{id:Tn,overflow:kn}:null,t.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Qt(18,null,null,0),a.stateNode=s,a.return=t,t.child=a,Ut=t,$t=null,!0):!1;default:return!1}}function Lc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mc(t){if(qe){var s=$t;if(s){var a=s;if(!qf(t,s)){if(Lc(t))throw Error(n(418));s=Qn(a.nextSibling);var c=Ut;s&&qf(t,s)?Hf(c,a):(t.flags=t.flags&-4097|2,qe=!1,Ut=t)}}else{if(Lc(t))throw Error(n(418));t.flags=t.flags&-4097|2,qe=!1,Ut=t}}}function Gf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function oa(t){if(t!==Ut)return!1;if(!qe)return Gf(t),qe=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!kc(t.type,t.memoizedProps)),s&&(s=$t)){if(Lc(t))throw Kf(),Error(n(418));for(;s;)Hf(t,s),s=Qn(s.nextSibling)}if(Gf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(s===0){$t=Qn(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}t=t.nextSibling}$t=null}}else $t=Ut?Qn(t.stateNode.nextSibling):null;return!0}function Kf(){for(var t=$t;t;)t=Qn(t.nextSibling)}function ys(){$t=Ut=null,qe=!1}function Fc(t){rn===null?rn=[t]:rn.push(t)}var $w=V.ReactCurrentBatchConfig;function Pi(t,s,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(n(309));var c=a.stateNode}if(!c)throw Error(n(147,t));var d=c,f=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===f?s.ref:(s=function(v){var x=d.refs;v===null?delete x[f]:x[f]=v},s._stringRef=f,s)}if(typeof t!="string")throw Error(n(284));if(!a._owner)throw Error(n(290,t))}return t}function aa(t,s){throw t=Object.prototype.toString.call(s),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Qf(t){var s=t._init;return s(t._payload)}function Yf(t){function s(T,E){if(t){var P=T.deletions;P===null?(T.deletions=[E],T.flags|=16):P.push(E)}}function a(T,E){if(!t)return null;for(;E!==null;)s(T,E),E=E.sibling;return null}function c(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function d(T,E){return T=or(T,E),T.index=0,T.sibling=null,T}function f(T,E,P){return T.index=P,t?(P=T.alternate,P!==null?(P=P.index,P<E?(T.flags|=2,E):P):(T.flags|=2,E)):(T.flags|=1048576,E)}function v(T){return t&&T.alternate===null&&(T.flags|=2),T}function x(T,E,P,B){return E===null||E.tag!==6?(E=Pu(P,T.mode,B),E.return=T,E):(E=d(E,P),E.return=T,E)}function C(T,E,P,B){var se=P.type;return se===Z?U(T,E,P.props.children,B,P.key):E!==null&&(E.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Je&&Qf(se)===E.type)?(B=d(E,P.props),B.ref=Pi(T,E,P),B.return=T,B):(B=ba(P.type,P.key,P.props,null,T.mode,B),B.ref=Pi(T,E,P),B.return=T,B)}function R(T,E,P,B){return E===null||E.tag!==4||E.stateNode.containerInfo!==P.containerInfo||E.stateNode.implementation!==P.implementation?(E=Ru(P,T.mode,B),E.return=T,E):(E=d(E,P.children||[]),E.return=T,E)}function U(T,E,P,B,se){return E===null||E.tag!==7?(E=Br(P,T.mode,B,se),E.return=T,E):(E=d(E,P),E.return=T,E)}function z(T,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Pu(""+E,T.mode,P),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Q:return P=ba(E.type,E.key,E.props,null,T.mode,P),P.ref=Pi(T,null,E),P.return=T,P;case ne:return E=Ru(E,T.mode,P),E.return=T,E;case Je:var B=E._init;return z(T,B(E._payload),P)}if(O(E)||ae(E))return E=Br(E,T.mode,P,null),E.return=T,E;aa(T,E)}return null}function F(T,E,P,B){var se=E!==null?E.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return se!==null?null:x(T,E,""+P,B);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Q:return P.key===se?C(T,E,P,B):null;case ne:return P.key===se?R(T,E,P,B):null;case Je:return se=P._init,F(T,E,se(P._payload),B)}if(O(P)||ae(P))return se!==null?null:U(T,E,P,B,null);aa(T,P)}return null}function Y(T,E,P,B,se){if(typeof B=="string"&&B!==""||typeof B=="number")return T=T.get(P)||null,x(E,T,""+B,se);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Q:return T=T.get(B.key===null?P:B.key)||null,C(E,T,B,se);case ne:return T=T.get(B.key===null?P:B.key)||null,R(E,T,B,se);case Je:var ue=B._init;return Y(T,E,P,ue(B._payload),se)}if(O(B)||ae(B))return T=T.get(P)||null,U(E,T,B,se,null);aa(E,B)}return null}function te(T,E,P,B){for(var se=null,ue=null,de=E,fe=E=0,ft=null;de!==null&&fe<P.length;fe++){de.index>fe?(ft=de,de=null):ft=de.sibling;var ke=F(T,de,P[fe],B);if(ke===null){de===null&&(de=ft);break}t&&de&&ke.alternate===null&&s(T,de),E=f(ke,E,fe),ue===null?se=ke:ue.sibling=ke,ue=ke,de=ft}if(fe===P.length)return a(T,de),qe&&Dr(T,fe),se;if(de===null){for(;fe<P.length;fe++)de=z(T,P[fe],B),de!==null&&(E=f(de,E,fe),ue===null?se=de:ue.sibling=de,ue=de);return qe&&Dr(T,fe),se}for(de=c(T,de);fe<P.length;fe++)ft=Y(de,T,fe,P[fe],B),ft!==null&&(t&&ft.alternate!==null&&de.delete(ft.key===null?fe:ft.key),E=f(ft,E,fe),ue===null?se=ft:ue.sibling=ft,ue=ft);return t&&de.forEach(function(ar){return s(T,ar)}),qe&&Dr(T,fe),se}function re(T,E,P,B){var se=ae(P);if(typeof se!="function")throw Error(n(150));if(P=se.call(P),P==null)throw Error(n(151));for(var ue=se=null,de=E,fe=E=0,ft=null,ke=P.next();de!==null&&!ke.done;fe++,ke=P.next()){de.index>fe?(ft=de,de=null):ft=de.sibling;var ar=F(T,de,ke.value,B);if(ar===null){de===null&&(de=ft);break}t&&de&&ar.alternate===null&&s(T,de),E=f(ar,E,fe),ue===null?se=ar:ue.sibling=ar,ue=ar,de=ft}if(ke.done)return a(T,de),qe&&Dr(T,fe),se;if(de===null){for(;!ke.done;fe++,ke=P.next())ke=z(T,ke.value,B),ke!==null&&(E=f(ke,E,fe),ue===null?se=ke:ue.sibling=ke,ue=ke);return qe&&Dr(T,fe),se}for(de=c(T,de);!ke.done;fe++,ke=P.next())ke=Y(de,T,fe,ke.value,B),ke!==null&&(t&&ke.alternate!==null&&de.delete(ke.key===null?fe:ke.key),E=f(ke,E,fe),ue===null?se=ke:ue.sibling=ke,ue=ke);return t&&de.forEach(function(y0){return s(T,y0)}),qe&&Dr(T,fe),se}function st(T,E,P,B){if(typeof P=="object"&&P!==null&&P.type===Z&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case Q:e:{for(var se=P.key,ue=E;ue!==null;){if(ue.key===se){if(se=P.type,se===Z){if(ue.tag===7){a(T,ue.sibling),E=d(ue,P.props.children),E.return=T,T=E;break e}}else if(ue.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Je&&Qf(se)===ue.type){a(T,ue.sibling),E=d(ue,P.props),E.ref=Pi(T,ue,P),E.return=T,T=E;break e}a(T,ue);break}else s(T,ue);ue=ue.sibling}P.type===Z?(E=Br(P.props.children,T.mode,B,P.key),E.return=T,T=E):(B=ba(P.type,P.key,P.props,null,T.mode,B),B.ref=Pi(T,E,P),B.return=T,T=B)}return v(T);case ne:e:{for(ue=P.key;E!==null;){if(E.key===ue)if(E.tag===4&&E.stateNode.containerInfo===P.containerInfo&&E.stateNode.implementation===P.implementation){a(T,E.sibling),E=d(E,P.children||[]),E.return=T,T=E;break e}else{a(T,E);break}else s(T,E);E=E.sibling}E=Ru(P,T.mode,B),E.return=T,T=E}return v(T);case Je:return ue=P._init,st(T,E,ue(P._payload),B)}if(O(P))return te(T,E,P,B);if(ae(P))return re(T,E,P,B);aa(T,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,E!==null&&E.tag===6?(a(T,E.sibling),E=d(E,P),E.return=T,T=E):(a(T,E),E=Pu(P,T.mode,B),E.return=T,T=E),v(T)):a(T,E)}return st}var ws=Yf(!0),Jf=Yf(!1),la=Yn(null),ca=null,xs=null,Uc=null;function $c(){Uc=xs=ca=null}function zc(t){var s=la.current;Be(la),t._currentValue=s}function Bc(t,s,a){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===a)break;t=t.return}}function Ss(t,s){ca=t,Uc=xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(At=!0),t.firstContext=null)}function qt(t){var s=t._currentValue;if(Uc!==t)if(t={context:t,memoizedValue:s,next:null},xs===null){if(ca===null)throw Error(n(308));xs=t,ca.dependencies={lanes:0,firstContext:t}}else xs=xs.next=t;return s}var Or=null;function Wc(t){Or===null?Or=[t]:Or.push(t)}function Xf(t,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Wc(s)):(a.next=d.next,d.next=a),s.interleaved=a,Pn(t,c)}function Pn(t,s){t.lanes|=s;var a=t.alternate;for(a!==null&&(a.lanes|=s),a=t,t=t.return;t!==null;)t.childLanes|=s,a=t.alternate,a!==null&&(a.childLanes|=s),a=t,t=t.return;return a.tag===3?a.stateNode:null}var Zn=!1;function Vc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function er(t,s,a){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Ne&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Pn(t,a)}return d=c.interleaved,d===null?(s.next=s,Wc(c)):(s.next=d.next,d.next=s),c.interleaved=s,Pn(t,a)}function ua(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,sc(t,a)}}function ep(t,s){var a=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?d=f=s:f=f.next=s}else d=f=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}function da(t,s,a,c){var d=t.updateQueue;Zn=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var C=x,R=C.next;C.next=null,v===null?f=R:v.next=R,v=C;var U=t.alternate;U!==null&&(U=U.updateQueue,x=U.lastBaseUpdate,x!==v&&(x===null?U.firstBaseUpdate=R:x.next=R,U.lastBaseUpdate=C))}if(f!==null){var z=d.baseState;v=0,U=R=C=null,x=f;do{var F=x.lane,Y=x.eventTime;if((c&F)===F){U!==null&&(U=U.next={eventTime:Y,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var te=t,re=x;switch(F=s,Y=a,re.tag){case 1:if(te=re.payload,typeof te=="function"){z=te.call(Y,z,F);break e}z=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=re.payload,F=typeof te=="function"?te.call(Y,z,F):te,F==null)break e;z=q({},z,F);break e;case 2:Zn=!0}}x.callback!==null&&x.lane!==0&&(t.flags|=64,F=d.effects,F===null?d.effects=[x]:F.push(x))}else Y={eventTime:Y,lane:F,tag:x.tag,payload:x.payload,callback:x.callback,next:null},U===null?(R=U=Y,C=z):U=U.next=Y,v|=F;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;F=x,x=F.next,F.next=null,d.lastBaseUpdate=F,d.shared.pending=null}}while(!0);if(U===null&&(C=z),d.baseState=C,d.firstBaseUpdate=R,d.lastBaseUpdate=U,s=d.shared.interleaved,s!==null){d=s;do v|=d.lane,d=d.next;while(d!==s)}else f===null&&(d.shared.lanes=0);Fr|=v,t.lanes=v,t.memoizedState=z}}function tp(t,s,a){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var c=t[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(n(191,d));d.call(c)}}}var Ri={},vn=Yn(Ri),bi=Yn(Ri),Ai=Yn(Ri);function Lr(t){if(t===Ri)throw Error(n(174));return t}function Hc(t,s){switch(Le(Ai,s),Le(bi,t),Le(vn,Ri),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Tr(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Tr(s,t)}Be(vn),Le(vn,s)}function Cs(){Be(vn),Be(bi),Be(Ai)}function np(t){Lr(Ai.current);var s=Lr(vn.current),a=Tr(s,t.type);s!==a&&(Le(bi,t),Le(vn,a))}function qc(t){bi.current===t&&(Be(vn),Be(bi))}var Ge=Yn(0);function ha(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Gc=[];function Kc(){for(var t=0;t<Gc.length;t++)Gc[t]._workInProgressVersionPrimary=null;Gc.length=0}var fa=V.ReactCurrentDispatcher,Qc=V.ReactCurrentBatchConfig,Mr=0,Ke=null,at=null,dt=null,pa=!1,ji=!1,Di=0,zw=0;function xt(){throw Error(n(321))}function Yc(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!nn(t[a],s[a]))return!1;return!0}function Jc(t,s,a,c,d,f){if(Mr=f,Ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,fa.current=t===null||t.memoizedState===null?Hw:qw,t=a(c,d),ji){f=0;do{if(ji=!1,Di=0,25<=f)throw Error(n(301));f+=1,dt=at=null,s.updateQueue=null,fa.current=Gw,t=a(c,d)}while(ji)}if(fa.current=va,s=at!==null&&at.next!==null,Mr=0,dt=at=Ke=null,pa=!1,s)throw Error(n(300));return t}function Xc(){var t=Di!==0;return Di=0,t}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ke.memoizedState=dt=t:dt=dt.next=t,dt}function Gt(){if(at===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var s=dt===null?Ke.memoizedState:dt.next;if(s!==null)dt=s,at=t;else{if(t===null)throw Error(n(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},dt===null?Ke.memoizedState=dt=t:dt=dt.next=t}return dt}function Oi(t,s){return typeof s=="function"?s(t):s}function Zc(t){var s=Gt(),a=s.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=t;var c=at,d=c.baseQueue,f=a.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}c.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,c=c.baseState;var x=v=null,C=null,R=f;do{var U=R.lane;if((Mr&U)===U)C!==null&&(C=C.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),c=R.hasEagerState?R.eagerState:t(c,R.action);else{var z={lane:U,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};C===null?(x=C=z,v=c):C=C.next=z,Ke.lanes|=U,Fr|=U}R=R.next}while(R!==null&&R!==f);C===null?v=c:C.next=x,nn(c,s.memoizedState)||(At=!0),s.memoizedState=c,s.baseState=v,s.baseQueue=C,a.lastRenderedState=c}if(t=a.interleaved,t!==null){d=t;do f=d.lane,Ke.lanes|=f,Fr|=f,d=d.next;while(d!==t)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function eu(t){var s=Gt(),a=s.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=t;var c=a.dispatch,d=a.pending,f=s.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do f=t(f,v.action),v=v.next;while(v!==d);nn(f,s.memoizedState)||(At=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,c]}function rp(){}function sp(t,s){var a=Ke,c=Gt(),d=s(),f=!nn(c.memoizedState,d);if(f&&(c.memoizedState=d,At=!0),c=c.queue,tu(ap.bind(null,a,c,t),[t]),c.getSnapshot!==s||f||dt!==null&&dt.memoizedState.tag&1){if(a.flags|=2048,Li(9,op.bind(null,a,c,d,s),void 0,null),ht===null)throw Error(n(349));(Mr&30)!==0||ip(a,s,d)}return d}function ip(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ke.updateQueue,s===null?(s={lastEffect:null,stores:null},Ke.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function op(t,s,a,c){s.value=a,s.getSnapshot=c,lp(s)&&cp(t)}function ap(t,s,a){return a(function(){lp(s)&&cp(t)})}function lp(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!nn(t,a)}catch{return!0}}function cp(t){var s=Pn(t,1);s!==null&&ln(s,t,1,-1)}function up(t){var s=_n();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:t},s.queue=t,t=t.dispatch=Vw.bind(null,Ke,t),[s.memoizedState,t]}function Li(t,s,a,c){return t={tag:t,create:s,destroy:a,deps:c,next:null},s=Ke.updateQueue,s===null?(s={lastEffect:null,stores:null},Ke.updateQueue=s,s.lastEffect=t.next=t):(a=s.lastEffect,a===null?s.lastEffect=t.next=t:(c=a.next,a.next=t,t.next=c,s.lastEffect=t)),t}function dp(){return Gt().memoizedState}function ma(t,s,a,c){var d=_n();Ke.flags|=t,d.memoizedState=Li(1|s,a,void 0,c===void 0?null:c)}function ga(t,s,a,c){var d=Gt();c=c===void 0?null:c;var f=void 0;if(at!==null){var v=at.memoizedState;if(f=v.destroy,c!==null&&Yc(c,v.deps)){d.memoizedState=Li(s,a,f,c);return}}Ke.flags|=t,d.memoizedState=Li(1|s,a,f,c)}function hp(t,s){return ma(8390656,8,t,s)}function tu(t,s){return ga(2048,8,t,s)}function fp(t,s){return ga(4,2,t,s)}function pp(t,s){return ga(4,4,t,s)}function mp(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function gp(t,s,a){return a=a!=null?a.concat([t]):null,ga(4,4,mp.bind(null,s,t),a)}function nu(){}function vp(t,s){var a=Gt();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Yc(s,c[1])?c[0]:(a.memoizedState=[t,s],t)}function _p(t,s){var a=Gt();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Yc(s,c[1])?c[0]:(t=t(),a.memoizedState=[t,s],t)}function yp(t,s,a){return(Mr&21)===0?(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=a):(nn(a,s)||(a=Kh(),Ke.lanes|=a,Fr|=a,t.baseState=!0),s)}function Bw(t,s){var a=Ae;Ae=a!==0&&4>a?a:4,t(!0);var c=Qc.transition;Qc.transition={};try{t(!1),s()}finally{Ae=a,Qc.transition=c}}function wp(){return Gt().memoizedState}function Ww(t,s,a){var c=sr(t);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},xp(t))Sp(s,a);else if(a=Xf(t,s,a,c),a!==null){var d=Nt();ln(a,t,c,d),Cp(a,s,c)}}function Vw(t,s,a){var c=sr(t),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(xp(t))Sp(s,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var v=s.lastRenderedState,x=f(v,a);if(d.hasEagerState=!0,d.eagerState=x,nn(x,v)){var C=s.interleaved;C===null?(d.next=d,Wc(s)):(d.next=C.next,C.next=d),s.interleaved=d;return}}catch{}finally{}a=Xf(t,s,d,c),a!==null&&(d=Nt(),ln(a,t,c,d),Cp(a,s,c))}}function xp(t){var s=t.alternate;return t===Ke||s!==null&&s===Ke}function Sp(t,s){ji=pa=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Cp(t,s,a){if((a&4194240)!==0){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,sc(t,a)}}var va={readContext:qt,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},Hw={readContext:qt,useCallback:function(t,s){return _n().memoizedState=[t,s===void 0?null:s],t},useContext:qt,useEffect:hp,useImperativeHandle:function(t,s,a){return a=a!=null?a.concat([t]):null,ma(4194308,4,mp.bind(null,s,t),a)},useLayoutEffect:function(t,s){return ma(4194308,4,t,s)},useInsertionEffect:function(t,s){return ma(4,2,t,s)},useMemo:function(t,s){var a=_n();return s=s===void 0?null:s,t=t(),a.memoizedState=[t,s],t},useReducer:function(t,s,a){var c=_n();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},c.queue=t,t=t.dispatch=Ww.bind(null,Ke,t),[c.memoizedState,t]},useRef:function(t){var s=_n();return t={current:t},s.memoizedState=t},useState:up,useDebugValue:nu,useDeferredValue:function(t){return _n().memoizedState=t},useTransition:function(){var t=up(!1),s=t[0];return t=Bw.bind(null,t[1]),_n().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,a){var c=Ke,d=_n();if(qe){if(a===void 0)throw Error(n(407));a=a()}else{if(a=s(),ht===null)throw Error(n(349));(Mr&30)!==0||ip(c,s,a)}d.memoizedState=a;var f={value:a,getSnapshot:s};return d.queue=f,hp(ap.bind(null,c,f,t),[t]),c.flags|=2048,Li(9,op.bind(null,c,f,a,s),void 0,null),a},useId:function(){var t=_n(),s=ht.identifierPrefix;if(qe){var a=kn,c=Tn;a=(c&~(1<<32-tn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Di++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=zw++,s=":"+s+"r"+a.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},qw={readContext:qt,useCallback:vp,useContext:qt,useEffect:tu,useImperativeHandle:gp,useInsertionEffect:fp,useLayoutEffect:pp,useMemo:_p,useReducer:Zc,useRef:dp,useState:function(){return Zc(Oi)},useDebugValue:nu,useDeferredValue:function(t){var s=Gt();return yp(s,at.memoizedState,t)},useTransition:function(){var t=Zc(Oi)[0],s=Gt().memoizedState;return[t,s]},useMutableSource:rp,useSyncExternalStore:sp,useId:wp,unstable_isNewReconciler:!1},Gw={readContext:qt,useCallback:vp,useContext:qt,useEffect:tu,useImperativeHandle:gp,useInsertionEffect:fp,useLayoutEffect:pp,useMemo:_p,useReducer:eu,useRef:dp,useState:function(){return eu(Oi)},useDebugValue:nu,useDeferredValue:function(t){var s=Gt();return at===null?s.memoizedState=t:yp(s,at.memoizedState,t)},useTransition:function(){var t=eu(Oi)[0],s=Gt().memoizedState;return[t,s]},useMutableSource:rp,useSyncExternalStore:sp,useId:wp,unstable_isNewReconciler:!1};function sn(t,s){if(t&&t.defaultProps){s=q({},s),t=t.defaultProps;for(var a in t)s[a]===void 0&&(s[a]=t[a]);return s}return s}function ru(t,s,a,c){s=t.memoizedState,a=a(c,s),a=a==null?s:q({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var _a={isMounted:function(t){return(t=t._reactInternals)?Rr(t)===t:!1},enqueueSetState:function(t,s,a){t=t._reactInternals;var c=Nt(),d=sr(t),f=Rn(c,d);f.payload=s,a!=null&&(f.callback=a),s=er(t,f,d),s!==null&&(ln(s,t,d,c),ua(s,t,d))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var c=Nt(),d=sr(t),f=Rn(c,d);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=er(t,f,d),s!==null&&(ln(s,t,d,c),ua(s,t,d))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Nt(),c=sr(t),d=Rn(a,c);d.tag=2,s!=null&&(d.callback=s),s=er(t,d,c),s!==null&&(ln(s,t,c,a),ua(s,t,c))}};function Ep(t,s,a,c,d,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,f,v):s.prototype&&s.prototype.isPureReactComponent?!Si(a,c)||!Si(d,f):!0}function Np(t,s,a){var c=!1,d=Jn,f=s.contextType;return typeof f=="object"&&f!==null?f=qt(f):(d=bt(s)?Ar:wt.current,c=s.contextTypes,f=(c=c!=null)?gs(t,d):Jn),s=new s(a,f),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=_a,t.stateNode=s,s._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=f),s}function Ip(t,s,a,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==t&&_a.enqueueReplaceState(s,s.state,null)}function su(t,s,a,c){var d=t.stateNode;d.props=a,d.state=t.memoizedState,d.refs={},Vc(t);var f=s.contextType;typeof f=="object"&&f!==null?d.context=qt(f):(f=bt(s)?Ar:wt.current,d.context=gs(t,f)),d.state=t.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(ru(t,s,f,a),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&_a.enqueueReplaceState(d,d.state,null),da(t,a,d,c),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function Es(t,s){try{var a="",c=s;do a+=$(c),c=c.return;while(c);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:t,source:s,stack:d,digest:null}}function iu(t,s,a){return{value:t,source:null,stack:a??null,digest:s??null}}function ou(t,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Kw=typeof WeakMap=="function"?WeakMap:Map;function Tp(t,s,a){a=Rn(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Na||(Na=!0,xu=c),ou(t,s)},a}function kp(t,s,a){a=Rn(-1,a),a.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){ou(t,s)}}var f=t.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){ou(t,s),typeof c!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function Pp(t,s,a){var c=t.pingCache;if(c===null){c=t.pingCache=new Kw;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),t=l0.bind(null,t,s,a),s.then(t,t))}function Rp(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function bp(t,s,a,c,d){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Rn(-1,1),s.tag=2,er(a,s,1))),a.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var Qw=V.ReactCurrentOwner,At=!1;function Et(t,s,a,c){s.child=t===null?Jf(s,null,a,c):ws(s,t.child,a,c)}function Ap(t,s,a,c,d){a=a.render;var f=s.ref;return Ss(s,d),c=Jc(t,s,a,c,f,d),a=Xc(),t!==null&&!At?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~d,bn(t,s,d)):(qe&&a&&Dc(s),s.flags|=1,Et(t,s,c,d),s.child)}function jp(t,s,a,c,d){if(t===null){var f=a.type;return typeof f=="function"&&!ku(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=f,Dp(t,s,f,c,d)):(t=ba(a.type,null,c,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(f=t.child,(t.lanes&d)===0){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Si,a(v,c)&&t.ref===s.ref)return bn(t,s,d)}return s.flags|=1,t=or(f,c),t.ref=s.ref,t.return=s,s.child=t}function Dp(t,s,a,c,d){if(t!==null){var f=t.memoizedProps;if(Si(f,c)&&t.ref===s.ref)if(At=!1,s.pendingProps=c=f,(t.lanes&d)!==0)(t.flags&131072)!==0&&(At=!0);else return s.lanes=t.lanes,bn(t,s,d)}return au(t,s,a,c,d)}function Op(t,s,a){var c=s.pendingProps,d=c.children,f=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Is,zt),zt|=a;else{if((a&1073741824)===0)return t=f!==null?f.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Le(Is,zt),zt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Le(Is,zt),zt|=c}else f!==null?(c=f.baseLanes|a,s.memoizedState=null):c=a,Le(Is,zt),zt|=c;return Et(t,s,d,a),s.child}function Lp(t,s){var a=s.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function au(t,s,a,c,d){var f=bt(a)?Ar:wt.current;return f=gs(s,f),Ss(s,d),a=Jc(t,s,a,c,f,d),c=Xc(),t!==null&&!At?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~d,bn(t,s,d)):(qe&&c&&Dc(s),s.flags|=1,Et(t,s,a,d),s.child)}function Mp(t,s,a,c,d){if(bt(a)){var f=!0;na(s)}else f=!1;if(Ss(s,d),s.stateNode===null)wa(t,s),Np(s,a,c),su(s,a,c,d),c=!0;else if(t===null){var v=s.stateNode,x=s.memoizedProps;v.props=x;var C=v.context,R=a.contextType;typeof R=="object"&&R!==null?R=qt(R):(R=bt(a)?Ar:wt.current,R=gs(s,R));var U=a.getDerivedStateFromProps,z=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function";z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==c||C!==R)&&Ip(s,v,c,R),Zn=!1;var F=s.memoizedState;v.state=F,da(s,c,v,d),C=s.memoizedState,x!==c||F!==C||Rt.current||Zn?(typeof U=="function"&&(ru(s,a,U,c),C=s.memoizedState),(x=Zn||Ep(s,a,x,c,F,C,R))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=C),v.props=c,v.state=C,v.context=R,c=x):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,Zf(t,s),x=s.memoizedProps,R=s.type===s.elementType?x:sn(s.type,x),v.props=R,z=s.pendingProps,F=v.context,C=a.contextType,typeof C=="object"&&C!==null?C=qt(C):(C=bt(a)?Ar:wt.current,C=gs(s,C));var Y=a.getDerivedStateFromProps;(U=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==z||F!==C)&&Ip(s,v,c,C),Zn=!1,F=s.memoizedState,v.state=F,da(s,c,v,d);var te=s.memoizedState;x!==z||F!==te||Rt.current||Zn?(typeof Y=="function"&&(ru(s,a,Y,c),te=s.memoizedState),(R=Zn||Ep(s,a,R,c,F,te,C)||!1)?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,te,C),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,te,C)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=te),v.props=c,v.state=te,v.context=C,c=R):(typeof v.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(s.flags|=1024),c=!1)}return lu(t,s,a,c,f,d)}function lu(t,s,a,c,d,f){Lp(t,s);var v=(s.flags&128)!==0;if(!c&&!v)return d&&Bf(s,a,!1),bn(t,s,f);c=s.stateNode,Qw.current=s;var x=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,t!==null&&v?(s.child=ws(s,t.child,null,f),s.child=ws(s,null,x,f)):Et(t,s,x,f),s.memoizedState=c.state,d&&Bf(s,a,!0),s.child}function Fp(t){var s=t.stateNode;s.pendingContext?$f(t,s.pendingContext,s.pendingContext!==s.context):s.context&&$f(t,s.context,!1),Hc(t,s.containerInfo)}function Up(t,s,a,c,d){return ys(),Fc(d),s.flags|=256,Et(t,s,a,c),s.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function uu(t){return{baseLanes:t,cachePool:null,transitions:null}}function $p(t,s,a){var c=s.pendingProps,d=Ge.current,f=!1,v=(s.flags&128)!==0,x;if((x=v)||(x=t!==null&&t.memoizedState===null?!1:(d&2)!==0),x?(f=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),Le(Ge,d&1),t===null)return Mc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=c.children,t=c.fallback,f?(c=s.mode,f=s.child,v={mode:"hidden",children:v},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=Aa(v,c,0,null),t=Br(t,c,a,null),f.return=s,t.return=s,f.sibling=t,s.child=f,s.child.memoizedState=uu(a),s.memoizedState=cu,t):du(s,v));if(d=t.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return Yw(t,s,v,c,x,d,a);if(f){f=c.fallback,v=s.mode,d=t.child,x=d.sibling;var C={mode:"hidden",children:c.children};return(v&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=C,s.deletions=null):(c=or(d,C),c.subtreeFlags=d.subtreeFlags&14680064),x!==null?f=or(x,f):(f=Br(f,v,a,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,v=t.child.memoizedState,v=v===null?uu(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=t.childLanes&~a,s.memoizedState=cu,c}return f=t.child,t=f.sibling,c=or(f,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,t!==null&&(a=s.deletions,a===null?(s.deletions=[t],s.flags|=16):a.push(t)),s.child=c,s.memoizedState=null,c}function du(t,s){return s=Aa({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function ya(t,s,a,c){return c!==null&&Fc(c),ws(s,t.child,null,a),t=du(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Yw(t,s,a,c,d,f,v){if(a)return s.flags&256?(s.flags&=-257,c=iu(Error(n(422))),ya(t,s,v,c)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(f=c.fallback,d=s.mode,c=Aa({mode:"visible",children:c.children},d,0,null),f=Br(f,d,v,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,(s.mode&1)!==0&&ws(s,t.child,null,v),s.child.memoizedState=uu(v),s.memoizedState=cu,f);if((s.mode&1)===0)return ya(t,s,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var x=c.dgst;return c=x,f=Error(n(419)),c=iu(f,c,void 0),ya(t,s,v,c)}if(x=(v&t.childLanes)!==0,At||x){if(c=ht,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Pn(t,d),ln(c,t,d,-1))}return Tu(),c=iu(Error(n(421))),ya(t,s,v,c)}return d.data==="$?"?(s.flags|=128,s.child=t.child,s=c0.bind(null,t),d._reactRetry=s,null):(t=f.treeContext,$t=Qn(d.nextSibling),Ut=s,qe=!0,rn=null,t!==null&&(Vt[Ht++]=Tn,Vt[Ht++]=kn,Vt[Ht++]=jr,Tn=t.id,kn=t.overflow,jr=s),s=du(s,c.children),s.flags|=4096,s)}function zp(t,s,a){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),Bc(t.return,s,a)}function hu(t,s,a,c,d){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=d)}function Bp(t,s,a){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if(Et(t,s,c.children,a),c=Ge.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zp(t,a,s);else if(t.tag===19)zp(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Le(Ge,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&ha(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),hu(s,!1,d,a,f);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&ha(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}hu(s,!0,a,null,f);break;case"together":hu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function wa(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function bn(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Fr|=s.lanes,(a&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(n(153));if(s.child!==null){for(t=s.child,a=or(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=or(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Jw(t,s,a){switch(s.tag){case 3:Fp(s),ys();break;case 5:np(s);break;case 1:bt(s.type)&&na(s);break;case 4:Hc(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Le(la,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Le(Ge,Ge.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?$p(t,s,a):(Le(Ge,Ge.current&1),t=bn(t,s,a),t!==null?t.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(t.flags&128)!==0){if(c)return Bp(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Le(Ge,Ge.current),c)break;return null;case 22:case 23:return s.lanes=0,Op(t,s,a)}return bn(t,s,a)}var Wp,fu,Vp,Hp;Wp=function(t,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},fu=function(){},Vp=function(t,s,a,c){var d=t.memoizedProps;if(d!==c){t=s.stateNode,Lr(vn.current);var f=null;switch(a){case"input":d=Ve(t,d),c=Ve(t,c),f=[];break;case"select":d=q({},d,{value:void 0}),c=q({},c,{value:void 0}),f=[];break;case"textarea":d=He(t,d),c=He(t,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=Zo)}Gl(a,c);var v;a=null;for(R in d)if(!c.hasOwnProperty(R)&&d.hasOwnProperty(R)&&d[R]!=null)if(R==="style"){var x=d[R];for(v in x)x.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(o.hasOwnProperty(R)?f||(f=[]):(f=f||[]).push(R,null));for(R in c){var C=c[R];if(x=d!=null?d[R]:void 0,c.hasOwnProperty(R)&&C!==x&&(C!=null||x!=null))if(R==="style")if(x){for(v in x)!x.hasOwnProperty(v)||C&&C.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in C)C.hasOwnProperty(v)&&x[v]!==C[v]&&(a||(a={}),a[v]=C[v])}else a||(f||(f=[]),f.push(R,a)),a=C;else R==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,x=x?x.__html:void 0,C!=null&&x!==C&&(f=f||[]).push(R,C)):R==="children"?typeof C!="string"&&typeof C!="number"||(f=f||[]).push(R,""+C):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(o.hasOwnProperty(R)?(C!=null&&R==="onScroll"&&ze("scroll",t),f||x===C||(f=[])):(f=f||[]).push(R,C))}a&&(f=f||[]).push("style",a);var R=f;(s.updateQueue=R)&&(s.flags|=4)}},Hp=function(t,s,a,c){a!==c&&(s.flags|=4)};function Mi(t,s){if(!qe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function St(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,c=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=c,t.childLanes=a,s}function Xw(t,s,a){var c=s.pendingProps;switch(Oc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(s),null;case 1:return bt(s.type)&&ta(),St(s),null;case 3:return c=s.stateNode,Cs(),Be(Rt),Be(wt),Kc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(oa(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,rn!==null&&(Eu(rn),rn=null))),fu(t,s),St(s),null;case 5:qc(s);var d=Lr(Ai.current);if(a=s.type,t!==null&&s.stateNode!=null)Vp(t,s,a,c,d),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(n(166));return St(s),null}if(t=Lr(vn.current),oa(s)){c=s.stateNode,a=s.type;var f=s.memoizedProps;switch(c[gn]=s,c[Ti]=f,t=(s.mode&1)!==0,a){case"dialog":ze("cancel",c),ze("close",c);break;case"iframe":case"object":case"embed":ze("load",c);break;case"video":case"audio":for(d=0;d<Ei.length;d++)ze(Ei[d],c);break;case"source":ze("error",c);break;case"img":case"image":case"link":ze("error",c),ze("load",c);break;case"details":ze("toggle",c);break;case"input":Po(c,f),ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},ze("invalid",c);break;case"textarea":nt(c,f),ze("invalid",c)}Gl(a,f),d=null;for(var v in f)if(f.hasOwnProperty(v)){var x=f[v];v==="children"?typeof x=="string"?c.textContent!==x&&(f.suppressHydrationWarning!==!0&&Xo(c.textContent,x,t),d=["children",x]):typeof x=="number"&&c.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&Xo(c.textContent,x,t),d=["children",""+x]):o.hasOwnProperty(v)&&x!=null&&v==="onScroll"&&ze("scroll",c)}switch(a){case"input":Oe(c),Ro(c,f,!0);break;case"textarea":Oe(c),Te(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Zo)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=En(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=v.createElement(a,{is:c.is}):(t=v.createElement(a),a==="select"&&(v=t,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):t=v.createElementNS(t,a),t[gn]=s,t[Ti]=c,Wp(t,s,!1,!1),s.stateNode=t;e:{switch(v=Kl(a,c),a){case"dialog":ze("cancel",t),ze("close",t),d=c;break;case"iframe":case"object":case"embed":ze("load",t),d=c;break;case"video":case"audio":for(d=0;d<Ei.length;d++)ze(Ei[d],t);d=c;break;case"source":ze("error",t),d=c;break;case"img":case"image":case"link":ze("error",t),ze("load",t),d=c;break;case"details":ze("toggle",t),d=c;break;case"input":Po(t,c),d=Ve(t,c),ze("invalid",t);break;case"option":d=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},d=q({},c,{value:void 0}),ze("invalid",t);break;case"textarea":nt(t,c),d=He(t,c),ze("invalid",t);break;default:d=c}Gl(a,d),x=d;for(f in x)if(x.hasOwnProperty(f)){var C=x[f];f==="style"?Re(t,C):f==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&bo(t,C)):f==="children"?typeof C=="string"?(a!=="textarea"||C!=="")&&Zt(t,C):typeof C=="number"&&Zt(t,""+C):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?C!=null&&f==="onScroll"&&ze("scroll",t):C!=null&&G(t,f,C,v))}switch(a){case"input":Oe(t),Ro(t,c,!1);break;case"textarea":Oe(t),Te(t);break;case"option":c.value!=null&&t.setAttribute("value",""+ee(c.value));break;case"select":t.multiple=!!c.multiple,f=c.value,f!=null?oe(t,!!c.multiple,f,!1):c.defaultValue!=null&&oe(t,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=Zo)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return St(s),null;case 6:if(t&&s.stateNode!=null)Hp(t,s,t.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(a=Lr(Ai.current),Lr(vn.current),oa(s)){if(c=s.stateNode,a=s.memoizedProps,c[gn]=s,(f=c.nodeValue!==a)&&(t=Ut,t!==null))switch(t.tag){case 3:Xo(c.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xo(c.nodeValue,a,(t.mode&1)!==0)}f&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[gn]=s,s.stateNode=c}return St(s),null;case 13:if(Be(Ge),c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&$t!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Kf(),ys(),s.flags|=98560,f=!1;else if(f=oa(s),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(n(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[gn]=s}else ys(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;St(s),f=!1}else rn!==null&&(Eu(rn),rn=null),f=!0;if(!f)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Ge.current&1)!==0?lt===0&&(lt=3):Tu())),s.updateQueue!==null&&(s.flags|=4),St(s),null);case 4:return Cs(),fu(t,s),t===null&&Ni(s.stateNode.containerInfo),St(s),null;case 10:return zc(s.type._context),St(s),null;case 17:return bt(s.type)&&ta(),St(s),null;case 19:if(Be(Ge),f=s.memoizedState,f===null)return St(s),null;if(c=(s.flags&128)!==0,v=f.rendering,v===null)if(c)Mi(f,!1);else{if(lt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(v=ha(t),v!==null){for(s.flags|=128,Mi(f,!1),c=v.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)f=a,t=c,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=t,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,t=v.dependencies,f.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return Le(Ge,Ge.current&1|2),s.child}t=t.sibling}f.tail!==null&&rt()>Ts&&(s.flags|=128,c=!0,Mi(f,!1),s.lanes=4194304)}else{if(!c)if(t=ha(v),t!==null){if(s.flags|=128,c=!0,a=t.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Mi(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!qe)return St(s),null}else 2*rt()-f.renderingStartTime>Ts&&a!==1073741824&&(s.flags|=128,c=!0,Mi(f,!1),s.lanes=4194304);f.isBackwards?(v.sibling=s.child,s.child=v):(a=f.last,a!==null?a.sibling=v:s.child=v,f.last=v)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=rt(),s.sibling=null,a=Ge.current,Le(Ge,c?a&1|2:a&1),s):(St(s),null);case 22:case 23:return Iu(),c=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(zt&1073741824)!==0&&(St(s),s.subtreeFlags&6&&(s.flags|=8192)):St(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function Zw(t,s){switch(Oc(s),s.tag){case 1:return bt(s.type)&&ta(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Cs(),Be(Rt),Be(wt),Kc(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return qc(s),null;case 13:if(Be(Ge),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(n(340));ys()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Be(Ge),null;case 4:return Cs(),null;case 10:return zc(s.type._context),null;case 22:case 23:return Iu(),null;case 24:return null;default:return null}}var xa=!1,Ct=!1,e0=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ns(t,s){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Xe(t,s,c)}else a.current=null}function pu(t,s,a){try{a()}catch(c){Xe(t,s,c)}}var qp=!1;function t0(t,s){if(Ic=zo,t=Ef(),_c(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,x=-1,C=-1,R=0,U=0,z=t,F=null;t:for(;;){for(var Y;z!==a||d!==0&&z.nodeType!==3||(x=v+d),z!==f||c!==0&&z.nodeType!==3||(C=v+c),z.nodeType===3&&(v+=z.nodeValue.length),(Y=z.firstChild)!==null;)F=z,z=Y;for(;;){if(z===t)break t;if(F===a&&++R===d&&(x=v),F===f&&++U===c&&(C=v),(Y=z.nextSibling)!==null)break;z=F,F=z.parentNode}z=Y}a=x===-1||C===-1?null:{start:x,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tc={focusedElem:t,selectionRange:a},zo=!1,J=s;J!==null;)if(s=J,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,J=t;else for(;J!==null;){s=J;try{var te=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var re=te.memoizedProps,st=te.memoizedState,T=s.stateNode,E=T.getSnapshotBeforeUpdate(s.elementType===s.type?re:sn(s.type,re),st);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var P=s.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(B){Xe(s,s.return,B)}if(t=s.sibling,t!==null){t.return=s.return,J=t;break}J=s.return}return te=qp,qp=!1,te}function Fi(t,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&t)===t){var f=d.destroy;d.destroy=void 0,f!==void 0&&pu(s,a,f)}d=d.next}while(d!==c)}}function Sa(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function mu(t){var s=t.ref;if(s!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof s=="function"?s(t):s.current=t}}function Gp(t){var s=t.alternate;s!==null&&(t.alternate=null,Gp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[gn],delete s[Ti],delete s[bc],delete s[Mw],delete s[Fw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kp(t){return t.tag===5||t.tag===3||t.tag===4}function Qp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gu(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(t,s):a.insertBefore(t,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(t,a)):(s=a,s.appendChild(t)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Zo));else if(c!==4&&(t=t.child,t!==null))for(gu(t,s,a),t=t.sibling;t!==null;)gu(t,s,a),t=t.sibling}function vu(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(vu(t,s,a),t=t.sibling;t!==null;)vu(t,s,a),t=t.sibling}var gt=null,on=!1;function tr(t,s,a){for(a=a.child;a!==null;)Yp(t,s,a),a=a.sibling}function Yp(t,s,a){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Oo,a)}catch{}switch(a.tag){case 5:Ct||Ns(a,s);case 6:var c=gt,d=on;gt=null,tr(t,s,a),gt=c,on=d,gt!==null&&(on?(t=gt,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):gt.removeChild(a.stateNode));break;case 18:gt!==null&&(on?(t=gt,a=a.stateNode,t.nodeType===8?Rc(t.parentNode,a):t.nodeType===1&&Rc(t,a),gi(t)):Rc(gt,a.stateNode));break;case 4:c=gt,d=on,gt=a.stateNode.containerInfo,on=!0,tr(t,s,a),gt=c,on=d;break;case 0:case 11:case 14:case 15:if(!Ct&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&pu(a,s,v),d=d.next}while(d!==c)}tr(t,s,a);break;case 1:if(!Ct&&(Ns(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(x){Xe(a,s,x)}tr(t,s,a);break;case 21:tr(t,s,a);break;case 22:a.mode&1?(Ct=(c=Ct)||a.memoizedState!==null,tr(t,s,a),Ct=c):tr(t,s,a);break;default:tr(t,s,a)}}function Jp(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new e0),s.forEach(function(c){var d=u0.bind(null,t,c);a.has(c)||(a.add(c),c.then(d,d))})}}function an(t,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var f=t,v=s,x=v;e:for(;x!==null;){switch(x.tag){case 5:gt=x.stateNode,on=!1;break e;case 3:gt=x.stateNode.containerInfo,on=!0;break e;case 4:gt=x.stateNode.containerInfo,on=!0;break e}x=x.return}if(gt===null)throw Error(n(160));Yp(f,v,d),gt=null,on=!1;var C=d.alternate;C!==null&&(C.return=null),d.return=null}catch(R){Xe(d,s,R)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Xp(s,t),s=s.sibling}function Xp(t,s){var a=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(s,t),yn(t),c&4){try{Fi(3,t,t.return),Sa(3,t)}catch(re){Xe(t,t.return,re)}try{Fi(5,t,t.return)}catch(re){Xe(t,t.return,re)}}break;case 1:an(s,t),yn(t),c&512&&a!==null&&Ns(a,a.return);break;case 5:if(an(s,t),yn(t),c&512&&a!==null&&Ns(a,a.return),t.flags&32){var d=t.stateNode;try{Zt(d,"")}catch(re){Xe(t,t.return,re)}}if(c&4&&(d=t.stateNode,d!=null)){var f=t.memoizedProps,v=a!==null?a.memoizedProps:f,x=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&ql(d,f),Kl(x,v);var R=Kl(x,f);for(v=0;v<C.length;v+=2){var U=C[v],z=C[v+1];U==="style"?Re(d,z):U==="dangerouslySetInnerHTML"?bo(d,z):U==="children"?Zt(d,z):G(d,U,z,R)}switch(x){case"input":ss(d,f);break;case"textarea":Mt(d,f);break;case"select":var F=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var Y=f.value;Y!=null?oe(d,!!f.multiple,Y,!1):F!==!!f.multiple&&(f.defaultValue!=null?oe(d,!!f.multiple,f.defaultValue,!0):oe(d,!!f.multiple,f.multiple?[]:"",!1))}d[Ti]=f}catch(re){Xe(t,t.return,re)}}break;case 6:if(an(s,t),yn(t),c&4){if(t.stateNode===null)throw Error(n(162));d=t.stateNode,f=t.memoizedProps;try{d.nodeValue=f}catch(re){Xe(t,t.return,re)}}break;case 3:if(an(s,t),yn(t),c&4&&a!==null&&a.memoizedState.isDehydrated)try{gi(s.containerInfo)}catch(re){Xe(t,t.return,re)}break;case 4:an(s,t),yn(t);break;case 13:an(s,t),yn(t),d=t.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(wu=rt())),c&4&&Jp(t);break;case 22:if(U=a!==null&&a.memoizedState!==null,t.mode&1?(Ct=(R=Ct)||U,an(s,t),Ct=R):an(s,t),yn(t),c&8192){if(R=t.memoizedState!==null,(t.stateNode.isHidden=R)&&!U&&(t.mode&1)!==0)for(J=t,U=t.child;U!==null;){for(z=J=U;J!==null;){switch(F=J,Y=F.child,F.tag){case 0:case 11:case 14:case 15:Fi(4,F,F.return);break;case 1:Ns(F,F.return);var te=F.stateNode;if(typeof te.componentWillUnmount=="function"){c=F,a=F.return;try{s=c,te.props=s.memoizedProps,te.state=s.memoizedState,te.componentWillUnmount()}catch(re){Xe(c,a,re)}}break;case 5:Ns(F,F.return);break;case 22:if(F.memoizedState!==null){tm(z);continue}}Y!==null?(Y.return=F,J=Y):tm(z)}U=U.sibling}e:for(U=null,z=t;;){if(z.tag===5){if(U===null){U=z;try{d=z.stateNode,R?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=z.stateNode,C=z.memoizedProps.style,v=C!=null&&C.hasOwnProperty("display")?C.display:null,x.style.display=Se("display",v))}catch(re){Xe(t,t.return,re)}}}else if(z.tag===6){if(U===null)try{z.stateNode.nodeValue=R?"":z.memoizedProps}catch(re){Xe(t,t.return,re)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===t)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===t)break e;for(;z.sibling===null;){if(z.return===null||z.return===t)break e;U===z&&(U=null),z=z.return}U===z&&(U=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:an(s,t),yn(t),c&4&&Jp(t);break;case 21:break;default:an(s,t),yn(t)}}function yn(t){var s=t.flags;if(s&2){try{e:{for(var a=t.return;a!==null;){if(Kp(a)){var c=a;break e}a=a.return}throw Error(n(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Zt(d,""),c.flags&=-33);var f=Qp(t);vu(t,f,d);break;case 3:case 4:var v=c.stateNode.containerInfo,x=Qp(t);gu(t,x,v);break;default:throw Error(n(161))}}catch(C){Xe(t,t.return,C)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function n0(t,s,a){J=t,Zp(t)}function Zp(t,s,a){for(var c=(t.mode&1)!==0;J!==null;){var d=J,f=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||xa;if(!v){var x=d.alternate,C=x!==null&&x.memoizedState!==null||Ct;x=xa;var R=Ct;if(xa=v,(Ct=C)&&!R)for(J=d;J!==null;)v=J,C=v.child,v.tag===22&&v.memoizedState!==null?nm(d):C!==null?(C.return=v,J=C):nm(d);for(;f!==null;)J=f,Zp(f),f=f.sibling;J=d,xa=x,Ct=R}em(t)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,J=f):em(t)}}function em(t){for(;J!==null;){var s=J;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ct||Sa(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ct)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:sn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=s.updateQueue;f!==null&&tp(s,f,c);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}tp(s,v,a)}break;case 5:var x=s.stateNode;if(a===null&&s.flags&4){a=x;var C=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&a.focus();break;case"img":C.src&&(a.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var R=s.alternate;if(R!==null){var U=R.memoizedState;if(U!==null){var z=U.dehydrated;z!==null&&gi(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ct||s.flags&512&&mu(s)}catch(F){Xe(s,s.return,F)}}if(s===t){J=null;break}if(a=s.sibling,a!==null){a.return=s.return,J=a;break}J=s.return}}function tm(t){for(;J!==null;){var s=J;if(s===t){J=null;break}var a=s.sibling;if(a!==null){a.return=s.return,J=a;break}J=s.return}}function nm(t){for(;J!==null;){var s=J;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Sa(4,s)}catch(C){Xe(s,a,C)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(C){Xe(s,d,C)}}var f=s.return;try{mu(s)}catch(C){Xe(s,f,C)}break;case 5:var v=s.return;try{mu(s)}catch(C){Xe(s,v,C)}}}catch(C){Xe(s,s.return,C)}if(s===t){J=null;break}var x=s.sibling;if(x!==null){x.return=s.return,J=x;break}J=s.return}}var r0=Math.ceil,Ca=V.ReactCurrentDispatcher,_u=V.ReactCurrentOwner,Kt=V.ReactCurrentBatchConfig,Ne=0,ht=null,ot=null,vt=0,zt=0,Is=Yn(0),lt=0,Ui=null,Fr=0,Ea=0,yu=0,$i=null,jt=null,wu=0,Ts=1/0,An=null,Na=!1,xu=null,nr=null,Ia=!1,rr=null,Ta=0,zi=0,Su=null,ka=-1,Pa=0;function Nt(){return(Ne&6)!==0?rt():ka!==-1?ka:ka=rt()}function sr(t){return(t.mode&1)===0?1:(Ne&2)!==0&&vt!==0?vt&-vt:$w.transition!==null?(Pa===0&&(Pa=Kh()),Pa):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:rf(t.type)),t)}function ln(t,s,a,c){if(50<zi)throw zi=0,Su=null,Error(n(185));di(t,a,c),((Ne&2)===0||t!==ht)&&(t===ht&&((Ne&2)===0&&(Ea|=a),lt===4&&ir(t,vt)),Dt(t,c),a===1&&Ne===0&&(s.mode&1)===0&&(Ts=rt()+500,ra&&Xn()))}function Dt(t,s){var a=t.callbackNode;$y(t,s);var c=Fo(t,t===ht?vt:0);if(c===0)a!==null&&Hh(a),t.callbackNode=null,t.callbackPriority=0;else if(s=c&-c,t.callbackPriority!==s){if(a!=null&&Hh(a),s===1)t.tag===0?Uw(sm.bind(null,t)):Wf(sm.bind(null,t)),Ow(function(){(Ne&6)===0&&Xn()}),a=null;else{switch(Qh(c)){case 1:a=tc;break;case 4:a=qh;break;case 16:a=Do;break;case 536870912:a=Gh;break;default:a=Do}a=hm(a,rm.bind(null,t))}t.callbackPriority=s,t.callbackNode=a}}function rm(t,s){if(ka=-1,Pa=0,(Ne&6)!==0)throw Error(n(327));var a=t.callbackNode;if(ks()&&t.callbackNode!==a)return null;var c=Fo(t,t===ht?vt:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||s)s=Ra(t,c);else{s=c;var d=Ne;Ne|=2;var f=om();(ht!==t||vt!==s)&&(An=null,Ts=rt()+500,$r(t,s));do try{o0();break}catch(x){im(t,x)}while(!0);$c(),Ca.current=f,Ne=d,ot!==null?s=0:(ht=null,vt=0,s=lt)}if(s!==0){if(s===2&&(d=nc(t),d!==0&&(c=d,s=Cu(t,d))),s===1)throw a=Ui,$r(t,0),ir(t,c),Dt(t,rt()),a;if(s===6)ir(t,c);else{if(d=t.current.alternate,(c&30)===0&&!s0(d)&&(s=Ra(t,c),s===2&&(f=nc(t),f!==0&&(c=f,s=Cu(t,f))),s===1))throw a=Ui,$r(t,0),ir(t,c),Dt(t,rt()),a;switch(t.finishedWork=d,t.finishedLanes=c,s){case 0:case 1:throw Error(n(345));case 2:zr(t,jt,An);break;case 3:if(ir(t,c),(c&130023424)===c&&(s=wu+500-rt(),10<s)){if(Fo(t,0)!==0)break;if(d=t.suspendedLanes,(d&c)!==c){Nt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=Pc(zr.bind(null,t,jt,An),s);break}zr(t,jt,An);break;case 4:if(ir(t,c),(c&4194240)===c)break;for(s=t.eventTimes,d=-1;0<c;){var v=31-tn(c);f=1<<v,v=s[v],v>d&&(d=v),c&=~f}if(c=d,c=rt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*r0(c/1960))-c,10<c){t.timeoutHandle=Pc(zr.bind(null,t,jt,An),c);break}zr(t,jt,An);break;case 5:zr(t,jt,An);break;default:throw Error(n(329))}}}return Dt(t,rt()),t.callbackNode===a?rm.bind(null,t):null}function Cu(t,s){var a=$i;return t.current.memoizedState.isDehydrated&&($r(t,s).flags|=256),t=Ra(t,s),t!==2&&(s=jt,jt=a,s!==null&&Eu(s)),t}function Eu(t){jt===null?jt=t:jt.push.apply(jt,t)}function s0(t){for(var s=t;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],f=d.getSnapshot;d=d.value;try{if(!nn(f(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ir(t,s){for(s&=~yu,s&=~Ea,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var a=31-tn(s),c=1<<a;t[a]=-1,s&=~c}}function sm(t){if((Ne&6)!==0)throw Error(n(327));ks();var s=Fo(t,0);if((s&1)===0)return Dt(t,rt()),null;var a=Ra(t,s);if(t.tag!==0&&a===2){var c=nc(t);c!==0&&(s=c,a=Cu(t,c))}if(a===1)throw a=Ui,$r(t,0),ir(t,s),Dt(t,rt()),a;if(a===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,zr(t,jt,An),Dt(t,rt()),null}function Nu(t,s){var a=Ne;Ne|=1;try{return t(s)}finally{Ne=a,Ne===0&&(Ts=rt()+500,ra&&Xn())}}function Ur(t){rr!==null&&rr.tag===0&&(Ne&6)===0&&ks();var s=Ne;Ne|=1;var a=Kt.transition,c=Ae;try{if(Kt.transition=null,Ae=1,t)return t()}finally{Ae=c,Kt.transition=a,Ne=s,(Ne&6)===0&&Xn()}}function Iu(){zt=Is.current,Be(Is)}function $r(t,s){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,Dw(a)),ot!==null)for(a=ot.return;a!==null;){var c=a;switch(Oc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ta();break;case 3:Cs(),Be(Rt),Be(wt),Kc();break;case 5:qc(c);break;case 4:Cs();break;case 13:Be(Ge);break;case 19:Be(Ge);break;case 10:zc(c.type._context);break;case 22:case 23:Iu()}a=a.return}if(ht=t,ot=t=or(t.current,null),vt=zt=s,lt=0,Ui=null,yu=Ea=Fr=0,jt=$i=null,Or!==null){for(s=0;s<Or.length;s++)if(a=Or[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,f=a.pending;if(f!==null){var v=f.next;f.next=d,c.next=v}a.pending=c}Or=null}return t}function im(t,s){do{var a=ot;try{if($c(),fa.current=va,pa){for(var c=Ke.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}pa=!1}if(Mr=0,dt=at=Ke=null,ji=!1,Di=0,_u.current=null,a===null||a.return===null){lt=1,Ui=s,ot=null;break}e:{var f=t,v=a.return,x=a,C=s;if(s=vt,x.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var R=C,U=x,z=U.tag;if((U.mode&1)===0&&(z===0||z===11||z===15)){var F=U.alternate;F?(U.updateQueue=F.updateQueue,U.memoizedState=F.memoizedState,U.lanes=F.lanes):(U.updateQueue=null,U.memoizedState=null)}var Y=Rp(v);if(Y!==null){Y.flags&=-257,bp(Y,v,x,f,s),Y.mode&1&&Pp(f,R,s),s=Y,C=R;var te=s.updateQueue;if(te===null){var re=new Set;re.add(C),s.updateQueue=re}else te.add(C);break e}else{if((s&1)===0){Pp(f,R,s),Tu();break e}C=Error(n(426))}}else if(qe&&x.mode&1){var st=Rp(v);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),bp(st,v,x,f,s),Fc(Es(C,x));break e}}f=C=Es(C,x),lt!==4&&(lt=2),$i===null?$i=[f]:$i.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,s&=-s,f.lanes|=s;var T=Tp(f,C,s);ep(f,T);break e;case 1:x=C;var E=f.type,P=f.stateNode;if((f.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(nr===null||!nr.has(P)))){f.flags|=65536,s&=-s,f.lanes|=s;var B=kp(f,x,s);ep(f,B);break e}}f=f.return}while(f!==null)}lm(a)}catch(se){s=se,ot===a&&a!==null&&(ot=a=a.return);continue}break}while(!0)}function om(){var t=Ca.current;return Ca.current=va,t===null?va:t}function Tu(){(lt===0||lt===3||lt===2)&&(lt=4),ht===null||(Fr&268435455)===0&&(Ea&268435455)===0||ir(ht,vt)}function Ra(t,s){var a=Ne;Ne|=2;var c=om();(ht!==t||vt!==s)&&(An=null,$r(t,s));do try{i0();break}catch(d){im(t,d)}while(!0);if($c(),Ne=a,Ca.current=c,ot!==null)throw Error(n(261));return ht=null,vt=0,lt}function i0(){for(;ot!==null;)am(ot)}function o0(){for(;ot!==null&&!by();)am(ot)}function am(t){var s=dm(t.alternate,t,zt);t.memoizedProps=t.pendingProps,s===null?lm(t):ot=s,_u.current=null}function lm(t){var s=t;do{var a=s.alternate;if(t=s.return,(s.flags&32768)===0){if(a=Xw(a,s,zt),a!==null){ot=a;return}}else{if(a=Zw(a,s),a!==null){a.flags&=32767,ot=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,ot=null;return}}if(s=s.sibling,s!==null){ot=s;return}ot=s=t}while(s!==null);lt===0&&(lt=5)}function zr(t,s,a){var c=Ae,d=Kt.transition;try{Kt.transition=null,Ae=1,a0(t,s,a,c)}finally{Kt.transition=d,Ae=c}return null}function a0(t,s,a,c){do ks();while(rr!==null);if((Ne&6)!==0)throw Error(n(327));a=t.finishedWork;var d=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var f=a.lanes|a.childLanes;if(zy(t,f),t===ht&&(ot=ht=null,vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ia||(Ia=!0,hm(Do,function(){return ks(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=Kt.transition,Kt.transition=null;var v=Ae;Ae=1;var x=Ne;Ne|=4,_u.current=null,t0(t,a),Xp(a,t),Tw(Tc),zo=!!Ic,Tc=Ic=null,t.current=a,n0(a),Ay(),Ne=x,Ae=v,Kt.transition=f}else t.current=a;if(Ia&&(Ia=!1,rr=t,Ta=d),f=t.pendingLanes,f===0&&(nr=null),Oy(a.stateNode),Dt(t,rt()),s!==null)for(c=t.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Na)throw Na=!1,t=xu,xu=null,t;return(Ta&1)!==0&&t.tag!==0&&ks(),f=t.pendingLanes,(f&1)!==0?t===Su?zi++:(zi=0,Su=t):zi=0,Xn(),null}function ks(){if(rr!==null){var t=Qh(Ta),s=Kt.transition,a=Ae;try{if(Kt.transition=null,Ae=16>t?16:t,rr===null)var c=!1;else{if(t=rr,rr=null,Ta=0,(Ne&6)!==0)throw Error(n(331));var d=Ne;for(Ne|=4,J=t.current;J!==null;){var f=J,v=f.child;if((J.flags&16)!==0){var x=f.deletions;if(x!==null){for(var C=0;C<x.length;C++){var R=x[C];for(J=R;J!==null;){var U=J;switch(U.tag){case 0:case 11:case 15:Fi(8,U,f)}var z=U.child;if(z!==null)z.return=U,J=z;else for(;J!==null;){U=J;var F=U.sibling,Y=U.return;if(Gp(U),U===R){J=null;break}if(F!==null){F.return=Y,J=F;break}J=Y}}}var te=f.alternate;if(te!==null){var re=te.child;if(re!==null){te.child=null;do{var st=re.sibling;re.sibling=null,re=st}while(re!==null)}}J=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,J=v;else e:for(;J!==null;){if(f=J,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Fi(9,f,f.return)}var T=f.sibling;if(T!==null){T.return=f.return,J=T;break e}J=f.return}}var E=t.current;for(J=E;J!==null;){v=J;var P=v.child;if((v.subtreeFlags&2064)!==0&&P!==null)P.return=v,J=P;else e:for(v=E;J!==null;){if(x=J,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Sa(9,x)}}catch(se){Xe(x,x.return,se)}if(x===v){J=null;break e}var B=x.sibling;if(B!==null){B.return=x.return,J=B;break e}J=x.return}}if(Ne=d,Xn(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Oo,t)}catch{}c=!0}return c}finally{Ae=a,Kt.transition=s}}return!1}function cm(t,s,a){s=Es(a,s),s=Tp(t,s,1),t=er(t,s,1),s=Nt(),t!==null&&(di(t,1,s),Dt(t,s))}function Xe(t,s,a){if(t.tag===3)cm(t,t,a);else for(;s!==null;){if(s.tag===3){cm(s,t,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(nr===null||!nr.has(c))){t=Es(a,t),t=kp(s,t,1),s=er(s,t,1),t=Nt(),s!==null&&(di(s,1,t),Dt(s,t));break}}s=s.return}}function l0(t,s,a){var c=t.pingCache;c!==null&&c.delete(s),s=Nt(),t.pingedLanes|=t.suspendedLanes&a,ht===t&&(vt&a)===a&&(lt===4||lt===3&&(vt&130023424)===vt&&500>rt()-wu?$r(t,0):yu|=a),Dt(t,s)}function um(t,s){s===0&&((t.mode&1)===0?s=1:(s=Mo,Mo<<=1,(Mo&130023424)===0&&(Mo=4194304)));var a=Nt();t=Pn(t,s),t!==null&&(di(t,s,a),Dt(t,a))}function c0(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),um(t,a)}function u0(t,s){var a=0;switch(t.tag){case 13:var c=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(s),um(t,a)}var dm;dm=function(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps||Rt.current)At=!0;else{if((t.lanes&a)===0&&(s.flags&128)===0)return At=!1,Jw(t,s,a);At=(t.flags&131072)!==0}else At=!1,qe&&(s.flags&1048576)!==0&&Vf(s,ia,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;wa(t,s),t=s.pendingProps;var d=gs(s,wt.current);Ss(s,a),d=Jc(null,s,c,t,d,a);var f=Xc();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,bt(c)?(f=!0,na(s)):f=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Vc(s),d.updater=_a,s.stateNode=d,d._reactInternals=s,su(s,c,t,a),s=lu(null,s,c,!0,f,a)):(s.tag=0,qe&&f&&Dc(s),Et(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(wa(t,s),t=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=h0(c),t=sn(c,t),d){case 0:s=au(null,s,c,t,a);break e;case 1:s=Mp(null,s,c,t,a);break e;case 11:s=Ap(null,s,c,t,a);break e;case 14:s=jp(null,s,c,sn(c.type,t),a);break e}throw Error(n(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:sn(c,d),au(t,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:sn(c,d),Mp(t,s,c,d,a);case 3:e:{if(Fp(s),t===null)throw Error(n(387));c=s.pendingProps,f=s.memoizedState,d=f.element,Zf(t,s),da(s,c,null,a);var v=s.memoizedState;if(c=v.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){d=Es(Error(n(423)),s),s=Up(t,s,c,a,d);break e}else if(c!==d){d=Es(Error(n(424)),s),s=Up(t,s,c,a,d);break e}else for($t=Qn(s.stateNode.containerInfo.firstChild),Ut=s,qe=!0,rn=null,a=Jf(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ys(),c===d){s=bn(t,s,a);break e}Et(t,s,c,a)}s=s.child}return s;case 5:return np(s),t===null&&Mc(s),c=s.type,d=s.pendingProps,f=t!==null?t.memoizedProps:null,v=d.children,kc(c,d)?v=null:f!==null&&kc(c,f)&&(s.flags|=32),Lp(t,s),Et(t,s,v,a),s.child;case 6:return t===null&&Mc(s),null;case 13:return $p(t,s,a);case 4:return Hc(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=ws(s,null,c,a):Et(t,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:sn(c,d),Ap(t,s,c,d,a);case 7:return Et(t,s,s.pendingProps,a),s.child;case 8:return Et(t,s,s.pendingProps.children,a),s.child;case 12:return Et(t,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,f=s.memoizedProps,v=d.value,Le(la,c._currentValue),c._currentValue=v,f!==null)if(nn(f.value,v)){if(f.children===d.children&&!Rt.current){s=bn(t,s,a);break e}}else for(f=s.child,f!==null&&(f.return=s);f!==null;){var x=f.dependencies;if(x!==null){v=f.child;for(var C=x.firstContext;C!==null;){if(C.context===c){if(f.tag===1){C=Rn(-1,a&-a),C.tag=2;var R=f.updateQueue;if(R!==null){R=R.shared;var U=R.pending;U===null?C.next=C:(C.next=U.next,U.next=C),R.pending=C}}f.lanes|=a,C=f.alternate,C!==null&&(C.lanes|=a),Bc(f.return,a,s),x.lanes|=a;break}C=C.next}}else if(f.tag===10)v=f.type===s.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(n(341));v.lanes|=a,x=v.alternate,x!==null&&(x.lanes|=a),Bc(v,a,s),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===s){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}Et(t,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Ss(s,a),d=qt(d),c=c(d),s.flags|=1,Et(t,s,c,a),s.child;case 14:return c=s.type,d=sn(c,s.pendingProps),d=sn(c.type,d),jp(t,s,c,d,a);case 15:return Dp(t,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:sn(c,d),wa(t,s),s.tag=1,bt(c)?(t=!0,na(s)):t=!1,Ss(s,a),Np(s,c,d),su(s,c,d,a),lu(null,s,c,!0,t,a);case 19:return Bp(t,s,a);case 22:return Op(t,s,a)}throw Error(n(156,s.tag))};function hm(t,s){return Vh(t,s)}function d0(t,s,a,c){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,s,a,c){return new d0(t,s,a,c)}function ku(t){return t=t.prototype,!(!t||!t.isReactComponent)}function h0(t){if(typeof t=="function")return ku(t)?1:0;if(t!=null){if(t=t.$$typeof,t===We)return 11;if(t===Ye)return 14}return 2}function or(t,s){var a=t.alternate;return a===null?(a=Qt(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function ba(t,s,a,c,d,f){var v=2;if(c=t,typeof t=="function")ku(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case Z:return Br(a.children,d,f,s);case me:v=8,d|=8;break;case Ee:return t=Qt(12,a,s,d|2),t.elementType=Ee,t.lanes=f,t;case Ue:return t=Qt(13,a,s,d),t.elementType=Ue,t.lanes=f,t;case $e:return t=Qt(19,a,s,d),t.elementType=$e,t.lanes=f,t;case Ce:return Aa(a,d,f,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ie:v=10;break e;case be:v=9;break e;case We:v=11;break e;case Ye:v=14;break e;case Je:v=16,c=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return s=Qt(v,a,s,d),s.elementType=t,s.type=c,s.lanes=f,s}function Br(t,s,a,c){return t=Qt(7,t,c,s),t.lanes=a,t}function Aa(t,s,a,c){return t=Qt(22,t,c,s),t.elementType=Ce,t.lanes=a,t.stateNode={isHidden:!1},t}function Pu(t,s,a){return t=Qt(6,t,null,s),t.lanes=a,t}function Ru(t,s,a){return s=Qt(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function f0(t,s,a,c,d){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rc(0),this.expirationTimes=rc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rc(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function bu(t,s,a,c,d,f,v,x,C){return t=new f0(t,s,a,x,C),s===1?(s=1,f===!0&&(s|=8)):s=0,f=Qt(3,null,null,s),t.current=f,f.stateNode=t,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vc(f),t}function p0(t,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:c==null?null:""+c,children:t,containerInfo:s,implementation:a}}function fm(t){if(!t)return Jn;t=t._reactInternals;e:{if(Rr(t)!==t||t.tag!==1)throw Error(n(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(bt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(t.tag===1){var a=t.type;if(bt(a))return zf(t,a,s)}return s}function pm(t,s,a,c,d,f,v,x,C){return t=bu(a,c,!0,t,d,f,v,x,C),t.context=fm(null),a=t.current,c=Nt(),d=sr(a),f=Rn(c,d),f.callback=s??null,er(a,f,d),t.current.lanes=d,di(t,d,c),Dt(t,c),t}function ja(t,s,a,c){var d=s.current,f=Nt(),v=sr(d);return a=fm(a),s.context===null?s.context=a:s.pendingContext=a,s=Rn(f,v),s.payload={element:t},c=c===void 0?null:c,c!==null&&(s.callback=c),t=er(d,s,v),t!==null&&(ln(t,d,v,f),ua(t,d,v)),v}function Da(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mm(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Au(t,s){mm(t,s),(t=t.alternate)&&mm(t,s)}function m0(){return null}var gm=typeof reportError=="function"?reportError:function(t){console.error(t)};function ju(t){this._internalRoot=t}Oa.prototype.render=ju.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(n(409));ja(t,s,null,null)},Oa.prototype.unmount=ju.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ur(function(){ja(null,t,null,null)}),s[Nn]=null}};function Oa(t){this._internalRoot=t}Oa.prototype.unstable_scheduleHydration=function(t){if(t){var s=Xh();t={blockedOn:null,target:t,priority:s};for(var a=0;a<qn.length&&s!==0&&s<qn[a].priority;a++);qn.splice(a,0,t),a===0&&tf(t)}};function Du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function La(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vm(){}function g0(t,s,a,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var R=Da(v);f.call(R)}}var v=pm(s,c,t,0,null,!1,!1,"",vm);return t._reactRootContainer=v,t[Nn]=v.current,Ni(t.nodeType===8?t.parentNode:t),Ur(),v}for(;d=t.lastChild;)t.removeChild(d);if(typeof c=="function"){var x=c;c=function(){var R=Da(C);x.call(R)}}var C=bu(t,0,!1,null,null,!1,!1,"",vm);return t._reactRootContainer=C,t[Nn]=C.current,Ni(t.nodeType===8?t.parentNode:t),Ur(function(){ja(s,C,a,c)}),C}function Ma(t,s,a,c,d){var f=a._reactRootContainer;if(f){var v=f;if(typeof d=="function"){var x=d;d=function(){var C=Da(v);x.call(C)}}ja(s,v,t,d)}else v=g0(a,s,t,d,c);return Da(v)}Yh=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var a=ui(s.pendingLanes);a!==0&&(sc(s,a|1),Dt(s,rt()),(Ne&6)===0&&(Ts=rt()+500,Xn()))}break;case 13:Ur(function(){var c=Pn(t,1);if(c!==null){var d=Nt();ln(c,t,1,d)}}),Au(t,1)}},ic=function(t){if(t.tag===13){var s=Pn(t,134217728);if(s!==null){var a=Nt();ln(s,t,134217728,a)}Au(t,134217728)}},Jh=function(t){if(t.tag===13){var s=sr(t),a=Pn(t,s);if(a!==null){var c=Nt();ln(a,t,s,c)}Au(t,s)}},Xh=function(){return Ae},Zh=function(t,s){var a=Ae;try{return Ae=t,s()}finally{Ae=a}},Jl=function(t,s,a){switch(s){case"input":if(ss(t,a),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==t&&c.form===t.form){var d=ea(c);if(!d)throw Error(n(90));Wt(c),ss(c,d)}}}break;case"textarea":Mt(t,a);break;case"select":s=a.value,s!=null&&oe(t,!!a.multiple,s,!1)}},Mh=Nu,Fh=Ur;var v0={usingClientEntryPoint:!1,Events:[ki,ps,ea,Oh,Lh,Nu]},Bi={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_0={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bh(t),t===null?null:t.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||m0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fa.isDisabled&&Fa.supportsFiber)try{Oo=Fa.inject(_0),mn=Fa}catch{}}return Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v0,Ot.createPortal=function(t,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Du(s))throw Error(n(200));return p0(t,s,null,a)},Ot.createRoot=function(t,s){if(!Du(t))throw Error(n(299));var a=!1,c="",d=gm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=bu(t,1,!1,null,null,a,!1,c,d),t[Nn]=s.current,Ni(t.nodeType===8?t.parentNode:t),new ju(s)},Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=Bh(s),t=t===null?null:t.stateNode,t},Ot.flushSync=function(t){return Ur(t)},Ot.hydrate=function(t,s,a){if(!La(s))throw Error(n(200));return Ma(null,t,s,!0,a)},Ot.hydrateRoot=function(t,s,a){if(!Du(t))throw Error(n(405));var c=a!=null&&a.hydratedSources||null,d=!1,f="",v=gm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=pm(s,null,t,1,a??null,d,!1,f,v),t[Nn]=s.current,Ni(t),c)for(t=0;t<c.length;t++)a=c[t],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Oa(s)},Ot.render=function(t,s,a){if(!La(s))throw Error(n(200));return Ma(null,t,s,!1,a)},Ot.unmountComponentAtNode=function(t){if(!La(t))throw Error(n(40));return t._reactRootContainer?(Ur(function(){Ma(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1},Ot.unstable_batchedUpdates=Nu,Ot.unstable_renderSubtreeIntoContainer=function(t,s,a,c){if(!La(a))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Ma(t,s,a,!1,c)},Ot.version="18.3.1-next-f1338f8080-20240426",Ot}var Nm;function Yg(){if(Nm)return Mu.exports;Nm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Mu.exports=T0(),Mu.exports}var Im;function k0(){if(Im)return Ua;Im=1;var r=Yg();return Ua.createRoot=r.createRoot,Ua.hydrateRoot=r.hydrateRoot,Ua}var P0=k0();const R0=Kg(P0);Yg();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function no(){return no=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},no.apply(this,arguments)}var hr;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(hr||(hr={}));const Tm="popstate";function b0(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:u,hash:p}=i.location;return id("",{pathname:l,search:u,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:Ja(o)}return j0(e,n,null,r)}function Qe(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ad(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function A0(){return Math.random().toString(36).substr(2,8)}function km(r,e){return{usr:r.state,key:r.key,idx:e}}function id(r,e,n,i){return n===void 0&&(n=null),no({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?qs(e):e,{state:n,key:e&&e.key||i||A0()})}function Ja(r){let{pathname:e="/",search:n="",hash:i=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function qs(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function j0(r,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,u=o.history,p=hr.Pop,m=null,g=w();g==null&&(g=0,u.replaceState(no({},u.state,{idx:g}),""));function w(){return(u.state||{idx:null}).idx}function _(){p=hr.Pop;let D=w(),X=D==null?null:D-g;g=D,m&&m({action:p,location:M.location,delta:X})}function y(D,X){p=hr.Push;let j=id(M.location,D,X);g=w()+1;let G=km(j,g),V=M.createHref(j);try{u.pushState(G,"",V)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;o.location.assign(V)}l&&m&&m({action:p,location:M.location,delta:1})}function b(D,X){p=hr.Replace;let j=id(M.location,D,X);g=w();let G=km(j,g),V=M.createHref(j);u.replaceState(G,"",V),l&&m&&m({action:p,location:M.location,delta:0})}function A(D){let X=o.location.origin!=="null"?o.location.origin:o.location.href,j=typeof D=="string"?D:Ja(D);return j=j.replace(/ $/,"%20"),Qe(X,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,X)}let M={get action(){return p},get location(){return r(o,u)},listen(D){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Tm,_),m=D,()=>{o.removeEventListener(Tm,_),m=null}},createHref(D){return e(o,D)},createURL:A,encodeLocation(D){let X=A(D);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:y,replace:b,go(D){return u.go(D)}};return M}var Pm;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Pm||(Pm={}));function D0(r,e,n){return n===void 0&&(n="/"),O0(r,e,n)}function O0(r,e,n,i){let o=typeof e=="string"?qs(e):e,l=Ms(o.pathname||"/",n);if(l==null)return null;let u=Jg(r);L0(u);let p=null;for(let m=0;p==null&&m<u.length;++m){let g=G0(l);p=H0(u[m],g)}return p}function Jg(r,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(l,u,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};m.relativePath.startsWith("/")&&(Qe(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let g=pr([i,m.relativePath]),w=n.concat(m);l.children&&l.children.length>0&&(Qe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Jg(l.children,e,w,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:W0(g,l.index),routesMeta:w})};return r.forEach((l,u)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,u);else for(let m of Xg(l.path))o(l,u,m)}),e}function Xg(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let u=Xg(i.join("/")),p=[];return p.push(...u.map(m=>m===""?l:[l,m].join("/"))),o&&p.push(...u),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function L0(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:V0(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const M0=/^:[\w-]+$/,F0=3,U0=2,$0=1,z0=10,B0=-2,Rm=r=>r==="*";function W0(r,e){let n=r.split("/"),i=n.length;return n.some(Rm)&&(i+=B0),e&&(i+=U0),n.filter(o=>!Rm(o)).reduce((o,l)=>o+(M0.test(l)?F0:l===""?$0:z0),i)}function V0(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function H0(r,e,n){let{routesMeta:i}=r,o={},l="/",u=[];for(let p=0;p<i.length;++p){let m=i[p],g=p===i.length-1,w=l==="/"?e:e.slice(l.length)||"/",_=od({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},w),y=m.route;if(!_)return null;Object.assign(o,_.params),u.push({params:o,pathname:pr([l,_.pathname]),pathnameBase:X0(pr([l,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(l=pr([l,_.pathnameBase]))}return u}function od(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=q0(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((g,w,_)=>{let{paramName:y,isOptional:b}=w;if(y==="*"){let M=p[_]||"";u=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const A=p[_];return b&&!A?g[y]=void 0:g[y]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:r}}function q0(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ad(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function G0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ad(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Ms(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}const K0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q0=r=>K0.test(r);function Y0(r,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:o=""}=typeof r=="string"?qs(r):r,l;if(n)if(Q0(n))l=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Ad(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+n))}n.startsWith("/")?l=bm(n.substring(1),"/"):l=bm(n,e)}else l=e;return{pathname:l,search:Z0(i),hash:ex(o)}}function bm(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function $u(r,e,n,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J0(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jd(r,e){let n=J0(r);return e?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Dd(r,e,n,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=qs(r):(o=no({},r),Qe(!o.pathname||!o.pathname.includes("?"),$u("?","pathname","search",o)),Qe(!o.pathname||!o.pathname.includes("#"),$u("#","pathname","hash",o)),Qe(!o.search||!o.search.includes("#"),$u("#","search","hash",o)));let l=r===""||o.pathname==="",u=l?"/":o.pathname,p;if(u==null)p=n;else{let _=e.length-1;if(!i&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),_-=1;o.pathname=y.join("/")}p=_>=0?e[_]:"/"}let m=Y0(o,p),g=u&&u!=="/"&&u.endsWith("/"),w=(l||u===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(g||w)&&(m.pathname+="/"),m}const pr=r=>r.join("/").replace(/\/\/+/g,"/"),X0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Z0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ex=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function tx(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Zg=["post","put","patch","delete"];new Set(Zg);const nx=["get",...Zg];new Set(nx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ro(){return ro=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},ro.apply(this,arguments)}const Cl=k.createContext(null),ev=k.createContext(null),zn=k.createContext(null),El=k.createContext(null),Nr=k.createContext({outlet:null,matches:[],isDataRoute:!1}),tv=k.createContext(null);function rx(r,e){let{relative:n}=e===void 0?{}:e;Gs()||Qe(!1);let{basename:i,navigator:o}=k.useContext(zn),{hash:l,pathname:u,search:p}=Nl(r,{relative:n}),m=u;return i!=="/"&&(m=u==="/"?i:pr([i,u])),o.createHref({pathname:m,search:p,hash:l})}function Gs(){return k.useContext(El)!=null}function ts(){return Gs()||Qe(!1),k.useContext(El).location}function nv(r){k.useContext(zn).static||k.useLayoutEffect(r)}function Od(){let{isDataRoute:r}=k.useContext(Nr);return r?gx():sx()}function sx(){Gs()||Qe(!1);let r=k.useContext(Cl),{basename:e,future:n,navigator:i}=k.useContext(zn),{matches:o}=k.useContext(Nr),{pathname:l}=ts(),u=JSON.stringify(jd(o,n.v7_relativeSplatPath)),p=k.useRef(!1);return nv(()=>{p.current=!0}),k.useCallback(function(g,w){if(w===void 0&&(w={}),!p.current)return;if(typeof g=="number"){i.go(g);return}let _=Dd(g,JSON.parse(u),l,w.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:pr([e,_.pathname])),(w.replace?i.replace:i.push)(_,w.state,w)},[e,i,u,l,r])}function Nl(r,e){let{relative:n}=e===void 0?{}:e,{future:i}=k.useContext(zn),{matches:o}=k.useContext(Nr),{pathname:l}=ts(),u=JSON.stringify(jd(o,i.v7_relativeSplatPath));return k.useMemo(()=>Dd(r,JSON.parse(u),l,n==="path"),[r,u,l,n])}function ix(r,e){return ox(r,e)}function ox(r,e,n,i){Gs()||Qe(!1);let{navigator:o}=k.useContext(zn),{matches:l}=k.useContext(Nr),u=l[l.length-1],p=u?u.params:{};u&&u.pathname;let m=u?u.pathnameBase:"/";u&&u.route;let g=ts(),w;if(e){var _;let D=typeof e=="string"?qs(e):e;m==="/"||(_=D.pathname)!=null&&_.startsWith(m)||Qe(!1),w=D}else w=g;let y=w.pathname||"/",b=y;if(m!=="/"){let D=m.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(D.length).join("/")}let A=D0(r,{pathname:b}),M=dx(A&&A.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:pr([m,o.encodeLocation?o.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?m:pr([m,o.encodeLocation?o.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),l,n,i);return e&&M?k.createElement(El.Provider,{value:{location:ro({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:hr.Pop}},M):M}function ax(){let r=mx(),e=tx(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,null)}const lx=k.createElement(ax,null);class cx extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Nr.Provider,{value:this.props.routeContext},k.createElement(tv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ux(r){let{routeContext:e,match:n,children:i}=r,o=k.useContext(Cl);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Nr.Provider,{value:e},i)}function dx(r,e,n,i){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),r==null){var l;if(!n)return null;if(n.errors)r=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,p=(o=n)==null?void 0:o.errors;if(p!=null){let w=u.findIndex(_=>_.route.id&&(p==null?void 0:p[_.route.id])!==void 0);w>=0||Qe(!1),u=u.slice(0,Math.min(u.length,w+1))}let m=!1,g=-1;if(n&&i&&i.v7_partialHydration)for(let w=0;w<u.length;w++){let _=u[w];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=w),_.route.id){let{loaderData:y,errors:b}=n,A=_.route.loader&&y[_.route.id]===void 0&&(!b||b[_.route.id]===void 0);if(_.route.lazy||A){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((w,_,y)=>{let b,A=!1,M=null,D=null;n&&(b=p&&_.route.id?p[_.route.id]:void 0,M=_.route.errorElement||lx,m&&(g<0&&y===0?(vx("route-fallback"),A=!0,D=null):g===y&&(A=!0,D=_.route.hydrateFallbackElement||null)));let X=e.concat(u.slice(0,y+1)),j=()=>{let G;return b?G=M:A?G=D:_.route.Component?G=k.createElement(_.route.Component,null):_.route.element?G=_.route.element:G=w,k.createElement(ux,{match:_,routeContext:{outlet:w,matches:X,isDataRoute:n!=null},children:G})};return n&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?k.createElement(cx,{location:n.location,revalidation:n.revalidation,component:M,error:b,children:j(),routeContext:{outlet:null,matches:X,isDataRoute:!0}}):j()},null)}var rv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(rv||{}),sv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(sv||{});function hx(r){let e=k.useContext(Cl);return e||Qe(!1),e}function fx(r){let e=k.useContext(ev);return e||Qe(!1),e}function px(r){let e=k.useContext(Nr);return e||Qe(!1),e}function iv(r){let e=px(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function mx(){var r;let e=k.useContext(tv),n=fx(),i=iv();return e!==void 0?e:(r=n.errors)==null?void 0:r[i]}function gx(){let{router:r}=hx(rv.UseNavigateStable),e=iv(sv.UseNavigateStable),n=k.useRef(!1);return nv(()=>{n.current=!0}),k.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,ro({fromRouteId:e},l)))},[r,e])}const Am={};function vx(r,e,n){Am[r]||(Am[r]=!0)}function _x(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function yx(r){let{to:e,replace:n,state:i,relative:o}=r;Gs()||Qe(!1);let{future:l,static:u}=k.useContext(zn),{matches:p}=k.useContext(Nr),{pathname:m}=ts(),g=Od(),w=Dd(e,jd(p,l.v7_relativeSplatPath),m,o==="path"),_=JSON.stringify(w);return k.useEffect(()=>g(JSON.parse(_),{replace:n,state:i,relative:o}),[g,_,o,n,i]),null}function Vr(r){Qe(!1)}function wx(r){let{basename:e="/",children:n=null,location:i,navigationType:o=hr.Pop,navigator:l,static:u=!1,future:p}=r;Gs()&&Qe(!1);let m=e.replace(/^\/*/,"/"),g=k.useMemo(()=>({basename:m,navigator:l,static:u,future:ro({v7_relativeSplatPath:!1},p)}),[m,p,l,u]);typeof i=="string"&&(i=qs(i));let{pathname:w="/",search:_="",hash:y="",state:b=null,key:A="default"}=i,M=k.useMemo(()=>{let D=Ms(w,m);return D==null?null:{location:{pathname:D,search:_,hash:y,state:b,key:A},navigationType:o}},[m,w,_,y,b,A,o]);return M==null?null:k.createElement(zn.Provider,{value:g},k.createElement(El.Provider,{children:n,value:M}))}function xx(r){let{children:e,location:n}=r;return ix(ad(e),n)}new Promise(()=>{});function ad(r,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(r,(i,o)=>{if(!k.isValidElement(i))return;let l=[...e,o];if(i.type===k.Fragment){n.push.apply(n,ad(i.props.children,l));return}i.type!==Vr&&Qe(!1),!i.props.index||!i.props.children||Qe(!1);let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=ad(i.props.children,l)),n.push(u)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xa(){return Xa=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Xa.apply(this,arguments)}function ov(r,e){if(r==null)return{};var n={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function Sx(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Cx(r,e){return r.button===0&&(!e||e==="_self")&&!Sx(r)}const Ex=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Nx=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Ix="6";try{window.__reactRouterVersion=Ix}catch{}const Tx=k.createContext({isTransitioning:!1}),kx="startTransition",jm=E0[kx];function Px(r){let{basename:e,children:n,future:i,window:o}=r,l=k.useRef();l.current==null&&(l.current=b0({window:o,v5Compat:!0}));let u=l.current,[p,m]=k.useState({action:u.action,location:u.location}),{v7_startTransition:g}=i||{},w=k.useCallback(_=>{g&&jm?jm(()=>m(_)):m(_)},[m,g]);return k.useLayoutEffect(()=>u.listen(w),[u,w]),k.useEffect(()=>_x(i),[i]),k.createElement(wx,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:u,future:i})}const Rx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ax=k.forwardRef(function(e,n){let{onClick:i,relative:o,reloadDocument:l,replace:u,state:p,target:m,to:g,preventScrollReset:w,viewTransition:_}=e,y=ov(e,Ex),{basename:b}=k.useContext(zn),A,M=!1;if(typeof g=="string"&&bx.test(g)&&(A=g,Rx))try{let G=new URL(window.location.href),V=g.startsWith("//")?new URL(G.protocol+g):new URL(g),Q=Ms(V.pathname,b);V.origin===G.origin&&Q!=null?g=Q+V.search+V.hash:M=!0}catch{}let D=rx(g,{relative:o}),X=Dx(g,{replace:u,state:p,target:m,preventScrollReset:w,relative:o,viewTransition:_});function j(G){i&&i(G),G.defaultPrevented||X(G)}return k.createElement("a",Xa({},y,{href:A||D,onClick:M||l?i:j,ref:n,target:m}))}),Vi=k.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:u=!1,style:p,to:m,viewTransition:g,children:w}=e,_=ov(e,Nx),y=Nl(m,{relative:_.relative}),b=ts(),A=k.useContext(ev),{navigator:M,basename:D}=k.useContext(zn),X=A!=null&&Ox(y)&&g===!0,j=M.encodeLocation?M.encodeLocation(y).pathname:y.pathname,G=b.pathname,V=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;o||(G=G.toLowerCase(),V=V?V.toLowerCase():null,j=j.toLowerCase()),V&&D&&(V=Ms(V,D)||V);const Q=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let ne=G===j||!u&&G.startsWith(j)&&G.charAt(Q)==="/",Z=V!=null&&(V===j||!u&&V.startsWith(j)&&V.charAt(j.length)==="/"),me={isActive:ne,isPending:Z,isTransitioning:X},Ee=ne?i:void 0,Ie;typeof l=="function"?Ie=l(me):Ie=[l,ne?"active":null,Z?"pending":null,X?"transitioning":null].filter(Boolean).join(" ");let be=typeof p=="function"?p(me):p;return k.createElement(Ax,Xa({},_,{"aria-current":Ee,className:Ie,ref:n,style:be,to:m,viewTransition:g}),typeof w=="function"?w(me):w)});var ld;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(ld||(ld={}));var Dm;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Dm||(Dm={}));function jx(r){let e=k.useContext(Cl);return e||Qe(!1),e}function Dx(r,e){let{target:n,replace:i,state:o,preventScrollReset:l,relative:u,viewTransition:p}=e===void 0?{}:e,m=Od(),g=ts(),w=Nl(r,{relative:u});return k.useCallback(_=>{if(Cx(_,n)){_.preventDefault();let y=i!==void 0?i:Ja(g)===Ja(w);m(r,{replace:y,state:o,preventScrollReset:l,relative:u,viewTransition:p})}},[g,m,w,i,o,n,r,l,u,p])}function Ox(r,e){e===void 0&&(e={});let n=k.useContext(Tx);n==null&&Qe(!1);let{basename:i}=jx(ld.useViewTransitionState),o=Nl(r,{relative:e.relative});if(!n.isTransitioning)return!1;let l=Ms(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Ms(n.nextLocation.pathname,i)||n.nextLocation.pathname;return od(o.pathname,u)!=null||od(o.pathname,l)!=null}const Lx=()=>{};var Om={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W=function(r,e){if(!r)throw Ks(e)},Ks=function(r){return new Error("Firebase Database ("+av.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Mx=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[n++],u=r[n++],p=r[n++],m=((o&7)<<18|(l&63)<<12|(u&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[n++],u=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Ld={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],u=o+1<r.length,p=u?r[o+1]:0,m=o+2<r.length,g=m?r[o+2]:0,w=l>>2,_=(l&3)<<4|p>>4;let y=(p&15)<<2|g>>6,b=g&63;m||(b=64,u||(y=64)),i.push(n[w],n[_],n[y],n[b])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(lv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Mx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const _=o<r.length?n[r.charAt(o)]:64;if(++o,l==null||p==null||g==null||_==null)throw new Fx;const y=l<<2|p>>4;if(i.push(y),g!==64){const b=p<<4&240|g>>2;if(i.push(b),_!==64){const A=g<<6&192|_;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Fx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cv=function(r){const e=lv(r);return Ld.encodeByteArray(e,!0)},Za=function(r){return cv(r).replace(/\./g,"")},el=function(r){try{return Ld.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(r){return uv(void 0,r)}function uv(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!$x(n)||(r[n]=uv(r[n],e[n]));return r}function $x(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=()=>zx().__FIREBASE_DEFAULTS__,Wx=()=>{if(typeof process>"u"||typeof Om>"u")return;const r=Om.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Vx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&el(r[1]);return e&&JSON.parse(e)},Md=()=>{try{return Lx()||Bx()||Wx()||Vx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},dv=r=>{var e,n;return(n=(e=Md())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},Hx=r=>{const e=dv(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},hv=()=>{var r;return(r=Md())===null||r===void 0?void 0:r.config},fv=r=>{var e;return(e=Md())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Za(JSON.stringify(n)),Za(JSON.stringify(u)),""].join(".")}const Qi={};function Gx(){const r={prod:[],emulator:[]};for(const e of Object.keys(Qi))Qi[e]?r.emulator.push(e):r.prod.push(e);return r}function Kx(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Lm=!1;function mv(r,e){if(typeof window>"u"||typeof document>"u"||!Qs(window.location.host)||Qi[r]===e||Qi[r]||Lm)return;Qi[r]=e;function n(y){return`__firebase__banner__${y}`}const i="__firebase__banner",l=Gx().prod.length>0;function u(){const y=document.getElementById(i);y&&y.remove()}function p(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function m(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function g(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Lm=!0,u()},y}function w(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function _(){const y=Kx(i),b=n("text"),A=document.getElementById(b)||document.createElement("span"),M=n("learnmore"),D=document.getElementById(M)||document.createElement("a"),X=n("preprendIcon"),j=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const G=y.element;p(G),w(D,M);const V=g();m(j,X),G.append(j,A,D,V),document.body.appendChild(G)}l?(A.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function Qx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function gv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jx(){const r=kt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Xx(){return av.NODE_ADMIN===!0}function Zx(){try{return typeof indexedDB=="object"}catch{return!1}}function eS(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="FirebaseError";class Ir extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tS,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_o.prototype.create)}}class _o{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?nS(l,i):"Error",p=`${this.serviceName}: ${u} (${o}).`;return new Ir(o,p,i)}}function nS(r,e){return r.replace(rS,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const rS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(r){return JSON.parse(r)}function ut(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=function(r){let e={},n={},i={},o="";try{const l=r.split(".");e=so(el(l[0])||""),n=so(el(l[1])||""),o=l[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:o}},sS=function(r){const e=vv(r),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},iS=function(r){const e=vv(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Fs(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function cd(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function tl(r,e,n){const i={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=e.call(n,r[o],o,r));return i}function Qr(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=r[o],u=e[o];if(Mm(l)&&Mm(u)){if(!Qr(l,u))return!1}else if(l!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Mm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const y=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(y<<1|y>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],u=this.chain_[2],p=this.chain_[3],m=this.chain_[4],g,w;for(let _=0;_<80;_++){_<40?_<20?(g=p^l&(u^p),w=1518500249):(g=l^u^p,w=1859775393):_<60?(g=l&u|p&(l|u),w=2400959708):(g=l^u^p,w=3395469782);const y=(o<<5|o>>>27)+g+m+w+i[_]&4294967295;m=p,p=u,u=(l<<30|l>>>2)&4294967295,l=o,o=y}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let o=0;const l=this.buf_;let u=this.inbuf_;for(;o<n;){if(u===0)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(l[u]=e.charCodeAt(o),++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}else for(;o<n;)if(l[u]=e[o],++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[o]>>l&255,++i;return e}}function aS(r,e){const n=new lS(r,e);return n.subscribe.bind(n)}class lS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");cS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=zu),o.error===void 0&&(o.error=zu),o.complete===void 0&&(o.complete=zu);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cS(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function zu(){}function Il(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);if(o>=55296&&o<=56319){const l=o-55296;i++,W(i<r.length,"Surrogate pair missing trail surrogate.");const u=r.charCodeAt(i)-56320;o=65536+(l<<10)+u}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Tl=function(r){let e=0;for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(r){return r&&r._delegate?r._delegate:r}class Yr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new vo;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fS(e))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hr){return this.instances.has(e)}getOptions(e=Hr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&u.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Hr){return this.component?this.component.multipleInstances?e:Hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hS(r){return r===Hr?void 0:r}function fS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(je||(je={}));const mS={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},gS=je.INFO,vS={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},_S=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=vS[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ud{constructor(e){this.name=e,this._logLevel=gS,this._logHandler=_S,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const yS=(r,e)=>e.some(n=>r instanceof n);let Fm,Um;function wS(){return Fm||(Fm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xS(){return Um||(Um=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _v=new WeakMap,ud=new WeakMap,yv=new WeakMap,Bu=new WeakMap,$d=new WeakMap;function SS(r){const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{n(mr(r.result)),o()},u=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&_v.set(n,r)}).catch(()=>{}),$d.set(e,r),e}function CS(r){if(ud.has(r))return;const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{n(),o()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});ud.set(r,e)}let dd={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return ud.get(r);if(e==="objectStoreNames")return r.objectStoreNames||yv.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ES(r){dd=r(dd)}function NS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(Wu(this),e,...n);return yv.set(i,e.sort?e.sort():[e]),mr(i)}:xS().includes(r)?function(...e){return r.apply(Wu(this),e),mr(_v.get(this))}:function(...e){return mr(r.apply(Wu(this),e))}}function IS(r){return typeof r=="function"?NS(r):(r instanceof IDBTransaction&&CS(r),yS(r,wS())?new Proxy(r,dd):r)}function mr(r){if(r instanceof IDBRequest)return SS(r);if(Bu.has(r))return Bu.get(r);const e=IS(r);return e!==r&&(Bu.set(r,e),$d.set(e,r)),e}const Wu=r=>$d.get(r);function TS(r,e,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const u=indexedDB.open(r,e),p=mr(u);return i&&u.addEventListener("upgradeneeded",m=>{i(mr(u.result),m.oldVersion,m.newVersion,mr(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const kS=["get","getKey","getAll","getAllKeys","count"],PS=["put","add","delete","clear"],Vu=new Map;function $m(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Vu.get(e))return Vu.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=PS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||kS.includes(n)))return;const l=async function(u,...p){const m=this.transaction(u,o?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),o&&m.done]))[0]};return Vu.set(e,l),l}ES(r=>({...r,get:(e,n,i)=>$m(e,n)||r.get(e,n,i),has:(e,n)=>!!$m(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function bS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hd="@firebase/app",zm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new Ud("@firebase/app"),AS="@firebase/app-compat",jS="@firebase/analytics-compat",DS="@firebase/analytics",OS="@firebase/app-check-compat",LS="@firebase/app-check",MS="@firebase/auth",FS="@firebase/auth-compat",US="@firebase/database",$S="@firebase/data-connect",zS="@firebase/database-compat",BS="@firebase/functions",WS="@firebase/functions-compat",VS="@firebase/installations",HS="@firebase/installations-compat",qS="@firebase/messaging",GS="@firebase/messaging-compat",KS="@firebase/performance",QS="@firebase/performance-compat",YS="@firebase/remote-config",JS="@firebase/remote-config-compat",XS="@firebase/storage",ZS="@firebase/storage-compat",eC="@firebase/firestore",tC="@firebase/ai",nC="@firebase/firestore-compat",rC="firebase",sC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="[DEFAULT]",iC={[hd]:"fire-core",[AS]:"fire-core-compat",[DS]:"fire-analytics",[jS]:"fire-analytics-compat",[LS]:"fire-app-check",[OS]:"fire-app-check-compat",[MS]:"fire-auth",[FS]:"fire-auth-compat",[US]:"fire-rtdb",[$S]:"fire-data-connect",[zS]:"fire-rtdb-compat",[BS]:"fire-fn",[WS]:"fire-fn-compat",[VS]:"fire-iid",[HS]:"fire-iid-compat",[qS]:"fire-fcm",[GS]:"fire-fcm-compat",[KS]:"fire-perf",[QS]:"fire-perf-compat",[YS]:"fire-rc",[JS]:"fire-rc-compat",[XS]:"fire-gcs",[ZS]:"fire-gcs-compat",[eC]:"fire-fst",[nC]:"fire-fst-compat",[tC]:"fire-vertex","fire-js":"fire-js",[rC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new Map,oC=new Map,pd=new Map;function Bm(r,e){try{r.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Us(r){const e=r.name;if(pd.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;pd.set(e,r);for(const n of nl.values())Bm(n,r);for(const n of oC.values())Bm(n,r);return!0}function zd(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Yt(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new _o("app","Firebase",aC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=sC;function wv(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:fd,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw gr.create("bad-app-name",{appName:String(o)});if(n||(n=hv()),!n)throw gr.create("no-options");const l=nl.get(o);if(l){if(Qr(n,l.options)&&Qr(i,l.config))return l;throw gr.create("duplicate-app",{appName:o})}const u=new pS(o);for(const m of pd.values())u.addComponent(m);const p=new lC(n,i,u);return nl.set(o,p),p}function xv(r=fd){const e=nl.get(r);if(!e&&r===fd&&hv())return wv();if(!e)throw gr.create("no-app",{appName:r});return e}function vr(r,e,n){var i;let o=(i=iC[r])!==null&&i!==void 0?i:r;n&&(o+=`-${n}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&p.push("and"),u&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(p.join(" "));return}Us(new Yr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firebase-heartbeat-database",uC=1,io="firebase-heartbeat-store";let Hu=null;function Sv(){return Hu||(Hu=TS(cC,uC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(io)}catch(n){console.warn(n)}}}}).catch(r=>{throw gr.create("idb-open",{originalErrorMessage:r.message})})),Hu}async function dC(r){try{const n=(await Sv()).transaction(io),i=await n.objectStore(io).get(Cv(r));return await n.done,i}catch(e){if(e instanceof Ir)Fn.warn(e.message);else{const n=gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fn.warn(n.message)}}}async function Wm(r,e){try{const i=(await Sv()).transaction(io,"readwrite");await i.objectStore(io).put(e,Cv(r)),await i.done}catch(n){if(n instanceof Ir)Fn.warn(n.message);else{const i=gr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fn.warn(i.message)}}}function Cv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=1024,fC=30;class pC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gC(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Vm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>fC){const u=vC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Fn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vm(),{heartbeatsToSend:i,unsentEntries:o}=mC(this._heartbeatsCache.heartbeats),l=Za(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Fn.warn(n),""}}}function Vm(){return new Date().toISOString().substring(0,10)}function mC(r,e=hC){const n=[];let i=r.slice();for(const o of r){const l=n.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),Hm(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Hm(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class gC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zx()?eS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Hm(r){return Za(JSON.stringify({version:2,heartbeats:r})).length}function vC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(r){Us(new Yr("platform-logger",e=>new RS(e),"PRIVATE")),Us(new Yr("heartbeat",e=>new pC(e),"PRIVATE")),vr(hd,zm,r),vr(hd,zm,"esm2017"),vr("fire-js","")}_C("");function Bd(r,e){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(n[i[o]]=r[i[o]]);return n}function Ev(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yC=Ev,Nv=new _o("auth","Firebase",Ev());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new Ud("@firebase/auth");function wC(r,...e){rl.logLevel<=je.WARN&&rl.warn(`Auth (${Js}): ${r}`,...e)}function Ha(r,...e){rl.logLevel<=je.ERROR&&rl.error(`Auth (${Js}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(r,...e){throw Vd(r,...e)}function hn(r,...e){return Vd(r,...e)}function Wd(r,e,n){const i=Object.assign(Object.assign({},yC()),{[e]:n});return new _o("auth","Firebase",i).create(e,{appName:r.name})}function _r(r){return Wd(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Iv(r,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&xn(r,"argument-error"),Wd(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vd(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return Nv.create(r,...e)}function pe(r,e,...n){if(!r)throw Vd(e,...n)}function Dn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ha(e),new Error(e)}function Un(r,e){r||Dn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function xC(){return qm()==="http:"||qm()==="https:"}function qm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xC()||Yx()||"connection"in navigator)?navigator.onLine:!0}function CC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Un(n>e,"Short delay should be less than long delay!"),this.isMobile=Fd()||gv()}get(){return SC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(r,e){Un(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IC=new yo(3e4,6e4);function qd(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Xs(r,e,n,i,o={}){return kv(r,o,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const p=Ys(Object.assign({key:r.config.apiKey},u)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:m},l);return Qx()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Qs(r.emulatorConfig.host)&&(g.credentials="include"),Tv.fetch()(await Pv(r,r.config.apiHost,n,p),g)})}async function kv(r,e,n){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},EC),e);try{const o=new kC(r),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw $a(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const p=l.ok?u.errorMessage:u.error.message,[m,g]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw $a(r,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw $a(r,"email-already-in-use",u);if(m==="USER_DISABLED")throw $a(r,"user-disabled",u);const w=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Wd(r,w,g);xn(r,w)}}catch(o){if(o instanceof Ir)throw o;xn(r,"network-request-failed",{message:String(o)})}}async function TC(r,e,n,i,o={}){const l=await Xs(r,e,n,i,o);return"mfaPendingCredential"in l&&xn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Pv(r,e,n,i){const o=`${e}${n}?${i}`,l=r,u=l.config.emulator?Hd(r.config,o):`${r.config.apiScheme}://${o}`;return NC.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class kC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(hn(this.auth,"network-request-failed")),IC.get())})}}function $a(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=hn(r,e,i);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(r,e){return Xs(r,"POST","/v1/accounts:delete",e)}async function sl(r,e){return Xs(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RC(r,e=!1){const n=Pt(r),i=await n.getIdToken(e),o=Gd(i);pe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Yi(qu(o.auth_time)),issuedAtTime:Yi(qu(o.iat)),expirationTime:Yi(qu(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function qu(r){return Number(r)*1e3}function Gd(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return Ha("JWT malformed, contained fewer than 3 sections"),null;try{const o=el(n);return o?JSON.parse(o):(Ha("Failed to decode base64 JWT payload"),null)}catch(o){return Ha("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Gm(r){const e=Gd(r);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ir&&bC(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function bC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yi(this.lastLoginAt),this.creationTime=Yi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(r){var e;const n=r.auth,i=await r.getIdToken(),o=await oo(r,sl(n,{idToken:i}));pe(o==null?void 0:o.users.length,n,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Rv(l.providerUserInfo):[],p=DC(r.providerData,u),m=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),w=m?g:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new gd(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,_)}async function jC(r){const e=Pt(r);await il(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DC(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Rv(r){return r.map(e=>{var{providerId:n}=e,i=Bd(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(r,e){const n=await kv(r,{},async()=>{const i=Ys({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,u=await Pv(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:i};return r.emulatorConfig&&Qs(r.emulatorConfig.host)&&(m.credentials="include"),Tv.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LC(r,e){return Xs(r,"POST","/v2/accounts:revokeToken",qd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=Gm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:l}=await OC(e,n);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:l}=n,u=new As;return i&&(pe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(pe(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(pe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new As,this.toJSON())}_performRefresh(){return Dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(r,e){pe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class un{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,l=Bd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new gd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await oo(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RC(this,e)}reload(){return jC(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new un(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await il(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yt(this.auth.app))return Promise.reject(_r(this.auth));const e=await this.getIdToken();return await oo(this,PC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,l,u,p,m,g,w;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(o=n.email)!==null&&o!==void 0?o:void 0,b=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,A=(u=n.photoURL)!==null&&u!==void 0?u:void 0,M=(p=n.tenantId)!==null&&p!==void 0?p:void 0,D=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,X=(g=n.createdAt)!==null&&g!==void 0?g:void 0,j=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:G,emailVerified:V,isAnonymous:Q,providerData:ne,stsTokenManager:Z}=n;pe(G&&Z,e,"internal-error");const me=As.fromJSON(this.name,Z);pe(typeof G=="string",e,"internal-error"),lr(_,e.name),lr(y,e.name),pe(typeof V=="boolean",e,"internal-error"),pe(typeof Q=="boolean",e,"internal-error"),lr(b,e.name),lr(A,e.name),lr(M,e.name),lr(D,e.name),lr(X,e.name),lr(j,e.name);const Ee=new un({uid:G,auth:e,email:y,emailVerified:V,displayName:_,isAnonymous:Q,photoURL:A,phoneNumber:b,tenantId:M,stsTokenManager:me,createdAt:X,lastLoginAt:j});return ne&&Array.isArray(ne)&&(Ee.providerData=ne.map(Ie=>Object.assign({},Ie))),D&&(Ee._redirectEventId=D),Ee}static async _fromIdTokenResponse(e,n,i=!1){const o=new As;o.updateFromServerResponse(n);const l=new un({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await il(l),l}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];pe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Rv(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new As;p.updateFromIdToken(i);const m=new un({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new gd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new Map;function On(r){Un(r instanceof Function,"Expected a class definition");let e=Km.get(r);return e?(Un(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Km.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bv.type="NONE";const Qm=bv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(r,e,n){return`firebase:${r}:${e}:${n}`}class js{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=qa(this.userKey,o.apiKey,l),this.fullPersistenceKey=qa("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sl(this.auth,{idToken:e}).catch(()=>{});return n?un._fromGetAccountInfoResponse(this.auth,n,e):null}return un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new js(On(Qm),e,i);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||On(Qm);const u=qa(i,e.config.apiKey,e.name);let p=null;for(const g of n)try{const w=await g._get(u);if(w){let _;if(typeof w=="string"){const y=await sl(e,{idToken:w}).catch(()=>{});if(!y)break;_=await un._fromGetAccountInfoResponse(e,y,w)}else _=un._fromJSON(e,w);g!==l&&(p=_),l=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new js(l,e,i):(l=m[0],p&&await l._set(u,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new js(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ov(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Av(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mv(e))return"Blackberry";if(Fv(e))return"Webos";if(jv(e))return"Safari";if((e.includes("chrome/")||Dv(e))&&!e.includes("edge/"))return"Chrome";if(Lv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Av(r=kt()){return/firefox\//i.test(r)}function jv(r=kt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dv(r=kt()){return/crios\//i.test(r)}function Ov(r=kt()){return/iemobile/i.test(r)}function Lv(r=kt()){return/android/i.test(r)}function Mv(r=kt()){return/blackberry/i.test(r)}function Fv(r=kt()){return/webos/i.test(r)}function Kd(r=kt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function MC(r=kt()){var e;return Kd(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FC(){return Jx()&&document.documentMode===10}function Uv(r=kt()){return Kd(r)||Lv(r)||Fv(r)||Mv(r)||/windows phone/i.test(r)||Ov(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(r,e=[]){let n;switch(r){case"Browser":n=Ym(kt());break;case"Worker":n=`${Ym(kt())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((u,p)=>{try{const m=e(l);u(m)}catch(m){p(m)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(r,e={}){return Xs(r,"GET","/v2/passwordPolicy",qd(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=6;class BC{constructor(e){var n,i,o,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:zC,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,l,u,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jm(this),this.idTokenSubscription=new Jm(this),this.beforeStateQueue=new UC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=On(n)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await js.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sl(this,{idToken:e}),i=await un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Yt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===p)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await il(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yt(this.app))return Promise.reject(_r(this));const n=e?Pt(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yt(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yt(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(On(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $C(this),n=new BC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _o("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await LC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&On(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await js.create(this,[On(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(p,this,"internal-error"),p.then(()=>{u||l(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$v(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Zs(r){return Pt(r)}class Jm{constructor(e){this.auth=e,this.observer=null,this.addObserver=aS(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VC(r){Qd=r}function HC(r){return Qd.loadJS(r)}function qC(){return Qd.gapiScript}function GC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(r,e){const n=zd(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(Qr(l,e??{}))return o;xn(o,"already-initialized")}return n.initialize({options:e})}function QC(r,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(On);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function YC(r,e,n){const i=Zs(r);pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=zv(e),{host:u,port:p}=JC(e),m=p===null?"":`:${p}`,g={url:`${l}//${u}${m}/`},w=Object.freeze({host:u,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pe(Qr(g,i.config.emulator)&&Qr(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Qs(u)?(pv(`${l}//${u}${m}`),mv("Auth",!0)):XC()}function zv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function JC(r){const e=zv(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Xm(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:Xm(u)}}}function Xm(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function XC(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dn("not implemented")}_getIdTokenResponse(e){return Dn("not implemented")}_linkToIdToken(e,n){return Dn("not implemented")}_getReauthenticationResolver(e){return Dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ds(r,e){return TC(r,"POST","/v1/accounts:signInWithIdp",qd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="http://localhost";class Jr extends Bv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,l=Bd(n,["providerId","signInMethod"]);if(!i||!o)return null;const u=new Jr(i,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ds(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ds(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ds(e,n)}buildRequest(){const e={requestUri:ZC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ys(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends kl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends wo{constructor(){super("facebook.com")}static credential(e){return Jr._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends wo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jr._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return jn.credential(n,i)}catch{return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com";jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends wo{constructor(){super("github.com")}static credential(e){return Jr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends wo{constructor(){super("twitter.com")}static credential(e,n){return Jr._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return dr.credential(n,i)}catch{return null}}}dr.TWITTER_SIGN_IN_METHOD="twitter.com";dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const l=await un._fromIdTokenResponse(e,i,o),u=Zm(i);return new $s({user:l,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Zm(i);return new $s({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Zm(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends Ir{constructor(e,n,i,o){var l;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,ol.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new ol(e,n,i,o)}}function Wv(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ol._fromErrorAndOperation(r,l,e,i):l})}async function eE(r,e,n=!1){const i=await oo(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return $s._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tE(r,e,n=!1){const{auth:i}=r;if(Yt(i.app))return Promise.reject(_r(i));const o="reauthenticate";try{const l=await oo(r,Wv(i,o,e,r),n);pe(l.idToken,i,"internal-error");const u=Gd(l.idToken);pe(u,i,"internal-error");const{sub:p}=u;return pe(r.uid===p,i,"user-mismatch"),$s._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&xn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nE(r,e,n=!1){if(Yt(r.app))return Promise.reject(_r(r));const i="signIn",o=await Wv(r,i,e),l=await $s._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(l.user),l}function rE(r,e,n,i){return Pt(r).onIdTokenChanged(e,n,i)}function sE(r,e,n){return Pt(r).beforeAuthStateChanged(e,n)}function iE(r,e,n,i){return Pt(r).onAuthStateChanged(e,n,i)}function oE(r){return Pt(r).signOut()}const al="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(al,"1"),this.storage.removeItem(al),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=1e3,lE=10;class Hv extends Vv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,p,m)=>{this.notifyListeners(u,m)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);FC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,lE):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},aE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hv.type="LOCAL";const cE=Hv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Vv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qv.type="SESSION";const Gv=qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Pl(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:l}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(u).map(async g=>g(n.origin,l)),m=await uE(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((p,m)=>{const g=Yd("",20);o.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(_){const y=_;if(y.data.eventId===g)switch(y.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(y.data.response);break;default:clearTimeout(w),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function hE(r){wn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function fE(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pE(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function mE(){return Kv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="firebaseLocalStorageDb",gE=1,ll="firebaseLocalStorage",Yv="fbase_key";class xo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rl(r,e){return r.transaction([ll],e?"readwrite":"readonly").objectStore(ll)}function vE(){const r=indexedDB.deleteDatabase(Qv);return new xo(r).toPromise()}function vd(){const r=indexedDB.open(Qv,gE);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(ll,{keyPath:Yv})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(ll)?e(i):(i.close(),await vE(),e(await vd()))})})}async function eg(r,e,n){const i=Rl(r,!0).put({[Yv]:e,value:n});return new xo(i).toPromise()}async function _E(r,e){const n=Rl(r,!1).get(e),i=await new xo(n).toPromise();return i===void 0?null:i.value}function tg(r,e){const n=Rl(r,!0).delete(e);return new xo(n).toPromise()}const yE=800,wE=3;class Jv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>wE)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pl._getInstance(mE()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fE(),!this.activeServiceWorker)return;this.sender=new dE(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vd();return await eg(e,al,"1"),await tg(e,al),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>eg(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>_E(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Rl(o,!1).getAll();return new xo(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jv.type="LOCAL";const xE=Jv;new yo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(r,e){return e?On(e):(pe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd extends Bv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ds(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ds(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function SE(r){return nE(r.auth,new Xd(r),r.bypassAuthState)}function CE(r){const{auth:e,user:n}=r;return pe(n,e,"internal-error"),tE(n,new Xd(r),r.bypassAuthState)}async function EE(r){const{auth:e,user:n}=r;return pe(n,e,"internal-error"),eE(n,new Xd(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:l,error:u,type:p}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SE;case"linkViaPopup":case"linkViaRedirect":return EE;case"reauthViaPopup":case"reauthViaRedirect":return CE;default:xn(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new yo(2e3,1e4);async function IE(r,e,n){if(Yt(r.app))return Promise.reject(hn(r,"operation-not-supported-in-this-environment"));const i=Zs(r);Iv(r,e,kl);const o=Jd(i,n);return new Gr(i,"signInViaPopup",e,o).executeNotNull()}class Gr extends Xv{constructor(e,n,i,o,l){super(e,n,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Gr.currentPopupAction&&Gr.currentPopupAction.cancel(),Gr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Un(this.filter.length===1,"Popup operations only handle one event");const e=Yd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NE.get())};e()}}Gr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="pendingRedirect",Ga=new Map;class kE extends Xv{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ga.get(this.auth._key());if(!e){try{const i=await PE(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ga.set(this.auth._key(),e)}return this.bypassAuthState||Ga.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PE(r,e){const n=e_(e),i=Zv(r);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}async function RE(r,e){return Zv(r)._set(e_(e),"true")}function bE(r,e){Ga.set(r._key(),e)}function Zv(r){return On(r._redirectPersistence)}function e_(r){return qa(TE,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(r,e,n){return AE(r,e,n)}async function AE(r,e,n){if(Yt(r.app))return Promise.reject(_r(r));const i=Zs(r);Iv(r,e,kl),await i._initializationPromise;const o=Jd(i,n);return await RE(o,i),o._openRedirect(i,e,"signInViaRedirect")}async function jE(r,e){return await Zs(r)._initializationPromise,t_(r,e,!1)}async function t_(r,e,n=!1){if(Yt(r.app))return Promise.reject(_r(r));const i=Zs(r),o=Jd(i,e),u=await new kE(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=600*1e3;class OE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LE(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!n_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DE&&this.cachedEventUids.clear(),this.cachedEventUids.has(rg(e))}saveEventToCache(e){this.cachedEventUids.add(rg(e)),this.lastProcessedEventTime=Date.now()}}function rg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function n_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LE(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(r,e={}){return Xs(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UE=/^https?/;async function $E(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ME(r);for(const n of e)try{if(zE(n))return}catch{}xn(r,"unauthorized-domain")}function zE(r){const e=md(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!UE.test(n))return!1;if(FE.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new yo(3e4,6e4);function sg(){const r=wn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function WE(r){return new Promise((e,n)=>{var i,o,l;function u(){sg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sg(),n(hn(r,"network-request-failed"))},timeout:BE.get()})}if(!((o=(i=wn().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=wn().gapi)===null||l===void 0)&&l.load)u();else{const p=GC("iframefcb");return wn()[p]=()=>{gapi.load?u():n(hn(r,"network-request-failed"))},HC(`${qC()}?onload=${p}`).catch(m=>n(m))}}).catch(e=>{throw Ka=null,e})}let Ka=null;function VE(r){return Ka=Ka||WE(r),Ka}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=new yo(5e3,15e3),qE="__/auth/iframe",GE="emulator/auth/iframe",KE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YE(r){const e=r.config;pe(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Hd(e,GE):`https://${r.config.authDomain}/${qE}`,i={apiKey:e.apiKey,appName:r.name,v:Js},o=QE.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${Ys(i).slice(1)}`}async function JE(r){const e=await VE(r),n=wn().gapi;return pe(n,r,"internal-error"),e.open({where:document.body,url:YE(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KE,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const u=hn(r,"network-request-failed"),p=wn().setTimeout(()=>{l(u)},HE.get());function m(){wn().clearTimeout(p),o(i)}i.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZE=500,eN=600,tN="_blank",nN="http://localhost";class ig{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rN(r,e,n,i=ZE,o=eN){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m=Object.assign(Object.assign({},XE),{width:i.toString(),height:o.toString(),top:l,left:u}),g=kt().toLowerCase();n&&(p=Dv(g)?tN:n),Av(g)&&(e=e||nN,m.scrollbars="yes");const w=Object.entries(m).reduce((y,[b,A])=>`${y}${b}=${A},`,"");if(MC(g)&&p!=="_self")return sN(e||"",p),new ig(null);const _=window.open(e||"",p,w);pe(_,r,"popup-blocked");try{_.focus()}catch{}return new ig(_)}function sN(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="__/auth/handler",oN="emulator/auth/handler",aN=encodeURIComponent("fac");async function og(r,e,n,i,o,l){pe(r.config.authDomain,r,"auth-domain-config-required"),pe(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:Js,eventId:o};if(e instanceof kl){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",cd(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,_]of Object.entries({}))u[w]=_}if(e instanceof wo){const w=e.getScopes().filter(_=>_!=="");w.length>0&&(u.scopes=w.join(","))}r.tenantId&&(u.tid=r.tenantId);const p=u;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const m=await r._getAppCheckToken(),g=m?`#${aN}=${encodeURIComponent(m)}`:"";return`${lN(r)}?${Ys(p).slice(1)}${g}`}function lN({config:r}){return r.emulator?Hd(r,oN):`https://${r.authDomain}/${iN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="webStorageSupport";class cN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gv,this._completeRedirectFn=t_,this._overrideRedirectResult=bE}async _openPopup(e,n,i,o){var l;Un((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await og(e,n,i,md(),o);return rN(e,u,Yd())}async _openRedirect(e,n,i,o){await this._originValidation(e);const l=await og(e,n,i,md(),o);return hE(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(Un(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await JE(e),i=new OE(e);return n.register("authEvent",o=>(pe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gu,{type:Gu},o=>{var l;const u=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Gu];u!==void 0&&n(!!u),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$E(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Uv()||jv()||Kd()}}const uN=cN;var ag="@firebase/auth",lg="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fN(r){Us(new Yr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=i.options;pe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$v(r)},g=new WC(i,o,l,m);return QC(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Us(new Yr("auth-internal",e=>{const n=Zs(e.getProvider("auth").getImmediate());return(i=>new dN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(ag,lg,hN(r)),vr(ag,lg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=300,mN=fv("authIdTokenMaxAge")||pN;let cg=null;const gN=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>mN)return;const o=n==null?void 0:n.token;cg!==o&&(cg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function vN(r=xv()){const e=zd(r,"auth");if(e.isInitialized())return e.getImmediate();const n=KC(r,{popupRedirectResolver:uN,persistence:[xE,cE,Gv]}),i=fv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=gN(l.toString());sE(n,u,()=>u(n.currentUser)),rE(n,p=>u(p))}}const o=dv("auth");return o&&YC(n,`http://${o}`),n}function _N(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}VC({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=hn("internal-error");l.customData=o,n(l)},i.type="text/javascript",i.charset="UTF-8",_N().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fN("Browser");var yN="firebase",wN="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(yN,wN,"app");var ug={};const dg="@firebase/database",hg="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r_="";function xN(r){r_=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:so(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Sn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new SN(e)}}catch{}return new CN},Kr=s_("localStorage"),EN=s_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Ud("@firebase/database"),NN=(function(){let r=1;return function(){return r++}})(),i_=function(r){const e=uS(r),n=new oS;n.update(e);const i=n.digest();return Ld.encodeByteArray(i)},So=function(...r){let e="";for(let n=0;n<r.length;n++){const i=r[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=So.apply(null,i):typeof i=="object"?e+=ut(i):e+=i,e+=" "}return e};let Ji=null,fg=!0;const IN=function(r,e){W(!0,"Can't turn on custom loggers persistently."),Os.logLevel=je.VERBOSE,Ji=Os.log.bind(Os)},_t=function(...r){if(fg===!0&&(fg=!1,Ji===null&&EN.get("logging_enabled")===!0&&IN()),Ji){const e=So.apply(null,r);Ji(e)}},Co=function(r){return function(...e){_t(r,...e)}},_d=function(...r){const e="FIREBASE INTERNAL ERROR: "+So(...r);Os.error(e)},$n=function(...r){const e=`FIREBASE FATAL ERROR: ${So(...r)}`;throw Os.error(e),new Error(e)},Tt=function(...r){const e="FIREBASE WARNING: "+So(...r);Os.warn(e)},TN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Zd=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},kN=function(r){if(document.readyState==="complete")r();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},zs="[MIN_NAME]",Xr="[MAX_NAME]",ns=function(r,e){if(r===e)return 0;if(r===zs||e===Xr)return-1;if(e===zs||r===Xr)return 1;{const n=pg(r),i=pg(e);return n!==null?i!==null?n-i===0?r.length-e.length:n-i:-1:i!==null?1:r<e?-1:1}},PN=function(r,e){return r===e?0:r<e?-1:1},Hi=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+ut(e))},eh=function(r){if(typeof r!="object"||r===null)return ut(r);const e=[];for(const i in r)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=ut(e[i]),n+=":",n+=eh(r[e[i]]);return n+="}",n},o_=function(r,e){const n=r.length;if(n<=e)return[r];const i=[];for(let o=0;o<n;o+=e)o+e>n?i.push(r.substring(o,n)):i.push(r.substring(o,o+e));return i};function yt(r,e){for(const n in r)r.hasOwnProperty(n)&&e(n,r[n])}const a_=function(r){W(!Zd(r),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let o,l,u,p,m;r===0?(l=0,u=0,o=1/r===-1/0?1:0):(o=r<0,r=Math.abs(r),r>=Math.pow(2,1-i)?(p=Math.min(Math.floor(Math.log(r)/Math.LN2),i),l=p+i,u=Math.round(r*Math.pow(2,n-p)-Math.pow(2,n))):(l=0,u=Math.round(r/Math.pow(2,1-i-n))));const g=[];for(m=n;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);for(m=e;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(o?1:0),g.reverse();const w=g.join("");let _="";for(m=0;m<64;m+=8){let y=parseInt(w.substr(m,8),2).toString(16);y.length===1&&(y="0"+y),_=_+y}return _.toLowerCase()},RN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},bN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function AN(r,e){let n="Unknown Error";r==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?n="Client doesn't have permission to access the desired data.":r==="unavailable"&&(n="The service is unavailable");const i=new Error(r+" at "+e._path.toString()+": "+n);return i.code=r.toUpperCase(),i}const jN=new RegExp("^-?(0*)\\d{1,10}$"),DN=-2147483648,ON=2147483647,pg=function(r){if(jN.test(r)){const e=Number(r);if(e>=DN&&e<=ON)return e}return null},ei=function(r){try{r()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Tt("Exception was thrown by user callback.",n),e},Math.floor(0))}},LN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Xi=function(r,e){const n=setTimeout(r,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Yt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Tt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tt(e)}}class Qa{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Qa.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="5",l_="v",c_="s",u_="r",d_="f",h_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,f_="ls",p_="p",yd="ac",m_="websocket",g_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,i,o,l=!1,u="",p=!1,m=!1,g=null){this.secure=n,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Kr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function UN(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function __(r,e,n){W(typeof e=="string","typeof type must == string"),W(typeof n=="object","typeof params must == object");let i;if(e===m_)i=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===g_)i=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);UN(r)&&(n.ns=r.namespace);const o=[];return yt(n,(l,u)=>{o.push(l+"="+u)}),i+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.counters_={}}incrementCounter(e,n=1){Sn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ux(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku={},Qu={};function nh(r){const e=r.toString();return Ku[e]||(Ku[e]=new $N),Ku[e]}function zN(r,e){const n=r.toString();return Qu[n]||(Qu[n]=e()),Qu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&ei(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="start",WN="close",VN="pLPCommand",HN="pRTLPCB",y_="id",w_="pw",x_="ser",qN="cb",GN="seg",KN="ts",QN="d",YN="dframe",S_=1870,C_=30,JN=S_-C_,XN=25e3,ZN=3e4;class bs{constructor(e,n,i,o,l,u,p){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.transportSessionId=u,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Co(e),this.stats_=nh(n),this.urlFn=m=>(this.appCheckToken&&(m[yd]=this.appCheckToken),__(n,g_,m))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new BN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZN)),kN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rh((...l)=>{const[u,p,m,g,w]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===mg)this.id=p,this.password=m;else if(u===WN)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,p]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,p)},()=>{this.onClosed_()},this.urlFn);const i={};i[mg]="t",i[x_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[qN]=this.scriptTagHolder.uniqueCallbackIdentifier),i[l_]=th,this.transportSessionId&&(i[c_]=this.transportSessionId),this.lastSessionId&&(i[f_]=this.lastSessionId),this.applicationId&&(i[p_]=this.applicationId),this.appCheckToken&&(i[yd]=this.appCheckToken),typeof location<"u"&&location.hostname&&h_.test(location.hostname)&&(i[u_]=d_);const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bs.forceAllow_=!0}static forceDisallow(){bs.forceDisallow_=!0}static isAvailable(){return bs.forceAllow_?!0:!bs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!RN()&&!bN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ut(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=cv(n),o=o_(i,JN);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[YN]="t",i[y_]=e,i[w_]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ut(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class rh{constructor(e,n,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=NN(),window[VN+this.uniqueCallbackIdentifier]=e,window[HN+this.uniqueCallbackIdentifier]=n,this.myIFrame=rh.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(p){_t("frame writing exception"),p.stack&&_t(p.stack),_t(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[y_]=this.myID,e[w_]=this.myPW,e[x_]=this.currentSerial;let n=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+C_+i.length<=S_;){const u=this.pendingSegs.shift();i=i+"&"+GN+o+"="+u.seg+"&"+KN+o+"="+u.ts+"&"+QN+o+"="+u.d,o++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(i,Math.floor(XN)),l=()=>{clearTimeout(o),i()};this.addTag(e,l)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=16384,tI=45e3;let cl=null;typeof MozWebSocket<"u"?cl=MozWebSocket:typeof WebSocket<"u"&&(cl=WebSocket);class cn{constructor(e,n,i,o,l,u,p){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Co(this.connId),this.stats_=nh(n),this.connURL=cn.connectionURL_(n,u,p,o,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,o,l){const u={};return u[l_]=th,typeof location<"u"&&location.hostname&&h_.test(location.hostname)&&(u[u_]=d_),n&&(u[c_]=n),i&&(u[f_]=i),o&&(u[yd]=o),l&&(u[p_]=l),__(e,m_,u)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kr.set("previous_websocket_failure",!0);try{let i;Xx(),this.mySock=new cl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){cn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&cl!==null&&!cn.forceDisallow_}static previouslyFailed(){return Kr.isInMemoryStorage||Kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Kr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=so(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=ut(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=o_(n,eI);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(tI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}cn.responsesRequiredToBeHealthy=2;cn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{static get ALL_TRANSPORTS(){return[bs,cn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=cn&&cn.isAvailable();let i=n&&!cn.previouslyFailed();if(e.webSocketOnly&&(n||Tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[cn];else{const o=this.transports_=[];for(const l of ao.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);ao.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ao.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=6e4,rI=5e3,sI=10*1024,iI=100*1024,Yu="t",gg="d",oI="s",vg="r",aI="e",_g="o",yg="a",wg="n",xg="p",lI="h";class cI{constructor(e,n,i,o,l,u,p,m,g,w){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=u,this.onReady_=p,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Co("c:"+this.id+":"),this.transportManager_=new ao(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Xi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>iI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>sI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Yu in e){const n=e[Yu];n===yg?this.upgradeIfSecondaryHealthy_():n===vg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_g&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Hi("t",e),i=Hi("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:xg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:yg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Hi("t",e),i=Hi("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Hi(Yu,e);if(gg in e){const i=e[gg];if(n===lI){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===wg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===oI?this.onConnectionShutdown_(i):n===vg?this.onReset_(i):n===aI?_d("Server Error: "+i):n===_g?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_d("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),th!==i&&Tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Xi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(nI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(rI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:xg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{put(e,n,i,o){}merge(e,n,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const o=this.getInitialEvent(e);o&&n.apply(i,o)}off(e,n,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===n&&(!i||i===o[l].context)){o.splice(l,1);return}}validateEventType_(e){W(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends N_{static getInstance(){return new ul}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Fd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return W(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=32,Cg=768;class De{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Pe(){return new De("")}function ye(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function xr(r){return r.pieces_.length-r.pieceNum_}function Fe(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new De(r.pieces_,e)}function sh(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function uI(r){let e="";for(let n=r.pieceNum_;n<r.pieces_.length;n++)r.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[n])));return e||"/"}function lo(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function I_(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let n=r.pieceNum_;n<r.pieces_.length-1;n++)e.push(r.pieces_[n]);return new De(e,0)}function et(r,e){const n=[];for(let i=r.pieceNum_;i<r.pieces_.length;i++)n.push(r.pieces_[i]);if(e instanceof De)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&n.push(i[o])}return new De(n,0)}function xe(r){return r.pieceNum_>=r.pieces_.length}function It(r,e){const n=ye(r),i=ye(e);if(n===null)return e;if(n===i)return It(Fe(r),Fe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function dI(r,e){const n=lo(r,0),i=lo(e,0);for(let o=0;o<n.length&&o<i.length;o++){const l=ns(n[o],i[o]);if(l!==0)return l}return n.length===i.length?0:n.length<i.length?-1:1}function ih(r,e){if(xr(r)!==xr(e))return!1;for(let n=r.pieceNum_,i=e.pieceNum_;n<=r.pieces_.length;n++,i++)if(r.pieces_[n]!==e.pieces_[i])return!1;return!0}function Jt(r,e){let n=r.pieceNum_,i=e.pieceNum_;if(xr(r)>xr(e))return!1;for(;n<r.pieces_.length;){if(r.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class hI{constructor(e,n){this.errorPrefix_=n,this.parts_=lo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Tl(this.parts_[i]);T_(this)}}function fI(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=Tl(e),T_(r)}function pI(r){const e=r.parts_.pop();r.byteLength_-=Tl(e),r.parts_.length>0&&(r.byteLength_-=1)}function T_(r){if(r.byteLength_>Cg)throw new Error(r.errorPrefix_+"has a key path longer than "+Cg+" bytes ("+r.byteLength_+").");if(r.parts_.length>Sg)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Sg+") or object contains a cycle "+qr(r))}function qr(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends N_{static getInstance(){return new oh}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return W(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=1e3,mI=300*1e3,Eg=30*1e3,gI=1.3,vI=3e4,_I="server_kill",Ng=3;class Mn extends E_{constructor(e,n,i,o,l,u,p,m){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=Mn.nextPersistentConnectionId_++,this.log_=Co("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qi,this.maxReconnectDelay_=mI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");oh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ul.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const o=++this.requestNumber_,l={r:o,a:e,b:n};this.log_(ut(l)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const n=new vo,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const p=u.d;u.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),n.promise}listen(e,n,i,o){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:n,query:e,tag:i};this.listens.get(u).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i},u="q";e.tag&&(l.q=n._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,p=>{const m=p.d,g=p.s;Mn.warnOnListenWarnings_(m,n),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Sn(e,"w")){const i=Fs(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',l=n._path.toString();Tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||iS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Eg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=sS(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,o=>{const l=o.s,u=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,n)}sendUnlisten_(e,n,i,o){this.log_("Unlisten on "+e+" for "+n);const l={p:e},u="n";o&&(l.q=i,l.t=o),this.sendRequest(u,l)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,o){const l={p:n,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{o&&setTimeout(()=>{o(u.s,u.d)},Math.floor(0))})}put(e,n,i,o){this.putInternal("p",e,n,i,o)}merge(e,n,i,o){this.putInternal("m",e,n,i,o)}putInternal(e,n,i,o,l){this.initConnection_();const u={p:n,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:o}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,l=>{this.log_(n+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ut(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):_d("Unrecognized action received from server: "+ut(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=qi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vI&&(this.reconnectDelay_=qi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*gI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Mn.nextConnectionId_++,l=this.lastSessionId;let u=!1,p=null;const m=function(){p?p.close():(u=!0,i())},g=function(_){W(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(_)};this.realtime_={close:m,sendRequest:g};const w=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,y]=await Promise.all([this.authTokenProvider_.getToken(w),this.appCheckTokenProvider_.getToken(w)]);u?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=y&&y.token,p=new cI(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,b=>{Tt(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(_I)},l))}catch(_){this.log_("Failed to get token: "+_),u||(this.repoInfo_.nodeAdmin&&Tt(_),m())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],cd(this.interruptReasons_)&&(this.reconnectDelay_=qi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(l=>eh(l)).join("$"):i="default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const i=new De(e).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(n),l.delete(n),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,n){_t("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ng&&(this.reconnectDelay_=Eg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_t("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ng&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+r_.replace(/\./g,"-")]=1,Fd()?e["framework.cordova"]=1:gv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ul.getInstance().currentlyOnline();return cd(this.interruptReasons_)&&e}}Mn.nextPersistentConnectionId_=0;Mn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new we(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new we(zs,e),o=new we(zs,n);return this.compare(i,o)!==0}minPost(){return we.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za;class k_ extends bl{static get __EMPTY_NODE(){return za}static set __EMPTY_NODE(e){za=e}compare(e,n){return ns(e.name,n.name)}isDefinedOn(e){throw Ks("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return we.MIN}maxPost(){return new we(Xr,za)}makePost(e,n){return W(typeof e=="string","KeyIndex indexValue must always be a string."),new we(e,za)}toString(){return".key"}}const Ls=new k_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n,i,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=n?i(e.key,n):1,o&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class mt{constructor(e,n,i,o,l){this.key=e,this.value=n,this.color=i??mt.RED,this.left=o??Lt.EMPTY_NODE,this.right=l??Lt.EMPTY_NODE}copy(e,n,i,o,l){return new mt(e??this.key,n??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const l=i(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,n,i),null):l===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Lt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,o;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Lt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}mt.RED=!0;mt.BLACK=!1;class yI{copy(e,n,i,o,l){return this}insert(e,n,i){return new mt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Lt{constructor(e,n=Lt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Lt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,mt.BLACK,null,null))}remove(e){return new Lt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,o=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(o=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ba(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ba(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ba(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ba(this.root_,null,this.comparator_,!0,e)}}Lt.EMPTY_NODE=new yI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(r,e){return ns(r.name,e.name)}function ah(r,e){return ns(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd;function xI(r){wd=r}const P_=function(r){return typeof r=="number"?"number:"+a_(r):"string:"+r},R_=function(r){if(r.isLeafNode()){const e=r.val();W(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Sn(e,".sv"),"Priority must be a string or number.")}else W(r===wd||r.isEmpty(),"priority of unexpected type.");W(r===wd||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig;class pt{static set __childrenNodeConstructor(e){Ig=e}static get __childrenNodeConstructor(){return Ig}constructor(e,n=pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,W(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),R_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:ye(e)===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=ye(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(W(i!==".priority"||xr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+P_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=a_(this.value_):e+=this.value_,this.lazyHash_=i_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pt.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,o=pt.VALUE_TYPE_ORDER.indexOf(n),l=pt.VALUE_TYPE_ORDER.indexOf(i);return W(o>=0,"Unknown leaf type: "+n),W(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b_,A_;function SI(r){b_=r}function CI(r){A_=r}class EI extends bl{compare(e,n){const i=e.node.getPriority(),o=n.node.getPriority(),l=i.compareTo(o);return l===0?ns(e.name,n.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return we.MIN}maxPost(){return new we(Xr,new pt("[PRIORITY-POST]",A_))}makePost(e,n){const i=b_(e);return new we(n,new pt("[PRIORITY-POST]",i))}toString(){return".priority"}}const tt=new EI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=Math.log(2);class II{constructor(e){const n=l=>parseInt(Math.log(l)/NI,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=i(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const dl=function(r,e,n,i){r.sort(e);const o=function(m,g){const w=g-m;let _,y;if(w===0)return null;if(w===1)return _=r[m],y=n?n(_):_,new mt(y,_.node,mt.BLACK,null,null);{const b=parseInt(w/2,10)+m,A=o(m,b),M=o(b+1,g);return _=r[b],y=n?n(_):_,new mt(y,_.node,mt.BLACK,A,M)}},l=function(m){let g=null,w=null,_=r.length;const y=function(A,M){const D=_-A,X=_;_-=A;const j=o(D+1,X),G=r[D],V=n?n(G):G;b(new mt(V,G.node,M,null,j))},b=function(A){g?(g.left=A,g=A):(w=A,g=A)};for(let A=0;A<m.count;++A){const M=m.nextBitIsOne(),D=Math.pow(2,m.count-(A+1));M?y(D,mt.BLACK):(y(D,mt.BLACK),y(D,mt.RED))}return w},u=new II(r.length),p=l(u);return new Lt(i||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju;const Ps={};class Ln{static get Default(){return W(Ps&&tt,"ChildrenNode.ts has not been loaded"),Ju=Ju||new Ln({".priority":Ps},{".priority":tt}),Ju}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Fs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Lt?n:null}hasIndex(e){return Sn(this.indexSet_,e.toString())}addIndex(e,n){W(e!==Ls,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const l=n.getIterator(we.Wrap);let u=l.getNext();for(;u;)o=o||e.isDefinedOn(u.node),i.push(u),u=l.getNext();let p;o?p=dl(i,e.getCompare()):p=Ps;const m=e.toString(),g=Object.assign({},this.indexSet_);g[m]=e;const w=Object.assign({},this.indexes_);return w[m]=p,new Ln(w,g)}addToIndexes(e,n){const i=tl(this.indexes_,(o,l)=>{const u=Fs(this.indexSet_,l);if(W(u,"Missing index implementation for "+l),o===Ps)if(u.isDefinedOn(e.node)){const p=[],m=n.getIterator(we.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&p.push(g),g=m.getNext();return p.push(e),dl(p,u.getCompare())}else return Ps;else{const p=n.get(e.name);let m=o;return p&&(m=m.remove(new we(e.name,p))),m.insert(e,e.node)}});return new Ln(i,this.indexSet_)}removeFromIndexes(e,n){const i=tl(this.indexes_,o=>{if(o===Ps)return o;{const l=n.get(e.name);return l?o.remove(new we(e.name,l)):o}});return new Ln(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi;class he{static get EMPTY_NODE(){return Gi||(Gi=new he(new Lt(ah),null,Ln.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&R_(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gi}updatePriority(e){return this.children_.isEmpty()?this:new he(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Gi:n}}getChild(e){const n=ye(e);return n===null?this:this.getImmediateChild(n).getChild(Fe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(W(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new we(e,n);let o,l;n.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(i,this.children_));const u=o.isEmpty()?Gi:this.priorityNode_;return new he(o,u,l)}}updateChild(e,n){const i=ye(e);if(i===null)return n;{W(ye(e)!==".priority"||xr(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Fe(e),n);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,o=0,l=!0;if(this.forEachChild(tt,(u,p)=>{n[u]=p.val(e),i++,l&&he.INTEGER_REGEXP_.test(u)?o=Math.max(o,Number(u)):l=!1}),!e&&l&&o<2*i){const u=[];for(const p in n)u[p]=n[p];return u}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+P_(this.getPriority().val())+":"),this.forEachChild(tt,(n,i)=>{const o=i.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":i_(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new we(e,n));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new we(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new we(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,we.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,we.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Eo?-1:0}withIndex(e){if(e===Ls||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new he(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ls||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(tt),o=n.getIterator(tt);let l=i.getNext(),u=o.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=o.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===Ls?null:this.indexMap_.get(e.toString())}}he.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class TI extends he{constructor(){super(new Lt(ah),he.EMPTY_NODE,Ln.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return he.EMPTY_NODE}isEmpty(){return!1}}const Eo=new TI;Object.defineProperties(we,{MIN:{value:new we(zs,he.EMPTY_NODE)},MAX:{value:new we(Xr,Eo)}});k_.__EMPTY_NODE=he.EMPTY_NODE;pt.__childrenNodeConstructor=he;xI(Eo);CI(Eo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=!0;function ct(r,e=null){if(r===null)return he.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),W(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const n=r;return new pt(n,ct(e))}if(!(r instanceof Array)&&kI){const n=[];let i=!1;if(yt(r,(u,p)=>{if(u.substring(0,1)!=="."){const m=ct(p);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),n.push(new we(u,m)))}}),n.length===0)return he.EMPTY_NODE;const l=dl(n,wI,u=>u.name,ah);if(i){const u=dl(n,tt.getCompare());return new he(l,ct(e),new Ln({".priority":u},{".priority":tt}))}else return new he(l,ct(e),Ln.Default)}else{let n=he.EMPTY_NODE;return yt(r,(i,o)=>{if(Sn(r,i)&&i.substring(0,1)!=="."){const l=ct(o);(l.isLeafNode()||!l.isEmpty())&&(n=n.updateImmediateChild(i,l))}}),n.updatePriority(ct(e))}}SI(ct);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI extends bl{constructor(e){super(),this.indexPath_=e,W(!xe(e)&&ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),o=this.extractChild(n.node),l=i.compareTo(o);return l===0?ns(e.name,n.name):l}makePost(e,n){const i=ct(e),o=he.EMPTY_NODE.updateChild(this.indexPath_,i);return new we(n,o)}maxPost(){const e=he.EMPTY_NODE.updateChild(this.indexPath_,Eo);return new we(Xr,e)}toString(){return lo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI extends bl{compare(e,n){const i=e.node.compareTo(n.node);return i===0?ns(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return we.MIN}maxPost(){return we.MAX}makePost(e,n){const i=ct(e);return new we(n,i)}toString(){return".value"}}const bI=new RI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(r){return{type:"value",snapshotNode:r}}function Bs(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function co(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function uo(r,e,n){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:n}}function AI(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this.index_=e}updateChild(e,n,i,o,l,u){W(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(n);return p.getChild(o).equals(i.getChild(o))&&p.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(n)?u.trackChildChange(co(n,p)):W(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?u.trackChildChange(Bs(n,i)):u.trackChildChange(uo(n,i,p))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(tt,(o,l)=>{n.hasChild(o)||i.trackChildChange(co(o,l))}),n.isLeafNode()||n.forEachChild(tt,(o,l)=>{if(e.hasChild(o)){const u=e.getImmediateChild(o);u.equals(l)||i.trackChildChange(uo(o,l,u))}else i.trackChildChange(Bs(o,l))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?he.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.indexedFilter_=new lh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ho.getStartPost_(e),this.endPost_=ho.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,o,l,u){return this.matches(new we(n,i))||(i=he.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,o,l,u)}updateFullNode(e,n,i){n.isLeafNode()&&(n=he.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(he.EMPTY_NODE);const l=this;return n.forEachChild(tt,(u,p)=>{l.matches(new we(u,p))||(o=o.updateImmediateChild(u,he.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new ho(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,o,l,u){return this.rangedFilter_.matches(new we(n,i))||(i=he.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,o,l,u):this.fullLimitUpdateChild_(e,n,i,l,u)}updateFullNode(e,n,i){let o;if(n.isLeafNode()||n.isEmpty())o=he.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=he.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const p=l.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))o=o.updateImmediateChild(p.name,p.node),u++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(he.EMPTY_NODE);let l;this.reverse_?l=o.getReverseIterator(this.index_):l=o.getIterator(this.index_);let u=0;for(;l.hasNext();){const p=l.getNext();u<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?u++:o=o.updateImmediateChild(p.name,he.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,o,l){let u;if(this.reverse_){const _=this.index_.getCompare();u=(y,b)=>_(b,y)}else u=this.index_.getCompare();const p=e;W(p.numChildren()===this.limit_,"");const m=new we(n,i),g=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),w=this.rangedFilter_.matches(m);if(p.hasChild(n)){const _=p.getImmediateChild(n);let y=o.getChildAfterChild(this.index_,g,this.reverse_);for(;y!=null&&(y.name===n||p.hasChild(y.name));)y=o.getChildAfterChild(this.index_,y,this.reverse_);const b=y==null?1:u(y,m);if(w&&!i.isEmpty()&&b>=0)return l!=null&&l.trackChildChange(uo(n,i,_)),p.updateImmediateChild(n,i);{l!=null&&l.trackChildChange(co(n,_));const M=p.updateImmediateChild(n,he.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(l!=null&&l.trackChildChange(Bs(y.name,y.node)),M.updateImmediateChild(y.name,y.node)):M}}else return i.isEmpty()?e:w&&u(g,m)>=0?(l!=null&&(l.trackChildChange(co(g.name,g.node)),l.trackChildChange(Bs(n,i))),p.updateImmediateChild(n,i).updateImmediateChild(g.name,he.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return W(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zs}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return W(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tt}copy(){const e=new ch;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function DI(r){return r.loadsAllData()?new lh(r.getIndex()):r.hasLimit()?new jI(r):new ho(r)}function Tg(r){const e={};if(r.isDefault())return e;let n;if(r.index_===tt?n="$priority":r.index_===bI?n="$value":r.index_===Ls?n="$key":(W(r.index_ instanceof PI,"Unrecognized index type!"),n=r.index_.toString()),e.orderBy=ut(n),r.startSet_){const i=r.startAfterSet_?"startAfter":"startAt";e[i]=ut(r.indexStartValue_),r.startNameSet_&&(e[i]+=","+ut(r.indexStartName_))}if(r.endSet_){const i=r.endBeforeSet_?"endBefore":"endAt";e[i]=ut(r.indexEndValue_),r.endNameSet_&&(e[i]+=","+ut(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function kg(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let n=r.viewFrom_;n===""&&(r.isViewFromLeft()?n="l":n="r"),e.vf=n}return r.index_!==tt&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends E_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=Co("p:rest:"),this.listens_={}}listen(e,n,i,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=hl.getListenId_(e,i),p={};this.listens_[u]=p;const m=Tg(e._queryParams);this.restRequest_(l+".json",m,(g,w)=>{let _=w;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(l,_,!1,i),Fs(this.listens_,u)===p){let y;g?g===401?y="permission_denied":y="rest_error:"+g:y="ok",o(y,null)}})}unlisten(e,n){const i=hl.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Tg(e._queryParams),i=e._path.toString(),o=new vo;return this.restRequest_(i+".json",n,(l,u)=>{let p=u;l===404&&(p=null,l=null),l===null?(this.onDataUpdate_(i,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(n.auth=o.accessToken),l&&l.token&&(n.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ys(n);this.log_("Sending REST request for "+u);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(i&&p.readyState===4){this.log_("REST Response for "+u+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=so(p.responseText)}catch{Tt("Failed to parse JSON response for "+u+": "+p.responseText)}i(null,m)}else p.status!==401&&p.status!==404&&Tt("Got unsuccessful REST response for "+u+" Status: "+p.status),i(p.status);i=null}},p.open("GET",u,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.rootNode_=he.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(){return{value:null,children:new Map}}function D_(r,e,n){if(xe(e))r.value=n,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,n);else{const i=ye(e);r.children.has(i)||r.children.set(i,fl());const o=r.children.get(i);e=Fe(e),D_(o,e,n)}}function xd(r,e,n){r.value!==null?n(e,r.value):LI(r,(i,o)=>{const l=new De(e.toString()+"/"+i);xd(o,l,n)})}function LI(r,e){r.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&yt(this.last_,(i,o)=>{n[i]=n[i]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=10*1e3,FI=30*1e3,UI=300*1e3;class $I{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new MI(e);const i=Pg+(FI-Pg)*Math.random();Xi(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;yt(e,(o,l)=>{l>0&&Sn(this.statsToReport_,o)&&(n[o]=l,i=!0)}),i&&this.server_.reportStats(n),Xi(this.reportStats_.bind(this),Math.floor(Math.random()*2*UI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(dn||(dn={}));function uh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function dh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function hh(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=dn.ACK_USER_WRITE,this.source=uh()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new De(e));return new pl(Pe(),n,this.revert)}}else return W(ye(this.path)===e,"operationForChild called for unrelated child."),new pl(Fe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.source=e,this.path=n,this.type=dn.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new fo(this.source,Pe()):new fo(this.source,Fe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=dn.OVERWRITE}operationForChild(e){return xe(this.path)?new Zr(this.source,Pe(),this.snap.getImmediateChild(e)):new Zr(this.source,Fe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=dn.MERGE}operationForChild(e){if(xe(this.path)){const n=this.children.subtree(new De(e));return n.isEmpty()?null:n.value?new Zr(this.source,Pe(),n.value):new Ws(this.source,Pe(),n)}else return W(ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ws(this.source,Fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ye(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function BI(r,e,n,i){const o=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&r.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(AI(u.childName,u.snapshotNode))}),Ki(r,o,"child_removed",e,i,n),Ki(r,o,"child_added",e,i,n),Ki(r,o,"child_moved",l,i,n),Ki(r,o,"child_changed",e,i,n),Ki(r,o,"value",e,i,n),o}function Ki(r,e,n,i,o,l){const u=i.filter(p=>p.type===n);u.sort((p,m)=>VI(r,p,m)),u.forEach(p=>{const m=WI(r,p,l);o.forEach(g=>{g.respondsTo(p.type)&&e.push(g.createEvent(m,r.query_))})})}function WI(r,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function VI(r,e,n){if(e.childName==null||n.childName==null)throw Ks("Should only compare child_ events.");const i=new we(e.childName,e.snapshotNode),o=new we(n.childName,n.snapshotNode);return r.index_.compare(i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(r,e){return{eventCache:r,serverCache:e}}function Zi(r,e,n,i){return Al(new Sr(e,n,i),r.serverCache)}function O_(r,e,n,i){return Al(r.eventCache,new Sr(e,n,i))}function ml(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function es(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu;const HI=()=>(Xu||(Xu=new Lt(PN)),Xu);class Me{static fromObject(e){let n=new Me(null);return yt(e,(i,o)=>{n=n.set(new De(i),o)}),n}constructor(e,n=HI()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Pe(),value:this.value};if(xe(e))return null;{const i=ye(e),o=this.children.get(i);if(o!==null){const l=o.findRootMostMatchingPathAndValue(Fe(e),n);return l!=null?{path:et(new De(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const n=ye(e),i=this.children.get(n);return i!==null?i.subtree(Fe(e)):new Me(null)}}set(e,n){if(xe(e))return new Me(n,this.children);{const i=ye(e),l=(this.children.get(i)||new Me(null)).set(Fe(e),n),u=this.children.insert(i,l);return new Me(this.value,u)}}remove(e){if(xe(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=ye(e),i=this.children.get(n);if(i){const o=i.remove(Fe(e));let l;return o.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,o),this.value===null&&l.isEmpty()?new Me(null):new Me(this.value,l)}else return this}}get(e){if(xe(e))return this.value;{const n=ye(e),i=this.children.get(n);return i?i.get(Fe(e)):null}}setTree(e,n){if(xe(e))return n;{const i=ye(e),l=(this.children.get(i)||new Me(null)).setTree(Fe(e),n);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new Me(this.value,u)}}fold(e){return this.fold_(Pe(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((o,l)=>{i[o]=l.fold_(et(e,o),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Pe(),n)}findOnPath_(e,n,i){const o=this.value?i(n,this.value):!1;if(o)return o;if(xe(e))return null;{const l=ye(e),u=this.children.get(l);return u?u.findOnPath_(Fe(e),et(n,l),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Pe(),n)}foreachOnPath_(e,n,i){if(xe(e))return this;{this.value&&i(n,this.value);const o=ye(e),l=this.children.get(o);return l?l.foreachOnPath_(Fe(e),et(n,o),i):new Me(null)}}foreach(e){this.foreach_(Pe(),e)}foreach_(e,n){this.children.inorderTraversal((i,o)=>{o.foreach_(et(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.writeTree_=e}static empty(){return new fn(new Me(null))}}function eo(r,e,n){if(xe(e))return new fn(new Me(n));{const i=r.writeTree_.findRootMostValueAndPath(e);if(i!=null){const o=i.path;let l=i.value;const u=It(o,e);return l=l.updateChild(u,n),new fn(r.writeTree_.set(o,l))}else{const o=new Me(n),l=r.writeTree_.setTree(e,o);return new fn(l)}}}function Sd(r,e,n){let i=r;return yt(n,(o,l)=>{i=eo(i,et(e,o),l)}),i}function Rg(r,e){if(xe(e))return fn.empty();{const n=r.writeTree_.setTree(e,new Me(null));return new fn(n)}}function Cd(r,e){return rs(r,e)!=null}function rs(r,e){const n=r.writeTree_.findRootMostValueAndPath(e);return n!=null?r.writeTree_.get(n.path).getChild(It(n.path,e)):null}function bg(r){const e=[],n=r.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tt,(i,o)=>{e.push(new we(i,o))}):r.writeTree_.children.inorderTraversal((i,o)=>{o.value!=null&&e.push(new we(i,o.value))}),e}function yr(r,e){if(xe(e))return r;{const n=rs(r,e);return n!=null?new fn(new Me(n)):new fn(r.writeTree_.subtree(e))}}function Ed(r){return r.writeTree_.isEmpty()}function Vs(r,e){return L_(Pe(),r.writeTree_,e)}function L_(r,e,n){if(e.value!=null)return n.updateChild(r,e.value);{let i=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?(W(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):n=L_(et(r,o),l,n)}),!n.getChild(r).isEmpty()&&i!==null&&(n=n.updateChild(et(r,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(r,e){return $_(e,r)}function qI(r,e,n,i,o){W(i>r.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),r.allWrites.push({path:e,snap:n,writeId:i,visible:o}),o&&(r.visibleWrites=eo(r.visibleWrites,e,n)),r.lastWriteId=i}function GI(r,e,n,i){W(i>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:n,writeId:i,visible:!0}),r.visibleWrites=Sd(r.visibleWrites,e,n),r.lastWriteId=i}function KI(r,e){for(let n=0;n<r.allWrites.length;n++){const i=r.allWrites[n];if(i.writeId===e)return i}return null}function QI(r,e){const n=r.allWrites.findIndex(p=>p.writeId===e);W(n>=0,"removeWrite called with nonexistent writeId.");const i=r.allWrites[n];r.allWrites.splice(n,1);let o=i.visible,l=!1,u=r.allWrites.length-1;for(;o&&u>=0;){const p=r.allWrites[u];p.visible&&(u>=n&&YI(p,i.path)?o=!1:Jt(i.path,p.path)&&(l=!0)),u--}if(o){if(l)return JI(r),!0;if(i.snap)r.visibleWrites=Rg(r.visibleWrites,i.path);else{const p=i.children;yt(p,m=>{r.visibleWrites=Rg(r.visibleWrites,et(i.path,m))})}return!0}else return!1}function YI(r,e){if(r.snap)return Jt(r.path,e);for(const n in r.children)if(r.children.hasOwnProperty(n)&&Jt(et(r.path,n),e))return!0;return!1}function JI(r){r.visibleWrites=M_(r.allWrites,XI,Pe()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function XI(r){return r.visible}function M_(r,e,n){let i=fn.empty();for(let o=0;o<r.length;++o){const l=r[o];if(e(l)){const u=l.path;let p;if(l.snap)Jt(n,u)?(p=It(n,u),i=eo(i,p,l.snap)):Jt(u,n)&&(p=It(u,n),i=eo(i,Pe(),l.snap.getChild(p)));else if(l.children){if(Jt(n,u))p=It(n,u),i=Sd(i,p,l.children);else if(Jt(u,n))if(p=It(u,n),xe(p))i=Sd(i,Pe(),l.children);else{const m=Fs(l.children,ye(p));if(m){const g=m.getChild(Fe(p));i=eo(i,Pe(),g)}}}else throw Ks("WriteRecord should have .snap or .children")}}return i}function F_(r,e,n,i,o){if(!i&&!o){const l=rs(r.visibleWrites,e);if(l!=null)return l;{const u=yr(r.visibleWrites,e);if(Ed(u))return n;if(n==null&&!Cd(u,Pe()))return null;{const p=n||he.EMPTY_NODE;return Vs(u,p)}}}else{const l=yr(r.visibleWrites,e);if(!o&&Ed(l))return n;if(!o&&n==null&&!Cd(l,Pe()))return null;{const u=function(g){return(g.visible||o)&&(!i||!~i.indexOf(g.writeId))&&(Jt(g.path,e)||Jt(e,g.path))},p=M_(r.allWrites,u,e),m=n||he.EMPTY_NODE;return Vs(p,m)}}}function ZI(r,e,n){let i=he.EMPTY_NODE;const o=rs(r.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(tt,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(n){const l=yr(r.visibleWrites,e);return n.forEachChild(tt,(u,p)=>{const m=Vs(yr(l,new De(u)),p);i=i.updateImmediateChild(u,m)}),bg(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=yr(r.visibleWrites,e);return bg(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function e1(r,e,n,i,o){W(i||o,"Either existingEventSnap or existingServerSnap must exist");const l=et(e,n);if(Cd(r.visibleWrites,l))return null;{const u=yr(r.visibleWrites,l);return Ed(u)?o.getChild(n):Vs(u,o.getChild(n))}}function t1(r,e,n,i){const o=et(e,n),l=rs(r.visibleWrites,o);if(l!=null)return l;if(i.isCompleteForChild(n)){const u=yr(r.visibleWrites,o);return Vs(u,i.getNode().getImmediateChild(n))}else return null}function n1(r,e){return rs(r.visibleWrites,e)}function r1(r,e,n,i,o,l,u){let p;const m=yr(r.visibleWrites,e),g=rs(m,Pe());if(g!=null)p=g;else if(n!=null)p=Vs(m,n);else return[];if(p=p.withIndex(u),!p.isEmpty()&&!p.isLeafNode()){const w=[],_=u.getCompare(),y=l?p.getReverseIteratorFrom(i,u):p.getIteratorFrom(i,u);let b=y.getNext();for(;b&&w.length<o;)_(b,i)!==0&&w.push(b),b=y.getNext();return w}else return[]}function s1(){return{visibleWrites:fn.empty(),allWrites:[],lastWriteId:-1}}function gl(r,e,n,i){return F_(r.writeTree,r.treePath,e,n,i)}function fh(r,e){return ZI(r.writeTree,r.treePath,e)}function Ag(r,e,n,i){return e1(r.writeTree,r.treePath,e,n,i)}function vl(r,e){return n1(r.writeTree,et(r.treePath,e))}function i1(r,e,n,i,o,l){return r1(r.writeTree,r.treePath,e,n,i,o,l)}function ph(r,e,n){return t1(r.writeTree,r.treePath,e,n)}function U_(r,e){return $_(et(r.treePath,e),r.writeTree)}function $_(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;W(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),W(i!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const l=o.type;if(n==="child_added"&&l==="child_removed")this.changeMap.set(i,uo(i,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&l==="child_changed")this.changeMap.set(i,co(i,o.oldSnap));else if(n==="child_changed"&&l==="child_added")this.changeMap.set(i,Bs(i,e.snapshotNode));else if(n==="child_changed"&&l==="child_changed")this.changeMap.set(i,uo(i,e.snapshotNode,o.oldSnap));else throw Ks("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const z_=new a1;class mh{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Sr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ph(this.writes_,e,i)}}getChildAfterChild(e,n,i){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:es(this.viewCache_),l=i1(this.writes_,o,n,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(r){return{filter:r}}function c1(r,e){W(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),W(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function u1(r,e,n,i,o){const l=new o1;let u,p;if(n.type===dn.OVERWRITE){const g=n;g.source.fromUser?u=Nd(r,e,g.path,g.snap,i,o,l):(W(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered()&&!xe(g.path),u=_l(r,e,g.path,g.snap,i,o,p,l))}else if(n.type===dn.MERGE){const g=n;g.source.fromUser?u=h1(r,e,g.path,g.children,i,o,l):(W(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered(),u=Id(r,e,g.path,g.children,i,o,p,l))}else if(n.type===dn.ACK_USER_WRITE){const g=n;g.revert?u=m1(r,e,g.path,i,o,l):u=f1(r,e,g.path,g.affectedTree,i,o,l)}else if(n.type===dn.LISTEN_COMPLETE)u=p1(r,e,n.path,i,l);else throw Ks("Unknown operation type: "+n.type);const m=l.getChanges();return d1(e,u,m),{viewCache:u,changes:m}}function d1(r,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=ml(r);(n.length>0||!r.eventCache.isFullyInitialized()||o&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&n.push(j_(ml(e)))}}function B_(r,e,n,i,o,l){const u=e.eventCache;if(vl(i,n)!=null)return e;{let p,m;if(xe(n))if(W(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=es(e),w=g instanceof he?g:he.EMPTY_NODE,_=fh(i,w);p=r.filter.updateFullNode(e.eventCache.getNode(),_,l)}else{const g=gl(i,es(e));p=r.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=ye(n);if(g===".priority"){W(xr(n)===1,"Can't have a priority with additional path components");const w=u.getNode();m=e.serverCache.getNode();const _=Ag(i,n,w,m);_!=null?p=r.filter.updatePriority(w,_):p=u.getNode()}else{const w=Fe(n);let _;if(u.isCompleteForChild(g)){m=e.serverCache.getNode();const y=Ag(i,n,u.getNode(),m);y!=null?_=u.getNode().getImmediateChild(g).updateChild(w,y):_=u.getNode().getImmediateChild(g)}else _=ph(i,g,e.serverCache);_!=null?p=r.filter.updateChild(u.getNode(),g,_,w,o,l):p=u.getNode()}}return Zi(e,p,u.isFullyInitialized()||xe(n),r.filter.filtersNodes())}}function _l(r,e,n,i,o,l,u,p){const m=e.serverCache;let g;const w=u?r.filter:r.filter.getIndexedFilter();if(xe(n))g=w.updateFullNode(m.getNode(),i,null);else if(w.filtersNodes()&&!m.isFiltered()){const b=m.getNode().updateChild(n,i);g=w.updateFullNode(m.getNode(),b,null)}else{const b=ye(n);if(!m.isCompleteForPath(n)&&xr(n)>1)return e;const A=Fe(n),D=m.getNode().getImmediateChild(b).updateChild(A,i);b===".priority"?g=w.updatePriority(m.getNode(),D):g=w.updateChild(m.getNode(),b,D,A,z_,null)}const _=O_(e,g,m.isFullyInitialized()||xe(n),w.filtersNodes()),y=new mh(o,_,l);return B_(r,_,n,o,y,p)}function Nd(r,e,n,i,o,l,u){const p=e.eventCache;let m,g;const w=new mh(o,e,l);if(xe(n))g=r.filter.updateFullNode(e.eventCache.getNode(),i,u),m=Zi(e,g,!0,r.filter.filtersNodes());else{const _=ye(n);if(_===".priority")g=r.filter.updatePriority(e.eventCache.getNode(),i),m=Zi(e,g,p.isFullyInitialized(),p.isFiltered());else{const y=Fe(n),b=p.getNode().getImmediateChild(_);let A;if(xe(y))A=i;else{const M=w.getCompleteChild(_);M!=null?sh(y)===".priority"&&M.getChild(I_(y)).isEmpty()?A=M:A=M.updateChild(y,i):A=he.EMPTY_NODE}if(b.equals(A))m=e;else{const M=r.filter.updateChild(p.getNode(),_,A,y,w,u);m=Zi(e,M,p.isFullyInitialized(),r.filter.filtersNodes())}}}return m}function jg(r,e){return r.eventCache.isCompleteForChild(e)}function h1(r,e,n,i,o,l,u){let p=e;return i.foreach((m,g)=>{const w=et(n,m);jg(e,ye(w))&&(p=Nd(r,p,w,g,o,l,u))}),i.foreach((m,g)=>{const w=et(n,m);jg(e,ye(w))||(p=Nd(r,p,w,g,o,l,u))}),p}function Dg(r,e,n){return n.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function Id(r,e,n,i,o,l,u,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;xe(n)?g=i:g=new Me(null).setTree(n,i);const w=e.serverCache.getNode();return g.children.inorderTraversal((_,y)=>{if(w.hasChild(_)){const b=e.serverCache.getNode().getImmediateChild(_),A=Dg(r,b,y);m=_l(r,m,new De(_),A,o,l,u,p)}}),g.children.inorderTraversal((_,y)=>{const b=!e.serverCache.isCompleteForChild(_)&&y.value===null;if(!w.hasChild(_)&&!b){const A=e.serverCache.getNode().getImmediateChild(_),M=Dg(r,A,y);m=_l(r,m,new De(_),M,o,l,u,p)}}),m}function f1(r,e,n,i,o,l,u){if(vl(o,n)!=null)return e;const p=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(xe(n)&&m.isFullyInitialized()||m.isCompleteForPath(n))return _l(r,e,n,m.getNode().getChild(n),o,l,p,u);if(xe(n)){let g=new Me(null);return m.getNode().forEachChild(Ls,(w,_)=>{g=g.set(new De(w),_)}),Id(r,e,n,g,o,l,p,u)}else return e}else{let g=new Me(null);return i.foreach((w,_)=>{const y=et(n,w);m.isCompleteForPath(y)&&(g=g.set(w,m.getNode().getChild(y)))}),Id(r,e,n,g,o,l,p,u)}}function p1(r,e,n,i,o){const l=e.serverCache,u=O_(e,l.getNode(),l.isFullyInitialized()||xe(n),l.isFiltered());return B_(r,u,n,i,z_,o)}function m1(r,e,n,i,o,l){let u;if(vl(i,n)!=null)return e;{const p=new mh(i,e,o),m=e.eventCache.getNode();let g;if(xe(n)||ye(n)===".priority"){let w;if(e.serverCache.isFullyInitialized())w=gl(i,es(e));else{const _=e.serverCache.getNode();W(_ instanceof he,"serverChildren would be complete if leaf node"),w=fh(i,_)}w=w,g=r.filter.updateFullNode(m,w,l)}else{const w=ye(n);let _=ph(i,w,e.serverCache);_==null&&e.serverCache.isCompleteForChild(w)&&(_=m.getImmediateChild(w)),_!=null?g=r.filter.updateChild(m,w,_,Fe(n),p,l):e.eventCache.getNode().hasChild(w)?g=r.filter.updateChild(m,w,he.EMPTY_NODE,Fe(n),p,l):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=gl(i,es(e)),u.isLeafNode()&&(g=r.filter.updateFullNode(g,u,l)))}return u=e.serverCache.isFullyInitialized()||vl(i,Pe())!=null,Zi(e,g,u,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new lh(i.getIndex()),l=DI(i);this.processor_=l1(l);const u=n.serverCache,p=n.eventCache,m=o.updateFullNode(he.EMPTY_NODE,u.getNode(),null),g=l.updateFullNode(he.EMPTY_NODE,p.getNode(),null),w=new Sr(m,u.isFullyInitialized(),o.filtersNodes()),_=new Sr(g,p.isFullyInitialized(),l.filtersNodes());this.viewCache_=Al(_,w),this.eventGenerator_=new zI(this.query_)}get query(){return this.query_}}function v1(r){return r.viewCache_.serverCache.getNode()}function _1(r){return ml(r.viewCache_)}function y1(r,e){const n=es(r.viewCache_);return n&&(r.query._queryParams.loadsAllData()||!xe(e)&&!n.getImmediateChild(ye(e)).isEmpty())?n.getChild(e):null}function Og(r){return r.eventRegistrations_.length===0}function w1(r,e){r.eventRegistrations_.push(e)}function Lg(r,e,n){const i=[];if(n){W(e==null,"A cancel should cancel all event registrations.");const o=r.query._path;r.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(n,o);u&&i.push(u)})}if(e){let o=[];for(let l=0;l<r.eventRegistrations_.length;++l){const u=r.eventRegistrations_[l];if(!u.matches(e))o.push(u);else if(e.hasAnyCallback()){o=o.concat(r.eventRegistrations_.slice(l+1));break}}r.eventRegistrations_=o}else r.eventRegistrations_=[];return i}function Mg(r,e,n,i){e.type===dn.MERGE&&e.source.queryId!==null&&(W(es(r.viewCache_),"We should always have a full cache before handling merges"),W(ml(r.viewCache_),"Missing event cache, even though we have a server cache"));const o=r.viewCache_,l=u1(r.processor_,o,e,n,i);return c1(r.processor_,l.viewCache),W(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=l.viewCache,W_(r,l.changes,l.viewCache.eventCache.getNode(),null)}function x1(r,e){const n=r.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tt,(l,u)=>{i.push(Bs(l,u))}),n.isFullyInitialized()&&i.push(j_(n.getNode())),W_(r,i,n.getNode(),e)}function W_(r,e,n,i){const o=i?[i]:r.eventRegistrations_;return BI(r.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl;class V_{constructor(){this.views=new Map}}function S1(r){W(!yl,"__referenceConstructor has already been defined"),yl=r}function C1(){return W(yl,"Reference.ts has not been loaded"),yl}function E1(r){return r.views.size===0}function gh(r,e,n,i){const o=e.source.queryId;if(o!==null){const l=r.views.get(o);return W(l!=null,"SyncTree gave us an op for an invalid query."),Mg(l,e,n,i)}else{let l=[];for(const u of r.views.values())l=l.concat(Mg(u,e,n,i));return l}}function H_(r,e,n,i,o){const l=e._queryIdentifier,u=r.views.get(l);if(!u){let p=gl(n,o?i:null),m=!1;p?m=!0:i instanceof he?(p=fh(n,i),m=!1):(p=he.EMPTY_NODE,m=!1);const g=Al(new Sr(p,m,!1),new Sr(i,o,!1));return new g1(e,g)}return u}function N1(r,e,n,i,o,l){const u=H_(r,e,i,o,l);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,u),w1(u,n),x1(u,n)}function I1(r,e,n,i){const o=e._queryIdentifier,l=[];let u=[];const p=Cr(r);if(o==="default")for(const[m,g]of r.views.entries())u=u.concat(Lg(g,n,i)),Og(g)&&(r.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=r.views.get(o);m&&(u=u.concat(Lg(m,n,i)),Og(m)&&(r.views.delete(o),m.query._queryParams.loadsAllData()||l.push(m.query)))}return p&&!Cr(r)&&l.push(new(C1())(e._repo,e._path)),{removed:l,events:u}}function q_(r){const e=[];for(const n of r.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function wr(r,e){let n=null;for(const i of r.views.values())n=n||y1(i,e);return n}function G_(r,e){if(e._queryParams.loadsAllData())return Dl(r);{const i=e._queryIdentifier;return r.views.get(i)}}function K_(r,e){return G_(r,e)!=null}function Cr(r){return Dl(r)!=null}function Dl(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl;function T1(r){W(!wl,"__referenceConstructor has already been defined"),wl=r}function k1(){return W(wl,"Reference.ts has not been loaded"),wl}let P1=1;class Fg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=s1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Q_(r,e,n,i,o){return qI(r.pendingWriteTree_,e,n,i,o),o?ti(r,new Zr(uh(),e,n)):[]}function R1(r,e,n,i){GI(r.pendingWriteTree_,e,n,i);const o=Me.fromObject(n);return ti(r,new Ws(uh(),e,o))}function fr(r,e,n=!1){const i=KI(r.pendingWriteTree_,e);if(QI(r.pendingWriteTree_,e)){let l=new Me(null);return i.snap!=null?l=l.set(Pe(),!0):yt(i.children,u=>{l=l.set(new De(u),!0)}),ti(r,new pl(i.path,l,n))}else return[]}function No(r,e,n){return ti(r,new Zr(dh(),e,n))}function b1(r,e,n){const i=Me.fromObject(n);return ti(r,new Ws(dh(),e,i))}function A1(r,e){return ti(r,new fo(dh(),e))}function j1(r,e,n){const i=_h(r,n);if(i){const o=yh(i),l=o.path,u=o.queryId,p=It(l,e),m=new fo(hh(u),p);return wh(r,l,m)}else return[]}function xl(r,e,n,i,o=!1){const l=e._path,u=r.syncPointTree_.get(l);let p=[];if(u&&(e._queryIdentifier==="default"||K_(u,e))){const m=I1(u,e,n,i);E1(u)&&(r.syncPointTree_=r.syncPointTree_.remove(l));const g=m.removed;if(p=m.events,!o){const w=g.findIndex(y=>y._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(l,(y,b)=>Cr(b));if(w&&!_){const y=r.syncPointTree_.subtree(l);if(!y.isEmpty()){const b=L1(y);for(let A=0;A<b.length;++A){const M=b[A],D=M.query,X=Z_(r,M);r.listenProvider_.startListening(to(D),po(r,D),X.hashFn,X.onComplete)}}}!_&&g.length>0&&!i&&(w?r.listenProvider_.stopListening(to(e),null):g.forEach(y=>{const b=r.queryToTagMap.get(Ol(y));r.listenProvider_.stopListening(to(y),b)}))}M1(r,g)}return p}function Y_(r,e,n,i){const o=_h(r,i);if(o!=null){const l=yh(o),u=l.path,p=l.queryId,m=It(u,e),g=new Zr(hh(p),m,n);return wh(r,u,g)}else return[]}function D1(r,e,n,i){const o=_h(r,i);if(o){const l=yh(o),u=l.path,p=l.queryId,m=It(u,e),g=Me.fromObject(n),w=new Ws(hh(p),m,g);return wh(r,u,w)}else return[]}function Td(r,e,n,i=!1){const o=e._path;let l=null,u=!1;r.syncPointTree_.foreachOnPath(o,(y,b)=>{const A=It(y,o);l=l||wr(b,A),u=u||Cr(b)});let p=r.syncPointTree_.get(o);p?(u=u||Cr(p),l=l||wr(p,Pe())):(p=new V_,r.syncPointTree_=r.syncPointTree_.set(o,p));let m;l!=null?m=!0:(m=!1,l=he.EMPTY_NODE,r.syncPointTree_.subtree(o).foreachChild((b,A)=>{const M=wr(A,Pe());M&&(l=l.updateImmediateChild(b,M))}));const g=K_(p,e);if(!g&&!e._queryParams.loadsAllData()){const y=Ol(e);W(!r.queryToTagMap.has(y),"View does not exist, but we have a tag");const b=F1();r.queryToTagMap.set(y,b),r.tagToQueryMap.set(b,y)}const w=jl(r.pendingWriteTree_,o);let _=N1(p,e,n,w,l,m);if(!g&&!u&&!i){const y=G_(p,e);_=_.concat(U1(r,e,y))}return _}function vh(r,e,n){const o=r.pendingWriteTree_,l=r.syncPointTree_.findOnPath(e,(u,p)=>{const m=It(u,e),g=wr(p,m);if(g)return g});return F_(o,e,l,n,!0)}function O1(r,e){const n=e._path;let i=null;r.syncPointTree_.foreachOnPath(n,(g,w)=>{const _=It(g,n);i=i||wr(w,_)});let o=r.syncPointTree_.get(n);o?i=i||wr(o,Pe()):(o=new V_,r.syncPointTree_=r.syncPointTree_.set(n,o));const l=i!=null,u=l?new Sr(i,!0,!1):null,p=jl(r.pendingWriteTree_,e._path),m=H_(o,e,p,l?u.getNode():he.EMPTY_NODE,l);return _1(m)}function ti(r,e){return J_(e,r.syncPointTree_,null,jl(r.pendingWriteTree_,Pe()))}function J_(r,e,n,i){if(xe(r.path))return X_(r,e,n,i);{const o=e.get(Pe());n==null&&o!=null&&(n=wr(o,Pe()));let l=[];const u=ye(r.path),p=r.operationForChild(u),m=e.children.get(u);if(m&&p){const g=n?n.getImmediateChild(u):null,w=U_(i,u);l=l.concat(J_(p,m,g,w))}return o&&(l=l.concat(gh(o,r,i,n))),l}}function X_(r,e,n,i){const o=e.get(Pe());n==null&&o!=null&&(n=wr(o,Pe()));let l=[];return e.children.inorderTraversal((u,p)=>{const m=n?n.getImmediateChild(u):null,g=U_(i,u),w=r.operationForChild(u);w&&(l=l.concat(X_(w,p,m,g)))}),o&&(l=l.concat(gh(o,r,i,n))),l}function Z_(r,e){const n=e.query,i=po(r,n);return{hashFn:()=>(v1(e)||he.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return i?j1(r,n._path,i):A1(r,n._path);{const l=AN(o,n);return xl(r,n,null,l)}}}}function po(r,e){const n=Ol(e);return r.queryToTagMap.get(n)}function Ol(r){return r._path.toString()+"$"+r._queryIdentifier}function _h(r,e){return r.tagToQueryMap.get(e)}function yh(r){const e=r.indexOf("$");return W(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new De(r.substr(0,e))}}function wh(r,e,n){const i=r.syncPointTree_.get(e);W(i,"Missing sync point for query tag that we're tracking");const o=jl(r.pendingWriteTree_,e);return gh(i,n,o,null)}function L1(r){return r.fold((e,n,i)=>{if(n&&Cr(n))return[Dl(n)];{let o=[];return n&&(o=q_(n)),yt(i,(l,u)=>{o=o.concat(u)}),o}})}function to(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(k1())(r._repo,r._path):r}function M1(r,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const o=Ol(i),l=r.queryToTagMap.get(o);r.queryToTagMap.delete(o),r.tagToQueryMap.delete(l)}}}function F1(){return P1++}function U1(r,e,n){const i=e._path,o=po(r,e),l=Z_(r,n),u=r.listenProvider_.startListening(to(e),o,l.hashFn,l.onComplete),p=r.syncPointTree_.subtree(i);if(o)W(!Cr(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((g,w,_)=>{if(!xe(g)&&w&&Cr(w))return[Dl(w).query];{let y=[];return w&&(y=y.concat(q_(w).map(b=>b.query))),yt(_,(b,A)=>{y=y.concat(A)}),y}});for(let g=0;g<m.length;++g){const w=m[g];r.listenProvider_.stopListening(to(w),po(r,w))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new xh(n)}node(){return this.node_}}class Sh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=et(this.path_,e);return new Sh(this.syncTree_,n)}node(){return vh(this.syncTree_,this.path_)}}const $1=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},Ug=function(r,e,n){if(!r||typeof r!="object")return r;if(W(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return z1(r[".sv"],e,n);if(typeof r[".sv"]=="object")return B1(r[".sv"],e);W(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},z1=function(r,e,n){switch(r){case"timestamp":return n.timestamp;default:W(!1,"Unexpected server value: "+r)}},B1=function(r,e,n){r.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const i=r.increment;typeof i!="number"&&W(!1,"Unexpected increment value: "+i);const o=e.node();if(W(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const u=o.getValue();return typeof u!="number"?i:u+i},ey=function(r,e,n,i){return Ch(e,new Sh(n,r),i)},ty=function(r,e,n){return Ch(r,new xh(e),n)};function Ch(r,e,n){const i=r.getPriority().val(),o=Ug(i,e.getImmediateChild(".priority"),n);let l;if(r.isLeafNode()){const u=r,p=Ug(u.getValue(),e,n);return p!==u.getValue()||o!==u.getPriority().val()?new pt(p,ct(o)):r}else{const u=r;return l=u,o!==u.getPriority().val()&&(l=l.updatePriority(new pt(o))),u.forEachChild(tt,(p,m)=>{const g=Ch(m,e.getImmediateChild(p),n);g!==m&&(l=l.updateImmediateChild(p,g))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Nh(r,e){let n=e instanceof De?e:new De(e),i=r,o=ye(n);for(;o!==null;){const l=Fs(i.node.children,o)||{children:{},childCount:0};i=new Eh(o,i,l),n=Fe(n),o=ye(n)}return i}function ni(r){return r.node.value}function ny(r,e){r.node.value=e,kd(r)}function ry(r){return r.node.childCount>0}function W1(r){return ni(r)===void 0&&!ry(r)}function Ll(r,e){yt(r.node.children,(n,i)=>{e(new Eh(n,r,i))})}function sy(r,e,n,i){n&&e(r),Ll(r,o=>{sy(o,e,!0)})}function V1(r,e,n){let i=r.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Io(r){return new De(r.parent===null?r.name:Io(r.parent)+"/"+r.name)}function kd(r){r.parent!==null&&H1(r.parent,r.name,r)}function H1(r,e,n){const i=W1(n),o=Sn(r.node.children,e);i&&o?(delete r.node.children[e],r.node.childCount--,kd(r)):!i&&!o&&(r.node.children[e]=n.node,r.node.childCount++,kd(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=/[\[\].#$\/\u0000-\u001F\u007F]/,G1=/[\[\].#$\u0000-\u001F\u007F]/,Zu=10*1024*1024,Ih=function(r){return typeof r=="string"&&r.length!==0&&!q1.test(r)},iy=function(r){return typeof r=="string"&&r.length!==0&&!G1.test(r)},K1=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),iy(r)},Q1=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!Zd(r)||r&&typeof r=="object"&&Sn(r,".sv")},oy=function(r,e,n,i){i&&e===void 0||Ml(Il(r,"value"),e,n)},Ml=function(r,e,n){const i=n instanceof De?new hI(n,r):n;if(e===void 0)throw new Error(r+"contains undefined "+qr(i));if(typeof e=="function")throw new Error(r+"contains a function "+qr(i)+" with contents = "+e.toString());if(Zd(e))throw new Error(r+"contains "+e.toString()+" "+qr(i));if(typeof e=="string"&&e.length>Zu/3&&Tl(e)>Zu)throw new Error(r+"contains a string greater than "+Zu+" utf8 bytes "+qr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(yt(e,(u,p)=>{if(u===".value")o=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!Ih(u)))throw new Error(r+" contains an invalid key ("+u+") "+qr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);fI(i,u),Ml(r,p,i),pI(i)}),o&&l)throw new Error(r+' contains ".value" child '+qr(i)+" in addition to actual children.")}},Y1=function(r,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const l=lo(i);for(let u=0;u<l.length;u++)if(!(l[u]===".priority"&&u===l.length-1)){if(!Ih(l[u]))throw new Error(r+"contains an invalid key ("+l[u]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(dI);let o=null;for(n=0;n<e.length;n++){if(i=e[n],o!==null&&Jt(o,i))throw new Error(r+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}},J1=function(r,e,n,i){const o=Il(r,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];yt(e,(u,p)=>{const m=new De(u);if(Ml(o,p,et(n,m)),sh(m)===".priority"&&!Q1(p))throw new Error(o+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),Y1(o,l)},ay=function(r,e,n,i){if(!iy(n))throw new Error(Il(r,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},X1=function(r,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ay(r,e,n)},Th=function(r,e){if(ye(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},Z1=function(r,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ih(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!K1(n))throw new Error(Il(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Fl(r,e){let n=null;for(let i=0;i<e.length;i++){const o=e[i],l=o.getPath();n!==null&&!ih(l,n.path)&&(r.eventLists_.push(n),n=null),n===null&&(n={events:[],path:l}),n.events.push(o)}n&&r.eventLists_.push(n)}function ly(r,e,n){Fl(r,n),cy(r,i=>ih(i,e))}function Xt(r,e,n){Fl(r,n),cy(r,i=>Jt(i,e)||Jt(e,i))}function cy(r,e){r.recursionDepth_++;let n=!0;for(let i=0;i<r.eventLists_.length;i++){const o=r.eventLists_[i];if(o){const l=o.path;e(l)?(tT(r.eventLists_[i]),r.eventLists_[i]=null):n=!1}}n&&(r.eventLists_=[]),r.recursionDepth_--}function tT(r){for(let e=0;e<r.events.length;e++){const n=r.events[e];if(n!==null){r.events[e]=null;const i=n.getEventRunner();Ji&&_t("event: "+n.toString()),ei(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="repo_interrupt",rT=25;class sT{constructor(e,n,i,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fl(),this.transactionQueueTree_=new Eh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function iT(r,e,n){if(r.stats_=nh(r.repoInfo_),r.forceRestClient_||LN())r.server_=new hl(r.repoInfo_,(i,o,l,u)=>{$g(r,i,o,l,u)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>zg(r,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}r.persistentConnection_=new Mn(r.repoInfo_,e,(i,o,l,u)=>{$g(r,i,o,l,u)},i=>{zg(r,i)},i=>{oT(r,i)},r.authTokenProvider_,r.appCheckProvider_,n),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(i=>{r.server_.refreshAuthToken(i)}),r.appCheckProvider_.addTokenChangeListener(i=>{r.server_.refreshAppCheckToken(i.token)}),r.statsReporter_=zN(r.repoInfo_,()=>new $I(r.stats_,r.server_)),r.infoData_=new OI,r.infoSyncTree_=new Fg({startListening:(i,o,l,u)=>{let p=[];const m=r.infoData_.getNode(i._path);return m.isEmpty()||(p=No(r.infoSyncTree_,i._path,m),setTimeout(()=>{u("ok")},0)),p},stopListening:()=>{}}),kh(r,"connected",!1),r.serverSyncTree_=new Fg({startListening:(i,o,l,u)=>(r.server_.listen(i,l,o,(p,m)=>{const g=u(p,m);Xt(r.eventQueue_,i._path,g)}),[]),stopListening:(i,o)=>{r.server_.unlisten(i,o)}})}function uy(r){const n=r.infoData_.getNode(new De(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ul(r){return $1({timestamp:uy(r)})}function $g(r,e,n,i,o){r.dataUpdateCount++;const l=new De(e);n=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,n):n;let u=[];if(o)if(i){const m=tl(n,g=>ct(g));u=D1(r.serverSyncTree_,l,m,o)}else{const m=ct(n);u=Y_(r.serverSyncTree_,l,m,o)}else if(i){const m=tl(n,g=>ct(g));u=b1(r.serverSyncTree_,l,m)}else{const m=ct(n);u=No(r.serverSyncTree_,l,m)}let p=l;u.length>0&&(p=Hs(r,l)),Xt(r.eventQueue_,p,u)}function zg(r,e){kh(r,"connected",e),e===!1&&uT(r)}function oT(r,e){yt(e,(n,i)=>{kh(r,n,i)})}function kh(r,e,n){const i=new De("/.info/"+e),o=ct(n);r.infoData_.updateSnapshot(i,o);const l=No(r.infoSyncTree_,i,o);Xt(r.eventQueue_,i,l)}function Ph(r){return r.nextWriteId_++}function aT(r,e,n){const i=O1(r.serverSyncTree_,e);return i!=null?Promise.resolve(i):r.server_.get(e).then(o=>{const l=ct(o).withIndex(e._queryParams.getIndex());Td(r.serverSyncTree_,e,n,!0);let u;if(e._queryParams.loadsAllData())u=No(r.serverSyncTree_,e._path,l);else{const p=po(r.serverSyncTree_,e);u=Y_(r.serverSyncTree_,e._path,l,p)}return Xt(r.eventQueue_,e._path,u),xl(r.serverSyncTree_,e,n,null,!0),l},o=>(To(r,"get for query "+ut(e)+" failed: "+o),Promise.reject(new Error(o))))}function lT(r,e,n,i,o){To(r,"set",{path:e.toString(),value:n,priority:i});const l=Ul(r),u=ct(n,i),p=vh(r.serverSyncTree_,e),m=ty(u,p,l),g=Ph(r),w=Q_(r.serverSyncTree_,e,m,g,!0);Fl(r.eventQueue_,w),r.server_.put(e.toString(),u.val(!0),(y,b)=>{const A=y==="ok";A||Tt("set at "+e+" failed: "+y);const M=fr(r.serverSyncTree_,g,!A);Xt(r.eventQueue_,e,M),Pd(r,o,y,b)});const _=bh(r,e);Hs(r,_),Xt(r.eventQueue_,_,[])}function cT(r,e,n,i){To(r,"update",{path:e.toString(),value:n});let o=!0;const l=Ul(r),u={};if(yt(n,(p,m)=>{o=!1,u[p]=ey(et(e,p),ct(m),r.serverSyncTree_,l)}),o)_t("update() called with empty data.  Don't do anything."),Pd(r,i,"ok",void 0);else{const p=Ph(r),m=R1(r.serverSyncTree_,e,u,p);Fl(r.eventQueue_,m),r.server_.merge(e.toString(),n,(g,w)=>{const _=g==="ok";_||Tt("update at "+e+" failed: "+g);const y=fr(r.serverSyncTree_,p,!_),b=y.length>0?Hs(r,e):e;Xt(r.eventQueue_,b,y),Pd(r,i,g,w)}),yt(n,g=>{const w=bh(r,et(e,g));Hs(r,w)}),Xt(r.eventQueue_,e,[])}}function uT(r){To(r,"onDisconnectEvents");const e=Ul(r),n=fl();xd(r.onDisconnect_,Pe(),(o,l)=>{const u=ey(o,l,r.serverSyncTree_,e);D_(n,o,u)});let i=[];xd(n,Pe(),(o,l)=>{i=i.concat(No(r.serverSyncTree_,o,l));const u=bh(r,o);Hs(r,u)}),r.onDisconnect_=fl(),Xt(r.eventQueue_,Pe(),i)}function dT(r,e,n){let i;ye(e._path)===".info"?i=Td(r.infoSyncTree_,e,n):i=Td(r.serverSyncTree_,e,n),ly(r.eventQueue_,e._path,i)}function hT(r,e,n){let i;ye(e._path)===".info"?i=xl(r.infoSyncTree_,e,n):i=xl(r.serverSyncTree_,e,n),ly(r.eventQueue_,e._path,i)}function fT(r){r.persistentConnection_&&r.persistentConnection_.interrupt(nT)}function To(r,...e){let n="";r.persistentConnection_&&(n=r.persistentConnection_.id+":"),_t(n,...e)}function Pd(r,e,n,i){e&&ei(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let l=o;i&&(l+=": "+i);const u=new Error(l);u.code=o,e(u)}})}function dy(r,e,n){return vh(r.serverSyncTree_,e,n)||he.EMPTY_NODE}function Rh(r,e=r.transactionQueueTree_){if(e||$l(r,e),ni(e)){const n=fy(r,e);W(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&pT(r,Io(e),n)}else ry(e)&&Ll(e,n=>{Rh(r,n)})}function pT(r,e,n){const i=n.map(g=>g.currentWriteId),o=dy(r,e,i);let l=o;const u=o.hash();for(let g=0;g<n.length;g++){const w=n[g];W(w.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const _=It(e,w.path);l=l.updateChild(_,w.currentOutputSnapshotRaw)}const p=l.val(!0),m=e;r.server_.put(m.toString(),p,g=>{To(r,"transaction put response",{path:m.toString(),status:g});let w=[];if(g==="ok"){const _=[];for(let y=0;y<n.length;y++)n[y].status=2,w=w.concat(fr(r.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&_.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();$l(r,Nh(r.transactionQueueTree_,e)),Rh(r,r.transactionQueueTree_),Xt(r.eventQueue_,e,w);for(let y=0;y<_.length;y++)ei(_[y])}else{if(g==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{Tt("transaction at "+m.toString()+" failed: "+g);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=g}Hs(r,e)}},u)}function Hs(r,e){const n=hy(r,e),i=Io(n),o=fy(r,n);return mT(r,o,i),i}function mT(r,e,n){if(e.length===0)return;const i=[];let o=[];const u=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const m=e[p],g=It(n,m.path);let w=!1,_;if(W(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)w=!0,_=m.abortReason,o=o.concat(fr(r.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=rT)w=!0,_="maxretry",o=o.concat(fr(r.serverSyncTree_,m.currentWriteId,!0));else{const y=dy(r,m.path,u);m.currentInputSnapshot=y;const b=e[p].update(y.val());if(b!==void 0){Ml("transaction failed: Data returned ",b,m.path);let A=ct(b);typeof b=="object"&&b!=null&&Sn(b,".priority")||(A=A.updatePriority(y.getPriority()));const D=m.currentWriteId,X=Ul(r),j=ty(A,y,X);m.currentOutputSnapshotRaw=A,m.currentOutputSnapshotResolved=j,m.currentWriteId=Ph(r),u.splice(u.indexOf(D),1),o=o.concat(Q_(r.serverSyncTree_,m.path,j,m.currentWriteId,m.applyLocally)),o=o.concat(fr(r.serverSyncTree_,D,!0))}else w=!0,_="nodata",o=o.concat(fr(r.serverSyncTree_,m.currentWriteId,!0))}Xt(r.eventQueue_,n,o),o=[],w&&(e[p].status=2,(function(y){setTimeout(y,Math.floor(0))})(e[p].unwatcher),e[p].onComplete&&(_==="nodata"?i.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):i.push(()=>e[p].onComplete(new Error(_),!1,null))))}$l(r,r.transactionQueueTree_);for(let p=0;p<i.length;p++)ei(i[p]);Rh(r,r.transactionQueueTree_)}function hy(r,e){let n,i=r.transactionQueueTree_;for(n=ye(e);n!==null&&ni(i)===void 0;)i=Nh(i,n),e=Fe(e),n=ye(e);return i}function fy(r,e){const n=[];return py(r,e,n),n.sort((i,o)=>i.order-o.order),n}function py(r,e,n){const i=ni(e);if(i)for(let o=0;o<i.length;o++)n.push(i[o]);Ll(e,o=>{py(r,o,n)})}function $l(r,e){const n=ni(e);if(n){let i=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[i]=n[o],i++);n.length=i,ny(e,n.length>0?n:void 0)}Ll(e,i=>{$l(r,i)})}function bh(r,e){const n=Io(hy(r,e)),i=Nh(r.transactionQueueTree_,e);return V1(i,o=>{ed(r,o)}),ed(r,i),sy(i,o=>{ed(r,o)}),n}function ed(r,e){const n=ni(e);if(n){const i=[];let o=[],l=-1;for(let u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?(W(l===u-1,"All SENT items should be at beginning of queue."),l=u,n[u].status=3,n[u].abortReason="set"):(W(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),o=o.concat(fr(r.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&i.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?ny(e,void 0):n.length=l+1,Xt(r.eventQueue_,Io(e),o);for(let u=0;u<i.length;u++)ei(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r){let e="";const n=r.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let o=n[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function vT(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const n of r.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Tt(`Invalid query segment '${n}' in query '${r}'`)}return e}const Bg=function(r,e){const n=_T(r),i=n.namespace;n.domain==="firebase.com"&&$n(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&$n("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||TN();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new v_(n.host,n.secure,i,o,e,"",i!==n.subdomain),path:new De(n.pathString)}},_T=function(r){let e="",n="",i="",o="",l="",u=!0,p="https",m=443;if(typeof r=="string"){let g=r.indexOf("//");g>=0&&(p=r.substring(0,g-1),r=r.substring(g+2));let w=r.indexOf("/");w===-1&&(w=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),e=r.substring(0,Math.min(w,_)),w<_&&(o=gT(r.substring(w,_)));const y=vT(r.substring(Math.min(r.length,_)));g=e.indexOf(":"),g>=0?(u=p==="https"||p==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const b=e.slice(0,g);if(b.toLowerCase()==="localhost")n="localhost";else if(b.split(".").length<=2)n=b;else{const A=e.indexOf(".");i=e.substring(0,A).toLowerCase(),n=e.substring(A+1),l=i}"ns"in y&&(l=y.ns)}return{host:e,port:m,domain:n,subdomain:i,secure:u,scheme:p,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yT=(function(){let r=0;const e=[];return function(n){const i=n===r;r=n;let o;const l=new Array(8);for(o=7;o>=0;o--)l[o]=Wg.charAt(n%64),n=Math.floor(n/64);W(n===0,"Cannot push at time == 0");let u=l.join("");if(i){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)u+=Wg.charAt(e[o]);return W(u.length===20,"nextPushId: Length should be 20."),u}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,i,o){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ut(this.snapshot.exportVal())}}class xT{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return W(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,i,o){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=o}get key(){return xe(this._path)?null:sh(this._path)}get ref(){return new Bn(this._repo,this._path)}get _queryIdentifier(){const e=kg(this._queryParams),n=eh(e);return n==="{}"?"default":n}get _queryObject(){return kg(this._queryParams)}isEqual(e){if(e=Pt(e),!(e instanceof Ah))return!1;const n=this._repo===e._repo,i=ih(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&i&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+uI(this._path)}}class Bn extends Ah{constructor(e,n){super(e,n,new ch,!1)}get parent(){const e=I_(this._path);return e===null?null:new Bn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class mo{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new De(e),i=go(this.ref,e);return new mo(this._node.getChild(n),i,tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,o)=>e(new mo(o,go(this.ref,i),tt)))}hasChild(e){const n=new De(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ge(r,e){return r=Pt(r),r._checkNotDeleted("ref"),e!==void 0?go(r._root,e):r._root}function go(r,e){return r=Pt(r),ye(r._path)===null?X1("child","path",e):ay("child","path",e),new Bn(r._repo,et(r._path,e))}function zl(r,e){r=Pt(r),Th("push",r._path),oy("push",e,r._path,!0);const n=uy(r._repo),i=yT(n),o=go(r,i),l=go(r,i);let u;return u=Promise.resolve(l),o.then=u.then.bind(u),o.catch=u.then.bind(u,void 0),o}function Sl(r){return Th("remove",r._path),ST(r,null)}function ST(r,e){r=Pt(r),Th("set",r._path),oy("set",e,r._path,!1);const n=new vo;return lT(r._repo,r._path,e,null,n.wrapCallback(()=>{})),n.promise}function it(r,e){J1("update",e,r._path);const n=new vo;return cT(r._repo,r._path,e,n.wrapCallback(()=>{})),n.promise}function Cn(r){r=Pt(r);const e=new my(()=>{}),n=new Bl(e);return aT(r._repo,r,n).then(i=>new mo(i,new Bn(r._repo,r._path),r._queryParams.getIndex()))}class Bl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new wT("value",this,new mo(e.snapshotNode,new Bn(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new xT(this,e,n):null}matches(e){return e instanceof Bl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function CT(r,e,n,i,o){const l=new my(n,void 0),u=new Bl(l);return dT(r._repo,r,u),()=>hT(r._repo,r,u)}function Er(r,e,n,i){return CT(r,"value",e)}S1(Bn);T1(Bn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="FIREBASE_DATABASE_EMULATOR_HOST",Rd={};let NT=!1;function IT(r,e,n,i){const o=e.lastIndexOf(":"),l=e.substring(0,o),u=Qs(l);r.repoInfo_=new v_(e,u,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(r.authTokenProvider_=i)}function TT(r,e,n,i,o){let l=i||r.options.databaseURL;l===void 0&&(r.options.projectId||$n("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",r.options.projectId),l=`${r.options.projectId}-default-rtdb.firebaseio.com`);let u=Bg(l,o),p=u.repoInfo,m;typeof process<"u"&&ug&&(m=ug[ET]),m?(l=`http://${m}?ns=${p.namespace}`,u=Bg(l,o),p=u.repoInfo):u.repoInfo.secure;const g=new FN(r.name,r.options,e);Z1("Invalid Firebase Database URL",u),xe(u.path)||$n("Database URL must point to the root of a Firebase Database (not including a child path).");const w=PT(p,r,g,new MN(r,n));return new RT(w,r)}function kT(r,e){const n=Rd[e];(!n||n[r.key]!==r)&&$n(`Database ${e}(${r.repoInfo_}) has already been deleted.`),fT(r),delete n[r.key]}function PT(r,e,n,i){let o=Rd[e.name];o||(o={},Rd[e.name]=o);let l=o[r.toURLString()];return l&&$n("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new sT(r,NT,n,i),o[r.toURLString()]=l,l}class RT{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(iT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bn(this._repo,Pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(kT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$n("Cannot call "+e+" on a deleted database.")}}function bT(r=xv(),e){const n=zd(r,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=Hx("database");i&&AT(n,...i)}return n}function AT(r,e,n,i={}){r=Pt(r),r._checkNotDeleted("useEmulator");const o=`${e}:${n}`,l=r._repoInternal;if(r._instanceStarted){if(o===r._repoInternal.repoInfo_.host&&Qr(i,l.repoInfo_.emulatorOptions))return;$n("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&$n('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Qa(Qa.OWNER);else if(i.mockUserToken){const p=typeof i.mockUserToken=="string"?i.mockUserToken:qx(i.mockUserToken,r.app.options.projectId);u=new Qa(p)}Qs(e)&&(pv(e),mv("Database",!0)),IT(l,o,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(r){xN(Js),Us(new Yr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return TT(i,o,l,n)},"PUBLIC").setMultipleInstances(!0)),vr(dg,hg,r),vr(dg,hg,"esm2017")}Mn.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Mn.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};jT();const DT={apiKey:"AIzaSyCrFLv4OkNYI86ll6U0Xjo5OegDaUzqFMA",authDomain:"stockduloft.firebaseapp.com",databaseURL:"https://stockduloft-default-rtdb.firebaseio.com",projectId:"stockduloft",storageBucket:"stockduloft.firebasestorage.app",messagingSenderId:"375022059708",appId:"1:375022059708:web:f059d080070233a5b590b9",measurementId:"G-C7CW1SSW2Z"},gy=wv(DT),ve=bT(gy),Rs=vN(gy),td=new jn,vy=k.createContext(null),OT=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);function LT({children:r}){const[e,n]=k.useState(null),[i,o]=k.useState(!0);k.useEffect(()=>(jE(Rs).catch(m=>{console.error("Redirect auth error:",m)}),iE(Rs,m=>{n(m),o(!1)})),[]);const l=async()=>{try{OT?await ng(Rs,td):await IE(Rs,td)}catch(p){if(console.error("Erreur de connexion:",p),p.code==="auth/popup-blocked"||p.code==="auth/popup-closed-by-user")await ng(Rs,td);else throw p}},u=async()=>{try{await oE(Rs)}catch(p){console.error("Erreur de deconnexion:",p)}};return i?h.jsxs("div",{className:"loading-screen",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Chargement..."})]}):h.jsx(vy.Provider,{value:{user:e,login:l,logout:u},children:r})}function Wl(){const r=k.useContext(vy);if(!r)throw new Error("useAuth doit etre utilise dans un AuthProvider");return r}const nd=600,rd=600,MT=.6,Wa=80,FT=.4;function _y(r){return new Promise((e,n)=>{const i=new FileReader;i.onload=o=>{const l=new Image;l.onload=()=>{const u=document.createElement("canvas");let{width:p,height:m}=l;p>m?p>nd&&(m=Math.round(m*nd/p),p=nd):m>rd&&(p=Math.round(p*rd/m),m=rd),u.width=p,u.height=m,u.getContext("2d").drawImage(l,0,0,p,m);const w=u.toDataURL("image/jpeg",MT);e(w)},l.onerror=()=>n(new Error("Impossible de charger l'image")),l.src=o.target.result},i.onerror=()=>n(new Error("Impossible de lire le fichier")),i.readAsDataURL(r)})}function UT(r){return new Promise((e,n)=>{const i=new FileReader;i.onload=o=>{const l=new Image;l.onload=()=>{const u=document.createElement("canvas");u.width=Wa,u.height=Wa;const p=u.getContext("2d"),m=Math.min(l.width,l.height),g=(l.width-m)/2,w=(l.height-m)/2;p.drawImage(l,g,w,m,m,0,0,Wa,Wa);const _=u.toDataURL("image/jpeg",FT);e(_)},l.onerror=()=>n(new Error("Impossible de charger l'image")),l.src=o.target.result},i.onerror=()=>n(new Error("Impossible de lire le fichier")),i.readAsDataURL(r)})}const pn="stockduloft/items",ri="stockduloft/photos",ko="stockduloft/stores",Vl=4;async function $T(r){const e=ge(ve,`${ri}/${r}`),n=await Cn(e);return n.exists()&&n.val().photoBase64||null}async function sd(r){const e=ge(ve,`${ri}/${r}`),n=await Cn(e);if(!n.exists())return[];const i=n.val(),o=[];i.photoBase64&&o.push(i.photoBase64);for(let l=1;l<=Vl;l++)i[`photo_${l}`]&&o.push(i[`photo_${l}`]);return o}async function zT(r,e){const n=ge(ve,`${ri}/${r}`),i=await Cn(n),o=i.exists()?i.val():{};let l=null;for(let g=1;g<=Vl;g++)if(!o[`photo_${g}`]){l=g;break}if(l===null)return null;const u=await _y(e);await it(n,{[`photo_${l}`]:u});const p=yy(o)+1,m=ge(ve,`${pn}/${r}`);return await it(m,{photoCount:p,updatedAt:Date.now()}),l}async function BT(r,e){if(e<1||e>Vl)return;const n=ge(ve,`${ri}/${r}`);await it(n,{[`photo_${e}`]:null});const i=await Cn(n),o=i.exists()?i.val():{},l=yy(o),u=ge(ve,`${pn}/${r}`);await it(u,{photoCount:l,updatedAt:Date.now()})}function yy(r){let e=0;r.photoBase64&&e++;for(let n=1;n<=Vl;n++)r[`photo_${n}`]&&e++;return e}function wy(r){const e=ge(ve,ko);return Er(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(l.name||"").localeCompare(u.name||"")),r(o)})}async function xy(r){const e=ge(ve,`${ko}/${r}`),n=await Cn(e);return n.exists()?{id:r,...n.val()}:null}async function WT({name:r,commissionPercent:e,locationFee:n}){const i={name:r.trim(),commissionPercent:parseFloat(e)||0,locationFee:parseFloat(n)||0,active:!0,createdAt:Date.now()},o=ge(ve,ko),l=zl(o);return await it(l,i),{id:l.key,...i}}async function VT(r,e){const n=ge(ve,`${ko}/${r}`);await it(n,e)}async function HT(r){const e=ge(ve,`${ko}/${r}`);await Sl(e)}async function qT({uniqueId:r,description:e,longDescription:n,price:i,photoFile:o,category:l,itemDate:u}){const p={uniqueId:r.toUpperCase().trim(),description:e.trim(),longDescription:(n==null?void 0:n.trim())||"",price:parseFloat(i),hasPhoto:!1,photoCount:0,category:l||"",status:"inventory",itemDate:u||new Date().toISOString().split("T")[0],consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,sellerName:"",createdAt:Date.now(),updatedAt:Date.now()},m=ge(ve,pn),g=zl(m);if(await it(g,p),o){const[w,_]=await Promise.all([_y(o),UT(o)]),y=ge(ve,`${ri}/${g.key}`);await it(y,{photoBase64:w}),await it(g,{hasPhoto:!0,thumbnail:_,photoCount:1}),p.hasPhoto=!0,p.thumbnail=_,p.photoCount=1}return{id:g.key,...p}}async function GT(r,e){const n=ge(ve,`${pn}/${r}`);await it(n,{...e,updatedAt:Date.now()})}async function KT(r){const e=ge(ve,`${pn}/${r}`),n=ge(ve,`${ri}/${r}`);await Sl(n),await Sl(e)}async function Sy(r){const e=ge(ve,pn),n=await Cn(e);if(!n.exists())return null;const i=r.toUpperCase().trim();let o=null;return n.forEach(l=>{const u=l.val();u.uniqueId===i&&(o={id:l.key,...u})}),o&&o.hasPhoto&&(o.photoBase64=await $T(o.id)),o}async function Vg(r="ADL"){const e=ge(ve,pn),n=await Cn(e);let i=0;n.exists()&&n.forEach(l=>{const m=(l.val().uniqueId||"").match(new RegExp(`^${r}-(\\d+)$`,"i"));if(m){const g=parseInt(m[1],10);g>i&&(i=g)}});const o=i+1;return`${r}-${String(o).padStart(3,"0")}`}async function QT(r,e,n=null,i=null,o="",l=!1,u="",p=null){const m=ge(ve,`${pn}/${r}`),g=await Cn(m),w=g.exists()?g.val():{},_=l?0:i!==null?parseFloat(i):w.price,y={status:"sold",sellerName:e.trim(),saleDate:n||new Date().toISOString().split("T")[0],salePrice:_,marketName:o.trim(),isGift:l,giftNote:l?u.trim():"",updatedAt:Date.now()};if(p&&!l?(y.taxEnabled=!0,y.tpsRate=p.tpsRate,y.tvqRate=p.tvqRate,y.tpsAmount=p.tpsAmount,y.tvqAmount=p.tvqAmount,y.totalWithTax=p.totalWithTax):(y.taxEnabled=!1,y.tpsRate=null,y.tvqRate=null,y.tpsAmount=null,y.tvqAmount=null,y.totalWithTax=null),w.status==="consignment"&&w.consignmentStoreId&&!l){const b=await xy(w.consignmentStoreId);if(b&&b.commissionPercent>0){const A=Math.round(_*b.commissionPercent)/100;y.commissionPercent=b.commissionPercent,y.commissionAmount=A,y.netRevenue=Math.round((_-A)*100)/100}else y.commissionPercent=0,y.commissionAmount=0,y.netRevenue=_}return await it(m,y),y}async function YT(r,e,n=null,i=""){const o=ge(ve,`${pn}/${r}`);await it(o,{status:"consignment",consignmentStore:e.trim(),consignmentStoreId:i,consignmentDate:n||new Date().toISOString().split("T")[0],updatedAt:Date.now()})}async function JT(r){const e=ge(ve,`${pn}/${r}`);await it(e,{status:"inventory",consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,salePrice:null,marketName:"",sellerName:"",isGift:!1,giftNote:"",commissionPercent:null,commissionAmount:null,netRevenue:null,taxEnabled:null,tpsRate:null,tvqRate:null,tpsAmount:null,tvqAmount:null,totalWithTax:null,updatedAt:Date.now()})}function Cy(r){const e=ge(ve,pn);return Er(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(u.createdAt||0)-(l.createdAt||0)),r(o)})}const Hg={all:"Tous",inventory:"En stock",consignment:"En consigne",sold:"Vendus"},XT={inventory:"#2ecc71",consignment:"#f39c12",sold:"#e74c3c"};function Wr(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function ZT(){const[r,e]=k.useState([]),[n,i]=k.useState([]),[o,l]=k.useState("all"),[u,p]=k.useState(""),[m,g]=k.useState(null),[w,_]=k.useState(!0),[y,b]=k.useState({}),[A,M]=k.useState({}),[D,X]=k.useState(null),[j,G]=k.useState({description:"",longDescription:"",price:"",category:""}),[V,Q]=k.useState(!1),[ne,Z]=k.useState(null),[me,Ee]=k.useState(""),[Ie,be]=k.useState(""),We=k.useRef(null);k.useEffect(()=>Cy(K=>{e(K),_(!1)}),[]),k.useEffect(()=>wy(i),[]);const Ue=async S=>{if(m===S.id){g(null);return}if(g(S.id),M(K=>({...K,[S.id]:0})),!y[S.id]&&(S.hasPhoto||S.photoBase64)){const K=await sd(S.id);K.length===0&&S.photoBase64?b(ee=>({...ee,[S.id]:[S.photoBase64]})):b(ee=>({...ee,[S.id]:K}))}},$e=async(S,K)=>{var ie;const ee=(ie=K.target.files)==null?void 0:ie[0];if(ee){Q(!0);try{if(await zT(S.id,ee)===null)alert("Maximum de 5 photos atteint pour cet article.");else{const Oe=await sd(S.id);b(Wt=>({...Wt,[S.id]:Oe}))}}catch(le){console.error("Erreur ajout photo:",le),alert("Erreur lors de l'ajout de la photo.")}finally{Q(!1),We.current&&(We.current.value="")}}},Ye=async(S,K)=>{if(K===0){alert("La photo principale ne peut pas tre supprime ici.");return}if(confirm("Supprimer cette photo?"))try{await BT(S.id,K);const ee=await sd(S.id);b(ie=>({...ie,[S.id]:ee})),M(ie=>({...ie,[S.id]:0}))}catch(ee){console.error("Erreur suppression photo:",ee)}},Je=r.filter(S=>{var ie,le;const K=o==="all"||S.status===o,ee=u===""||((ie=S.uniqueId)==null?void 0:ie.toLowerCase().includes(u.toLowerCase()))||((le=S.description)==null?void 0:le.toLowerCase().includes(u.toLowerCase()));return K&&ee}),Ce={all:r.length,inventory:r.filter(S=>S.status==="inventory").length,consignment:r.filter(S=>S.status==="consignment").length,sold:r.filter(S=>S.status==="sold").length},H=S=>{var K;X(S.id),G({description:S.description||"",longDescription:S.longDescription||"",price:((K=S.price)==null?void 0:K.toString())||"",category:S.category||""})},ae=async S=>{await GT(S.id,{description:j.description.trim(),longDescription:j.longDescription.trim(),price:parseFloat(j.price)||0,category:j.category.trim()}),X(null)},q=()=>{X(null)},I=async S=>{confirm(`Remettre "${S.uniqueId}" en inventaire?`)&&(await JT(S.id),g(null))},L=async S=>{confirm(`Supprimer dfinitivement "${S.uniqueId}"?`)&&(await KT(S.id),g(null),b(K=>{const ee={...K};return delete ee[S.id],ee}))},ce=S=>{Z(S.id),Ee(""),be("")},N=async S=>{let K=Ie.trim(),ee=me;if(me&&me!=="other"){const ie=n.find(le=>le.id===me);ie&&(K=ie.name)}if(!K){alert("Entrez le nom du magasin");return}await YT(S.id,K,null,ee==="other"?"":ee),Z(null),g(null)},$=()=>{Z(null)};return w?h.jsxs("div",{className:"page-loading",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Chargement de l'inventaire..."})]}):h.jsxs("div",{className:"page inventory-page",children:[h.jsxs("div",{className:"search-bar",children:[h.jsx("input",{type:"text",placeholder:" Rechercher par # ou description...",value:u,onChange:S=>p(S.target.value),className:"search-input"}),u&&h.jsx("button",{className:"search-clear",onClick:()=>p(""),children:""})]}),h.jsx("div",{className:"status-filters",children:Object.entries(Hg).map(([S,K])=>h.jsxs("button",{className:`filter-btn ${o===S?"active":""}`,onClick:()=>l(S),children:[K,h.jsx("span",{className:"filter-count",children:Ce[S]})]},S))}),Je.length===0?h.jsxs("div",{className:"empty-state",children:[h.jsx("p",{className:"empty-icon",children:""}),h.jsx("p",{children:u?"Aucun rsultat trouv":"Aucun item dans cette catgorie"})]}):h.jsx("div",{className:"items-list",children:Je.map(S=>{var K,ee,ie;return h.jsxs("div",{className:`item-card ${m===S.id?"expanded":""}`,onClick:()=>Ue(S),children:[h.jsxs("div",{className:"item-row",children:[h.jsxs("div",{className:"item-photo",children:[S.thumbnail?h.jsx("img",{src:S.thumbnail,alt:S.description,className:"item-thumbnail"}):S.hasPhoto||S.photoBase64?h.jsx("div",{className:"photo-placeholder",children:""}):h.jsx("div",{className:"photo-placeholder",children:""}),S.photoCount>1&&h.jsx("span",{className:"photo-count-badge",children:S.photoCount})]}),h.jsxs("div",{className:"item-info",children:[h.jsxs("div",{className:"item-id-row",children:[h.jsxs("span",{className:"item-unique-id",children:["#",S.uniqueId]}),h.jsx("span",{className:"item-status-badge",style:{backgroundColor:XT[S.status]},children:Hg[S.status]})]}),h.jsx("p",{className:"item-description",children:S.description}),h.jsxs("div",{className:"item-meta",children:[h.jsxs("span",{className:"item-price",children:[Wr(S.price)," $"]}),S.itemDate&&h.jsxs("span",{className:"item-date",children:[" ",S.itemDate]}),S.status==="consignment"&&h.jsxs("span",{className:"item-consignment",children:[" ",S.consignmentStore," ",S.consignmentDate&&`(${S.consignmentDate})`]}),S.status==="sold"&&h.jsxs("span",{className:"item-sold-info",children:[S.isGift?h.jsxs(h.Fragment,{children:[" Cadeau",S.giftNote?`  ${S.giftNote}`:"","  "]}):S.salePrice&&S.salePrice!==S.price?h.jsxs(h.Fragment,{children:[h.jsxs("s",{children:[Wr(S.price)," $"]}),"  ",Wr(S.salePrice)," $  "]}):"",S.saleDate,"  ",S.sellerName,S.marketName?`   ${S.marketName}`:"",S.commissionAmount>0&&h.jsxs(h.Fragment,{children:["   Net: ",Wr(S.netRevenue)," $"]})]})]})]})]}),m===S.id&&h.jsxs("div",{onClick:le=>le.stopPropagation(),children:[y[S.id]&&y[S.id].length>0&&h.jsxs("div",{className:"photo-gallery",children:[h.jsx("div",{className:"gallery-main",children:h.jsx("img",{src:y[S.id][A[S.id]||0],alt:S.description})}),y[S.id].length>1&&h.jsx("div",{className:"gallery-thumbs",children:y[S.id].map((le,Oe)=>h.jsxs("div",{className:`gallery-thumb ${(A[S.id]||0)===Oe?"active":""}`,onClick:()=>M(Wt=>({...Wt,[S.id]:Oe})),children:[h.jsx("img",{src:le,alt:`Photo ${Oe+1}`}),Oe>0&&D===S.id&&h.jsx("button",{className:"gallery-thumb-delete",onClick:Wt=>{Wt.stopPropagation(),Ye(S,Oe)},children:""})]},Oe))})]}),S.hasPhoto&&!y[S.id]&&h.jsx("div",{className:"item-expanded-photo loading",children:h.jsx("div",{className:"loading-spinner"})}),S.longDescription&&D!==S.id&&h.jsx("div",{className:"item-long-description",children:h.jsx("p",{children:S.longDescription})}),S.status==="sold"&&S.commissionAmount>0&&h.jsxs("div",{className:"item-commission-info",children:[h.jsxs("div",{className:"commission-row",children:[h.jsx("span",{children:"Prix de vente"}),h.jsxs("span",{children:[Wr(S.salePrice)," $"]})]}),h.jsxs("div",{className:"commission-row commission-negative",children:[h.jsxs("span",{children:["Commission ",S.consignmentStore," (",S.commissionPercent,"%)"]}),h.jsxs("span",{children:["-",Wr(S.commissionAmount)," $"]})]}),h.jsxs("div",{className:"commission-row commission-total",children:[h.jsx("span",{children:"Revenu net"}),h.jsxs("span",{children:[Wr(S.netRevenue)," $"]})]})]}),h.jsx("div",{className:"item-actions",children:ne===S.id?h.jsxs("div",{className:"item-edit-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Magasin de consigne"}),n.length>0?h.jsxs("select",{value:me,onChange:le=>{if(Ee(le.target.value),le.target.value!=="other"){const Oe=n.find(Wt=>Wt.id===le.target.value);Oe&&be(Oe.name)}},className:"form-input",children:[h.jsx("option",{value:"",children:" Choisir un magasin "}),n.map(le=>h.jsxs("option",{value:le.id,children:[le.name,le.commissionPercent>0?` (${le.commissionPercent}%)`:"",le.locationFee>0?` + ${le.locationFee}$/mois`:""]},le.id)),h.jsx("option",{value:"other",children:" Autre magasin..."})]}):h.jsx("input",{type:"text",value:Ie,onChange:le=>be(le.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),me==="other"&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom du magasin"}),h.jsx("input",{type:"text",value:Ie,onChange:le=>be(le.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),h.jsxs("div",{className:"item-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>N(S),disabled:!me&&!Ie.trim(),children:" Confirmer consigne"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:$,children:"Annuler"})]})]}):D===S.id?h.jsxs("div",{className:"item-edit-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Titre"}),h.jsx("input",{type:"text",value:j.description,onChange:le=>G(Oe=>({...Oe,description:le.target.value})),className:"form-input"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Description dtaille"}),h.jsx("textarea",{value:j.longDescription,onChange:le=>G(Oe=>({...Oe,longDescription:le.target.value})),className:"form-input form-textarea",rows:"4",placeholder:"Dcrivez l'article en dtail..."})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Prix ($)"}),h.jsx("input",{type:"number",value:j.price,onChange:le=>G(Oe=>({...Oe,price:le.target.value})),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Catgorie"}),h.jsx("input",{type:"text",value:j.category,onChange:le=>G(Oe=>({...Oe,category:le.target.value})),className:"form-input"})]}),h.jsxs("div",{className:"form-group",children:[h.jsxs("label",{className:"form-label",children:[" Photos (",((K=y[S.id])==null?void 0:K.length)||(S.hasPhoto?1:0),"/5)"]}),(((ee=y[S.id])==null?void 0:ee.length)||0)<5&&h.jsxs(h.Fragment,{children:[h.jsx("input",{ref:We,type:"file",accept:"image/*",capture:"environment",onChange:le=>$e(S,le),className:"hidden-input"}),h.jsx("button",{type:"button",className:"btn btn-small btn-add-photo",onClick:()=>{var le;return(le=We.current)==null?void 0:le.click()},disabled:V,children:V?" Ajout en cours...":" Ajouter une photo"})]}),(((ie=y[S.id])==null?void 0:ie.length)||0)>=5&&h.jsx("p",{className:"form-hint",children:"Maximum de 5 photos atteint"})]}),h.jsxs("div",{className:"item-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:()=>ae(S),children:" Sauvegarder"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:q,children:"Annuler"})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>H(S),children:" Modifier"}),S.status==="inventory"&&h.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>ce(S),children:" Consigne"}),(S.status==="consignment"||S.status==="sold")&&h.jsx("button",{className:"btn btn-small btn-return",onClick:()=>I(S),children:" Retour inventaire"}),h.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>L(S),children:" Supprimer"})]})})]})]},S.id)})})]})}const ek="https://us-central1-stockduloft.cloudfunctions.net/analyzePhoto";async function tk(r,e=[],n=""){try{const i=await fetch(ek,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:r,categories:e,userHint:n})});if(!i.ok)throw new Error(`Erreur serveur: ${i.status}`);const o=await i.json();if(o.success)return{category:o.category,title:o.title,description:o.description};throw new Error(o.error||"Erreur inconnue")}catch(i){throw console.error("Erreur AI:",i),i}}function nk({imageBase64:r,categories:e,onSuggestion:n}){const[i,o]=k.useState(!1),[l,u]=k.useState(null),[p,m]=k.useState(""),g=async()=>{if(!r){u("Prenez une photo d'abord");return}o(!0),u(null);try{const w=await tk(r,e,p);n(w)}catch(w){u("Impossible d'analyser la photo. Ressayez."),console.error(w)}finally{o(!1)}};return h.jsxs("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[h.jsx("input",{type:"text",value:p,onChange:w=>m(w.target.value),placeholder:"C'est quoi? Ex: butoir de porte, sac  lunch, coussin...",style:{width:"100%",padding:"10px 12px",fontSize:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",marginBottom:"8px",boxSizing:"border-box"}}),h.jsx("button",{type:"button",onClick:g,disabled:i||!r,style:{padding:"10px 20px",backgroundColor:i?"#ccc":"#7c3aed",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:i?"wait":"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:i?h.jsxs(h.Fragment,{children:[h.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid white",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Analyse en cours..."]}):h.jsx(h.Fragment,{children:" Suggestion AI"})}),l&&h.jsx("p",{style:{color:"red",fontSize:"14px",marginTop:"5px"},children:l}),h.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function rk(){const r=Od(),e=k.useRef(null),[n,i]=k.useState({uniqueId:"",description:"",longDescription:"",price:"",category:"",itemDate:new Date().toISOString().split("T")[0]}),[o,l]=k.useState(null),[u,p]=k.useState(null),[m,g]=k.useState(!1),[w,_]=k.useState(""),[y,b]=k.useState("");k.useEffect(()=>{Vg("ADL").then(Q=>{i(ne=>({...ne,uniqueId:Q})),b(Q)})},[]);const A=Q=>{const{name:ne,value:Z}=Q.target;i(me=>({...me,[ne]:Z})),ne==="uniqueId"&&_("")},M=Q=>{var me;const ne=(me=Q.target.files)==null?void 0:me[0];if(!ne)return;l(ne);const Z=new FileReader;Z.onload=Ee=>p(Ee.target.result),Z.readAsDataURL(ne)},D=()=>{var Q;(Q=e.current)==null||Q.click()},X=()=>{l(null),p(null),e.current&&(e.current.value="")},j=()=>{i(Q=>({...Q,uniqueId:y})),_("")},G=Q=>{i(ne=>({...ne,...Q.category?{category:Q.category}:{},...Q.title?{description:Q.title}:{},...Q.description?{longDescription:Q.description}:{}}))},V=async Q=>{if(Q.preventDefault(),_(""),!n.uniqueId.trim()){_("Le numro unique est requis");return}if(!n.price||parseFloat(n.price)<=0){_("Le prix doit tre suprieur  0");return}if(await Sy(n.uniqueId)){const Z=await Vg("ADL");b(Z),_(`Le numro "${n.uniqueId.toUpperCase()}" existe dj !`);return}g(!0);try{await qT({uniqueId:n.uniqueId,description:n.description,longDescription:n.longDescription,price:n.price,category:n.category,itemDate:n.itemDate,photoFile:o}),r("/")}catch(Z){console.error("Erreur:",Z),_("Erreur lors de la sauvegarde. Ressayez.")}finally{g(!1)}};return h.jsxs("div",{className:"page add-item-page",children:[h.jsx("h2",{className:"page-title",children:"Nouvel item"}),h.jsxs("form",{onSubmit:V,className:"add-form",children:[h.jsxs("div",{className:"photo-section",children:[h.jsx("input",{ref:e,type:"file",accept:"image/*",capture:"environment",onChange:M,className:"hidden-input"}),u?h.jsxs("div",{className:"photo-preview-container",children:[h.jsx("img",{src:u,alt:"Aperu",className:"photo-preview"}),h.jsx("button",{type:"button",className:"photo-remove",onClick:X,children:""})]}):h.jsxs("button",{type:"button",className:"photo-capture-btn",onClick:D,children:[h.jsx("span",{className:"capture-icon",children:""}),h.jsx("span",{children:"Prendre une photo"})]}),h.jsx("p",{className:"photo-hint",children:" Photo principale  vous pourrez ajouter d'autres photos en modifiant l'article"})]}),u&&h.jsx(nk,{imageBase64:u,onSuggestion:G}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Numro unique *"}),h.jsx("input",{type:"text",name:"uniqueId",value:n.uniqueId,onChange:A,placeholder:"Ex: ADL-001",className:"form-input",autoComplete:"off",style:{textTransform:"uppercase"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Titre / Description courte"}),h.jsx("input",{type:"text",name:"description",value:n.description,onChange:A,placeholder:"Ex: Sac  main fleuri",className:"form-input"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Description dtaille"}),h.jsx("textarea",{name:"longDescription",value:n.longDescription,onChange:A,placeholder:"Dcrivez l'article en dtail : matriaux, dimensions, couleurs, entretien...",className:"form-input form-textarea",rows:"4"}),h.jsx("p",{className:"form-hint",children:"Affich dans la vitrine publique"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Prix ($) *"}),h.jsx("input",{type:"number",name:"price",value:n.price,onChange:A,placeholder:"0.00",className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Catgorie"}),h.jsx("input",{type:"text",name:"category",value:n.category,onChange:A,placeholder:"Ex: Sacs, Vtements, Accessoires...",className:"form-input"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Date de cration"}),h.jsx("input",{type:"date",name:"itemDate",value:n.itemDate,onChange:A,className:"form-input"})]}),w&&h.jsxs("div",{className:"error-block",children:[h.jsx("p",{className:"error-text",children:w}),y&&w.includes("existe dj")&&h.jsxs("button",{type:"button",className:"btn btn-small btn-suggest",onClick:j,children:["Utiliser ",y]})]}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:m,children:m?"Sauvegarde en cours...":" Ajouter  l'inventaire"}),h.jsx("button",{type:"button",className:"btn btn-secondary btn-full",onClick:()=>r("/"),children:"Annuler"})]})]})]})}function Ze(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function sk(){var ce;const{user:r}=Wl(),[e,n]=k.useState("ADL-"),[i,o]=k.useState(null),[l,u]=k.useState(null),[p,m]=k.useState(((ce=r==null?void 0:r.displayName)==null?void 0:ce.split(" ")[0])||""),[g,w]=k.useState(new Date().toISOString().split("T")[0]),[_,y]=k.useState(""),[b,A]=k.useState(()=>localStorage.getItem("sdl_marketName")||""),[M,D]=k.useState(!1),[X,j]=k.useState(!1),[G,V]=k.useState(""),[Q,ne]=k.useState(""),[Z,me]=k.useState(!1),[Ee,Ie]=k.useState(""),[be,We]=k.useState(null);k.useEffect(()=>{const N=ge(ve,"stockduloft/settings/taxes");return Er(N,S=>{S.exists()?We(S.val()):We({enabled:!1})})},[]);const Ue=(be==null?void 0:be.enabled)||!1,$e=(be==null?void 0:be.tpsRate)||5,Ye=(be==null?void 0:be.tvqRate)||9.975,Ce=(()=>{if(!Ue||Z)return null;const N=parseFloat(_)||0;if(N<=0)return null;const $=Math.round(N*$e)/100,S=Math.round(N*Ye*100)/1e4,K=Math.round((N+$+S)*100)/100;return{tpsAmount:$,tvqAmount:S,totalWithTax:K}})(),H=async N=>{var $;if(N==null||N.preventDefault(),!!e.trim()){D(!0),V(""),ne(""),o(null),u(null);try{const S=await Sy(e);if(!S){V(`Aucun item trouv avec le numro "${e.toUpperCase()}"`);return}if(S.status==="sold"){V(`Cet item est dj vendu (${S.saleDate} par ${S.sellerName})`);return}if(o(S),y((($=S.price)==null?void 0:$.toFixed(2))||""),S.status==="consignment"&&S.consignmentStoreId){const K=await xy(S.consignmentStoreId);u(K)}}catch(S){console.error(S),V("Erreur de recherche. Ressayez.")}finally{D(!1)}}},q=(()=>{if(!l||!l.commissionPercent||Z)return null;const N=parseFloat(_)||0,$=Math.round(N*l.commissionPercent)/100,S=Math.round((N-$)*100)/100;return{commissionAmount:$,netRevenue:S,percent:l.commissionPercent}})(),I=async()=>{if(!(!i||!p.trim())){j(!0),V("");try{const N=Z?0:parseFloat(_)||i.price;let $=null;if(Ue&&!Z&&N>0){const ee=Math.round(N*$e)/100,ie=Math.round(N*Ye*100)/1e4;$={tpsRate:$e,tvqRate:Ye,tpsAmount:ee,tvqAmount:ie,totalWithTax:Math.round((N+ee+ie)*100)/100}}const S=await QT(i.id,p,g,N,b,Z,Ee,$);let K;Z?K=` ${i.uniqueId} donn en cadeau${Ee?`  ${Ee}`:""}`:S.commissionAmount>0?(K=` ${i.uniqueId} vendu pour ${Ze(N)} $`,$&&(K+=`
 TPS: ${Ze($.tpsAmount)} $ + TVQ: ${Ze($.tvqAmount)} $ = Total: ${Ze($.totalWithTax)} $`),K+=`
 Commission ${i.consignmentStore}: -${Ze(S.commissionAmount)} $`,K+=`
 Revenu net: ${Ze(S.netRevenue)} $`):(K=` ${i.uniqueId} vendu pour ${Ze(N)} $`,$&&(K+=`
 TPS: ${Ze($.tpsAmount)} $ + TVQ: ${Ze($.tvqAmount)} $
 Total avec taxes: ${Ze($.totalWithTax)} $`),b&&(K+=`${$?"":`
`}${$?"  ":" au "}${b}`)),ne(K),o(null),u(null),n("ADL-"),y(""),me(!1),Ie("")}catch(N){console.error(N),V("Erreur lors de la vente. Ressayez.")}finally{j(!1)}}},L=()=>{n("ADL-"),o(null),u(null),y(""),V(""),ne(""),me(!1),Ie("")};return h.jsxs("div",{className:"page sale-page",children:[h.jsx("h2",{className:"page-title",children:" Vente rapide"}),h.jsx("form",{onSubmit:H,className:"sale-search-form",children:h.jsxs("div",{className:"sale-search-row",children:[h.jsx("input",{type:"text",value:e,onChange:N=>n(N.target.value.toUpperCase()),placeholder:"Ex: ADL-001",className:"form-input sale-search-input",autoComplete:"off",autoFocus:!0}),h.jsx("button",{type:"submit",className:"btn btn-primary sale-search-btn",disabled:M||!e.trim(),children:M?"...":""})]})}),Q&&h.jsxs("div",{className:"sale-success",children:[h.jsx("p",{style:{whiteSpace:"pre-line"},children:Q}),h.jsx("button",{className:"btn btn-primary btn-full",onClick:L,children:"Prochaine vente"})]}),G&&h.jsxs("div",{className:"sale-error",children:[h.jsx("p",{children:G}),h.jsx("button",{className:"btn btn-secondary",onClick:L,children:"Ressayer"})]}),i&&h.jsxs("div",{className:"sale-confirmation",children:[h.jsxs("div",{className:"sale-item-card",children:[i.photoBase64?h.jsx("img",{src:i.photoBase64,alt:i.description,className:"sale-item-photo"}):h.jsx("div",{className:"sale-photo-placeholder",children:""}),h.jsxs("div",{className:"sale-item-details",children:[h.jsxs("span",{className:"sale-item-id",children:["#",i.uniqueId]}),h.jsx("p",{className:"sale-item-desc",children:i.description}),h.jsxs("p",{className:"sale-item-price",children:[Ze(i.price)," $"]}),i.status==="consignment"&&h.jsxs("p",{className:"sale-item-consign",children:[" En consigne: ",i.consignmentStore,l&&l.commissionPercent>0&&h.jsxs("span",{className:"sale-commission-badge",children:[l.commissionPercent,"% commission"]})]})]})]}),h.jsxs("div",{className:"sale-form",children:[h.jsx("div",{className:"form-group",children:h.jsxs("label",{className:"gift-toggle",children:[h.jsx("input",{type:"checkbox",checked:Z,onChange:N=>{var $;me(N.target.checked),N.target.checked?y("0"):y((($=i.price)==null?void 0:$.toFixed(2))||"")}}),h.jsx("span",{children:" Donn en cadeau"})]})}),Z&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Note"}),h.jsx("input",{type:"text",value:Ee,onChange:N=>Ie(N.target.value),className:"form-input",placeholder:"Ex: Cadeau pour maman, change, etc."})]}),!Z&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Prix de vente ($)"}),h.jsxs("div",{className:"sale-price-row",children:[h.jsx("input",{type:"number",value:_,onChange:N=>y(N.target.value),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"}),parseFloat(_)<i.price&&h.jsxs("span",{className:"sale-discount",children:["Rabais de ",Ze(i.price-parseFloat(_))," $"]})]})]}),Ce&&h.jsxs("div",{className:"sale-tax-preview",children:[h.jsxs("div",{className:"tax-calc-row",children:[h.jsx("span",{children:"Prix"}),h.jsxs("span",{children:[Ze(parseFloat(_))," $"]})]}),h.jsxs("div",{className:"tax-calc-row",children:[h.jsxs("span",{children:["TPS (",$e,"%)"]}),h.jsxs("span",{children:[Ze(Ce.tpsAmount)," $"]})]}),h.jsxs("div",{className:"tax-calc-row",children:[h.jsxs("span",{children:["TVQ (",Ye,"%)"]}),h.jsxs("span",{children:[Ze(Ce.tvqAmount)," $"]})]}),h.jsxs("div",{className:"tax-calc-row tax-calc-total",children:[h.jsx("span",{children:" Total  encaisser"}),h.jsxs("span",{children:[Ze(Ce.totalWithTax)," $"]})]})]}),q&&h.jsxs("div",{className:"sale-commission-preview",children:[h.jsxs("div",{className:"commission-row",children:[h.jsx("span",{children:"Prix de vente"}),h.jsxs("span",{children:[Ze(parseFloat(_))," $"]})]}),h.jsxs("div",{className:"commission-row commission-negative",children:[h.jsxs("span",{children:["Commission ",i.consignmentStore," (",q.percent,"%)"]}),h.jsxs("span",{children:["-",Ze(q.commissionAmount)," $"]})]}),h.jsxs("div",{className:"commission-row commission-total",children:[h.jsx("span",{children:"Revenu net pour vous"}),h.jsxs("span",{children:[Ze(q.netRevenue)," $"]})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Vendeuse"}),h.jsx("input",{type:"text",value:p,onChange:N=>m(N.target.value),className:"form-input",placeholder:"Nom de la vendeuse"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"March / Point de vente"}),h.jsx("input",{type:"text",value:b,onChange:N=>{A(N.target.value),localStorage.setItem("sdl_marketName",N.target.value)},className:"form-input",placeholder:"Ex: March Jean-Talon, Facebook, etc."})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Date de vente"}),h.jsx("input",{type:"date",value:g,onChange:N=>w(N.target.value),className:"form-input"})]}),h.jsxs("div",{className:"sale-actions",children:[h.jsx("button",{className:"btn btn-sell btn-full",onClick:I,disabled:X||!p.trim(),children:X?"En cours...":Z?" Confirmer le cadeau":Ce?`Confirmer  Total: ${Ze(Ce.totalWithTax)} $`:q?`Confirmer  Net: ${Ze(q.netRevenue)} $`:`Confirmer la vente  ${Ze(parseFloat(_||0))} $`}),h.jsx("button",{className:"btn btn-secondary btn-full",onClick:L,children:"Annuler"})]})]})]}),!i&&!G&&!Q&&h.jsxs("div",{className:"sale-hint",children:[h.jsx("p",{className:"hint-icon",children:""}),h.jsxs("p",{children:["Entre le numro de l'tiquette",h.jsx("br",{}),"pour enregistrer une vente"]})]})]})}const Va="stockduloft/settings";function Bt(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}const ik={free:{name:"Dcouverte",badge:"",articlesLimit:25,vitrineLimit:10,price:null},artisan:{name:"Artisan",badge:"",articlesLimit:1/0,vitrineLimit:1/0,price:{monthly:12.99,yearly:100}}};function ok(){const[r,e]=k.useState(7),[n,i]=k.useState([]),[o,l]=k.useState([]),[u,p]=k.useState(!1),[m,g]=k.useState(null),[w,_]=k.useState({name:"",commissionPercent:"",locationFee:""}),[y,b]=k.useState(null),[A,M]=k.useState(()=>{const O=new Date;return`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}`}),[D,X]=k.useState(!1),[j,G]=k.useState("5"),[V,Q]=k.useState("9.975"),[ne,Z]=k.useState(""),[me,Ee]=k.useState(""),[Ie,be]=k.useState(!1),[We,Ue]=k.useState(!1),[$e,Ye]=k.useState(null);k.useEffect(()=>{const O=ge(ve,Va);return Er(O,He=>{if(He.exists()){const nt=He.val();nt.vitrineSoldDays!==void 0&&e(nt.vitrineSoldDays),nt.subscription?b(nt.subscription):b({plan:"free",planType:null,startDate:null,expiryDate:null}),nt.taxes&&(X(nt.taxes.enabled||!1),nt.taxes.tpsRate!==void 0&&G(nt.taxes.tpsRate.toString()),nt.taxes.tvqRate!==void 0&&Q(nt.taxes.tvqRate.toString()),nt.taxes.tpsNumber!==void 0&&Z(nt.taxes.tpsNumber),nt.taxes.tvqNumber!==void 0&&Ee(nt.taxes.tvqNumber))}})},[]),k.useEffect(()=>wy(i),[]),k.useEffect(()=>Cy(l),[]);const Je=async O=>{const oe=parseInt(O);e(oe),await it(ge(ve,Va),{vitrineSoldDays:oe})},Ce=async O=>{X(O),await it(ge(ve,`${Va}/taxes`),{enabled:O,tpsRate:parseFloat(j)||5,tvqRate:parseFloat(V)||9.975,tpsNumber:ne,tvqNumber:me})},H=async()=>{await it(ge(ve,`${Va}/taxes`),{enabled:D,tpsRate:parseFloat(j)||5,tvqRate:parseFloat(V)||9.975,tpsNumber:ne.trim(),tvqNumber:me.trim()})},ae=50,q=Math.round(ae*(parseFloat(j)||0))/100,I=Math.round(ae*(parseFloat(V)||0)*100)/1e4,L=ae+q+I,ce=ik[(y==null?void 0:y.plan)||"free"],N=o.filter(O=>O.status!=="sold").length,$=ce.articlesLimit===1/0?0:Math.min(100,Math.round(N/ce.articlesLimit*100)),S=((y==null?void 0:y.plan)||"free")==="free",K=O=>O?new Date(O).toLocaleDateString("fr-CA",{year:"numeric",month:"long",day:"numeric"}):"",ee=()=>{if(!(y!=null&&y.expiryDate))return null;const O=new Date,oe=new Date(y.expiryDate);return Math.ceil((oe-O)/(1e3*60*60*24))},ie=async()=>{w.name.trim()&&(await WT(w),_({name:"",commissionPercent:"",locationFee:""}),p(!1))},le=O=>{var oe,He;g(O.id),_({name:O.name,commissionPercent:((oe=O.commissionPercent)==null?void 0:oe.toString())||"",locationFee:((He=O.locationFee)==null?void 0:He.toString())||""})},Oe=async O=>{await VT(O,{name:w.name.trim(),commissionPercent:parseFloat(w.commissionPercent)||0,locationFee:parseFloat(w.locationFee)||0}),g(null),_({name:"",commissionPercent:"",locationFee:""})},Wt=async O=>{const oe=o.filter(He=>He.status==="consignment"&&He.consignmentStoreId===O.id);if(oe.length>0){alert(`Impossible de supprimer : ${oe.length} article(s) en consigne chez ${O.name}`);return}confirm(`Supprimer le magasin "${O.name}" ?`)&&await HT(O.id)},Ve=(()=>{const[O,oe]=A.split("-").map(Number),He=`${O}-${String(oe).padStart(2,"0")}-01`,nt=oe===12?`${O+1}-01-01`:`${O}-${String(oe+1).padStart(2,"0")}-01`,Mt=o.filter(Se=>Se.status==="sold"&&Se.saleDate&&Se.saleDate>=He&&Se.saleDate<nt),Te=Mt.filter(Se=>!Se.isGift),En=Mt.filter(Se=>Se.isGift),Tr=Te.reduce((Se,Re)=>Se+(Re.salePrice||0),0),kr=Te.reduce((Se,Re)=>Se+(Re.commissionAmount||0),0),bo=Te.reduce((Se,Re)=>Re.taxEnabled?Se+(Re.tpsAmount||0)+(Re.tvqAmount||0):Se,0),Zt={};Te.forEach(Se=>{const Re=Se.consignmentStoreId?` ${Se.consignmentStore||"Consigne"}`:Se.marketName?` ${Se.marketName}`:" Vente directe";Zt[Re]||(Zt[Re]={count:0,revenue:0}),Zt[Re].count++,Zt[Re].revenue+=Se.salePrice||0});const en={};Te.forEach(Se=>{const Re=Se.category||"Sans catgorie";en[Re]||(en[Re]={count:0,revenue:0}),en[Re].count++,en[Re].revenue+=Se.salePrice||0});const Pr={};return Mt.forEach(Se=>{const Re=Se.sellerName||"Non spcifi";Pr[Re]||(Pr[Re]={count:0,revenue:0}),Pr[Re].count++,Pr[Re].revenue+=Se.salePrice||0}),{totalSales:Te.length,totalGifts:En.length,totalRevenue:Tr,totalCommissions:kr,totalNet:Tr-kr,totalTaxes:bo,avgPrice:Te.length>0?Tr/Te.length:0,byMarket:Object.entries(Zt).sort((Se,Re)=>Re[1].revenue-Se[1].revenue),byCategory:Object.entries(en).sort((Se,Re)=>Re[1].count-Se[1].count),bySeller:Object.entries(Pr).sort((Se,Re)=>Re[1].count-Se[1].count)}})(),Po=Ve.totalSales>0||Ve.totalGifts>0,ss=(()=>{const[O,oe]=A.split("-").map(Number),He=`${O}-${String(oe).padStart(2,"0")}-01`,nt=oe===12?`${O+1}-01-01`:`${O}-${String(oe+1).padStart(2,"0")}-01`,Mt={};return n.forEach(Te=>{Mt[Te.id]={storeName:Te.name,commissionPercent:Te.commissionPercent,locationFee:Te.locationFee,totalSales:0,totalCommission:0,totalNet:0,itemsSold:0,itemsInConsignment:0}}),o.forEach(Te=>{if(Te.status==="consignment"&&Te.consignmentStoreId&&Mt[Te.consignmentStoreId]&&Mt[Te.consignmentStoreId].itemsInConsignment++,Te.status==="sold"&&Te.saleDate&&Te.saleDate>=He&&Te.saleDate<nt&&Te.consignmentStoreId&&Mt[Te.consignmentStoreId]){const En=Mt[Te.consignmentStoreId];En.itemsSold++,En.totalSales+=Te.salePrice||0,En.totalCommission+=Te.commissionAmount||0,En.totalNet+=Te.netRevenue||Te.salePrice||0}}),Object.values(Mt)})(),Ro=ss.some(O=>O.itemsSold>0||O.itemsInConsignment>0),oi=()=>{const[O,oe]=A.split("-").map(Number);return new Date(O,oe-1).toLocaleDateString("fr-CA",{year:"numeric",month:"long"})};return h.jsxs("div",{className:"page about-page",children:[h.jsx("h2",{className:"page-title",children:"  propos"}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Mon abonnement"}),h.jsxs("div",{className:"subscription-section",children:[h.jsx("div",{className:"subscription-plan-row",children:h.jsxs("div",{className:"subscription-plan-info",children:[h.jsxs("span",{className:"subscription-plan-badge",children:[ce.badge," ",ce.name]}),!S&&(y==null?void 0:y.planType)&&h.jsx("span",{className:"subscription-plan-type",children:y.planType==="yearly"?"100.00 $/an":"12.99 $/mois"})]})}),h.jsxs("div",{className:"subscription-articles",children:[h.jsxs("div",{className:"subscription-articles-label",children:[h.jsx("span",{children:" Articles actifs"}),h.jsxs("span",{children:[N,S?` / ${ce.articlesLimit}`:"  Illimit"]})]}),S&&h.jsx("div",{className:"subscription-progress-bar",children:h.jsx("div",{className:`subscription-progress-fill ${$>=80?"warning":""} ${$>=100?"full":""}`,style:{width:`${$}%`}})})]}),h.jsxs("div",{className:"subscription-detail-row",children:[h.jsx("span",{children:" Vitrine publique"}),h.jsx("span",{children:S?`${ce.vitrineLimit} articles max`:"Illimite"})]}),h.jsxs("div",{className:"subscription-detail-row",children:[h.jsx("span",{children:" Suivi consignes"}),h.jsx("span",{children:S?"":""})]}),h.jsxs("div",{className:"subscription-detail-row",children:[h.jsx("span",{children:" tiquettes QR"}),h.jsx("span",{children:S?"":""})]}),!S&&(y==null?void 0:y.expiryDate)&&h.jsxs("div",{className:"subscription-renewal",children:[h.jsx("span",{children:" Renouvellement"}),h.jsxs("span",{className:ee()<=7?"renewal-soon":"",children:[K(y.expiryDate),ee()<=7&&ee()>0&&h.jsxs("span",{className:"renewal-badge",children:["Dans ",ee()," jour(s)"]})]})]}),S?h.jsxs("div",{className:"subscription-upgrade",children:[h.jsx("p",{className:"subscription-upgrade-pitch",children:"Passez au plan Artisan pour des articles illimits, la vitrine complte, le suivi des consignes et plus encore."}),h.jsxs("div",{className:"subscription-upgrade-options",children:[h.jsx("button",{className:"btn btn-upgrade btn-full",onClick:()=>{Ye("monthly"),Ue(!0)},children:" Plan Artisan  12.99 $/mois"}),h.jsxs("button",{className:"btn btn-upgrade-yearly btn-full",onClick:()=>{Ye("yearly"),Ue(!0)},children:[" Plan Annuel  100 $/an",h.jsx("span",{className:"upgrade-savings",children:"conomisez 56 $ !"})]})]})]}):h.jsx("div",{className:"subscription-manage",children:h.jsx("button",{className:"btn btn-small btn-secondary btn-full",children:"Grer mon abonnement"})})]})]}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Rapport des ventes"}),h.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[h.jsx("label",{className:"form-label",children:"Mois"}),h.jsx("input",{type:"month",value:A,onChange:O=>M(O.target.value),className:"form-input"})]}),Po?h.jsxs("div",{className:"sales-report",children:[h.jsxs("div",{className:"sales-summary-grid",children:[h.jsxs("div",{className:"sales-summary-card sales-summary-highlight",children:[h.jsxs("span",{className:"sales-summary-value",children:[Bt(Ve.totalRevenue)," $"]}),h.jsx("span",{className:"sales-summary-label",children:"Ventes brutes"})]}),h.jsxs("div",{className:"sales-summary-card",children:[h.jsx("span",{className:"sales-summary-value",children:Ve.totalSales}),h.jsx("span",{className:"sales-summary-label",children:"Articles vendus"})]}),h.jsxs("div",{className:"sales-summary-card",children:[h.jsxs("span",{className:"sales-summary-value",children:[Bt(Ve.avgPrice)," $"]}),h.jsx("span",{className:"sales-summary-label",children:"Prix moyen"})]}),Ve.totalGifts>0&&h.jsxs("div",{className:"sales-summary-card",children:[h.jsxs("span",{className:"sales-summary-value",children:[" ",Ve.totalGifts]}),h.jsx("span",{className:"sales-summary-label",children:"Cadeaux"})]})]}),(Ve.totalCommissions>0||Ve.totalTaxes>0)&&h.jsxs("div",{className:"sales-deductions",children:[Ve.totalCommissions>0&&h.jsxs("div",{className:"report-row report-row-negative",children:[h.jsx("span",{children:" Commissions consigne"}),h.jsxs("span",{children:["-",Bt(Ve.totalCommissions)," $"]})]}),Ve.totalTaxes>0&&h.jsxs("div",{className:"report-row",children:[h.jsx("span",{children:" Taxes perues (TPS+TVQ)"}),h.jsxs("span",{children:[Bt(Ve.totalTaxes)," $"]})]}),h.jsxs("div",{className:"report-row report-row-total",children:[h.jsx("span",{children:" Revenu net"}),h.jsxs("span",{children:[Bt(Ve.totalNet)," $"]})]})]}),Ve.byMarket.length>0&&h.jsxs("div",{className:"sales-breakdown",children:[h.jsx("p",{className:"sales-breakdown-title",children:"Par lieu de vente"}),Ve.byMarket.map(([O,oe])=>h.jsxs("div",{className:"sales-breakdown-row",children:[h.jsx("span",{className:"sales-breakdown-name",children:O}),h.jsxs("span",{className:"sales-breakdown-stats",children:[oe.count," article",oe.count>1?"s":"","  ",Bt(oe.revenue)," $"]})]},O))]}),Ve.byCategory.length>0&&h.jsxs("div",{className:"sales-breakdown",children:[h.jsx("p",{className:"sales-breakdown-title",children:"Par catgorie"}),Ve.byCategory.map(([O,oe])=>h.jsxs("div",{className:"sales-breakdown-row",children:[h.jsx("span",{className:"sales-breakdown-name",children:O}),h.jsxs("span",{className:"sales-breakdown-stats",children:[oe.count,"  ",Bt(oe.revenue)," $"]})]},O))]}),Ve.bySeller.length>1&&h.jsxs("div",{className:"sales-breakdown",children:[h.jsx("p",{className:"sales-breakdown-title",children:"Par vendeur"}),Ve.bySeller.map(([O,oe])=>h.jsxs("div",{className:"sales-breakdown-row",children:[h.jsxs("span",{className:"sales-breakdown-name",children:[" ",O]}),h.jsxs("span",{className:"sales-breakdown-stats",children:[oe.count,"  ",Bt(oe.revenue)," $"]})]},O))]})]}):h.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginTop:"10px"},children:["Aucune vente pour ",oi()]})]}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Taxes de vente"}),h.jsxs("div",{className:"tax-section",children:[h.jsx("div",{className:"tax-toggle-row",children:h.jsxs("label",{className:"tax-toggle-label",children:[h.jsx("input",{type:"checkbox",checked:D,onChange:O=>Ce(O.target.checked)}),h.jsx("span",{className:"tax-toggle-text",children:"Je perois les taxes de vente"})]})}),D&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"store-form-row",style:{marginTop:"12px"},children:[h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"TPS (%)"}),h.jsx("input",{type:"number",value:j,onChange:O=>G(O.target.value),onBlur:H,className:"form-input",step:"0.001",min:"0",max:"20",inputMode:"decimal"})]}),h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"TVQ (%)"}),h.jsx("input",{type:"number",value:V,onChange:O=>Q(O.target.value),onBlur:H,className:"form-input",step:"0.001",min:"0",max:"20",inputMode:"decimal"})]})]}),h.jsxs("div",{className:"form-group",style:{marginTop:"8px"},children:[h.jsx("label",{className:"form-label",children:"Numro TPS (optionnel)"}),h.jsx("input",{type:"text",value:ne,onChange:O=>Z(O.target.value),onBlur:H,className:"form-input",placeholder:"Ex: 123456789RT0001"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Numro TVQ (optionnel)"}),h.jsx("input",{type:"text",value:me,onChange:O=>Ee(O.target.value),onBlur:H,className:"form-input",placeholder:"Ex: 1234567890TQ0001"})]}),h.jsxs("div",{className:"tax-preview",children:[h.jsx("p",{className:"tax-preview-title",children:"Aperu sur un article  50.00 $ :"}),h.jsxs("div",{className:"tax-preview-row",children:[h.jsx("span",{children:"Prix"}),h.jsx("span",{children:"50.00 $"})]}),h.jsxs("div",{className:"tax-preview-row",children:[h.jsxs("span",{children:["TPS (",j,"%)"]}),h.jsxs("span",{children:[q.toFixed(2)," $"]})]}),h.jsxs("div",{className:"tax-preview-row",children:[h.jsxs("span",{children:["TVQ (",V,"%)"]}),h.jsxs("span",{children:[I.toFixed(2)," $"]})]}),h.jsxs("div",{className:"tax-preview-row tax-preview-total",children:[h.jsx("span",{children:"Total"}),h.jsxs("span",{children:[L.toFixed(2)," $"]})]})]})]}),h.jsx("button",{className:"btn btn-small btn-secondary btn-full",style:{marginTop:"12px"},onClick:()=>be(!Ie),children:Ie?" Masquer":" Ce que vous devez savoir sur les taxes"}),Ie&&h.jsxs("div",{className:"tax-info-section",children:[h.jsx("h5",{children:" Taxes de vente  Ce que vous devez savoir"}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Suis-je oblig de percevoir les taxes ?"}),h.jsxs("p",{children:["Au Canada, si vos ventes totales sont infrieures  30 000 $ sur quatre trimestres civils conscutifs, vous tes considr  petit fournisseur  et vous n'tes"," ",h.jsx("strong",{children:"pas oblig"})," de vous inscrire aux taxes (TPS/TVH au fdral et TVQ au Qubec)."]})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Avantages de s'inscrire volontairement"}),h.jsx("p",{children:"Mme sous le seuil de 30 000 $, l'inscription volontaire peut tre avantageuse. Vous pouvez rclamer des crdits de taxe sur les intrants (CTI) pour rcuprer la TPS et la TVQ payes sur vos achats de matriaux, fournitures, outils et quipement. Pour certains artisans, ces remboursements peuvent tre significatifs."})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Inconvnients"}),h.jsx("p",{children:"Si vous vous inscrivez, vous devez percevoir les taxes sur toutes vos ventes, produire des dclarations de taxes rgulirement, et remettre les montants perus aux gouvernements. Cela ajoute de la comptabilit et de l'administration. Vos prix peuvent aussi paratre plus levs face  des artisans non inscrits."})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Si vous dpassez 30 000 $"}),h.jsx("p",{children:"Ds que vos ventes dpassent 30 000 $ au cours d'un seul trimestre civil ou sur quatre trimestres conscutifs, vous devez vous inscrire dans les 29 jours suivants et commencer  percevoir les taxes. Il est important de surveiller vos ventes pour ne pas manquer ce seuil."})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Taux au Qubec"}),h.jsx("p",{children:"TPS (fdral) : 5 %  TVQ (Qubec) : 9,975 %. La TVQ se calcule sur le prix avant TPS (et non sur le prix + TPS). Le taux combin effectif est d'environ 14,975 %."})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Ressources officielles"}),h.jsxs("p",{children:[""," ",h.jsx("a",{href:"https://www.canada.ca/fr/agence-revenu/services/impot/entreprises/sujets/tps-tvh-entreprises/compte-tps-tvh/inscrire-compte.html",target:"_blank",rel:"noopener noreferrer",children:"Agence du revenu du Canada  Inscription TPS/TVH"}),h.jsx("br",{}),""," ",h.jsx("a",{href:"https://www.revenuquebec.ca/fr/entreprises/taxes/tpstvh-et-tvq/inscription-aux-fichiers-de-la-tps-et-de-la-tvq/",target:"_blank",rel:"noopener noreferrer",children:"Revenu Qubec  Inscription TPS et TVQ"})]})]}),h.jsx("div",{className:"tax-info-disclaimer",children:h.jsxs("p",{children:[" ",h.jsx("strong",{children:"Avis important :"})," Cette information est fournie  titre indicatif seulement et ne constitue pas un avis fiscal ou juridique. Chaque situation est unique. Consultez un comptable ou un professionnel qualifi pour dterminer ce qui convient  votre situation. Cette application est un outil de gestion d'inventaire et n'assume aucune responsabilit en matire de conformit fiscale."]})})]})]})]}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Magasins de consigne"}),n.length===0?h.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",margin:"12px 0"},children:"Aucun magasin configur"}):h.jsx("div",{className:"stores-list",children:n.map(O=>h.jsx("div",{className:"store-card",children:m===O.id?h.jsxs("div",{className:"store-edit-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom"}),h.jsx("input",{type:"text",value:w.name,onChange:oe=>_(He=>({...He,name:oe.target.value})),className:"form-input"})]}),h.jsxs("div",{className:"store-form-row",children:[h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Commission (%)"}),h.jsx("input",{type:"number",value:w.commissionPercent,onChange:oe=>_(He=>({...He,commissionPercent:oe.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"0"})]}),h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),h.jsx("input",{type:"number",value:w.locationFee,onChange:oe=>_(He=>({...He,locationFee:oe.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"0"})]})]}),h.jsxs("div",{className:"store-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:()=>Oe(O.id),children:" Sauvegarder"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>g(null),children:"Annuler"})]})]}):h.jsxs("div",{className:"store-info",children:[h.jsxs("div",{className:"store-header",children:[h.jsx("span",{className:"store-name",children:O.name}),h.jsxs("div",{className:"store-actions-btns",children:[h.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>le(O),children:""}),h.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>Wt(O),children:""})]})]}),h.jsxs("div",{className:"store-details",children:[O.commissionPercent>0&&h.jsxs("span",{className:"store-tag store-tag-commission",children:[O.commissionPercent,"% commission"]}),O.locationFee>0&&h.jsxs("span",{className:"store-tag store-tag-location",children:[Bt(O.locationFee)," $/mois loyer"]}),!O.commissionPercent&&!O.locationFee&&h.jsx("span",{className:"store-tag",children:"Aucun frais configur"})]}),o.filter(oe=>oe.status==="consignment"&&oe.consignmentStoreId===O.id).length>0&&h.jsxs("p",{className:"store-consigned-count",children:[""," ",o.filter(oe=>oe.status==="consignment"&&oe.consignmentStoreId===O.id).length," ","article(s) en consigne"]})]})},O.id))}),u?h.jsxs("div",{className:"store-add-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom du magasin"}),h.jsx("input",{type:"text",value:w.name,onChange:O=>_(oe=>({...oe,name:O.target.value})),className:"form-input",placeholder:"Ex: SF Studios",autoFocus:!0})]}),h.jsxs("div",{className:"store-form-row",children:[h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Commission (%)"}),h.jsx("input",{type:"number",value:w.commissionPercent,onChange:O=>_(oe=>({...oe,commissionPercent:O.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"Ex: 30"})]}),h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),h.jsx("input",{type:"number",value:w.locationFee,onChange:O=>_(oe=>({...oe,locationFee:O.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"Ex: 50"})]})]}),h.jsxs("div",{className:"store-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:ie,disabled:!w.name.trim(),children:" Ajouter"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>{p(!1),_({name:"",commissionPercent:"",locationFee:""})},children:"Annuler"})]})]}):h.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{p(!0),_({name:"",commissionPercent:"",locationFee:""})},style:{marginTop:"10px"},children:" Ajouter un magasin"})]}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Rapport consignes"}),h.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[h.jsx("label",{className:"form-label",children:"Mois"}),h.jsx("input",{type:"month",value:A,onChange:O=>M(O.target.value),className:"form-input"})]}),Ro?h.jsx("div",{className:"report-list",children:ss.filter(O=>O.itemsSold>0||O.itemsInConsignment>0).map((O,oe)=>h.jsxs("div",{className:"report-store-card",children:[h.jsx("div",{className:"report-store-name",children:O.storeName}),O.itemsInConsignment>0&&h.jsxs("div",{className:"report-row",children:[h.jsx("span",{children:" En consigne actuellement"}),h.jsxs("span",{children:[O.itemsInConsignment," article(s)"]})]}),O.itemsSold>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"report-row",children:[h.jsx("span",{children:" Articles vendus"}),h.jsx("span",{children:O.itemsSold})]}),h.jsxs("div",{className:"report-row",children:[h.jsx("span",{children:" Total ventes"}),h.jsxs("span",{children:[Bt(O.totalSales)," $"]})]}),O.commissionPercent>0&&h.jsxs("div",{className:"report-row report-row-negative",children:[h.jsxs("span",{children:[" Commission (",O.commissionPercent,"%)"]}),h.jsxs("span",{children:["-",Bt(O.totalCommission)," $"]})]}),O.locationFee>0&&h.jsxs("div",{className:"report-row report-row-negative",children:[h.jsx("span",{children:" Loyer mensuel"}),h.jsxs("span",{children:["-",Bt(O.locationFee)," $"]})]}),h.jsxs("div",{className:"report-row report-row-total",children:[h.jsx("span",{children:" Revenu net"}),h.jsxs("span",{children:[Bt(O.totalNet-(O.locationFee||0))," $"]})]})]})]},oe))}):h.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginTop:"10px"},children:"Aucune activit de consigne pour ce mois"})]}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Paramtres Vitrine"}),h.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[h.jsx("label",{className:"form-label",children:"Afficher les articles vendus pendant :"}),h.jsxs("select",{value:r,onChange:O=>Je(O.target.value),className:"form-input",children:[h.jsx("option",{value:0,children:"Ne pas afficher"}),h.jsx("option",{value:3,children:"3 jours"}),h.jsx("option",{value:7,children:"7 jours (1 semaine)"}),h.jsx("option",{value:14,children:"14 jours (2 semaines)"}),h.jsx("option",{value:30,children:"30 jours (1 mois)"})]}),h.jsx("p",{className:"about-setting-hint",children:"Les articles vendus apparatront avec un bandeau  VENDU  dans la vitrine publique."})]})]}),h.jsxs("div",{className:"about-card",children:[h.jsx("div",{className:"about-logo",children:h.jsx("img",{src:"/pwa-192x192.png",alt:"Vitrine Artisan"})}),h.jsx("h3",{children:" Vitrine Artisan"}),h.jsx("p",{className:"about-version",children:"Version 1.3"}),h.jsx("p",{className:"about-description",children:"Application de gestion d'inventaire conue pour les artisans et crateurs. Grez vos articles, suivez vos consignes et enregistrez vos ventes en toute simplicit."}),h.jsxs("div",{className:"about-author",children:[h.jsxs("p",{children:["Cr par ",h.jsx("strong",{children:"Jean-Marc Lacroix"})]}),h.jsx("p",{children:" 2026  Tous droits rservs"}),h.jsx("p",{style:{marginTop:"12px"},children:" Commentaires et suggestions bienvenus"}),h.jsx("a",{href:"mailto:lacroix.jeanmarc@gmail.com",className:"about-email",children:" lacroix.jeanmarc@gmail.com"})]})]}),We&&h.jsx("div",{className:"modal-overlay",onClick:()=>Ue(!1),children:h.jsxs("div",{className:"modal-content upgrade-modal",onClick:O=>O.stopPropagation(),children:[h.jsx("h3",{children:" Passer au Plan Artisan"}),h.jsx("div",{className:"upgrade-modal-plan-selected",children:$e==="monthly"?" Plan mensuel  12,99 $ / mois":" Plan annuel  100,00 $ / an (conomisez 56 $!)"}),h.jsxs("div",{className:"upgrade-modal-steps",children:[h.jsx("p",{className:"upgrade-modal-steps-title",children:"Pour activer votre abonnement :"}),h.jsxs("div",{className:"upgrade-modal-step",children:[h.jsx("span",{className:"upgrade-modal-step-number",children:"1"}),h.jsxs("span",{children:["Envoyez un virement Interac de"," ",h.jsx("strong",{children:$e==="monthly"?"12,99 $":"100,00 $"}),"  :"]})]}),h.jsxs("div",{className:"upgrade-modal-email-box",children:[h.jsx("span",{className:"upgrade-modal-email-icon",children:""}),h.jsx("span",{className:"upgrade-modal-email-address",children:"lacroix.jeanmarc@gmail.com"})]}),h.jsxs("div",{className:"upgrade-modal-step",children:[h.jsx("span",{className:"upgrade-modal-step-number",children:"2"}),h.jsxs("span",{children:["Dans le message du virement, indiquez le ",h.jsx("strong",{children:"nom de votre entreprise"})]})]}),h.jsxs("div",{className:"upgrade-modal-step",children:[h.jsx("span",{className:"upgrade-modal-step-number",children:"3"}),h.jsxs("span",{children:["Votre plan sera activ dans les ",h.jsx("strong",{children:"24 heures"})," suivant la rception du paiement"]})]})]}),h.jsx("div",{className:"upgrade-modal-note",children:" Une confirmation par courriel vous sera envoye ds l'activation."}),h.jsx("button",{className:"btn btn-secondary btn-full",onClick:()=>Ue(!1),style:{marginTop:"16px"},children:"Fermer"})]})})]})}const ak="stockduloft/items",lk="stockduloft/photos",ck="stockduloft/settings",uk=4;function qg(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function dk(r,e){if(r.status!=="sold"||!r.saleDate)return!1;const n=new Date(r.saleDate);return(new Date-n)/(1e3*60*60*24)<=e}function hk(r){const e=[];if(!r)return e;r.photoBase64&&e.push(r.photoBase64);for(let n=1;n<=uk;n++)r[`photo_${n}`]&&e.push(r[`photo_${n}`]);return e}function fk(){const[r,e]=k.useState([]),[n,i]=k.useState(!0),[o,l]=k.useState("all"),[u,p]=k.useState(null),[m,g]=k.useState({}),[w,_]=k.useState({}),[y,b]=k.useState(7);k.useEffect(()=>{const j=ge(ve,ck);return Er(j,V=>{if(V.exists()){const Q=V.val();Q.vitrineSoldDays!==void 0&&b(Q.vitrineSoldDays)}})},[]),k.useEffect(()=>{const j=ge(ve,ak);return Er(j,V=>{const Q=[];V.exists()&&V.forEach(ne=>{const Z={id:ne.key,...ne.val()};(Z.status==="inventory"||Z.status==="consignment"||dk(Z,y))&&Q.push(Z)}),Q.sort((ne,Z)=>(Z.createdAt||0)-(ne.createdAt||0)),e(Q),i(!1),Q.forEach(async ne=>{if(ne.hasPhoto&&!ne.photoBase64)try{const Z=ge(ve,`${lk}/${ne.id}`),me=await Cn(Z);if(me.exists()){const Ee=hk(me.val());g(Ie=>({...Ie,[ne.id]:Ee}))}}catch(Z){console.error("Erreur photo:",Z)}})})},[y]);const A=[...new Set(r.map(j=>j.category).filter(Boolean))].sort(),M=o==="all"?r:r.filter(j=>j.category===o),D=j=>{u===j?p(null):(p(j),_(G=>({...G,[j]:0})))},X=j=>m[j.id]&&m[j.id].length>0?m[j.id]:j.photoBase64?[j.photoBase64]:[];return n?h.jsx("div",{className:"vitrine",children:h.jsxs("div",{className:"vitrine-loading",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Chargement du catalogue..."})]})}):h.jsxs("div",{className:"vitrine",children:[h.jsxs("header",{className:"vitrine-header",children:[h.jsx("img",{src:"/pwa-192x192.png",alt:"Logo",className:"vitrine-logo"}),h.jsxs("div",{children:[h.jsx("h1",{className:"vitrine-title",children:" L'Atelier du Loft"}),h.jsx("p",{className:"vitrine-subtitle-name",children:"Jose Bourgouin"}),h.jsxs("p",{className:"vitrine-subtitle",children:[M.length," article",M.length>1?"s":""," disponible",M.length>1?"s":""]})]})]}),A.length>0&&h.jsxs("div",{className:"vitrine-filters",children:[h.jsx("button",{className:`vitrine-filter-btn ${o==="all"?"active":""}`,onClick:()=>l("all"),children:"Tous"}),A.map(j=>h.jsx("button",{className:`vitrine-filter-btn ${o===j?"active":""}`,onClick:()=>l(j),children:j},j))]}),M.length===0?h.jsxs("div",{className:"vitrine-empty",children:[h.jsx("p",{children:""}),h.jsx("p",{children:"Aucun article disponible pour le moment"})]}):h.jsx("div",{className:"vitrine-grid",children:M.map(j=>{const G=u===j.id,V=X(j),Q=w[j.id]||0;return h.jsxs("div",{className:`vitrine-card ${G?"expanded":""}`,onClick:()=>D(j.id),children:[!G&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"vitrine-card-photo",children:[V.length>0?h.jsx("img",{src:V[0],alt:j.description}):j.thumbnail?h.jsx("img",{src:j.thumbnail,alt:j.description,className:"vitrine-thumb-blur"}):h.jsx("div",{className:"vitrine-card-no-photo",children:""}),j.status==="sold"&&h.jsx("div",{className:"vitrine-sold-overlay",children:h.jsx("span",{children:"VENDU"})}),V.length>1&&h.jsxs("span",{className:"vitrine-photo-count",children:[" ",V.length]})]}),h.jsxs("div",{className:"vitrine-card-info",children:[h.jsx("p",{className:"vitrine-card-desc",children:j.description||"Sans description"}),h.jsxs("p",{className:"vitrine-card-price",children:[qg(j.price)," $"]}),j.category&&h.jsx("span",{className:"vitrine-card-category",children:j.category})]})]}),G&&h.jsxs("div",{className:"vitrine-detail",onClick:ne=>ne.stopPropagation(),children:[h.jsx("button",{className:"vitrine-detail-close",onClick:()=>p(null),children:" Fermer"}),V.length>0&&h.jsxs("div",{className:"vitrine-gallery",children:[h.jsxs("div",{className:"vitrine-gallery-main",children:[h.jsx("img",{src:V[Q],alt:j.description}),j.status==="sold"&&h.jsx("div",{className:"vitrine-sold-overlay",children:h.jsx("span",{children:"VENDU"})})]}),V.length>1&&h.jsx("div",{className:"vitrine-gallery-thumbs",children:V.map((ne,Z)=>h.jsx("div",{className:`vitrine-gallery-thumb ${Q===Z?"active":""}`,onClick:me=>{me.stopPropagation(),_(Ee=>({...Ee,[j.id]:Z}))},children:h.jsx("img",{src:ne,alt:`Photo ${Z+1}`})},Z))})]}),h.jsxs("div",{className:"vitrine-detail-info",children:[h.jsx("h3",{className:"vitrine-detail-title",children:j.description||"Sans titre"}),h.jsxs("p",{className:"vitrine-detail-price",children:[qg(j.price)," $"]}),h.jsxs("p",{className:"vitrine-detail-id",children:["#",j.uniqueId]}),j.category&&h.jsx("span",{className:"vitrine-card-category",children:j.category}),j.longDescription&&h.jsx("div",{className:"vitrine-detail-description",children:h.jsx("p",{children:j.longDescription})}),j.status==="consignment"&&j.consignmentStore&&h.jsxs("p",{className:"vitrine-detail-consignment",children:[" Disponible chez: ",j.consignmentStore]}),j.itemDate&&h.jsxs("p",{className:"vitrine-detail-date",children:[" Cr le ",j.itemDate]})]})]})]},j.id)})}),h.jsxs("footer",{className:"vitrine-footer",children:[h.jsx("p",{children:" L'Atelier du Loft  Jose Bourgouin"}),h.jsx("p",{className:"vitrine-footer-cta",children:"crivez-moi si quelque chose vous intresse!"}),h.jsx("a",{href:"mailto:Jose.Bourgouin@gmail.com",children:" Jose.Bourgouin@gmail.com"})]})]})}const si="stockduloft/tenants",pk="stockduloft/settings",Ey="stockduloft/payments",mk="lacroix.jeanmarc@gmail.com";function Ya(r){var e;return((e=r==null?void 0:r.email)==null?void 0:e.toLowerCase())===mk}async function jh(r){await it(ge(ve,`${pk}/subscription`),r)}async function gk(r,e){var l,u;const n={tenantId:r,amount:parseFloat(e.amount)||0,senderName:((l=e.senderName)==null?void 0:l.trim())||"",referenceNumber:((u=e.referenceNumber)==null?void 0:u.trim())||"",paymentDate:e.paymentDate||new Date().toISOString().split("T")[0],planType:e.planType||"monthly",action:e.action||"activation",recordedAt:Date.now()},i=ge(ve,Ey),o=zl(i);return await it(o,n),await it(ge(ve,`${si}/${r}/lastPayment`),n),{id:o.key,...n}}function vk(r){const e=ge(ve,Ey);return Er(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(u.recordedAt||0)-(l.recordedAt||0)),r(o)})}function _k(r){const e=ge(ve,si);return Er(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(u.createdAt||0)-(l.createdAt||0)),r(o)})}async function yk({businessName:r,ownerName:e,email:n,phone:i}){const o={businessName:r.trim(),ownerName:e.trim(),email:n.trim().toLowerCase(),phone:(i==null?void 0:i.trim())||"",plan:"free",planType:null,startDate:null,expiryDate:null,articlesCount:0,active:!0,notes:"",createdAt:Date.now()},l=ge(ve,si),u=zl(l);return await it(u,o),{id:u.key,...o}}async function Hl(r,e){const n=ge(ve,`${si}/${r}`);await it(n,{...e,updatedAt:Date.now()})}async function wk(r,e="monthly"){const n=new Date,i=n.toISOString().split("T")[0];let o;if(e==="yearly"){const u=new Date(n);u.setFullYear(u.getFullYear()+1),o=u.toISOString().split("T")[0]}else{const u=new Date(n);u.setMonth(u.getMonth()+1),o=u.toISOString().split("T")[0]}const l={plan:"artisan",planType:e,startDate:i,expiryDate:o};await Hl(r,l),await jh(l)}async function xk(r,e=null){const n=ge(ve,`${si}/${r}`),i=await Cn(n);if(!i.exists())return;const o=i.val(),l=e||o.planType||"monthly",u=o.expiryDate?new Date(o.expiryDate):new Date,p=new Date,m=u>p?u:p;let g;if(l==="yearly"){const _=new Date(m);_.setFullYear(_.getFullYear()+1),g=_.toISOString().split("T")[0]}else{const _=new Date(m);_.setMonth(_.getMonth()+1),g=_.toISOString().split("T")[0]}const w={plan:"artisan",planType:l,expiryDate:g};await Hl(r,w),await jh(w)}async function Sk(r){const e={plan:"free",planType:null,startDate:null,expiryDate:null};await Hl(r,e),await jh(e)}async function Ck(r){const e=ge(ve,`${si}/${r}`);await Sl(e)}function Gg(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function Ek(){const{user:r}=Wl(),[e,n]=k.useState([]),[i,o]=k.useState([]),[l,u]=k.useState(!1),[p,m]=k.useState({businessName:"",ownerName:"",email:"",phone:""}),[g,w]=k.useState(null),[_,y]=k.useState(null),[b,A]=k.useState(""),[M,D]=k.useState(!1),[X,j]=k.useState(null),[G,V]=k.useState({amount:"",senderName:"",referenceNumber:"",paymentDate:new Date().toISOString().split("T")[0]}),[Q,ne]=k.useState(!1);if(k.useEffect(()=>Ya(r)?_k(n):void 0,[r]),k.useEffect(()=>Ya(r)?vk(o):void 0,[r]),!Ya(r))return h.jsxs("div",{className:"page admin-page",children:[h.jsx("h2",{className:"page-title",children:" Accs refus"}),h.jsx("p",{style:{textAlign:"center",color:"var(--text-muted)"},children:"Cette page est rserve  l'administrateur."})]});const Z=e.length,me=e.filter(N=>N.plan==="artisan").length,Ee=e.filter(N=>N.plan==="free").length,Ie=e.reduce((N,$)=>$.plan!=="artisan"?N:$.planType==="yearly"?N+100/12:N+12.99,0),be=e.filter(N=>{if(N.plan!=="artisan"||!N.expiryDate)return!1;const $=Math.ceil((new Date(N.expiryDate)-new Date)/(1e3*60*60*24));return $<=7&&$>0}),We=e.filter(N=>N.plan!=="artisan"||!N.expiryDate?!1:new Date(N.expiryDate)<new Date),Ue=N=>i.filter($=>$.tenantId===N),$e=(N,$,S,K,ee)=>{const ie=ee==="yearly"?"100.00":"12.99";j({tenantId:N,tenantName:$,action:K,planType:ee}),V({amount:ie,senderName:S||"",referenceNumber:"",paymentDate:new Date().toISOString().split("T")[0]}),D(!0)},Ye=async()=>{if(!G.referenceNumber.trim()){alert("Le numro de rfrence Interac est obligatoire.");return}if(!G.amount){alert("Le montant est obligatoire.");return}ne(!0);try{const{tenantId:N,action:$,planType:S}=X;await gk(N,{...G,planType:S,action:$==="activate"?"activation":"renewal"}),$==="activate"?await wk(N,S):await xk(N,S),D(!1),j(null)}catch(N){console.error("Erreur:",N),alert("Erreur lors du traitement. Ressayez.")}finally{ne(!1)}},Je=async()=>{!p.businessName.trim()||!p.ownerName.trim()||(await yk(p),m({businessName:"",ownerName:"",email:"",phone:""}),u(!1))},Ce=async N=>{confirm("Rtrograder au plan gratuit? Le client perdra les fonctions premium.")&&await Sk(N)},H=async N=>{confirm(`Supprimer "${N.businessName}" ? Cette action est irrversible.`)&&(await Ck(N.id),w(null))},ae=async N=>{await Hl(N,{notes:b}),y(null)},q=N=>N?new Date(N).toLocaleDateString("fr-CA"):"",I=N=>N?Math.ceil((new Date(N)-new Date)/(1e3*60*60*24)):null,L=N=>N.plan==="free"?"plan-badge-free":N.expiryDate&&new Date(N.expiryDate)<new Date?"plan-badge-expired":"plan-badge-artisan",ce=N=>N.plan==="free"?" Dcouverte":N.expiryDate&&new Date(N.expiryDate)<new Date?" Expir":" Artisan";return h.jsxs("div",{className:"page admin-page",children:[h.jsx("h2",{className:"page-title",children:" Admin  Vitrine Artisan"}),h.jsxs("div",{className:"admin-stats",children:[h.jsxs("div",{className:"admin-stat-card",children:[h.jsx("span",{className:"admin-stat-number",children:Z}),h.jsx("span",{className:"admin-stat-label",children:"Artisans"})]}),h.jsxs("div",{className:"admin-stat-card stat-paying",children:[h.jsx("span",{className:"admin-stat-number",children:me}),h.jsx("span",{className:"admin-stat-label",children:"Payants"})]}),h.jsxs("div",{className:"admin-stat-card stat-free",children:[h.jsx("span",{className:"admin-stat-number",children:Ee}),h.jsx("span",{className:"admin-stat-label",children:"Gratuits"})]}),h.jsxs("div",{className:"admin-stat-card stat-revenue",children:[h.jsxs("span",{className:"admin-stat-number",children:[Gg(Ie)," $"]}),h.jsx("span",{className:"admin-stat-label",children:"Rev./mois"})]})]}),(be.length>0||We.length>0)&&h.jsxs("div",{className:"admin-alerts",children:[We.length>0&&h.jsxs("div",{className:"admin-alert admin-alert-danger",children:[" ",We.length," plan(s) expir(s)  action requise"]}),be.length>0&&h.jsxs("div",{className:"admin-alert admin-alert-warning",children:[" ",be.length," plan(s) expire(nt) dans 7 jours"]})]}),h.jsxs("div",{className:"admin-section",children:[h.jsxs("div",{className:"admin-section-header",children:[h.jsx("h3",{children:" Artisans"}),h.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{u(!l),m({businessName:"",ownerName:"",email:"",phone:""})},children:" Nouveau client"})]}),l&&h.jsxs("div",{className:"admin-add-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom de l'entreprise"}),h.jsx("input",{type:"text",value:p.businessName,onChange:N=>m($=>({...$,businessName:N.target.value})),className:"form-input",placeholder:"Ex: Les Crations de Marie",autoFocus:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom du propritaire"}),h.jsx("input",{type:"text",value:p.ownerName,onChange:N=>m($=>({...$,ownerName:N.target.value})),className:"form-input",placeholder:"Ex: Marie Tremblay"})]}),h.jsxs("div",{className:"store-form-row",children:[h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Courriel"}),h.jsx("input",{type:"email",value:p.email,onChange:N=>m($=>({...$,email:N.target.value})),className:"form-input",placeholder:"marie@gmail.com"})]}),h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Tlphone"}),h.jsx("input",{type:"tel",value:p.phone,onChange:N=>m($=>({...$,phone:N.target.value})),className:"form-input",placeholder:"819-555-1234"})]})]}),h.jsxs("div",{className:"store-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:Je,disabled:!p.businessName.trim()||!p.ownerName.trim(),children:" Ajouter"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>u(!1),children:"Annuler"})]})]}),e.length===0?h.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",textAlign:"center",padding:"20px 0"},children:"Aucun artisan inscrit"}):h.jsx("div",{className:"admin-tenants-list",children:e.map(N=>{const $=g===N.id,S=I(N.expiryDate),K=N.plan==="artisan"&&S!==null&&S<=0,ee=Ue(N.id);return h.jsxs("div",{className:`admin-tenant-card ${$?"expanded":""} ${K?"tenant-expired":""}`,onClick:()=>w($?null:N.id),children:[h.jsxs("div",{className:"admin-tenant-summary",children:[h.jsxs("div",{className:"admin-tenant-info",children:[h.jsx("span",{className:"admin-tenant-business",children:N.businessName}),h.jsx("span",{className:"admin-tenant-owner",children:N.ownerName})]}),h.jsx("span",{className:`admin-plan-badge ${L(N)}`,children:ce(N)})]}),$&&h.jsxs("div",{className:"admin-tenant-details",onClick:ie=>ie.stopPropagation(),children:[h.jsxs("div",{className:"admin-detail-grid",children:[h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Courriel"}),h.jsx("span",{className:"admin-detail-value",children:N.email||""})]}),h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Tlphone"}),h.jsx("span",{className:"admin-detail-value",children:N.phone||""})]}),h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Inscrit le"}),h.jsx("span",{className:"admin-detail-value",children:q(N.createdAt?new Date(N.createdAt).toISOString():null)})]}),N.plan==="artisan"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Type"}),h.jsx("span",{className:"admin-detail-value",children:N.planType==="yearly"?"Annuel (100$/an)":"Mensuel (12.99$/mois)"})]}),h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Dbut"}),h.jsx("span",{className:"admin-detail-value",children:q(N.startDate)})]}),h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Expiration"}),h.jsxs("span",{className:`admin-detail-value ${K?"text-danger":S<=7?"text-warning":""}`,children:[q(N.expiryDate),S!==null&&h.jsx("span",{className:"admin-days-badge",children:K?`Expir (${Math.abs(S)}j)`:`${S}j`})]})]})]})]}),ee.length>0&&h.jsxs("div",{className:"admin-payments-history",children:[h.jsx("p",{className:"admin-payments-title",children:" Historique des paiements"}),ee.map(ie=>h.jsxs("div",{className:"admin-payment-row",children:[h.jsxs("div",{className:"admin-payment-info",children:[h.jsxs("span",{className:"admin-payment-amount",children:[Gg(ie.amount)," $"]}),h.jsxs("span",{className:"admin-payment-type",children:[ie.action==="activation"?" Activation":" Renouvellement","  ",ie.planType==="yearly"?"Annuel":"Mensuel"]})]}),h.jsxs("div",{className:"admin-payment-details",children:[h.jsxs("span",{children:[" ",q(ie.paymentDate)]}),h.jsxs("span",{children:[" ",ie.senderName]}),h.jsxs("span",{children:[" ",ie.referenceNumber]})]})]},ie.id))]}),h.jsx("div",{className:"admin-notes",children:_===N.id?h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:" Notes"}),h.jsx("textarea",{value:b,onChange:ie=>A(ie.target.value),className:"form-input form-textarea",rows:"3",placeholder:"Notes sur ce client..."}),h.jsxs("div",{className:"store-edit-actions",style:{marginTop:"6px"},children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:()=>ae(N.id),children:""}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>y(null),children:"Annuler"})]})]}):h.jsxs("div",{className:"admin-notes-display",onClick:()=>{y(N.id),A(N.notes||"")},children:[h.jsx("span",{className:"admin-detail-label",children:" Notes"}),h.jsx("p",{children:N.notes||"Cliquez pour ajouter une note..."})]})}),h.jsxs("div",{className:"admin-tenant-actions",children:[N.plan==="free"?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-small btn-upgrade",onClick:()=>$e(N.id,N.businessName,N.ownerName,"activate","monthly"),children:" Activer mensuel"}),h.jsx("button",{className:"btn btn-small btn-upgrade-yearly",onClick:()=>$e(N.id,N.businessName,N.ownerName,"activate","yearly"),children:" Activer annuel"})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:()=>$e(N.id,N.businessName,N.ownerName,"renew",N.planType),children:" Renouveler"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>Ce(N.id),children:" Plan gratuit"})]}),h.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>H(N),children:" Supprimer"})]})]})]},N.id)})})]}),M&&X&&h.jsx("div",{className:"modal-overlay",onClick:()=>!Q&&D(!1),children:h.jsxs("div",{className:"modal-content",onClick:N=>N.stopPropagation(),style:{maxWidth:"440px"},children:[h.jsxs("h3",{children:[""," ",X.action==="activate"?"Activer":"Renouveler","  ",X.tenantName]}),h.jsx("div",{className:"upgrade-modal-plan-selected",children:X.planType==="yearly"?" Plan annuel  100,00 $ / an":" Plan mensuel  12,99 $ / mois"}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("p",{style:{fontSize:"0.9rem",color:"#333",marginBottom:"12px",fontWeight:600},children:"Informations du virement Interac reu :"}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Montant reu ($) *"}),h.jsx("input",{type:"number",value:G.amount,onChange:N=>V($=>({...$,amount:N.target.value})),className:"form-input",step:"0.01",min:"0",inputMode:"decimal",style:{color:"#333",backgroundColor:"#fff"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Envoy par *"}),h.jsx("input",{type:"text",value:G.senderName,onChange:N=>V($=>({...$,senderName:N.target.value})),className:"form-input",placeholder:"Nom sur le virement",style:{color:"#333",backgroundColor:"#fff"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Numro de rfrence Interac *"}),h.jsx("input",{type:"text",value:G.referenceNumber,onChange:N=>V($=>({...$,referenceNumber:N.target.value})),className:"form-input",placeholder:"Ex: C1A929q3ADx4",style:{color:"#333",backgroundColor:"#fff"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Date du paiement"}),h.jsx("input",{type:"date",value:G.paymentDate,onChange:N=>V($=>({...$,paymentDate:N.target.value})),className:"form-input",style:{color:"#333",backgroundColor:"#fff"}})]})]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{className:"btn btn-upgrade btn-full",onClick:Ye,disabled:Q,style:{flex:1},children:Q?"Traitement...":X.action==="activate"?" Confirmer et activer":" Confirmer et renouveler"}),h.jsx("button",{className:"btn btn-secondary",onClick:()=>D(!1),disabled:Q,style:{flex:0},children:"Annuler"})]})]})})]})}function Nk(){const{login:r}=Wl(),[e,n]=k.useState(""),[i,o]=k.useState(!1),l=async()=>{n(""),o(!0);try{await r()}catch{n("Erreur de connexion. Ressayez.")}finally{o(!1)}};return h.jsx("div",{className:"login-page",children:h.jsxs("div",{className:"login-card",children:[h.jsx("div",{className:"login-logo",children:""}),h.jsx("h1",{className:"login-title",children:"Stock du Loft"}),h.jsxs("p",{className:"login-subtitle",children:["Gestion d'inventaire pour",h.jsx("br",{}),"L'Atelier du Loft"]}),h.jsx("button",{onClick:l,className:"btn btn-primary btn-login",disabled:i,children:i?"Connexion...":" Se connecter avec Google"}),e&&h.jsx("p",{className:"error-text",children:e})]})})}function Ik(){var i;const{user:r,logout:e}=Wl();return ts().pathname==="/vitrine"?h.jsx(fk,{}):r?h.jsxs("div",{className:"app",children:[h.jsx("header",{className:"app-header",children:h.jsxs("div",{className:"header-content",children:[h.jsxs("h1",{className:"app-title",children:[h.jsx("span",{className:"title-icon",children:""}),"Stock du Loft"]}),h.jsxs("div",{className:"header-user",children:[h.jsx("span",{className:"user-name",children:(i=r.displayName)==null?void 0:i.split(" ")[0]}),h.jsx("button",{onClick:e,className:"btn-logout",title:"Dconnexion",children:""})]})]})}),h.jsx("main",{className:"app-main",children:h.jsxs(xx,{children:[h.jsx(Vr,{path:"/",element:h.jsx(ZT,{})}),h.jsx(Vr,{path:"/add",element:h.jsx(rk,{})}),h.jsx(Vr,{path:"/sale",element:h.jsx(sk,{})}),h.jsx(Vr,{path:"/about",element:h.jsx(ok,{})}),h.jsx(Vr,{path:"/admin",element:h.jsx(Ek,{})}),h.jsx(Vr,{path:"*",element:h.jsx(yx,{to:"/",replace:!0})})]})}),h.jsxs("nav",{className:"bottom-nav",children:[h.jsxs(Vi,{to:"/",end:!0,className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Inventaire"})]}),h.jsxs(Vi,{to:"/sale",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Vente"})]}),h.jsxs(Vi,{to:"/add",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Ajouter"})]}),h.jsxs(Vi,{to:"/about",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Info"})]}),Ya(r)&&h.jsxs(Vi,{to:"/admin",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Admin"})]})]})]}):h.jsx(Nk,{})}function Tk(){return h.jsx(LT,{children:h.jsx(Ik,{})})}R0.createRoot(document.getElementById("root")).render(h.jsx(Qg.StrictMode,{children:h.jsx(Px,{children:h.jsx(Tk,{})})}));
