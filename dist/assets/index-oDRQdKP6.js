function M0(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function av(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ju={exports:{}},no={},Zu={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function F0(){if(Tm)return Ie;Tm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function y(k){return k===null||typeof k!="object"?null:(k=_&&k[_]||k["@@iterator"],typeof k=="function"?k:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,A={};function D(k,L,_e){this.props=k,this.context=L,this.refs=A,this.updater=_e||I}D.prototype.isReactComponent={},D.prototype.setState=function(k,L){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,L,"setState")},D.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function J(){}J.prototype=D.prototype;function Q(k,L,_e){this.props=k,this.context=L,this.refs=A,this.updater=_e||I}var q=Q.prototype=new J;q.constructor=Q,j(q,D.prototype),q.isPureReactComponent=!0;var te=Array.isArray,ge=Object.prototype.hasOwnProperty,ve={current:null},ae={key:!0,ref:!0,__self:!0,__source:!0};function he(k,L,_e){var P,K={},N=null,z=null;if(L!=null)for(P in L.ref!==void 0&&(z=L.ref),L.key!==void 0&&(N=""+L.key),L)ge.call(L,P)&&!ae.hasOwnProperty(P)&&(K[P]=L[P]);var H=arguments.length-2;if(H===1)K.children=_e;else if(1<H){for(var Y=Array(H),ie=0;ie<H;ie++)Y[ie]=arguments[ie+2];K.children=Y}if(k&&k.defaultProps)for(P in H=k.defaultProps,H)K[P]===void 0&&(K[P]=H[P]);return{$$typeof:r,type:k,key:N,ref:z,props:K,_owner:ve.current}}function ye(k,L){return{$$typeof:r,type:k.type,key:L,ref:k.ref,props:k.props,_owner:k._owner}}function Ee(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function je(k){var L={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(_e){return L[_e]})}var W=/\/+/g;function Se(k,L){return typeof k=="object"&&k!==null&&k.key!=null?je(""+k.key):L.toString(36)}function ne(k,L,_e,P,K){var N=typeof k;(N==="undefined"||N==="boolean")&&(k=null);var z=!1;if(k===null)z=!0;else switch(N){case"string":case"number":z=!0;break;case"object":switch(k.$$typeof){case r:case e:z=!0}}if(z)return z=k,K=K(z),k=P===""?"."+Se(z,0):P,te(K)?(_e="",k!=null&&(_e=k.replace(W,"$&/")+"/"),ne(K,L,_e,"",function(ie){return ie})):K!=null&&(Ee(K)&&(K=ye(K,_e+(!K.key||z&&z.key===K.key?"":(""+K.key).replace(W,"$&/")+"/")+k)),L.push(K)),1;if(z=0,P=P===""?".":P+":",te(k))for(var H=0;H<k.length;H++){N=k[H];var Y=P+Se(N,H);z+=ne(N,L,_e,Y,K)}else if(Y=y(k),typeof Y=="function")for(k=Y.call(k),H=0;!(N=k.next()).done;)N=N.value,Y=P+Se(N,H++),z+=ne(N,L,_e,Y,K);else if(N==="object")throw L=String(k),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return z}function Ce(k,L,_e){if(k==null)return k;var P=[],K=0;return ne(k,P,"","",function(N){return L.call(_e,N,K++)}),P}function we(k){if(k._status===-1){var L=k._result;L=L(),L.then(function(_e){(k._status===0||k._status===-1)&&(k._status=1,k._result=_e)},function(_e){(k._status===0||k._status===-1)&&(k._status=2,k._result=_e)}),k._status===-1&&(k._status=0,k._result=L)}if(k._status===1)return k._result.default;throw k._result}var fe={current:null},U={transition:null},ee={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:U,ReactCurrentOwner:ve};function G(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:Ce,forEach:function(k,L,_e){Ce(k,function(){L.apply(this,arguments)},_e)},count:function(k){var L=0;return Ce(k,function(){L++}),L},toArray:function(k){return Ce(k,function(L){return L})||[]},only:function(k){if(!Ee(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ie.Component=D,Ie.Fragment=t,Ie.Profiler=o,Ie.PureComponent=Q,Ie.StrictMode=i,Ie.Suspense=m,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Ie.act=G,Ie.cloneElement=function(k,L,_e){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var P=j({},k.props),K=k.key,N=k.ref,z=k._owner;if(L!=null){if(L.ref!==void 0&&(N=L.ref,z=ve.current),L.key!==void 0&&(K=""+L.key),k.type&&k.type.defaultProps)var H=k.type.defaultProps;for(Y in L)ge.call(L,Y)&&!ae.hasOwnProperty(Y)&&(P[Y]=L[Y]===void 0&&H!==void 0?H[Y]:L[Y])}var Y=arguments.length-2;if(Y===1)P.children=_e;else if(1<Y){H=Array(Y);for(var ie=0;ie<Y;ie++)H[ie]=arguments[ie+2];P.children=H}return{$$typeof:r,type:k.type,key:K,ref:N,props:P,_owner:z}},Ie.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:l,_context:k},k.Consumer=k},Ie.createElement=he,Ie.createFactory=function(k){var L=he.bind(null,k);return L.type=k,L},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(k){return{$$typeof:f,render:k}},Ie.isValidElement=Ee,Ie.lazy=function(k){return{$$typeof:x,_payload:{_status:-1,_result:k},_init:we}},Ie.memo=function(k,L){return{$$typeof:g,type:k,compare:L===void 0?null:L}},Ie.startTransition=function(k){var L=U.transition;U.transition={};try{k()}finally{U.transition=L}},Ie.unstable_act=G,Ie.useCallback=function(k,L){return fe.current.useCallback(k,L)},Ie.useContext=function(k){return fe.current.useContext(k)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(k){return fe.current.useDeferredValue(k)},Ie.useEffect=function(k,L){return fe.current.useEffect(k,L)},Ie.useId=function(){return fe.current.useId()},Ie.useImperativeHandle=function(k,L,_e){return fe.current.useImperativeHandle(k,L,_e)},Ie.useInsertionEffect=function(k,L){return fe.current.useInsertionEffect(k,L)},Ie.useLayoutEffect=function(k,L){return fe.current.useLayoutEffect(k,L)},Ie.useMemo=function(k,L){return fe.current.useMemo(k,L)},Ie.useReducer=function(k,L,_e){return fe.current.useReducer(k,L,_e)},Ie.useRef=function(k){return fe.current.useRef(k)},Ie.useState=function(k){return fe.current.useState(k)},Ie.useSyncExternalStore=function(k,L,_e){return fe.current.useSyncExternalStore(k,L,_e)},Ie.useTransition=function(){return fe.current.useTransition()},Ie.version="18.3.1",Ie}var bm;function Kd(){return bm||(bm=1,Zu.exports=F0()),Zu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function U0(){if(Pm)return no;Pm=1;var r=Kd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,g){var x,_={},y=null,I=null;g!==void 0&&(y=""+g),m.key!==void 0&&(y=""+m.key),m.ref!==void 0&&(I=m.ref);for(x in m)i.call(m,x)&&!l.hasOwnProperty(x)&&(_[x]=m[x]);if(f&&f.defaultProps)for(x in m=f.defaultProps,m)_[x]===void 0&&(_[x]=m[x]);return{$$typeof:e,type:f,key:y,ref:I,props:_,_owner:o.current}}return no.Fragment=t,no.jsx=d,no.jsxs=d,no}var jm;function $0(){return jm||(jm=1,Ju.exports=U0()),Ju.exports}var c=$0(),C=Kd();const lv=av(C),z0=M0({__proto__:null,default:lv},[C]);var al={},ed={exports:{}},Mt={},td={exports:{}},nd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function B0(){return Rm||(Rm=1,(function(r){function e(U,ee){var G=U.length;U.push(ee);e:for(;0<G;){var k=G-1>>>1,L=U[k];if(0<o(L,ee))U[k]=ee,U[G]=L,G=k;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var ee=U[0],G=U.pop();if(G!==ee){U[0]=G;e:for(var k=0,L=U.length,_e=L>>>1;k<_e;){var P=2*(k+1)-1,K=U[P],N=P+1,z=U[N];if(0>o(K,G))N<L&&0>o(z,K)?(U[k]=z,U[N]=G,k=N):(U[k]=K,U[P]=G,k=P);else if(N<L&&0>o(z,G))U[k]=z,U[N]=G,k=N;else break e}}return ee}function o(U,ee){var G=U.sortIndex-ee.sortIndex;return G!==0?G:U.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var m=[],g=[],x=1,_=null,y=3,I=!1,j=!1,A=!1,D=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(U){for(var ee=t(g);ee!==null;){if(ee.callback===null)i(g);else if(ee.startTime<=U)i(g),ee.sortIndex=ee.expirationTime,e(m,ee);else break;ee=t(g)}}function te(U){if(A=!1,q(U),!j)if(t(m)!==null)j=!0,we(ge);else{var ee=t(g);ee!==null&&fe(te,ee.startTime-U)}}function ge(U,ee){j=!1,A&&(A=!1,J(he),he=-1),I=!0;var G=y;try{for(q(ee),_=t(m);_!==null&&(!(_.expirationTime>ee)||U&&!je());){var k=_.callback;if(typeof k=="function"){_.callback=null,y=_.priorityLevel;var L=k(_.expirationTime<=ee);ee=r.unstable_now(),typeof L=="function"?_.callback=L:_===t(m)&&i(m),q(ee)}else i(m);_=t(m)}if(_!==null)var _e=!0;else{var P=t(g);P!==null&&fe(te,P.startTime-ee),_e=!1}return _e}finally{_=null,y=G,I=!1}}var ve=!1,ae=null,he=-1,ye=5,Ee=-1;function je(){return!(r.unstable_now()-Ee<ye)}function W(){if(ae!==null){var U=r.unstable_now();Ee=U;var ee=!0;try{ee=ae(!0,U)}finally{ee?Se():(ve=!1,ae=null)}}else ve=!1}var Se;if(typeof Q=="function")Se=function(){Q(W)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Ce=ne.port2;ne.port1.onmessage=W,Se=function(){Ce.postMessage(null)}}else Se=function(){D(W,0)};function we(U){ae=U,ve||(ve=!0,Se())}function fe(U,ee){he=D(function(){U(r.unstable_now())},ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_continueExecution=function(){j||I||(j=!0,we(ge))},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(U){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var G=y;y=ee;try{return U()}finally{y=G}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(U,ee){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=y;y=U;try{return ee()}finally{y=G}},r.unstable_scheduleCallback=function(U,ee,G){var k=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?k+G:k):G=k,U){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=G+L,U={id:x++,callback:ee,priorityLevel:U,startTime:G,expirationTime:L,sortIndex:-1},G>k?(U.sortIndex=G,e(g,U),t(m)===null&&U===t(g)&&(A?(J(he),he=-1):A=!0,fe(te,G-k))):(U.sortIndex=L,e(m,U),j||I||(j=!0,we(ge))),U},r.unstable_shouldYield=je,r.unstable_wrapCallback=function(U){var ee=y;return function(){var G=y;y=ee;try{return U.apply(this,arguments)}finally{y=G}}}})(nd)),nd}var Am;function V0(){return Am||(Am=1,td.exports=B0()),td.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function W0(){if(Dm)return Mt;Dm=1;var r=Kd(),e=V0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},_={};function y(n){return m.call(_,n)?!0:m.call(x,n)?!1:g.test(n)?_[n]=!0:(x[n]=!0,!1)}function I(n,s,a,u){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j(n,s,a,u){if(s===null||typeof s>"u"||I(n,s,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function A(n,s,a,u,h,p,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=p,this.removeEmptyString=v}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){D[n]=new A(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];D[s]=new A(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){D[n]=new A(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){D[n]=new A(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){D[n]=new A(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){D[n]=new A(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){D[n]=new A(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){D[n]=new A(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){D[n]=new A(n,5,!1,n.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function Q(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(J,Q);D[s]=new A(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(J,Q);D[s]=new A(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(J,Q);D[s]=new A(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){D[n]=new A(n,1,!1,n.toLowerCase(),null,!1,!1)}),D.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){D[n]=new A(n,1,!1,n.toLowerCase(),null,!0,!0)});function q(n,s,a,u){var h=D.hasOwnProperty(s)?D[s]:null;(h!==null?h.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(j(s,a,h,u)&&(a=null),u||h===null?y(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(s=h.attributeName,u=h.attributeNamespace,a===null?n.removeAttribute(s):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,u?n.setAttributeNS(u,s,a):n.setAttribute(s,a))))}var te=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ge=Symbol.for("react.element"),ve=Symbol.for("react.portal"),ae=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),Ee=Symbol.for("react.provider"),je=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),U=Symbol.iterator;function ee(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var G=Object.assign,k;function L(n){if(k===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);k=s&&s[1]||""}return`
`+k+n}var _e=!1;function P(n,s){if(!n||_e)return"";_e=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(R){var u=R}Reflect.construct(n,[],s)}else{try{s.call()}catch(R){u=R}n.call(s.prototype)}else{try{throw Error()}catch(R){u=R}n()}}catch(R){if(R&&u&&typeof R.stack=="string"){for(var h=R.stack.split(`
`),p=u.stack.split(`
`),v=h.length-1,w=p.length-1;1<=v&&0<=w&&h[v]!==p[w];)w--;for(;1<=v&&0<=w;v--,w--)if(h[v]!==p[w]){if(v!==1||w!==1)do if(v--,w--,0>w||h[v]!==p[w]){var S=`
`+h[v].replace(" at new "," at ");return n.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",n.displayName)),S}while(1<=v&&0<=w);break}}}finally{_e=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?L(n):""}function K(n){switch(n.tag){case 5:return L(n.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return n=P(n.type,!1),n;case 11:return n=P(n.type.render,!1),n;case 1:return n=P(n.type,!0),n;default:return""}}function N(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ae:return"Fragment";case ve:return"Portal";case ye:return"Profiler";case he:return"StrictMode";case Se:return"Suspense";case ne:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case je:return(n.displayName||"Context")+".Consumer";case Ee:return(n._context.displayName||"Context")+".Provider";case W:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ce:return s=n.displayName||null,s!==null?s:N(n.type)||"Memo";case we:s=n._payload,n=n._init;try{return N(n(s))}catch{}}return null}function z(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(s);case 8:return s===he?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function H(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Y(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ie(n){var s=Y(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,p=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Me(n){n._valueTracker||(n._valueTracker=ie(n))}function Gt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=Y(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function kn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Fr(n,s){var a=s.checked;return G({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function fi(n,s){var a=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;a=H(s.value!=null?s.value:a),n._wrapperState={initialChecked:u,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function pi(n,s){s=s.checked,s!=null&&q(n,"checked",s,!1)}function mi(n,s){pi(n,s);var a=H(s.value),u=s.type;if(a!=null)u==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(u==="submit"||u==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?gs(n,s.type,a):s.hasOwnProperty("defaultValue")&&gs(n,s.type,H(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Tn(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function gs(n,s,a){(s!=="number"||kn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var bn=Array.isArray;function Et(n,s,a,u){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&u&&(n[a].defaultSelected=!0)}else{for(a=""+H(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,u&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function gi(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ur(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(bn(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:H(a)}}function Go(n,s){var a=H(s.value),u=H(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),u!=null&&(n.defaultValue=""+u)}function Ko(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Qo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vi(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Qo(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var _i,Ye=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,u,h){MSApp.execUnsafeLocalFunction(function(){return n(s,a,u,h)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(_i=_i||document.createElement("div"),_i.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=_i.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function $r(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yo=["Webkit","ms","Moz","O"];Object.keys(vs).forEach(function(n){Yo.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),vs[s]=vs[n]})});function Xo(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||vs.hasOwnProperty(n)&&vs[n]?(""+s).trim():s+"px"}function Jo(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var u=a.indexOf("--")===0,h=Xo(a,s[a],u);a==="float"&&(a="cssFloat"),u?n.setProperty(a,h):n[a]=h}}var O=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function X(n,s){if(s){if(O[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function qe(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ge=null;function jt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Re=null,$t=null,_n=null;function yi(n){if(n=zi(n)){if(typeof Re!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Na(s),Re(n.stateNode,n.type,s))}}function Zo(n){$t?_n?_n.push(n):_n=[n]:$t=n}function Zn(){if($t){var n=$t,s=_n;if(_n=$t=null,yi(n),s)for(n=0;n<s.length;n++)yi(s[n])}}function er(n,s){return n(s)}function tr(){}var be=!1;function Le(n,s,a){if(be)return n(s,a);be=!0;try{return er(n,s,a)}finally{be=!1,($t!==null||_n!==null)&&(tr(),Zn())}}function xi(n,s){var a=n.stateNode;if(a===null)return null;var u=Na(a);if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var gc=!1;if(f)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){gc=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{gc=!1}function Vy(n,s,a,u,h,p,v,w,S){var R=Array.prototype.slice.call(arguments,3);try{s.apply(a,R)}catch(F){this.onError(F)}}var Ni=!1,ea=null,ta=!1,vc=null,Wy={onError:function(n){Ni=!0,ea=n}};function Hy(n,s,a,u,h,p,v,w,S){Ni=!1,ea=null,Vy.apply(Wy,arguments)}function qy(n,s,a,u,h,p,v,w,S){if(Hy.apply(this,arguments),Ni){if(Ni){var R=ea;Ni=!1,ea=null}else throw Error(t(198));ta||(ta=!0,vc=R)}}function zr(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Yh(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Xh(n){if(zr(n)!==n)throw Error(t(188))}function Gy(n){var s=n.alternate;if(!s){if(s=zr(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,u=s;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){a=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return Xh(h),n;if(p===u)return Xh(h),s;p=p.sibling}throw Error(t(188))}if(a.return!==u.return)a=h,u=p;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,u=p;break}if(w===u){v=!0,u=h,a=p;break}w=w.sibling}if(!v){for(w=p.child;w;){if(w===a){v=!0,a=p,u=h;break}if(w===u){v=!0,u=p,a=h;break}w=w.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==u)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Jh(n){return n=Gy(n),n!==null?Zh(n):null}function Zh(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Zh(n);if(s!==null)return s;n=n.sibling}return null}var ef=e.unstable_scheduleCallback,tf=e.unstable_cancelCallback,Ky=e.unstable_shouldYield,Qy=e.unstable_requestPaint,st=e.unstable_now,Yy=e.unstable_getCurrentPriorityLevel,_c=e.unstable_ImmediatePriority,nf=e.unstable_UserBlockingPriority,na=e.unstable_NormalPriority,Xy=e.unstable_LowPriority,rf=e.unstable_IdlePriority,ra=null,yn=null;function Jy(n){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(ra,n,void 0,(n.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:tx,Zy=Math.log,ex=Math.LN2;function tx(n){return n>>>=0,n===0?32:31-(Zy(n)/ex|0)|0}var sa=64,ia=4194304;function Si(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function oa(n,s){var a=n.pendingLanes;if(a===0)return 0;var u=0,h=n.suspendedLanes,p=n.pingedLanes,v=a&268435455;if(v!==0){var w=v&~h;w!==0?u=Si(w):(p&=v,p!==0&&(u=Si(p)))}else v=a&~h,v!==0?u=Si(v):p!==0&&(u=Si(p));if(u===0)return 0;if(s!==0&&s!==u&&(s&h)===0&&(h=u&-u,p=s&-s,h>=p||h===16&&(p&4194240)!==0))return s;if((u&4)!==0&&(u|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=u;0<s;)a=31-sn(s),h=1<<a,u|=n[a],s&=~h;return u}function nx(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rx(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,h=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-sn(p),w=1<<v,S=h[v];S===-1?((w&a)===0||(w&u)!==0)&&(h[v]=nx(w,s)):S<=s&&(n.expiredLanes|=w),p&=~w}}function yc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function sf(){var n=sa;return sa<<=1,(sa&4194240)===0&&(sa=64),n}function xc(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Ci(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-sn(s),n[s]=a}function sx(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-sn(a),p=1<<h;s[h]=0,u[h]=-1,n[h]=-1,a&=~p}}function wc(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-sn(a),h=1<<u;h&s|n[u]&s&&(n[u]|=s),a&=~h}}var Fe=0;function of(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var af,Nc,lf,cf,uf,Sc=!1,aa=[],nr=null,rr=null,sr=null,Ei=new Map,Ii=new Map,ir=[],ix="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function df(n,s){switch(n){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Ei.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(s.pointerId)}}function ki(n,s,a,u,h,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},s!==null&&(s=zi(s),s!==null&&Nc(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function ox(n,s,a,u,h){switch(s){case"focusin":return nr=ki(nr,n,s,a,u,h),!0;case"dragenter":return rr=ki(rr,n,s,a,u,h),!0;case"mouseover":return sr=ki(sr,n,s,a,u,h),!0;case"pointerover":var p=h.pointerId;return Ei.set(p,ki(Ei.get(p)||null,n,s,a,u,h)),!0;case"gotpointercapture":return p=h.pointerId,Ii.set(p,ki(Ii.get(p)||null,n,s,a,u,h)),!0}return!1}function hf(n){var s=Br(n.target);if(s!==null){var a=zr(s);if(a!==null){if(s=a.tag,s===13){if(s=Yh(a),s!==null){n.blockedOn=s,uf(n.priority,function(){lf(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function la(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ec(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);Ge=u,a.target.dispatchEvent(u),Ge=null}else return s=zi(a),s!==null&&Nc(s),n.blockedOn=a,!1;s.shift()}return!0}function ff(n,s,a){la(n)&&a.delete(s)}function ax(){Sc=!1,nr!==null&&la(nr)&&(nr=null),rr!==null&&la(rr)&&(rr=null),sr!==null&&la(sr)&&(sr=null),Ei.forEach(ff),Ii.forEach(ff)}function Ti(n,s){n.blockedOn===s&&(n.blockedOn=null,Sc||(Sc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ax)))}function bi(n){function s(h){return Ti(h,n)}if(0<aa.length){Ti(aa[0],n);for(var a=1;a<aa.length;a++){var u=aa[a];u.blockedOn===n&&(u.blockedOn=null)}}for(nr!==null&&Ti(nr,n),rr!==null&&Ti(rr,n),sr!==null&&Ti(sr,n),Ei.forEach(s),Ii.forEach(s),a=0;a<ir.length;a++)u=ir[a],u.blockedOn===n&&(u.blockedOn=null);for(;0<ir.length&&(a=ir[0],a.blockedOn===null);)hf(a),a.blockedOn===null&&ir.shift()}var _s=te.ReactCurrentBatchConfig,ca=!0;function lx(n,s,a,u){var h=Fe,p=_s.transition;_s.transition=null;try{Fe=1,Cc(n,s,a,u)}finally{Fe=h,_s.transition=p}}function cx(n,s,a,u){var h=Fe,p=_s.transition;_s.transition=null;try{Fe=4,Cc(n,s,a,u)}finally{Fe=h,_s.transition=p}}function Cc(n,s,a,u){if(ca){var h=Ec(n,s,a,u);if(h===null)Bc(n,s,u,ua,a),df(n,u);else if(ox(h,n,s,a,u))u.stopPropagation();else if(df(n,u),s&4&&-1<ix.indexOf(n)){for(;h!==null;){var p=zi(h);if(p!==null&&af(p),p=Ec(n,s,a,u),p===null&&Bc(n,s,u,ua,a),p===h)break;h=p}h!==null&&u.stopPropagation()}else Bc(n,s,u,null,a)}}var ua=null;function Ec(n,s,a,u){if(ua=null,n=jt(u),n=Br(n),n!==null)if(s=zr(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Yh(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ua=n,null}function pf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yy()){case _c:return 1;case nf:return 4;case na:case Xy:return 16;case rf:return 536870912;default:return 16}default:return 16}}var or=null,Ic=null,da=null;function mf(){if(da)return da;var n,s=Ic,a=s.length,u,h="value"in or?or.value:or.textContent,p=h.length;for(n=0;n<a&&s[n]===h[n];n++);var v=a-n;for(u=1;u<=v&&s[a-u]===h[p-u];u++);return da=h.slice(n,1<u?1-u:void 0)}function ha(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function fa(){return!0}function gf(){return!1}function zt(n){function s(a,u,h,p,v){this._reactName=a,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?fa:gf,this.isPropagationStopped=gf,this}return G(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),s}var ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=zt(ys),Pi=G({},ys,{view:0,detail:0}),ux=zt(Pi),Tc,bc,ji,pa=G({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ji&&(ji&&n.type==="mousemove"?(Tc=n.screenX-ji.screenX,bc=n.screenY-ji.screenY):bc=Tc=0,ji=n),Tc)},movementY:function(n){return"movementY"in n?n.movementY:bc}}),vf=zt(pa),dx=G({},pa,{dataTransfer:0}),hx=zt(dx),fx=G({},Pi,{relatedTarget:0}),Pc=zt(fx),px=G({},ys,{animationName:0,elapsedTime:0,pseudoElement:0}),mx=zt(px),gx=G({},ys,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),vx=zt(gx),_x=G({},ys,{data:0}),_f=zt(_x),yx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nx(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=wx[n])?!!s[n]:!1}function jc(){return Nx}var Sx=G({},Pi,{key:function(n){if(n.key){var s=yx[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ha(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?xx[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jc,charCode:function(n){return n.type==="keypress"?ha(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ha(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Cx=zt(Sx),Ex=G({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yf=zt(Ex),Ix=G({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jc}),kx=zt(Ix),Tx=G({},ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),bx=zt(Tx),Px=G({},pa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),jx=zt(Px),Rx=[9,13,27,32],Rc=f&&"CompositionEvent"in window,Ri=null;f&&"documentMode"in document&&(Ri=document.documentMode);var Ax=f&&"TextEvent"in window&&!Ri,xf=f&&(!Rc||Ri&&8<Ri&&11>=Ri),wf=" ",Nf=!1;function Sf(n,s){switch(n){case"keyup":return Rx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xs=!1;function Dx(n,s){switch(n){case"compositionend":return Cf(s);case"keypress":return s.which!==32?null:(Nf=!0,wf);case"textInput":return n=s.data,n===wf&&Nf?null:n;default:return null}}function Ox(n,s){if(xs)return n==="compositionend"||!Rc&&Sf(n,s)?(n=mf(),da=Ic=or=null,xs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xf&&s.locale!=="ko"?null:s.data;default:return null}}var Lx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ef(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Lx[n.type]:s==="textarea"}function If(n,s,a,u){Zo(u),s=ya(s,"onChange"),0<s.length&&(a=new kc("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var Ai=null,Di=null;function Mx(n){Wf(n,0)}function ma(n){var s=Es(n);if(Gt(s))return n}function Fx(n,s){if(n==="change")return s}var kf=!1;if(f){var Ac;if(f){var Dc="oninput"in document;if(!Dc){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),Dc=typeof Tf.oninput=="function"}Ac=Dc}else Ac=!1;kf=Ac&&(!document.documentMode||9<document.documentMode)}function bf(){Ai&&(Ai.detachEvent("onpropertychange",Pf),Di=Ai=null)}function Pf(n){if(n.propertyName==="value"&&ma(Di)){var s=[];If(s,Di,n,jt(n)),Le(Mx,s)}}function Ux(n,s,a){n==="focusin"?(bf(),Ai=s,Di=a,Ai.attachEvent("onpropertychange",Pf)):n==="focusout"&&bf()}function $x(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ma(Di)}function zx(n,s){if(n==="click")return ma(s)}function Bx(n,s){if(n==="input"||n==="change")return ma(s)}function Vx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var on=typeof Object.is=="function"?Object.is:Vx;function Oi(n,s){if(on(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var h=a[u];if(!m.call(s,h)||!on(n[h],s[h]))return!1}return!0}function jf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rf(n,s){var a=jf(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jf(a)}}function Af(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Af(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Df(){for(var n=window,s=kn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=kn(n.document)}return s}function Oc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Wx(n){var s=Df(),a=n.focusedElem,u=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Af(a.ownerDocument.documentElement,a)){if(u!==null&&Oc(a)){if(s=u.start,n=u.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!n.extend&&p>u&&(h=u,u=p,p=h),h=Rf(a,p);var v=Rf(a,u);h&&v&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(h.node,h.offset),n.removeAllRanges(),p>u?(n.addRange(s),n.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Hx=f&&"documentMode"in document&&11>=document.documentMode,ws=null,Lc=null,Li=null,Mc=!1;function Of(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mc||ws==null||ws!==kn(u)||(u=ws,"selectionStart"in u&&Oc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Li&&Oi(Li,u)||(Li=u,u=ya(Lc,"onSelect"),0<u.length&&(s=new kc("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=ws)))}function ga(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ns={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},Fc={},Lf={};f&&(Lf=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function va(n){if(Fc[n])return Fc[n];if(!Ns[n])return n;var s=Ns[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Lf)return Fc[n]=s[a];return n}var Mf=va("animationend"),Ff=va("animationiteration"),Uf=va("animationstart"),$f=va("transitionend"),zf=new Map,Bf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(n,s){zf.set(n,s),l(s,[n])}for(var Uc=0;Uc<Bf.length;Uc++){var $c=Bf[Uc],qx=$c.toLowerCase(),Gx=$c[0].toUpperCase()+$c.slice(1);ar(qx,"on"+Gx)}ar(Mf,"onAnimationEnd"),ar(Ff,"onAnimationIteration"),ar(Uf,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar($f,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mi));function Vf(n,s,a){var u=n.type||"unknown-event";n.currentTarget=a,qy(u,s,void 0,n),n.currentTarget=null}function Wf(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],h=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var v=u.length-1;0<=v;v--){var w=u[v],S=w.instance,R=w.currentTarget;if(w=w.listener,S!==p&&h.isPropagationStopped())break e;Vf(h,w,R),p=S}else for(v=0;v<u.length;v++){if(w=u[v],S=w.instance,R=w.currentTarget,w=w.listener,S!==p&&h.isPropagationStopped())break e;Vf(h,w,R),p=S}}}if(ta)throw n=vc,ta=!1,vc=null,n}function We(n,s){var a=s[Kc];a===void 0&&(a=s[Kc]=new Set);var u=n+"__bubble";a.has(u)||(Hf(s,n,2,!1),a.add(u))}function zc(n,s,a){var u=0;s&&(u|=4),Hf(a,n,u,s)}var _a="_reactListening"+Math.random().toString(36).slice(2);function Fi(n){if(!n[_a]){n[_a]=!0,i.forEach(function(a){a!=="selectionchange"&&(Kx.has(a)||zc(a,!1,n),zc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[_a]||(s[_a]=!0,zc("selectionchange",!1,s))}}function Hf(n,s,a,u){switch(pf(s)){case 1:var h=lx;break;case 4:h=cx;break;default:h=Cc}a=h.bind(null,s,a,n),h=void 0,!gc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),u?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function Bc(n,s,a,u,h){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var w=u.stateNode.containerInfo;if(w===h||w.nodeType===8&&w.parentNode===h)break;if(v===4)for(v=u.return;v!==null;){var S=v.tag;if((S===3||S===4)&&(S=v.stateNode.containerInfo,S===h||S.nodeType===8&&S.parentNode===h))return;v=v.return}for(;w!==null;){if(v=Br(w),v===null)return;if(S=v.tag,S===5||S===6){u=p=v;continue e}w=w.parentNode}}u=u.return}Le(function(){var R=p,F=jt(a),$=[];e:{var M=zf.get(n);if(M!==void 0){var Z=kc,se=n;switch(n){case"keypress":if(ha(a)===0)break e;case"keydown":case"keyup":Z=Cx;break;case"focusin":se="focus",Z=Pc;break;case"focusout":se="blur",Z=Pc;break;case"beforeblur":case"afterblur":Z=Pc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=vf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=hx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=kx;break;case Mf:case Ff:case Uf:Z=mx;break;case $f:Z=bx;break;case"scroll":Z=ux;break;case"wheel":Z=jx;break;case"copy":case"cut":case"paste":Z=vx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=yf}var oe=(s&4)!==0,it=!oe&&n==="scroll",T=oe?M!==null?M+"Capture":null:M;oe=[];for(var E=R,b;E!==null;){b=E;var B=b.stateNode;if(b.tag===5&&B!==null&&(b=B,T!==null&&(B=xi(E,T),B!=null&&oe.push(Ui(E,B,b)))),it)break;E=E.return}0<oe.length&&(M=new Z(M,se,null,a,F),$.push({event:M,listeners:oe}))}}if((s&7)===0){e:{if(M=n==="mouseover"||n==="pointerover",Z=n==="mouseout"||n==="pointerout",M&&a!==Ge&&(se=a.relatedTarget||a.fromElement)&&(Br(se)||se[Pn]))break e;if((Z||M)&&(M=F.window===F?F:(M=F.ownerDocument)?M.defaultView||M.parentWindow:window,Z?(se=a.relatedTarget||a.toElement,Z=R,se=se?Br(se):null,se!==null&&(it=zr(se),se!==it||se.tag!==5&&se.tag!==6)&&(se=null)):(Z=null,se=R),Z!==se)){if(oe=vf,B="onMouseLeave",T="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(oe=yf,B="onPointerLeave",T="onPointerEnter",E="pointer"),it=Z==null?M:Es(Z),b=se==null?M:Es(se),M=new oe(B,E+"leave",Z,a,F),M.target=it,M.relatedTarget=b,B=null,Br(F)===R&&(oe=new oe(T,E+"enter",se,a,F),oe.target=b,oe.relatedTarget=it,B=oe),it=B,Z&&se)t:{for(oe=Z,T=se,E=0,b=oe;b;b=Ss(b))E++;for(b=0,B=T;B;B=Ss(B))b++;for(;0<E-b;)oe=Ss(oe),E--;for(;0<b-E;)T=Ss(T),b--;for(;E--;){if(oe===T||T!==null&&oe===T.alternate)break t;oe=Ss(oe),T=Ss(T)}oe=null}else oe=null;Z!==null&&qf($,M,Z,oe,!1),se!==null&&it!==null&&qf($,it,se,oe,!0)}}e:{if(M=R?Es(R):window,Z=M.nodeName&&M.nodeName.toLowerCase(),Z==="select"||Z==="input"&&M.type==="file")var le=Fx;else if(Ef(M))if(kf)le=Bx;else{le=$x;var pe=Ux}else(Z=M.nodeName)&&Z.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(le=zx);if(le&&(le=le(n,R))){If($,le,a,F);break e}pe&&pe(n,M,R),n==="focusout"&&(pe=M._wrapperState)&&pe.controlled&&M.type==="number"&&gs(M,"number",M.value)}switch(pe=R?Es(R):window,n){case"focusin":(Ef(pe)||pe.contentEditable==="true")&&(ws=pe,Lc=R,Li=null);break;case"focusout":Li=Lc=ws=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,Of($,a,F);break;case"selectionchange":if(Hx)break;case"keydown":case"keyup":Of($,a,F)}var me;if(Rc)e:{switch(n){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else xs?Sf(n,a)&&(Ne="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ne="onCompositionStart");Ne&&(xf&&a.locale!=="ko"&&(xs||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&xs&&(me=mf()):(or=F,Ic="value"in or?or.value:or.textContent,xs=!0)),pe=ya(R,Ne),0<pe.length&&(Ne=new _f(Ne,n,null,a,F),$.push({event:Ne,listeners:pe}),me?Ne.data=me:(me=Cf(a),me!==null&&(Ne.data=me)))),(me=Ax?Dx(n,a):Ox(n,a))&&(R=ya(R,"onBeforeInput"),0<R.length&&(F=new _f("onBeforeInput","beforeinput",null,a,F),$.push({event:F,listeners:R}),F.data=me))}Wf($,s)})}function Ui(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ya(n,s){for(var a=s+"Capture",u=[];n!==null;){var h=n,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=xi(n,a),p!=null&&u.unshift(Ui(n,p,h)),p=xi(n,s),p!=null&&u.push(Ui(n,p,h))),n=n.return}return u}function Ss(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function qf(n,s,a,u,h){for(var p=s._reactName,v=[];a!==null&&a!==u;){var w=a,S=w.alternate,R=w.stateNode;if(S!==null&&S===u)break;w.tag===5&&R!==null&&(w=R,h?(S=xi(a,p),S!=null&&v.unshift(Ui(a,S,w))):h||(S=xi(a,p),S!=null&&v.push(Ui(a,S,w)))),a=a.return}v.length!==0&&n.push({event:s,listeners:v})}var Qx=/\r\n?/g,Yx=/\u0000|\uFFFD/g;function Gf(n){return(typeof n=="string"?n:""+n).replace(Qx,`
`).replace(Yx,"")}function xa(n,s,a){if(s=Gf(s),Gf(n)!==s&&a)throw Error(t(425))}function wa(){}var Vc=null,Wc=null;function Hc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qc=typeof setTimeout=="function"?setTimeout:void 0,Xx=typeof clearTimeout=="function"?clearTimeout:void 0,Kf=typeof Promise=="function"?Promise:void 0,Jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Kf<"u"?function(n){return Kf.resolve(null).then(n).catch(Zx)}:qc;function Zx(n){setTimeout(function(){throw n})}function Gc(n,s){var a=s,u=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(u===0){n.removeChild(h),bi(s);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=h}while(a);bi(s)}function lr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Qf(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),xn="__reactFiber$"+Cs,$i="__reactProps$"+Cs,Pn="__reactContainer$"+Cs,Kc="__reactEvents$"+Cs,e0="__reactListeners$"+Cs,t0="__reactHandles$"+Cs;function Br(n){var s=n[xn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Pn]||a[xn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Qf(n);n!==null;){if(a=n[xn])return a;n=Qf(n)}return s}n=a,a=n.parentNode}return null}function zi(n){return n=n[xn]||n[Pn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Es(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Na(n){return n[$i]||null}var Qc=[],Is=-1;function cr(n){return{current:n}}function He(n){0>Is||(n.current=Qc[Is],Qc[Is]=null,Is--)}function ze(n,s){Is++,Qc[Is]=n.current,n.current=s}var ur={},xt=cr(ur),Rt=cr(!1),Vr=ur;function ks(n,s){var a=n.type.contextTypes;if(!a)return ur;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in a)h[p]=s[p];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=h),h}function At(n){return n=n.childContextTypes,n!=null}function Sa(){He(Rt),He(xt)}function Yf(n,s,a){if(xt.current!==ur)throw Error(t(168));ze(xt,s),ze(Rt,a)}function Xf(n,s,a){var u=n.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var h in u)if(!(h in s))throw Error(t(108,z(n)||"Unknown",h));return G({},a,u)}function Ca(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ur,Vr=xt.current,ze(xt,n),ze(Rt,Rt.current),!0}function Jf(n,s,a){var u=n.stateNode;if(!u)throw Error(t(169));a?(n=Xf(n,s,Vr),u.__reactInternalMemoizedMergedChildContext=n,He(Rt),He(xt),ze(xt,n)):He(Rt),ze(Rt,a)}var jn=null,Ea=!1,Yc=!1;function Zf(n){jn===null?jn=[n]:jn.push(n)}function n0(n){Ea=!0,Zf(n)}function dr(){if(!Yc&&jn!==null){Yc=!0;var n=0,s=Fe;try{var a=jn;for(Fe=1;n<a.length;n++){var u=a[n];do u=u(!0);while(u!==null)}jn=null,Ea=!1}catch(h){throw jn!==null&&(jn=jn.slice(n+1)),ef(_c,dr),h}finally{Fe=s,Yc=!1}}return null}var Ts=[],bs=0,Ia=null,ka=0,Kt=[],Qt=0,Wr=null,Rn=1,An="";function Hr(n,s){Ts[bs++]=ka,Ts[bs++]=Ia,Ia=n,ka=s}function ep(n,s,a){Kt[Qt++]=Rn,Kt[Qt++]=An,Kt[Qt++]=Wr,Wr=n;var u=Rn;n=An;var h=32-sn(u)-1;u&=~(1<<h),a+=1;var p=32-sn(s)+h;if(30<p){var v=h-h%5;p=(u&(1<<v)-1).toString(32),u>>=v,h-=v,Rn=1<<32-sn(s)+h|a<<h|u,An=p+n}else Rn=1<<p|a<<h|u,An=n}function Xc(n){n.return!==null&&(Hr(n,1),ep(n,1,0))}function Jc(n){for(;n===Ia;)Ia=Ts[--bs],Ts[bs]=null,ka=Ts[--bs],Ts[bs]=null;for(;n===Wr;)Wr=Kt[--Qt],Kt[Qt]=null,An=Kt[--Qt],Kt[Qt]=null,Rn=Kt[--Qt],Kt[Qt]=null}var Bt=null,Vt=null,Ke=!1,an=null;function tp(n,s){var a=Zt(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function np(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Bt=n,Vt=lr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Bt=n,Vt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Wr!==null?{id:Rn,overflow:An}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Zt(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Bt=n,Vt=null,!0):!1;default:return!1}}function Zc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function eu(n){if(Ke){var s=Vt;if(s){var a=s;if(!np(n,s)){if(Zc(n))throw Error(t(418));s=lr(a.nextSibling);var u=Bt;s&&np(n,s)?tp(u,a):(n.flags=n.flags&-4097|2,Ke=!1,Bt=n)}}else{if(Zc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ke=!1,Bt=n}}}function rp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Bt=n}function Ta(n){if(n!==Bt)return!1;if(!Ke)return rp(n),Ke=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Hc(n.type,n.memoizedProps)),s&&(s=Vt)){if(Zc(n))throw sp(),Error(t(418));for(;s;)tp(n,s),s=lr(s.nextSibling)}if(rp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Vt=lr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Vt=null}}else Vt=Bt?lr(n.stateNode.nextSibling):null;return!0}function sp(){for(var n=Vt;n;)n=lr(n.nextSibling)}function Ps(){Vt=Bt=null,Ke=!1}function tu(n){an===null?an=[n]:an.push(n)}var r0=te.ReactCurrentBatchConfig;function Bi(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var u=a.stateNode}if(!u)throw Error(t(147,n));var h=u,p=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(v){var w=h.refs;v===null?delete w[p]:w[p]=v},s._stringRef=p,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ba(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function ip(n){var s=n._init;return s(n._payload)}function op(n){function s(T,E){if(n){var b=T.deletions;b===null?(T.deletions=[E],T.flags|=16):b.push(E)}}function a(T,E){if(!n)return null;for(;E!==null;)s(T,E),E=E.sibling;return null}function u(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function h(T,E){return T=yr(T,E),T.index=0,T.sibling=null,T}function p(T,E,b){return T.index=b,n?(b=T.alternate,b!==null?(b=b.index,b<E?(T.flags|=2,E):b):(T.flags|=2,E)):(T.flags|=1048576,E)}function v(T){return n&&T.alternate===null&&(T.flags|=2),T}function w(T,E,b,B){return E===null||E.tag!==6?(E=qu(b,T.mode,B),E.return=T,E):(E=h(E,b),E.return=T,E)}function S(T,E,b,B){var le=b.type;return le===ae?F(T,E,b.props.children,B,b.key):E!==null&&(E.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===we&&ip(le)===E.type)?(B=h(E,b.props),B.ref=Bi(T,E,b),B.return=T,B):(B=Za(b.type,b.key,b.props,null,T.mode,B),B.ref=Bi(T,E,b),B.return=T,B)}function R(T,E,b,B){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=Gu(b,T.mode,B),E.return=T,E):(E=h(E,b.children||[]),E.return=T,E)}function F(T,E,b,B,le){return E===null||E.tag!==7?(E=Zr(b,T.mode,B,le),E.return=T,E):(E=h(E,b),E.return=T,E)}function $(T,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=qu(""+E,T.mode,b),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ge:return b=Za(E.type,E.key,E.props,null,T.mode,b),b.ref=Bi(T,null,E),b.return=T,b;case ve:return E=Gu(E,T.mode,b),E.return=T,E;case we:var B=E._init;return $(T,B(E._payload),b)}if(bn(E)||ee(E))return E=Zr(E,T.mode,b,null),E.return=T,E;ba(T,E)}return null}function M(T,E,b,B){var le=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return le!==null?null:w(T,E,""+b,B);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ge:return b.key===le?S(T,E,b,B):null;case ve:return b.key===le?R(T,E,b,B):null;case we:return le=b._init,M(T,E,le(b._payload),B)}if(bn(b)||ee(b))return le!==null?null:F(T,E,b,B,null);ba(T,b)}return null}function Z(T,E,b,B,le){if(typeof B=="string"&&B!==""||typeof B=="number")return T=T.get(b)||null,w(E,T,""+B,le);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ge:return T=T.get(B.key===null?b:B.key)||null,S(E,T,B,le);case ve:return T=T.get(B.key===null?b:B.key)||null,R(E,T,B,le);case we:var pe=B._init;return Z(T,E,b,pe(B._payload),le)}if(bn(B)||ee(B))return T=T.get(b)||null,F(E,T,B,le,null);ba(E,B)}return null}function se(T,E,b,B){for(var le=null,pe=null,me=E,Ne=E=0,ft=null;me!==null&&Ne<b.length;Ne++){me.index>Ne?(ft=me,me=null):ft=me.sibling;var De=M(T,me,b[Ne],B);if(De===null){me===null&&(me=ft);break}n&&me&&De.alternate===null&&s(T,me),E=p(De,E,Ne),pe===null?le=De:pe.sibling=De,pe=De,me=ft}if(Ne===b.length)return a(T,me),Ke&&Hr(T,Ne),le;if(me===null){for(;Ne<b.length;Ne++)me=$(T,b[Ne],B),me!==null&&(E=p(me,E,Ne),pe===null?le=me:pe.sibling=me,pe=me);return Ke&&Hr(T,Ne),le}for(me=u(T,me);Ne<b.length;Ne++)ft=Z(me,T,Ne,b[Ne],B),ft!==null&&(n&&ft.alternate!==null&&me.delete(ft.key===null?Ne:ft.key),E=p(ft,E,Ne),pe===null?le=ft:pe.sibling=ft,pe=ft);return n&&me.forEach(function(xr){return s(T,xr)}),Ke&&Hr(T,Ne),le}function oe(T,E,b,B){var le=ee(b);if(typeof le!="function")throw Error(t(150));if(b=le.call(b),b==null)throw Error(t(151));for(var pe=le=null,me=E,Ne=E=0,ft=null,De=b.next();me!==null&&!De.done;Ne++,De=b.next()){me.index>Ne?(ft=me,me=null):ft=me.sibling;var xr=M(T,me,De.value,B);if(xr===null){me===null&&(me=ft);break}n&&me&&xr.alternate===null&&s(T,me),E=p(xr,E,Ne),pe===null?le=xr:pe.sibling=xr,pe=xr,me=ft}if(De.done)return a(T,me),Ke&&Hr(T,Ne),le;if(me===null){for(;!De.done;Ne++,De=b.next())De=$(T,De.value,B),De!==null&&(E=p(De,E,Ne),pe===null?le=De:pe.sibling=De,pe=De);return Ke&&Hr(T,Ne),le}for(me=u(T,me);!De.done;Ne++,De=b.next())De=Z(me,T,Ne,De.value,B),De!==null&&(n&&De.alternate!==null&&me.delete(De.key===null?Ne:De.key),E=p(De,E,Ne),pe===null?le=De:pe.sibling=De,pe=De);return n&&me.forEach(function(L0){return s(T,L0)}),Ke&&Hr(T,Ne),le}function it(T,E,b,B){if(typeof b=="object"&&b!==null&&b.type===ae&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ge:e:{for(var le=b.key,pe=E;pe!==null;){if(pe.key===le){if(le=b.type,le===ae){if(pe.tag===7){a(T,pe.sibling),E=h(pe,b.props.children),E.return=T,T=E;break e}}else if(pe.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===we&&ip(le)===pe.type){a(T,pe.sibling),E=h(pe,b.props),E.ref=Bi(T,pe,b),E.return=T,T=E;break e}a(T,pe);break}else s(T,pe);pe=pe.sibling}b.type===ae?(E=Zr(b.props.children,T.mode,B,b.key),E.return=T,T=E):(B=Za(b.type,b.key,b.props,null,T.mode,B),B.ref=Bi(T,E,b),B.return=T,T=B)}return v(T);case ve:e:{for(pe=b.key;E!==null;){if(E.key===pe)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){a(T,E.sibling),E=h(E,b.children||[]),E.return=T,T=E;break e}else{a(T,E);break}else s(T,E);E=E.sibling}E=Gu(b,T.mode,B),E.return=T,T=E}return v(T);case we:return pe=b._init,it(T,E,pe(b._payload),B)}if(bn(b))return se(T,E,b,B);if(ee(b))return oe(T,E,b,B);ba(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(a(T,E.sibling),E=h(E,b),E.return=T,T=E):(a(T,E),E=qu(b,T.mode,B),E.return=T,T=E),v(T)):a(T,E)}return it}var js=op(!0),ap=op(!1),Pa=cr(null),ja=null,Rs=null,nu=null;function ru(){nu=Rs=ja=null}function su(n){var s=Pa.current;He(Pa),n._currentValue=s}function iu(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function As(n,s){ja=n,nu=Rs=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Dt=!0),n.firstContext=null)}function Yt(n){var s=n._currentValue;if(nu!==n)if(n={context:n,memoizedValue:s,next:null},Rs===null){if(ja===null)throw Error(t(308));Rs=n,ja.dependencies={lanes:0,firstContext:n}}else Rs=Rs.next=n;return s}var qr=null;function ou(n){qr===null?qr=[n]:qr.push(n)}function lp(n,s,a,u){var h=s.interleaved;return h===null?(a.next=a,ou(s)):(a.next=h.next,h.next=a),s.interleaved=a,Dn(n,u)}function Dn(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var hr=!1;function au(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function On(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function fr(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ae&2)!==0){var h=u.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s,Dn(n,a)}return h=u.interleaved,h===null?(s.next=s,ou(u)):(s.next=h.next,h.next=s),u.interleaved=s,Dn(n,a)}function Ra(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,wc(n,a)}}function up(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?h=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?h=p=s:p=p.next=s}else h=p=s;a={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Aa(n,s,a,u){var h=n.updateQueue;hr=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var S=w,R=S.next;S.next=null,v===null?p=R:v.next=R,v=S;var F=n.alternate;F!==null&&(F=F.updateQueue,w=F.lastBaseUpdate,w!==v&&(w===null?F.firstBaseUpdate=R:w.next=R,F.lastBaseUpdate=S))}if(p!==null){var $=h.baseState;v=0,F=R=S=null,w=p;do{var M=w.lane,Z=w.eventTime;if((u&M)===M){F!==null&&(F=F.next={eventTime:Z,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var se=n,oe=w;switch(M=s,Z=a,oe.tag){case 1:if(se=oe.payload,typeof se=="function"){$=se.call(Z,$,M);break e}$=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=oe.payload,M=typeof se=="function"?se.call(Z,$,M):se,M==null)break e;$=G({},$,M);break e;case 2:hr=!0}}w.callback!==null&&w.lane!==0&&(n.flags|=64,M=h.effects,M===null?h.effects=[w]:M.push(w))}else Z={eventTime:Z,lane:M,tag:w.tag,payload:w.payload,callback:w.callback,next:null},F===null?(R=F=Z,S=$):F=F.next=Z,v|=M;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;M=w,w=M.next,M.next=null,h.lastBaseUpdate=M,h.shared.pending=null}}while(!0);if(F===null&&(S=$),h.baseState=S,h.firstBaseUpdate=R,h.lastBaseUpdate=F,s=h.shared.interleaved,s!==null){h=s;do v|=h.lane,h=h.next;while(h!==s)}else p===null&&(h.shared.lanes=0);Qr|=v,n.lanes=v,n.memoizedState=$}}function dp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var u=n[s],h=u.callback;if(h!==null){if(u.callback=null,u=a,typeof h!="function")throw Error(t(191,h));h.call(u)}}}var Vi={},wn=cr(Vi),Wi=cr(Vi),Hi=cr(Vi);function Gr(n){if(n===Vi)throw Error(t(174));return n}function lu(n,s){switch(ze(Hi,s),ze(Wi,n),ze(wn,Vi),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vi(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=vi(s,n)}He(wn),ze(wn,s)}function Ds(){He(wn),He(Wi),He(Hi)}function hp(n){Gr(Hi.current);var s=Gr(wn.current),a=vi(s,n.type);s!==a&&(ze(Wi,n),ze(wn,a))}function cu(n){Wi.current===n&&(He(wn),He(Wi))}var Xe=cr(0);function Da(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var uu=[];function du(){for(var n=0;n<uu.length;n++)uu[n]._workInProgressVersionPrimary=null;uu.length=0}var Oa=te.ReactCurrentDispatcher,hu=te.ReactCurrentBatchConfig,Kr=0,Je=null,at=null,dt=null,La=!1,qi=!1,Gi=0,s0=0;function wt(){throw Error(t(321))}function fu(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!on(n[a],s[a]))return!1;return!0}function pu(n,s,a,u,h,p){if(Kr=p,Je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Oa.current=n===null||n.memoizedState===null?l0:c0,n=a(u,h),qi){p=0;do{if(qi=!1,Gi=0,25<=p)throw Error(t(301));p+=1,dt=at=null,s.updateQueue=null,Oa.current=u0,n=a(u,h)}while(qi)}if(Oa.current=Ua,s=at!==null&&at.next!==null,Kr=0,dt=at=Je=null,La=!1,s)throw Error(t(300));return n}function mu(){var n=Gi!==0;return Gi=0,n}function Nn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Je.memoizedState=dt=n:dt=dt.next=n,dt}function Xt(){if(at===null){var n=Je.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var s=dt===null?Je.memoizedState:dt.next;if(s!==null)dt=s,at=n;else{if(n===null)throw Error(t(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},dt===null?Je.memoizedState=dt=n:dt=dt.next=n}return dt}function Ki(n,s){return typeof s=="function"?s(n):s}function gu(n){var s=Xt(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var u=at,h=u.baseQueue,p=a.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}u.baseQueue=h=p,a.pending=null}if(h!==null){p=h.next,u=u.baseState;var w=v=null,S=null,R=p;do{var F=R.lane;if((Kr&F)===F)S!==null&&(S=S.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),u=R.hasEagerState?R.eagerState:n(u,R.action);else{var $={lane:F,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};S===null?(w=S=$,v=u):S=S.next=$,Je.lanes|=F,Qr|=F}R=R.next}while(R!==null&&R!==p);S===null?v=u:S.next=w,on(u,s.memoizedState)||(Dt=!0),s.memoizedState=u,s.baseState=v,s.baseQueue=S,a.lastRenderedState=u}if(n=a.interleaved,n!==null){h=n;do p=h.lane,Je.lanes|=p,Qr|=p,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function vu(n){var s=Xt(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var u=a.dispatch,h=a.pending,p=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do p=n(p,v.action),v=v.next;while(v!==h);on(p,s.memoizedState)||(Dt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,u]}function fp(){}function pp(n,s){var a=Je,u=Xt(),h=s(),p=!on(u.memoizedState,h);if(p&&(u.memoizedState=h,Dt=!0),u=u.queue,_u(vp.bind(null,a,u,n),[n]),u.getSnapshot!==s||p||dt!==null&&dt.memoizedState.tag&1){if(a.flags|=2048,Qi(9,gp.bind(null,a,u,h,s),void 0,null),ht===null)throw Error(t(349));(Kr&30)!==0||mp(a,s,h)}return h}function mp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Je.updateQueue,s===null?(s={lastEffect:null,stores:null},Je.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function gp(n,s,a,u){s.value=a,s.getSnapshot=u,_p(s)&&yp(n)}function vp(n,s,a){return a(function(){_p(s)&&yp(n)})}function _p(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!on(n,a)}catch{return!0}}function yp(n){var s=Dn(n,1);s!==null&&dn(s,n,1,-1)}function xp(n){var s=Nn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:n},s.queue=n,n=n.dispatch=a0.bind(null,Je,n),[s.memoizedState,n]}function Qi(n,s,a,u){return n={tag:n,create:s,destroy:a,deps:u,next:null},s=Je.updateQueue,s===null?(s={lastEffect:null,stores:null},Je.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n)),n}function wp(){return Xt().memoizedState}function Ma(n,s,a,u){var h=Nn();Je.flags|=n,h.memoizedState=Qi(1|s,a,void 0,u===void 0?null:u)}function Fa(n,s,a,u){var h=Xt();u=u===void 0?null:u;var p=void 0;if(at!==null){var v=at.memoizedState;if(p=v.destroy,u!==null&&fu(u,v.deps)){h.memoizedState=Qi(s,a,p,u);return}}Je.flags|=n,h.memoizedState=Qi(1|s,a,p,u)}function Np(n,s){return Ma(8390656,8,n,s)}function _u(n,s){return Fa(2048,8,n,s)}function Sp(n,s){return Fa(4,2,n,s)}function Cp(n,s){return Fa(4,4,n,s)}function Ep(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ip(n,s,a){return a=a!=null?a.concat([n]):null,Fa(4,4,Ep.bind(null,s,n),a)}function yu(){}function kp(n,s){var a=Xt();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&fu(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function Tp(n,s){var a=Xt();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&fu(s,u[1])?u[0]:(n=n(),a.memoizedState=[n,s],n)}function bp(n,s,a){return(Kr&21)===0?(n.baseState&&(n.baseState=!1,Dt=!0),n.memoizedState=a):(on(a,s)||(a=sf(),Je.lanes|=a,Qr|=a,n.baseState=!0),s)}function i0(n,s){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var u=hu.transition;hu.transition={};try{n(!1),s()}finally{Fe=a,hu.transition=u}}function Pp(){return Xt().memoizedState}function o0(n,s,a){var u=vr(n);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},jp(n))Rp(s,a);else if(a=lp(n,s,a,u),a!==null){var h=kt();dn(a,n,u,h),Ap(a,s,u)}}function a0(n,s,a){var u=vr(n),h={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(jp(n))Rp(s,h);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,w=p(v,a);if(h.hasEagerState=!0,h.eagerState=w,on(w,v)){var S=s.interleaved;S===null?(h.next=h,ou(s)):(h.next=S.next,S.next=h),s.interleaved=h;return}}catch{}finally{}a=lp(n,s,h,u),a!==null&&(h=kt(),dn(a,n,u,h),Ap(a,s,u))}}function jp(n){var s=n.alternate;return n===Je||s!==null&&s===Je}function Rp(n,s){qi=La=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Ap(n,s,a){if((a&4194240)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,wc(n,a)}}var Ua={readContext:Yt,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},l0={readContext:Yt,useCallback:function(n,s){return Nn().memoizedState=[n,s===void 0?null:s],n},useContext:Yt,useEffect:Np,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Ma(4194308,4,Ep.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Ma(4194308,4,n,s)},useInsertionEffect:function(n,s){return Ma(4,2,n,s)},useMemo:function(n,s){var a=Nn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var u=Nn();return s=a!==void 0?a(s):s,u.memoizedState=u.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},u.queue=n,n=n.dispatch=o0.bind(null,Je,n),[u.memoizedState,n]},useRef:function(n){var s=Nn();return n={current:n},s.memoizedState=n},useState:xp,useDebugValue:yu,useDeferredValue:function(n){return Nn().memoizedState=n},useTransition:function(){var n=xp(!1),s=n[0];return n=i0.bind(null,n[1]),Nn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var u=Je,h=Nn();if(Ke){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),ht===null)throw Error(t(349));(Kr&30)!==0||mp(u,s,a)}h.memoizedState=a;var p={value:a,getSnapshot:s};return h.queue=p,Np(vp.bind(null,u,p,n),[n]),u.flags|=2048,Qi(9,gp.bind(null,u,p,a,s),void 0,null),a},useId:function(){var n=Nn(),s=ht.identifierPrefix;if(Ke){var a=An,u=Rn;a=(u&~(1<<32-sn(u)-1)).toString(32)+a,s=":"+s+"R"+a,a=Gi++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=s0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},c0={readContext:Yt,useCallback:kp,useContext:Yt,useEffect:_u,useImperativeHandle:Ip,useInsertionEffect:Sp,useLayoutEffect:Cp,useMemo:Tp,useReducer:gu,useRef:wp,useState:function(){return gu(Ki)},useDebugValue:yu,useDeferredValue:function(n){var s=Xt();return bp(s,at.memoizedState,n)},useTransition:function(){var n=gu(Ki)[0],s=Xt().memoizedState;return[n,s]},useMutableSource:fp,useSyncExternalStore:pp,useId:Pp,unstable_isNewReconciler:!1},u0={readContext:Yt,useCallback:kp,useContext:Yt,useEffect:_u,useImperativeHandle:Ip,useInsertionEffect:Sp,useLayoutEffect:Cp,useMemo:Tp,useReducer:vu,useRef:wp,useState:function(){return vu(Ki)},useDebugValue:yu,useDeferredValue:function(n){var s=Xt();return at===null?s.memoizedState=n:bp(s,at.memoizedState,n)},useTransition:function(){var n=vu(Ki)[0],s=Xt().memoizedState;return[n,s]},useMutableSource:fp,useSyncExternalStore:pp,useId:Pp,unstable_isNewReconciler:!1};function ln(n,s){if(n&&n.defaultProps){s=G({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function xu(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:G({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var $a={isMounted:function(n){return(n=n._reactInternals)?zr(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var u=kt(),h=vr(n),p=On(u,h);p.payload=s,a!=null&&(p.callback=a),s=fr(n,p,h),s!==null&&(dn(s,n,h,u),Ra(s,n,h))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=kt(),h=vr(n),p=On(u,h);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=fr(n,p,h),s!==null&&(dn(s,n,h,u),Ra(s,n,h))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=kt(),u=vr(n),h=On(a,u);h.tag=2,s!=null&&(h.callback=s),s=fr(n,h,u),s!==null&&(dn(s,n,u,a),Ra(s,n,u))}};function Dp(n,s,a,u,h,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):s.prototype&&s.prototype.isPureReactComponent?!Oi(a,u)||!Oi(h,p):!0}function Op(n,s,a){var u=!1,h=ur,p=s.contextType;return typeof p=="object"&&p!==null?p=Yt(p):(h=At(s)?Vr:xt.current,u=s.contextTypes,p=(u=u!=null)?ks(n,h):ur),s=new s(a,p),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=$a,n.stateNode=s,s._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=p),s}function Lp(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&$a.enqueueReplaceState(s,s.state,null)}function wu(n,s,a,u){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},au(n);var p=s.contextType;typeof p=="object"&&p!==null?h.context=Yt(p):(p=At(s)?Vr:xt.current,h.context=ks(n,p)),h.state=n.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(xu(n,s,p,a),h.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&$a.enqueueReplaceState(h,h.state,null),Aa(n,a,h,u),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function Os(n,s){try{var a="",u=s;do a+=K(u),u=u.return;while(u);var h=a}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:s,stack:h,digest:null}}function Nu(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Su(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var d0=typeof WeakMap=="function"?WeakMap:Map;function Mp(n,s,a){a=On(-1,a),a.tag=3,a.payload={element:null};var u=s.value;return a.callback=function(){Ga||(Ga=!0,Fu=u),Su(n,s)},a}function Fp(n,s,a){a=On(-1,a),a.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var h=s.value;a.payload=function(){return u(h)},a.callback=function(){Su(n,s)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Su(n,s),typeof u!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function Up(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new d0;var h=new Set;u.set(s,h)}else h=u.get(s),h===void 0&&(h=new Set,u.set(s,h));h.has(a)||(h.add(a),n=E0.bind(null,n,s,a),s.then(n,n))}function $p(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function zp(n,s,a,u,h){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=On(-1,1),s.tag=2,fr(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var h0=te.ReactCurrentOwner,Dt=!1;function It(n,s,a,u){s.child=n===null?ap(s,null,a,u):js(s,n.child,a,u)}function Bp(n,s,a,u,h){a=a.render;var p=s.ref;return As(s,h),u=pu(n,s,a,u,p,h),a=mu(),n!==null&&!Dt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~h,Ln(n,s,h)):(Ke&&a&&Xc(s),s.flags|=1,It(n,s,u,h),s.child)}function Vp(n,s,a,u,h){if(n===null){var p=a.type;return typeof p=="function"&&!Hu(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,Wp(n,s,p,u,h)):(n=Za(a.type,null,u,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,(n.lanes&h)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:Oi,a(v,u)&&n.ref===s.ref)return Ln(n,s,h)}return s.flags|=1,n=yr(p,u),n.ref=s.ref,n.return=s,s.child=n}function Wp(n,s,a,u,h){if(n!==null){var p=n.memoizedProps;if(Oi(p,u)&&n.ref===s.ref)if(Dt=!1,s.pendingProps=u=p,(n.lanes&h)!==0)(n.flags&131072)!==0&&(Dt=!0);else return s.lanes=n.lanes,Ln(n,s,h)}return Cu(n,s,a,u,h)}function Hp(n,s,a){var u=s.pendingProps,h=u.children,p=n!==null?n.memoizedState:null;if(u.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Ms,Wt),Wt|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,ze(Ms,Wt),Wt|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:a,ze(Ms,Wt),Wt|=u}else p!==null?(u=p.baseLanes|a,s.memoizedState=null):u=a,ze(Ms,Wt),Wt|=u;return It(n,s,h,a),s.child}function qp(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Cu(n,s,a,u,h){var p=At(a)?Vr:xt.current;return p=ks(s,p),As(s,h),a=pu(n,s,a,u,p,h),u=mu(),n!==null&&!Dt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~h,Ln(n,s,h)):(Ke&&u&&Xc(s),s.flags|=1,It(n,s,a,h),s.child)}function Gp(n,s,a,u,h){if(At(a)){var p=!0;Ca(s)}else p=!1;if(As(s,h),s.stateNode===null)Ba(n,s),Op(s,a,u),wu(s,a,u,h),u=!0;else if(n===null){var v=s.stateNode,w=s.memoizedProps;v.props=w;var S=v.context,R=a.contextType;typeof R=="object"&&R!==null?R=Yt(R):(R=At(a)?Vr:xt.current,R=ks(s,R));var F=a.getDerivedStateFromProps,$=typeof F=="function"||typeof v.getSnapshotBeforeUpdate=="function";$||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==u||S!==R)&&Lp(s,v,u,R),hr=!1;var M=s.memoizedState;v.state=M,Aa(s,u,v,h),S=s.memoizedState,w!==u||M!==S||Rt.current||hr?(typeof F=="function"&&(xu(s,a,F,u),S=s.memoizedState),(w=hr||Dp(s,a,w,u,M,S,R))?($||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=S),v.props=u,v.state=S,v.context=R,u=w):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,cp(n,s),w=s.memoizedProps,R=s.type===s.elementType?w:ln(s.type,w),v.props=R,$=s.pendingProps,M=v.context,S=a.contextType,typeof S=="object"&&S!==null?S=Yt(S):(S=At(a)?Vr:xt.current,S=ks(s,S));var Z=a.getDerivedStateFromProps;(F=typeof Z=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==$||M!==S)&&Lp(s,v,u,S),hr=!1,M=s.memoizedState,v.state=M,Aa(s,u,v,h);var se=s.memoizedState;w!==$||M!==se||Rt.current||hr?(typeof Z=="function"&&(xu(s,a,Z,u),se=s.memoizedState),(R=hr||Dp(s,a,R,u,M,se,S)||!1)?(F||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,se,S),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,se,S)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===n.memoizedProps&&M===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&M===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=se),v.props=u,v.state=se,v.context=S,u=R):(typeof v.componentDidUpdate!="function"||w===n.memoizedProps&&M===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&M===n.memoizedState||(s.flags|=1024),u=!1)}return Eu(n,s,a,u,p,h)}function Eu(n,s,a,u,h,p){qp(n,s);var v=(s.flags&128)!==0;if(!u&&!v)return h&&Jf(s,a,!1),Ln(n,s,p);u=s.stateNode,h0.current=s;var w=v&&typeof a.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,n!==null&&v?(s.child=js(s,n.child,null,p),s.child=js(s,null,w,p)):It(n,s,w,p),s.memoizedState=u.state,h&&Jf(s,a,!0),s.child}function Kp(n){var s=n.stateNode;s.pendingContext?Yf(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Yf(n,s.context,!1),lu(n,s.containerInfo)}function Qp(n,s,a,u,h){return Ps(),tu(h),s.flags|=256,It(n,s,a,u),s.child}var Iu={dehydrated:null,treeContext:null,retryLane:0};function ku(n){return{baseLanes:n,cachePool:null,transitions:null}}function Yp(n,s,a){var u=s.pendingProps,h=Xe.current,p=!1,v=(s.flags&128)!==0,w;if((w=v)||(w=n!==null&&n.memoizedState===null?!1:(h&2)!==0),w?(p=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),ze(Xe,h&1),n===null)return eu(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=u.children,n=u.fallback,p?(u=s.mode,p=s.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=el(v,u,0,null),n=Zr(n,u,a,null),p.return=s,n.return=s,p.sibling=n,s.child=p,s.child.memoizedState=ku(a),s.memoizedState=Iu,n):Tu(s,v));if(h=n.memoizedState,h!==null&&(w=h.dehydrated,w!==null))return f0(n,s,v,u,w,h,a);if(p){p=u.fallback,v=s.mode,h=n.child,w=h.sibling;var S={mode:"hidden",children:u.children};return(v&1)===0&&s.child!==h?(u=s.child,u.childLanes=0,u.pendingProps=S,s.deletions=null):(u=yr(h,S),u.subtreeFlags=h.subtreeFlags&14680064),w!==null?p=yr(w,p):(p=Zr(p,v,a,null),p.flags|=2),p.return=s,u.return=s,u.sibling=p,s.child=u,u=p,p=s.child,v=n.child.memoizedState,v=v===null?ku(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~a,s.memoizedState=Iu,u}return p=n.child,n=p.sibling,u=yr(p,{mode:"visible",children:u.children}),(s.mode&1)===0&&(u.lanes=a),u.return=s,u.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=u,s.memoizedState=null,u}function Tu(n,s){return s=el({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function za(n,s,a,u){return u!==null&&tu(u),js(s,n.child,null,a),n=Tu(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function f0(n,s,a,u,h,p,v){if(a)return s.flags&256?(s.flags&=-257,u=Nu(Error(t(422))),za(n,s,v,u)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(p=u.fallback,h=s.mode,u=el({mode:"visible",children:u.children},h,0,null),p=Zr(p,h,v,null),p.flags|=2,u.return=s,p.return=s,u.sibling=p,s.child=u,(s.mode&1)!==0&&js(s,n.child,null,v),s.child.memoizedState=ku(v),s.memoizedState=Iu,p);if((s.mode&1)===0)return za(n,s,v,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var w=u.dgst;return u=w,p=Error(t(419)),u=Nu(p,u,void 0),za(n,s,v,u)}if(w=(v&n.childLanes)!==0,Dt||w){if(u=ht,u!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|v))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,Dn(n,h),dn(u,n,h,-1))}return Wu(),u=Nu(Error(t(421))),za(n,s,v,u)}return h.data==="$?"?(s.flags|=128,s.child=n.child,s=I0.bind(null,n),h._reactRetry=s,null):(n=p.treeContext,Vt=lr(h.nextSibling),Bt=s,Ke=!0,an=null,n!==null&&(Kt[Qt++]=Rn,Kt[Qt++]=An,Kt[Qt++]=Wr,Rn=n.id,An=n.overflow,Wr=s),s=Tu(s,u.children),s.flags|=4096,s)}function Xp(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),iu(n.return,s,a)}function bu(n,s,a,u,h){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:h}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailMode=h)}function Jp(n,s,a){var u=s.pendingProps,h=u.revealOrder,p=u.tail;if(It(n,s,u.children,a),u=Xe.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xp(n,a,s);else if(n.tag===19)Xp(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(ze(Xe,u),(s.mode&1)===0)s.memoizedState=null;else switch(h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&Da(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),bu(s,!1,h,a,p);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&Da(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}bu(s,!0,a,null,p);break;case"together":bu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ba(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Ln(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Qr|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=yr(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=yr(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function p0(n,s,a){switch(s.tag){case 3:Kp(s),Ps();break;case 5:hp(s);break;case 1:At(s.type)&&Ca(s);break;case 4:lu(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,h=s.memoizedProps.value;ze(Pa,u._currentValue),u._currentValue=h;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(ze(Xe,Xe.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Yp(n,s,a):(ze(Xe,Xe.current&1),n=Ln(n,s,a),n!==null?n.sibling:null);ze(Xe,Xe.current&1);break;case 19:if(u=(a&s.childLanes)!==0,(n.flags&128)!==0){if(u)return Jp(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ze(Xe,Xe.current),u)break;return null;case 22:case 23:return s.lanes=0,Hp(n,s,a)}return Ln(n,s,a)}var Zp,Pu,em,tm;Zp=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Pu=function(){},em=function(n,s,a,u){var h=n.memoizedProps;if(h!==u){n=s.stateNode,Gr(wn.current);var p=null;switch(a){case"input":h=Fr(n,h),u=Fr(n,u),p=[];break;case"select":h=G({},h,{value:void 0}),u=G({},u,{value:void 0}),p=[];break;case"textarea":h=gi(n,h),u=gi(n,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(n.onclick=wa)}X(a,u);var v;a=null;for(R in h)if(!u.hasOwnProperty(R)&&h.hasOwnProperty(R)&&h[R]!=null)if(R==="style"){var w=h[R];for(v in w)w.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(o.hasOwnProperty(R)?p||(p=[]):(p=p||[]).push(R,null));for(R in u){var S=u[R];if(w=h!=null?h[R]:void 0,u.hasOwnProperty(R)&&S!==w&&(S!=null||w!=null))if(R==="style")if(w){for(v in w)!w.hasOwnProperty(v)||S&&S.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in S)S.hasOwnProperty(v)&&w[v]!==S[v]&&(a||(a={}),a[v]=S[v])}else a||(p||(p=[]),p.push(R,a)),a=S;else R==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,w=w?w.__html:void 0,S!=null&&w!==S&&(p=p||[]).push(R,S)):R==="children"?typeof S!="string"&&typeof S!="number"||(p=p||[]).push(R,""+S):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(o.hasOwnProperty(R)?(S!=null&&R==="onScroll"&&We("scroll",n),p||w===S||(p=[])):(p=p||[]).push(R,S))}a&&(p=p||[]).push("style",a);var R=p;(s.updateQueue=R)&&(s.flags|=4)}},tm=function(n,s,a,u){a!==u&&(s.flags|=4)};function Yi(n,s){if(!Ke)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Nt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function m0(n,s,a){var u=s.pendingProps;switch(Jc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return At(s.type)&&Sa(),Nt(s),null;case 3:return u=s.stateNode,Ds(),He(Rt),He(xt),du(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(Ta(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,an!==null&&(zu(an),an=null))),Pu(n,s),Nt(s),null;case 5:cu(s);var h=Gr(Hi.current);if(a=s.type,n!==null&&s.stateNode!=null)em(n,s,a,u,h),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(t(166));return Nt(s),null}if(n=Gr(wn.current),Ta(s)){u=s.stateNode,a=s.type;var p=s.memoizedProps;switch(u[xn]=s,u[$i]=p,n=(s.mode&1)!==0,a){case"dialog":We("cancel",u),We("close",u);break;case"iframe":case"object":case"embed":We("load",u);break;case"video":case"audio":for(h=0;h<Mi.length;h++)We(Mi[h],u);break;case"source":We("error",u);break;case"img":case"image":case"link":We("error",u),We("load",u);break;case"details":We("toggle",u);break;case"input":fi(u,p),We("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},We("invalid",u);break;case"textarea":Ur(u,p),We("invalid",u)}X(a,p),h=null;for(var v in p)if(p.hasOwnProperty(v)){var w=p[v];v==="children"?typeof w=="string"?u.textContent!==w&&(p.suppressHydrationWarning!==!0&&xa(u.textContent,w,n),h=["children",w]):typeof w=="number"&&u.textContent!==""+w&&(p.suppressHydrationWarning!==!0&&xa(u.textContent,w,n),h=["children",""+w]):o.hasOwnProperty(v)&&w!=null&&v==="onScroll"&&We("scroll",u)}switch(a){case"input":Me(u),Tn(u,p,!0);break;case"textarea":Me(u),Ko(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=wa)}u=h,s.updateQueue=u,u!==null&&(s.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Qo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof u.is=="string"?n=v.createElement(a,{is:u.is}):(n=v.createElement(a),a==="select"&&(v=n,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):n=v.createElementNS(n,a),n[xn]=s,n[$i]=u,Zp(n,s,!1,!1),s.stateNode=n;e:{switch(v=qe(a,u),a){case"dialog":We("cancel",n),We("close",n),h=u;break;case"iframe":case"object":case"embed":We("load",n),h=u;break;case"video":case"audio":for(h=0;h<Mi.length;h++)We(Mi[h],n);h=u;break;case"source":We("error",n),h=u;break;case"img":case"image":case"link":We("error",n),We("load",n),h=u;break;case"details":We("toggle",n),h=u;break;case"input":fi(n,u),h=Fr(n,u),We("invalid",n);break;case"option":h=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple},h=G({},u,{value:void 0}),We("invalid",n);break;case"textarea":Ur(n,u),h=gi(n,u),We("invalid",n);break;default:h=u}X(a,h),w=h;for(p in w)if(w.hasOwnProperty(p)){var S=w[p];p==="style"?Jo(n,S):p==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&Ye(n,S)):p==="children"?typeof S=="string"?(a!=="textarea"||S!=="")&&$r(n,S):typeof S=="number"&&$r(n,""+S):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?S!=null&&p==="onScroll"&&We("scroll",n):S!=null&&q(n,p,S,v))}switch(a){case"input":Me(n),Tn(n,u,!1);break;case"textarea":Me(n),Ko(n);break;case"option":u.value!=null&&n.setAttribute("value",""+H(u.value));break;case"select":n.multiple=!!u.multiple,p=u.value,p!=null?Et(n,!!u.multiple,p,!1):u.defaultValue!=null&&Et(n,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=wa)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Nt(s),null;case 6:if(n&&s.stateNode!=null)tm(n,s,n.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(t(166));if(a=Gr(Hi.current),Gr(wn.current),Ta(s)){if(u=s.stateNode,a=s.memoizedProps,u[xn]=s,(p=u.nodeValue!==a)&&(n=Bt,n!==null))switch(n.tag){case 3:xa(u.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&xa(u.nodeValue,a,(n.mode&1)!==0)}p&&(s.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[xn]=s,s.stateNode=u}return Nt(s),null;case 13:if(He(Xe),u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ke&&Vt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)sp(),Ps(),s.flags|=98560,p=!1;else if(p=Ta(s),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[xn]=s}else Ps(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),p=!1}else an!==null&&(zu(an),an=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(u=u!==null,u!==(n!==null&&n.memoizedState!==null)&&u&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Xe.current&1)!==0?lt===0&&(lt=3):Wu())),s.updateQueue!==null&&(s.flags|=4),Nt(s),null);case 4:return Ds(),Pu(n,s),n===null&&Fi(s.stateNode.containerInfo),Nt(s),null;case 10:return su(s.type._context),Nt(s),null;case 17:return At(s.type)&&Sa(),Nt(s),null;case 19:if(He(Xe),p=s.memoizedState,p===null)return Nt(s),null;if(u=(s.flags&128)!==0,v=p.rendering,v===null)if(u)Yi(p,!1);else{if(lt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=Da(n),v!==null){for(s.flags|=128,Yi(p,!1),u=v.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=a,a=s.child;a!==null;)p=a,n=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return ze(Xe,Xe.current&1|2),s.child}n=n.sibling}p.tail!==null&&st()>Fs&&(s.flags|=128,u=!0,Yi(p,!1),s.lanes=4194304)}else{if(!u)if(n=Da(v),n!==null){if(s.flags|=128,u=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Yi(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Ke)return Nt(s),null}else 2*st()-p.renderingStartTime>Fs&&a!==1073741824&&(s.flags|=128,u=!0,Yi(p,!1),s.lanes=4194304);p.isBackwards?(v.sibling=s.child,s.child=v):(a=p.last,a!==null?a.sibling=v:s.child=v,p.last=v)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=st(),s.sibling=null,a=Xe.current,ze(Xe,u?a&1|2:a&1),s):(Nt(s),null);case 22:case 23:return Vu(),u=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==u&&(s.flags|=8192),u&&(s.mode&1)!==0?(Wt&1073741824)!==0&&(Nt(s),s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function g0(n,s){switch(Jc(s),s.tag){case 1:return At(s.type)&&Sa(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ds(),He(Rt),He(xt),du(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return cu(s),null;case 13:if(He(Xe),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ps()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return He(Xe),null;case 4:return Ds(),null;case 10:return su(s.type._context),null;case 22:case 23:return Vu(),null;case 24:return null;default:return null}}var Va=!1,St=!1,v0=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ls(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){et(n,s,u)}else a.current=null}function ju(n,s,a){try{a()}catch(u){et(n,s,u)}}var nm=!1;function _0(n,s){if(Vc=ca,n=Df(),Oc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,w=-1,S=-1,R=0,F=0,$=n,M=null;t:for(;;){for(var Z;$!==a||h!==0&&$.nodeType!==3||(w=v+h),$!==p||u!==0&&$.nodeType!==3||(S=v+u),$.nodeType===3&&(v+=$.nodeValue.length),(Z=$.firstChild)!==null;)M=$,$=Z;for(;;){if($===n)break t;if(M===a&&++R===h&&(w=v),M===p&&++F===u&&(S=v),(Z=$.nextSibling)!==null)break;$=M,M=$.parentNode}$=Z}a=w===-1||S===-1?null:{start:w,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Wc={focusedElem:n,selectionRange:a},ca=!1,re=s;re!==null;)if(s=re,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,re=n;else for(;re!==null;){s=re;try{var se=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(se!==null){var oe=se.memoizedProps,it=se.memoizedState,T=s.stateNode,E=T.getSnapshotBeforeUpdate(s.elementType===s.type?oe:ln(s.type,oe),it);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=s.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(B){et(s,s.return,B)}if(n=s.sibling,n!==null){n.return=s.return,re=n;break}re=s.return}return se=nm,nm=!1,se}function Xi(n,s,a){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&n)===n){var p=h.destroy;h.destroy=void 0,p!==void 0&&ju(s,a,p)}h=h.next}while(h!==u)}}function Wa(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var u=a.create;a.destroy=u()}a=a.next}while(a!==s)}}function Ru(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function rm(n){var s=n.alternate;s!==null&&(n.alternate=null,rm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[xn],delete s[$i],delete s[Kc],delete s[e0],delete s[t0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sm(n){return n.tag===5||n.tag===3||n.tag===4}function im(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Au(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=wa));else if(u!==4&&(n=n.child,n!==null))for(Au(n,s,a),n=n.sibling;n!==null;)Au(n,s,a),n=n.sibling}function Du(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(n=n.child,n!==null))for(Du(n,s,a),n=n.sibling;n!==null;)Du(n,s,a),n=n.sibling}var gt=null,cn=!1;function pr(n,s,a){for(a=a.child;a!==null;)om(n,s,a),a=a.sibling}function om(n,s,a){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(ra,a)}catch{}switch(a.tag){case 5:St||Ls(a,s);case 6:var u=gt,h=cn;gt=null,pr(n,s,a),gt=u,cn=h,gt!==null&&(cn?(n=gt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):gt.removeChild(a.stateNode));break;case 18:gt!==null&&(cn?(n=gt,a=a.stateNode,n.nodeType===8?Gc(n.parentNode,a):n.nodeType===1&&Gc(n,a),bi(n)):Gc(gt,a.stateNode));break;case 4:u=gt,h=cn,gt=a.stateNode.containerInfo,cn=!0,pr(n,s,a),gt=u,cn=h;break;case 0:case 11:case 14:case 15:if(!St&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&ju(a,s,v),h=h.next}while(h!==u)}pr(n,s,a);break;case 1:if(!St&&(Ls(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(w){et(a,s,w)}pr(n,s,a);break;case 21:pr(n,s,a);break;case 22:a.mode&1?(St=(u=St)||a.memoizedState!==null,pr(n,s,a),St=u):pr(n,s,a);break;default:pr(n,s,a)}}function am(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new v0),s.forEach(function(u){var h=k0.bind(null,n,u);a.has(u)||(a.add(u),u.then(h,h))})}}function un(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];try{var p=n,v=s,w=v;e:for(;w!==null;){switch(w.tag){case 5:gt=w.stateNode,cn=!1;break e;case 3:gt=w.stateNode.containerInfo,cn=!0;break e;case 4:gt=w.stateNode.containerInfo,cn=!0;break e}w=w.return}if(gt===null)throw Error(t(160));om(p,v,h),gt=null,cn=!1;var S=h.alternate;S!==null&&(S.return=null),h.return=null}catch(R){et(h,s,R)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)lm(s,n),s=s.sibling}function lm(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(un(s,n),Sn(n),u&4){try{Xi(3,n,n.return),Wa(3,n)}catch(oe){et(n,n.return,oe)}try{Xi(5,n,n.return)}catch(oe){et(n,n.return,oe)}}break;case 1:un(s,n),Sn(n),u&512&&a!==null&&Ls(a,a.return);break;case 5:if(un(s,n),Sn(n),u&512&&a!==null&&Ls(a,a.return),n.flags&32){var h=n.stateNode;try{$r(h,"")}catch(oe){et(n,n.return,oe)}}if(u&4&&(h=n.stateNode,h!=null)){var p=n.memoizedProps,v=a!==null?a.memoizedProps:p,w=n.type,S=n.updateQueue;if(n.updateQueue=null,S!==null)try{w==="input"&&p.type==="radio"&&p.name!=null&&pi(h,p),qe(w,v);var R=qe(w,p);for(v=0;v<S.length;v+=2){var F=S[v],$=S[v+1];F==="style"?Jo(h,$):F==="dangerouslySetInnerHTML"?Ye(h,$):F==="children"?$r(h,$):q(h,F,$,R)}switch(w){case"input":mi(h,p);break;case"textarea":Go(h,p);break;case"select":var M=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var Z=p.value;Z!=null?Et(h,!!p.multiple,Z,!1):M!==!!p.multiple&&(p.defaultValue!=null?Et(h,!!p.multiple,p.defaultValue,!0):Et(h,!!p.multiple,p.multiple?[]:"",!1))}h[$i]=p}catch(oe){et(n,n.return,oe)}}break;case 6:if(un(s,n),Sn(n),u&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,p=n.memoizedProps;try{h.nodeValue=p}catch(oe){et(n,n.return,oe)}}break;case 3:if(un(s,n),Sn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{bi(s.containerInfo)}catch(oe){et(n,n.return,oe)}break;case 4:un(s,n),Sn(n);break;case 13:un(s,n),Sn(n),h=n.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Mu=st())),u&4&&am(n);break;case 22:if(F=a!==null&&a.memoizedState!==null,n.mode&1?(St=(R=St)||F,un(s,n),St=R):un(s,n),Sn(n),u&8192){if(R=n.memoizedState!==null,(n.stateNode.isHidden=R)&&!F&&(n.mode&1)!==0)for(re=n,F=n.child;F!==null;){for($=re=F;re!==null;){switch(M=re,Z=M.child,M.tag){case 0:case 11:case 14:case 15:Xi(4,M,M.return);break;case 1:Ls(M,M.return);var se=M.stateNode;if(typeof se.componentWillUnmount=="function"){u=M,a=M.return;try{s=u,se.props=s.memoizedProps,se.state=s.memoizedState,se.componentWillUnmount()}catch(oe){et(u,a,oe)}}break;case 5:Ls(M,M.return);break;case 22:if(M.memoizedState!==null){dm($);continue}}Z!==null?(Z.return=M,re=Z):dm($)}F=F.sibling}e:for(F=null,$=n;;){if($.tag===5){if(F===null){F=$;try{h=$.stateNode,R?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(w=$.stateNode,S=$.memoizedProps.style,v=S!=null&&S.hasOwnProperty("display")?S.display:null,w.style.display=Xo("display",v))}catch(oe){et(n,n.return,oe)}}}else if($.tag===6){if(F===null)try{$.stateNode.nodeValue=R?"":$.memoizedProps}catch(oe){et(n,n.return,oe)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===n)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===n)break e;for(;$.sibling===null;){if($.return===null||$.return===n)break e;F===$&&(F=null),$=$.return}F===$&&(F=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:un(s,n),Sn(n),u&4&&am(n);break;case 21:break;default:un(s,n),Sn(n)}}function Sn(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(sm(a)){var u=a;break e}a=a.return}throw Error(t(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&($r(h,""),u.flags&=-33);var p=im(n);Du(n,p,h);break;case 3:case 4:var v=u.stateNode.containerInfo,w=im(n);Au(n,w,v);break;default:throw Error(t(161))}}catch(S){et(n,n.return,S)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function y0(n,s,a){re=n,cm(n)}function cm(n,s,a){for(var u=(n.mode&1)!==0;re!==null;){var h=re,p=h.child;if(h.tag===22&&u){var v=h.memoizedState!==null||Va;if(!v){var w=h.alternate,S=w!==null&&w.memoizedState!==null||St;w=Va;var R=St;if(Va=v,(St=S)&&!R)for(re=h;re!==null;)v=re,S=v.child,v.tag===22&&v.memoizedState!==null?hm(h):S!==null?(S.return=v,re=S):hm(h);for(;p!==null;)re=p,cm(p),p=p.sibling;re=h,Va=w,St=R}um(n)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,re=p):um(n)}}function um(n){for(;re!==null;){var s=re;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:St||Wa(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!St)if(a===null)u.componentDidMount();else{var h=s.elementType===s.type?a.memoizedProps:ln(s.type,a.memoizedProps);u.componentDidUpdate(h,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&dp(s,p,u);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}dp(s,v,a)}break;case 5:var w=s.stateNode;if(a===null&&s.flags&4){a=w;var S=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&a.focus();break;case"img":S.src&&(a.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var R=s.alternate;if(R!==null){var F=R.memoizedState;if(F!==null){var $=F.dehydrated;$!==null&&bi($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}St||s.flags&512&&Ru(s)}catch(M){et(s,s.return,M)}}if(s===n){re=null;break}if(a=s.sibling,a!==null){a.return=s.return,re=a;break}re=s.return}}function dm(n){for(;re!==null;){var s=re;if(s===n){re=null;break}var a=s.sibling;if(a!==null){a.return=s.return,re=a;break}re=s.return}}function hm(n){for(;re!==null;){var s=re;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Wa(4,s)}catch(S){et(s,a,S)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var h=s.return;try{u.componentDidMount()}catch(S){et(s,h,S)}}var p=s.return;try{Ru(s)}catch(S){et(s,p,S)}break;case 5:var v=s.return;try{Ru(s)}catch(S){et(s,v,S)}}}catch(S){et(s,s.return,S)}if(s===n){re=null;break}var w=s.sibling;if(w!==null){w.return=s.return,re=w;break}re=s.return}}var x0=Math.ceil,Ha=te.ReactCurrentDispatcher,Ou=te.ReactCurrentOwner,Jt=te.ReactCurrentBatchConfig,Ae=0,ht=null,ot=null,vt=0,Wt=0,Ms=cr(0),lt=0,Ji=null,Qr=0,qa=0,Lu=0,Zi=null,Ot=null,Mu=0,Fs=1/0,Mn=null,Ga=!1,Fu=null,mr=null,Ka=!1,gr=null,Qa=0,eo=0,Uu=null,Ya=-1,Xa=0;function kt(){return(Ae&6)!==0?st():Ya!==-1?Ya:Ya=st()}function vr(n){return(n.mode&1)===0?1:(Ae&2)!==0&&vt!==0?vt&-vt:r0.transition!==null?(Xa===0&&(Xa=sf()),Xa):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:pf(n.type)),n)}function dn(n,s,a,u){if(50<eo)throw eo=0,Uu=null,Error(t(185));Ci(n,a,u),((Ae&2)===0||n!==ht)&&(n===ht&&((Ae&2)===0&&(qa|=a),lt===4&&_r(n,vt)),Lt(n,u),a===1&&Ae===0&&(s.mode&1)===0&&(Fs=st()+500,Ea&&dr()))}function Lt(n,s){var a=n.callbackNode;rx(n,s);var u=oa(n,n===ht?vt:0);if(u===0)a!==null&&tf(a),n.callbackNode=null,n.callbackPriority=0;else if(s=u&-u,n.callbackPriority!==s){if(a!=null&&tf(a),s===1)n.tag===0?n0(pm.bind(null,n)):Zf(pm.bind(null,n)),Jx(function(){(Ae&6)===0&&dr()}),a=null;else{switch(of(u)){case 1:a=_c;break;case 4:a=nf;break;case 16:a=na;break;case 536870912:a=rf;break;default:a=na}a=Nm(a,fm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function fm(n,s){if(Ya=-1,Xa=0,(Ae&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Us()&&n.callbackNode!==a)return null;var u=oa(n,n===ht?vt:0);if(u===0)return null;if((u&30)!==0||(u&n.expiredLanes)!==0||s)s=Ja(n,u);else{s=u;var h=Ae;Ae|=2;var p=gm();(ht!==n||vt!==s)&&(Mn=null,Fs=st()+500,Xr(n,s));do try{S0();break}catch(w){mm(n,w)}while(!0);ru(),Ha.current=p,Ae=h,ot!==null?s=0:(ht=null,vt=0,s=lt)}if(s!==0){if(s===2&&(h=yc(n),h!==0&&(u=h,s=$u(n,h))),s===1)throw a=Ji,Xr(n,0),_r(n,u),Lt(n,st()),a;if(s===6)_r(n,u);else{if(h=n.current.alternate,(u&30)===0&&!w0(h)&&(s=Ja(n,u),s===2&&(p=yc(n),p!==0&&(u=p,s=$u(n,p))),s===1))throw a=Ji,Xr(n,0),_r(n,u),Lt(n,st()),a;switch(n.finishedWork=h,n.finishedLanes=u,s){case 0:case 1:throw Error(t(345));case 2:Jr(n,Ot,Mn);break;case 3:if(_r(n,u),(u&130023424)===u&&(s=Mu+500-st(),10<s)){if(oa(n,0)!==0)break;if(h=n.suspendedLanes,(h&u)!==u){kt(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=qc(Jr.bind(null,n,Ot,Mn),s);break}Jr(n,Ot,Mn);break;case 4:if(_r(n,u),(u&4194240)===u)break;for(s=n.eventTimes,h=-1;0<u;){var v=31-sn(u);p=1<<v,v=s[v],v>h&&(h=v),u&=~p}if(u=h,u=st()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*x0(u/1960))-u,10<u){n.timeoutHandle=qc(Jr.bind(null,n,Ot,Mn),u);break}Jr(n,Ot,Mn);break;case 5:Jr(n,Ot,Mn);break;default:throw Error(t(329))}}}return Lt(n,st()),n.callbackNode===a?fm.bind(null,n):null}function $u(n,s){var a=Zi;return n.current.memoizedState.isDehydrated&&(Xr(n,s).flags|=256),n=Ja(n,s),n!==2&&(s=Ot,Ot=a,s!==null&&zu(s)),n}function zu(n){Ot===null?Ot=n:Ot.push.apply(Ot,n)}function w0(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var h=a[u],p=h.getSnapshot;h=h.value;try{if(!on(p(),h))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _r(n,s){for(s&=~Lu,s&=~qa,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-sn(s),u=1<<a;n[a]=-1,s&=~u}}function pm(n){if((Ae&6)!==0)throw Error(t(327));Us();var s=oa(n,0);if((s&1)===0)return Lt(n,st()),null;var a=Ja(n,s);if(n.tag!==0&&a===2){var u=yc(n);u!==0&&(s=u,a=$u(n,u))}if(a===1)throw a=Ji,Xr(n,0),_r(n,s),Lt(n,st()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Jr(n,Ot,Mn),Lt(n,st()),null}function Bu(n,s){var a=Ae;Ae|=1;try{return n(s)}finally{Ae=a,Ae===0&&(Fs=st()+500,Ea&&dr())}}function Yr(n){gr!==null&&gr.tag===0&&(Ae&6)===0&&Us();var s=Ae;Ae|=1;var a=Jt.transition,u=Fe;try{if(Jt.transition=null,Fe=1,n)return n()}finally{Fe=u,Jt.transition=a,Ae=s,(Ae&6)===0&&dr()}}function Vu(){Wt=Ms.current,He(Ms)}function Xr(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Xx(a)),ot!==null)for(a=ot.return;a!==null;){var u=a;switch(Jc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Sa();break;case 3:Ds(),He(Rt),He(xt),du();break;case 5:cu(u);break;case 4:Ds();break;case 13:He(Xe);break;case 19:He(Xe);break;case 10:su(u.type._context);break;case 22:case 23:Vu()}a=a.return}if(ht=n,ot=n=yr(n.current,null),vt=Wt=s,lt=0,Ji=null,Lu=qa=Qr=0,Ot=Zi=null,qr!==null){for(s=0;s<qr.length;s++)if(a=qr[s],u=a.interleaved,u!==null){a.interleaved=null;var h=u.next,p=a.pending;if(p!==null){var v=p.next;p.next=h,u.next=v}a.pending=u}qr=null}return n}function mm(n,s){do{var a=ot;try{if(ru(),Oa.current=Ua,La){for(var u=Je.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}La=!1}if(Kr=0,dt=at=Je=null,qi=!1,Gi=0,Ou.current=null,a===null||a.return===null){lt=1,Ji=s,ot=null;break}e:{var p=n,v=a.return,w=a,S=s;if(s=vt,w.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var R=S,F=w,$=F.tag;if((F.mode&1)===0&&($===0||$===11||$===15)){var M=F.alternate;M?(F.updateQueue=M.updateQueue,F.memoizedState=M.memoizedState,F.lanes=M.lanes):(F.updateQueue=null,F.memoizedState=null)}var Z=$p(v);if(Z!==null){Z.flags&=-257,zp(Z,v,w,p,s),Z.mode&1&&Up(p,R,s),s=Z,S=R;var se=s.updateQueue;if(se===null){var oe=new Set;oe.add(S),s.updateQueue=oe}else se.add(S);break e}else{if((s&1)===0){Up(p,R,s),Wu();break e}S=Error(t(426))}}else if(Ke&&w.mode&1){var it=$p(v);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),zp(it,v,w,p,s),tu(Os(S,w));break e}}p=S=Os(S,w),lt!==4&&(lt=2),Zi===null?Zi=[p]:Zi.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var T=Mp(p,S,s);up(p,T);break e;case 1:w=S;var E=p.type,b=p.stateNode;if((p.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(mr===null||!mr.has(b)))){p.flags|=65536,s&=-s,p.lanes|=s;var B=Fp(p,w,s);up(p,B);break e}}p=p.return}while(p!==null)}_m(a)}catch(le){s=le,ot===a&&a!==null&&(ot=a=a.return);continue}break}while(!0)}function gm(){var n=Ha.current;return Ha.current=Ua,n===null?Ua:n}function Wu(){(lt===0||lt===3||lt===2)&&(lt=4),ht===null||(Qr&268435455)===0&&(qa&268435455)===0||_r(ht,vt)}function Ja(n,s){var a=Ae;Ae|=2;var u=gm();(ht!==n||vt!==s)&&(Mn=null,Xr(n,s));do try{N0();break}catch(h){mm(n,h)}while(!0);if(ru(),Ae=a,Ha.current=u,ot!==null)throw Error(t(261));return ht=null,vt=0,lt}function N0(){for(;ot!==null;)vm(ot)}function S0(){for(;ot!==null&&!Ky();)vm(ot)}function vm(n){var s=wm(n.alternate,n,Wt);n.memoizedProps=n.pendingProps,s===null?_m(n):ot=s,Ou.current=null}function _m(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=m0(a,s,Wt),a!==null){ot=a;return}}else{if(a=g0(a,s),a!==null){a.flags&=32767,ot=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{lt=6,ot=null;return}}if(s=s.sibling,s!==null){ot=s;return}ot=s=n}while(s!==null);lt===0&&(lt=5)}function Jr(n,s,a){var u=Fe,h=Jt.transition;try{Jt.transition=null,Fe=1,C0(n,s,a,u)}finally{Jt.transition=h,Fe=u}return null}function C0(n,s,a,u){do Us();while(gr!==null);if((Ae&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(sx(n,p),n===ht&&(ot=ht=null,vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ka||(Ka=!0,Nm(na,function(){return Us(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Jt.transition,Jt.transition=null;var v=Fe;Fe=1;var w=Ae;Ae|=4,Ou.current=null,_0(n,a),lm(a,n),Wx(Wc),ca=!!Vc,Wc=Vc=null,n.current=a,y0(a),Qy(),Ae=w,Fe=v,Jt.transition=p}else n.current=a;if(Ka&&(Ka=!1,gr=n,Qa=h),p=n.pendingLanes,p===0&&(mr=null),Jy(a.stateNode),Lt(n,st()),s!==null)for(u=n.onRecoverableError,a=0;a<s.length;a++)h=s[a],u(h.value,{componentStack:h.stack,digest:h.digest});if(Ga)throw Ga=!1,n=Fu,Fu=null,n;return(Qa&1)!==0&&n.tag!==0&&Us(),p=n.pendingLanes,(p&1)!==0?n===Uu?eo++:(eo=0,Uu=n):eo=0,dr(),null}function Us(){if(gr!==null){var n=of(Qa),s=Jt.transition,a=Fe;try{if(Jt.transition=null,Fe=16>n?16:n,gr===null)var u=!1;else{if(n=gr,gr=null,Qa=0,(Ae&6)!==0)throw Error(t(331));var h=Ae;for(Ae|=4,re=n.current;re!==null;){var p=re,v=p.child;if((re.flags&16)!==0){var w=p.deletions;if(w!==null){for(var S=0;S<w.length;S++){var R=w[S];for(re=R;re!==null;){var F=re;switch(F.tag){case 0:case 11:case 15:Xi(8,F,p)}var $=F.child;if($!==null)$.return=F,re=$;else for(;re!==null;){F=re;var M=F.sibling,Z=F.return;if(rm(F),F===R){re=null;break}if(M!==null){M.return=Z,re=M;break}re=Z}}}var se=p.alternate;if(se!==null){var oe=se.child;if(oe!==null){se.child=null;do{var it=oe.sibling;oe.sibling=null,oe=it}while(oe!==null)}}re=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,re=v;else e:for(;re!==null;){if(p=re,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Xi(9,p,p.return)}var T=p.sibling;if(T!==null){T.return=p.return,re=T;break e}re=p.return}}var E=n.current;for(re=E;re!==null;){v=re;var b=v.child;if((v.subtreeFlags&2064)!==0&&b!==null)b.return=v,re=b;else e:for(v=E;re!==null;){if(w=re,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:Wa(9,w)}}catch(le){et(w,w.return,le)}if(w===v){re=null;break e}var B=w.sibling;if(B!==null){B.return=w.return,re=B;break e}re=w.return}}if(Ae=h,dr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(ra,n)}catch{}u=!0}return u}finally{Fe=a,Jt.transition=s}}return!1}function ym(n,s,a){s=Os(a,s),s=Mp(n,s,1),n=fr(n,s,1),s=kt(),n!==null&&(Ci(n,1,s),Lt(n,s))}function et(n,s,a){if(n.tag===3)ym(n,n,a);else for(;s!==null;){if(s.tag===3){ym(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(mr===null||!mr.has(u))){n=Os(a,n),n=Fp(s,n,1),s=fr(s,n,1),n=kt(),s!==null&&(Ci(s,1,n),Lt(s,n));break}}s=s.return}}function E0(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),s=kt(),n.pingedLanes|=n.suspendedLanes&a,ht===n&&(vt&a)===a&&(lt===4||lt===3&&(vt&130023424)===vt&&500>st()-Mu?Xr(n,0):Lu|=a),Lt(n,s)}function xm(n,s){s===0&&((n.mode&1)===0?s=1:(s=ia,ia<<=1,(ia&130023424)===0&&(ia=4194304)));var a=kt();n=Dn(n,s),n!==null&&(Ci(n,s,a),Lt(n,a))}function I0(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),xm(n,a)}function k0(n,s){var a=0;switch(n.tag){case 13:var u=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(t(314))}u!==null&&u.delete(s),xm(n,a)}var wm;wm=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Rt.current)Dt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Dt=!1,p0(n,s,a);Dt=(n.flags&131072)!==0}else Dt=!1,Ke&&(s.flags&1048576)!==0&&ep(s,ka,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;Ba(n,s),n=s.pendingProps;var h=ks(s,xt.current);As(s,a),h=pu(null,s,u,n,h,a);var p=mu();return s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,At(u)?(p=!0,Ca(s)):p=!1,s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,au(s),h.updater=$a,s.stateNode=h,h._reactInternals=s,wu(s,u,n,a),s=Eu(null,s,u,!0,p,a)):(s.tag=0,Ke&&p&&Xc(s),It(null,s,h,a),s=s.child),s;case 16:u=s.elementType;e:{switch(Ba(n,s),n=s.pendingProps,h=u._init,u=h(u._payload),s.type=u,h=s.tag=b0(u),n=ln(u,n),h){case 0:s=Cu(null,s,u,n,a);break e;case 1:s=Gp(null,s,u,n,a);break e;case 11:s=Bp(null,s,u,n,a);break e;case 14:s=Vp(null,s,u,ln(u.type,n),a);break e}throw Error(t(306,u,""))}return s;case 0:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:ln(u,h),Cu(n,s,u,h,a);case 1:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:ln(u,h),Gp(n,s,u,h,a);case 3:e:{if(Kp(s),n===null)throw Error(t(387));u=s.pendingProps,p=s.memoizedState,h=p.element,cp(n,s),Aa(s,u,null,a);var v=s.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){h=Os(Error(t(423)),s),s=Qp(n,s,u,a,h);break e}else if(u!==h){h=Os(Error(t(424)),s),s=Qp(n,s,u,a,h);break e}else for(Vt=lr(s.stateNode.containerInfo.firstChild),Bt=s,Ke=!0,an=null,a=ap(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ps(),u===h){s=Ln(n,s,a);break e}It(n,s,u,a)}s=s.child}return s;case 5:return hp(s),n===null&&eu(s),u=s.type,h=s.pendingProps,p=n!==null?n.memoizedProps:null,v=h.children,Hc(u,h)?v=null:p!==null&&Hc(u,p)&&(s.flags|=32),qp(n,s),It(n,s,v,a),s.child;case 6:return n===null&&eu(s),null;case 13:return Yp(n,s,a);case 4:return lu(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=js(s,null,u,a):It(n,s,u,a),s.child;case 11:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:ln(u,h),Bp(n,s,u,h,a);case 7:return It(n,s,s.pendingProps,a),s.child;case 8:return It(n,s,s.pendingProps.children,a),s.child;case 12:return It(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(u=s.type._context,h=s.pendingProps,p=s.memoizedProps,v=h.value,ze(Pa,u._currentValue),u._currentValue=v,p!==null)if(on(p.value,v)){if(p.children===h.children&&!Rt.current){s=Ln(n,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var w=p.dependencies;if(w!==null){v=p.child;for(var S=w.firstContext;S!==null;){if(S.context===u){if(p.tag===1){S=On(-1,a&-a),S.tag=2;var R=p.updateQueue;if(R!==null){R=R.shared;var F=R.pending;F===null?S.next=S:(S.next=F.next,F.next=S),R.pending=S}}p.lanes|=a,S=p.alternate,S!==null&&(S.lanes|=a),iu(p.return,a,s),w.lanes|=a;break}S=S.next}}else if(p.tag===10)v=p.type===s.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=a,w=v.alternate,w!==null&&(w.lanes|=a),iu(v,a,s),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===s){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}It(n,s,h.children,a),s=s.child}return s;case 9:return h=s.type,u=s.pendingProps.children,As(s,a),h=Yt(h),u=u(h),s.flags|=1,It(n,s,u,a),s.child;case 14:return u=s.type,h=ln(u,s.pendingProps),h=ln(u.type,h),Vp(n,s,u,h,a);case 15:return Wp(n,s,s.type,s.pendingProps,a);case 17:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:ln(u,h),Ba(n,s),s.tag=1,At(u)?(n=!0,Ca(s)):n=!1,As(s,a),Op(s,u,h),wu(s,u,h,a),Eu(null,s,u,!0,n,a);case 19:return Jp(n,s,a);case 22:return Hp(n,s,a)}throw Error(t(156,s.tag))};function Nm(n,s){return ef(n,s)}function T0(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(n,s,a,u){return new T0(n,s,a,u)}function Hu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function b0(n){if(typeof n=="function")return Hu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===W)return 11;if(n===Ce)return 14}return 2}function yr(n,s){var a=n.alternate;return a===null?(a=Zt(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Za(n,s,a,u,h,p){var v=2;if(u=n,typeof n=="function")Hu(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case ae:return Zr(a.children,h,p,s);case he:v=8,h|=8;break;case ye:return n=Zt(12,a,s,h|2),n.elementType=ye,n.lanes=p,n;case Se:return n=Zt(13,a,s,h),n.elementType=Se,n.lanes=p,n;case ne:return n=Zt(19,a,s,h),n.elementType=ne,n.lanes=p,n;case fe:return el(a,h,p,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ee:v=10;break e;case je:v=9;break e;case W:v=11;break e;case Ce:v=14;break e;case we:v=16,u=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Zt(v,a,s,h),s.elementType=n,s.type=u,s.lanes=p,s}function Zr(n,s,a,u){return n=Zt(7,n,u,s),n.lanes=a,n}function el(n,s,a,u){return n=Zt(22,n,u,s),n.elementType=fe,n.lanes=a,n.stateNode={isHidden:!1},n}function qu(n,s,a){return n=Zt(6,n,null,s),n.lanes=a,n}function Gu(n,s,a){return s=Zt(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function P0(n,s,a,u,h){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xc(0),this.expirationTimes=xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xc(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Ku(n,s,a,u,h,p,v,w,S){return n=new P0(n,s,a,w,S),s===1?(s=1,p===!0&&(s|=8)):s=0,p=Zt(3,null,null,s),n.current=p,p.stateNode=n,p.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},au(p),n}function j0(n,s,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ve,key:u==null?null:""+u,children:n,containerInfo:s,implementation:a}}function Sm(n){if(!n)return ur;n=n._reactInternals;e:{if(zr(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(At(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(At(a))return Xf(n,a,s)}return s}function Cm(n,s,a,u,h,p,v,w,S){return n=Ku(a,u,!0,n,h,p,v,w,S),n.context=Sm(null),a=n.current,u=kt(),h=vr(a),p=On(u,h),p.callback=s??null,fr(a,p,h),n.current.lanes=h,Ci(n,h,u),Lt(n,u),n}function tl(n,s,a,u){var h=s.current,p=kt(),v=vr(h);return a=Sm(a),s.context===null?s.context=a:s.pendingContext=a,s=On(p,v),s.payload={element:n},u=u===void 0?null:u,u!==null&&(s.callback=u),n=fr(h,s,v),n!==null&&(dn(n,h,v,p),Ra(n,h,v)),v}function nl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Em(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Qu(n,s){Em(n,s),(n=n.alternate)&&Em(n,s)}function R0(){return null}var Im=typeof reportError=="function"?reportError:function(n){console.error(n)};function Yu(n){this._internalRoot=n}rl.prototype.render=Yu.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));tl(n,s,null,null)},rl.prototype.unmount=Yu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Yr(function(){tl(null,n,null,null)}),s[Pn]=null}};function rl(n){this._internalRoot=n}rl.prototype.unstable_scheduleHydration=function(n){if(n){var s=cf();n={blockedOn:null,target:n,priority:s};for(var a=0;a<ir.length&&s!==0&&s<ir[a].priority;a++);ir.splice(a,0,n),a===0&&hf(n)}};function Xu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function km(){}function A0(n,s,a,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var R=nl(v);p.call(R)}}var v=Cm(s,u,n,0,null,!1,!1,"",km);return n._reactRootContainer=v,n[Pn]=v.current,Fi(n.nodeType===8?n.parentNode:n),Yr(),v}for(;h=n.lastChild;)n.removeChild(h);if(typeof u=="function"){var w=u;u=function(){var R=nl(S);w.call(R)}}var S=Ku(n,0,!1,null,null,!1,!1,"",km);return n._reactRootContainer=S,n[Pn]=S.current,Fi(n.nodeType===8?n.parentNode:n),Yr(function(){tl(s,S,a,u)}),S}function il(n,s,a,u,h){var p=a._reactRootContainer;if(p){var v=p;if(typeof h=="function"){var w=h;h=function(){var S=nl(v);w.call(S)}}tl(s,v,n,h)}else v=A0(a,s,n,h,u);return nl(v)}af=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Si(s.pendingLanes);a!==0&&(wc(s,a|1),Lt(s,st()),(Ae&6)===0&&(Fs=st()+500,dr()))}break;case 13:Yr(function(){var u=Dn(n,1);if(u!==null){var h=kt();dn(u,n,1,h)}}),Qu(n,1)}},Nc=function(n){if(n.tag===13){var s=Dn(n,134217728);if(s!==null){var a=kt();dn(s,n,134217728,a)}Qu(n,134217728)}},lf=function(n){if(n.tag===13){var s=vr(n),a=Dn(n,s);if(a!==null){var u=kt();dn(a,n,s,u)}Qu(n,s)}},cf=function(){return Fe},uf=function(n,s){var a=Fe;try{return Fe=n,s()}finally{Fe=a}},Re=function(n,s,a){switch(s){case"input":if(mi(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var h=Na(u);if(!h)throw Error(t(90));Gt(u),mi(u,h)}}}break;case"textarea":Go(n,a);break;case"select":s=a.value,s!=null&&Et(n,!!a.multiple,s,!1)}},er=Bu,tr=Yr;var D0={usingClientEntryPoint:!1,Events:[zi,Es,Na,Zo,Zn,Bu]},to={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O0={bundleType:to.bundleType,version:to.version,rendererPackageName:to.rendererPackageName,rendererConfig:to.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Jh(n),n===null?null:n.stateNode},findFiberByHostInstance:to.findFiberByHostInstance||R0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{ra=ol.inject(O0),yn=ol}catch{}}return Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D0,Mt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xu(s))throw Error(t(200));return j0(n,s,null,a)},Mt.createRoot=function(n,s){if(!Xu(n))throw Error(t(299));var a=!1,u="",h=Im;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=Ku(n,1,!1,null,null,a,!1,u,h),n[Pn]=s.current,Fi(n.nodeType===8?n.parentNode:n),new Yu(s)},Mt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Jh(s),n=n===null?null:n.stateNode,n},Mt.flushSync=function(n){return Yr(n)},Mt.hydrate=function(n,s,a){if(!sl(s))throw Error(t(200));return il(null,n,s,!0,a)},Mt.hydrateRoot=function(n,s,a){if(!Xu(n))throw Error(t(405));var u=a!=null&&a.hydratedSources||null,h=!1,p="",v=Im;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=Cm(s,null,n,1,a??null,h,!1,p,v),n[Pn]=s.current,Fi(n),u)for(n=0;n<u.length;n++)a=u[n],h=a._getVersion,h=h(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,h]:s.mutableSourceEagerHydrationData.push(a,h);return new rl(s)},Mt.render=function(n,s,a){if(!sl(s))throw Error(t(200));return il(null,n,s,!1,a)},Mt.unmountComponentAtNode=function(n){if(!sl(n))throw Error(t(40));return n._reactRootContainer?(Yr(function(){il(null,null,n,!1,function(){n._reactRootContainer=null,n[Pn]=null})}),!0):!1},Mt.unstable_batchedUpdates=Bu,Mt.unstable_renderSubtreeIntoContainer=function(n,s,a,u){if(!sl(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return il(n,s,a,!1,u)},Mt.version="18.3.1-next-f1338f8080-20240426",Mt}var Om;function cv(){if(Om)return ed.exports;Om=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ed.exports=W0(),ed.exports}var Lm;function H0(){if(Lm)return al;Lm=1;var r=cv();return al.createRoot=r.createRoot,al.hydrateRoot=r.hydrateRoot,al}var q0=H0();const G0=av(q0);cv();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xo(){return xo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},xo.apply(this,arguments)}var Er;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Er||(Er={}));const Mm="popstate";function K0(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:d,hash:f}=i.location;return wd("",{pathname:l,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:yl(o)}return Y0(e,t,null,r)}function Ze(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Qd(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q0(){return Math.random().toString(36).substr(2,8)}function Fm(r,e){return{usr:r.state,key:r.key,idx:e}}function wd(r,e,t,i){return t===void 0&&(t=null),xo({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ni(e):e,{state:t,key:e&&e.key||i||Q0()})}function yl(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ni(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function Y0(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,f=Er.Pop,m=null,g=x();g==null&&(g=0,d.replaceState(xo({},d.state,{idx:g}),""));function x(){return(d.state||{idx:null}).idx}function _(){f=Er.Pop;let D=x(),J=D==null?null:D-g;g=D,m&&m({action:f,location:A.location,delta:J})}function y(D,J){f=Er.Push;let Q=wd(A.location,D,J);g=x()+1;let q=Fm(Q,g),te=A.createHref(Q);try{d.pushState(q,"",te)}catch(ge){if(ge instanceof DOMException&&ge.name==="DataCloneError")throw ge;o.location.assign(te)}l&&m&&m({action:f,location:A.location,delta:1})}function I(D,J){f=Er.Replace;let Q=wd(A.location,D,J);g=x();let q=Fm(Q,g),te=A.createHref(Q);d.replaceState(q,"",te),l&&m&&m({action:f,location:A.location,delta:0})}function j(D){let J=o.location.origin!=="null"?o.location.origin:o.location.href,Q=typeof D=="string"?D:yl(D);return Q=Q.replace(/ $/,"%20"),Ze(J,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,J)}let A={get action(){return f},get location(){return r(o,d)},listen(D){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Mm,_),m=D,()=>{o.removeEventListener(Mm,_),m=null}},createHref(D){return e(o,D)},createURL:j,encodeLocation(D){let J=j(D);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:y,replace:I,go(D){return d.go(D)}};return A}var Um;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Um||(Um={}));function X0(r,e,t){return t===void 0&&(t="/"),J0(r,e,t)}function J0(r,e,t,i){let o=typeof e=="string"?ni(e):e,l=Gs(o.pathname||"/",t);if(l==null)return null;let d=uv(r);Z0(d);let f=null;for(let m=0;f==null&&m<d.length;++m){let g=uw(l);f=lw(d[m],g)}return f}function uv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,d,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};m.relativePath.startsWith("/")&&(Ze(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let g=kr([i,m.relativePath]),x=t.concat(m);l.children&&l.children.length>0&&(Ze(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),uv(l.children,e,x,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:ow(g,l.index),routesMeta:x})};return r.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,d);else for(let m of dv(l.path))o(l,d,m)}),e}function dv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=dv(i.join("/")),f=[];return f.push(...d.map(m=>m===""?l:[l,m].join("/"))),o&&f.push(...d),f.map(m=>r.startsWith("/")&&m===""?"/":m)}function Z0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:aw(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const ew=/^:[\w-]+$/,tw=3,nw=2,rw=1,sw=10,iw=-2,$m=r=>r==="*";function ow(r,e){let t=r.split("/"),i=t.length;return t.some($m)&&(i+=iw),e&&(i+=nw),t.filter(o=>!$m(o)).reduce((o,l)=>o+(ew.test(l)?tw:l===""?rw:sw),i)}function aw(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function lw(r,e,t){let{routesMeta:i}=r,o={},l="/",d=[];for(let f=0;f<i.length;++f){let m=i[f],g=f===i.length-1,x=l==="/"?e:e.slice(l.length)||"/",_=Nd({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},x),y=m.route;if(!_)return null;Object.assign(o,_.params),d.push({params:o,pathname:kr([l,_.pathname]),pathnameBase:mw(kr([l,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(l=kr([l,_.pathnameBase]))}return d}function Nd(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=cw(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((g,x,_)=>{let{paramName:y,isOptional:I}=x;if(y==="*"){let A=f[_]||"";d=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const j=f[_];return I&&!j?g[y]=void 0:g[y]=(j||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:d,pattern:r}}function cw(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Qd(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function uw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qd(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Gs(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const dw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hw=r=>dw.test(r);function fw(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?ni(r):r,l;if(t)if(hw(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),Qd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=zm(t.substring(1),"/"):l=zm(t,e)}else l=e;return{pathname:l,search:gw(i),hash:vw(o)}}function zm(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function rd(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pw(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Yd(r,e){let t=pw(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Xd(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=ni(r):(o=xo({},r),Ze(!o.pathname||!o.pathname.includes("?"),rd("?","pathname","search",o)),Ze(!o.pathname||!o.pathname.includes("#"),rd("#","pathname","hash",o)),Ze(!o.search||!o.search.includes("#"),rd("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,f;if(d==null)f=t;else{let _=e.length-1;if(!i&&d.startsWith("..")){let y=d.split("/");for(;y[0]==="..";)y.shift(),_-=1;o.pathname=y.join("/")}f=_>=0?e[_]:"/"}let m=fw(o,f),g=d&&d!=="/"&&d.endsWith("/"),x=(l||d===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||x)&&(m.pathname+="/"),m}const kr=r=>r.join("/").replace(/\/\/+/g,"/"),mw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),gw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,vw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function _w(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const hv=["post","put","patch","delete"];new Set(hv);const yw=["get",...hv];new Set(yw);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},wo.apply(this,arguments)}const ql=C.createContext(null),fv=C.createContext(null),Kn=C.createContext(null),Gl=C.createContext(null),Qn=C.createContext({outlet:null,matches:[],isDataRoute:!1}),pv=C.createContext(null);function xw(r,e){let{relative:t}=e===void 0?{}:e;ri()||Ze(!1);let{basename:i,navigator:o}=C.useContext(Kn),{hash:l,pathname:d,search:f}=Kl(r,{relative:t}),m=d;return i!=="/"&&(m=d==="/"?i:kr([i,d])),o.createHref({pathname:m,search:f,hash:l})}function ri(){return C.useContext(Gl)!=null}function hs(){return ri()||Ze(!1),C.useContext(Gl).location}function mv(r){C.useContext(Kn).static||C.useLayoutEffect(r)}function Jd(){let{isDataRoute:r}=C.useContext(Qn);return r?Dw():ww()}function ww(){ri()||Ze(!1);let r=C.useContext(ql),{basename:e,future:t,navigator:i}=C.useContext(Kn),{matches:o}=C.useContext(Qn),{pathname:l}=hs(),d=JSON.stringify(Yd(o,t.v7_relativeSplatPath)),f=C.useRef(!1);return mv(()=>{f.current=!0}),C.useCallback(function(g,x){if(x===void 0&&(x={}),!f.current)return;if(typeof g=="number"){i.go(g);return}let _=Xd(g,JSON.parse(d),l,x.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:kr([e,_.pathname])),(x.replace?i.replace:i.push)(_,x.state,x)},[e,i,d,l,r])}function Nw(){let{matches:r}=C.useContext(Qn),e=r[r.length-1];return e?e.params:{}}function Kl(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=C.useContext(Kn),{matches:o}=C.useContext(Qn),{pathname:l}=hs(),d=JSON.stringify(Yd(o,i.v7_relativeSplatPath));return C.useMemo(()=>Xd(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function Sw(r,e){return Cw(r,e)}function Cw(r,e,t,i){ri()||Ze(!1);let{navigator:o}=C.useContext(Kn),{matches:l}=C.useContext(Qn),d=l[l.length-1],f=d?d.params:{};d&&d.pathname;let m=d?d.pathnameBase:"/";d&&d.route;let g=hs(),x;if(e){var _;let D=typeof e=="string"?ni(e):e;m==="/"||(_=D.pathname)!=null&&_.startsWith(m)||Ze(!1),x=D}else x=g;let y=x.pathname||"/",I=y;if(m!=="/"){let D=m.replace(/^\//,"").split("/");I="/"+y.replace(/^\//,"").split("/").slice(D.length).join("/")}let j=X0(r,{pathname:I}),A=bw(j&&j.map(D=>Object.assign({},D,{params:Object.assign({},f,D.params),pathname:kr([m,o.encodeLocation?o.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?m:kr([m,o.encodeLocation?o.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),l,t,i);return e&&A?C.createElement(Gl.Provider,{value:{location:wo({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Er.Pop}},A):A}function Ew(){let r=Aw(),e=_w(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:o},t):null,null)}const Iw=C.createElement(Ew,null);class kw extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?C.createElement(Qn.Provider,{value:this.props.routeContext},C.createElement(pv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tw(r){let{routeContext:e,match:t,children:i}=r,o=C.useContext(ql);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(Qn.Provider,{value:e},i)}function bw(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let x=d.findIndex(_=>_.route.id&&(f==null?void 0:f[_.route.id])!==void 0);x>=0||Ze(!1),d=d.slice(0,Math.min(d.length,x+1))}let m=!1,g=-1;if(t&&i&&i.v7_partialHydration)for(let x=0;x<d.length;x++){let _=d[x];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=x),_.route.id){let{loaderData:y,errors:I}=t,j=_.route.loader&&y[_.route.id]===void 0&&(!I||I[_.route.id]===void 0);if(_.route.lazy||j){m=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((x,_,y)=>{let I,j=!1,A=null,D=null;t&&(I=f&&_.route.id?f[_.route.id]:void 0,A=_.route.errorElement||Iw,m&&(g<0&&y===0?(Ow("route-fallback"),j=!0,D=null):g===y&&(j=!0,D=_.route.hydrateFallbackElement||null)));let J=e.concat(d.slice(0,y+1)),Q=()=>{let q;return I?q=A:j?q=D:_.route.Component?q=C.createElement(_.route.Component,null):_.route.element?q=_.route.element:q=x,C.createElement(Tw,{match:_,routeContext:{outlet:x,matches:J,isDataRoute:t!=null},children:q})};return t&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?C.createElement(kw,{location:t.location,revalidation:t.revalidation,component:A,error:I,children:Q(),routeContext:{outlet:null,matches:J,isDataRoute:!0}}):Q()},null)}var gv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(gv||{}),vv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(vv||{});function Pw(r){let e=C.useContext(ql);return e||Ze(!1),e}function jw(r){let e=C.useContext(fv);return e||Ze(!1),e}function Rw(r){let e=C.useContext(Qn);return e||Ze(!1),e}function _v(r){let e=Rw(),t=e.matches[e.matches.length-1];return t.route.id||Ze(!1),t.route.id}function Aw(){var r;let e=C.useContext(pv),t=jw(),i=_v();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function Dw(){let{router:r}=Pw(gv.UseNavigateStable),e=_v(vv.UseNavigateStable),t=C.useRef(!1);return mv(()=>{t.current=!0}),C.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,wo({fromRouteId:e},l)))},[r,e])}const Bm={};function Ow(r,e,t){Bm[r]||(Bm[r]=!0)}function Lw(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Mw(r){let{to:e,replace:t,state:i,relative:o}=r;ri()||Ze(!1);let{future:l,static:d}=C.useContext(Kn),{matches:f}=C.useContext(Qn),{pathname:m}=hs(),g=Jd(),x=Xd(e,Yd(f,l.v7_relativeSplatPath),m,o==="path"),_=JSON.stringify(x);return C.useEffect(()=>g(JSON.parse(_),{replace:t,state:i,relative:o}),[g,_,o,t,i]),null}function Fn(r){Ze(!1)}function Fw(r){let{basename:e="/",children:t=null,location:i,navigationType:o=Er.Pop,navigator:l,static:d=!1,future:f}=r;ri()&&Ze(!1);let m=e.replace(/^\/*/,"/"),g=C.useMemo(()=>({basename:m,navigator:l,static:d,future:wo({v7_relativeSplatPath:!1},f)}),[m,f,l,d]);typeof i=="string"&&(i=ni(i));let{pathname:x="/",search:_="",hash:y="",state:I=null,key:j="default"}=i,A=C.useMemo(()=>{let D=Gs(x,m);return D==null?null:{location:{pathname:D,search:_,hash:y,state:I,key:j},navigationType:o}},[m,x,_,y,I,j,o]);return A==null?null:C.createElement(Kn.Provider,{value:g},C.createElement(Gl.Provider,{children:t,value:A}))}function Vm(r){let{children:e,location:t}=r;return Sw(Sd(e),t)}new Promise(()=>{});function Sd(r,e){e===void 0&&(e=[]);let t=[];return C.Children.forEach(r,(i,o)=>{if(!C.isValidElement(i))return;let l=[...e,o];if(i.type===C.Fragment){t.push.apply(t,Sd(i.props.children,l));return}i.type!==Fn&&Ze(!1),!i.props.index||!i.props.children||Ze(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Sd(i.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},xl.apply(this,arguments)}function yv(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function Uw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function $w(r,e){return r.button===0&&(!e||e==="_self")&&!Uw(r)}const zw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Bw=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Vw="6";try{window.__reactRouterVersion=Vw}catch{}const Ww=C.createContext({isTransitioning:!1}),Hw="startTransition",Wm=z0[Hw];function qw(r){let{basename:e,children:t,future:i,window:o}=r,l=C.useRef();l.current==null&&(l.current=K0({window:o,v5Compat:!0}));let d=l.current,[f,m]=C.useState({action:d.action,location:d.location}),{v7_startTransition:g}=i||{},x=C.useCallback(_=>{g&&Wm?Wm(()=>m(_)):m(_)},[m,g]);return C.useLayoutEffect(()=>d.listen(x),[d,x]),C.useEffect(()=>Lw(i),[i]),C.createElement(Fw,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:d,future:i})}const Gw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ts=C.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:f,target:m,to:g,preventScrollReset:x,viewTransition:_}=e,y=yv(e,zw),{basename:I}=C.useContext(Kn),j,A=!1;if(typeof g=="string"&&Kw.test(g)&&(j=g,Gw))try{let q=new URL(window.location.href),te=g.startsWith("//")?new URL(q.protocol+g):new URL(g),ge=Gs(te.pathname,I);te.origin===q.origin&&ge!=null?g=ge+te.search+te.hash:A=!0}catch{}let D=xw(g,{relative:o}),J=Yw(g,{replace:d,state:f,target:m,preventScrollReset:x,relative:o,viewTransition:_});function Q(q){i&&i(q),q.defaultPrevented||J(q)}return C.createElement("a",xl({},y,{href:j||D,onClick:A||l?i:Q,ref:t,target:m}))}),ll=C.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:d=!1,style:f,to:m,viewTransition:g,children:x}=e,_=yv(e,Bw),y=Kl(m,{relative:_.relative}),I=hs(),j=C.useContext(fv),{navigator:A,basename:D}=C.useContext(Kn),J=j!=null&&Xw(y)&&g===!0,Q=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,q=I.pathname,te=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;o||(q=q.toLowerCase(),te=te?te.toLowerCase():null,Q=Q.toLowerCase()),te&&D&&(te=Gs(te,D)||te);const ge=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let ve=q===Q||!d&&q.startsWith(Q)&&q.charAt(ge)==="/",ae=te!=null&&(te===Q||!d&&te.startsWith(Q)&&te.charAt(Q.length)==="/"),he={isActive:ve,isPending:ae,isTransitioning:J},ye=ve?i:void 0,Ee;typeof l=="function"?Ee=l(he):Ee=[l,ve?"active":null,ae?"pending":null,J?"transitioning":null].filter(Boolean).join(" ");let je=typeof f=="function"?f(he):f;return C.createElement(ts,xl({},_,{"aria-current":ye,className:Ee,ref:t,style:je,to:m,viewTransition:g}),typeof x=="function"?x(he):x)});var Cd;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Cd||(Cd={}));var Hm;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Hm||(Hm={}));function Qw(r){let e=C.useContext(ql);return e||Ze(!1),e}function Yw(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:f}=e===void 0?{}:e,m=Jd(),g=hs(),x=Kl(r,{relative:d});return C.useCallback(_=>{if($w(_,t)){_.preventDefault();let y=i!==void 0?i:yl(g)===yl(x);m(r,{replace:y,state:o,preventScrollReset:l,relative:d,viewTransition:f})}},[g,m,x,i,o,t,r,l,d,f])}function Xw(r,e){e===void 0&&(e={});let t=C.useContext(Ww);t==null&&Ze(!1);let{basename:i}=Qw(Cd.useViewTransitionState),o=Kl(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Gs(t.currentLocation.pathname,i)||t.currentLocation.pathname,d=Gs(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Nd(o.pathname,d)!=null||Nd(o.pathname,l)!=null}const Jw=()=>{};var qm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V=function(r,e){if(!r)throw si(e)},si=function(r){return new Error("Firebase Database ("+xv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Zw=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],f=r[t++],m=((o&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Zd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,f=d?r[o+1]:0,m=o+2<r.length,g=m?r[o+2]:0,x=l>>2,_=(l&3)<<4|f>>4;let y=(f&15)<<2|g>>6,I=g&63;m||(I=64,d||(y=64)),i.push(t[x],t[_],t[y],t[I])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(wv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Zw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const g=o<r.length?t[r.charAt(o)]:64;++o;const _=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||g==null||_==null)throw new eN;const y=l<<2|f>>4;if(i.push(y),g!==64){const I=f<<4&240|g>>2;if(i.push(I),_!==64){const j=g<<6&192|_;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class eN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nv=function(r){const e=wv(r);return Zd.encodeByteArray(e,!0)},wl=function(r){return Nv(r).replace(/\./g,"")},Nl=function(r){try{return Zd.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(r){return Sv(void 0,r)}function Sv(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!nN(t)||(r[t]=Sv(r[t],e[t]));return r}function nN(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=()=>rN().__FIREBASE_DEFAULTS__,iN=()=>{if(typeof process>"u"||typeof qm>"u")return;const r=qm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},oN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Nl(r[1]);return e&&JSON.parse(e)},eh=()=>{try{return Jw()||sN()||iN()||oN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Cv=r=>{var e,t;return(t=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},aN=r=>{const e=Cv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Ev=()=>{var r;return(r=eh())===null||r===void 0?void 0:r.config},Iv=r=>{var e;return(e=eh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[wl(JSON.stringify(t)),wl(JSON.stringify(d)),""].join(".")}const fo={};function cN(){const r={prod:[],emulator:[]};for(const e of Object.keys(fo))fo[e]?r.emulator.push(e):r.prod.push(e);return r}function uN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Gm=!1;function Tv(r,e){if(typeof window>"u"||typeof document>"u"||!ii(window.location.host)||fo[r]===e||fo[r]||Gm)return;fo[r]=e;function t(y){return`__firebase__banner__${y}`}const i="__firebase__banner",l=cN().prod.length>0;function d(){const y=document.getElementById(i);y&&y.remove()}function f(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function m(y,I){y.setAttribute("width","24"),y.setAttribute("id",I),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function g(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Gm=!0,d()},y}function x(y,I){y.setAttribute("id",I),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function _(){const y=uN(i),I=t("text"),j=document.getElementById(I)||document.createElement("span"),A=t("learnmore"),D=document.getElementById(A)||document.createElement("a"),J=t("preprendIcon"),Q=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const q=y.element;f(q),x(D,A);const te=g();m(Q,J),q.append(Q,j,D,te),document.body.appendChild(q)}l?(j.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function th(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function dN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function bv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fN(){const r=Pt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function pN(){return xv.NODE_ADMIN===!0}function mN(){try{return typeof indexedDB=="object"}catch{return!1}}function gN(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="FirebaseError";class Lr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=vN,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lo.prototype.create)}}class Lo{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?_N(l,i):"Error",f=`${this.serviceName}: ${d} (${o}).`;return new Lr(o,f,i)}}function _N(r,e){return r.replace(yN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const yN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(r){return JSON.parse(r)}function ut(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=function(r){let e={},t={},i={},o="";try{const l=r.split(".");e=No(Nl(l[0])||""),t=No(Nl(l[1])||""),o=l[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:o}},xN=function(r){const e=Pv(r),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},wN=function(r){const e=Pv(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Ks(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function Ed(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Sl(r,e,t){const i={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=e.call(t,r[o],o,r));return i}function os(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],d=e[o];if(Km(l)&&Km(d)){if(!os(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Km(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function lo(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function co(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let _=0;_<16;_++)i[_]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let _=16;_<80;_++){const y=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(y<<1|y>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],d=this.chain_[2],f=this.chain_[3],m=this.chain_[4],g,x;for(let _=0;_<80;_++){_<40?_<20?(g=f^l&(d^f),x=1518500249):(g=l^d^f,x=1859775393):_<60?(g=l&d|f&(l|d),x=2400959708):(g=l^d^f,x=3395469782);const y=(o<<5|o>>>27)+g+m+x+i[_]&4294967295;m=f,f=d,d=(l<<30|l>>>2)&4294967295,l=o,o=y}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let o=0;const l=this.buf_;let d=this.inbuf_;for(;o<t;){if(d===0)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(l[d]=e.charCodeAt(o),++d,++o,d===this.blockSize){this.compress_(l),d=0;break}}else for(;o<t;)if(l[d]=e[o],++d,++o,d===this.blockSize){this.compress_(l),d=0;break}}this.inbuf_=d,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[o]>>l&255,++i;return e}}function SN(r,e){const t=new CN(r,e);return t.subscribe.bind(t)}class CN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");EN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=sd),o.error===void 0&&(o.error=sd),o.complete===void 0&&(o.complete=sd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function sd(){}function Ql(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);if(o>=55296&&o<=56319){const l=o-55296;i++,V(i<r.length,"Surrogate pair missing trail surrogate.");const d=r.charCodeAt(i)-56320;o=65536+(l<<10)+d}o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):o<65536?(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Yl=function(r){let e=0;for(let t=0;t<r.length;t++){const i=r.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(r){return r&&r._delegate?r._delegate:r}class as{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Oo;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bN(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TN(r){return r===ns?void 0:r}function bN(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const jN={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},RN=Ue.INFO,AN={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},DN=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=AN[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nh{constructor(e){this.name=e,this._logLevel=RN,this._logHandler=DN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const ON=(r,e)=>e.some(t=>r instanceof t);let Qm,Ym;function LN(){return Qm||(Qm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MN(){return Ym||(Ym=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jv=new WeakMap,Id=new WeakMap,Rv=new WeakMap,id=new WeakMap,rh=new WeakMap;function FN(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Tr(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&jv.set(t,r)}).catch(()=>{}),rh.set(e,r),e}function UN(r){if(Id.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Id.set(r,e)}let kd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Id.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Rv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tr(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $N(r){kd=r(kd)}function zN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(od(this),e,...t);return Rv.set(i,e.sort?e.sort():[e]),Tr(i)}:MN().includes(r)?function(...e){return r.apply(od(this),e),Tr(jv.get(this))}:function(...e){return Tr(r.apply(od(this),e))}}function BN(r){return typeof r=="function"?zN(r):(r instanceof IDBTransaction&&UN(r),ON(r,LN())?new Proxy(r,kd):r)}function Tr(r){if(r instanceof IDBRequest)return FN(r);if(id.has(r))return id.get(r);const e=BN(r);return e!==r&&(id.set(r,e),rh.set(e,r)),e}const od=r=>rh.get(r);function VN(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),f=Tr(d);return i&&d.addEventListener("upgradeneeded",m=>{i(Tr(d.result),m.oldVersion,m.newVersion,Tr(d.transaction),m)}),t&&d.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const WN=["get","getKey","getAll","getAllKeys","count"],HN=["put","add","delete","clear"],ad=new Map;function Xm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ad.get(e))return ad.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=HN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||WN.includes(t)))return;const l=async function(d,...f){const m=this.transaction(d,o?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),o&&m.done]))[0]};return ad.set(e,l),l}$N(r=>({...r,get:(e,t,i)=>Xm(e,t)||r.get(e,t,i),has:(e,t)=>!!Xm(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function GN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Td="@firebase/app",Jm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new nh("@firebase/app"),KN="@firebase/app-compat",QN="@firebase/analytics-compat",YN="@firebase/analytics",XN="@firebase/app-check-compat",JN="@firebase/app-check",ZN="@firebase/auth",eS="@firebase/auth-compat",tS="@firebase/database",nS="@firebase/data-connect",rS="@firebase/database-compat",sS="@firebase/functions",iS="@firebase/functions-compat",oS="@firebase/installations",aS="@firebase/installations-compat",lS="@firebase/messaging",cS="@firebase/messaging-compat",uS="@firebase/performance",dS="@firebase/performance-compat",hS="@firebase/remote-config",fS="@firebase/remote-config-compat",pS="@firebase/storage",mS="@firebase/storage-compat",gS="@firebase/firestore",vS="@firebase/ai",_S="@firebase/firestore-compat",yS="firebase",xS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="[DEFAULT]",wS={[Td]:"fire-core",[KN]:"fire-core-compat",[YN]:"fire-analytics",[QN]:"fire-analytics-compat",[JN]:"fire-app-check",[XN]:"fire-app-check-compat",[ZN]:"fire-auth",[eS]:"fire-auth-compat",[tS]:"fire-rtdb",[nS]:"fire-data-connect",[rS]:"fire-rtdb-compat",[sS]:"fire-fn",[iS]:"fire-fn-compat",[oS]:"fire-iid",[aS]:"fire-iid-compat",[lS]:"fire-fcm",[cS]:"fire-fcm-compat",[uS]:"fire-perf",[dS]:"fire-perf-compat",[hS]:"fire-rc",[fS]:"fire-rc-compat",[pS]:"fire-gcs",[mS]:"fire-gcs-compat",[gS]:"fire-fst",[_S]:"fire-fst-compat",[vS]:"fire-vertex","fire-js":"fire-js",[yS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Map,NS=new Map,Pd=new Map;function Zm(r,e){try{r.container.addComponent(e)}catch(t){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Qs(r){const e=r.name;if(Pd.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;Pd.set(e,r);for(const t of Cl.values())Zm(t,r);for(const t of NS.values())Zm(t,r);return!0}function sh(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function qt(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new Lo("app","Firebase",SS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=xS;function Av(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:bd,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw br.create("bad-app-name",{appName:String(o)});if(t||(t=Ev()),!t)throw br.create("no-options");const l=Cl.get(o);if(l){if(os(t,l.options)&&os(i,l.config))return l;throw br.create("duplicate-app",{appName:o})}const d=new PN(o);for(const m of Pd.values())d.addComponent(m);const f=new CS(t,i,d);return Cl.set(o,f),f}function Dv(r=bd){const e=Cl.get(r);if(!e&&r===bd&&Ev())return Av();if(!e)throw br.create("no-app",{appName:r});return e}function Pr(r,e,t){var i;let o=(i=wS[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(f.join(" "));return}Qs(new as(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firebase-heartbeat-database",IS=1,So="firebase-heartbeat-store";let ld=null;function Ov(){return ld||(ld=VN(ES,IS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(So)}catch(t){console.warn(t)}}}}).catch(r=>{throw br.create("idb-open",{originalErrorMessage:r.message})})),ld}async function kS(r){try{const t=(await Ov()).transaction(So),i=await t.objectStore(So).get(Lv(r));return await t.done,i}catch(e){if(e instanceof Lr)Hn.warn(e.message);else{const t=br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(t.message)}}}async function eg(r,e){try{const i=(await Ov()).transaction(So,"readwrite");await i.objectStore(So).put(e,Lv(r)),await i.done}catch(t){if(t instanceof Lr)Hn.warn(t.message);else{const i=br.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hn.warn(i.message)}}}function Lv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=1024,bS=30;class PS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new RS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=tg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>bS){const d=AS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Hn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tg(),{heartbeatsToSend:i,unsentEntries:o}=jS(this._heartbeatsCache.heartbeats),l=wl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Hn.warn(t),""}}}function tg(){return new Date().toISOString().substring(0,10)}function jS(r,e=TS){const t=[];let i=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),ng(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ng(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class RS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mN()?gN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return eg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return eg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ng(r){return wl(JSON.stringify({version:2,heartbeats:r})).length}function AS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(r){Qs(new as("platform-logger",e=>new qN(e),"PRIVATE")),Qs(new as("heartbeat",e=>new PS(e),"PRIVATE")),Pr(Td,Jm,r),Pr(Td,Jm,"esm2017"),Pr("fire-js","")}DS("");var rg={};const sg="@firebase/database",ig="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mv="";function OS(r){Mv=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:No(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return In(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new LS(e)}}catch{}return new MS},ss=Fv("localStorage"),FS=Fv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new nh("@firebase/database"),US=(function(){let r=1;return function(){return r++}})(),Uv=function(r){const e=IN(r),t=new NN;t.update(e);const i=t.digest();return Zd.encodeByteArray(i)},Mo=function(...r){let e="";for(let t=0;t<r.length;t++){const i=r[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Mo.apply(null,i):typeof i=="object"?e+=ut(i):e+=i,e+=" "}return e};let po=null,og=!0;const $S=function(r,e){V(!0,"Can't turn on custom loggers persistently."),Bs.logLevel=Ue.VERBOSE,po=Bs.log.bind(Bs)},_t=function(...r){if(og===!0&&(og=!1,po===null&&FS.get("logging_enabled")===!0&&$S()),po){const e=Mo.apply(null,r);po(e)}},Fo=function(r){return function(...e){_t(r,...e)}},jd=function(...r){const e="FIREBASE INTERNAL ERROR: "+Mo(...r);Bs.error(e)},qn=function(...r){const e=`FIREBASE FATAL ERROR: ${Mo(...r)}`;throw Bs.error(e),new Error(e)},bt=function(...r){const e="FIREBASE WARNING: "+Mo(...r);Bs.warn(e)},zS=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ih=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},BS=function(r){if(document.readyState==="complete")r();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ys="[MIN_NAME]",ls="[MAX_NAME]",fs=function(r,e){if(r===e)return 0;if(r===Ys||e===ls)return-1;if(e===Ys||r===ls)return 1;{const t=ag(r),i=ag(e);return t!==null?i!==null?t-i===0?r.length-e.length:t-i:-1:i!==null?1:r<e?-1:1}},VS=function(r,e){return r===e?0:r<e?-1:1},ro=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+ut(e))},oh=function(r){if(typeof r!="object"||r===null)return ut(r);const e=[];for(const i in r)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=ut(e[i]),t+=":",t+=oh(r[e[i]]);return t+="}",t},$v=function(r,e){const t=r.length;if(t<=e)return[r];const i=[];for(let o=0;o<t;o+=e)o+e>t?i.push(r.substring(o,t)):i.push(r.substring(o,o+e));return i};function yt(r,e){for(const t in r)r.hasOwnProperty(t)&&e(t,r[t])}const zv=function(r){V(!ih(r),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let o,l,d,f,m;r===0?(l=0,d=0,o=1/r===-1/0?1:0):(o=r<0,r=Math.abs(r),r>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(r)/Math.LN2),i),l=f+i,d=Math.round(r*Math.pow(2,t-f)-Math.pow(2,t))):(l=0,d=Math.round(r/Math.pow(2,1-i-t))));const g=[];for(m=t;m;m-=1)g.push(d%2?1:0),d=Math.floor(d/2);for(m=e;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(o?1:0),g.reverse();const x=g.join("");let _="";for(m=0;m<64;m+=8){let y=parseInt(x.substr(m,8),2).toString(16);y.length===1&&(y="0"+y),_=_+y}return _.toLowerCase()},WS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},HS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function qS(r,e){let t="Unknown Error";r==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?t="Client doesn't have permission to access the desired data.":r==="unavailable"&&(t="The service is unavailable");const i=new Error(r+" at "+e._path.toString()+": "+t);return i.code=r.toUpperCase(),i}const GS=new RegExp("^-?(0*)\\d{1,10}$"),KS=-2147483648,QS=2147483647,ag=function(r){if(GS.test(r)){const e=Number(r);if(e>=KS&&e<=QS)return e}return null},li=function(r){try{r()}catch(e){setTimeout(()=>{const t=e.stack||"";throw bt("Exception was thrown by user callback.",t),e},Math.floor(0))}},YS=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},mo=function(r,e){const t=setTimeout(r,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,qt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){bt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bt(e)}}class fl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}fl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="5",Bv="v",Vv="s",Wv="r",Hv="f",qv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gv="ls",Kv="p",Rd="ac",Qv="websocket",Yv="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,i,o,l=!1,d="",f=!1,m=!1,g=null){this.secure=t,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ss.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ss.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function ZS(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function Jv(r,e,t){V(typeof e=="string","typeof type must == string"),V(typeof t=="object","typeof params must == object");let i;if(e===Qv)i=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===Yv)i=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ZS(r)&&(t.ns=r.namespace);const o=[];return yt(t,(l,d)=>{o.push(l+"="+d)}),i+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.counters_={}}incrementCounter(e,t=1){In(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return tN(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd={},ud={};function lh(r){const e=r.toString();return cd[e]||(cd[e]=new eC),cd[e]}function tC(r,e){const t=r.toString();return ud[t]||(ud[t]=e()),ud[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&li(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="start",rC="close",sC="pLPCommand",iC="pRTLPCB",Zv="id",e_="pw",t_="ser",oC="cb",aC="seg",lC="ts",cC="d",uC="dframe",n_=1870,r_=30,dC=n_-r_,hC=25e3,fC=3e4;class zs{constructor(e,t,i,o,l,d,f){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fo(e),this.stats_=lh(t),this.urlFn=m=>(this.appCheckToken&&(m[Rd]=this.appCheckToken),Jv(t,Yv,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(fC)),BS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ch((...l)=>{const[d,f,m,g,x]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===lg)this.id=f,this.password=m;else if(d===rC)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...l)=>{const[d,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[lg]="t",i[t_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[oC]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Bv]=ah,this.transportSessionId&&(i[Vv]=this.transportSessionId),this.lastSessionId&&(i[Gv]=this.lastSessionId),this.applicationId&&(i[Kv]=this.applicationId),this.appCheckToken&&(i[Rd]=this.appCheckToken),typeof location<"u"&&location.hostname&&qv.test(location.hostname)&&(i[Wv]=Hv);const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){zs.forceAllow_=!0}static forceDisallow(){zs.forceDisallow_=!0}static isAvailable(){return zs.forceAllow_?!0:!zs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WS()&&!HS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=Nv(t),o=$v(i,dC);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[uC]="t",i[Zv]=e,i[e_]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ut(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ch{constructor(e,t,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=US(),window[sC+this.uniqueCallbackIdentifier]=e,window[iC+this.uniqueCallbackIdentifier]=t,this.myIFrame=ch.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){_t("frame writing exception"),f.stack&&_t(f.stack),_t(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Zv]=this.myID,e[e_]=this.myPW,e[t_]=this.currentSerial;let t=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+r_+i.length<=n_;){const d=this.pendingSegs.shift();i=i+"&"+aC+o+"="+d.seg+"&"+lC+o+"="+d.ts+"&"+cC+o+"="+d.d,o++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(i,Math.floor(hC)),l=()=>{clearTimeout(o),i()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=16384,mC=45e3;let El=null;typeof MozWebSocket<"u"?El=MozWebSocket:typeof WebSocket<"u"&&(El=WebSocket);class hn{constructor(e,t,i,o,l,d,f){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fo(this.connId),this.stats_=lh(t),this.connURL=hn.connectionURL_(t,d,f,o,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,o,l){const d={};return d[Bv]=ah,typeof location<"u"&&location.hostname&&qv.test(location.hostname)&&(d[Wv]=Hv),t&&(d[Vv]=t),i&&(d[Gv]=i),o&&(d[Rd]=o),l&&(d[Kv]=l),Jv(e,Qv,d)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ss.set("previous_websocket_failure",!0);try{let i;pN(),this.mySock=new El(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){hn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&El!==null&&!hn.forceDisallow_}static previouslyFailed(){return ss.isInMemoryStorage||ss.get("previous_websocket_failure")===!0}markConnectionHealthy(){ss.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=No(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(V(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=$v(t,pC);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(mC))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hn.responsesRequiredToBeHealthy=2;hn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static get ALL_TRANSPORTS(){return[zs,hn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=hn&&hn.isAvailable();let i=t&&!hn.previouslyFailed();if(e.webSocketOnly&&(t||bt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[hn];else{const o=this.transports_=[];for(const l of Co.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);Co.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Co.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=6e4,vC=5e3,_C=10*1024,yC=100*1024,dd="t",cg="d",xC="s",ug="r",wC="e",dg="o",hg="a",fg="n",pg="p",NC="h";class SC{constructor(e,t,i,o,l,d,f,m,g,x){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fo("c:"+this.id+":"),this.transportManager_=new Co(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=mo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>yC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>_C?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(dd in e){const t=e[dd];t===hg?this.upgradeIfSecondaryHealthy_():t===ug?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===dg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ro("t",e),i=ro("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:pg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:fg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ro("t",e),i=ro("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ro(dd,e);if(cg in e){const i=e[cg];if(t===NC){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(t===fg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===xC?this.onConnectionShutdown_(i):t===ug?this.onReset_(i):t===wC?jd("Server Error: "+i):t===dg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jd("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ah!==i&&bt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),mo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(gC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(vC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:pg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ss.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{put(e,t,i,o){}merge(e,t,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){this.allowedEvents_=e,this.listeners_={},V(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const o=this.getInitialEvent(e);o&&t.apply(i,o)}off(e,t,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!i||i===o[l].context)){o.splice(l,1);return}}validateEventType_(e){V(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends i_{static getInstance(){return new Il}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!th()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return V(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=32,gg=768;class $e{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Oe(){return new $e("")}function ke(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function Ar(r){return r.pieces_.length-r.pieceNum_}function Ve(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new $e(r.pieces_,e)}function uh(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function CC(r){let e="";for(let t=r.pieceNum_;t<r.pieces_.length;t++)r.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[t])));return e||"/"}function Eo(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function o_(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let t=r.pieceNum_;t<r.pieces_.length-1;t++)e.push(r.pieces_[t]);return new $e(e,0)}function nt(r,e){const t=[];for(let i=r.pieceNum_;i<r.pieces_.length;i++)t.push(r.pieces_[i]);if(e instanceof $e)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&t.push(i[o])}return new $e(t,0)}function Pe(r){return r.pieceNum_>=r.pieces_.length}function Tt(r,e){const t=ke(r),i=ke(e);if(t===null)return e;if(t===i)return Tt(Ve(r),Ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function EC(r,e){const t=Eo(r,0),i=Eo(e,0);for(let o=0;o<t.length&&o<i.length;o++){const l=fs(t[o],i[o]);if(l!==0)return l}return t.length===i.length?0:t.length<i.length?-1:1}function dh(r,e){if(Ar(r)!==Ar(e))return!1;for(let t=r.pieceNum_,i=e.pieceNum_;t<=r.pieces_.length;t++,i++)if(r.pieces_[t]!==e.pieces_[i])return!1;return!0}function en(r,e){let t=r.pieceNum_,i=e.pieceNum_;if(Ar(r)>Ar(e))return!1;for(;t<r.pieces_.length;){if(r.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class IC{constructor(e,t){this.errorPrefix_=t,this.parts_=Eo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Yl(this.parts_[i]);a_(this)}}function kC(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=Yl(e),a_(r)}function TC(r){const e=r.parts_.pop();r.byteLength_-=Yl(e),r.parts_.length>0&&(r.byteLength_-=1)}function a_(r){if(r.byteLength_>gg)throw new Error(r.errorPrefix_+"has a key path longer than "+gg+" bytes ("+r.byteLength_+").");if(r.parts_.length>mg)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mg+") or object contains a cycle "+rs(r))}function rs(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends i_{static getInstance(){return new hh}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return V(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=1e3,bC=300*1e3,vg=30*1e3,PC=1.3,jC=3e4,RC="server_kill",_g=3;class Vn extends s_{constructor(e,t,i,o,l,d,f,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=Vn.nextPersistentConnectionId_++,this.log_=Fo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=so,this.maxReconnectDelay_=bC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Il.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const o=++this.requestNumber_,l={r:o,a:e,b:t};this.log_(ut(l)),V(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const t=new Oo,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const f=d.d;d.s==="ok"?t.resolve(f):t.reject(f)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,i,o){this.initConnection_();const l=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),V(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),V(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:t,query:e,tag:i};this.listens.get(d).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),o=t._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i},d="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(d,l,f=>{const m=f.d,g=f.s;Vn.warnOnListenWarnings_(m,t),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&In(e,"w")){const i=Ks(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();bt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||wN(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=xN(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,o=>{const l=o.s,d=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),V(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,t)}sendUnlisten_(e,t,i,o){this.log_("Unlisten on "+e+" for "+t);const l={p:e},d="n";o&&(l.q=i,l.t=o),this.sendRequest(d,l)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,o){const l={p:t,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,t,i,o){this.putInternal("p",e,t,i,o)}merge(e,t,i,o){this.putInternal("m",e,t,i,o)}putInternal(e,t,i,o,l){this.initConnection_();const d={p:t,d:i};l!==void 0&&(d.h=l),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ut(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):jd("Unrecognized action received from server: "+ut(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){V(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=so,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=so,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>jC&&(this.reconnectDelay_=so),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*PC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Vn.nextConnectionId_++,l=this.lastSessionId;let d=!1,f=null;const m=function(){f?f.close():(d=!0,i())},g=function(_){V(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(_)};this.realtime_={close:m,sendRequest:g};const x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,y]=await Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);d?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=y&&y.token,f=new SC(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,I=>{bt(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(RC)},l))}catch(_){this.log_("Failed to get token: "+_),d||(this.repoInfo_.nodeAdmin&&bt(_),m())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ed(this.interruptReasons_)&&(this.reconnectDelay_=so,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(l=>oh(l)).join("$"):i="default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,t){const i=new $e(e).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(t),l.delete(t),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,t){_t("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_g&&(this.reconnectDelay_=vg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){_t("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_g&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Mv.replace(/\./g,"-")]=1,th()?e["framework.cordova"]=1:bv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Il.getInstance().currentlyOnline();return Ed(this.interruptReasons_)&&e}}Vn.nextPersistentConnectionId_=0;Vn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Te(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Te(Ys,e),o=new Te(Ys,t);return this.compare(i,o)!==0}minPost(){return Te.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl;class l_ extends Xl{static get __EMPTY_NODE(){return cl}static set __EMPTY_NODE(e){cl=e}compare(e,t){return fs(e.name,t.name)}isDefinedOn(e){throw si("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Te.MIN}maxPost(){return new Te(ls,cl)}makePost(e,t){return V(typeof e=="string","KeyIndex indexValue must always be a string."),new Te(e,cl)}toString(){return".key"}}const Vs=new l_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t,i,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=t?i(e.key,t):1,o&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class mt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??mt.RED,this.left=o??Ft.EMPTY_NODE,this.right=l??Ft.EMPTY_NODE}copy(e,t,i,o,l){return new mt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o=o.copy(null,t,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ft.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,o;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Ft.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}mt.RED=!0;mt.BLACK=!1;class AC{copy(e,t,i,o,l){return this}insert(e,t,i){return new mt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ft{constructor(e,t=Ft.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ft(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,mt.BLACK,null,null))}remove(e){return new Ft(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,o=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(o=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ul(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ul(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ul(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ul(this.root_,null,this.comparator_,!0,e)}}Ft.EMPTY_NODE=new AC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(r,e){return fs(r.name,e.name)}function fh(r,e){return fs(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad;function OC(r){Ad=r}const c_=function(r){return typeof r=="number"?"number:"+zv(r):"string:"+r},u_=function(r){if(r.isLeafNode()){const e=r.val();V(typeof e=="string"||typeof e=="number"||typeof e=="object"&&In(e,".sv"),"Priority must be a string or number.")}else V(r===Ad||r.isEmpty(),"priority of unexpected type.");V(r===Ad||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yg;class pt{static set __childrenNodeConstructor(e){yg=e}static get __childrenNodeConstructor(){return yg}constructor(e,t=pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,V(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),u_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Pe(e)?this:ke(e)===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=ke(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(V(i!==".priority"||Ar(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ve(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+c_(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=zv(this.value_):e+=this.value_,this.lazyHash_=Uv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pt.__childrenNodeConstructor?-1:(V(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,o=pt.VALUE_TYPE_ORDER.indexOf(t),l=pt.VALUE_TYPE_ORDER.indexOf(i);return V(o>=0,"Unknown leaf type: "+t),V(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d_,h_;function LC(r){d_=r}function MC(r){h_=r}class FC extends Xl{compare(e,t){const i=e.node.getPriority(),o=t.node.getPriority(),l=i.compareTo(o);return l===0?fs(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Te.MIN}maxPost(){return new Te(ls,new pt("[PRIORITY-POST]",h_))}makePost(e,t){const i=d_(e);return new Te(t,new pt("[PRIORITY-POST]",i))}toString(){return".priority"}}const rt=new FC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=Math.log(2);class $C{constructor(e){const t=l=>parseInt(Math.log(l)/UC,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const o=i(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const kl=function(r,e,t,i){r.sort(e);const o=function(m,g){const x=g-m;let _,y;if(x===0)return null;if(x===1)return _=r[m],y=t?t(_):_,new mt(y,_.node,mt.BLACK,null,null);{const I=parseInt(x/2,10)+m,j=o(m,I),A=o(I+1,g);return _=r[I],y=t?t(_):_,new mt(y,_.node,mt.BLACK,j,A)}},l=function(m){let g=null,x=null,_=r.length;const y=function(j,A){const D=_-j,J=_;_-=j;const Q=o(D+1,J),q=r[D],te=t?t(q):q;I(new mt(te,q.node,A,null,Q))},I=function(j){g?(g.left=j,g=j):(x=j,g=j)};for(let j=0;j<m.count;++j){const A=m.nextBitIsOne(),D=Math.pow(2,m.count-(j+1));A?y(D,mt.BLACK):(y(D,mt.BLACK),y(D,mt.RED))}return x},d=new $C(r.length),f=l(d);return new Ft(i||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd;const $s={};class $n{static get Default(){return V($s&&rt,"ChildrenNode.ts has not been loaded"),hd=hd||new $n({".priority":$s},{".priority":rt}),hd}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Ks(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ft?t:null}hasIndex(e){return In(this.indexSet_,e.toString())}addIndex(e,t){V(e!==Vs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const l=t.getIterator(Te.Wrap);let d=l.getNext();for(;d;)o=o||e.isDefinedOn(d.node),i.push(d),d=l.getNext();let f;o?f=kl(i,e.getCompare()):f=$s;const m=e.toString(),g=Object.assign({},this.indexSet_);g[m]=e;const x=Object.assign({},this.indexes_);return x[m]=f,new $n(x,g)}addToIndexes(e,t){const i=Sl(this.indexes_,(o,l)=>{const d=Ks(this.indexSet_,l);if(V(d,"Missing index implementation for "+l),o===$s)if(d.isDefinedOn(e.node)){const f=[],m=t.getIterator(Te.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&f.push(g),g=m.getNext();return f.push(e),kl(f,d.getCompare())}else return $s;else{const f=t.get(e.name);let m=o;return f&&(m=m.remove(new Te(e.name,f))),m.insert(e,e.node)}});return new $n(i,this.indexSet_)}removeFromIndexes(e,t){const i=Sl(this.indexes_,o=>{if(o===$s)return o;{const l=t.get(e.name);return l?o.remove(new Te(e.name,l)):o}});return new $n(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io;class xe{static get EMPTY_NODE(){return io||(io=new xe(new Ft(fh),null,$n.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&u_(this.priorityNode_),this.children_.isEmpty()&&V(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||io}updatePriority(e){return this.children_.isEmpty()?this:new xe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?io:t}}getChild(e){const t=ke(e);return t===null?this:this.getImmediateChild(t).getChild(Ve(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(V(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Te(e,t);let o,l;t.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(i,this.children_));const d=o.isEmpty()?io:this.priorityNode_;return new xe(o,d,l)}}updateChild(e,t){const i=ke(e);if(i===null)return t;{V(ke(e)!==".priority"||Ar(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Ve(e),t);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,o=0,l=!0;if(this.forEachChild(rt,(d,f)=>{t[d]=f.val(e),i++,l&&xe.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):l=!1}),!e&&l&&o<2*i){const d=[];for(const f in t)d[f]=t[f];return d}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+c_(this.getPriority().val())+":"),this.forEachChild(rt,(t,i)=>{const o=i.hash();o!==""&&(e+=":"+t+":"+o)}),this.lazyHash_=e===""?"":Uv(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new Te(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Te(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Te(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>t(o.name,o.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Te.Wrap);let l=o.peek();for(;l!=null&&t.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Te.Wrap);let l=o.peek();for(;l!=null&&t.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Uo?-1:0}withIndex(e){if(e===Vs||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new xe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Vs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(rt),o=t.getIterator(rt);let l=i.getNext(),d=o.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=o.getNext()}return l===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===Vs?null:this.indexMap_.get(e.toString())}}xe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class zC extends xe{constructor(){super(new Ft(fh),xe.EMPTY_NODE,$n.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xe.EMPTY_NODE}isEmpty(){return!1}}const Uo=new zC;Object.defineProperties(Te,{MIN:{value:new Te(Ys,xe.EMPTY_NODE)},MAX:{value:new Te(ls,Uo)}});l_.__EMPTY_NODE=xe.EMPTY_NODE;pt.__childrenNodeConstructor=xe;OC(Uo);MC(Uo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=!0;function ct(r,e=null){if(r===null)return xe.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),V(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const t=r;return new pt(t,ct(e))}if(!(r instanceof Array)&&BC){const t=[];let i=!1;if(yt(r,(d,f)=>{if(d.substring(0,1)!=="."){const m=ct(f);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new Te(d,m)))}}),t.length===0)return xe.EMPTY_NODE;const l=kl(t,DC,d=>d.name,fh);if(i){const d=kl(t,rt.getCompare());return new xe(l,ct(e),new $n({".priority":d},{".priority":rt}))}else return new xe(l,ct(e),$n.Default)}else{let t=xe.EMPTY_NODE;return yt(r,(i,o)=>{if(In(r,i)&&i.substring(0,1)!=="."){const l=ct(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(ct(e))}}LC(ct);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends Xl{constructor(e){super(),this.indexPath_=e,V(!Pe(e)&&ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),o=this.extractChild(t.node),l=i.compareTo(o);return l===0?fs(e.name,t.name):l}makePost(e,t){const i=ct(e),o=xe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Te(t,o)}maxPost(){const e=xe.EMPTY_NODE.updateChild(this.indexPath_,Uo);return new Te(ls,e)}toString(){return Eo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC extends Xl{compare(e,t){const i=e.node.compareTo(t.node);return i===0?fs(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Te.MIN}maxPost(){return Te.MAX}makePost(e,t){const i=ct(e);return new Te(t,i)}toString(){return".value"}}const HC=new WC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(r){return{type:"value",snapshotNode:r}}function Xs(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function Io(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function ko(r,e,t){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:t}}function qC(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.index_=e}updateChild(e,t,i,o,l,d){V(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(o).equals(i.getChild(o))&&f.isEmpty()===i.isEmpty()||(d!=null&&(i.isEmpty()?e.hasChild(t)?d.trackChildChange(Io(t,f)):V(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(Xs(t,i)):d.trackChildChange(ko(t,i,f))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(rt,(o,l)=>{t.hasChild(o)||i.trackChildChange(Io(o,l))}),t.isLeafNode()||t.forEachChild(rt,(o,l)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(l)||i.trackChildChange(ko(o,l,d))}else i.trackChildChange(Xs(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?xe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.indexedFilter_=new ph(e.getIndex()),this.index_=e.getIndex(),this.startPost_=To.getStartPost_(e),this.endPost_=To.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,o,l,d){return this.matches(new Te(t,i))||(i=xe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,o,l,d)}updateFullNode(e,t,i){t.isLeafNode()&&(t=xe.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(xe.EMPTY_NODE);const l=this;return t.forEachChild(rt,(d,f)=>{l.matches(new Te(d,f))||(o=o.updateImmediateChild(d,xe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new To(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,o,l,d){return this.rangedFilter_.matches(new Te(t,i))||(i=xe.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,o,l,d):this.fullLimitUpdateChild_(e,t,i,l,d)}updateFullNode(e,t,i){let o;if(t.isLeafNode()||t.isEmpty())o=xe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){o=xe.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;l.hasNext()&&d<this.limit_;){const f=l.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))o=o.updateImmediateChild(f.name,f.node),d++;else break;else continue}}else{o=t.withIndex(this.index_),o=o.updatePriority(xe.EMPTY_NODE);let l;this.reverse_?l=o.getReverseIterator(this.index_):l=o.getIterator(this.index_);let d=0;for(;l.hasNext();){const f=l.getNext();d<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?d++:o=o.updateImmediateChild(f.name,xe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,o,l){let d;if(this.reverse_){const _=this.index_.getCompare();d=(y,I)=>_(I,y)}else d=this.index_.getCompare();const f=e;V(f.numChildren()===this.limit_,"");const m=new Te(t,i),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),x=this.rangedFilter_.matches(m);if(f.hasChild(t)){const _=f.getImmediateChild(t);let y=o.getChildAfterChild(this.index_,g,this.reverse_);for(;y!=null&&(y.name===t||f.hasChild(y.name));)y=o.getChildAfterChild(this.index_,y,this.reverse_);const I=y==null?1:d(y,m);if(x&&!i.isEmpty()&&I>=0)return l!=null&&l.trackChildChange(ko(t,i,_)),f.updateImmediateChild(t,i);{l!=null&&l.trackChildChange(Io(t,_));const A=f.updateImmediateChild(t,xe.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(l!=null&&l.trackChildChange(Xs(y.name,y.node)),A.updateImmediateChild(y.name,y.node)):A}}else return i.isEmpty()?e:x&&d(g,m)>=0?(l!=null&&(l.trackChildChange(Io(g.name,g.node)),l.trackChildChange(Xs(t,i))),f.updateImmediateChild(t,i).updateImmediateChild(g.name,xe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return V(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return V(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ys}hasEnd(){return this.endSet_}getIndexEndValue(){return V(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return V(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ls}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return V(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rt}copy(){const e=new mh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function KC(r){return r.loadsAllData()?new ph(r.getIndex()):r.hasLimit()?new GC(r):new To(r)}function xg(r){const e={};if(r.isDefault())return e;let t;if(r.index_===rt?t="$priority":r.index_===HC?t="$value":r.index_===Vs?t="$key":(V(r.index_ instanceof VC,"Unrecognized index type!"),t=r.index_.toString()),e.orderBy=ut(t),r.startSet_){const i=r.startAfterSet_?"startAfter":"startAt";e[i]=ut(r.indexStartValue_),r.startNameSet_&&(e[i]+=","+ut(r.indexStartName_))}if(r.endSet_){const i=r.endBeforeSet_?"endBefore":"endAt";e[i]=ut(r.indexEndValue_),r.endNameSet_&&(e[i]+=","+ut(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function wg(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let t=r.viewFrom_;t===""&&(r.isViewFromLeft()?t="l":t="r"),e.vf=t}return r.index_!==rt&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends s_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(V(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=Fo("p:rest:"),this.listens_={}}listen(e,t,i,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const d=Tl.getListenId_(e,i),f={};this.listens_[d]=f;const m=xg(e._queryParams);this.restRequest_(l+".json",m,(g,x)=>{let _=x;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(l,_,!1,i),Ks(this.listens_,d)===f){let y;g?g===401?y="permission_denied":y="rest_error:"+g:y="ok",o(y,null)}})}unlisten(e,t){const i=Tl.getListenId_(e,t);delete this.listens_[i]}get(e){const t=xg(e._queryParams),i=e._path.toString(),o=new Oo;return this.restRequest_(i+".json",t,(l,d)=>{let f=d;l===404&&(f=null,l=null),l===null?(this.onDataUpdate_(i,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+oi(t);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=No(f.responseText)}catch{bt("Failed to parse JSON response for "+d+": "+f.responseText)}i(null,m)}else f.status!==401&&f.status!==404&&bt("Got unsuccessful REST response for "+d+" Status: "+f.status),i(f.status);i=null}},f.open("GET",d,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.rootNode_=xe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(){return{value:null,children:new Map}}function p_(r,e,t){if(Pe(e))r.value=t,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,t);else{const i=ke(e);r.children.has(i)||r.children.set(i,bl());const o=r.children.get(i);e=Ve(e),p_(o,e,t)}}function Dd(r,e,t){r.value!==null?t(e,r.value):YC(r,(i,o)=>{const l=new $e(e.toString()+"/"+i);Dd(o,l,t)})}function YC(r,e){r.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&yt(this.last_,(i,o)=>{t[i]=t[i]-o}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=10*1e3,JC=30*1e3,ZC=300*1e3;class eE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new XC(e);const i=Ng+(JC-Ng)*Math.random();mo(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;yt(e,(o,l)=>{l>0&&In(this.statsToReport_,o)&&(t[o]=l,i=!0)}),i&&this.server_.reportStats(t),mo(this.reportStats_.bind(this),Math.floor(Math.random()*2*ZC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(fn||(fn={}));function gh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function vh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _h(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=fn.ACK_USER_WRITE,this.source=gh()}operationForChild(e){if(Pe(this.path)){if(this.affectedTree.value!=null)return V(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new $e(e));return new Pl(Oe(),t,this.revert)}}else return V(ke(this.path)===e,"operationForChild called for unrelated child."),new Pl(Ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t){this.source=e,this.path=t,this.type=fn.LISTEN_COMPLETE}operationForChild(e){return Pe(this.path)?new bo(this.source,Oe()):new bo(this.source,Ve(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=fn.OVERWRITE}operationForChild(e){return Pe(this.path)?new cs(this.source,Oe(),this.snap.getImmediateChild(e)):new cs(this.source,Ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=fn.MERGE}operationForChild(e){if(Pe(this.path)){const t=this.children.subtree(new $e(e));return t.isEmpty()?null:t.value?new cs(this.source,Oe(),t.value):new Js(this.source,Oe(),t)}else return V(ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Js(this.source,Ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Pe(e))return this.isFullyInitialized()&&!this.filtered_;const t=ke(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nE(r,e,t,i){const o=[],l=[];return e.forEach(d=>{d.type==="child_changed"&&r.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&l.push(qC(d.childName,d.snapshotNode))}),oo(r,o,"child_removed",e,i,t),oo(r,o,"child_added",e,i,t),oo(r,o,"child_moved",l,i,t),oo(r,o,"child_changed",e,i,t),oo(r,o,"value",e,i,t),o}function oo(r,e,t,i,o,l){const d=i.filter(f=>f.type===t);d.sort((f,m)=>sE(r,f,m)),d.forEach(f=>{const m=rE(r,f,l);o.forEach(g=>{g.respondsTo(f.type)&&e.push(g.createEvent(m,r.query_))})})}function rE(r,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function sE(r,e,t){if(e.childName==null||t.childName==null)throw si("Should only compare child_ events.");const i=new Te(e.childName,e.snapshotNode),o=new Te(t.childName,t.snapshotNode);return r.index_.compare(i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(r,e){return{eventCache:r,serverCache:e}}function go(r,e,t,i){return Jl(new Dr(e,t,i),r.serverCache)}function m_(r,e,t,i){return Jl(r.eventCache,new Dr(e,t,i))}function jl(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function us(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd;const iE=()=>(fd||(fd=new Ft(VS)),fd);class Be{static fromObject(e){let t=new Be(null);return yt(e,(i,o)=>{t=t.set(new $e(i),o)}),t}constructor(e,t=iE()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Oe(),value:this.value};if(Pe(e))return null;{const i=ke(e),o=this.children.get(i);if(o!==null){const l=o.findRootMostMatchingPathAndValue(Ve(e),t);return l!=null?{path:nt(new $e(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Pe(e))return this;{const t=ke(e),i=this.children.get(t);return i!==null?i.subtree(Ve(e)):new Be(null)}}set(e,t){if(Pe(e))return new Be(t,this.children);{const i=ke(e),l=(this.children.get(i)||new Be(null)).set(Ve(e),t),d=this.children.insert(i,l);return new Be(this.value,d)}}remove(e){if(Pe(e))return this.children.isEmpty()?new Be(null):new Be(null,this.children);{const t=ke(e),i=this.children.get(t);if(i){const o=i.remove(Ve(e));let l;return o.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,o),this.value===null&&l.isEmpty()?new Be(null):new Be(this.value,l)}else return this}}get(e){if(Pe(e))return this.value;{const t=ke(e),i=this.children.get(t);return i?i.get(Ve(e)):null}}setTree(e,t){if(Pe(e))return t;{const i=ke(e),l=(this.children.get(i)||new Be(null)).setTree(Ve(e),t);let d;return l.isEmpty()?d=this.children.remove(i):d=this.children.insert(i,l),new Be(this.value,d)}}fold(e){return this.fold_(Oe(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((o,l)=>{i[o]=l.fold_(nt(e,o),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Oe(),t)}findOnPath_(e,t,i){const o=this.value?i(t,this.value):!1;if(o)return o;if(Pe(e))return null;{const l=ke(e),d=this.children.get(l);return d?d.findOnPath_(Ve(e),nt(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Oe(),t)}foreachOnPath_(e,t,i){if(Pe(e))return this;{this.value&&i(t,this.value);const o=ke(e),l=this.children.get(o);return l?l.foreachOnPath_(Ve(e),nt(t,o),i):new Be(null)}}foreach(e){this.foreach_(Oe(),e)}foreach_(e,t){this.children.inorderTraversal((i,o)=>{o.foreach_(nt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.writeTree_=e}static empty(){return new mn(new Be(null))}}function vo(r,e,t){if(Pe(e))return new mn(new Be(t));{const i=r.writeTree_.findRootMostValueAndPath(e);if(i!=null){const o=i.path;let l=i.value;const d=Tt(o,e);return l=l.updateChild(d,t),new mn(r.writeTree_.set(o,l))}else{const o=new Be(t),l=r.writeTree_.setTree(e,o);return new mn(l)}}}function Od(r,e,t){let i=r;return yt(t,(o,l)=>{i=vo(i,nt(e,o),l)}),i}function Sg(r,e){if(Pe(e))return mn.empty();{const t=r.writeTree_.setTree(e,new Be(null));return new mn(t)}}function Ld(r,e){return ps(r,e)!=null}function ps(r,e){const t=r.writeTree_.findRootMostValueAndPath(e);return t!=null?r.writeTree_.get(t.path).getChild(Tt(t.path,e)):null}function Cg(r){const e=[],t=r.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(rt,(i,o)=>{e.push(new Te(i,o))}):r.writeTree_.children.inorderTraversal((i,o)=>{o.value!=null&&e.push(new Te(i,o.value))}),e}function jr(r,e){if(Pe(e))return r;{const t=ps(r,e);return t!=null?new mn(new Be(t)):new mn(r.writeTree_.subtree(e))}}function Md(r){return r.writeTree_.isEmpty()}function Zs(r,e){return g_(Oe(),r.writeTree_,e)}function g_(r,e,t){if(e.value!=null)return t.updateChild(r,e.value);{let i=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?(V(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):t=g_(nt(r,o),l,t)}),!t.getChild(r).isEmpty()&&i!==null&&(t=t.updateChild(nt(r,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(r,e){return x_(e,r)}function oE(r,e,t,i,o){V(i>r.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),r.allWrites.push({path:e,snap:t,writeId:i,visible:o}),o&&(r.visibleWrites=vo(r.visibleWrites,e,t)),r.lastWriteId=i}function aE(r,e,t,i){V(i>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:t,writeId:i,visible:!0}),r.visibleWrites=Od(r.visibleWrites,e,t),r.lastWriteId=i}function lE(r,e){for(let t=0;t<r.allWrites.length;t++){const i=r.allWrites[t];if(i.writeId===e)return i}return null}function cE(r,e){const t=r.allWrites.findIndex(f=>f.writeId===e);V(t>=0,"removeWrite called with nonexistent writeId.");const i=r.allWrites[t];r.allWrites.splice(t,1);let o=i.visible,l=!1,d=r.allWrites.length-1;for(;o&&d>=0;){const f=r.allWrites[d];f.visible&&(d>=t&&uE(f,i.path)?o=!1:en(i.path,f.path)&&(l=!0)),d--}if(o){if(l)return dE(r),!0;if(i.snap)r.visibleWrites=Sg(r.visibleWrites,i.path);else{const f=i.children;yt(f,m=>{r.visibleWrites=Sg(r.visibleWrites,nt(i.path,m))})}return!0}else return!1}function uE(r,e){if(r.snap)return en(r.path,e);for(const t in r.children)if(r.children.hasOwnProperty(t)&&en(nt(r.path,t),e))return!0;return!1}function dE(r){r.visibleWrites=v_(r.allWrites,hE,Oe()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function hE(r){return r.visible}function v_(r,e,t){let i=mn.empty();for(let o=0;o<r.length;++o){const l=r[o];if(e(l)){const d=l.path;let f;if(l.snap)en(t,d)?(f=Tt(t,d),i=vo(i,f,l.snap)):en(d,t)&&(f=Tt(d,t),i=vo(i,Oe(),l.snap.getChild(f)));else if(l.children){if(en(t,d))f=Tt(t,d),i=Od(i,f,l.children);else if(en(d,t))if(f=Tt(d,t),Pe(f))i=Od(i,Oe(),l.children);else{const m=Ks(l.children,ke(f));if(m){const g=m.getChild(Ve(f));i=vo(i,Oe(),g)}}}else throw si("WriteRecord should have .snap or .children")}}return i}function __(r,e,t,i,o){if(!i&&!o){const l=ps(r.visibleWrites,e);if(l!=null)return l;{const d=jr(r.visibleWrites,e);if(Md(d))return t;if(t==null&&!Ld(d,Oe()))return null;{const f=t||xe.EMPTY_NODE;return Zs(d,f)}}}else{const l=jr(r.visibleWrites,e);if(!o&&Md(l))return t;if(!o&&t==null&&!Ld(l,Oe()))return null;{const d=function(g){return(g.visible||o)&&(!i||!~i.indexOf(g.writeId))&&(en(g.path,e)||en(e,g.path))},f=v_(r.allWrites,d,e),m=t||xe.EMPTY_NODE;return Zs(f,m)}}}function fE(r,e,t){let i=xe.EMPTY_NODE;const o=ps(r.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(rt,(l,d)=>{i=i.updateImmediateChild(l,d)}),i;if(t){const l=jr(r.visibleWrites,e);return t.forEachChild(rt,(d,f)=>{const m=Zs(jr(l,new $e(d)),f);i=i.updateImmediateChild(d,m)}),Cg(l).forEach(d=>{i=i.updateImmediateChild(d.name,d.node)}),i}else{const l=jr(r.visibleWrites,e);return Cg(l).forEach(d=>{i=i.updateImmediateChild(d.name,d.node)}),i}}function pE(r,e,t,i,o){V(i||o,"Either existingEventSnap or existingServerSnap must exist");const l=nt(e,t);if(Ld(r.visibleWrites,l))return null;{const d=jr(r.visibleWrites,l);return Md(d)?o.getChild(t):Zs(d,o.getChild(t))}}function mE(r,e,t,i){const o=nt(e,t),l=ps(r.visibleWrites,o);if(l!=null)return l;if(i.isCompleteForChild(t)){const d=jr(r.visibleWrites,o);return Zs(d,i.getNode().getImmediateChild(t))}else return null}function gE(r,e){return ps(r.visibleWrites,e)}function vE(r,e,t,i,o,l,d){let f;const m=jr(r.visibleWrites,e),g=ps(m,Oe());if(g!=null)f=g;else if(t!=null)f=Zs(m,t);else return[];if(f=f.withIndex(d),!f.isEmpty()&&!f.isLeafNode()){const x=[],_=d.getCompare(),y=l?f.getReverseIteratorFrom(i,d):f.getIteratorFrom(i,d);let I=y.getNext();for(;I&&x.length<o;)_(I,i)!==0&&x.push(I),I=y.getNext();return x}else return[]}function _E(){return{visibleWrites:mn.empty(),allWrites:[],lastWriteId:-1}}function Rl(r,e,t,i){return __(r.writeTree,r.treePath,e,t,i)}function yh(r,e){return fE(r.writeTree,r.treePath,e)}function Eg(r,e,t,i){return pE(r.writeTree,r.treePath,e,t,i)}function Al(r,e){return gE(r.writeTree,nt(r.treePath,e))}function yE(r,e,t,i,o,l){return vE(r.writeTree,r.treePath,e,t,i,o,l)}function xh(r,e,t){return mE(r.writeTree,r.treePath,e,t)}function y_(r,e){return x_(nt(r.treePath,e),r.writeTree)}function x_(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;V(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),V(i!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const l=o.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(i,ko(i,e.snapshotNode,o.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(i,Io(i,o.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(i,Xs(i,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(i,ko(i,e.snapshotNode,o.oldSnap));else throw si("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const w_=new wE;class wh{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Dr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xh(this.writes_,e,i)}}getChildAfterChild(e,t,i){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:us(this.viewCache_),l=yE(this.writes_,o,t,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(r){return{filter:r}}function SE(r,e){V(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),V(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function CE(r,e,t,i,o){const l=new xE;let d,f;if(t.type===fn.OVERWRITE){const g=t;g.source.fromUser?d=Fd(r,e,g.path,g.snap,i,o,l):(V(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered()&&!Pe(g.path),d=Dl(r,e,g.path,g.snap,i,o,f,l))}else if(t.type===fn.MERGE){const g=t;g.source.fromUser?d=IE(r,e,g.path,g.children,i,o,l):(V(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered(),d=Ud(r,e,g.path,g.children,i,o,f,l))}else if(t.type===fn.ACK_USER_WRITE){const g=t;g.revert?d=bE(r,e,g.path,i,o,l):d=kE(r,e,g.path,g.affectedTree,i,o,l)}else if(t.type===fn.LISTEN_COMPLETE)d=TE(r,e,t.path,i,l);else throw si("Unknown operation type: "+t.type);const m=l.getChanges();return EE(e,d,m),{viewCache:d,changes:m}}function EE(r,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=jl(r);(t.length>0||!r.eventCache.isFullyInitialized()||o&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(f_(jl(e)))}}function N_(r,e,t,i,o,l){const d=e.eventCache;if(Al(i,t)!=null)return e;{let f,m;if(Pe(t))if(V(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=us(e),x=g instanceof xe?g:xe.EMPTY_NODE,_=yh(i,x);f=r.filter.updateFullNode(e.eventCache.getNode(),_,l)}else{const g=Rl(i,us(e));f=r.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=ke(t);if(g===".priority"){V(Ar(t)===1,"Can't have a priority with additional path components");const x=d.getNode();m=e.serverCache.getNode();const _=Eg(i,t,x,m);_!=null?f=r.filter.updatePriority(x,_):f=d.getNode()}else{const x=Ve(t);let _;if(d.isCompleteForChild(g)){m=e.serverCache.getNode();const y=Eg(i,t,d.getNode(),m);y!=null?_=d.getNode().getImmediateChild(g).updateChild(x,y):_=d.getNode().getImmediateChild(g)}else _=xh(i,g,e.serverCache);_!=null?f=r.filter.updateChild(d.getNode(),g,_,x,o,l):f=d.getNode()}}return go(e,f,d.isFullyInitialized()||Pe(t),r.filter.filtersNodes())}}function Dl(r,e,t,i,o,l,d,f){const m=e.serverCache;let g;const x=d?r.filter:r.filter.getIndexedFilter();if(Pe(t))g=x.updateFullNode(m.getNode(),i,null);else if(x.filtersNodes()&&!m.isFiltered()){const I=m.getNode().updateChild(t,i);g=x.updateFullNode(m.getNode(),I,null)}else{const I=ke(t);if(!m.isCompleteForPath(t)&&Ar(t)>1)return e;const j=Ve(t),D=m.getNode().getImmediateChild(I).updateChild(j,i);I===".priority"?g=x.updatePriority(m.getNode(),D):g=x.updateChild(m.getNode(),I,D,j,w_,null)}const _=m_(e,g,m.isFullyInitialized()||Pe(t),x.filtersNodes()),y=new wh(o,_,l);return N_(r,_,t,o,y,f)}function Fd(r,e,t,i,o,l,d){const f=e.eventCache;let m,g;const x=new wh(o,e,l);if(Pe(t))g=r.filter.updateFullNode(e.eventCache.getNode(),i,d),m=go(e,g,!0,r.filter.filtersNodes());else{const _=ke(t);if(_===".priority")g=r.filter.updatePriority(e.eventCache.getNode(),i),m=go(e,g,f.isFullyInitialized(),f.isFiltered());else{const y=Ve(t),I=f.getNode().getImmediateChild(_);let j;if(Pe(y))j=i;else{const A=x.getCompleteChild(_);A!=null?uh(y)===".priority"&&A.getChild(o_(y)).isEmpty()?j=A:j=A.updateChild(y,i):j=xe.EMPTY_NODE}if(I.equals(j))m=e;else{const A=r.filter.updateChild(f.getNode(),_,j,y,x,d);m=go(e,A,f.isFullyInitialized(),r.filter.filtersNodes())}}}return m}function Ig(r,e){return r.eventCache.isCompleteForChild(e)}function IE(r,e,t,i,o,l,d){let f=e;return i.foreach((m,g)=>{const x=nt(t,m);Ig(e,ke(x))&&(f=Fd(r,f,x,g,o,l,d))}),i.foreach((m,g)=>{const x=nt(t,m);Ig(e,ke(x))||(f=Fd(r,f,x,g,o,l,d))}),f}function kg(r,e,t){return t.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function Ud(r,e,t,i,o,l,d,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;Pe(t)?g=i:g=new Be(null).setTree(t,i);const x=e.serverCache.getNode();return g.children.inorderTraversal((_,y)=>{if(x.hasChild(_)){const I=e.serverCache.getNode().getImmediateChild(_),j=kg(r,I,y);m=Dl(r,m,new $e(_),j,o,l,d,f)}}),g.children.inorderTraversal((_,y)=>{const I=!e.serverCache.isCompleteForChild(_)&&y.value===null;if(!x.hasChild(_)&&!I){const j=e.serverCache.getNode().getImmediateChild(_),A=kg(r,j,y);m=Dl(r,m,new $e(_),A,o,l,d,f)}}),m}function kE(r,e,t,i,o,l,d){if(Al(o,t)!=null)return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(Pe(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return Dl(r,e,t,m.getNode().getChild(t),o,l,f,d);if(Pe(t)){let g=new Be(null);return m.getNode().forEachChild(Vs,(x,_)=>{g=g.set(new $e(x),_)}),Ud(r,e,t,g,o,l,f,d)}else return e}else{let g=new Be(null);return i.foreach((x,_)=>{const y=nt(t,x);m.isCompleteForPath(y)&&(g=g.set(x,m.getNode().getChild(y)))}),Ud(r,e,t,g,o,l,f,d)}}function TE(r,e,t,i,o){const l=e.serverCache,d=m_(e,l.getNode(),l.isFullyInitialized()||Pe(t),l.isFiltered());return N_(r,d,t,i,w_,o)}function bE(r,e,t,i,o,l){let d;if(Al(i,t)!=null)return e;{const f=new wh(i,e,o),m=e.eventCache.getNode();let g;if(Pe(t)||ke(t)===".priority"){let x;if(e.serverCache.isFullyInitialized())x=Rl(i,us(e));else{const _=e.serverCache.getNode();V(_ instanceof xe,"serverChildren would be complete if leaf node"),x=yh(i,_)}x=x,g=r.filter.updateFullNode(m,x,l)}else{const x=ke(t);let _=xh(i,x,e.serverCache);_==null&&e.serverCache.isCompleteForChild(x)&&(_=m.getImmediateChild(x)),_!=null?g=r.filter.updateChild(m,x,_,Ve(t),f,l):e.eventCache.getNode().hasChild(x)?g=r.filter.updateChild(m,x,xe.EMPTY_NODE,Ve(t),f,l):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Rl(i,us(e)),d.isLeafNode()&&(g=r.filter.updateFullNode(g,d,l)))}return d=e.serverCache.isFullyInitialized()||Al(i,Oe())!=null,go(e,g,d,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new ph(i.getIndex()),l=KC(i);this.processor_=NE(l);const d=t.serverCache,f=t.eventCache,m=o.updateFullNode(xe.EMPTY_NODE,d.getNode(),null),g=l.updateFullNode(xe.EMPTY_NODE,f.getNode(),null),x=new Dr(m,d.isFullyInitialized(),o.filtersNodes()),_=new Dr(g,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=Jl(_,x),this.eventGenerator_=new tE(this.query_)}get query(){return this.query_}}function jE(r){return r.viewCache_.serverCache.getNode()}function RE(r){return jl(r.viewCache_)}function AE(r,e){const t=us(r.viewCache_);return t&&(r.query._queryParams.loadsAllData()||!Pe(e)&&!t.getImmediateChild(ke(e)).isEmpty())?t.getChild(e):null}function Tg(r){return r.eventRegistrations_.length===0}function DE(r,e){r.eventRegistrations_.push(e)}function bg(r,e,t){const i=[];if(t){V(e==null,"A cancel should cancel all event registrations.");const o=r.query._path;r.eventRegistrations_.forEach(l=>{const d=l.createCancelEvent(t,o);d&&i.push(d)})}if(e){let o=[];for(let l=0;l<r.eventRegistrations_.length;++l){const d=r.eventRegistrations_[l];if(!d.matches(e))o.push(d);else if(e.hasAnyCallback()){o=o.concat(r.eventRegistrations_.slice(l+1));break}}r.eventRegistrations_=o}else r.eventRegistrations_=[];return i}function Pg(r,e,t,i){e.type===fn.MERGE&&e.source.queryId!==null&&(V(us(r.viewCache_),"We should always have a full cache before handling merges"),V(jl(r.viewCache_),"Missing event cache, even though we have a server cache"));const o=r.viewCache_,l=CE(r.processor_,o,e,t,i);return SE(r.processor_,l.viewCache),V(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=l.viewCache,S_(r,l.changes,l.viewCache.eventCache.getNode(),null)}function OE(r,e){const t=r.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(rt,(l,d)=>{i.push(Xs(l,d))}),t.isFullyInitialized()&&i.push(f_(t.getNode())),S_(r,i,t.getNode(),e)}function S_(r,e,t,i){const o=i?[i]:r.eventRegistrations_;return nE(r.eventGenerator_,e,t,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol;class C_{constructor(){this.views=new Map}}function LE(r){V(!Ol,"__referenceConstructor has already been defined"),Ol=r}function ME(){return V(Ol,"Reference.ts has not been loaded"),Ol}function FE(r){return r.views.size===0}function Nh(r,e,t,i){const o=e.source.queryId;if(o!==null){const l=r.views.get(o);return V(l!=null,"SyncTree gave us an op for an invalid query."),Pg(l,e,t,i)}else{let l=[];for(const d of r.views.values())l=l.concat(Pg(d,e,t,i));return l}}function E_(r,e,t,i,o){const l=e._queryIdentifier,d=r.views.get(l);if(!d){let f=Rl(t,o?i:null),m=!1;f?m=!0:i instanceof xe?(f=yh(t,i),m=!1):(f=xe.EMPTY_NODE,m=!1);const g=Jl(new Dr(f,m,!1),new Dr(i,o,!1));return new PE(e,g)}return d}function UE(r,e,t,i,o,l){const d=E_(r,e,i,o,l);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,d),DE(d,t),OE(d,t)}function $E(r,e,t,i){const o=e._queryIdentifier,l=[];let d=[];const f=Or(r);if(o==="default")for(const[m,g]of r.views.entries())d=d.concat(bg(g,t,i)),Tg(g)&&(r.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=r.views.get(o);m&&(d=d.concat(bg(m,t,i)),Tg(m)&&(r.views.delete(o),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!Or(r)&&l.push(new(ME())(e._repo,e._path)),{removed:l,events:d}}function I_(r){const e=[];for(const t of r.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Rr(r,e){let t=null;for(const i of r.views.values())t=t||AE(i,e);return t}function k_(r,e){if(e._queryParams.loadsAllData())return ec(r);{const i=e._queryIdentifier;return r.views.get(i)}}function T_(r,e){return k_(r,e)!=null}function Or(r){return ec(r)!=null}function ec(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll;function zE(r){V(!Ll,"__referenceConstructor has already been defined"),Ll=r}function BE(){return V(Ll,"Reference.ts has not been loaded"),Ll}let VE=1;class jg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Be(null),this.pendingWriteTree_=_E(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function b_(r,e,t,i,o){return oE(r.pendingWriteTree_,e,t,i,o),o?ci(r,new cs(gh(),e,t)):[]}function WE(r,e,t,i){aE(r.pendingWriteTree_,e,t,i);const o=Be.fromObject(t);return ci(r,new Js(gh(),e,o))}function Ir(r,e,t=!1){const i=lE(r.pendingWriteTree_,e);if(cE(r.pendingWriteTree_,e)){let l=new Be(null);return i.snap!=null?l=l.set(Oe(),!0):yt(i.children,d=>{l=l.set(new $e(d),!0)}),ci(r,new Pl(i.path,l,t))}else return[]}function $o(r,e,t){return ci(r,new cs(vh(),e,t))}function HE(r,e,t){const i=Be.fromObject(t);return ci(r,new Js(vh(),e,i))}function qE(r,e){return ci(r,new bo(vh(),e))}function GE(r,e,t){const i=Ch(r,t);if(i){const o=Eh(i),l=o.path,d=o.queryId,f=Tt(l,e),m=new bo(_h(d),f);return Ih(r,l,m)}else return[]}function Ml(r,e,t,i,o=!1){const l=e._path,d=r.syncPointTree_.get(l);let f=[];if(d&&(e._queryIdentifier==="default"||T_(d,e))){const m=$E(d,e,t,i);FE(d)&&(r.syncPointTree_=r.syncPointTree_.remove(l));const g=m.removed;if(f=m.events,!o){const x=g.findIndex(y=>y._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(l,(y,I)=>Or(I));if(x&&!_){const y=r.syncPointTree_.subtree(l);if(!y.isEmpty()){const I=YE(y);for(let j=0;j<I.length;++j){const A=I[j],D=A.query,J=A_(r,A);r.listenProvider_.startListening(_o(D),Po(r,D),J.hashFn,J.onComplete)}}}!_&&g.length>0&&!i&&(x?r.listenProvider_.stopListening(_o(e),null):g.forEach(y=>{const I=r.queryToTagMap.get(tc(y));r.listenProvider_.stopListening(_o(y),I)}))}XE(r,g)}return f}function P_(r,e,t,i){const o=Ch(r,i);if(o!=null){const l=Eh(o),d=l.path,f=l.queryId,m=Tt(d,e),g=new cs(_h(f),m,t);return Ih(r,d,g)}else return[]}function KE(r,e,t,i){const o=Ch(r,i);if(o){const l=Eh(o),d=l.path,f=l.queryId,m=Tt(d,e),g=Be.fromObject(t),x=new Js(_h(f),m,g);return Ih(r,d,x)}else return[]}function $d(r,e,t,i=!1){const o=e._path;let l=null,d=!1;r.syncPointTree_.foreachOnPath(o,(y,I)=>{const j=Tt(y,o);l=l||Rr(I,j),d=d||Or(I)});let f=r.syncPointTree_.get(o);f?(d=d||Or(f),l=l||Rr(f,Oe())):(f=new C_,r.syncPointTree_=r.syncPointTree_.set(o,f));let m;l!=null?m=!0:(m=!1,l=xe.EMPTY_NODE,r.syncPointTree_.subtree(o).foreachChild((I,j)=>{const A=Rr(j,Oe());A&&(l=l.updateImmediateChild(I,A))}));const g=T_(f,e);if(!g&&!e._queryParams.loadsAllData()){const y=tc(e);V(!r.queryToTagMap.has(y),"View does not exist, but we have a tag");const I=JE();r.queryToTagMap.set(y,I),r.tagToQueryMap.set(I,y)}const x=Zl(r.pendingWriteTree_,o);let _=UE(f,e,t,x,l,m);if(!g&&!d&&!i){const y=k_(f,e);_=_.concat(ZE(r,e,y))}return _}function Sh(r,e,t){const o=r.pendingWriteTree_,l=r.syncPointTree_.findOnPath(e,(d,f)=>{const m=Tt(d,e),g=Rr(f,m);if(g)return g});return __(o,e,l,t,!0)}function QE(r,e){const t=e._path;let i=null;r.syncPointTree_.foreachOnPath(t,(g,x)=>{const _=Tt(g,t);i=i||Rr(x,_)});let o=r.syncPointTree_.get(t);o?i=i||Rr(o,Oe()):(o=new C_,r.syncPointTree_=r.syncPointTree_.set(t,o));const l=i!=null,d=l?new Dr(i,!0,!1):null,f=Zl(r.pendingWriteTree_,e._path),m=E_(o,e,f,l?d.getNode():xe.EMPTY_NODE,l);return RE(m)}function ci(r,e){return j_(e,r.syncPointTree_,null,Zl(r.pendingWriteTree_,Oe()))}function j_(r,e,t,i){if(Pe(r.path))return R_(r,e,t,i);{const o=e.get(Oe());t==null&&o!=null&&(t=Rr(o,Oe()));let l=[];const d=ke(r.path),f=r.operationForChild(d),m=e.children.get(d);if(m&&f){const g=t?t.getImmediateChild(d):null,x=y_(i,d);l=l.concat(j_(f,m,g,x))}return o&&(l=l.concat(Nh(o,r,i,t))),l}}function R_(r,e,t,i){const o=e.get(Oe());t==null&&o!=null&&(t=Rr(o,Oe()));let l=[];return e.children.inorderTraversal((d,f)=>{const m=t?t.getImmediateChild(d):null,g=y_(i,d),x=r.operationForChild(d);x&&(l=l.concat(R_(x,f,m,g)))}),o&&(l=l.concat(Nh(o,r,i,t))),l}function A_(r,e){const t=e.query,i=Po(r,t);return{hashFn:()=>(jE(e)||xe.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return i?GE(r,t._path,i):qE(r,t._path);{const l=qS(o,t);return Ml(r,t,null,l)}}}}function Po(r,e){const t=tc(e);return r.queryToTagMap.get(t)}function tc(r){return r._path.toString()+"$"+r._queryIdentifier}function Ch(r,e){return r.tagToQueryMap.get(e)}function Eh(r){const e=r.indexOf("$");return V(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new $e(r.substr(0,e))}}function Ih(r,e,t){const i=r.syncPointTree_.get(e);V(i,"Missing sync point for query tag that we're tracking");const o=Zl(r.pendingWriteTree_,e);return Nh(i,t,o,null)}function YE(r){return r.fold((e,t,i)=>{if(t&&Or(t))return[ec(t)];{let o=[];return t&&(o=I_(t)),yt(i,(l,d)=>{o=o.concat(d)}),o}})}function _o(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(BE())(r._repo,r._path):r}function XE(r,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const o=tc(i),l=r.queryToTagMap.get(o);r.queryToTagMap.delete(o),r.tagToQueryMap.delete(l)}}}function JE(){return VE++}function ZE(r,e,t){const i=e._path,o=Po(r,e),l=A_(r,t),d=r.listenProvider_.startListening(_o(e),o,l.hashFn,l.onComplete),f=r.syncPointTree_.subtree(i);if(o)V(!Or(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((g,x,_)=>{if(!Pe(g)&&x&&Or(x))return[ec(x).query];{let y=[];return x&&(y=y.concat(I_(x).map(I=>I.query))),yt(_,(I,j)=>{y=y.concat(j)}),y}});for(let g=0;g<m.length;++g){const x=m[g];r.listenProvider_.stopListening(_o(x),Po(r,x))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new kh(t)}node(){return this.node_}}class Th{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=nt(this.path_,e);return new Th(this.syncTree_,t)}node(){return Sh(this.syncTree_,this.path_)}}const eI=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},Rg=function(r,e,t){if(!r||typeof r!="object")return r;if(V(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return tI(r[".sv"],e,t);if(typeof r[".sv"]=="object")return nI(r[".sv"],e);V(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},tI=function(r,e,t){switch(r){case"timestamp":return t.timestamp;default:V(!1,"Unexpected server value: "+r)}},nI=function(r,e,t){r.hasOwnProperty("increment")||V(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const i=r.increment;typeof i!="number"&&V(!1,"Unexpected increment value: "+i);const o=e.node();if(V(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const d=o.getValue();return typeof d!="number"?i:d+i},D_=function(r,e,t,i){return bh(e,new Th(t,r),i)},O_=function(r,e,t){return bh(r,new kh(e),t)};function bh(r,e,t){const i=r.getPriority().val(),o=Rg(i,e.getImmediateChild(".priority"),t);let l;if(r.isLeafNode()){const d=r,f=Rg(d.getValue(),e,t);return f!==d.getValue()||o!==d.getPriority().val()?new pt(f,ct(o)):r}else{const d=r;return l=d,o!==d.getPriority().val()&&(l=l.updatePriority(new pt(o))),d.forEachChild(rt,(f,m)=>{const g=bh(m,e.getImmediateChild(f),t);g!==m&&(l=l.updateImmediateChild(f,g))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function jh(r,e){let t=e instanceof $e?e:new $e(e),i=r,o=ke(t);for(;o!==null;){const l=Ks(i.node.children,o)||{children:{},childCount:0};i=new Ph(o,i,l),t=Ve(t),o=ke(t)}return i}function ui(r){return r.node.value}function L_(r,e){r.node.value=e,zd(r)}function M_(r){return r.node.childCount>0}function rI(r){return ui(r)===void 0&&!M_(r)}function nc(r,e){yt(r.node.children,(t,i)=>{e(new Ph(t,r,i))})}function F_(r,e,t,i){t&&e(r),nc(r,o=>{F_(o,e,!0)})}function sI(r,e,t){let i=r.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function zo(r){return new $e(r.parent===null?r.name:zo(r.parent)+"/"+r.name)}function zd(r){r.parent!==null&&iI(r.parent,r.name,r)}function iI(r,e,t){const i=rI(t),o=In(r.node.children,e);i&&o?(delete r.node.children[e],r.node.childCount--,zd(r)):!i&&!o&&(r.node.children[e]=t.node,r.node.childCount++,zd(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=/[\[\].#$\/\u0000-\u001F\u007F]/,aI=/[\[\].#$\u0000-\u001F\u007F]/,pd=10*1024*1024,Rh=function(r){return typeof r=="string"&&r.length!==0&&!oI.test(r)},U_=function(r){return typeof r=="string"&&r.length!==0&&!aI.test(r)},lI=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),U_(r)},cI=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!ih(r)||r&&typeof r=="object"&&In(r,".sv")},$_=function(r,e,t,i){i&&e===void 0||rc(Ql(r,"value"),e,t)},rc=function(r,e,t){const i=t instanceof $e?new IC(t,r):t;if(e===void 0)throw new Error(r+"contains undefined "+rs(i));if(typeof e=="function")throw new Error(r+"contains a function "+rs(i)+" with contents = "+e.toString());if(ih(e))throw new Error(r+"contains "+e.toString()+" "+rs(i));if(typeof e=="string"&&e.length>pd/3&&Yl(e)>pd)throw new Error(r+"contains a string greater than "+pd+" utf8 bytes "+rs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(yt(e,(d,f)=>{if(d===".value")o=!0;else if(d!==".priority"&&d!==".sv"&&(l=!0,!Rh(d)))throw new Error(r+" contains an invalid key ("+d+") "+rs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);kC(i,d),rc(r,f,i),TC(i)}),o&&l)throw new Error(r+' contains ".value" child '+rs(i)+" in addition to actual children.")}},uI=function(r,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const l=Eo(i);for(let d=0;d<l.length;d++)if(!(l[d]===".priority"&&d===l.length-1)){if(!Rh(l[d]))throw new Error(r+"contains an invalid key ("+l[d]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(EC);let o=null;for(t=0;t<e.length;t++){if(i=e[t],o!==null&&en(o,i))throw new Error(r+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}},dI=function(r,e,t,i){const o=Ql(r,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];yt(e,(d,f)=>{const m=new $e(d);if(rc(o,f,nt(t,m)),uh(m)===".priority"&&!cI(f))throw new Error(o+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),uI(o,l)},z_=function(r,e,t,i){if(!U_(t))throw new Error(Ql(r,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},hI=function(r,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),z_(r,e,t)},Ah=function(r,e){if(ke(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},fI=function(r,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Rh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!lI(t))throw new Error(Ql(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sc(r,e){let t=null;for(let i=0;i<e.length;i++){const o=e[i],l=o.getPath();t!==null&&!dh(l,t.path)&&(r.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(o)}t&&r.eventLists_.push(t)}function B_(r,e,t){sc(r,t),V_(r,i=>dh(i,e))}function nn(r,e,t){sc(r,t),V_(r,i=>en(i,e)||en(e,i))}function V_(r,e){r.recursionDepth_++;let t=!0;for(let i=0;i<r.eventLists_.length;i++){const o=r.eventLists_[i];if(o){const l=o.path;e(l)?(mI(r.eventLists_[i]),r.eventLists_[i]=null):t=!1}}t&&(r.eventLists_=[]),r.recursionDepth_--}function mI(r){for(let e=0;e<r.events.length;e++){const t=r.events[e];if(t!==null){r.events[e]=null;const i=t.getEventRunner();po&&_t("event: "+t.toString()),li(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="repo_interrupt",vI=25;class _I{constructor(e,t,i,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bl(),this.transactionQueueTree_=new Ph,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yI(r,e,t){if(r.stats_=lh(r.repoInfo_),r.forceRestClient_||YS())r.server_=new Tl(r.repoInfo_,(i,o,l,d)=>{Ag(r,i,o,l,d)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Dg(r,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}r.persistentConnection_=new Vn(r.repoInfo_,e,(i,o,l,d)=>{Ag(r,i,o,l,d)},i=>{Dg(r,i)},i=>{xI(r,i)},r.authTokenProvider_,r.appCheckProvider_,t),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(i=>{r.server_.refreshAuthToken(i)}),r.appCheckProvider_.addTokenChangeListener(i=>{r.server_.refreshAppCheckToken(i.token)}),r.statsReporter_=tC(r.repoInfo_,()=>new eE(r.stats_,r.server_)),r.infoData_=new QC,r.infoSyncTree_=new jg({startListening:(i,o,l,d)=>{let f=[];const m=r.infoData_.getNode(i._path);return m.isEmpty()||(f=$o(r.infoSyncTree_,i._path,m),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),Dh(r,"connected",!1),r.serverSyncTree_=new jg({startListening:(i,o,l,d)=>(r.server_.listen(i,l,o,(f,m)=>{const g=d(f,m);nn(r.eventQueue_,i._path,g)}),[]),stopListening:(i,o)=>{r.server_.unlisten(i,o)}})}function W_(r){const t=r.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function ic(r){return eI({timestamp:W_(r)})}function Ag(r,e,t,i,o){r.dataUpdateCount++;const l=new $e(e);t=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,t):t;let d=[];if(o)if(i){const m=Sl(t,g=>ct(g));d=KE(r.serverSyncTree_,l,m,o)}else{const m=ct(t);d=P_(r.serverSyncTree_,l,m,o)}else if(i){const m=Sl(t,g=>ct(g));d=HE(r.serverSyncTree_,l,m)}else{const m=ct(t);d=$o(r.serverSyncTree_,l,m)}let f=l;d.length>0&&(f=ei(r,l)),nn(r.eventQueue_,f,d)}function Dg(r,e){Dh(r,"connected",e),e===!1&&CI(r)}function xI(r,e){yt(e,(t,i)=>{Dh(r,t,i)})}function Dh(r,e,t){const i=new $e("/.info/"+e),o=ct(t);r.infoData_.updateSnapshot(i,o);const l=$o(r.infoSyncTree_,i,o);nn(r.eventQueue_,i,l)}function Oh(r){return r.nextWriteId_++}function wI(r,e,t){const i=QE(r.serverSyncTree_,e);return i!=null?Promise.resolve(i):r.server_.get(e).then(o=>{const l=ct(o).withIndex(e._queryParams.getIndex());$d(r.serverSyncTree_,e,t,!0);let d;if(e._queryParams.loadsAllData())d=$o(r.serverSyncTree_,e._path,l);else{const f=Po(r.serverSyncTree_,e);d=P_(r.serverSyncTree_,e._path,l,f)}return nn(r.eventQueue_,e._path,d),Ml(r.serverSyncTree_,e,t,null,!0),l},o=>(Bo(r,"get for query "+ut(e)+" failed: "+o),Promise.reject(new Error(o))))}function NI(r,e,t,i,o){Bo(r,"set",{path:e.toString(),value:t,priority:i});const l=ic(r),d=ct(t,i),f=Sh(r.serverSyncTree_,e),m=O_(d,f,l),g=Oh(r),x=b_(r.serverSyncTree_,e,m,g,!0);sc(r.eventQueue_,x),r.server_.put(e.toString(),d.val(!0),(y,I)=>{const j=y==="ok";j||bt("set at "+e+" failed: "+y);const A=Ir(r.serverSyncTree_,g,!j);nn(r.eventQueue_,e,A),Bd(r,o,y,I)});const _=Mh(r,e);ei(r,_),nn(r.eventQueue_,_,[])}function SI(r,e,t,i){Bo(r,"update",{path:e.toString(),value:t});let o=!0;const l=ic(r),d={};if(yt(t,(f,m)=>{o=!1,d[f]=D_(nt(e,f),ct(m),r.serverSyncTree_,l)}),o)_t("update() called with empty data.  Don't do anything."),Bd(r,i,"ok",void 0);else{const f=Oh(r),m=WE(r.serverSyncTree_,e,d,f);sc(r.eventQueue_,m),r.server_.merge(e.toString(),t,(g,x)=>{const _=g==="ok";_||bt("update at "+e+" failed: "+g);const y=Ir(r.serverSyncTree_,f,!_),I=y.length>0?ei(r,e):e;nn(r.eventQueue_,I,y),Bd(r,i,g,x)}),yt(t,g=>{const x=Mh(r,nt(e,g));ei(r,x)}),nn(r.eventQueue_,e,[])}}function CI(r){Bo(r,"onDisconnectEvents");const e=ic(r),t=bl();Dd(r.onDisconnect_,Oe(),(o,l)=>{const d=D_(o,l,r.serverSyncTree_,e);p_(t,o,d)});let i=[];Dd(t,Oe(),(o,l)=>{i=i.concat($o(r.serverSyncTree_,o,l));const d=Mh(r,o);ei(r,d)}),r.onDisconnect_=bl(),nn(r.eventQueue_,Oe(),i)}function EI(r,e,t){let i;ke(e._path)===".info"?i=$d(r.infoSyncTree_,e,t):i=$d(r.serverSyncTree_,e,t),B_(r.eventQueue_,e._path,i)}function II(r,e,t){let i;ke(e._path)===".info"?i=Ml(r.infoSyncTree_,e,t):i=Ml(r.serverSyncTree_,e,t),B_(r.eventQueue_,e._path,i)}function kI(r){r.persistentConnection_&&r.persistentConnection_.interrupt(gI)}function Bo(r,...e){let t="";r.persistentConnection_&&(t=r.persistentConnection_.id+":"),_t(t,...e)}function Bd(r,e,t,i){e&&li(()=>{if(t==="ok")e(null);else{const o=(t||"error").toUpperCase();let l=o;i&&(l+=": "+i);const d=new Error(l);d.code=o,e(d)}})}function H_(r,e,t){return Sh(r.serverSyncTree_,e,t)||xe.EMPTY_NODE}function Lh(r,e=r.transactionQueueTree_){if(e||oc(r,e),ui(e)){const t=G_(r,e);V(t.length>0,"Sending zero length transaction queue"),t.every(o=>o.status===0)&&TI(r,zo(e),t)}else M_(e)&&nc(e,t=>{Lh(r,t)})}function TI(r,e,t){const i=t.map(g=>g.currentWriteId),o=H_(r,e,i);let l=o;const d=o.hash();for(let g=0;g<t.length;g++){const x=t[g];V(x.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const _=Tt(e,x.path);l=l.updateChild(_,x.currentOutputSnapshotRaw)}const f=l.val(!0),m=e;r.server_.put(m.toString(),f,g=>{Bo(r,"transaction put response",{path:m.toString(),status:g});let x=[];if(g==="ok"){const _=[];for(let y=0;y<t.length;y++)t[y].status=2,x=x.concat(Ir(r.serverSyncTree_,t[y].currentWriteId)),t[y].onComplete&&_.push(()=>t[y].onComplete(null,!0,t[y].currentOutputSnapshotResolved)),t[y].unwatcher();oc(r,jh(r.transactionQueueTree_,e)),Lh(r,r.transactionQueueTree_),nn(r.eventQueue_,e,x);for(let y=0;y<_.length;y++)li(_[y])}else{if(g==="datastale")for(let _=0;_<t.length;_++)t[_].status===3?t[_].status=4:t[_].status=0;else{bt("transaction at "+m.toString()+" failed: "+g);for(let _=0;_<t.length;_++)t[_].status=4,t[_].abortReason=g}ei(r,e)}},d)}function ei(r,e){const t=q_(r,e),i=zo(t),o=G_(r,t);return bI(r,o,i),i}function bI(r,e,t){if(e.length===0)return;const i=[];let o=[];const d=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],g=Tt(t,m.path);let x=!1,_;if(V(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)x=!0,_=m.abortReason,o=o.concat(Ir(r.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=vI)x=!0,_="maxretry",o=o.concat(Ir(r.serverSyncTree_,m.currentWriteId,!0));else{const y=H_(r,m.path,d);m.currentInputSnapshot=y;const I=e[f].update(y.val());if(I!==void 0){rc("transaction failed: Data returned ",I,m.path);let j=ct(I);typeof I=="object"&&I!=null&&In(I,".priority")||(j=j.updatePriority(y.getPriority()));const D=m.currentWriteId,J=ic(r),Q=O_(j,y,J);m.currentOutputSnapshotRaw=j,m.currentOutputSnapshotResolved=Q,m.currentWriteId=Oh(r),d.splice(d.indexOf(D),1),o=o.concat(b_(r.serverSyncTree_,m.path,Q,m.currentWriteId,m.applyLocally)),o=o.concat(Ir(r.serverSyncTree_,D,!0))}else x=!0,_="nodata",o=o.concat(Ir(r.serverSyncTree_,m.currentWriteId,!0))}nn(r.eventQueue_,t,o),o=[],x&&(e[f].status=2,(function(y){setTimeout(y,Math.floor(0))})(e[f].unwatcher),e[f].onComplete&&(_==="nodata"?i.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):i.push(()=>e[f].onComplete(new Error(_),!1,null))))}oc(r,r.transactionQueueTree_);for(let f=0;f<i.length;f++)li(i[f]);Lh(r,r.transactionQueueTree_)}function q_(r,e){let t,i=r.transactionQueueTree_;for(t=ke(e);t!==null&&ui(i)===void 0;)i=jh(i,t),e=Ve(e),t=ke(e);return i}function G_(r,e){const t=[];return K_(r,e,t),t.sort((i,o)=>i.order-o.order),t}function K_(r,e,t){const i=ui(e);if(i)for(let o=0;o<i.length;o++)t.push(i[o]);nc(e,o=>{K_(r,o,t)})}function oc(r,e){const t=ui(e);if(t){let i=0;for(let o=0;o<t.length;o++)t[o].status!==2&&(t[i]=t[o],i++);t.length=i,L_(e,t.length>0?t:void 0)}nc(e,i=>{oc(r,i)})}function Mh(r,e){const t=zo(q_(r,e)),i=jh(r.transactionQueueTree_,e);return sI(i,o=>{md(r,o)}),md(r,i),F_(i,o=>{md(r,o)}),t}function md(r,e){const t=ui(e);if(t){const i=[];let o=[],l=-1;for(let d=0;d<t.length;d++)t[d].status===3||(t[d].status===1?(V(l===d-1,"All SENT items should be at beginning of queue."),l=d,t[d].status=3,t[d].abortReason="set"):(V(t[d].status===0,"Unexpected transaction status in abort"),t[d].unwatcher(),o=o.concat(Ir(r.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&i.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));l===-1?L_(e,void 0):t.length=l+1,nn(r.eventQueue_,zo(e),o);for(let d=0;d<i.length;d++)li(i[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(r){let e="";const t=r.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let o=t[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function jI(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const t of r.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):bt(`Invalid query segment '${t}' in query '${r}'`)}return e}const Og=function(r,e){const t=RI(r),i=t.namespace;t.domain==="firebase.com"&&qn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&qn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||zS();const o=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Xv(t.host,t.secure,i,o,e,"",i!==t.subdomain),path:new $e(t.pathString)}},RI=function(r){let e="",t="",i="",o="",l="",d=!0,f="https",m=443;if(typeof r=="string"){let g=r.indexOf("//");g>=0&&(f=r.substring(0,g-1),r=r.substring(g+2));let x=r.indexOf("/");x===-1&&(x=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),e=r.substring(0,Math.min(x,_)),x<_&&(o=PI(r.substring(x,_)));const y=jI(r.substring(Math.min(r.length,_)));g=e.indexOf(":"),g>=0?(d=f==="https"||f==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const I=e.slice(0,g);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const j=e.indexOf(".");i=e.substring(0,j).toLowerCase(),t=e.substring(j+1),l=i}"ns"in y&&(l=y.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:d,scheme:f,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",AI=(function(){let r=0;const e=[];return function(t){const i=t===r;r=t;let o;const l=new Array(8);for(o=7;o>=0;o--)l[o]=Lg.charAt(t%64),t=Math.floor(t/64);V(t===0,"Cannot push at time == 0");let d=l.join("");if(i){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)d+=Lg.charAt(e[o]);return V(d.length===20,"nextPushId: Length should be 20."),d}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,t,i,o){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ut(this.snapshot.exportVal())}}class OI{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return V(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t,i,o){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=o}get key(){return Pe(this._path)?null:uh(this._path)}get ref(){return new Yn(this._repo,this._path)}get _queryIdentifier(){const e=wg(this._queryParams),t=oh(e);return t==="{}"?"default":t}get _queryObject(){return wg(this._queryParams)}isEqual(e){if(e=Ct(e),!(e instanceof Fh))return!1;const t=this._repo===e._repo,i=dh(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return t&&i&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+CC(this._path)}}class Yn extends Fh{constructor(e,t){super(e,t,new mh,!1)}get parent(){const e=o_(this._path);return e===null?null:new Yn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class jo{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new $e(e),i=Ro(this.ref,e);return new jo(this._node.getChild(t),i,rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,o)=>e(new jo(o,Ro(this.ref,i),rt)))}hasChild(e){const t=new $e(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ue(r,e){return r=Ct(r),r._checkNotDeleted("ref"),e!==void 0?Ro(r._root,e):r._root}function Ro(r,e){return r=Ct(r),ke(r._path)===null?hI("child","path",e):z_("child","path",e),new Yn(r._repo,nt(r._path,e))}function ac(r,e){r=Ct(r),Ah("push",r._path),$_("push",e,r._path,!0);const t=W_(r._repo),i=AI(t),o=Ro(r,i),l=Ro(r,i);let d;return d=Promise.resolve(l),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}function Fl(r){return Ah("remove",r._path),uo(r,null)}function uo(r,e){r=Ct(r),Ah("set",r._path),$_("set",e,r._path,!1);const t=new Oo;return NI(r._repo,r._path,e,null,t.wrapCallback(()=>{})),t.promise}function Qe(r,e){dI("update",e,r._path);const t=new Oo;return SI(r._repo,r._path,e,t.wrapCallback(()=>{})),t.promise}function Ut(r){r=Ct(r);const e=new Q_(()=>{}),t=new lc(e);return wI(r._repo,r,t).then(i=>new jo(i,new Yn(r._repo,r._path),r._queryParams.getIndex()))}class lc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new DI("value",this,new jo(e.snapshotNode,new Yn(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new OI(this,e,t):null}matches(e){return e instanceof lc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function LI(r,e,t,i,o){const l=new Q_(t,void 0),d=new lc(l);return EI(r._repo,r,d),()=>II(r._repo,r,d)}function tn(r,e,t,i){return LI(r,"value",e)}LE(Yn);zE(Yn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="FIREBASE_DATABASE_EMULATOR_HOST",Vd={};let FI=!1;function UI(r,e,t,i){const o=e.lastIndexOf(":"),l=e.substring(0,o),d=ii(l);r.repoInfo_=new Xv(e,d,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(r.authTokenProvider_=i)}function $I(r,e,t,i,o){let l=i||r.options.databaseURL;l===void 0&&(r.options.projectId||qn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",r.options.projectId),l=`${r.options.projectId}-default-rtdb.firebaseio.com`);let d=Og(l,o),f=d.repoInfo,m;typeof process<"u"&&rg&&(m=rg[MI]),m?(l=`http://${m}?ns=${f.namespace}`,d=Og(l,o),f=d.repoInfo):d.repoInfo.secure;const g=new JS(r.name,r.options,e);fI("Invalid Firebase Database URL",d),Pe(d.path)||qn("Database URL must point to the root of a Firebase Database (not including a child path).");const x=BI(f,r,g,new XS(r,t));return new VI(x,r)}function zI(r,e){const t=Vd[e];(!t||t[r.key]!==r)&&qn(`Database ${e}(${r.repoInfo_}) has already been deleted.`),kI(r),delete t[r.key]}function BI(r,e,t,i){let o=Vd[e.name];o||(o={},Vd[e.name]=o);let l=o[r.toURLString()];return l&&qn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new _I(r,FI,t,i),o[r.toURLString()]=l,l}class VI{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yI(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yn(this._repo,Oe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qn("Cannot call "+e+" on a deleted database.")}}function WI(r=Dv(),e){const t=sh(r,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=aN("database");i&&HI(t,...i)}return t}function HI(r,e,t,i={}){r=Ct(r),r._checkNotDeleted("useEmulator");const o=`${e}:${t}`,l=r._repoInternal;if(r._instanceStarted){if(o===r._repoInternal.repoInfo_.host&&os(i,l.repoInfo_.emulatorOptions))return;qn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&qn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new fl(fl.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:lN(i.mockUserToken,r.app.options.projectId);d=new fl(f)}ii(e)&&(kv(e),Tv("Database",!0)),UI(l,o,i,d)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(r){OS(ai),Qs(new as("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return $I(i,o,l,t)},"PUBLIC").setMultipleInstances(!0)),Pr(sg,ig,r),Pr(sg,ig,"esm2017")}Vn.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Vn.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};qI();var GI="firebase",KI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(GI,KI,"app");function Uh(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Y_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QI=Y_,X_=new Lo("auth","Firebase",Y_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new nh("@firebase/auth");function YI(r,...e){Ul.logLevel<=Ue.WARN&&Ul.warn(`Auth (${ai}): ${r}`,...e)}function pl(r,...e){Ul.logLevel<=Ue.ERROR&&Ul.error(`Auth (${ai}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(r,...e){throw zh(r,...e)}function gn(r,...e){return zh(r,...e)}function $h(r,e,t){const i=Object.assign(Object.assign({},QI()),{[e]:t});return new Lo("auth","Firebase",i).create(e,{appName:r.name})}function Wn(r){return $h(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J_(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&rn(r,"argument-error"),$h(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zh(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return X_.create(r,...e)}function ce(r,e,...t){if(!r)throw zh(e,...t)}function zn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw pl(e),new Error(e)}function Gn(r,e){r||zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function XI(){return Mg()==="http:"||Mg()==="https:"}function Mg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XI()||hN()||"connection"in navigator)?navigator.onLine:!0}function ZI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gn(t>e,"Short delay should be less than long delay!"),this.isMobile=th()||bv()}get(){return JI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(r,e){Gn(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],n1=new Vo(3e4,6e4);function Mr(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Xn(r,e,t,i,o={}){return ey(r,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const f=oi(Object.assign({key:r.config.apiKey},d)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:m},l);return dN()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&ii(r.emulatorConfig.host)&&(g.credentials="include"),Z_.fetch()(await ty(r,r.config.apiHost,t,f),g)})}async function ey(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},e1),e);try{const o=new s1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw dl(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const f=l.ok?d.errorMessage:d.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw dl(r,"credential-already-in-use",d);if(m==="EMAIL_EXISTS")throw dl(r,"email-already-in-use",d);if(m==="USER_DISABLED")throw dl(r,"user-disabled",d);const x=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw $h(r,x,g);rn(r,x)}}catch(o){if(o instanceof Lr)throw o;rn(r,"network-request-failed",{message:String(o)})}}async function cc(r,e,t,i,o={}){const l=await Xn(r,e,t,i,o);return"mfaPendingCredential"in l&&rn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function ty(r,e,t,i){const o=`${e}${t}?${i}`,l=r,d=l.config.emulator?Bh(r.config,o):`${r.config.apiScheme}://${o}`;return t1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function r1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class s1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(gn(this.auth,"network-request-failed")),n1.get())})}}function dl(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=gn(r,e,i);return o.customData._tokenResponse=t,o}function Fg(r){return r!==void 0&&r.enterprise!==void 0}class i1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return r1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function o1(r,e){return Xn(r,"GET","/v2/recaptchaConfig",Mr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(r,e){return Xn(r,"POST","/v1/accounts:delete",e)}async function zl(r,e){return Xn(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l1(r,e=!1){const t=Ct(r),i=await t.getIdToken(e),o=Vh(i);ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:yo(gd(o.auth_time)),issuedAtTime:yo(gd(o.iat)),expirationTime:yo(gd(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function gd(r){return Number(r)*1e3}function Vh(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return pl("JWT malformed, contained fewer than 3 sections"),null;try{const o=Nl(t);return o?JSON.parse(o):(pl("Failed to decode base64 JWT payload"),null)}catch(o){return pl("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Ug(r){const e=Vh(r);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Lr&&c1(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function c1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yo(this.lastLoginAt),this.creationTime=yo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(r){var e;const t=r.auth,i=await r.getIdToken(),o=await Ao(r,zl(t,{idToken:i}));ce(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?ny(l.providerUserInfo):[],f=h1(r.providerData,d),m=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),x=m?g:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Wd(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(r,_)}async function d1(r){const e=Ct(r);await Bl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h1(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function ny(r){return r.map(e=>{var{providerId:t}=e,i=Uh(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(r,e){const t=await ey(r,{},async()=>{const i=oi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await ty(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return r.emulatorConfig&&ii(r.emulatorConfig.host)&&(m.credentials="include"),Z_.fetch()(d,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function p1(r,e){return Xn(r,"POST","/v2/accounts:revokeToken",Mr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ug(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const t=Ug(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await f1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new Ws;return i&&(ce(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(ce(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(ce(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ws,this.toJSON())}_performRefresh(){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(r,e){ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class pn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Uh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new u1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Wd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ao(this,this.stsTokenManager.getToken(this.auth,e));return ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return l1(this,e)}reload(){return d1(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Bl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qt(this.auth.app))return Promise.reject(Wn(this.auth));const e=await this.getIdToken();return await Ao(this,a1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,f,m,g,x;const _=(i=t.displayName)!==null&&i!==void 0?i:void 0,y=(o=t.email)!==null&&o!==void 0?o:void 0,I=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,j=(d=t.photoURL)!==null&&d!==void 0?d:void 0,A=(f=t.tenantId)!==null&&f!==void 0?f:void 0,D=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,J=(g=t.createdAt)!==null&&g!==void 0?g:void 0,Q=(x=t.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:q,emailVerified:te,isAnonymous:ge,providerData:ve,stsTokenManager:ae}=t;ce(q&&ae,e,"internal-error");const he=Ws.fromJSON(this.name,ae);ce(typeof q=="string",e,"internal-error"),wr(_,e.name),wr(y,e.name),ce(typeof te=="boolean",e,"internal-error"),ce(typeof ge=="boolean",e,"internal-error"),wr(I,e.name),wr(j,e.name),wr(A,e.name),wr(D,e.name),wr(J,e.name),wr(Q,e.name);const ye=new pn({uid:q,auth:e,email:y,emailVerified:te,displayName:_,isAnonymous:ge,photoURL:j,phoneNumber:I,tenantId:A,stsTokenManager:he,createdAt:J,lastLoginAt:Q});return ve&&Array.isArray(ve)&&(ye.providerData=ve.map(Ee=>Object.assign({},Ee))),D&&(ye._redirectEventId=D),ye}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ws;o.updateFromServerResponse(t);const l=new pn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Bl(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?ny(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Ws;f.updateFromIdToken(i);const m=new pn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=new Map;function Bn(r){Gn(r instanceof Function,"Expected a class definition");let e=$g.get(r);return e?(Gn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,$g.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ry.type="NONE";const zg=ry;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(r,e,t){return`firebase:${r}:${e}:${t}`}class Hs{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ml(this.userKey,o.apiKey,l),this.fullPersistenceKey=ml("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await zl(this.auth,{idToken:e}).catch(()=>{});return t?pn._fromGetAccountInfoResponse(this.auth,t,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Hs(Bn(zg),e,i);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||Bn(zg);const d=ml(i,e.config.apiKey,e.name);let f=null;for(const g of t)try{const x=await g._get(d);if(x){let _;if(typeof x=="string"){const y=await zl(e,{idToken:x}).catch(()=>{});if(!y)break;_=await pn._fromGetAccountInfoResponse(e,y,x)}else _=pn._fromJSON(e,x);g!==l&&(f=_),l=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Hs(l,e,i):(l=m[0],f&&await l._set(d,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(d)}catch{}})),new Hs(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ay(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cy(e))return"Blackberry";if(uy(e))return"Webos";if(iy(e))return"Safari";if((e.includes("chrome/")||oy(e))&&!e.includes("edge/"))return"Chrome";if(ly(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function sy(r=Pt()){return/firefox\//i.test(r)}function iy(r=Pt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oy(r=Pt()){return/crios\//i.test(r)}function ay(r=Pt()){return/iemobile/i.test(r)}function ly(r=Pt()){return/android/i.test(r)}function cy(r=Pt()){return/blackberry/i.test(r)}function uy(r=Pt()){return/webos/i.test(r)}function Wh(r=Pt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function m1(r=Pt()){var e;return Wh(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function g1(){return fN()&&document.documentMode===10}function dy(r=Pt()){return Wh(r)||ly(r)||uy(r)||cy(r)||/windows phone/i.test(r)||ay(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(r,e=[]){let t;switch(r){case"Browser":t=Bg(Pt());break;case"Worker":t=`${Bg(Pt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ai}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,f)=>{try{const m=e(l);d(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(r,e={}){return Xn(r,"GET","/v2/passwordPolicy",Mr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=6;class x1{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:y1,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(d=m.containsNumericCharacter)!==null&&d!==void 0?d:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vg(this),this.idTokenSubscription=new Vg(this),this.beforeStateQueue=new v1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bn(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Hs.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await zl(this,{idToken:e}),i=await pn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qt(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!d||d===f)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qt(this.app))return Promise.reject(Wn(this));const t=e?Ct(e):null;return t&&ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qt(this.app)?Promise.reject(Wn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qt(this.app)?Promise.reject(Wn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _1(this),t=new x1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lo("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await p1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bn(e)||this._popupRedirectResolver;ce(t,this,"argument-error"),this.redirectPersistenceManager=await Hs.create(this,[Bn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(f,this,"internal-error"),f.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{d=!0,m()}}else{const m=e.addObserver(t);return()=>{d=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&YI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Jn(r){return Ct(r)}class Vg{constructor(e){this.auth=e,this.observer=null,this.addObserver=SN(t=>this.observer=t)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function N1(r){uc=r}function fy(r){return uc.loadJS(r)}function S1(){return uc.recaptchaEnterpriseScript}function C1(){return uc.gapiScript}function E1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class I1{constructor(){this.enterprise=new k1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class k1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const T1="recaptcha-enterprise",py="NO_RECAPTCHA";class b1{constructor(e){this.type=T1,this.auth=Jn(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,f)=>{o1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new i1(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,d(g.siteKey)}}).catch(m=>{f(m)})})}function o(l,d,f){const m=window.grecaptcha;Fg(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{d(g)}).catch(()=>{d(py)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new I1().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{i(this.auth).then(f=>{if(!t&&Fg(window.grecaptcha))o(f,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let m=S1();m.length!==0&&(m+=f),fy(m).then(()=>{o(f,l,d)}).catch(g=>{d(g)})}}).catch(f=>{d(f)})})}}async function Wg(r,e,t,i=!1,o=!1){const l=new b1(r);let d;if(o)d=py;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Hd(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Wg(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Wg(r,e,t,t==="getOobCode");return i(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(r,e){const t=sh(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(os(l,e??{}))return o;rn(o,"already-initialized")}return t.initialize({options:e})}function j1(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Bn);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function R1(r,e,t){const i=Jn(r);ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=my(e),{host:d,port:f}=A1(e),m=f===null?"":`:${f}`,g={url:`${l}//${d}${m}/`},x=Object.freeze({host:d,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ce(os(g,i.config.emulator)&&os(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,ii(d)?(kv(`${l}//${d}${m}`),Tv("Auth",!0)):D1()}function my(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function A1(r){const e=my(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Hg(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:Hg(d)}}}function Hg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function D1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,t){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}async function O1(r,e){return Xn(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(r,e){return cc(r,"POST","/v1/accounts:signInWithPassword",Mr(r,e))}async function M1(r,e){return Xn(r,"POST","/v1/accounts:sendOobCode",Mr(r,e))}async function F1(r,e){return M1(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1(r,e){return cc(r,"POST","/v1/accounts:signInWithEmailLink",Mr(r,e))}async function $1(r,e){return cc(r,"POST","/v1/accounts:signInWithEmailLink",Mr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Hh{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Do(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Do(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hd(e,t,"signInWithPassword",L1);case"emailLink":return U1(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hd(e,i,"signUpPassword",O1);case"emailLink":return $1(e,{idToken:t,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(r,e){return cc(r,"POST","/v1/accounts:signInWithIdp",Mr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="http://localhost";class ds extends Hh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Uh(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new ds(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return qs(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,qs(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qs(e,t)}buildRequest(){const e={requestUri:z1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=oi(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V1(r){const e=lo(co(r)).link,t=e?lo(co(e)).deep_link_id:null,i=lo(co(r)).deep_link_id;return(i?lo(co(i)).link:null)||i||t||e||r}class dc{constructor(e){var t,i,o,l,d,f;const m=lo(co(e)),g=(t=m.apiKey)!==null&&t!==void 0?t:null,x=(i=m.oobCode)!==null&&i!==void 0?i:null,_=B1((o=m.mode)!==null&&o!==void 0?o:null);ce(g&&x&&_,"argument-error"),this.apiKey=g,this.operation=_,this.code=x,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=m.lang)!==null&&d!==void 0?d:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=V1(e);try{return new dc(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.providerId=di.PROVIDER_ID}static credential(e,t){return Do._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=dc.parseLink(t);return ce(i,"argument-error"),Do._fromEmailAndCode(e,i.code,i.tenantId)}}di.PROVIDER_ID="password";di.EMAIL_PASSWORD_SIGN_IN_METHOD="password";di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends hc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Wo{constructor(){super("facebook.com")}static credential(e){return ds._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Wo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ds._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Un.credential(t,i)}catch{return null}}}Un.GOOGLE_SIGN_IN_METHOD="google.com";Un.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Wo{constructor(){super("github.com")}static credential(e){return ds._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Wo{constructor(){super("twitter.com")}static credential(e,t){return ds._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Cr.credential(t,i)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await pn._fromIdTokenResponse(e,i,o),d=qg(i);return new ti({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=qg(i);return new ti({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function qg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends Lr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Vl.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Vl(e,t,i,o)}}function gy(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Vl._fromErrorAndOperation(r,l,e,i):l})}async function W1(r,e,t=!1){const i=await Ao(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ti._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(r,e,t=!1){const{auth:i}=r;if(qt(i.app))return Promise.reject(Wn(i));const o="reauthenticate";try{const l=await Ao(r,gy(i,o,e,r),t);ce(l.idToken,i,"internal-error");const d=Vh(l.idToken);ce(d,i,"internal-error");const{sub:f}=d;return ce(r.uid===f,i,"user-mismatch"),ti._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&rn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vy(r,e,t=!1){if(qt(r.app))return Promise.reject(Wn(r));const i="signIn",o=await gy(r,i,e),l=await ti._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function q1(r,e){return vy(Jn(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(r,e,t){var i;ce(((i=t.url)===null||i===void 0?void 0:i.length)>0,r,"invalid-continue-uri"),ce(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),ce(typeof t.linkDomain>"u"||t.linkDomain.length>0,r,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ce(t.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ce(t.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(r,e,t){const i=Jn(r),o={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(d,f){ce(f.handleCodeInApp,i,"argument-error"),f&&G1(i,d,f)}l(o,t),await Hd(i,o,"getOobCode",F1)}function Q1(r,e){const t=dc.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function Y1(r,e,t){if(qt(r.app))return Promise.reject(Wn(r));const i=Ct(r),o=di.credentialWithLink(e,t||$l());return ce(o._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),q1(i,o)}function X1(r,e,t,i){return Ct(r).onIdTokenChanged(e,t,i)}function J1(r,e,t){return Ct(r).beforeAuthStateChanged(e,t)}function Z1(r,e,t,i){return Ct(r).onAuthStateChanged(e,t,i)}function ek(r){return Ct(r).signOut()}const Wl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wl,"1"),this.storage.removeItem(Wl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=1e3,nk=10;class yy extends _y{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,m)=>{this.notifyListeners(d,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);g1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,nk):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},tk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yy.type="LOCAL";const rk=yy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy extends _y{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xy.type="SESSION";const wy=xy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new fc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(d).map(async g=>g(t.origin,l)),m=await sk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((f,m)=>{const g=qh("",20);o.port1.start();const x=setTimeout(()=>{m(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(_){const y=_;if(y.data.eventId===g)switch(y.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(y.data.response);break;default:clearTimeout(x),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function ok(r){En().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function ak(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lk(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function ck(){return Ny()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="firebaseLocalStorageDb",uk=1,Hl="firebaseLocalStorage",Cy="fbase_key";class Ho{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pc(r,e){return r.transaction([Hl],e?"readwrite":"readonly").objectStore(Hl)}function dk(){const r=indexedDB.deleteDatabase(Sy);return new Ho(r).toPromise()}function qd(){const r=indexedDB.open(Sy,uk);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Hl,{keyPath:Cy})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Hl)?e(i):(i.close(),await dk(),e(await qd()))})})}async function Gg(r,e,t){const i=pc(r,!0).put({[Cy]:e,value:t});return new Ho(i).toPromise()}async function hk(r,e){const t=pc(r,!1).get(e),i=await new Ho(t).toPromise();return i===void 0?null:i.value}function Kg(r,e){const t=pc(r,!0).delete(e);return new Ho(t).toPromise()}const fk=800,pk=3;class Ey{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>pk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ny()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fc._getInstance(ck()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ak(),!this.activeServiceWorker)return;this.sender=new ik(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qd();return await Gg(e,Wl,"1"),await Kg(e,Wl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Gg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>hk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=pc(o,!1).getAll();return new Ho(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ey.type="LOCAL";const mk=Ey;new Vo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(r,e){return e?Bn(e):(ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends Hh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gk(r){return vy(r.auth,new Kh(r),r.bypassAuthState)}function vk(r){const{auth:e,user:t}=r;return ce(t,e,"internal-error"),H1(t,new Kh(r),r.bypassAuthState)}async function _k(r){const{auth:e,user:t}=r;return ce(t,e,"internal-error"),W1(t,new Kh(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:f}=e;if(d){this.reject(d);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gk;case"linkViaPopup":case"linkViaRedirect":return _k;case"reauthViaPopup":case"reauthViaRedirect":return vk;default:rn(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Vo(2e3,1e4);async function xk(r,e,t){if(qt(r.app))return Promise.reject(gn(r,"operation-not-supported-in-this-environment"));const i=Jn(r);J_(r,e,hc);const o=Gh(i,t);return new is(i,"signInViaPopup",e,o).executeNotNull()}class is extends Iy{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,is.currentPopupAction&&is.currentPopupAction.cancel(),is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");const e=qh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yk.get())};e()}}is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="pendingRedirect",gl=new Map;class Nk extends Iy{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=gl.get(this.auth._key());if(!e){try{const i=await Sk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}gl.set(this.auth._key(),e)}return this.bypassAuthState||gl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sk(r,e){const t=Ty(e),i=ky(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}async function Ck(r,e){return ky(r)._set(Ty(e),"true")}function Ek(r,e){gl.set(r._key(),e)}function ky(r){return Bn(r._redirectPersistence)}function Ty(r){return ml(wk,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(r,e,t){return kk(r,e,t)}async function kk(r,e,t){if(qt(r.app))return Promise.reject(Wn(r));const i=Jn(r);J_(r,e,hc),await i._initializationPromise;const o=Gh(i,t);return await Ck(o,i),o._openRedirect(i,e,"signInViaRedirect")}async function Tk(r,e){return await Jn(r)._initializationPromise,by(r,e,!1)}async function by(r,e,t=!1){if(qt(r.app))return Promise.reject(Wn(r));const i=Jn(r),o=Gh(i,e),d=await new Nk(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=600*1e3;class Pk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Py(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(gn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qg(e))}saveEventToCache(e){this.cachedEventUids.add(Qg(e)),this.lastProcessedEventTime=Date.now()}}function Qg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Py({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jk(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Py(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(r,e={}){return Xn(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dk=/^https?/;async function Ok(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Rk(r);for(const t of e)try{if(Lk(t))return}catch{}rn(r,"unauthorized-domain")}function Lk(r){const e=$l(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!Dk.test(t))return!1;if(Ak.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new Vo(3e4,6e4);function Yg(){const r=En().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Fk(r){return new Promise((e,t)=>{var i,o,l;function d(){Yg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yg(),t(gn(r,"network-request-failed"))},timeout:Mk.get()})}if(!((o=(i=En().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=En().gapi)===null||l===void 0)&&l.load)d();else{const f=E1("iframefcb");return En()[f]=()=>{gapi.load?d():t(gn(r,"network-request-failed"))},fy(`${C1()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw vl=null,e})}let vl=null;function Uk(r){return vl=vl||Fk(r),vl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new Vo(5e3,15e3),zk="__/auth/iframe",Bk="emulator/auth/iframe",Vk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hk(r){const e=r.config;ce(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Bh(e,Bk):`https://${r.config.authDomain}/${zk}`,i={apiKey:e.apiKey,appName:r.name,v:ai},o=Wk.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${oi(i).slice(1)}`}async function qk(r){const e=await Uk(r),t=En().gapi;return ce(t,r,"internal-error"),e.open({where:document.body,url:Hk(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vk,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=gn(r,"network-request-failed"),f=En().setTimeout(()=>{l(d)},$k.get());function m(){En().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Kk=500,Qk=600,Yk="_blank",Xk="http://localhost";class Xg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jk(r,e,t,i=Kk,o=Qk){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},Gk),{width:i.toString(),height:o.toString(),top:l,left:d}),g=Pt().toLowerCase();t&&(f=oy(g)?Yk:t),sy(g)&&(e=e||Xk,m.scrollbars="yes");const x=Object.entries(m).reduce((y,[I,j])=>`${y}${I}=${j},`,"");if(m1(g)&&f!=="_self")return Zk(e||"",f),new Xg(null);const _=window.open(e||"",f,x);ce(_,r,"popup-blocked");try{_.focus()}catch{}return new Xg(_)}function Zk(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="__/auth/handler",tT="emulator/auth/handler",nT=encodeURIComponent("fac");async function Jg(r,e,t,i,o,l){ce(r.config.authDomain,r,"auth-domain-config-required"),ce(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ai,eventId:o};if(e instanceof hc){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",Ed(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,_]of Object.entries({}))d[x]=_}if(e instanceof Wo){const x=e.getScopes().filter(_=>_!=="");x.length>0&&(d.scopes=x.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const x of Object.keys(f))f[x]===void 0&&delete f[x];const m=await r._getAppCheckToken(),g=m?`#${nT}=${encodeURIComponent(m)}`:"";return`${rT(r)}?${oi(f).slice(1)}${g}`}function rT({config:r}){return r.emulator?Bh(r,tT):`https://${r.authDomain}/${eT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="webStorageSupport";class sT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wy,this._completeRedirectFn=by,this._overrideRedirectResult=Ek}async _openPopup(e,t,i,o){var l;Gn((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await Jg(e,t,i,$l(),o);return Jk(e,d,qh())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Jg(e,t,i,$l(),o);return ok(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Gn(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await qk(e),i=new Pk(e);return t.register("authEvent",o=>(ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vd,{type:vd},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[vd];d!==void 0&&t(!!d),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ok(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dy()||iy()||Wh()}}const iT=sT;var Zg="@firebase/auth",ev="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lT(r){Qs(new as("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=i.options;ce(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hy(r)},g=new w1(i,o,l,m);return j1(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Qs(new as("auth-internal",e=>{const t=Jn(e.getProvider("auth").getImmediate());return(i=>new oT(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(Zg,ev,aT(r)),Pr(Zg,ev,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=300,uT=Iv("authIdTokenMaxAge")||cT;let tv=null;const dT=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>uT)return;const o=t==null?void 0:t.token;tv!==o&&(tv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hT(r=Dv()){const e=sh(r,"auth");if(e.isInitialized())return e.getImmediate();const t=P1(r,{popupRedirectResolver:iT,persistence:[mk,rk,wy]}),i=Iv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=dT(l.toString());J1(t,d,()=>d(t.currentUser)),X1(t,f=>d(f))}}const o=Cv("auth");return o&&R1(t,`http://${o}`),t}function fT(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}N1({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=gn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",fT().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lT("Browser");const pT={apiKey:"AIzaSyBLRfIvin2GeZzM2k91UvVVBxKzYDFC4XE",authDomain:"vitrineartisan.firebaseapp.com",databaseURL:"https://vitrineartisan-default-rtdb.firebaseio.com",projectId:"vitrineartisan",storageBucket:"vitrineartisan.firebasestorage.app",messagingSenderId:"375022059708",appId:"1:375022059708:web:f059d080070233a5b590b9"},jy=Av(pT),de=WI(jy),Cn=hT(jy),Gd=new Un;function nv(r){return r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,40)}async function mT(r){if(!r||r.length<3)return!1;const e=ue(de,`slugs/${r}`);return!(await Ut(e)).exists()}async function gT(r){if(!r||r.length<2||r.length>5)return!1;const e=ue(de,`prefixes/${r.toUpperCase()}`);return!(await Ut(e)).exists()}async function vT(r){const e=ue(de,`tenants/${r}/profile`),t=await Ut(e);return t.exists()?t.val():null}function _T(r,e){const t=ue(de,`tenants/${r}/profile`);return tn(t,i=>{e(i.exists()?i.val():null)})}async function yT(r,{businessName:e,ownerName:t,email:i,prefix:o,slug:l,theme:d}){const f=o.toUpperCase();await uo(ue(de,`slugs/${l}`),r),await uo(ue(de,`prefixes/${f}`),r);const m={businessName:e.trim(),ownerName:t.trim(),email:i.trim().toLowerCase(),prefix:f,slug:l,theme:d||"dark-copper",plan:"free",nextItemNumber:1,createdAt:Date.now(),updatedAt:Date.now()};return await uo(ue(de,`tenants/${r}/profile`),m),await uo(ue(de,`tenants/${r}/settings`),{vitrineSoldDays:7,taxes:{enabled:!1,tpsRate:5,tvqRate:9.975,tpsNumber:"",tvqNumber:""}}),m}async function xT(r){const e=ue(de,`slugs/${r}`),t=await Ut(e);return t.exists()?t.val():null}const Ry={"dark-copper":{name:"Cuivr sombre",preview:"#e8a87c",vars:{"--bg-primary":"#1a1a2e","--bg-secondary":"#16213e","--bg-card":"#1e2a45","--bg-card-hover":"#253354","--bg-input":"#0f1626","--text-primary":"#e8e8e8","--text-secondary":"#a0a8c0","--text-muted":"#6b7394","--accent":"#e8a87c","--accent-light":"#f5cba7","--accent-dark":"#c47d4e"}},"dark-emerald":{name:"meraude",preview:"#50C878",vars:{"--bg-primary":"#0f1a14","--bg-secondary":"#132418","--bg-card":"#1a3025","--bg-card-hover":"#22402f","--bg-input":"#0a120e","--text-primary":"#e8e8e8","--text-secondary":"#9cb8a8","--text-muted":"#607a6c","--accent":"#50C878","--accent-light":"#82dfa0","--accent-dark":"#38a85e"}},"dark-lavender":{name:"Lavande",preview:"#B39DDB",vars:{"--bg-primary":"#1a1528","--bg-secondary":"#221c38","--bg-card":"#2a2345","--bg-card-hover":"#352d54","--bg-input":"#120e1e","--text-primary":"#e8e8e8","--text-secondary":"#b0a8c8","--text-muted":"#7a6f98","--accent":"#B39DDB","--accent-light":"#d1c4e9","--accent-dark":"#8e79c0"}},"dark-rose":{name:"Ros",preview:"#F48FB1",vars:{"--bg-primary":"#1a1218","--bg-secondary":"#251a22","--bg-card":"#30222c","--bg-card-hover":"#3e2b38","--bg-input":"#140e12","--text-primary":"#e8e8e8","--text-secondary":"#c0a0b0","--text-muted":"#8a6878","--accent":"#F48FB1","--accent-light":"#f8bdd0","--accent-dark":"#e06090"}},"dark-ocean":{name:"Ocan",preview:"#4FC3F7",vars:{"--bg-primary":"#0d1b2a","--bg-secondary":"#1b2838","--bg-card":"#1e3548","--bg-card-hover":"#254458","--bg-input":"#081420","--text-primary":"#e8e8e8","--text-secondary":"#90b8d0","--text-muted":"#5a8098","--accent":"#4FC3F7","--accent-light":"#81d4fa","--accent-dark":"#0394d0"}},"light-natural":{name:"Naturel clair",preview:"#8B6F47",vars:{"--bg-primary":"#faf7f2","--bg-secondary":"#f0ebe2","--bg-card":"#ffffff","--bg-card-hover":"#f5f0e8","--bg-input":"#ffffff","--text-primary":"#2d2418","--text-secondary":"#5c4e3c","--text-muted":"#9a8b78","--accent":"#8B6F47","--accent-light":"#b89868","--accent-dark":"#6a5335"}},"light-sage":{name:"Sauge clair",preview:"#6B8E6B",vars:{"--bg-primary":"#f5f8f5","--bg-secondary":"#e8efe8","--bg-card":"#ffffff","--bg-card-hover":"#f0f5f0","--bg-input":"#ffffff","--text-primary":"#1e2e1e","--text-secondary":"#3c5a3c","--text-muted":"#7a9a7a","--accent":"#6B8E6B","--accent-light":"#8eb88e","--accent-dark":"#4a6e4a"}},"light-minimal":{name:"Minimal blanc",preview:"#333333",vars:{"--bg-primary":"#ffffff","--bg-secondary":"#f5f5f5","--bg-card":"#ffffff","--bg-card-hover":"#fafafa","--bg-input":"#f8f8f8","--text-primary":"#1a1a1a","--text-secondary":"#555555","--text-muted":"#999999","--accent":"#333333","--accent-light":"#666666","--accent-dark":"#111111"}}};function ho(r){const e=Ry[r];if(!e)return;const t=document.documentElement;Object.entries(e.vars).forEach(([i,o])=>{t.style.setProperty(i,o)})}const Ay=C.createContext(null);Gd.setCustomParameters({prompt:"select_account"});const wT={url:window.location.origin+"/app",handleCodeInApp:!0};function NT({children:r}){const[e,t]=C.useState(null),[i,o]=C.useState(null),[l,d]=C.useState(!0),[f,m]=C.useState(!1);C.useEffect(()=>{if(Tk(Cn).catch(()=>{}),Q1(Cn,window.location.href)){let j=window.localStorage.getItem("emailForSignIn");j||(j=window.prompt("Entrez votre adresse courriel pour confirmer la connexion :")),j&&Y1(Cn,j,window.location.href).then(()=>{window.localStorage.removeItem("emailForSignIn"),window.history.replaceState(null,"",window.location.origin+window.location.pathname)}).catch(A=>{console.error("Erreur lien magique:",A)})}return Z1(Cn,async j=>{if(t(j),j){const A=await vT(j.uid);A?(o(A),m(!1),A.theme&&ho(A.theme)):(o(null),m(!0))}else o(null),m(!1);d(!1)})},[]),C.useEffect(()=>e?_T(e.uid,j=>{j&&(o(j),m(!1),j.theme&&ho(j.theme))}):void 0,[e]);const g=async()=>{try{await xk(Cn,Gd)}catch(I){if(I.code==="auth/popup-blocked"||I.code==="auth/popup-closed-by-user")await Ik(Cn,Gd);else throw I}},x=async I=>{await K1(Cn,I,wT),window.localStorage.setItem("emailForSignIn",I)},_=async()=>{try{await ek(Cn),ho("dark-copper")}catch(I){console.error("Erreur de deconnexion:",I)}},y=I=>{o(I),m(!1),I.theme&&ho(I.theme)};return l?c.jsxs("div",{className:"loading-screen",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Chargement..."})]}):c.jsx(Ay.Provider,{value:{user:e,tenant:i,needsOnboarding:f,loginWithGoogle:g,sendMagicLink:x,logout:_,completeOnboarding:y},children:r})}function ms(){const r=C.useContext(Ay);if(!r)throw new Error("useAuth doit tre utilis dans un AuthProvider");return r}const Dy={"dark-copper":{name:"Cuivr sombre",emoji:"",preview:"#e8a87c",vars:{"--bg-primary":"#0f0f1a","--bg-secondary":"#1a1a2e","--bg-card":"#16213e","--bg-card-hover":"#1c2a4a","--bg-input":"#0a0a14","--text-primary":"#e8e8e8","--text-secondary":"#a0a8c0","--text-muted":"#6b7394","--accent":"#e8a87c","--accent-light":"#f0c8a8","--accent-dark":"#c08060"}},"dark-emerald":{name:"meraude",emoji:"",preview:"#66BB6A",vars:{"--bg-primary":"#0a1a14","--bg-secondary":"#122a1e","--bg-card":"#1a3828","--bg-card-hover":"#224832","--bg-input":"#060f0a","--text-primary":"#e8e8e8","--text-secondary":"#a0c8a8","--text-muted":"#5a8a68","--accent":"#66BB6A","--accent-light":"#a5d6a7","--accent-dark":"#388E3C"}},"dark-lavender":{name:"Lavande",emoji:"",preview:"#B39DDB",vars:{"--bg-primary":"#12101a","--bg-secondary":"#1e1a2e","--bg-card":"#28223e","--bg-card-hover":"#342c50","--bg-input":"#0c0a14","--text-primary":"#e8e8e8","--text-secondary":"#b0a8c8","--text-muted":"#7a6f98","--accent":"#B39DDB","--accent-light":"#d1c4e9","--accent-dark":"#8e79c0"}},"dark-rose":{name:"Ros",emoji:"",preview:"#F48FB1",vars:{"--bg-primary":"#1a1218","--bg-secondary":"#251a22","--bg-card":"#30222c","--bg-card-hover":"#3e2b38","--bg-input":"#140e12","--text-primary":"#e8e8e8","--text-secondary":"#c0a0b0","--text-muted":"#8a6878","--accent":"#F48FB1","--accent-light":"#f8bdd0","--accent-dark":"#e06090"}},"dark-ocean":{name:"Ocan",emoji:"",preview:"#4FC3F7",vars:{"--bg-primary":"#0d1b2a","--bg-secondary":"#1b2838","--bg-card":"#1e3548","--bg-card-hover":"#254458","--bg-input":"#081420","--text-primary":"#e8e8e8","--text-secondary":"#90b8d0","--text-muted":"#5a8098","--accent":"#4FC3F7","--accent-light":"#81d4fa","--accent-dark":"#0394d0"}},"light-natural":{name:"Naturel clair",emoji:"",preview:"#8B6F47",vars:{"--bg-primary":"#faf7f2","--bg-secondary":"#f0ebe2","--bg-card":"#ffffff","--bg-card-hover":"#f5f0e8","--bg-input":"#ffffff","--text-primary":"#2d2418","--text-secondary":"#5c4e3c","--text-muted":"#9a8b78","--accent":"#8B6F47","--accent-light":"#b89868","--accent-dark":"#6a5335"}},"light-sage":{name:"Sauge clair",emoji:"",preview:"#6B8E6B",vars:{"--bg-primary":"#f5f8f5","--bg-secondary":"#e8efe8","--bg-card":"#ffffff","--bg-card-hover":"#f0f5f0","--bg-input":"#ffffff","--text-primary":"#1e2e1e","--text-secondary":"#3c5a3c","--text-muted":"#7a9a7a","--accent":"#6B8E6B","--accent-light":"#8eb88e","--accent-dark":"#4a6e4a"}},"light-minimal":{name:"Minimal blanc",emoji:"",preview:"#333333",vars:{"--bg-primary":"#ffffff","--bg-secondary":"#f5f5f5","--bg-card":"#ffffff","--bg-card-hover":"#fafafa","--bg-input":"#f8f8f8","--text-primary":"#1a1a1a","--text-secondary":"#555555","--text-muted":"#999999","--accent":"#333333","--accent-light":"#666666","--accent-dark":"#111111"}}};function Oy(r){const e=Dy[r];if(!e)return;const t=document.documentElement;Object.entries(e.vars).forEach(([i,o])=>{t.style.setProperty(i,o)})}const _d=600,yd=600,ST=.6,hl=80,CT=.4;function Ly(r){return new Promise((e,t)=>{const i=new FileReader;i.onload=o=>{const l=new Image;l.onload=()=>{const d=document.createElement("canvas");let{width:f,height:m}=l;f>m?f>_d&&(m=Math.round(m*_d/f),f=_d):m>yd&&(f=Math.round(f*yd/m),m=yd),d.width=f,d.height=m,d.getContext("2d").drawImage(l,0,0,f,m);const x=d.toDataURL("image/jpeg",ST);e(x)},l.onerror=()=>t(new Error("Impossible de charger l'image")),l.src=o.target.result},i.onerror=()=>t(new Error("Impossible de lire le fichier")),i.readAsDataURL(r)})}function ET(r){return new Promise((e,t)=>{const i=new FileReader;i.onload=o=>{const l=new Image;l.onload=()=>{const d=document.createElement("canvas");d.width=hl,d.height=hl;const f=d.getContext("2d"),m=Math.min(l.width,l.height),g=(l.width-m)/2,x=(l.height-m)/2;f.drawImage(l,g,x,m,m,0,0,hl,hl);const _=d.toDataURL("image/jpeg",CT);e(_)},l.onerror=()=>t(new Error("Impossible de charger l'image")),l.src=o.target.result},i.onerror=()=>t(new Error("Impossible de lire le fichier")),i.readAsDataURL(r)})}function Qh(){var e;const r=(e=Cn.currentUser)==null?void 0:e.uid;if(!r)throw new Error("Utilisateur non connect");return r}function vn(r){return`tenants/${Qh()}/items`}function hi(r){return`tenants/${Qh()}/photos`}function qo(r){return`tenants/${Qh()}/stores`}const mc=4;async function IT(r){const e=ue(de,`${hi()}/${r}`),t=await Ut(e);return t.exists()&&t.val().photoBase64||null}async function xd(r){const e=ue(de,`${hi()}/${r}`),t=await Ut(e);if(!t.exists())return[];const i=t.val(),o=[];i.photoBase64&&o.push(i.photoBase64);for(let l=1;l<=mc;l++)i[`photo_${l}`]&&o.push(i[`photo_${l}`]);return o}async function kT(r,e){const t=ue(de,`${hi()}/${r}`),i=await Ut(t),o=i.exists()?i.val():{};let l=null;for(let g=1;g<=mc;g++)if(!o[`photo_${g}`]){l=g;break}if(l===null)return null;const d=await Ly(e);await Qe(t,{[`photo_${l}`]:d});const f=My(o)+1,m=ue(de,`${vn()}/${r}`);return await Qe(m,{photoCount:f,updatedAt:Date.now()}),l}async function TT(r,e){if(e<1||e>mc)return;const t=ue(de,`${hi()}/${r}`);await Qe(t,{[`photo_${e}`]:null});const i=await Ut(t),o=i.exists()?i.val():{},l=My(o),d=ue(de,`${vn()}/${r}`);await Qe(d,{photoCount:l,updatedAt:Date.now()})}function My(r){let e=0;r.photoBase64&&e++;for(let t=1;t<=mc;t++)r[`photo_${t}`]&&e++;return e}function Fy(r){const e=ue(de,qo());return tn(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,d)=>(l.name||"").localeCompare(d.name||"")),r(o)})}async function Uy(r){const e=ue(de,`${qo()}/${r}`),t=await Ut(e);return t.exists()?{id:r,...t.val()}:null}async function bT({name:r,commissionPercent:e,locationFee:t}){const i={name:r.trim(),commissionPercent:parseFloat(e)||0,locationFee:parseFloat(t)||0,active:!0,createdAt:Date.now()},o=ue(de,qo()),l=ac(o);return await Qe(l,i),{id:l.key,...i}}async function PT(r,e){const t=ue(de,`${qo()}/${r}`);await Qe(t,e)}async function jT(r){const e=ue(de,`${qo()}/${r}`);await Fl(e)}async function RT({uniqueId:r,description:e,longDescription:t,price:i,photoFile:o,category:l,itemDate:d}){const f={uniqueId:r.toUpperCase().trim(),description:e.trim(),longDescription:(t==null?void 0:t.trim())||"",price:parseFloat(i),hasPhoto:!1,photoCount:0,category:l||"",status:"inventory",itemDate:d||new Date().toISOString().split("T")[0],consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,sellerName:"",createdAt:Date.now(),updatedAt:Date.now()},m=ue(de,vn()),g=ac(m);if(await Qe(g,f),o){const[x,_]=await Promise.all([Ly(o),ET(o)]),y=ue(de,`${hi()}/${g.key}`);await Qe(y,{photoBase64:x}),await Qe(g,{hasPhoto:!0,thumbnail:_,photoCount:1}),f.hasPhoto=!0,f.thumbnail=_,f.photoCount=1}return{id:g.key,...f}}async function AT(r,e){const t=ue(de,`${vn()}/${r}`);await Qe(t,{...e,updatedAt:Date.now()})}async function DT(r){const e=ue(de,`${vn()}/${r}`),t=ue(de,`${hi()}/${r}`);await Fl(t),await Fl(e)}async function $y(r){const e=ue(de,vn()),t=await Ut(e);if(!t.exists())return null;const i=r.toUpperCase().trim();let o=null;return t.forEach(l=>{const d=l.val();d.uniqueId===i&&(o={id:l.key,...d})}),o&&o.hasPhoto&&(o.photoBase64=await IT(o.id)),o}async function rv(r="ART"){const e=ue(de,vn()),t=await Ut(e);let i=0;t.exists()&&t.forEach(l=>{const m=(l.val().uniqueId||"").match(new RegExp(`^${r}-(\\d+)$`,"i"));if(m){const g=parseInt(m[1],10);g>i&&(i=g)}});const o=i+1;return`${r}-${String(o).padStart(3,"0")}`}async function OT(r,e,t=null,i=null,o="",l=!1,d="",f=null){const m=ue(de,`${vn()}/${r}`),g=await Ut(m),x=g.exists()?g.val():{},_=l?0:i!==null?parseFloat(i):x.price,y={status:"sold",sellerName:e.trim(),saleDate:t||new Date().toISOString().split("T")[0],salePrice:_,marketName:o.trim(),isGift:l,giftNote:l?d.trim():"",updatedAt:Date.now()};if(f&&!l?(y.taxEnabled=!0,y.tpsRate=f.tpsRate,y.tvqRate=f.tvqRate,y.tpsAmount=f.tpsAmount,y.tvqAmount=f.tvqAmount,y.totalWithTax=f.totalWithTax):(y.taxEnabled=!1,y.tpsRate=null,y.tvqRate=null,y.tpsAmount=null,y.tvqAmount=null,y.totalWithTax=null),x.status==="consignment"&&x.consignmentStoreId&&!l){const I=await Uy(x.consignmentStoreId);if(I&&I.commissionPercent>0){const j=Math.round(_*I.commissionPercent)/100;y.commissionPercent=I.commissionPercent,y.commissionAmount=j,y.netRevenue=Math.round((_-j)*100)/100}else y.commissionPercent=0,y.commissionAmount=0,y.netRevenue=_}return await Qe(m,y),y}async function LT(r,e,t=null,i=""){const o=ue(de,`${vn()}/${r}`);await Qe(o,{status:"consignment",consignmentStore:e.trim(),consignmentStoreId:i,consignmentDate:t||new Date().toISOString().split("T")[0],updatedAt:Date.now()})}async function MT(r){const e=ue(de,`${vn()}/${r}`);await Qe(e,{status:"inventory",consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,salePrice:null,marketName:"",sellerName:"",isGift:!1,giftNote:"",commissionPercent:null,commissionAmount:null,netRevenue:null,taxEnabled:null,tpsRate:null,tvqRate:null,tpsAmount:null,tvqAmount:null,totalWithTax:null,updatedAt:Date.now()})}function zy(r){const e=ue(de,vn());return tn(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,d)=>(d.createdAt||0)-(l.createdAt||0)),r(o)})}const sv={all:"Tous",inventory:"En stock",consignment:"En consigne",sold:"Vendus"},FT={inventory:"#2ecc71",consignment:"#f39c12",sold:"#e74c3c"};function es(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function UT(){const[r,e]=C.useState([]),[t,i]=C.useState([]),[o,l]=C.useState("all"),[d,f]=C.useState(""),[m,g]=C.useState(null),[x,_]=C.useState(!0),[y,I]=C.useState({}),[j,A]=C.useState({}),[D,J]=C.useState(null),[Q,q]=C.useState({description:"",longDescription:"",price:"",category:""}),[te,ge]=C.useState(!1),[ve,ae]=C.useState(null),[he,ye]=C.useState(""),[Ee,je]=C.useState(""),W=C.useRef(null);C.useEffect(()=>zy(z=>{e(z),_(!1)}),[]),C.useEffect(()=>Fy(i),[]);const Se=async N=>{if(m===N.id){g(null);return}if(g(N.id),A(z=>({...z,[N.id]:0})),!y[N.id]&&(N.hasPhoto||N.photoBase64)){const z=await xd(N.id);z.length===0&&N.photoBase64?I(H=>({...H,[N.id]:[N.photoBase64]})):I(H=>({...H,[N.id]:z}))}},ne=async(N,z)=>{var Y;const H=(Y=z.target.files)==null?void 0:Y[0];if(H){ge(!0);try{if(await kT(N.id,H)===null)alert("Maximum de 5 photos atteint pour cet article.");else{const Me=await xd(N.id);I(Gt=>({...Gt,[N.id]:Me}))}}catch(ie){console.error("Erreur ajout photo:",ie),alert("Erreur lors de l'ajout de la photo.")}finally{ge(!1),W.current&&(W.current.value="")}}},Ce=async(N,z)=>{if(z===0){alert("La photo principale ne peut pas tre supprime ici.");return}if(confirm("Supprimer cette photo?"))try{await TT(N.id,z);const H=await xd(N.id);I(Y=>({...Y,[N.id]:H})),A(Y=>({...Y,[N.id]:0}))}catch(H){console.error("Erreur suppression photo:",H)}},we=r.filter(N=>{var Y,ie;const z=o==="all"||N.status===o,H=d===""||((Y=N.uniqueId)==null?void 0:Y.toLowerCase().includes(d.toLowerCase()))||((ie=N.description)==null?void 0:ie.toLowerCase().includes(d.toLowerCase()));return z&&H}),fe={all:r.length,inventory:r.filter(N=>N.status==="inventory").length,consignment:r.filter(N=>N.status==="consignment").length,sold:r.filter(N=>N.status==="sold").length},U=N=>{var z;J(N.id),q({description:N.description||"",longDescription:N.longDescription||"",price:((z=N.price)==null?void 0:z.toString())||"",category:N.category||""})},ee=async N=>{await AT(N.id,{description:Q.description.trim(),longDescription:Q.longDescription.trim(),price:parseFloat(Q.price)||0,category:Q.category.trim()}),J(null)},G=()=>{J(null)},k=async N=>{confirm(`Remettre "${N.uniqueId}" en inventaire?`)&&(await MT(N.id),g(null))},L=async N=>{confirm(`Supprimer dfinitivement "${N.uniqueId}"?`)&&(await DT(N.id),g(null),I(z=>{const H={...z};return delete H[N.id],H}))},_e=N=>{ae(N.id),ye(""),je("")},P=async N=>{let z=Ee.trim(),H=he;if(he&&he!=="other"){const Y=t.find(ie=>ie.id===he);Y&&(z=Y.name)}if(!z){alert("Entrez le nom du magasin");return}await LT(N.id,z,null,H==="other"?"":H),ae(null),g(null)},K=()=>{ae(null)};return x?c.jsxs("div",{className:"page-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Chargement de l'inventaire..."})]}):c.jsxs("div",{className:"page inventory-page",children:[c.jsxs("div",{className:"search-bar",children:[c.jsx("input",{type:"text",placeholder:" Rechercher par # ou description...",value:d,onChange:N=>f(N.target.value),className:"search-input"}),d&&c.jsx("button",{className:"search-clear",onClick:()=>f(""),children:""})]}),c.jsx("div",{className:"status-filters",children:Object.entries(sv).map(([N,z])=>c.jsxs("button",{className:`filter-btn ${o===N?"active":""}`,onClick:()=>l(N),children:[z,c.jsx("span",{className:"filter-count",children:fe[N]})]},N))}),we.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("p",{className:"empty-icon",children:""}),c.jsx("p",{children:d?"Aucun rsultat trouv":"Aucun item dans cette catgorie"})]}):c.jsx("div",{className:"items-list",children:we.map(N=>{var z,H,Y;return c.jsxs("div",{className:`item-card ${m===N.id?"expanded":""}`,onClick:()=>Se(N),children:[c.jsxs("div",{className:"item-row",children:[c.jsxs("div",{className:"item-photo",children:[N.thumbnail?c.jsx("img",{src:N.thumbnail,alt:N.description,className:"item-thumbnail"}):N.hasPhoto||N.photoBase64?c.jsx("div",{className:"photo-placeholder",children:""}):c.jsx("div",{className:"photo-placeholder",children:""}),N.photoCount>1&&c.jsx("span",{className:"photo-count-badge",children:N.photoCount})]}),c.jsxs("div",{className:"item-info",children:[c.jsxs("div",{className:"item-id-row",children:[c.jsxs("span",{className:"item-unique-id",children:["#",N.uniqueId]}),c.jsx("span",{className:"item-status-badge",style:{backgroundColor:FT[N.status]},children:sv[N.status]})]}),c.jsx("p",{className:"item-description",children:N.description}),c.jsxs("div",{className:"item-meta",children:[c.jsxs("span",{className:"item-price",children:[es(N.price)," $"]}),N.itemDate&&c.jsxs("span",{className:"item-date",children:[" ",N.itemDate]}),N.status==="consignment"&&c.jsxs("span",{className:"item-consignment",children:[" ",N.consignmentStore," ",N.consignmentDate&&`(${N.consignmentDate})`]}),N.status==="sold"&&c.jsxs("span",{className:"item-sold-info",children:[N.isGift?c.jsxs(c.Fragment,{children:[" Cadeau",N.giftNote?`  ${N.giftNote}`:"","  "]}):N.salePrice&&N.salePrice!==N.price?c.jsxs(c.Fragment,{children:[c.jsxs("s",{children:[es(N.price)," $"]}),"  ",es(N.salePrice)," $  "]}):"",N.saleDate,"  ",N.sellerName,N.marketName?`   ${N.marketName}`:"",N.commissionAmount>0&&c.jsxs(c.Fragment,{children:["   Net: ",es(N.netRevenue)," $"]})]})]})]})]}),m===N.id&&c.jsxs("div",{onClick:ie=>ie.stopPropagation(),children:[y[N.id]&&y[N.id].length>0&&c.jsxs("div",{className:"photo-gallery",children:[c.jsx("div",{className:"gallery-main",children:c.jsx("img",{src:y[N.id][j[N.id]||0],alt:N.description})}),y[N.id].length>1&&c.jsx("div",{className:"gallery-thumbs",children:y[N.id].map((ie,Me)=>c.jsxs("div",{className:`gallery-thumb ${(j[N.id]||0)===Me?"active":""}`,onClick:()=>A(Gt=>({...Gt,[N.id]:Me})),children:[c.jsx("img",{src:ie,alt:`Photo ${Me+1}`}),Me>0&&D===N.id&&c.jsx("button",{className:"gallery-thumb-delete",onClick:Gt=>{Gt.stopPropagation(),Ce(N,Me)},children:""})]},Me))})]}),N.hasPhoto&&!y[N.id]&&c.jsx("div",{className:"item-expanded-photo loading",children:c.jsx("div",{className:"loading-spinner"})}),N.longDescription&&D!==N.id&&c.jsx("div",{className:"item-long-description",children:c.jsx("p",{children:N.longDescription})}),N.status==="sold"&&N.commissionAmount>0&&c.jsxs("div",{className:"item-commission-info",children:[c.jsxs("div",{className:"commission-row",children:[c.jsx("span",{children:"Prix de vente"}),c.jsxs("span",{children:[es(N.salePrice)," $"]})]}),c.jsxs("div",{className:"commission-row commission-negative",children:[c.jsxs("span",{children:["Commission ",N.consignmentStore," (",N.commissionPercent,"%)"]}),c.jsxs("span",{children:["-",es(N.commissionAmount)," $"]})]}),c.jsxs("div",{className:"commission-row commission-total",children:[c.jsx("span",{children:"Revenu net"}),c.jsxs("span",{children:[es(N.netRevenue)," $"]})]})]}),c.jsx("div",{className:"item-actions",children:ve===N.id?c.jsxs("div",{className:"item-edit-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Magasin de consigne"}),t.length>0?c.jsxs("select",{value:he,onChange:ie=>{if(ye(ie.target.value),ie.target.value!=="other"){const Me=t.find(Gt=>Gt.id===ie.target.value);Me&&je(Me.name)}},className:"form-input",children:[c.jsx("option",{value:"",children:" Choisir un magasin "}),t.map(ie=>c.jsxs("option",{value:ie.id,children:[ie.name,ie.commissionPercent>0?` (${ie.commissionPercent}%)`:"",ie.locationFee>0?` + ${ie.locationFee}$/mois`:""]},ie.id)),c.jsx("option",{value:"other",children:" Autre magasin..."})]}):c.jsx("input",{type:"text",value:Ee,onChange:ie=>je(ie.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),he==="other"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nom du magasin"}),c.jsx("input",{type:"text",value:Ee,onChange:ie=>je(ie.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),c.jsxs("div",{className:"item-edit-actions",children:[c.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>P(N),disabled:!he&&!Ee.trim(),children:" Confirmer consigne"}),c.jsx("button",{className:"btn btn-small btn-secondary",onClick:K,children:"Annuler"})]})]}):D===N.id?c.jsxs("div",{className:"item-edit-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Titre"}),c.jsx("input",{type:"text",value:Q.description,onChange:ie=>q(Me=>({...Me,description:ie.target.value})),className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Description dtaille"}),c.jsx("textarea",{value:Q.longDescription,onChange:ie=>q(Me=>({...Me,longDescription:ie.target.value})),className:"form-input form-textarea",rows:"4",placeholder:"Dcrivez l'article en dtail..."})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Prix ($)"}),c.jsx("input",{type:"number",value:Q.price,onChange:ie=>q(Me=>({...Me,price:ie.target.value})),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Catgorie"}),c.jsx("input",{type:"text",value:Q.category,onChange:ie=>q(Me=>({...Me,category:ie.target.value})),className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:[" Photos (",((z=y[N.id])==null?void 0:z.length)||(N.hasPhoto?1:0),"/5)"]}),(((H=y[N.id])==null?void 0:H.length)||0)<5&&c.jsxs(c.Fragment,{children:[c.jsx("input",{ref:W,type:"file",accept:"image/*",capture:"environment",onChange:ie=>ne(N,ie),className:"hidden-input"}),c.jsx("button",{type:"button",className:"btn btn-small btn-add-photo",onClick:()=>{var ie;return(ie=W.current)==null?void 0:ie.click()},disabled:te,children:te?" Ajout en cours...":" Ajouter une photo"})]}),(((Y=y[N.id])==null?void 0:Y.length)||0)>=5&&c.jsx("p",{className:"form-hint",children:"Maximum de 5 photos atteint"})]}),c.jsxs("div",{className:"item-edit-actions",children:[c.jsx("button",{className:"btn btn-small btn-save",onClick:()=>ee(N),children:" Sauvegarder"}),c.jsx("button",{className:"btn btn-small btn-secondary",onClick:G,children:"Annuler"})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>U(N),children:" Modifier"}),N.status==="inventory"&&c.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>_e(N),children:" Consigne"}),(N.status==="consignment"||N.status==="sold")&&c.jsx("button",{className:"btn btn-small btn-return",onClick:()=>k(N),children:" Retour inventaire"}),c.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>L(N),children:" Supprimer"})]})})]})]},N.id)})})]})}const $T="https://us-central1-stockduloft.cloudfunctions.net/analyzePhoto";async function zT(r,e=[],t=""){try{const i=await fetch($T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:r,categories:e,userHint:t})});if(!i.ok)throw new Error(`Erreur serveur: ${i.status}`);const o=await i.json();if(o.success)return{category:o.category,title:o.title,description:o.description};throw new Error(o.error||"Erreur inconnue")}catch(i){throw console.error("Erreur AI:",i),i}}function BT({imageBase64:r,categories:e,onSuggestion:t}){const[i,o]=C.useState(!1),[l,d]=C.useState(null),[f,m]=C.useState(""),g=async()=>{if(!r){d("Prenez une photo d'abord");return}o(!0),d(null);try{const x=await zT(r,e,f);t(x)}catch(x){d("Impossible d'analyser la photo. Ressayez."),console.error(x)}finally{o(!1)}};return c.jsxs("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[c.jsx("input",{type:"text",value:f,onChange:x=>m(x.target.value),placeholder:"C'est quoi? Ex: butoir de porte, sac  lunch, coussin...",style:{width:"100%",padding:"10px 12px",fontSize:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",marginBottom:"8px",boxSizing:"border-box"}}),c.jsx("button",{type:"button",onClick:g,disabled:i||!r,style:{padding:"10px 20px",backgroundColor:i?"#ccc":"#7c3aed",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:i?"wait":"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:i?c.jsxs(c.Fragment,{children:[c.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid white",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Analyse en cours..."]}):c.jsx(c.Fragment,{children:" Suggestion AI"})}),l&&c.jsx("p",{style:{color:"red",fontSize:"14px",marginTop:"5px"},children:l}),c.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function VT(){const r=Jd(),{tenant:e}=ms(),t=(e==null?void 0:e.prefix)||"ART",i=C.useRef(null),[o,l]=C.useState({uniqueId:"",description:"",longDescription:"",price:"",category:"",itemDate:new Date().toISOString().split("T")[0]}),[d,f]=C.useState(null),[m,g]=C.useState(null),[x,_]=C.useState(!1),[y,I]=C.useState(""),[j,A]=C.useState("");C.useEffect(()=>{rv(t).then(ae=>{l(he=>({...he,uniqueId:ae})),A(ae)})},[t]);const D=ae=>{const{name:he,value:ye}=ae.target;l(Ee=>({...Ee,[he]:ye})),he==="uniqueId"&&I("")},J=ae=>{var Ee;const he=(Ee=ae.target.files)==null?void 0:Ee[0];if(!he)return;f(he);const ye=new FileReader;ye.onload=je=>g(je.target.result),ye.readAsDataURL(he)},Q=()=>{var ae;(ae=i.current)==null||ae.click()},q=()=>{f(null),g(null),i.current&&(i.current.value="")},te=()=>{l(ae=>({...ae,uniqueId:j})),I("")},ge=ae=>{l(he=>({...he,...ae.category?{category:ae.category}:{},...ae.title?{description:ae.title}:{},...ae.description?{longDescription:ae.description}:{}}))},ve=async ae=>{if(ae.preventDefault(),I(""),!o.uniqueId.trim()){I("Le numro unique est requis");return}if(!o.price||parseFloat(o.price)<=0){I("Le prix doit tre suprieur  0");return}if(await $y(o.uniqueId)){const ye=await rv(t);A(ye),I(`Le numro "${o.uniqueId.toUpperCase()}" existe dj !`);return}_(!0);try{await RT({uniqueId:o.uniqueId,description:o.description,longDescription:o.longDescription,price:o.price,category:o.category,itemDate:o.itemDate,photoFile:d}),r("/app")}catch(ye){console.error("Erreur:",ye),I("Erreur lors de la sauvegarde. Ressayez.")}finally{_(!1)}};return c.jsxs("div",{className:"page add-item-page",children:[c.jsx("h2",{className:"page-title",children:"Nouvel item"}),c.jsxs("form",{onSubmit:ve,className:"add-form",children:[c.jsxs("div",{className:"photo-section",children:[c.jsx("input",{ref:i,type:"file",accept:"image/*",capture:"environment",onChange:J,className:"hidden-input"}),m?c.jsxs("div",{className:"photo-preview-container",children:[c.jsx("img",{src:m,alt:"Aperu",className:"photo-preview"}),c.jsx("button",{type:"button",className:"photo-remove",onClick:q,children:""})]}):c.jsxs("button",{type:"button",className:"photo-capture-btn",onClick:Q,children:[c.jsx("span",{className:"capture-icon",children:""}),c.jsx("span",{children:"Prendre une photo"})]}),c.jsx("p",{className:"photo-hint",children:" Photo principale  vous pourrez ajouter d'autres photos en modifiant l'article"})]}),m&&c.jsx(BT,{imageBase64:m,onSuggestion:ge}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Numro unique *"}),c.jsx("input",{type:"text",name:"uniqueId",value:o.uniqueId,onChange:D,placeholder:`Ex: ${t}-001`,className:"form-input",autoComplete:"off",style:{textTransform:"uppercase"}})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Titre / Description courte"}),c.jsx("input",{type:"text",name:"description",value:o.description,onChange:D,placeholder:"Ex: Sac  main fleuri",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Description dtaille"}),c.jsx("textarea",{name:"longDescription",value:o.longDescription,onChange:D,placeholder:"Dcrivez l'article en dtail : matriaux, dimensions, couleurs, entretien...",className:"form-input form-textarea",rows:"4"}),c.jsx("p",{className:"form-hint",children:"Affich dans la vitrine publique"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Prix ($) *"}),c.jsx("input",{type:"number",name:"price",value:o.price,onChange:D,placeholder:"0.00",className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Catgorie"}),c.jsx("input",{type:"text",name:"category",value:o.category,onChange:D,placeholder:"Ex: Sacs, Vtements, Accessoires...",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Date de cration"}),c.jsx("input",{type:"date",name:"itemDate",value:o.itemDate,onChange:D,className:"form-input"})]}),y&&c.jsxs("div",{className:"error-block",children:[c.jsx("p",{className:"error-text",children:y}),j&&y.includes("existe dj")&&c.jsxs("button",{type:"button",className:"btn btn-small btn-suggest",onClick:te,children:["Utiliser ",j]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:x,children:x?"Sauvegarde en cours...":" Ajouter  l'inventaire"}),c.jsx("button",{type:"button",className:"btn btn-secondary btn-full",onClick:()=>r("/app"),children:"Annuler"})]})]})]})}function tt(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function WT(){var K;const{user:r,tenant:e}=ms(),t=(e==null?void 0:e.prefix)||"ART",[i,o]=C.useState(`${t}-`),[l,d]=C.useState(null),[f,m]=C.useState(null),[g,x]=C.useState(((K=r==null?void 0:r.displayName)==null?void 0:K.split(" ")[0])||""),[_,y]=C.useState(new Date().toISOString().split("T")[0]),[I,j]=C.useState(""),[A,D]=C.useState(()=>localStorage.getItem("va_marketName")||""),[J,Q]=C.useState(!1),[q,te]=C.useState(!1),[ge,ve]=C.useState(""),[ae,he]=C.useState(""),[ye,Ee]=C.useState(!1),[je,W]=C.useState(""),[Se,ne]=C.useState(null);C.useEffect(()=>{var Y;const N=(Y=Cn.currentUser)==null?void 0:Y.uid;if(!N)return;const z=ue(de,`tenants/${N}/settings/taxes`);return tn(z,ie=>{ie.exists()?ne(ie.val()):ne({enabled:!1})})},[]);const Ce=(Se==null?void 0:Se.enabled)||!1,we=(Se==null?void 0:Se.tpsRate)||5,fe=(Se==null?void 0:Se.tvqRate)||9.975,ee=(()=>{if(!Ce||ye)return null;const N=parseFloat(I)||0;if(N<=0)return null;const z=Math.round(N*we)/100,H=Math.round(N*fe*100)/1e4,Y=Math.round((N+z+H)*100)/100;return{tpsAmount:z,tvqAmount:H,totalWithTax:Y}})(),G=async N=>{var z;if(N==null||N.preventDefault(),!!i.trim()){Q(!0),ve(""),he(""),d(null),m(null);try{const H=await $y(i);if(!H){ve(`Aucun item trouv avec le numro "${i.toUpperCase()}"`);return}if(H.status==="sold"){ve(`Cet item est dj vendu (${H.saleDate} par ${H.sellerName})`);return}if(d(H),j(((z=H.price)==null?void 0:z.toFixed(2))||""),H.status==="consignment"&&H.consignmentStoreId){const Y=await Uy(H.consignmentStoreId);m(Y)}}catch(H){console.error(H),ve("Erreur de recherche. Ressayez.")}finally{Q(!1)}}},L=(()=>{if(!f||!f.commissionPercent||ye)return null;const N=parseFloat(I)||0,z=Math.round(N*f.commissionPercent)/100,H=Math.round((N-z)*100)/100;return{commissionAmount:z,netRevenue:H,percent:f.commissionPercent}})(),_e=async()=>{if(!(!l||!g.trim())){te(!0),ve("");try{const N=ye?0:parseFloat(I)||l.price;let z=null;if(Ce&&!ye&&N>0){const ie=Math.round(N*we)/100,Me=Math.round(N*fe*100)/1e4;z={tpsRate:we,tvqRate:fe,tpsAmount:ie,tvqAmount:Me,totalWithTax:Math.round((N+ie+Me)*100)/100}}const H=await OT(l.id,g,_,N,A,ye,je,z);let Y;ye?Y=` ${l.uniqueId} donn en cadeau${je?`  ${je}`:""}`:H.commissionAmount>0?(Y=` ${l.uniqueId} vendu pour ${tt(N)} $`,z&&(Y+=`
 TPS: ${tt(z.tpsAmount)} $ + TVQ: ${tt(z.tvqAmount)} $ = Total: ${tt(z.totalWithTax)} $`),Y+=`
 Commission ${l.consignmentStore}: -${tt(H.commissionAmount)} $`,Y+=`
 Revenu net: ${tt(H.netRevenue)} $`):(Y=` ${l.uniqueId} vendu pour ${tt(N)} $`,z&&(Y+=`
 TPS: ${tt(z.tpsAmount)} $ + TVQ: ${tt(z.tvqAmount)} $
 Total avec taxes: ${tt(z.totalWithTax)} $`),A&&(Y+=`${z?"":`
`}${z?"  ":" au "}${A}`)),he(Y),d(null),m(null),o(`${t}-`),j(""),Ee(!1),W("")}catch(N){console.error(N),ve("Erreur lors de la vente. Ressayez.")}finally{te(!1)}}},P=()=>{o(`${t}-`),d(null),m(null),j(""),ve(""),he(""),Ee(!1),W("")};return c.jsxs("div",{className:"page sale-page",children:[c.jsx("h2",{className:"page-title",children:" Vente rapide"}),c.jsx("form",{onSubmit:G,className:"sale-search-form",children:c.jsxs("div",{className:"sale-search-row",children:[c.jsx("input",{type:"text",value:i,onChange:N=>o(N.target.value.toUpperCase()),placeholder:`Ex: ${t}-001`,className:"form-input sale-search-input",autoComplete:"off",autoFocus:!0}),c.jsx("button",{type:"submit",className:"btn btn-primary sale-search-btn",disabled:J||!i.trim(),children:J?"...":""})]})}),ae&&c.jsxs("div",{className:"sale-success",children:[c.jsx("p",{style:{whiteSpace:"pre-line"},children:ae}),c.jsx("button",{className:"btn btn-primary btn-full",onClick:P,children:"Prochaine vente"})]}),ge&&c.jsxs("div",{className:"sale-error",children:[c.jsx("p",{children:ge}),c.jsx("button",{className:"btn btn-secondary",onClick:P,children:"Ressayer"})]}),l&&c.jsxs("div",{className:"sale-confirmation",children:[c.jsxs("div",{className:"sale-item-card",children:[l.photoBase64?c.jsx("img",{src:l.photoBase64,alt:l.description,className:"sale-item-photo"}):c.jsx("div",{className:"sale-photo-placeholder",children:""}),c.jsxs("div",{className:"sale-item-details",children:[c.jsxs("span",{className:"sale-item-id",children:["#",l.uniqueId]}),c.jsx("p",{className:"sale-item-desc",children:l.description}),c.jsxs("p",{className:"sale-item-price",children:[tt(l.price)," $"]}),l.status==="consignment"&&c.jsxs("p",{className:"sale-item-consign",children:[" En consigne: ",l.consignmentStore,f&&f.commissionPercent>0&&c.jsxs("span",{className:"sale-commission-badge",children:[f.commissionPercent,"% commission"]})]})]})]}),c.jsxs("div",{className:"sale-form",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"gift-toggle",children:[c.jsx("input",{type:"checkbox",checked:ye,onChange:N=>{var z;Ee(N.target.checked),N.target.checked?j("0"):j(((z=l.price)==null?void 0:z.toFixed(2))||"")}}),c.jsx("span",{children:" Donn en cadeau"})]})}),ye&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Note"}),c.jsx("input",{type:"text",value:je,onChange:N=>W(N.target.value),className:"form-input",placeholder:"Ex: Cadeau pour maman, change, etc."})]}),!ye&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Prix de vente ($)"}),c.jsxs("div",{className:"sale-price-row",children:[c.jsx("input",{type:"number",value:I,onChange:N=>j(N.target.value),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"}),parseFloat(I)<l.price&&c.jsxs("span",{className:"sale-discount",children:["Rabais de ",tt(l.price-parseFloat(I))," $"]})]})]}),ee&&c.jsxs("div",{className:"sale-tax-preview",children:[c.jsxs("div",{className:"tax-calc-row",children:[c.jsx("span",{children:"Prix"}),c.jsxs("span",{children:[tt(parseFloat(I))," $"]})]}),c.jsxs("div",{className:"tax-calc-row",children:[c.jsxs("span",{children:["TPS (",we,"%)"]}),c.jsxs("span",{children:[tt(ee.tpsAmount)," $"]})]}),c.jsxs("div",{className:"tax-calc-row",children:[c.jsxs("span",{children:["TVQ (",fe,"%)"]}),c.jsxs("span",{children:[tt(ee.tvqAmount)," $"]})]}),c.jsxs("div",{className:"tax-calc-row tax-calc-total",children:[c.jsx("span",{children:" Total  encaisser"}),c.jsxs("span",{children:[tt(ee.totalWithTax)," $"]})]})]}),L&&c.jsxs("div",{className:"sale-commission-preview",children:[c.jsxs("div",{className:"commission-row",children:[c.jsx("span",{children:"Prix de vente"}),c.jsxs("span",{children:[tt(parseFloat(I))," $"]})]}),c.jsxs("div",{className:"commission-row commission-negative",children:[c.jsxs("span",{children:["Commission ",l.consignmentStore," (",L.percent,"%)"]}),c.jsxs("span",{children:["-",tt(L.commissionAmount)," $"]})]}),c.jsxs("div",{className:"commission-row commission-total",children:[c.jsx("span",{children:"Revenu net pour vous"}),c.jsxs("span",{children:[tt(L.netRevenue)," $"]})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Vendeur/vendeuse"}),c.jsx("input",{type:"text",value:g,onChange:N=>x(N.target.value),className:"form-input",placeholder:"Nom"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"March / Point de vente"}),c.jsx("input",{type:"text",value:A,onChange:N=>{D(N.target.value),localStorage.setItem("va_marketName",N.target.value)},className:"form-input",placeholder:"Ex: March Jean-Talon, Facebook, etc."})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Date de vente"}),c.jsx("input",{type:"date",value:_,onChange:N=>y(N.target.value),className:"form-input"})]}),c.jsxs("div",{className:"sale-actions",children:[c.jsx("button",{className:"btn btn-sell btn-full",onClick:_e,disabled:q||!g.trim(),children:q?"En cours...":ye?" Confirmer le cadeau":ee?`Confirmer  Total: ${tt(ee.totalWithTax)} $`:L?`Confirmer  Net: ${tt(L.netRevenue)} $`:`Confirmer la vente  ${tt(parseFloat(I||0))} $`}),c.jsx("button",{className:"btn btn-secondary btn-full",onClick:P,children:"Annuler"})]})]})]}),!l&&!ge&&!ae&&c.jsxs("div",{className:"sale-hint",children:[c.jsx("p",{className:"hint-icon",children:""}),c.jsxs("p",{children:["Entre le numro de l'tiquette",c.jsx("br",{}),"pour enregistrer une vente"]})]})]})}const ao="stockduloft/settings";function Ht(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}const HT={free:{name:"Dcouverte",badge:"",articlesLimit:25,vitrineLimit:10,price:null},artisan:{name:"Artisan",badge:"",articlesLimit:1/0,vitrineLimit:1/0,price:{monthly:12.99,yearly:100}}};function qT(){const{tenant:r}=ms(),[e,t]=C.useState(7),[i,o]=C.useState([]),[l,d]=C.useState([]),[f,m]=C.useState(!1),[g,x]=C.useState(null),[_,y]=C.useState({name:"",commissionPercent:"",locationFee:""}),[I,j]=C.useState(null),[A,D]=C.useState(()=>{const O=new Date;return`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}`}),[J,Q]=C.useState(!1),[q,te]=C.useState("5"),[ge,ve]=C.useState("9.975"),[ae,he]=C.useState(""),[ye,Ee]=C.useState(""),[je,W]=C.useState(!1),[Se,ne]=C.useState(!1),[Ce,we]=C.useState(null),[fe,U]=C.useState(!1),ee=async()=>{try{await navigator.clipboard.writeText("lacroix.jeanmarc@gmail.com"),U(!0),setTimeout(()=>U(!1),2500)}catch{const X=document.createElement("input");X.value="lacroix.jeanmarc@gmail.com",document.body.appendChild(X),X.select(),document.execCommand("copy"),document.body.removeChild(X),U(!0),setTimeout(()=>U(!1),2500)}},[G,k]=C.useState("dark-copper"),[L,_e]=C.useState(!1),P=r==null?void 0:r.slug,K=P?`${window.location.origin}/vitrine/${P}`:null,N=P?`vitrineartisan.ca/vitrine/${P}`:null,z=async()=>{if(K)try{await navigator.clipboard.writeText(K),_e(!0),setTimeout(()=>_e(!1),2500)}catch{const X=document.createElement("input");X.value=K,document.body.appendChild(X),X.select(),document.execCommand("copy"),document.body.removeChild(X),_e(!0),setTimeout(()=>_e(!1),2500)}},H=()=>{K&&window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(K)}`,"_blank","width=600,height=400")},Y=async()=>{if(!(!K||!navigator.share))try{await navigator.share({title:(r==null?void 0:r.businessName)||"Ma vitrine",text:"Dcouvrez mes crations artisanales!",url:K})}catch{}};C.useEffect(()=>{const O=ue(de,ao);return tn(O,qe=>{if(qe.exists()){const Ge=qe.val();Ge.vitrineSoldDays!==void 0&&t(Ge.vitrineSoldDays),Ge.subscription?j(Ge.subscription):j({plan:"free",planType:null,startDate:null,expiryDate:null}),Ge.theme&&k(Ge.theme),Ge.taxes&&(Q(Ge.taxes.enabled||!1),Ge.taxes.tpsRate!==void 0&&te(Ge.taxes.tpsRate.toString()),Ge.taxes.tvqRate!==void 0&&ve(Ge.taxes.tvqRate.toString()),Ge.taxes.tpsNumber!==void 0&&he(Ge.taxes.tpsNumber),Ge.taxes.tvqNumber!==void 0&&Ee(Ge.taxes.tvqNumber))}})},[]),C.useEffect(()=>Fy(o),[]),C.useEffect(()=>zy(d),[]);const ie=async O=>{const X=parseInt(O);t(X),await Qe(ue(de,ao),{vitrineSoldDays:X})},Me=async O=>{k(O),Oy(O),await Qe(ue(de,ao),{theme:O})},Gt=async O=>{Q(O),await Qe(ue(de,`${ao}/taxes`),{enabled:O,tpsRate:parseFloat(q)||5,tvqRate:parseFloat(ge)||9.975,tpsNumber:ae,tvqNumber:ye})},kn=async()=>{await Qe(ue(de,`${ao}/taxes`),{enabled:J,tpsRate:parseFloat(q)||5,tvqRate:parseFloat(ge)||9.975,tpsNumber:ae.trim(),tvqNumber:ye.trim()})},Fr=50,fi=Math.round(Fr*(parseFloat(q)||0))/100,pi=Math.round(Fr*(parseFloat(ge)||0)*100)/1e4,mi=Fr+fi+pi,Tn=HT[(I==null?void 0:I.plan)||"free"],gs=l.filter(O=>O.status!=="sold").length,bn=Tn.articlesLimit===1/0?0:Math.min(100,Math.round(gs/Tn.articlesLimit*100)),Et=((I==null?void 0:I.plan)||"free")==="free",gi=O=>O?new Date(O).toLocaleDateString("fr-CA",{year:"numeric",month:"long",day:"numeric"}):"",Ur=()=>{if(!(I!=null&&I.expiryDate))return null;const O=new Date,X=new Date(I.expiryDate);return Math.ceil((X-O)/(1e3*60*60*24))},Go=async()=>{_.name.trim()&&(await bT(_),y({name:"",commissionPercent:"",locationFee:""}),m(!1))},Ko=O=>{var X,qe;x(O.id),y({name:O.name,commissionPercent:((X=O.commissionPercent)==null?void 0:X.toString())||"",locationFee:((qe=O.locationFee)==null?void 0:qe.toString())||""})},Qo=async O=>{await PT(O,{name:_.name.trim(),commissionPercent:parseFloat(_.commissionPercent)||0,locationFee:parseFloat(_.locationFee)||0}),x(null),y({name:"",commissionPercent:"",locationFee:""})},vi=async O=>{const X=l.filter(qe=>qe.status==="consignment"&&qe.consignmentStoreId===O.id);if(X.length>0){alert(`Impossible de supprimer : ${X.length} article(s) en consigne chez ${O.name}`);return}confirm(`Supprimer le magasin "${O.name}" ?`)&&await jT(O.id)},Ye=(()=>{const[O,X]=A.split("-").map(Number),qe=`${O}-${String(X).padStart(2,"0")}-01`,Ge=X===12?`${O+1}-01-01`:`${O}-${String(X+1).padStart(2,"0")}-01`,jt=l.filter(be=>be.status==="sold"&&be.saleDate&&be.saleDate>=qe&&be.saleDate<Ge),Re=jt.filter(be=>!be.isGift),$t=jt.filter(be=>be.isGift),_n=Re.reduce((be,Le)=>be+(Le.salePrice||0),0),yi=Re.reduce((be,Le)=>be+(Le.commissionAmount||0),0),Zo=Re.reduce((be,Le)=>Le.taxEnabled?be+(Le.tpsAmount||0)+(Le.tvqAmount||0):be,0),Zn={};Re.forEach(be=>{const Le=be.consignmentStoreId?` ${be.consignmentStore||"Consigne"}`:be.marketName?` ${be.marketName}`:" Vente directe";Zn[Le]||(Zn[Le]={count:0,revenue:0}),Zn[Le].count++,Zn[Le].revenue+=be.salePrice||0});const er={};Re.forEach(be=>{const Le=be.category||"Sans catgorie";er[Le]||(er[Le]={count:0,revenue:0}),er[Le].count++,er[Le].revenue+=be.salePrice||0});const tr={};return jt.forEach(be=>{const Le=be.sellerName||"Non spcifi";tr[Le]||(tr[Le]={count:0,revenue:0}),tr[Le].count++,tr[Le].revenue+=be.salePrice||0}),{totalSales:Re.length,totalGifts:$t.length,totalRevenue:_n,totalCommissions:yi,totalNet:_n-yi,totalTaxes:Zo,avgPrice:Re.length>0?_n/Re.length:0,byMarket:Object.entries(Zn).sort((be,Le)=>Le[1].revenue-be[1].revenue),byCategory:Object.entries(er).sort((be,Le)=>Le[1].count-be[1].count),bySeller:Object.entries(tr).sort((be,Le)=>Le[1].count-be[1].count)}})(),$r=Ye.totalSales>0||Ye.totalGifts>0,Yo=(()=>{const[O,X]=A.split("-").map(Number),qe=`${O}-${String(X).padStart(2,"0")}-01`,Ge=X===12?`${O+1}-01-01`:`${O}-${String(X+1).padStart(2,"0")}-01`,jt={};return i.forEach(Re=>{jt[Re.id]={storeName:Re.name,commissionPercent:Re.commissionPercent,locationFee:Re.locationFee,totalSales:0,totalCommission:0,totalNet:0,itemsSold:0,itemsInConsignment:0}}),l.forEach(Re=>{if(Re.status==="consignment"&&Re.consignmentStoreId&&jt[Re.consignmentStoreId]&&jt[Re.consignmentStoreId].itemsInConsignment++,Re.status==="sold"&&Re.saleDate&&Re.saleDate>=qe&&Re.saleDate<Ge&&Re.consignmentStoreId&&jt[Re.consignmentStoreId]){const $t=jt[Re.consignmentStoreId];$t.itemsSold++,$t.totalSales+=Re.salePrice||0,$t.totalCommission+=Re.commissionAmount||0,$t.totalNet+=Re.netRevenue||Re.salePrice||0}}),Object.values(jt)})(),Xo=Yo.some(O=>O.itemsSold>0||O.itemsInConsignment>0),Jo=()=>{const[O,X]=A.split("-").map(Number);return new Date(O,X-1).toLocaleDateString("fr-CA",{year:"numeric",month:"long"})};return c.jsxs("div",{className:"page about-page",children:[c.jsx("h2",{className:"page-title",children:" Paramtres"}),P&&c.jsxs("div",{className:"about-card vitrine-link-card",style:{marginBottom:"12px"},children:[c.jsx("h4",{children:" Ma vitrine publique"}),c.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",margin:"6px 0 12px"},children:"Partagez ce lien sur Facebook, Instagram, ou votre site web pour que vos clients voient vos crations."}),c.jsxs("div",{className:"vitrine-link-box",children:[c.jsx("span",{className:"vitrine-link-url",children:N}),c.jsx("button",{className:`btn vitrine-link-copy ${L?"copied":""}`,onClick:z,children:L?" Copi!":" Copier"})]}),c.jsxs("div",{className:"vitrine-link-actions",children:[c.jsx("a",{href:K,target:"_blank",rel:"noopener noreferrer",className:"btn btn-small vitrine-link-preview",children:" Voir ma vitrine"}),c.jsx("button",{className:"btn btn-small vitrine-link-share",onClick:H,children:" Partager sur Facebook"}),navigator.share&&c.jsx("button",{className:"btn btn-small vitrine-link-share",onClick:Y,children:" Partager..."})]})]}),c.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[c.jsx("h4",{children:" Mon abonnement"}),c.jsxs("div",{className:"subscription-section",children:[c.jsx("div",{className:"subscription-plan-row",children:c.jsxs("div",{className:"subscription-plan-info",children:[c.jsxs("span",{className:"subscription-plan-badge",children:[Tn.badge," ",Tn.name]}),!Et&&(I==null?void 0:I.planType)&&c.jsx("span",{className:"subscription-plan-type",children:I.planType==="yearly"?"100.00 $/an":"12.99 $/mois"})]})}),c.jsxs("div",{className:"subscription-articles",children:[c.jsxs("div",{className:"subscription-articles-label",children:[c.jsx("span",{children:" Articles actifs"}),c.jsxs("span",{children:[gs,Et?` / ${Tn.articlesLimit}`:"  Illimit"]})]}),Et&&c.jsx("div",{className:"subscription-progress-bar",children:c.jsx("div",{className:`subscription-progress-fill ${bn>=80?"warning":""} ${bn>=100?"full":""}`,style:{width:`${bn}%`}})})]}),c.jsxs("div",{className:"subscription-detail-row",children:[c.jsx("span",{children:" Vitrine publique"}),c.jsx("span",{children:Et?`${Tn.vitrineLimit} articles max`:"Illimite"})]}),c.jsxs("div",{className:"subscription-detail-row",children:[c.jsx("span",{children:" Suivi consignes"}),c.jsx("span",{children:Et?"":""})]}),c.jsxs("div",{className:"subscription-detail-row",children:[c.jsx("span",{children:" tiquettes QR"}),c.jsx("span",{children:Et?"":""})]}),!Et&&(I==null?void 0:I.expiryDate)&&c.jsxs("div",{className:"subscription-renewal",children:[c.jsx("span",{children:" Renouvellement"}),c.jsxs("span",{className:Ur()<=7?"renewal-soon":"",children:[gi(I.expiryDate),Ur()<=7&&Ur()>0&&c.jsxs("span",{className:"renewal-badge",children:["Dans ",Ur()," jour(s)"]})]})]}),Et?c.jsxs("div",{className:"subscription-upgrade",children:[c.jsx("p",{className:"subscription-upgrade-pitch",children:"Passez au plan Artisan pour des articles illimits, la vitrine complte, le suivi des consignes et plus encore."}),c.jsxs("div",{className:"subscription-upgrade-options",children:[c.jsx("button",{className:"btn btn-upgrade btn-full",onClick:()=>{we("monthly"),ne(!0)},children:" Plan Artisan  12.99 $/mois"}),c.jsxs("button",{className:"btn btn-upgrade-yearly btn-full",onClick:()=>{we("yearly"),ne(!0)},children:[" Plan Annuel  100 $/an",c.jsx("span",{className:"upgrade-savings",children:"conomisez 56 $ !"})]})]})]}):c.jsx("div",{className:"subscription-manage",children:c.jsx("button",{className:"btn btn-small btn-secondary btn-full",children:"Grer mon abonnement"})})]})]}),c.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[c.jsx("h4",{children:" Thme de couleur"}),c.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",margin:"8px 0 12px"},children:"Ce thme s'applique  l'application et  votre vitrine publique."}),c.jsx("div",{className:"theme-grid",children:Object.entries(Dy).map(([O,X])=>c.jsxs("button",{className:`theme-swatch ${G===O?"active":""}`,onClick:()=>Me(O),title:X.name,children:[c.jsx("div",{className:"theme-swatch-color",style:{background:X.preview}}),c.jsxs("span",{className:"theme-swatch-label",children:[X.emoji," ",X.name]}),G===O&&c.jsx("span",{className:"theme-swatch-check",children:""})]},O))})]}),c.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[c.jsx("h4",{children:" Rapport des ventes"}),c.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[c.jsx("label",{className:"form-label",children:"Mois"}),c.jsx("input",{type:"month",value:A,onChange:O=>D(O.target.value),className:"form-input"})]}),$r?c.jsxs("div",{className:"sales-report",children:[c.jsxs("div",{className:"sales-summary-grid",children:[c.jsxs("div",{className:"sales-summary-card sales-summary-highlight",children:[c.jsxs("span",{className:"sales-summary-value",children:[Ht(Ye.totalRevenue)," $"]}),c.jsx("span",{className:"sales-summary-label",children:"Ventes brutes"})]}),c.jsxs("div",{className:"sales-summary-card",children:[c.jsx("span",{className:"sales-summary-value",children:Ye.totalSales}),c.jsx("span",{className:"sales-summary-label",children:"Articles vendus"})]}),c.jsxs("div",{className:"sales-summary-card",children:[c.jsxs("span",{className:"sales-summary-value",children:[Ht(Ye.avgPrice)," $"]}),c.jsx("span",{className:"sales-summary-label",children:"Prix moyen"})]}),Ye.totalGifts>0&&c.jsxs("div",{className:"sales-summary-card",children:[c.jsxs("span",{className:"sales-summary-value",children:[" ",Ye.totalGifts]}),c.jsx("span",{className:"sales-summary-label",children:"Cadeaux"})]})]}),(Ye.totalCommissions>0||Ye.totalTaxes>0)&&c.jsxs("div",{className:"sales-deductions",children:[Ye.totalCommissions>0&&c.jsxs("div",{className:"report-row report-row-negative",children:[c.jsx("span",{children:" Commissions consigne"}),c.jsxs("span",{children:["-",Ht(Ye.totalCommissions)," $"]})]}),Ye.totalTaxes>0&&c.jsxs("div",{className:"report-row",children:[c.jsx("span",{children:" Taxes perues (TPS+TVQ)"}),c.jsxs("span",{children:[Ht(Ye.totalTaxes)," $"]})]}),c.jsxs("div",{className:"report-row report-row-total",children:[c.jsx("span",{children:" Revenu net"}),c.jsxs("span",{children:[Ht(Ye.totalNet)," $"]})]})]}),Ye.byMarket.length>0&&c.jsxs("div",{className:"sales-breakdown",children:[c.jsx("p",{className:"sales-breakdown-title",children:"Par lieu de vente"}),Ye.byMarket.map(([O,X])=>c.jsxs("div",{className:"sales-breakdown-row",children:[c.jsx("span",{className:"sales-breakdown-name",children:O}),c.jsxs("span",{className:"sales-breakdown-stats",children:[X.count," article",X.count>1?"s":"","  ",Ht(X.revenue)," $"]})]},O))]}),Ye.byCategory.length>0&&c.jsxs("div",{className:"sales-breakdown",children:[c.jsx("p",{className:"sales-breakdown-title",children:"Par catgorie"}),Ye.byCategory.map(([O,X])=>c.jsxs("div",{className:"sales-breakdown-row",children:[c.jsx("span",{className:"sales-breakdown-name",children:O}),c.jsxs("span",{className:"sales-breakdown-stats",children:[X.count,"  ",Ht(X.revenue)," $"]})]},O))]}),Ye.bySeller.length>1&&c.jsxs("div",{className:"sales-breakdown",children:[c.jsx("p",{className:"sales-breakdown-title",children:"Par vendeur"}),Ye.bySeller.map(([O,X])=>c.jsxs("div",{className:"sales-breakdown-row",children:[c.jsxs("span",{className:"sales-breakdown-name",children:[" ",O]}),c.jsxs("span",{className:"sales-breakdown-stats",children:[X.count,"  ",Ht(X.revenue)," $"]})]},O))]})]}):c.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginTop:"10px"},children:["Aucune vente pour ",Jo()]})]}),c.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[c.jsx("h4",{children:" Taxes de vente"}),c.jsxs("div",{className:"tax-section",children:[c.jsx("div",{className:"tax-toggle-row",children:c.jsxs("label",{className:"tax-toggle-label",children:[c.jsx("input",{type:"checkbox",checked:J,onChange:O=>Gt(O.target.checked)}),c.jsx("span",{className:"tax-toggle-text",children:"Je perois les taxes de vente"})]})}),J&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"store-form-row",style:{marginTop:"12px"},children:[c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label",children:"TPS (%)"}),c.jsx("input",{type:"number",value:q,onChange:O=>te(O.target.value),onBlur:kn,className:"form-input",step:"0.001",min:"0",max:"20",inputMode:"decimal"})]}),c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label",children:"TVQ (%)"}),c.jsx("input",{type:"number",value:ge,onChange:O=>ve(O.target.value),onBlur:kn,className:"form-input",step:"0.001",min:"0",max:"20",inputMode:"decimal"})]})]}),c.jsxs("div",{className:"form-group",style:{marginTop:"8px"},children:[c.jsx("label",{className:"form-label",children:"Numro TPS (optionnel)"}),c.jsx("input",{type:"text",value:ae,onChange:O=>he(O.target.value),onBlur:kn,className:"form-input",placeholder:"Ex: 123456789RT0001"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Numro TVQ (optionnel)"}),c.jsx("input",{type:"text",value:ye,onChange:O=>Ee(O.target.value),onBlur:kn,className:"form-input",placeholder:"Ex: 1234567890TQ0001"})]}),c.jsxs("div",{className:"tax-preview",children:[c.jsx("p",{className:"tax-preview-title",children:"Aperu sur un article  50.00 $ :"}),c.jsxs("div",{className:"tax-preview-row",children:[c.jsx("span",{children:"Prix"}),c.jsx("span",{children:"50.00 $"})]}),c.jsxs("div",{className:"tax-preview-row",children:[c.jsxs("span",{children:["TPS (",q,"%)"]}),c.jsxs("span",{children:[fi.toFixed(2)," $"]})]}),c.jsxs("div",{className:"tax-preview-row",children:[c.jsxs("span",{children:["TVQ (",ge,"%)"]}),c.jsxs("span",{children:[pi.toFixed(2)," $"]})]}),c.jsxs("div",{className:"tax-preview-row tax-preview-total",children:[c.jsx("span",{children:"Total"}),c.jsxs("span",{children:[mi.toFixed(2)," $"]})]})]})]}),c.jsx("button",{className:"btn btn-small btn-secondary btn-full",style:{marginTop:"12px"},onClick:()=>W(!je),children:je?" Masquer":" Ce que vous devez savoir sur les taxes"}),je&&c.jsxs("div",{className:"tax-info-section",children:[c.jsx("h5",{children:" Taxes de vente  Ce que vous devez savoir"}),c.jsxs("div",{className:"tax-info-block",children:[c.jsx("p",{className:"tax-info-subtitle",children:"Suis-je oblig de percevoir les taxes ?"}),c.jsxs("p",{children:["Au Canada, si vos ventes totales sont infrieures  30 000 $ sur quatre trimestres civils conscutifs, vous tes considr  petit fournisseur  et vous n'tes pas ",c.jsx("strong",{children:"oblig"})," de vous inscrire aux taxes (TPS/TVH au fdral et TVQ au Qubec)."]})]}),c.jsxs("div",{className:"tax-info-block",children:[c.jsx("p",{className:"tax-info-subtitle",children:"Avantages de s'inscrire volontairement"}),c.jsx("p",{children:"Mme sous le seuil de 30 000 $, l'inscription volontaire peut tre avantageuse. Vous pouvez rclamer des crdits de taxe sur les intrants (CTI) pour rcuprer la TPS et la TVQ payes sur vos achats de matriaux, fournitures, outils et quipement."})]}),c.jsxs("div",{className:"tax-info-block",children:[c.jsx("p",{className:"tax-info-subtitle",children:"Inconvnients"}),c.jsx("p",{children:"Si vous vous inscrivez, vous devez percevoir les taxes sur toutes vos ventes, produire des dclarations rgulirement, et remettre les montants perus. Vos prix peuvent aussi paratre plus levs face  des artisans non inscrits."})]}),c.jsxs("div",{className:"tax-info-block",children:[c.jsx("p",{className:"tax-info-subtitle",children:"Si vous dpassez 30 000 $"}),c.jsx("p",{children:"Ds que vos ventes dpassent 30 000 $, vous devez vous inscrire dans les 29 jours suivants et commencer  percevoir les taxes."})]}),c.jsxs("div",{className:"tax-info-block",children:[c.jsx("p",{className:"tax-info-subtitle",children:"Taux au Qubec"}),c.jsx("p",{children:"TPS (fdral) : 5 %  TVQ (Qubec) : 9,975 %. Le taux combin effectif est d'environ 14,975 %."})]}),c.jsxs("div",{className:"tax-info-block",children:[c.jsx("p",{className:"tax-info-subtitle",children:"Ressources officielles"}),c.jsxs("p",{children:[" ",c.jsx("a",{href:"https://www.canada.ca/fr/agence-revenu/services/impot/entreprises/sujets/tps-tvh-entreprises/compte-tps-tvh/inscrire-compte.html",target:"_blank",rel:"noopener noreferrer",children:"Agence du revenu du Canada  Inscription TPS/TVH"}),c.jsx("br",{})," ",c.jsx("a",{href:"https://www.revenuquebec.ca/fr/entreprises/taxes/tpstvh-et-tvq/inscription-aux-fichiers-de-la-tps-et-de-la-tvq/",target:"_blank",rel:"noopener noreferrer",children:"Revenu Qubec  Inscription TPS et TVQ"})]})]}),c.jsx("div",{className:"tax-info-disclaimer",children:c.jsxs("p",{children:[" ",c.jsx("strong",{children:"Avis important :"})," Cette information est fournie  titre indicatif seulement. Consultez un comptable ou un professionnel qualifi."]})})]})]})]}),c.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[c.jsx("h4",{children:" Magasins de consigne"}),i.length===0?c.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",margin:"12px 0"},children:"Aucun magasin configur"}):c.jsx("div",{className:"stores-list",children:i.map(O=>c.jsx("div",{className:"store-card",children:g===O.id?c.jsxs("div",{className:"store-edit-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nom"}),c.jsx("input",{type:"text",value:_.name,onChange:X=>y(qe=>({...qe,name:X.target.value})),className:"form-input"})]}),c.jsxs("div",{className:"store-form-row",children:[c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label",children:"Commission (%)"}),c.jsx("input",{type:"number",value:_.commissionPercent,onChange:X=>y(qe=>({...qe,commissionPercent:X.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"0"})]}),c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),c.jsx("input",{type:"number",value:_.locationFee,onChange:X=>y(qe=>({...qe,locationFee:X.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"0"})]})]}),c.jsxs("div",{className:"store-edit-actions",children:[c.jsx("button",{className:"btn btn-small btn-save",onClick:()=>Qo(O.id),children:" Sauvegarder"}),c.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>x(null),children:"Annuler"})]})]}):c.jsxs("div",{className:"store-info",children:[c.jsxs("div",{className:"store-header",children:[c.jsx("span",{className:"store-name",children:O.name}),c.jsxs("div",{className:"store-actions-btns",children:[c.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>Ko(O),children:""}),c.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>vi(O),children:""})]})]}),c.jsxs("div",{className:"store-details",children:[O.commissionPercent>0&&c.jsxs("span",{className:"store-tag store-tag-commission",children:[O.commissionPercent,"% commission"]}),O.locationFee>0&&c.jsxs("span",{className:"store-tag store-tag-location",children:[Ht(O.locationFee)," $/mois loyer"]}),!O.commissionPercent&&!O.locationFee&&c.jsx("span",{className:"store-tag",children:"Aucun frais configur"})]}),l.filter(X=>X.status==="consignment"&&X.consignmentStoreId===O.id).length>0&&c.jsxs("p",{className:"store-consigned-count",children:[" ",l.filter(X=>X.status==="consignment"&&X.consignmentStoreId===O.id).length," article(s) en consigne"]})]})},O.id))}),f?c.jsxs("div",{className:"store-add-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nom du magasin"}),c.jsx("input",{type:"text",value:_.name,onChange:O=>y(X=>({...X,name:O.target.value})),className:"form-input",placeholder:"Ex: SF Studios",autoFocus:!0})]}),c.jsxs("div",{className:"store-form-row",children:[c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label",children:"Commission (%)"}),c.jsx("input",{type:"number",value:_.commissionPercent,onChange:O=>y(X=>({...X,commissionPercent:O.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"Ex: 30"})]}),c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),c.jsx("input",{type:"number",value:_.locationFee,onChange:O=>y(X=>({...X,locationFee:O.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"Ex: 50"})]})]}),c.jsxs("div",{className:"store-edit-actions",children:[c.jsx("button",{className:"btn btn-small btn-save",onClick:Go,disabled:!_.name.trim(),children:" Ajouter"}),c.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>{m(!1),y({name:"",commissionPercent:"",locationFee:""})},children:"Annuler"})]})]}):c.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{m(!0),y({name:"",commissionPercent:"",locationFee:""})},style:{marginTop:"10px"},children:" Ajouter un magasin"})]}),c.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[c.jsx("h4",{children:" Rapport consignes"}),c.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[c.jsx("label",{className:"form-label",children:"Mois"}),c.jsx("input",{type:"month",value:A,onChange:O=>D(O.target.value),className:"form-input"})]}),Xo?c.jsx("div",{className:"report-list",children:Yo.filter(O=>O.itemsSold>0||O.itemsInConsignment>0).map((O,X)=>c.jsxs("div",{className:"report-store-card",children:[c.jsx("div",{className:"report-store-name",children:O.storeName}),O.itemsInConsignment>0&&c.jsxs("div",{className:"report-row",children:[c.jsx("span",{children:" En consigne actuellement"}),c.jsxs("span",{children:[O.itemsInConsignment," article(s)"]})]}),O.itemsSold>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"report-row",children:[c.jsx("span",{children:" Articles vendus"}),c.jsx("span",{children:O.itemsSold})]}),c.jsxs("div",{className:"report-row",children:[c.jsx("span",{children:" Total ventes"}),c.jsxs("span",{children:[Ht(O.totalSales)," $"]})]}),O.commissionPercent>0&&c.jsxs("div",{className:"report-row report-row-negative",children:[c.jsxs("span",{children:[" Commission (",O.commissionPercent,"%)"]}),c.jsxs("span",{children:["-",Ht(O.totalCommission)," $"]})]}),O.locationFee>0&&c.jsxs("div",{className:"report-row report-row-negative",children:[c.jsx("span",{children:" Loyer mensuel"}),c.jsxs("span",{children:["-",Ht(O.locationFee)," $"]})]}),c.jsxs("div",{className:"report-row report-row-total",children:[c.jsx("span",{children:" Revenu net"}),c.jsxs("span",{children:[Ht(O.totalNet-(O.locationFee||0))," $"]})]})]})]},X))}):c.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginTop:"10px"},children:"Aucune activit de consigne pour ce mois"})]}),c.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[c.jsx("h4",{children:" Paramtres Vitrine"}),c.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[c.jsx("label",{className:"form-label",children:"Afficher les articles vendus pendant :"}),c.jsxs("select",{value:e,onChange:O=>ie(O.target.value),className:"form-input",children:[c.jsx("option",{value:0,children:"Ne pas afficher"}),c.jsx("option",{value:3,children:"3 jours"}),c.jsx("option",{value:7,children:"7 jours (1 semaine)"}),c.jsx("option",{value:14,children:"14 jours (2 semaines)"}),c.jsx("option",{value:30,children:"30 jours (1 mois)"})]}),c.jsx("p",{className:"about-setting-hint",children:"Les articles vendus apparatront avec un bandeau  VENDU  dans la vitrine publique."})]})]}),c.jsxs("div",{className:"about-card",children:[c.jsx("div",{className:"about-logo",children:c.jsx("img",{src:"/pwa-192x192.png",alt:"Vitrine Artisan"})}),c.jsx("h3",{children:" Vitrine Artisan"}),c.jsx("p",{className:"about-version",children:"Version 2.0"}),c.jsx("p",{className:"about-description",children:"Application de gestion d'inventaire conue pour les artisans et crateurs. Grez vos articles, suivez vos consignes et enregistrez vos ventes en toute simplicit."}),c.jsxs("div",{className:"about-author",children:[c.jsxs("p",{children:["Cr par ",c.jsx("strong",{children:"Jean-Marc Lacroix"})]}),c.jsx("p",{children:" 2026  Tous droits rservs"}),c.jsx("p",{style:{marginTop:"12px"},children:" Commentaires et suggestions bienvenus"}),c.jsx("a",{href:"mailto:lacroix.jeanmarc@gmail.com",className:"about-email",children:" lacroix.jeanmarc@gmail.com"})]})]}),Se&&c.jsx("div",{className:"modal-overlay",onClick:()=>ne(!1),children:c.jsxs("div",{className:"modal-content upgrade-modal",onClick:O=>O.stopPropagation(),children:[c.jsx("h3",{children:" Passer au Plan Artisan"}),c.jsx("div",{className:"upgrade-modal-plan-selected",children:Ce==="monthly"?" Plan mensuel  12,99 $ / mois":" Plan annuel  100,00 $ / an (conomisez 56 $!)"}),c.jsxs("div",{className:"upgrade-modal-steps",children:[c.jsx("p",{className:"upgrade-modal-steps-title",children:"Pour activer votre abonnement :"}),c.jsxs("div",{className:"upgrade-modal-step",children:[c.jsx("span",{className:"upgrade-modal-step-number",children:"1"}),c.jsxs("span",{children:["Envoyez un virement Interac de ",c.jsx("strong",{children:Ce==="monthly"?"12,99 $":"100,00 $"}),"  :"]})]}),c.jsxs("div",{className:"upgrade-modal-email-box",onClick:ee,style:{cursor:"pointer"},children:[c.jsx("span",{className:"upgrade-modal-email-icon",children:""}),c.jsx("span",{className:"upgrade-modal-email-address",children:"lacroix.jeanmarc@gmail.com"})]}),c.jsxs("div",{className:"upgrade-modal-step",children:[c.jsx("span",{className:"upgrade-modal-step-number",children:"2"}),c.jsxs("span",{children:["Dans le message du virement, indiquez le ",c.jsx("strong",{children:"nom de votre entreprise"})]})]}),c.jsxs("div",{className:"upgrade-modal-step",children:[c.jsx("span",{className:"upgrade-modal-step-number",children:"3"}),c.jsxs("span",{children:["Votre plan sera activ dans les ",c.jsx("strong",{children:"24 heures"})," suivant la rception du paiement"]})]})]}),c.jsx("div",{className:"upgrade-modal-note",children:" Une confirmation par courriel vous sera envoye ds l'activation."}),c.jsx("button",{className:"btn btn-secondary btn-full",onClick:()=>ne(!1),style:{marginTop:"16px"},children:"Fermer"})]})})]})}const GT=4;function iv(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function KT(r,e){if(r.status!=="sold"||!r.saleDate)return!1;const t=new Date(r.saleDate);return(new Date-t)/(1e3*60*60*24)<=e}function QT(r){const e=[];if(!r)return e;r.photoBase64&&e.push(r.photoBase64);for(let t=1;t<=GT;t++)r[`photo_${t}`]&&e.push(r[`photo_${t}`]);return e}function YT(){const{slug:r}=Nw(),[e,t]=C.useState(null),[i,o]=C.useState(null),[l,d]=C.useState([]),[f,m]=C.useState(!0),[g,x]=C.useState(!1),[_,y]=C.useState("all"),[I,j]=C.useState(null),[A,D]=C.useState({}),[J,Q]=C.useState({}),[q,te]=C.useState(7);C.useEffect(()=>{if(!r){x(!0),m(!1);return}async function W(){try{const Se=await xT(r);Se?t(Se):(x(!0),m(!1))}catch(Se){console.error("Erreur rsolution slug:",Se),x(!0),m(!1)}}W()},[r]),C.useEffect(()=>{if(!e)return;const W=ue(de,`tenants/${e}/profile`),Se=tn(W,U=>{U.exists()&&o(U.val())}),ne=ue(de,`tenants/${e}/settings`),Ce=tn(ne,U=>{if(U.exists()){const ee=U.val();ee.vitrineSoldDays!==void 0&&te(ee.vitrineSoldDays)}}),we=ue(de,`tenants/${e}/profile/theme`),fe=tn(we,U=>{U.exists()&&ho(U.val())});return()=>{Se(),Ce(),fe()}},[e]),C.useEffect(()=>{if(!e)return;const W=ue(de,`tenants/${e}/items`);return tn(W,ne=>{const Ce=[];ne.exists()&&ne.forEach(we=>{const fe={id:we.key,...we.val()};(fe.status==="inventory"||fe.status==="consignment"||KT(fe,q))&&Ce.push(fe)}),Ce.sort((we,fe)=>(fe.createdAt||0)-(we.createdAt||0)),d(Ce),m(!1),Ce.forEach(async we=>{if(we.hasPhoto&&!we.photoBase64)try{const fe=ue(de,`tenants/${e}/photos/${we.id}`),U=await Ut(fe);if(U.exists()){const ee=QT(U.val());D(G=>({...G,[we.id]:ee}))}}catch(fe){console.error("Erreur photo:",fe)}})})},[e,q]);const ge=[...new Set(l.map(W=>W.category).filter(Boolean))].sort(),ve=_==="all"?l:l.filter(W=>W.category===_),ae=W=>{I===W?j(null):(j(W),Q(Se=>({...Se,[W]:0})))},he=W=>A[W.id]&&A[W.id].length>0?A[W.id]:W.photoBase64?[W.photoBase64]:[];if(g)return c.jsx("div",{className:"vitrine",children:c.jsxs("div",{className:"vitrine-empty",children:[c.jsx("p",{children:""}),c.jsx("p",{children:"Vitrine introuvable"}),c.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginTop:"8px"},children:["L'adresse ",c.jsxs("strong",{children:["/vitrine/",r]})," n'existe pas."]}),c.jsx("a",{href:"/",style:{marginTop:"16px",display:"inline-block",color:"var(--accent)"},children:" Retour  l'accueil"})]})});if(f)return c.jsx("div",{className:"vitrine",children:c.jsxs("div",{className:"vitrine-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Chargement du catalogue..."})]})});const ye=(i==null?void 0:i.businessName)||"Boutique",Ee=(i==null?void 0:i.ownerName)||"",je=(i==null?void 0:i.email)||"";return c.jsxs("div",{className:"vitrine",children:[c.jsxs("header",{className:"vitrine-header",children:[c.jsx("img",{src:"/pwa-192x192.png",alt:"Logo",className:"vitrine-logo"}),c.jsxs("div",{children:[c.jsx("h1",{className:"vitrine-title",children:ye}),Ee&&c.jsx("p",{className:"vitrine-subtitle-name",children:Ee}),c.jsxs("p",{className:"vitrine-subtitle",children:[ve.length," article",ve.length>1?"s":""," disponible",ve.length>1?"s":""]})]})]}),ge.length>0&&c.jsxs("div",{className:"vitrine-filters",children:[c.jsx("button",{className:`vitrine-filter-btn ${_==="all"?"active":""}`,onClick:()=>y("all"),children:"Tous"}),ge.map(W=>c.jsx("button",{className:`vitrine-filter-btn ${_===W?"active":""}`,onClick:()=>y(W),children:W},W))]}),ve.length===0?c.jsxs("div",{className:"vitrine-empty",children:[c.jsx("p",{children:""}),c.jsx("p",{children:"Aucun article disponible pour le moment"})]}):c.jsx("div",{className:"vitrine-grid",children:ve.map(W=>{const Se=I===W.id,ne=he(W),Ce=J[W.id]||0;return c.jsxs("div",{className:`vitrine-card ${Se?"expanded":""}`,onClick:()=>ae(W.id),children:[!Se&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"vitrine-card-photo",children:[ne.length>0?c.jsx("img",{src:ne[0],alt:W.description}):W.thumbnail?c.jsx("img",{src:W.thumbnail,alt:W.description,className:"vitrine-thumb-blur"}):c.jsx("div",{className:"vitrine-card-no-photo",children:""}),W.status==="sold"&&c.jsx("div",{className:"vitrine-sold-overlay",children:c.jsx("span",{children:"VENDU"})}),ne.length>1&&c.jsxs("span",{className:"vitrine-photo-count",children:[" ",ne.length]})]}),c.jsxs("div",{className:"vitrine-card-info",children:[c.jsx("p",{className:"vitrine-card-desc",children:W.description||"Sans description"}),c.jsxs("p",{className:"vitrine-card-price",children:[iv(W.price)," $"]}),W.category&&c.jsx("span",{className:"vitrine-card-category",children:W.category})]})]}),Se&&c.jsxs("div",{className:"vitrine-detail",onClick:we=>we.stopPropagation(),children:[c.jsx("button",{className:"vitrine-detail-close",onClick:()=>j(null),children:" Fermer"}),ne.length>0&&c.jsxs("div",{className:"vitrine-gallery",children:[c.jsxs("div",{className:"vitrine-gallery-main",children:[c.jsx("img",{src:ne[Ce],alt:W.description}),W.status==="sold"&&c.jsx("div",{className:"vitrine-sold-overlay",children:c.jsx("span",{children:"VENDU"})})]}),ne.length>1&&c.jsx("div",{className:"vitrine-gallery-thumbs",children:ne.map((we,fe)=>c.jsx("div",{className:`vitrine-gallery-thumb ${Ce===fe?"active":""}`,onClick:U=>{U.stopPropagation(),Q(ee=>({...ee,[W.id]:fe}))},children:c.jsx("img",{src:we,alt:`Photo ${fe+1}`})},fe))})]}),c.jsxs("div",{className:"vitrine-detail-info",children:[c.jsx("h3",{className:"vitrine-detail-title",children:W.description||"Sans titre"}),c.jsxs("p",{className:"vitrine-detail-price",children:[iv(W.price)," $"]}),c.jsxs("p",{className:"vitrine-detail-id",children:["#",W.uniqueId]}),W.category&&c.jsx("span",{className:"vitrine-card-category",children:W.category}),W.longDescription&&c.jsx("div",{className:"vitrine-detail-description",children:c.jsx("p",{children:W.longDescription})}),W.status==="consignment"&&W.consignmentStore&&c.jsxs("p",{className:"vitrine-detail-consignment",children:[" Disponible chez: ",W.consignmentStore]}),W.itemDate&&c.jsxs("p",{className:"vitrine-detail-date",children:[" Cr le ",W.itemDate]})]})]})]},W.id)})}),c.jsxs("footer",{className:"vitrine-footer",children:[c.jsxs("p",{children:[ye,Ee?`  ${Ee}`:""]}),c.jsx("p",{className:"vitrine-footer-cta",children:"crivez-moi si quelque chose vous intresse!"}),je&&c.jsxs("a",{href:`mailto:${je}`,children:[" ",je]}),c.jsx("p",{className:"vitrine-footer-powered",children:c.jsx("a",{href:"/",style:{color:"var(--text-muted)",textDecoration:"none",fontSize:"0.8rem"},children:"Propuls par Vitrine Artisan"})})]})]})}const By="payments",XT="lacroix.jeanmarc@gmail.com";function _l(r){var e;return((e=r==null?void 0:r.email)==null?void 0:e.toLowerCase())===XT}async function JT(r,e){var l,d;const t={tenantId:r,amount:parseFloat(e.amount)||0,senderName:((l=e.senderName)==null?void 0:l.trim())||"",referenceNumber:((d=e.referenceNumber)==null?void 0:d.trim())||"",paymentDate:e.paymentDate||new Date().toISOString().split("T")[0],planType:e.planType||"monthly",action:e.action||"activation",recordedAt:Date.now()},i=ue(de,By),o=ac(i);return await Qe(o,t),await Qe(ue(de,`tenants/${r}/lastPayment`),t),{id:o.key,...t}}function ZT(r){const e=ue(de,By);return tn(e,i=>{const o=[];i.exists()&&i.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,d)=>(d.recordedAt||0)-(l.recordedAt||0)),r(o)})}function eb(r){const e=ue(de,"tenants");return tn(e,i=>{const o=[];i.exists()&&i.forEach(l=>{var f;const d=(f=l.val())==null?void 0:f.profile;d&&o.push({id:l.key,...d})}),o.sort((l,d)=>(d.createdAt||0)-(l.createdAt||0)),r(o)})}async function tb(r,e="monthly"){const t=new Date,i=t.toISOString().split("T")[0];let o;if(e==="yearly"){const d=new Date(t);d.setFullYear(d.getFullYear()+1),o=d.toISOString().split("T")[0]}else{const d=new Date(t);d.setMonth(d.getMonth()+1),o=d.toISOString().split("T")[0]}const l={plan:"artisan",planType:e,startDate:i,expiryDate:o};await Qe(ue(de,`tenants/${r}/profile`),l)}async function nb(r,e=null){const t=ue(de,`tenants/${r}/profile`),i=await Ut(t);if(!i.exists())return;const o=i.val(),l=e||o.planType||"monthly",d=o.expiryDate?new Date(o.expiryDate):new Date,f=new Date,m=d>f?d:f;let g;if(l==="yearly"){const x=new Date(m);x.setFullYear(x.getFullYear()+1),g=x.toISOString().split("T")[0]}else{const x=new Date(m);x.setMonth(x.getMonth()+1),g=x.toISOString().split("T")[0]}await Qe(t,{plan:"artisan",planType:l,expiryDate:g})}async function rb(r){await Qe(ue(de,`tenants/${r}/profile`),{plan:"free",planType:null,startDate:null,expiryDate:null})}async function sb(r){var t,i,o,l;const e=ue(de,`tenants/${r.uid||ac(ue(de,"tenants")).key}/profile`);await Qe(e,{businessName:((t=r.businessName)==null?void 0:t.trim())||"",ownerName:((i=r.ownerName)==null?void 0:i.trim())||"",email:((o=r.email)==null?void 0:o.trim())||"",prefix:((l=r.prefix)==null?void 0:l.toUpperCase())||"ART",slug:r.slug||"",plan:r.plan||"free",notes:r.notes||"",createdAt:Date.now(),updatedAt:Date.now()})}async function ib(r,e){const t=ue(de,`tenants/${r}/profile`);await Qe(t,{...e,updatedAt:Date.now()})}async function ob(r){const e=ue(de,`tenants/${r}`);await Fl(e)}function ov(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function ab(){const{user:r}=ms(),[e,t]=C.useState([]),[i,o]=C.useState([]),[l,d]=C.useState(!1),[f,m]=C.useState({businessName:"",ownerName:"",email:"",phone:""}),[g,x]=C.useState(null),[_,y]=C.useState(null),[I,j]=C.useState(""),[A,D]=C.useState(!1),[J,Q]=C.useState(null),[q,te]=C.useState({amount:"",senderName:"",referenceNumber:"",paymentDate:new Date().toISOString().split("T")[0]}),[ge,ve]=C.useState(!1);if(C.useEffect(()=>_l(r)?eb(t):void 0,[r]),C.useEffect(()=>_l(r)?ZT(o):void 0,[r]),!_l(r))return c.jsxs("div",{className:"page admin-page",children:[c.jsx("h2",{className:"page-title",children:" Accs refus"}),c.jsx("p",{style:{textAlign:"center",color:"var(--text-muted)"},children:"Cette page est rserve  l'administrateur."})]});const ae=e.length,he=e.filter(P=>P.plan==="artisan").length,ye=e.filter(P=>P.plan==="free").length,Ee=e.reduce((P,K)=>K.plan!=="artisan"?P:K.planType==="yearly"?P+100/12:P+12.99,0),je=e.filter(P=>{if(P.plan!=="artisan"||!P.expiryDate)return!1;const K=Math.ceil((new Date(P.expiryDate)-new Date)/(1e3*60*60*24));return K<=7&&K>0}),W=e.filter(P=>P.plan!=="artisan"||!P.expiryDate?!1:new Date(P.expiryDate)<new Date),Se=P=>i.filter(K=>K.tenantId===P),ne=(P,K,N,z,H)=>{const Y=H==="yearly"?"100.00":"12.99";Q({tenantId:P,tenantName:K,action:z,planType:H}),te({amount:Y,senderName:N||"",referenceNumber:"",paymentDate:new Date().toISOString().split("T")[0]}),D(!0)},Ce=async()=>{if(!q.referenceNumber.trim()){alert("Le numro de rfrence Interac est obligatoire.");return}if(!q.amount){alert("Le montant est obligatoire.");return}ve(!0);try{const{tenantId:P,action:K,planType:N}=J;await JT(P,{...q,planType:N,action:K==="activate"?"activation":"renewal"}),K==="activate"?await tb(P,N):await nb(P,N),D(!1),Q(null)}catch(P){console.error("Erreur:",P),alert("Erreur lors du traitement. Ressayez.")}finally{ve(!1)}},we=async()=>{!f.businessName.trim()||!f.ownerName.trim()||(await sb(f),m({businessName:"",ownerName:"",email:"",phone:""}),d(!1))},fe=async P=>{confirm("Rtrograder au plan gratuit? Le client perdra les fonctions premium.")&&await rb(P)},U=async P=>{confirm(`Supprimer "${P.businessName}" ? Cette action est irrversible.`)&&(await ob(P.id),x(null))},ee=async P=>{await ib(P,{notes:I}),y(null)},G=P=>P?new Date(P).toLocaleDateString("fr-CA"):"",k=P=>P?Math.ceil((new Date(P)-new Date)/(1e3*60*60*24)):null,L=P=>P.plan==="free"?"plan-badge-free":P.expiryDate&&new Date(P.expiryDate)<new Date?"plan-badge-expired":"plan-badge-artisan",_e=P=>P.plan==="free"?" Dcouverte":P.expiryDate&&new Date(P.expiryDate)<new Date?" Expir":" Artisan";return c.jsxs("div",{className:"page admin-page",children:[c.jsx("h2",{className:"page-title",children:" Admin  Vitrine Artisan"}),c.jsxs("div",{className:"admin-stats",children:[c.jsxs("div",{className:"admin-stat-card",children:[c.jsx("span",{className:"admin-stat-number",children:ae}),c.jsx("span",{className:"admin-stat-label",children:"Artisans"})]}),c.jsxs("div",{className:"admin-stat-card stat-paying",children:[c.jsx("span",{className:"admin-stat-number",children:he}),c.jsx("span",{className:"admin-stat-label",children:"Payants"})]}),c.jsxs("div",{className:"admin-stat-card stat-free",children:[c.jsx("span",{className:"admin-stat-number",children:ye}),c.jsx("span",{className:"admin-stat-label",children:"Gratuits"})]}),c.jsxs("div",{className:"admin-stat-card stat-revenue",children:[c.jsxs("span",{className:"admin-stat-number",children:[ov(Ee)," $"]}),c.jsx("span",{className:"admin-stat-label",children:"Rev./mois"})]})]}),(je.length>0||W.length>0)&&c.jsxs("div",{className:"admin-alerts",children:[W.length>0&&c.jsxs("div",{className:"admin-alert admin-alert-danger",children:[" ",W.length," plan(s) expir(s)  action requise"]}),je.length>0&&c.jsxs("div",{className:"admin-alert admin-alert-warning",children:[" ",je.length," plan(s) expire(nt) dans 7 jours"]})]}),c.jsxs("div",{className:"admin-section",children:[c.jsxs("div",{className:"admin-section-header",children:[c.jsx("h3",{children:" Artisans"}),c.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{d(!l),m({businessName:"",ownerName:"",email:"",phone:""})},children:" Nouveau client"})]}),l&&c.jsxs("div",{className:"admin-add-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nom de l'entreprise"}),c.jsx("input",{type:"text",value:f.businessName,onChange:P=>m(K=>({...K,businessName:P.target.value})),className:"form-input",placeholder:"Ex: Les Crations de Marie",autoFocus:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nom du propritaire"}),c.jsx("input",{type:"text",value:f.ownerName,onChange:P=>m(K=>({...K,ownerName:P.target.value})),className:"form-input",placeholder:"Ex: Marie Tremblay"})]}),c.jsxs("div",{className:"store-form-row",children:[c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label",children:"Courriel"}),c.jsx("input",{type:"email",value:f.email,onChange:P=>m(K=>({...K,email:P.target.value})),className:"form-input",placeholder:"marie@gmail.com"})]}),c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label",children:"Tlphone"}),c.jsx("input",{type:"tel",value:f.phone,onChange:P=>m(K=>({...K,phone:P.target.value})),className:"form-input",placeholder:"819-555-1234"})]})]}),c.jsxs("div",{className:"store-edit-actions",children:[c.jsx("button",{className:"btn btn-small btn-save",onClick:we,disabled:!f.businessName.trim()||!f.ownerName.trim(),children:" Ajouter"}),c.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>d(!1),children:"Annuler"})]})]}),e.length===0?c.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",textAlign:"center",padding:"20px 0"},children:"Aucun artisan inscrit"}):c.jsx("div",{className:"admin-tenants-list",children:e.map(P=>{const K=g===P.id,N=k(P.expiryDate),z=P.plan==="artisan"&&N!==null&&N<=0,H=Se(P.id);return c.jsxs("div",{className:`admin-tenant-card ${K?"expanded":""} ${z?"tenant-expired":""}`,onClick:()=>x(K?null:P.id),children:[c.jsxs("div",{className:"admin-tenant-summary",children:[c.jsxs("div",{className:"admin-tenant-info",children:[c.jsx("span",{className:"admin-tenant-business",children:P.businessName}),c.jsx("span",{className:"admin-tenant-owner",children:P.ownerName})]}),c.jsx("span",{className:`admin-plan-badge ${L(P)}`,children:_e(P)})]}),K&&c.jsxs("div",{className:"admin-tenant-details",onClick:Y=>Y.stopPropagation(),children:[c.jsxs("div",{className:"admin-detail-grid",children:[c.jsxs("div",{className:"admin-detail-item",children:[c.jsx("span",{className:"admin-detail-label",children:" Courriel"}),c.jsx("span",{className:"admin-detail-value",children:P.email||""})]}),c.jsxs("div",{className:"admin-detail-item",children:[c.jsx("span",{className:"admin-detail-label",children:" Tlphone"}),c.jsx("span",{className:"admin-detail-value",children:P.phone||""})]}),c.jsxs("div",{className:"admin-detail-item",children:[c.jsx("span",{className:"admin-detail-label",children:" Inscrit le"}),c.jsx("span",{className:"admin-detail-value",children:G(P.createdAt?new Date(P.createdAt).toISOString():null)})]}),P.plan==="artisan"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-detail-item",children:[c.jsx("span",{className:"admin-detail-label",children:" Type"}),c.jsx("span",{className:"admin-detail-value",children:P.planType==="yearly"?"Annuel (100$/an)":"Mensuel (12.99$/mois)"})]}),c.jsxs("div",{className:"admin-detail-item",children:[c.jsx("span",{className:"admin-detail-label",children:" Dbut"}),c.jsx("span",{className:"admin-detail-value",children:G(P.startDate)})]}),c.jsxs("div",{className:"admin-detail-item",children:[c.jsx("span",{className:"admin-detail-label",children:" Expiration"}),c.jsxs("span",{className:`admin-detail-value ${z?"text-danger":N<=7?"text-warning":""}`,children:[G(P.expiryDate),N!==null&&c.jsx("span",{className:"admin-days-badge",children:z?`Expir (${Math.abs(N)}j)`:`${N}j`})]})]})]})]}),H.length>0&&c.jsxs("div",{className:"admin-payments-history",children:[c.jsx("p",{className:"admin-payments-title",children:" Historique des paiements"}),H.map(Y=>c.jsxs("div",{className:"admin-payment-row",children:[c.jsxs("div",{className:"admin-payment-info",children:[c.jsxs("span",{className:"admin-payment-amount",children:[ov(Y.amount)," $"]}),c.jsxs("span",{className:"admin-payment-type",children:[Y.action==="activation"?" Activation":" Renouvellement","  ",Y.planType==="yearly"?"Annuel":"Mensuel"]})]}),c.jsxs("div",{className:"admin-payment-details",children:[c.jsxs("span",{children:[" ",G(Y.paymentDate)]}),c.jsxs("span",{children:[" ",Y.senderName]}),c.jsxs("span",{children:[" ",Y.referenceNumber]})]})]},Y.id))]}),c.jsx("div",{className:"admin-notes",children:_===P.id?c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:" Notes"}),c.jsx("textarea",{value:I,onChange:Y=>j(Y.target.value),className:"form-input form-textarea",rows:"3",placeholder:"Notes sur ce client..."}),c.jsxs("div",{className:"store-edit-actions",style:{marginTop:"6px"},children:[c.jsx("button",{className:"btn btn-small btn-save",onClick:()=>ee(P.id),children:""}),c.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>y(null),children:"Annuler"})]})]}):c.jsxs("div",{className:"admin-notes-display",onClick:()=>{y(P.id),j(P.notes||"")},children:[c.jsx("span",{className:"admin-detail-label",children:" Notes"}),c.jsx("p",{children:P.notes||"Cliquez pour ajouter une note..."})]})}),c.jsxs("div",{className:"admin-tenant-actions",children:[P.plan==="free"?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"btn btn-small btn-upgrade",onClick:()=>ne(P.id,P.businessName,P.ownerName,"activate","monthly"),children:" Activer mensuel"}),c.jsx("button",{className:"btn btn-small btn-upgrade-yearly",onClick:()=>ne(P.id,P.businessName,P.ownerName,"activate","yearly"),children:" Activer annuel"})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"btn btn-small btn-save",onClick:()=>ne(P.id,P.businessName,P.ownerName,"renew",P.planType),children:" Renouveler"}),c.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>fe(P.id),children:" Plan gratuit"})]}),c.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>U(P),children:" Supprimer"})]})]})]},P.id)})})]}),A&&J&&c.jsx("div",{className:"modal-overlay",onClick:()=>!ge&&D(!1),children:c.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),style:{maxWidth:"440px"},children:[c.jsxs("h3",{children:[""," ",J.action==="activate"?"Activer":"Renouveler","  ",J.tenantName]}),c.jsx("div",{className:"upgrade-modal-plan-selected",children:J.planType==="yearly"?" Plan annuel  100,00 $ / an":" Plan mensuel  12,99 $ / mois"}),c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("p",{style:{fontSize:"0.9rem",color:"#333",marginBottom:"12px",fontWeight:600},children:"Informations du virement Interac reu :"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Montant reu ($) *"}),c.jsx("input",{type:"number",value:q.amount,onChange:P=>te(K=>({...K,amount:P.target.value})),className:"form-input",step:"0.01",min:"0",inputMode:"decimal",style:{color:"#333",backgroundColor:"#fff"}})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Envoy par *"}),c.jsx("input",{type:"text",value:q.senderName,onChange:P=>te(K=>({...K,senderName:P.target.value})),className:"form-input",placeholder:"Nom sur le virement",style:{color:"#333",backgroundColor:"#fff"}})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Numro de rfrence Interac *"}),c.jsx("input",{type:"text",value:q.referenceNumber,onChange:P=>te(K=>({...K,referenceNumber:P.target.value})),className:"form-input",placeholder:"Ex: C1A929q3ADx4",style:{color:"#333",backgroundColor:"#fff"}})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Date du paiement"}),c.jsx("input",{type:"date",value:q.paymentDate,onChange:P=>te(K=>({...K,paymentDate:P.target.value})),className:"form-input",style:{color:"#333",backgroundColor:"#fff"}})]})]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"btn btn-upgrade btn-full",onClick:Ce,disabled:ge,style:{flex:1},children:ge?"Traitement...":J.action==="activate"?" Confirmer et activer":" Confirmer et renouveler"}),c.jsx("button",{className:"btn btn-secondary",onClick:()=>D(!1),disabled:ge,style:{flex:0},children:"Annuler"})]})]})})]})}function lb(){const{loginWithGoogle:r,sendMagicLink:e}=ms(),[t,i]=C.useState("main"),[o,l]=C.useState(""),[d,f]=C.useState(""),[m,g]=C.useState(""),[x,_]=C.useState(!1),y=async A=>{if(A.preventDefault(),f(""),g(""),!o.trim()){f("Entrez votre adresse courriel.");return}_(!0);try{await e(o),g("Un lien de connexion a t envoy  "+o+". Vrifiez votre bote de rception (et vos courriels indsirables).")}catch(D){D.code==="auth/invalid-email"?f("Adresse courriel invalide."):D.code==="auth/too-many-requests"?f("Trop de tentatives. Ressayez plus tard."):f("Erreur de connexion. Ressayez.")}finally{_(!1)}},I=async()=>{f(""),_(!0);try{await r()}catch{f("Erreur de connexion avec Google.")}finally{_(!1)}},j=A=>{i(A),f(""),g("")};return c.jsx("div",{className:"login-page",children:c.jsxs("div",{className:"login-card",children:[c.jsx("div",{className:"login-logo",children:""}),c.jsx("h1",{className:"login-title",children:"Vitrine Artisan"}),c.jsxs("p",{className:"login-subtitle",children:["Gestion d'inventaire pour",c.jsx("br",{}),"les artisans du Qubec"]}),c.jsxs("button",{onClick:I,className:"btn-google-login",disabled:x,children:[c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]}),c.jsx("div",{className:"login-divider",children:c.jsx("span",{children:"ou"})}),t==="main"&&c.jsx("button",{onClick:()=>j("magiclink"),className:"btn-magic-link",disabled:x,children:" Recevoir un lien de connexion par courriel"}),t==="magiclink"&&c.jsxs("form",{onSubmit:y,className:"login-form",children:[c.jsx("p",{className:"login-reset-info",children:"Entrez votre courriel. Vous recevrez un lien  cliquez dessus et vous serez connect. Aucun mot de passe ncessaire!"}),c.jsx("div",{className:"form-group",children:c.jsx("input",{type:"email",value:o,onChange:A=>l(A.target.value),className:"login-input",placeholder:"Adresse courriel",required:!0,autoComplete:"email",autoFocus:!0})}),c.jsx("button",{type:"submit",className:"btn btn-primary btn-login",disabled:x,children:x?"Envoi...":" Envoyer le lien de connexion"}),c.jsx("div",{className:"login-links",children:c.jsx("button",{type:"button",className:"link-btn",onClick:()=>j("main"),children:" Retour"})})]}),d&&c.jsx("p",{className:"login-error",children:d}),m&&c.jsx("p",{className:"login-success",children:m})]})})}function cb(){return C.useEffect(()=>{const r=()=>{const t=document.getElementById("landing-nav");t&&t.classList.toggle("scrolled",window.scrollY>40)};window.addEventListener("scroll",r);const e=new IntersectionObserver(t=>{t.forEach(i=>{i.isIntersecting&&i.target.classList.add("visible")})},{threshold:.15});return document.querySelectorAll(".fade-in").forEach(t=>e.observe(t)),()=>{window.removeEventListener("scroll",r),e.disconnect()}},[]),c.jsxs("div",{className:"landing",children:[c.jsx("nav",{className:"lp-nav",id:"landing-nav",children:c.jsxs("div",{className:"lp-nav-inner",children:[c.jsxs("a",{href:"#",className:"lp-nav-logo",children:["Vitrine ",c.jsx("span",{children:"Artisan"})]}),c.jsxs("ul",{className:"lp-nav-links",children:[c.jsx("li",{children:c.jsx("a",{href:"#fonctionnalites",children:"Fonctionnalits"})}),c.jsx("li",{children:c.jsx("a",{href:"#comment-ca-marche",children:"Comment a marche"})}),c.jsx("li",{children:c.jsx("a",{href:"#tarifs",children:"Tarifs"})}),c.jsx("li",{children:c.jsx(ts,{to:"/app",className:"lp-nav-cta",children:"Essayer gratuitement"})})]}),c.jsxs("button",{className:"lp-mobile-menu-btn",onClick:()=>document.querySelector(".lp-nav-links").classList.toggle("show"),"aria-label":"Menu",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]})]})}),c.jsx("section",{className:"lp-hero",children:c.jsxs("div",{className:"lp-hero-inner",children:[c.jsxs("div",{className:"lp-hero-text",children:[c.jsx("div",{className:"lp-hero-badge",children:" Conu pour les artisans qubcois"}),c.jsxs("h1",{children:["Grez votre inventaire,",c.jsx("br",{}),"exposez vos ",c.jsx("em",{children:"crations"})]}),c.jsx("p",{className:"lp-hero-subtitle",children:"L'outil tout-en-un pour les artisans et crateurs. Grez vos articles, suivez vos ventes aux marchs et en consigne, et offrez une vitrine en ligne  vos crations."}),c.jsxs("div",{className:"lp-hero-actions",children:[c.jsx(ts,{to:"/app",className:"lp-btn-primary",children:"Commencer gratuitement "}),c.jsx("a",{href:"#fonctionnalites",className:"lp-btn-secondary",children:"Dcouvrir les fonctions"})]}),c.jsx("p",{className:"lp-hero-note",children:" Gratuit jusqu' 25 articles  aucune carte de crdit requise"})]}),c.jsxs("div",{className:"lp-hero-visual",children:[c.jsx("div",{className:"lp-hero-phone",children:c.jsxs("div",{className:"lp-phone-screen",children:[c.jsxs("div",{className:"lp-phone-header",children:[c.jsx("span",{className:"lp-phone-title",children:" Vitrine Artisan"}),c.jsx("span",{className:"lp-phone-user",children:"Marie"})]}),c.jsxs("div",{className:"lp-phone-items",children:[c.jsxs("div",{className:"lp-phone-item",children:[c.jsx("div",{className:"lp-phone-thumb",style:{background:"linear-gradient(135deg, #C4704B, #D4845F)"}}),c.jsxs("div",{className:"lp-phone-info",children:[c.jsx("div",{className:"lp-phone-name",children:"Sac en tissu fleuri"}),c.jsx("div",{className:"lp-phone-price",children:"35,00 $"})]}),c.jsx("span",{className:"lp-phone-status lp-st-inv",children:"En stock"})]}),c.jsxs("div",{className:"lp-phone-item",children:[c.jsx("div",{className:"lp-phone-thumb",style:{background:"linear-gradient(135deg, #8FA68A, #B5CCAF)"}}),c.jsxs("div",{className:"lp-phone-info",children:[c.jsx("div",{className:"lp-phone-name",children:"Boucles d'oreilles bois"}),c.jsx("div",{className:"lp-phone-price",children:"22,00 $"})]}),c.jsx("span",{className:"lp-phone-status lp-st-con",children:"Consigne"})]}),c.jsxs("div",{className:"lp-phone-item",children:[c.jsx("div",{className:"lp-phone-thumb",style:{background:"linear-gradient(135deg, #C9A96E, #E0CC9F)"}}),c.jsxs("div",{className:"lp-phone-info",children:[c.jsx("div",{className:"lp-phone-name",children:"Chandelle artisanale"}),c.jsx("div",{className:"lp-phone-price",children:"18,00 $"})]}),c.jsx("span",{className:"lp-phone-status lp-st-sold",children:"Vendu "})]}),c.jsxs("div",{className:"lp-phone-item",children:[c.jsx("div",{className:"lp-phone-thumb",style:{background:"linear-gradient(135deg, #7C6FA0, #A89BC4)"}}),c.jsxs("div",{className:"lp-phone-info",children:[c.jsx("div",{className:"lp-phone-name",children:"Savon lavande bio"}),c.jsx("div",{className:"lp-phone-price",children:"12,00 $"})]}),c.jsx("span",{className:"lp-phone-status lp-st-inv",children:"En stock"})]})]}),c.jsxs("div",{className:"lp-phone-nav",children:[c.jsxs("div",{className:"lp-phone-nav-item active",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Inventaire"})]}),c.jsxs("div",{className:"lp-phone-nav-item",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Vente"})]}),c.jsxs("div",{className:"lp-phone-nav-item",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Ajouter"})]}),c.jsxs("div",{className:"lp-phone-nav-item",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Info"})]})]})]})}),c.jsxs("div",{className:"lp-float-card lp-float-1",children:[c.jsx("div",{className:"lp-float-icon",children:""}),c.jsxs("div",{children:[c.jsx("div",{className:"lp-float-label",children:"Ventes ce mois"}),c.jsx("div",{className:"lp-float-value",children:"847,00 $"})]})]}),c.jsxs("div",{className:"lp-float-card lp-float-2",children:[c.jsx("div",{className:"lp-float-label",children:"Inventaire actif"}),c.jsx("div",{className:"lp-float-bar",children:c.jsx("div",{className:"lp-float-bar-fill"})})]})]})]})}),c.jsx("section",{className:"lp-features",id:"fonctionnalites",children:c.jsxs("div",{className:"lp-section-inner",children:[c.jsx("div",{className:"lp-section-tag",children:"Fonctionnalits"}),c.jsxs("h2",{className:"lp-section-title",children:["Tout ce qu'il faut pour",c.jsx("br",{}),"grer votre atelier"]}),c.jsx("p",{className:"lp-section-subtitle",children:"Plus besoin de carnets et de feuilles Excel. Une seule application pour tout suivre."}),c.jsxs("div",{className:"lp-features-grid",children:[c.jsxs("div",{className:"lp-feature-card fade-in",children:[c.jsx("div",{className:"lp-feature-icon lp-fi-inv",children:""}),c.jsx("h3",{className:"lp-feature-title",children:"Inventaire complet"}),c.jsx("p",{className:"lp-feature-desc",children:"Ajoutez vos articles avec photo, description, prix et catgorie. Numro unique auto-gnr pour chaque pice."})]}),c.jsxs("div",{className:"lp-feature-card fade-in",children:[c.jsx("div",{className:"lp-feature-icon lp-fi-vit",children:""}),c.jsx("h3",{className:"lp-feature-title",children:"Vitrine en ligne"}),c.jsx("p",{className:"lp-feature-desc",children:"Votre catalogue public accessible en tout temps. Partagez le lien avec vos clients  ils voient vos crations en temps rel."})]}),c.jsxs("div",{className:"lp-feature-card fade-in",children:[c.jsx("div",{className:"lp-feature-icon lp-fi-sale",children:""}),c.jsx("h3",{className:"lp-feature-title",children:"Vente rapide"}),c.jsx("p",{className:"lp-feature-desc",children:"Entrez le numro de l'article, confirmez le prix et c'est vendu. Support des taxes TPS/TVQ et des rabais."})]}),c.jsxs("div",{className:"lp-feature-card fade-in",children:[c.jsx("div",{className:"lp-feature-icon lp-fi-con",children:""}),c.jsx("h3",{className:"lp-feature-title",children:"Suivi des consignes"}),c.jsx("p",{className:"lp-feature-desc",children:"Grez vos articles en boutique. Commission par magasin, loyer mensuel, rapport de revenus nets automatique."})]}),c.jsxs("div",{className:"lp-feature-card fade-in",children:[c.jsx("div",{className:"lp-feature-icon lp-fi-photo",children:""}),c.jsx("h3",{className:"lp-feature-title",children:"Photos multiples"}),c.jsx("p",{className:"lp-feature-desc",children:"Jusqu' 5 photos par article. Prenez la photo directement avec votre tlphone, la compression est automatique."})]}),c.jsxs("div",{className:"lp-feature-card fade-in",children:[c.jsx("div",{className:"lp-feature-icon lp-fi-pwa",children:""}),c.jsx("h3",{className:"lp-feature-title",children:"Installable sur mobile"}),c.jsx("p",{className:"lp-feature-desc",children:"Ajoutez l'app sur l'cran d'accueil de votre tlphone. Fonctionne comme une vraie application, partout."})]})]})]})}),c.jsx("section",{className:"lp-how",id:"comment-ca-marche",children:c.jsxs("div",{className:"lp-section-inner",children:[c.jsx("div",{className:"lp-section-tag",children:"Comment a marche"}),c.jsx("h2",{className:"lp-section-title",children:"Prt en 3 minutes"}),c.jsx("p",{className:"lp-section-subtitle",children:"Pas besoin d'tre techno. Si vous savez prendre une photo, vous savez utiliser Vitrine Artisan."}),c.jsxs("div",{className:"lp-steps-grid",children:[c.jsxs("div",{className:"lp-step fade-in",children:[c.jsx("div",{className:"lp-step-number",children:"1"}),c.jsx("h3",{className:"lp-step-title",children:"Crez votre compte"}),c.jsx("p",{className:"lp-step-desc",children:"Connectez-vous avec votre compte Google ou par courriel. C'est gratuit et instantan."})]}),c.jsxs("div",{className:"lp-step fade-in",children:[c.jsx("div",{className:"lp-step-number",children:"2"}),c.jsx("h3",{className:"lp-step-title",children:"Ajoutez vos articles"}),c.jsx("p",{className:"lp-step-desc",children:"Prenez une photo, ajoutez le prix et la description. Le numro unique se gnre tout seul."})]}),c.jsxs("div",{className:"lp-step fade-in",children:[c.jsx("div",{className:"lp-step-number",children:"3"}),c.jsx("h3",{className:"lp-step-title",children:"Vendez et suivez"}),c.jsx("p",{className:"lp-step-desc",children:"Au march ou en consigne, enregistrez chaque vente. Votre vitrine se met  jour automatiquement."})]})]})]})}),c.jsx("section",{className:"lp-pricing",id:"tarifs",children:c.jsxs("div",{className:"lp-section-inner",children:[c.jsx("div",{className:"lp-section-tag",children:"Tarifs"}),c.jsx("h2",{className:"lp-section-title",children:"Simple et honnte"}),c.jsx("p",{className:"lp-section-subtitle",children:"Commencez gratuitement. Passez au plan Artisan quand vous tes prt."}),c.jsxs("div",{className:"lp-pricing-grid",children:[c.jsxs("div",{className:"lp-pricing-card",children:[c.jsx("div",{className:"lp-pricing-name",children:" Dcouverte"}),c.jsxs("div",{className:"lp-pricing-price",children:["0 $ ",c.jsx("span",{children:"/ mois"})]}),c.jsx("div",{className:"lp-pricing-period",children:"Gratuit pour toujours"}),c.jsxs("ul",{className:"lp-pricing-features",children:[c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Jusqu' 25 articles"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Vitrine publique (10 articles)"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Vente rapide"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Photos par article"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-cross",children:""})," Suivi des consignes"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-cross",children:""})," Rapport de ventes"]})]}),c.jsx(ts,{to:"/app",className:"lp-btn-pricing lp-btn-pricing-free",children:"Commencer gratuitement"})]}),c.jsxs("div",{className:"lp-pricing-card lp-featured",children:[c.jsx("div",{className:"lp-pricing-name",children:" Artisan"}),c.jsxs("div",{className:"lp-pricing-price",children:["12,99 $ ",c.jsx("span",{children:"/ mois"})]}),c.jsx("div",{className:"lp-pricing-period",children:"ou 100 $ / an (conomisez 56 $)"}),c.jsxs("ul",{className:"lp-pricing-features",children:[c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Articles illimits"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Vitrine publique illimite"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Vente rapide + taxes"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Photos multiples (5/article)"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Suivi des consignes"]}),c.jsxs("li",{children:[c.jsx("span",{className:"lp-check",children:""})," Rapport de ventes mensuel"]})]}),c.jsx(ts,{to:"/app",className:"lp-btn-pricing lp-btn-pricing-feat",children:"Essayer maintenant "})]})]}),c.jsxs("p",{className:"lp-pricing-note",children:[" Moins cher qu'un espace de table au march  et ",c.jsx("strong",{children:"a travaille 24/7"})," avec votre vitrine en ligne."]})]})}),c.jsx("section",{className:"lp-testimonial",children:c.jsx("div",{className:"lp-section-inner",children:c.jsxs("div",{className:"lp-testimonial-card fade-in",children:[c.jsx("p",{className:"lp-testimonial-quote",children:"Avant, je grais tout dans un cahier. Maintenant, je prends la photo, j'entre le prix, et c'est fait. Mes clientes peuvent voir mes crations en ligne mme entre les marchs."}),c.jsx("p",{className:"lp-testimonial-author",children:"Une artisane satisfaite"}),c.jsx("p",{className:"lp-testimonial-role",children:"Couture et crations textiles  Qubec"})]})})}),c.jsx("section",{className:"lp-cta",children:c.jsxs("div",{className:"lp-section-inner",children:[c.jsx("h2",{className:"lp-cta-title",children:"Prt  simplifier votre gestion?"}),c.jsx("p",{className:"lp-cta-subtitle",children:"Crez votre compte en 30 secondes. Gratuit, sans engagement, sans carte de crdit."}),c.jsx(ts,{to:"/app",className:"lp-btn-primary",children:"Commencer gratuitement "})]})}),c.jsx("footer",{className:"lp-footer",children:c.jsxs("div",{className:"lp-footer-inner",children:[c.jsxs("div",{className:"lp-footer-brand",children:["Vitrine ",c.jsx("span",{children:"Artisan"})]}),c.jsx("p",{className:"lp-footer-copy",children:" 2026 Vitrine Artisan  Cr avec  au Qubec"}),c.jsxs("div",{className:"lp-footer-links",children:[c.jsx(ts,{to:"/app",className:"lp-footer-link",children:"Dj inscrit? Accder  l'app "}),c.jsx("a",{href:"mailto:info@vitrineartisan.ca",className:"lp-footer-link",children:" Contact"})]})]})})]})}function ub(){const{user:r,completeOnboarding:e,logout:t}=ms(),[i,o]=C.useState(1),[l,d]=C.useState(""),[f,m]=C.useState((r==null?void 0:r.displayName)||""),[g,x]=C.useState(""),[_,y]=C.useState(""),[I,j]=C.useState("dark-copper"),[A,D]=C.useState(null),[J,Q]=C.useState(null),[q,te]=C.useState(!1),[ge,ve]=C.useState(!1),[ae,he]=C.useState(!1),[ye,Ee]=C.useState("");C.useEffect(()=>{if(l.trim().length>=3){const ne=nv(l);y(ne);const Ce=l.trim().split(/\s+/);let we;Ce.length>=3?we=Ce.map(fe=>fe[0]).join("").substring(0,3).toUpperCase():Ce.length===2?we=(Ce[0].substring(0,2)+Ce[1][0]).toUpperCase():we=Ce[0].substring(0,3).toUpperCase(),x(we)}},[l]),C.useEffect(()=>{if(_.length<3){D(null);return}te(!0);const ne=setTimeout(async()=>{const Ce=await mT(_);D(Ce),te(!1)},500);return()=>clearTimeout(ne)},[_]),C.useEffect(()=>{if(g.length<2){Q(null);return}ve(!0);const ne=setTimeout(async()=>{const Ce=await gT(g);Q(Ce),ve(!1)},500);return()=>clearTimeout(ne)},[g]);const je=l.trim().length>=3&&f.trim().length>=2,W=J&&A&&g.length>=2&&_.length>=3,Se=async()=>{Ee(""),he(!0);try{const ne=await yT(r.uid,{businessName:l.trim(),ownerName:f.trim(),email:r.email||"",prefix:g.toUpperCase(),slug:_,theme:I});e(ne)}catch(ne){console.error("Erreur onboarding:",ne),Ee("Erreur lors de la cration. Ressayez.")}finally{he(!1)}};return c.jsx("div",{className:"onboarding-page",children:c.jsxs("div",{className:"onboarding-card",children:[c.jsxs("div",{className:"onboarding-header",children:[c.jsx("span",{className:"onboarding-logo",children:""}),c.jsx("h1",{children:"Bienvenue sur Vitrine Artisan"}),c.jsx("p",{children:"Configurons votre espace en quelques tapes"})]}),c.jsx("div",{className:"onboarding-steps-indicator",children:[1,2,3].map(ne=>c.jsx("div",{className:`step-dot ${i>=ne?"active":""} ${i===ne?"current":""}`,children:ne},ne))}),i===1&&c.jsxs("div",{className:"onboarding-step",children:[c.jsx("h2",{children:"Votre atelier"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Nom de votre entreprise / atelier *"}),c.jsx("input",{type:"text",value:l,onChange:ne=>d(ne.target.value),className:"form-input",placeholder:"Ex: L'Atelier de Marie, Crations Soleil...",autoFocus:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Votre nom *"}),c.jsx("input",{type:"text",value:f,onChange:ne=>m(ne.target.value),className:"form-input",placeholder:"Votre prnom et nom"})]}),c.jsx("button",{className:"btn btn-primary btn-full",onClick:()=>o(2),disabled:!je,children:"Continuer "})]}),i===2&&c.jsxs("div",{className:"onboarding-step",children:[c.jsx("h2",{children:"Identifiants uniques"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Prfixe pour vos articles *"}),c.jsx("input",{type:"text",value:g,onChange:ne=>x(ne.target.value.toUpperCase().replace(/[^A-Z]/g,"").substring(0,5)),className:"form-input",placeholder:"Ex: ADL, CRS, MAR",maxLength:5,style:{textTransform:"uppercase"}}),c.jsxs("p",{className:"form-hint",children:["Vos articles seront numrots ",g||"XXX","-001, ",g||"XXX","-002...",ge&&" ",!ge&&J===!0&&"  Disponible",!ge&&J===!1&&"  Dj pris"]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Adresse de votre vitrine *"}),c.jsxs("div",{className:"slug-input-wrapper",children:[c.jsx("span",{className:"slug-prefix",children:"vitrineartisan.ca/vitrine/"}),c.jsx("input",{type:"text",value:_,onChange:ne=>y(nv(ne.target.value)),className:"form-input slug-input",placeholder:"mon-atelier"})]}),c.jsxs("p",{className:"form-hint",children:[q&&" Vrification...",!q&&A===!0&&" Disponible",!q&&A===!1&&" Dj pris  essayez un autre"]})]}),c.jsxs("div",{className:"onboarding-nav-btns",children:[c.jsx("button",{className:"btn btn-secondary",onClick:()=>o(1),children:" Retour"}),c.jsx("button",{className:"btn btn-primary",onClick:()=>o(3),disabled:!W,children:"Continuer "})]})]}),i===3&&c.jsxs("div",{className:"onboarding-step",children:[c.jsx("h2",{children:"Choisissez votre thme"}),c.jsx("p",{className:"onboarding-step-desc",children:"Vous pourrez le changer plus tard dans les paramtres."}),c.jsx("div",{className:"theme-grid",children:Object.entries(Ry).map(([ne,Ce])=>c.jsxs("button",{className:`theme-card ${I===ne?"selected":""}`,onClick:()=>j(ne),children:[c.jsx("div",{className:"theme-preview-swatch",style:{backgroundColor:Ce.vars["--bg-primary"]},children:c.jsx("div",{className:"theme-preview-accent",style:{backgroundColor:Ce.preview}})}),c.jsx("span",{className:"theme-name",children:Ce.name})]},ne))}),ye&&c.jsx("p",{className:"onboarding-error",children:ye}),c.jsxs("div",{className:"onboarding-summary",children:[c.jsx("h4",{children:"Rsum"}),c.jsxs("p",{children:[" ",l]}),c.jsxs("p",{children:[" ",f]}),c.jsxs("p",{children:[" Prfixe : ",g]}),c.jsxs("p",{children:[" vitrineartisan.ca/vitrine/",_]})]}),c.jsxs("div",{className:"onboarding-nav-btns",children:[c.jsx("button",{className:"btn btn-secondary",onClick:()=>o(2),children:" Retour"}),c.jsx("button",{className:"btn btn-primary btn-full",onClick:Se,disabled:ae,children:ae?"Cration en cours...":" Crer mon espace"})]})]}),c.jsx("button",{className:"onboarding-logout",onClick:t,children:"Se dconnecter"})]})})}const db="stockduloft/settings";function hb(){var l;const{user:r,tenant:e,needsOnboarding:t,logout:i}=ms(),o=hs();return C.useEffect(()=>{if(!r)return;const d=ue(de,`${db}/theme`);return tn(d,m=>{m.exists()&&Oy(m.val())})},[r]),o.pathname==="/"?c.jsx(cb,{}):o.pathname.startsWith("/vitrine")?c.jsxs(Vm,{children:[c.jsx(Fn,{path:"/vitrine/:slug",element:c.jsx(YT,{})}),c.jsx(Fn,{path:"/vitrine",element:c.jsx("div",{className:"vitrine",children:c.jsxs("div",{className:"vitrine-empty",children:[c.jsx("p",{children:""}),c.jsx("p",{children:"Ajoutez un slug de boutique dans l'URL"}),c.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginTop:"8px"},children:"Ex: vitrineartisan.ca/vitrine/mon-atelier"})]})})})]}):r?t?c.jsx(ub,{}):c.jsxs("div",{className:"app",children:[c.jsx("header",{className:"app-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{className:"header-brand",children:[c.jsx("a",{href:"/app",className:"brand-link",children:c.jsx("img",{src:"/logo.svg",alt:"Vitrine Artisan",className:"brand-logo-full"})}),(e==null?void 0:e.businessName)&&c.jsx("span",{className:"brand-business",children:e.businessName})]}),c.jsxs("nav",{className:"header-nav",children:[c.jsxs(ll,{to:"/app",end:!0,className:({isActive:d})=>`header-nav-link ${d?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:""}),c.jsx("span",{className:"nav-text",children:"Inventaire"})]}),c.jsxs(ll,{to:"/app/sale",className:({isActive:d})=>`header-nav-link ${d?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:""}),c.jsx("span",{className:"nav-text",children:"Vente"})]}),c.jsxs(ll,{to:"/app/add",className:({isActive:d})=>`header-nav-link ${d?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:""}),c.jsx("span",{className:"nav-text",children:"Ajouter"})]}),c.jsxs(ll,{to:"/app/about",className:({isActive:d})=>`header-nav-link ${d?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:""}),c.jsx("span",{className:"nav-text",children:"Paramtres"})]})]}),c.jsxs("div",{className:"header-user",children:[c.jsx("span",{className:"user-name",children:(l=r.displayName)==null?void 0:l.split(" ")[0]}),c.jsx("button",{onClick:i,className:"btn-logout",title:"Dconnexion",children:""})]})]})}),c.jsx("main",{className:"app-main",children:c.jsxs(Vm,{children:[c.jsx(Fn,{path:"/app",element:c.jsx(UT,{})}),c.jsx(Fn,{path:"/app/add",element:c.jsx(VT,{})}),c.jsx(Fn,{path:"/app/sale",element:c.jsx(WT,{})}),c.jsx(Fn,{path:"/app/about",element:c.jsx(qT,{})}),_l(r)&&c.jsx(Fn,{path:"/app/admin",element:c.jsx(ab,{})}),c.jsx(Fn,{path:"*",element:c.jsx(Mw,{to:"/app",replace:!0})})]})})]}):c.jsx(lb,{})}function fb(){return c.jsx(NT,{children:c.jsx(hb,{})})}G0.createRoot(document.getElementById("root")).render(c.jsx(lv.StrictMode,{children:c.jsx(qw,{children:c.jsx(fb,{})})}));
