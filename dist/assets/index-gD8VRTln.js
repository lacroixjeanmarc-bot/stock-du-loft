function d0(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const a=Object.getOwnPropertyDescriptor(s,o);a&&Object.defineProperty(r,o,a.get?a:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function Bg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yu={exports:{}},Is={},wu={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function h0(){if(fm)return _e;fm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function w(x){return x===null||typeof x!="object"?null:(x=_&&x[_]||x["@@iterator"],typeof x=="function"?x:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function O(x,M,me){this.props=x,this.context=M,this.refs=j,this.updater=me||R}O.prototype.isReactComponent={},O.prototype.setState=function(x,M){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,M,"setState")},O.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function Q(){}Q.prototype=O.prototype;function A(x,M,me){this.props=x,this.context=M,this.refs=j,this.updater=me||R}var G=A.prototype=new Q;G.constructor=A,b(G,O.prototype),G.isPureReactComponent=!0;var H=Array.isArray,Y=Object.prototype.hasOwnProperty,ee={current:null},te={key:!0,ref:!0,__self:!0,__source:!0};function fe(x,M,me){var ve,Ee={},I=null,se=null;if(M!=null)for(ve in M.ref!==void 0&&(se=M.ref),M.key!==void 0&&(I=""+M.key),M)Y.call(M,ve)&&!te.hasOwnProperty(ve)&&(Ee[ve]=M[ve]);var ce=arguments.length-2;if(ce===1)Ee.children=me;else if(1<ce){for(var ge=Array(ce),oe=0;oe<ce;oe++)ge[oe]=arguments[oe+2];Ee.children=ge}if(x&&x.defaultProps)for(ve in ce=x.defaultProps,ce)Ee[ve]===void 0&&(Ee[ve]=ce[ve]);return{$$typeof:r,type:x,key:I,ref:se,props:Ee,_owner:ee.current}}function Ce(x,M){return{$$typeof:r,type:x.type,key:M,ref:x.ref,props:x.props,_owner:x._owner}}function Pe(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function Ye(x){var M={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(me){return M[me]})}var Ge=/\/+/g;function L(x,M){return typeof x=="object"&&x!==null&&x.key!=null?Ye(""+x.key):M.toString(36)}function D(x,M,me,ve,Ee){var I=typeof x;(I==="undefined"||I==="boolean")&&(x=null);var se=!1;if(x===null)se=!0;else switch(I){case"string":case"number":se=!0;break;case"object":switch(x.$$typeof){case r:case e:se=!0}}if(se)return se=x,Ee=Ee(se),x=ve===""?"."+L(se,0):ve,H(Ee)?(me="",x!=null&&(me=x.replace(Ge,"$&/")+"/"),D(Ee,M,me,"",function(oe){return oe})):Ee!=null&&(Pe(Ee)&&(Ee=Ce(Ee,me+(!Ee.key||se&&se.key===Ee.key?"":(""+Ee.key).replace(Ge,"$&/")+"/")+x)),M.push(Ee)),1;if(se=0,ve=ve===""?".":ve+":",H(x))for(var ce=0;ce<x.length;ce++){I=x[ce];var ge=ve+L(I,ce);se+=D(I,M,me,ge,Ee)}else if(ge=w(x),typeof ge=="function")for(x=ge.call(x),ce=0;!(I=x.next()).done;)I=I.value,ge=ve+L(I,ce++),se+=D(I,M,me,ge,Ee);else if(I==="object")throw M=String(x),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return se}function re(x,M,me){if(x==null)return x;var ve=[],Ee=0;return D(x,ve,"","",function(I){return M.call(me,I,Ee++)}),ve}function pe(x){if(x._status===-1){var M=x._result;M=M(),M.then(function(me){(x._status===0||x._status===-1)&&(x._status=1,x._result=me)},function(me){(x._status===0||x._status===-1)&&(x._status=2,x._result=me)}),x._status===-1&&(x._status=0,x._result=M)}if(x._status===1)return x._result.default;throw x._result}var X={current:null},$={transition:null},B={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:$,ReactCurrentOwner:ee};function q(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:re,forEach:function(x,M,me){re(x,function(){M.apply(this,arguments)},me)},count:function(x){var M=0;return re(x,function(){M++}),M},toArray:function(x){return re(x,function(M){return M})||[]},only:function(x){if(!Pe(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},_e.Component=O,_e.Fragment=n,_e.Profiler=o,_e.PureComponent=A,_e.StrictMode=s,_e.Suspense=m,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,_e.act=q,_e.cloneElement=function(x,M,me){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var ve=b({},x.props),Ee=x.key,I=x.ref,se=x._owner;if(M!=null){if(M.ref!==void 0&&(I=M.ref,se=ee.current),M.key!==void 0&&(Ee=""+M.key),x.type&&x.type.defaultProps)var ce=x.type.defaultProps;for(ge in M)Y.call(M,ge)&&!te.hasOwnProperty(ge)&&(ve[ge]=M[ge]===void 0&&ce!==void 0?ce[ge]:M[ge])}var ge=arguments.length-2;if(ge===1)ve.children=me;else if(1<ge){ce=Array(ge);for(var oe=0;oe<ge;oe++)ce[oe]=arguments[oe+2];ve.children=ce}return{$$typeof:r,type:x.type,key:Ee,ref:I,props:ve,_owner:se}},_e.createContext=function(x){return x={$$typeof:u,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:a,_context:x},x.Consumer=x},_e.createElement=fe,_e.createFactory=function(x){var M=fe.bind(null,x);return M.type=x,M},_e.createRef=function(){return{current:null}},_e.forwardRef=function(x){return{$$typeof:p,render:x}},_e.isValidElement=Pe,_e.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:pe}},_e.memo=function(x,M){return{$$typeof:g,type:x,compare:M===void 0?null:M}},_e.startTransition=function(x){var M=$.transition;$.transition={};try{x()}finally{$.transition=M}},_e.unstable_act=q,_e.useCallback=function(x,M){return X.current.useCallback(x,M)},_e.useContext=function(x){return X.current.useContext(x)},_e.useDebugValue=function(){},_e.useDeferredValue=function(x){return X.current.useDeferredValue(x)},_e.useEffect=function(x,M){return X.current.useEffect(x,M)},_e.useId=function(){return X.current.useId()},_e.useImperativeHandle=function(x,M,me){return X.current.useImperativeHandle(x,M,me)},_e.useInsertionEffect=function(x,M){return X.current.useInsertionEffect(x,M)},_e.useLayoutEffect=function(x,M){return X.current.useLayoutEffect(x,M)},_e.useMemo=function(x,M){return X.current.useMemo(x,M)},_e.useReducer=function(x,M,me){return X.current.useReducer(x,M,me)},_e.useRef=function(x){return X.current.useRef(x)},_e.useState=function(x){return X.current.useState(x)},_e.useSyncExternalStore=function(x,M,me){return X.current.useSyncExternalStore(x,M,me)},_e.useTransition=function(){return X.current.useTransition()},_e.version="18.3.1",_e}var pm;function gd(){return pm||(pm=1,wu.exports=h0()),wu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function f0(){if(mm)return Is;mm=1;var r=gd(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(p,m,g){var y,_={},w=null,R=null;g!==void 0&&(w=""+g),m.key!==void 0&&(w=""+m.key),m.ref!==void 0&&(R=m.ref);for(y in m)s.call(m,y)&&!a.hasOwnProperty(y)&&(_[y]=m[y]);if(p&&p.defaultProps)for(y in m=p.defaultProps,m)_[y]===void 0&&(_[y]=m[y]);return{$$typeof:e,type:p,key:w,ref:R,props:_,_owner:o.current}}return Is.Fragment=n,Is.jsx=u,Is.jsxs=u,Is}var gm;function p0(){return gm||(gm=1,yu.exports=f0()),yu.exports}var f=p0(),k=gd();const Wg=Bg(k),m0=d0({__proto__:null,default:Wg},[k]);var Cl={},Su={exports:{}},Nt={},Cu={exports:{}},Eu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function g0(){return vm||(vm=1,(function(r){function e($,B){var q=$.length;$.push(B);e:for(;0<q;){var x=q-1>>>1,M=$[x];if(0<o(M,B))$[x]=B,$[q]=M,q=x;else break e}}function n($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var B=$[0],q=$.pop();if(q!==B){$[0]=q;e:for(var x=0,M=$.length,me=M>>>1;x<me;){var ve=2*(x+1)-1,Ee=$[ve],I=ve+1,se=$[I];if(0>o(Ee,q))I<M&&0>o(se,Ee)?($[x]=se,$[I]=q,x=I):($[x]=Ee,$[ve]=q,x=ve);else if(I<M&&0>o(se,q))$[x]=se,$[I]=q,x=I;else break e}}return B}function o($,B){var q=$.sortIndex-B.sortIndex;return q!==0?q:$.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,p=u.now();r.unstable_now=function(){return u.now()-p}}var m=[],g=[],y=1,_=null,w=3,R=!1,b=!1,j=!1,O=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G($){for(var B=n(g);B!==null;){if(B.callback===null)s(g);else if(B.startTime<=$)s(g),B.sortIndex=B.expirationTime,e(m,B);else break;B=n(g)}}function H($){if(j=!1,G($),!b)if(n(m)!==null)b=!0,pe(Y);else{var B=n(g);B!==null&&X(H,B.startTime-$)}}function Y($,B){b=!1,j&&(j=!1,Q(fe),fe=-1),R=!0;var q=w;try{for(G(B),_=n(m);_!==null&&(!(_.expirationTime>B)||$&&!Ye());){var x=_.callback;if(typeof x=="function"){_.callback=null,w=_.priorityLevel;var M=x(_.expirationTime<=B);B=r.unstable_now(),typeof M=="function"?_.callback=M:_===n(m)&&s(m),G(B)}else s(m);_=n(m)}if(_!==null)var me=!0;else{var ve=n(g);ve!==null&&X(H,ve.startTime-B),me=!1}return me}finally{_=null,w=q,R=!1}}var ee=!1,te=null,fe=-1,Ce=5,Pe=-1;function Ye(){return!(r.unstable_now()-Pe<Ce)}function Ge(){if(te!==null){var $=r.unstable_now();Pe=$;var B=!0;try{B=te(!0,$)}finally{B?L():(ee=!1,te=null)}}else ee=!1}var L;if(typeof A=="function")L=function(){A(Ge)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,re=D.port2;D.port1.onmessage=Ge,L=function(){re.postMessage(null)}}else L=function(){O(Ge,0)};function pe($){te=$,ee||(ee=!0,L())}function X($,B){fe=O(function(){$(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_continueExecution=function(){b||R||(b=!0,pe(Y))},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ce=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_getFirstCallbackNode=function(){return n(m)},r.unstable_next=function($){switch(w){case 1:case 2:case 3:var B=3;break;default:B=w}var q=w;w=B;try{return $()}finally{w=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function($,B){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var q=w;w=$;try{return B()}finally{w=q}},r.unstable_scheduleCallback=function($,B,q){var x=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?x+q:x):q=x,$){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=q+M,$={id:y++,callback:B,priorityLevel:$,startTime:q,expirationTime:M,sortIndex:-1},q>x?($.sortIndex=q,e(g,$),n(m)===null&&$===n(g)&&(j?(Q(fe),fe=-1):j=!0,X(H,q-x))):($.sortIndex=M,e(m,$),b||R||(b=!0,pe(Y))),$},r.unstable_shouldYield=Ye,r.unstable_wrapCallback=function($){var B=w;return function(){var q=w;w=B;try{return $.apply(this,arguments)}finally{w=q}}}})(Eu)),Eu}var _m;function v0(){return _m||(_m=1,Cu.exports=g0()),Cu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function _0(){if(ym)return Nt;ym=1;var r=gd(),e=v0();function n(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(t,i){u(t,i),u(t+"Capture",i)}function u(t,i){for(o[t]=i,t=0;t<i.length;t++)s.add(i[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},_={};function w(t){return m.call(_,t)?!0:m.call(y,t)?!1:g.test(t)?_[t]=!0:(y[t]=!0,!1)}function R(t,i,l,c){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b(t,i,l,c){if(i===null||typeof i>"u"||R(t,i,l,c))return!0;if(c)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function j(t,i,l,c,d,h,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=l,this.propertyName=t,this.type=i,this.sanitizeURL=h,this.removeEmptyString=v}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){O[t]=new j(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];O[i]=new j(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){O[t]=new j(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){O[t]=new j(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){O[t]=new j(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){O[t]=new j(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){O[t]=new j(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){O[t]=new j(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){O[t]=new j(t,5,!1,t.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function A(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(Q,A);O[i]=new j(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(Q,A);O[i]=new j(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(Q,A);O[i]=new j(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){O[t]=new j(t,1,!1,t.toLowerCase(),null,!1,!1)}),O.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){O[t]=new j(t,1,!1,t.toLowerCase(),null,!0,!0)});function G(t,i,l,c){var d=O.hasOwnProperty(i)?O[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(b(i,l,d,c)&&(l=null),c||d===null?w(i)&&(l===null?t.removeAttribute(i):t.setAttribute(i,""+l)):d.mustUseProperty?t[d.propertyName]=l===null?d.type===3?!1:"":l:(i=d.attributeName,c=d.attributeNamespace,l===null?t.removeAttribute(i):(d=d.type,l=d===3||d===4&&l===!0?"":""+l,c?t.setAttributeNS(c,i,l):t.setAttribute(i,l))))}var H=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),ee=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),Ce=Symbol.for("react.profiler"),Pe=Symbol.for("react.provider"),Ye=Symbol.for("react.context"),Ge=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),$=Symbol.iterator;function B(t){return t===null||typeof t!="object"?null:(t=$&&t[$]||t["@@iterator"],typeof t=="function"?t:null)}var q=Object.assign,x;function M(t){if(x===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);x=i&&i[1]||""}return`
`+x+t}var me=!1;function ve(t,i){if(!t||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(P){var c=P}Reflect.construct(t,[],i)}else{try{i.call()}catch(P){c=P}t.call(i.prototype)}else{try{throw Error()}catch(P){c=P}t()}}catch(P){if(P&&c&&typeof P.stack=="string"){for(var d=P.stack.split(`
`),h=c.stack.split(`
`),v=d.length-1,S=h.length-1;1<=v&&0<=S&&d[v]!==h[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==h[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==h[S]){var C=`
`+d[v].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=v&&0<=S);break}}}finally{me=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?M(t):""}function Ee(t){switch(t.tag){case 5:return M(t.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return t=ve(t.type,!1),t;case 11:return t=ve(t.type.render,!1),t;case 1:return t=ve(t.type,!0),t;default:return""}}function I(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case te:return"Fragment";case ee:return"Portal";case Ce:return"Profiler";case fe:return"StrictMode";case L:return"Suspense";case D:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ye:return(t.displayName||"Context")+".Consumer";case Pe:return(t._context.displayName||"Context")+".Provider";case Ge:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case re:return i=t.displayName||null,i!==null?i:I(t.type)||"Memo";case pe:i=t._payload,t=t._init;try{return I(t(i))}catch{}}return null}function se(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(i);case 8:return i===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ce(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ge(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function oe(t){var i=ge(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),c=""+t[i];if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,h.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Fe(t){t._valueTracker||(t._valueTracker=oe(t))}function tn(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var l=i.getValue(),c="";return t&&(c=ge(t)?t.checked?"true":"false":t.value),t=c,t!==l?(i.setValue(t),!0):!1}function fo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Na(t,i){var l=i.checked;return q({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function yh(t,i){var l=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;l=ce(i.value!=null?i.value:l),t._wrapperState={initialChecked:c,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function wh(t,i){i=i.checked,i!=null&&G(t,"checked",i,!1)}function Ta(t,i){wh(t,i);var l=ce(i.value),c=i.type;if(l!=null)c==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?ka(t,i.type,l):i.hasOwnProperty("defaultValue")&&ka(t,i.type,ce(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Sh(t,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,l||i===t.value||(t.value=i),t.defaultValue=i}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function ka(t,i,l){(i!=="number"||fo(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var zi=Array.isArray;function $r(t,i,l,c){if(t=t.options,i){i={};for(var d=0;d<l.length;d++)i["$"+l[d]]=!0;for(l=0;l<t.length;l++)d=i.hasOwnProperty("$"+t[l].value),t[l].selected!==d&&(t[l].selected=d),d&&c&&(t[l].defaultSelected=!0)}else{for(l=""+ce(l),i=null,d=0;d<t.length;d++){if(t[d].value===l){t[d].selected=!0,c&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function Pa(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return q({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ch(t,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(n(92));if(zi(l)){if(1<l.length)throw Error(n(93));l=l[0]}i=l}i==null&&(i=""),l=i}t._wrapperState={initialValue:ce(l)}}function Eh(t,i){var l=ce(i.value),c=ce(i.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),i.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),c!=null&&(t.defaultValue=""+c)}function xh(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Ih(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Ih(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var po,Nh=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,c,d){MSApp.execUnsafeLocalFunction(function(){return t(i,l,c,d)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(po=po||document.createElement("div"),po.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=po.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function $i(t,i){if(i){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=i;return}}t.textContent=i}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},my=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(t){my.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Bi[i]=Bi[t]})});function Th(t,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Bi.hasOwnProperty(t)&&Bi[t]?(""+i).trim():i+"px"}function kh(t,i){t=t.style;for(var l in i)if(i.hasOwnProperty(l)){var c=l.indexOf("--")===0,d=Th(l,i[l],c);l==="float"&&(l="cssFloat"),c?t.setProperty(l,d):t[l]=d}}var gy=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aa(t,i){if(i){if(gy[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function ba(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Da=null;function Oa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ja=null,Br=null,Wr=null;function Ph(t){if(t=us(t)){if(typeof ja!="function")throw Error(n(280));var i=t.stateNode;i&&(i=Mo(i),ja(t.stateNode,t.type,i))}}function Rh(t){Br?Wr?Wr.push(t):Wr=[t]:Br=t}function Ah(){if(Br){var t=Br,i=Wr;if(Wr=Br=null,Ph(t),i)for(t=0;t<i.length;t++)Ph(i[t])}}function bh(t,i){return t(i)}function Dh(){}var La=!1;function Oh(t,i,l){if(La)return t(i,l);La=!0;try{return bh(t,i,l)}finally{La=!1,(Br!==null||Wr!==null)&&(Dh(),Ah())}}function Wi(t,i){var l=t.stateNode;if(l===null)return null;var c=Mo(l);if(c===null)return null;l=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(n(231,i,typeof l));return l}var Ma=!1;if(p)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{Ma=!1}function vy(t,i,l,c,d,h,v,S,C){var P=Array.prototype.slice.call(arguments,3);try{i.apply(l,P)}catch(U){this.onError(U)}}var Hi=!1,mo=null,go=!1,Fa=null,_y={onError:function(t){Hi=!0,mo=t}};function yy(t,i,l,c,d,h,v,S,C){Hi=!1,mo=null,vy.apply(_y,arguments)}function wy(t,i,l,c,d,h,v,S,C){if(yy.apply(this,arguments),Hi){if(Hi){var P=mo;Hi=!1,mo=null}else throw Error(n(198));go||(go=!0,Fa=P)}}function hr(t){var i=t,l=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(l=i.return),t=i.return;while(t)}return i.tag===3?l:null}function jh(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function Lh(t){if(hr(t)!==t)throw Error(n(188))}function Sy(t){var i=t.alternate;if(!i){if(i=hr(t),i===null)throw Error(n(188));return i!==t?null:t}for(var l=t,c=i;;){var d=l.return;if(d===null)break;var h=d.alternate;if(h===null){if(c=d.return,c!==null){l=c;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===l)return Lh(d),t;if(h===c)return Lh(d),i;h=h.sibling}throw Error(n(188))}if(l.return!==c.return)l=d,c=h;else{for(var v=!1,S=d.child;S;){if(S===l){v=!0,l=d,c=h;break}if(S===c){v=!0,c=d,l=h;break}S=S.sibling}if(!v){for(S=h.child;S;){if(S===l){v=!0,l=h,c=d;break}if(S===c){v=!0,c=h,l=d;break}S=S.sibling}if(!v)throw Error(n(189))}}if(l.alternate!==c)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?t:i}function Mh(t){return t=Sy(t),t!==null?Fh(t):null}function Fh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Fh(t);if(i!==null)return i;t=t.sibling}return null}var Uh=e.unstable_scheduleCallback,zh=e.unstable_cancelCallback,Cy=e.unstable_shouldYield,Ey=e.unstable_requestPaint,qe=e.unstable_now,xy=e.unstable_getCurrentPriorityLevel,Ua=e.unstable_ImmediatePriority,$h=e.unstable_UserBlockingPriority,vo=e.unstable_NormalPriority,Iy=e.unstable_LowPriority,Bh=e.unstable_IdlePriority,_o=null,nn=null;function Ny(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(_o,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Py,Ty=Math.log,ky=Math.LN2;function Py(t){return t>>>=0,t===0?32:31-(Ty(t)/ky|0)|0}var yo=64,wo=4194304;function Gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function So(t,i){var l=t.pendingLanes;if(l===0)return 0;var c=0,d=t.suspendedLanes,h=t.pingedLanes,v=l&268435455;if(v!==0){var S=v&~d;S!==0?c=Gi(S):(h&=v,h!==0&&(c=Gi(h)))}else v=l&~d,v!==0?c=Gi(v):h!==0&&(c=Gi(h));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,h=i&-i,d>=h||d===16&&(h&4194240)!==0))return i;if((c&4)!==0&&(c|=l&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=c;0<i;)l=31-zt(i),d=1<<l,c|=t[l],i&=~d;return c}function Ry(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ay(t,i){for(var l=t.suspendedLanes,c=t.pingedLanes,d=t.expirationTimes,h=t.pendingLanes;0<h;){var v=31-zt(h),S=1<<v,C=d[v];C===-1?((S&l)===0||(S&c)!==0)&&(d[v]=Ry(S,i)):C<=i&&(t.expiredLanes|=S),h&=~S}}function za(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wh(){var t=yo;return yo<<=1,(yo&4194240)===0&&(yo=64),t}function $a(t){for(var i=[],l=0;31>l;l++)i.push(t);return i}function qi(t,i,l){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-zt(i),t[i]=l}function by(t,i){var l=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<l;){var d=31-zt(l),h=1<<d;i[d]=0,c[d]=-1,t[d]=-1,l&=~h}}function Ba(t,i){var l=t.entangledLanes|=i;for(t=t.entanglements;l;){var c=31-zt(l),d=1<<c;d&i|t[c]&i&&(t[c]|=i),l&=~d}}var Re=0;function Vh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Hh,Wa,Gh,qh,Kh,Va=!1,Co=[],Rn=null,An=null,bn=null,Ki=new Map,Qi=new Map,Dn=[],Dy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qh(t,i){switch(t){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":Ki.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(i.pointerId)}}function Yi(t,i,l,c,d,h){return t===null||t.nativeEvent!==h?(t={blockedOn:i,domEventName:l,eventSystemFlags:c,nativeEvent:h,targetContainers:[d]},i!==null&&(i=us(i),i!==null&&Wa(i)),t):(t.eventSystemFlags|=c,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function Oy(t,i,l,c,d){switch(i){case"focusin":return Rn=Yi(Rn,t,i,l,c,d),!0;case"dragenter":return An=Yi(An,t,i,l,c,d),!0;case"mouseover":return bn=Yi(bn,t,i,l,c,d),!0;case"pointerover":var h=d.pointerId;return Ki.set(h,Yi(Ki.get(h)||null,t,i,l,c,d)),!0;case"gotpointercapture":return h=d.pointerId,Qi.set(h,Yi(Qi.get(h)||null,t,i,l,c,d)),!0}return!1}function Yh(t){var i=fr(t.target);if(i!==null){var l=hr(i);if(l!==null){if(i=l.tag,i===13){if(i=jh(l),i!==null){t.blockedOn=i,Kh(t.priority,function(){Gh(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eo(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var l=Ga(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var c=new l.constructor(l.type,l);Da=c,l.target.dispatchEvent(c),Da=null}else return i=us(l),i!==null&&Wa(i),t.blockedOn=l,!1;i.shift()}return!0}function Jh(t,i,l){Eo(t)&&l.delete(i)}function jy(){Va=!1,Rn!==null&&Eo(Rn)&&(Rn=null),An!==null&&Eo(An)&&(An=null),bn!==null&&Eo(bn)&&(bn=null),Ki.forEach(Jh),Qi.forEach(Jh)}function Ji(t,i){t.blockedOn===i&&(t.blockedOn=null,Va||(Va=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jy)))}function Xi(t){function i(d){return Ji(d,t)}if(0<Co.length){Ji(Co[0],t);for(var l=1;l<Co.length;l++){var c=Co[l];c.blockedOn===t&&(c.blockedOn=null)}}for(Rn!==null&&Ji(Rn,t),An!==null&&Ji(An,t),bn!==null&&Ji(bn,t),Ki.forEach(i),Qi.forEach(i),l=0;l<Dn.length;l++)c=Dn[l],c.blockedOn===t&&(c.blockedOn=null);for(;0<Dn.length&&(l=Dn[0],l.blockedOn===null);)Yh(l),l.blockedOn===null&&Dn.shift()}var Vr=H.ReactCurrentBatchConfig,xo=!0;function Ly(t,i,l,c){var d=Re,h=Vr.transition;Vr.transition=null;try{Re=1,Ha(t,i,l,c)}finally{Re=d,Vr.transition=h}}function My(t,i,l,c){var d=Re,h=Vr.transition;Vr.transition=null;try{Re=4,Ha(t,i,l,c)}finally{Re=d,Vr.transition=h}}function Ha(t,i,l,c){if(xo){var d=Ga(t,i,l,c);if(d===null)cc(t,i,c,Io,l),Qh(t,c);else if(Oy(d,t,i,l,c))c.stopPropagation();else if(Qh(t,c),i&4&&-1<Dy.indexOf(t)){for(;d!==null;){var h=us(d);if(h!==null&&Hh(h),h=Ga(t,i,l,c),h===null&&cc(t,i,c,Io,l),h===d)break;d=h}d!==null&&c.stopPropagation()}else cc(t,i,c,null,l)}}var Io=null;function Ga(t,i,l,c){if(Io=null,t=Oa(c),t=fr(t),t!==null)if(i=hr(t),i===null)t=null;else if(l=i.tag,l===13){if(t=jh(i),t!==null)return t;t=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return Io=t,null}function Xh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xy()){case Ua:return 1;case $h:return 4;case vo:case Iy:return 16;case Bh:return 536870912;default:return 16}default:return 16}}var On=null,qa=null,No=null;function Zh(){if(No)return No;var t,i=qa,l=i.length,c,d="value"in On?On.value:On.textContent,h=d.length;for(t=0;t<l&&i[t]===d[t];t++);var v=l-t;for(c=1;c<=v&&i[l-c]===d[h-c];c++);return No=d.slice(t,1<c?1-c:void 0)}function To(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ko(){return!0}function ef(){return!1}function kt(t){function i(l,c,d,h,v){this._reactName=l,this._targetInst=d,this.type=c,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(l=t[S],this[S]=l?l(h):h[S]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ko:ef,this.isPropagationStopped=ef,this}return q(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),i}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ka=kt(Hr),Zi=q({},Hr,{view:0,detail:0}),Fy=kt(Zi),Qa,Ya,es,Po=q({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==es&&(es&&t.type==="mousemove"?(Qa=t.screenX-es.screenX,Ya=t.screenY-es.screenY):Ya=Qa=0,es=t),Qa)},movementY:function(t){return"movementY"in t?t.movementY:Ya}}),tf=kt(Po),Uy=q({},Po,{dataTransfer:0}),zy=kt(Uy),$y=q({},Zi,{relatedTarget:0}),Ja=kt($y),By=q({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wy=kt(By),Vy=q({},Hr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hy=kt(Vy),Gy=q({},Hr,{data:0}),nf=kt(Gy),qy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ky={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yy(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Qy[t])?!!i[t]:!1}function Xa(){return Yy}var Jy=q({},Zi,{key:function(t){if(t.key){var i=qy[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=To(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ky[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xa,charCode:function(t){return t.type==="keypress"?To(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?To(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xy=kt(Jy),Zy=q({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rf=kt(Zy),ew=q({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xa}),tw=kt(ew),nw=q({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rw=kt(nw),iw=q({},Po,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sw=kt(iw),ow=[9,13,27,32],Za=p&&"CompositionEvent"in window,ts=null;p&&"documentMode"in document&&(ts=document.documentMode);var lw=p&&"TextEvent"in window&&!ts,sf=p&&(!Za||ts&&8<ts&&11>=ts),of=" ",lf=!1;function af(t,i){switch(t){case"keyup":return ow.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gr=!1;function aw(t,i){switch(t){case"compositionend":return cf(i);case"keypress":return i.which!==32?null:(lf=!0,of);case"textInput":return t=i.data,t===of&&lf?null:t;default:return null}}function cw(t,i){if(Gr)return t==="compositionend"||!Za&&af(t,i)?(t=Zh(),No=qa=On=null,Gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return sf&&i.locale!=="ko"?null:i.data;default:return null}}var uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!uw[t.type]:i==="textarea"}function df(t,i,l,c){Rh(c),i=Oo(i,"onChange"),0<i.length&&(l=new Ka("onChange","change",null,l,c),t.push({event:l,listeners:i}))}var ns=null,rs=null;function dw(t){Pf(t,0)}function Ro(t){var i=Jr(t);if(tn(i))return t}function hw(t,i){if(t==="change")return i}var hf=!1;if(p){var ec;if(p){var tc="oninput"in document;if(!tc){var ff=document.createElement("div");ff.setAttribute("oninput","return;"),tc=typeof ff.oninput=="function"}ec=tc}else ec=!1;hf=ec&&(!document.documentMode||9<document.documentMode)}function pf(){ns&&(ns.detachEvent("onpropertychange",mf),rs=ns=null)}function mf(t){if(t.propertyName==="value"&&Ro(rs)){var i=[];df(i,rs,t,Oa(t)),Oh(dw,i)}}function fw(t,i,l){t==="focusin"?(pf(),ns=i,rs=l,ns.attachEvent("onpropertychange",mf)):t==="focusout"&&pf()}function pw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ro(rs)}function mw(t,i){if(t==="click")return Ro(i)}function gw(t,i){if(t==="input"||t==="change")return Ro(i)}function vw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var $t=typeof Object.is=="function"?Object.is:vw;function is(t,i){if($t(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var l=Object.keys(t),c=Object.keys(i);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var d=l[c];if(!m.call(i,d)||!$t(t[d],i[d]))return!1}return!0}function gf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vf(t,i){var l=gf(t);t=0;for(var c;l;){if(l.nodeType===3){if(c=t+l.textContent.length,t<=i&&c>=i)return{node:l,offset:i-t};t=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=gf(l)}}function _f(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?_f(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function yf(){for(var t=window,i=fo();i instanceof t.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)t=i.contentWindow;else break;i=fo(t.document)}return i}function nc(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function _w(t){var i=yf(),l=t.focusedElem,c=t.selectionRange;if(i!==l&&l&&l.ownerDocument&&_f(l.ownerDocument.documentElement,l)){if(c!==null&&nc(l)){if(i=c.start,t=c.end,t===void 0&&(t=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(t,l.value.length);else if(t=(i=l.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var d=l.textContent.length,h=Math.min(c.start,d);c=c.end===void 0?h:Math.min(c.end,d),!t.extend&&h>c&&(d=c,c=h,h=d),d=vf(l,h);var v=vf(l,c);d&&v&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),t.removeAllRanges(),h>c?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=l;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)t=i[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yw=p&&"documentMode"in document&&11>=document.documentMode,qr=null,rc=null,ss=null,ic=!1;function wf(t,i,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ic||qr==null||qr!==fo(c)||(c=qr,"selectionStart"in c&&nc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ss&&is(ss,c)||(ss=c,c=Oo(rc,"onSelect"),0<c.length&&(i=new Ka("onSelect","select",null,i,l),t.push({event:i,listeners:c}),i.target=qr)))}function Ao(t,i){var l={};return l[t.toLowerCase()]=i.toLowerCase(),l["Webkit"+t]="webkit"+i,l["Moz"+t]="moz"+i,l}var Kr={animationend:Ao("Animation","AnimationEnd"),animationiteration:Ao("Animation","AnimationIteration"),animationstart:Ao("Animation","AnimationStart"),transitionend:Ao("Transition","TransitionEnd")},sc={},Sf={};p&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function bo(t){if(sc[t])return sc[t];if(!Kr[t])return t;var i=Kr[t],l;for(l in i)if(i.hasOwnProperty(l)&&l in Sf)return sc[t]=i[l];return t}var Cf=bo("animationend"),Ef=bo("animationiteration"),xf=bo("animationstart"),If=bo("transitionend"),Nf=new Map,Tf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(t,i){Nf.set(t,i),a(i,[t])}for(var oc=0;oc<Tf.length;oc++){var lc=Tf[oc],ww=lc.toLowerCase(),Sw=lc[0].toUpperCase()+lc.slice(1);jn(ww,"on"+Sw)}jn(Cf,"onAnimationEnd"),jn(Ef,"onAnimationIteration"),jn(xf,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(If,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cw=new Set("cancel close invalid load scroll toggle".split(" ").concat(os));function kf(t,i,l){var c=t.type||"unknown-event";t.currentTarget=l,wy(c,i,void 0,t),t.currentTarget=null}function Pf(t,i){i=(i&4)!==0;for(var l=0;l<t.length;l++){var c=t[l],d=c.event;c=c.listeners;e:{var h=void 0;if(i)for(var v=c.length-1;0<=v;v--){var S=c[v],C=S.instance,P=S.currentTarget;if(S=S.listener,C!==h&&d.isPropagationStopped())break e;kf(d,S,P),h=C}else for(v=0;v<c.length;v++){if(S=c[v],C=S.instance,P=S.currentTarget,S=S.listener,C!==h&&d.isPropagationStopped())break e;kf(d,S,P),h=C}}}if(go)throw t=Fa,go=!1,Fa=null,t}function Le(t,i){var l=i[mc];l===void 0&&(l=i[mc]=new Set);var c=t+"__bubble";l.has(c)||(Rf(i,t,2,!1),l.add(c))}function ac(t,i,l){var c=0;i&&(c|=4),Rf(l,t,c,i)}var Do="_reactListening"+Math.random().toString(36).slice(2);function ls(t){if(!t[Do]){t[Do]=!0,s.forEach(function(l){l!=="selectionchange"&&(Cw.has(l)||ac(l,!1,t),ac(l,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Do]||(i[Do]=!0,ac("selectionchange",!1,i))}}function Rf(t,i,l,c){switch(Xh(i)){case 1:var d=Ly;break;case 4:d=My;break;default:d=Ha}l=d.bind(null,i,l,t),d=void 0,!Ma||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?t.addEventListener(i,l,{capture:!0,passive:d}):t.addEventListener(i,l,!0):d!==void 0?t.addEventListener(i,l,{passive:d}):t.addEventListener(i,l,!1)}function cc(t,i,l,c,d){var h=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var C=v.tag;if((C===3||C===4)&&(C=v.stateNode.containerInfo,C===d||C.nodeType===8&&C.parentNode===d))return;v=v.return}for(;S!==null;){if(v=fr(S),v===null)return;if(C=v.tag,C===5||C===6){c=h=v;continue e}S=S.parentNode}}c=c.return}Oh(function(){var P=h,U=Oa(l),z=[];e:{var F=Nf.get(t);if(F!==void 0){var K=Ka,Z=t;switch(t){case"keypress":if(To(l)===0)break e;case"keydown":case"keyup":K=Xy;break;case"focusin":Z="focus",K=Ja;break;case"focusout":Z="blur",K=Ja;break;case"beforeblur":case"afterblur":K=Ja;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=zy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=tw;break;case Cf:case Ef:case xf:K=Wy;break;case If:K=rw;break;case"scroll":K=Fy;break;case"wheel":K=sw;break;case"copy":case"cut":case"paste":K=Hy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=rf}var ne=(i&4)!==0,Ke=!ne&&t==="scroll",N=ne?F!==null?F+"Capture":null:F;ne=[];for(var E=P,T;E!==null;){T=E;var W=T.stateNode;if(T.tag===5&&W!==null&&(T=W,N!==null&&(W=Wi(E,N),W!=null&&ne.push(as(E,W,T)))),Ke)break;E=E.return}0<ne.length&&(F=new K(F,Z,null,l,U),z.push({event:F,listeners:ne}))}}if((i&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",F&&l!==Da&&(Z=l.relatedTarget||l.fromElement)&&(fr(Z)||Z[hn]))break e;if((K||F)&&(F=U.window===U?U:(F=U.ownerDocument)?F.defaultView||F.parentWindow:window,K?(Z=l.relatedTarget||l.toElement,K=P,Z=Z?fr(Z):null,Z!==null&&(Ke=hr(Z),Z!==Ke||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(K=null,Z=P),K!==Z)){if(ne=tf,W="onMouseLeave",N="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(ne=rf,W="onPointerLeave",N="onPointerEnter",E="pointer"),Ke=K==null?F:Jr(K),T=Z==null?F:Jr(Z),F=new ne(W,E+"leave",K,l,U),F.target=Ke,F.relatedTarget=T,W=null,fr(U)===P&&(ne=new ne(N,E+"enter",Z,l,U),ne.target=T,ne.relatedTarget=Ke,W=ne),Ke=W,K&&Z)t:{for(ne=K,N=Z,E=0,T=ne;T;T=Qr(T))E++;for(T=0,W=N;W;W=Qr(W))T++;for(;0<E-T;)ne=Qr(ne),E--;for(;0<T-E;)N=Qr(N),T--;for(;E--;){if(ne===N||N!==null&&ne===N.alternate)break t;ne=Qr(ne),N=Qr(N)}ne=null}else ne=null;K!==null&&Af(z,F,K,ne,!1),Z!==null&&Ke!==null&&Af(z,Ke,Z,ne,!0)}}e:{if(F=P?Jr(P):window,K=F.nodeName&&F.nodeName.toLowerCase(),K==="select"||K==="input"&&F.type==="file")var ie=hw;else if(uf(F))if(hf)ie=gw;else{ie=pw;var le=fw}else(K=F.nodeName)&&K.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(ie=mw);if(ie&&(ie=ie(t,P))){df(z,ie,l,U);break e}le&&le(t,F,P),t==="focusout"&&(le=F._wrapperState)&&le.controlled&&F.type==="number"&&ka(F,"number",F.value)}switch(le=P?Jr(P):window,t){case"focusin":(uf(le)||le.contentEditable==="true")&&(qr=le,rc=P,ss=null);break;case"focusout":ss=rc=qr=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,wf(z,l,U);break;case"selectionchange":if(yw)break;case"keydown":case"keyup":wf(z,l,U)}var ae;if(Za)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Gr?af(t,l)&&(de="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(de="onCompositionStart");de&&(sf&&l.locale!=="ko"&&(Gr||de!=="onCompositionStart"?de==="onCompositionEnd"&&Gr&&(ae=Zh()):(On=U,qa="value"in On?On.value:On.textContent,Gr=!0)),le=Oo(P,de),0<le.length&&(de=new nf(de,t,null,l,U),z.push({event:de,listeners:le}),ae?de.data=ae:(ae=cf(l),ae!==null&&(de.data=ae)))),(ae=lw?aw(t,l):cw(t,l))&&(P=Oo(P,"onBeforeInput"),0<P.length&&(U=new nf("onBeforeInput","beforeinput",null,l,U),z.push({event:U,listeners:P}),U.data=ae))}Pf(z,i)})}function as(t,i,l){return{instance:t,listener:i,currentTarget:l}}function Oo(t,i){for(var l=i+"Capture",c=[];t!==null;){var d=t,h=d.stateNode;d.tag===5&&h!==null&&(d=h,h=Wi(t,l),h!=null&&c.unshift(as(t,h,d)),h=Wi(t,i),h!=null&&c.push(as(t,h,d))),t=t.return}return c}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Af(t,i,l,c,d){for(var h=i._reactName,v=[];l!==null&&l!==c;){var S=l,C=S.alternate,P=S.stateNode;if(C!==null&&C===c)break;S.tag===5&&P!==null&&(S=P,d?(C=Wi(l,h),C!=null&&v.unshift(as(l,C,S))):d||(C=Wi(l,h),C!=null&&v.push(as(l,C,S)))),l=l.return}v.length!==0&&t.push({event:i,listeners:v})}var Ew=/\r\n?/g,xw=/\u0000|\uFFFD/g;function bf(t){return(typeof t=="string"?t:""+t).replace(Ew,`
`).replace(xw,"")}function jo(t,i,l){if(i=bf(i),bf(t)!==i&&l)throw Error(n(425))}function Lo(){}var uc=null,dc=null;function hc(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fc=typeof setTimeout=="function"?setTimeout:void 0,Iw=typeof clearTimeout=="function"?clearTimeout:void 0,Df=typeof Promise=="function"?Promise:void 0,Nw=typeof queueMicrotask=="function"?queueMicrotask:typeof Df<"u"?function(t){return Df.resolve(null).then(t).catch(Tw)}:fc;function Tw(t){setTimeout(function(){throw t})}function pc(t,i){var l=i,c=0;do{var d=l.nextSibling;if(t.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(c===0){t.removeChild(d),Xi(i);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=d}while(l);Xi(i)}function Ln(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Of(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return t;i--}else l==="/$"&&i++}t=t.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),rn="__reactFiber$"+Yr,cs="__reactProps$"+Yr,hn="__reactContainer$"+Yr,mc="__reactEvents$"+Yr,kw="__reactListeners$"+Yr,Pw="__reactHandles$"+Yr;function fr(t){var i=t[rn];if(i)return i;for(var l=t.parentNode;l;){if(i=l[hn]||l[rn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(t=Of(t);t!==null;){if(l=t[rn])return l;t=Of(t)}return i}t=l,l=t.parentNode}return null}function us(t){return t=t[rn]||t[hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Mo(t){return t[cs]||null}var gc=[],Xr=-1;function Mn(t){return{current:t}}function Me(t){0>Xr||(t.current=gc[Xr],gc[Xr]=null,Xr--)}function De(t,i){Xr++,gc[Xr]=t.current,t.current=i}var Fn={},ut=Mn(Fn),St=Mn(!1),pr=Fn;function Zr(t,i){var l=t.type.contextTypes;if(!l)return Fn;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},h;for(h in l)d[h]=i[h];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=d),d}function Ct(t){return t=t.childContextTypes,t!=null}function Fo(){Me(St),Me(ut)}function jf(t,i,l){if(ut.current!==Fn)throw Error(n(168));De(ut,i),De(St,l)}function Lf(t,i,l){var c=t.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return l;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(n(108,se(t)||"Unknown",d));return q({},l,c)}function Uo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fn,pr=ut.current,De(ut,t),De(St,St.current),!0}function Mf(t,i,l){var c=t.stateNode;if(!c)throw Error(n(169));l?(t=Lf(t,i,pr),c.__reactInternalMemoizedMergedChildContext=t,Me(St),Me(ut),De(ut,t)):Me(St),De(St,l)}var fn=null,zo=!1,vc=!1;function Ff(t){fn===null?fn=[t]:fn.push(t)}function Rw(t){zo=!0,Ff(t)}function Un(){if(!vc&&fn!==null){vc=!0;var t=0,i=Re;try{var l=fn;for(Re=1;t<l.length;t++){var c=l[t];do c=c(!0);while(c!==null)}fn=null,zo=!1}catch(d){throw fn!==null&&(fn=fn.slice(t+1)),Uh(Ua,Un),d}finally{Re=i,vc=!1}}return null}var ei=[],ti=0,$o=null,Bo=0,bt=[],Dt=0,mr=null,pn=1,mn="";function gr(t,i){ei[ti++]=Bo,ei[ti++]=$o,$o=t,Bo=i}function Uf(t,i,l){bt[Dt++]=pn,bt[Dt++]=mn,bt[Dt++]=mr,mr=t;var c=pn;t=mn;var d=32-zt(c)-1;c&=~(1<<d),l+=1;var h=32-zt(i)+d;if(30<h){var v=d-d%5;h=(c&(1<<v)-1).toString(32),c>>=v,d-=v,pn=1<<32-zt(i)+d|l<<d|c,mn=h+t}else pn=1<<h|l<<d|c,mn=t}function _c(t){t.return!==null&&(gr(t,1),Uf(t,1,0))}function yc(t){for(;t===$o;)$o=ei[--ti],ei[ti]=null,Bo=ei[--ti],ei[ti]=null;for(;t===mr;)mr=bt[--Dt],bt[Dt]=null,mn=bt[--Dt],bt[Dt]=null,pn=bt[--Dt],bt[Dt]=null}var Pt=null,Rt=null,Ue=!1,Bt=null;function zf(t,i){var l=Mt(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=t,i=t.deletions,i===null?(t.deletions=[l],t.flags|=16):i.push(l)}function $f(t,i){switch(t.tag){case 5:var l=t.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Pt=t,Rt=Ln(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Pt=t,Rt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=mr!==null?{id:pn,overflow:mn}:null,t.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Mt(18,null,null,0),l.stateNode=i,l.return=t,t.child=l,Pt=t,Rt=null,!0):!1;default:return!1}}function wc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sc(t){if(Ue){var i=Rt;if(i){var l=i;if(!$f(t,i)){if(wc(t))throw Error(n(418));i=Ln(l.nextSibling);var c=Pt;i&&$f(t,i)?zf(c,l):(t.flags=t.flags&-4097|2,Ue=!1,Pt=t)}}else{if(wc(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ue=!1,Pt=t}}}function Bf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function Wo(t){if(t!==Pt)return!1;if(!Ue)return Bf(t),Ue=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!hc(t.type,t.memoizedProps)),i&&(i=Rt)){if(wc(t))throw Wf(),Error(n(418));for(;i;)zf(t,i),i=Ln(i.nextSibling)}if(Bf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(i===0){Rt=Ln(t.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}t=t.nextSibling}Rt=null}}else Rt=Pt?Ln(t.stateNode.nextSibling):null;return!0}function Wf(){for(var t=Rt;t;)t=Ln(t.nextSibling)}function ni(){Rt=Pt=null,Ue=!1}function Cc(t){Bt===null?Bt=[t]:Bt.push(t)}var Aw=H.ReactCurrentBatchConfig;function ds(t,i,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var c=l.stateNode}if(!c)throw Error(n(147,t));var d=c,h=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===h?i.ref:(i=function(v){var S=d.refs;v===null?delete S[h]:S[h]=v},i._stringRef=h,i)}if(typeof t!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,t))}return t}function Vo(t,i){throw t=Object.prototype.toString.call(i),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Vf(t){var i=t._init;return i(t._payload)}function Hf(t){function i(N,E){if(t){var T=N.deletions;T===null?(N.deletions=[E],N.flags|=16):T.push(E)}}function l(N,E){if(!t)return null;for(;E!==null;)i(N,E),E=E.sibling;return null}function c(N,E){for(N=new Map;E!==null;)E.key!==null?N.set(E.key,E):N.set(E.index,E),E=E.sibling;return N}function d(N,E){return N=qn(N,E),N.index=0,N.sibling=null,N}function h(N,E,T){return N.index=T,t?(T=N.alternate,T!==null?(T=T.index,T<E?(N.flags|=2,E):T):(N.flags|=2,E)):(N.flags|=1048576,E)}function v(N){return t&&N.alternate===null&&(N.flags|=2),N}function S(N,E,T,W){return E===null||E.tag!==6?(E=fu(T,N.mode,W),E.return=N,E):(E=d(E,T),E.return=N,E)}function C(N,E,T,W){var ie=T.type;return ie===te?U(N,E,T.props.children,W,T.key):E!==null&&(E.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===pe&&Vf(ie)===E.type)?(W=d(E,T.props),W.ref=ds(N,E,T),W.return=N,W):(W=pl(T.type,T.key,T.props,null,N.mode,W),W.ref=ds(N,E,T),W.return=N,W)}function P(N,E,T,W){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=pu(T,N.mode,W),E.return=N,E):(E=d(E,T.children||[]),E.return=N,E)}function U(N,E,T,W,ie){return E===null||E.tag!==7?(E=xr(T,N.mode,W,ie),E.return=N,E):(E=d(E,T),E.return=N,E)}function z(N,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=fu(""+E,N.mode,T),E.return=N,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Y:return T=pl(E.type,E.key,E.props,null,N.mode,T),T.ref=ds(N,null,E),T.return=N,T;case ee:return E=pu(E,N.mode,T),E.return=N,E;case pe:var W=E._init;return z(N,W(E._payload),T)}if(zi(E)||B(E))return E=xr(E,N.mode,T,null),E.return=N,E;Vo(N,E)}return null}function F(N,E,T,W){var ie=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return ie!==null?null:S(N,E,""+T,W);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Y:return T.key===ie?C(N,E,T,W):null;case ee:return T.key===ie?P(N,E,T,W):null;case pe:return ie=T._init,F(N,E,ie(T._payload),W)}if(zi(T)||B(T))return ie!==null?null:U(N,E,T,W,null);Vo(N,T)}return null}function K(N,E,T,W,ie){if(typeof W=="string"&&W!==""||typeof W=="number")return N=N.get(T)||null,S(E,N,""+W,ie);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Y:return N=N.get(W.key===null?T:W.key)||null,C(E,N,W,ie);case ee:return N=N.get(W.key===null?T:W.key)||null,P(E,N,W,ie);case pe:var le=W._init;return K(N,E,T,le(W._payload),ie)}if(zi(W)||B(W))return N=N.get(T)||null,U(E,N,W,ie,null);Vo(E,W)}return null}function Z(N,E,T,W){for(var ie=null,le=null,ae=E,de=E=0,rt=null;ae!==null&&de<T.length;de++){ae.index>de?(rt=ae,ae=null):rt=ae.sibling;var Ie=F(N,ae,T[de],W);if(Ie===null){ae===null&&(ae=rt);break}t&&ae&&Ie.alternate===null&&i(N,ae),E=h(Ie,E,de),le===null?ie=Ie:le.sibling=Ie,le=Ie,ae=rt}if(de===T.length)return l(N,ae),Ue&&gr(N,de),ie;if(ae===null){for(;de<T.length;de++)ae=z(N,T[de],W),ae!==null&&(E=h(ae,E,de),le===null?ie=ae:le.sibling=ae,le=ae);return Ue&&gr(N,de),ie}for(ae=c(N,ae);de<T.length;de++)rt=K(ae,N,de,T[de],W),rt!==null&&(t&&rt.alternate!==null&&ae.delete(rt.key===null?de:rt.key),E=h(rt,E,de),le===null?ie=rt:le.sibling=rt,le=rt);return t&&ae.forEach(function(Kn){return i(N,Kn)}),Ue&&gr(N,de),ie}function ne(N,E,T,W){var ie=B(T);if(typeof ie!="function")throw Error(n(150));if(T=ie.call(T),T==null)throw Error(n(151));for(var le=ie=null,ae=E,de=E=0,rt=null,Ie=T.next();ae!==null&&!Ie.done;de++,Ie=T.next()){ae.index>de?(rt=ae,ae=null):rt=ae.sibling;var Kn=F(N,ae,Ie.value,W);if(Kn===null){ae===null&&(ae=rt);break}t&&ae&&Kn.alternate===null&&i(N,ae),E=h(Kn,E,de),le===null?ie=Kn:le.sibling=Kn,le=Kn,ae=rt}if(Ie.done)return l(N,ae),Ue&&gr(N,de),ie;if(ae===null){for(;!Ie.done;de++,Ie=T.next())Ie=z(N,Ie.value,W),Ie!==null&&(E=h(Ie,E,de),le===null?ie=Ie:le.sibling=Ie,le=Ie);return Ue&&gr(N,de),ie}for(ae=c(N,ae);!Ie.done;de++,Ie=T.next())Ie=K(ae,N,de,Ie.value,W),Ie!==null&&(t&&Ie.alternate!==null&&ae.delete(Ie.key===null?de:Ie.key),E=h(Ie,E,de),le===null?ie=Ie:le.sibling=Ie,le=Ie);return t&&ae.forEach(function(u0){return i(N,u0)}),Ue&&gr(N,de),ie}function Ke(N,E,T,W){if(typeof T=="object"&&T!==null&&T.type===te&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Y:e:{for(var ie=T.key,le=E;le!==null;){if(le.key===ie){if(ie=T.type,ie===te){if(le.tag===7){l(N,le.sibling),E=d(le,T.props.children),E.return=N,N=E;break e}}else if(le.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===pe&&Vf(ie)===le.type){l(N,le.sibling),E=d(le,T.props),E.ref=ds(N,le,T),E.return=N,N=E;break e}l(N,le);break}else i(N,le);le=le.sibling}T.type===te?(E=xr(T.props.children,N.mode,W,T.key),E.return=N,N=E):(W=pl(T.type,T.key,T.props,null,N.mode,W),W.ref=ds(N,E,T),W.return=N,N=W)}return v(N);case ee:e:{for(le=T.key;E!==null;){if(E.key===le)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){l(N,E.sibling),E=d(E,T.children||[]),E.return=N,N=E;break e}else{l(N,E);break}else i(N,E);E=E.sibling}E=pu(T,N.mode,W),E.return=N,N=E}return v(N);case pe:return le=T._init,Ke(N,E,le(T._payload),W)}if(zi(T))return Z(N,E,T,W);if(B(T))return ne(N,E,T,W);Vo(N,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(l(N,E.sibling),E=d(E,T),E.return=N,N=E):(l(N,E),E=fu(T,N.mode,W),E.return=N,N=E),v(N)):l(N,E)}return Ke}var ri=Hf(!0),Gf=Hf(!1),Ho=Mn(null),Go=null,ii=null,Ec=null;function xc(){Ec=ii=Go=null}function Ic(t){var i=Ho.current;Me(Ho),t._currentValue=i}function Nc(t,i,l){for(;t!==null;){var c=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),t===l)break;t=t.return}}function si(t,i){Go=t,Ec=ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(Et=!0),t.firstContext=null)}function Ot(t){var i=t._currentValue;if(Ec!==t)if(t={context:t,memoizedValue:i,next:null},ii===null){if(Go===null)throw Error(n(308));ii=t,Go.dependencies={lanes:0,firstContext:t}}else ii=ii.next=t;return i}var vr=null;function Tc(t){vr===null?vr=[t]:vr.push(t)}function qf(t,i,l,c){var d=i.interleaved;return d===null?(l.next=l,Tc(i)):(l.next=d.next,d.next=l),i.interleaved=l,gn(t,c)}function gn(t,i){t.lanes|=i;var l=t.alternate;for(l!==null&&(l.lanes|=i),l=t,t=t.return;t!==null;)t.childLanes|=i,l=t.alternate,l!==null&&(l.childLanes|=i),l=t,t=t.return;return l.tag===3?l.stateNode:null}var zn=!1;function kc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function $n(t,i,l){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(xe&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,gn(t,l)}return d=c.interleaved,d===null?(i.next=i,Tc(c)):(i.next=d.next,d.next=i),c.interleaved=i,gn(t,l)}function qo(t,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var c=i.lanes;c&=t.pendingLanes,l|=c,i.lanes=l,Ba(t,l)}}function Qf(t,i){var l=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var d=null,h=null;if(l=l.firstBaseUpdate,l!==null){do{var v={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};h===null?d=h=v:h=h.next=v,l=l.next}while(l!==null);h===null?d=h=i:h=h.next=i}else d=h=i;l={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:c.shared,effects:c.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=i:t.next=i,l.lastBaseUpdate=i}function Ko(t,i,l,c){var d=t.updateQueue;zn=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var C=S,P=C.next;C.next=null,v===null?h=P:v.next=P,v=C;var U=t.alternate;U!==null&&(U=U.updateQueue,S=U.lastBaseUpdate,S!==v&&(S===null?U.firstBaseUpdate=P:S.next=P,U.lastBaseUpdate=C))}if(h!==null){var z=d.baseState;v=0,U=P=C=null,S=h;do{var F=S.lane,K=S.eventTime;if((c&F)===F){U!==null&&(U=U.next={eventTime:K,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Z=t,ne=S;switch(F=i,K=l,ne.tag){case 1:if(Z=ne.payload,typeof Z=="function"){z=Z.call(K,z,F);break e}z=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ne.payload,F=typeof Z=="function"?Z.call(K,z,F):Z,F==null)break e;z=q({},z,F);break e;case 2:zn=!0}}S.callback!==null&&S.lane!==0&&(t.flags|=64,F=d.effects,F===null?d.effects=[S]:F.push(S))}else K={eventTime:K,lane:F,tag:S.tag,payload:S.payload,callback:S.callback,next:null},U===null?(P=U=K,C=z):U=U.next=K,v|=F;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;F=S,S=F.next,F.next=null,d.lastBaseUpdate=F,d.shared.pending=null}}while(!0);if(U===null&&(C=z),d.baseState=C,d.firstBaseUpdate=P,d.lastBaseUpdate=U,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else h===null&&(d.shared.lanes=0);wr|=v,t.lanes=v,t.memoizedState=z}}function Yf(t,i,l){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var c=t[i],d=c.callback;if(d!==null){if(c.callback=null,c=l,typeof d!="function")throw Error(n(191,d));d.call(c)}}}var hs={},sn=Mn(hs),fs=Mn(hs),ps=Mn(hs);function _r(t){if(t===hs)throw Error(n(174));return t}function Pc(t,i){switch(De(ps,i),De(fs,t),De(sn,hs),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ra(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=Ra(i,t)}Me(sn),De(sn,i)}function oi(){Me(sn),Me(fs),Me(ps)}function Jf(t){_r(ps.current);var i=_r(sn.current),l=Ra(i,t.type);i!==l&&(De(fs,t),De(sn,l))}function Rc(t){fs.current===t&&(Me(sn),Me(fs))}var ze=Mn(0);function Qo(t){for(var i=t;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ac=[];function bc(){for(var t=0;t<Ac.length;t++)Ac[t]._workInProgressVersionPrimary=null;Ac.length=0}var Yo=H.ReactCurrentDispatcher,Dc=H.ReactCurrentBatchConfig,yr=0,$e=null,Je=null,tt=null,Jo=!1,ms=!1,gs=0,bw=0;function dt(){throw Error(n(321))}function Oc(t,i){if(i===null)return!1;for(var l=0;l<i.length&&l<t.length;l++)if(!$t(t[l],i[l]))return!1;return!0}function jc(t,i,l,c,d,h){if(yr=h,$e=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Yo.current=t===null||t.memoizedState===null?Lw:Mw,t=l(c,d),ms){h=0;do{if(ms=!1,gs=0,25<=h)throw Error(n(301));h+=1,tt=Je=null,i.updateQueue=null,Yo.current=Fw,t=l(c,d)}while(ms)}if(Yo.current=el,i=Je!==null&&Je.next!==null,yr=0,tt=Je=$e=null,Jo=!1,i)throw Error(n(300));return t}function Lc(){var t=gs!==0;return gs=0,t}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?$e.memoizedState=tt=t:tt=tt.next=t,tt}function jt(){if(Je===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var i=tt===null?$e.memoizedState:tt.next;if(i!==null)tt=i,Je=t;else{if(t===null)throw Error(n(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},tt===null?$e.memoizedState=tt=t:tt=tt.next=t}return tt}function vs(t,i){return typeof i=="function"?i(t):i}function Mc(t){var i=jt(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=t;var c=Je,d=c.baseQueue,h=l.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}c.baseQueue=d=h,l.pending=null}if(d!==null){h=d.next,c=c.baseState;var S=v=null,C=null,P=h;do{var U=P.lane;if((yr&U)===U)C!==null&&(C=C.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),c=P.hasEagerState?P.eagerState:t(c,P.action);else{var z={lane:U,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};C===null?(S=C=z,v=c):C=C.next=z,$e.lanes|=U,wr|=U}P=P.next}while(P!==null&&P!==h);C===null?v=c:C.next=S,$t(c,i.memoizedState)||(Et=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=C,l.lastRenderedState=c}if(t=l.interleaved,t!==null){d=t;do h=d.lane,$e.lanes|=h,wr|=h,d=d.next;while(d!==t)}else d===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Fc(t){var i=jt(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=t;var c=l.dispatch,d=l.pending,h=i.memoizedState;if(d!==null){l.pending=null;var v=d=d.next;do h=t(h,v.action),v=v.next;while(v!==d);$t(h,i.memoizedState)||(Et=!0),i.memoizedState=h,i.baseQueue===null&&(i.baseState=h),l.lastRenderedState=h}return[h,c]}function Xf(){}function Zf(t,i){var l=$e,c=jt(),d=i(),h=!$t(c.memoizedState,d);if(h&&(c.memoizedState=d,Et=!0),c=c.queue,Uc(np.bind(null,l,c,t),[t]),c.getSnapshot!==i||h||tt!==null&&tt.memoizedState.tag&1){if(l.flags|=2048,_s(9,tp.bind(null,l,c,d,i),void 0,null),nt===null)throw Error(n(349));(yr&30)!==0||ep(l,i,d)}return d}function ep(t,i,l){t.flags|=16384,t={getSnapshot:i,value:l},i=$e.updateQueue,i===null?(i={lastEffect:null,stores:null},$e.updateQueue=i,i.stores=[t]):(l=i.stores,l===null?i.stores=[t]:l.push(t))}function tp(t,i,l,c){i.value=l,i.getSnapshot=c,rp(i)&&ip(t)}function np(t,i,l){return l(function(){rp(i)&&ip(t)})}function rp(t){var i=t.getSnapshot;t=t.value;try{var l=i();return!$t(t,l)}catch{return!0}}function ip(t){var i=gn(t,1);i!==null&&Gt(i,t,1,-1)}function sp(t){var i=on();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:t},i.queue=t,t=t.dispatch=jw.bind(null,$e,t),[i.memoizedState,t]}function _s(t,i,l,c){return t={tag:t,create:i,destroy:l,deps:c,next:null},i=$e.updateQueue,i===null?(i={lastEffect:null,stores:null},$e.updateQueue=i,i.lastEffect=t.next=t):(l=i.lastEffect,l===null?i.lastEffect=t.next=t:(c=l.next,l.next=t,t.next=c,i.lastEffect=t)),t}function op(){return jt().memoizedState}function Xo(t,i,l,c){var d=on();$e.flags|=t,d.memoizedState=_s(1|i,l,void 0,c===void 0?null:c)}function Zo(t,i,l,c){var d=jt();c=c===void 0?null:c;var h=void 0;if(Je!==null){var v=Je.memoizedState;if(h=v.destroy,c!==null&&Oc(c,v.deps)){d.memoizedState=_s(i,l,h,c);return}}$e.flags|=t,d.memoizedState=_s(1|i,l,h,c)}function lp(t,i){return Xo(8390656,8,t,i)}function Uc(t,i){return Zo(2048,8,t,i)}function ap(t,i){return Zo(4,2,t,i)}function cp(t,i){return Zo(4,4,t,i)}function up(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function dp(t,i,l){return l=l!=null?l.concat([t]):null,Zo(4,4,up.bind(null,i,t),l)}function zc(){}function hp(t,i){var l=jt();i=i===void 0?null:i;var c=l.memoizedState;return c!==null&&i!==null&&Oc(i,c[1])?c[0]:(l.memoizedState=[t,i],t)}function fp(t,i){var l=jt();i=i===void 0?null:i;var c=l.memoizedState;return c!==null&&i!==null&&Oc(i,c[1])?c[0]:(t=t(),l.memoizedState=[t,i],t)}function pp(t,i,l){return(yr&21)===0?(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=l):($t(l,i)||(l=Wh(),$e.lanes|=l,wr|=l,t.baseState=!0),i)}function Dw(t,i){var l=Re;Re=l!==0&&4>l?l:4,t(!0);var c=Dc.transition;Dc.transition={};try{t(!1),i()}finally{Re=l,Dc.transition=c}}function mp(){return jt().memoizedState}function Ow(t,i,l){var c=Hn(t);if(l={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null},gp(t))vp(i,l);else if(l=qf(t,i,l,c),l!==null){var d=gt();Gt(l,t,c,d),_p(l,i,c)}}function jw(t,i,l){var c=Hn(t),d={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null};if(gp(t))vp(i,d);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=i.lastRenderedReducer,h!==null))try{var v=i.lastRenderedState,S=h(v,l);if(d.hasEagerState=!0,d.eagerState=S,$t(S,v)){var C=i.interleaved;C===null?(d.next=d,Tc(i)):(d.next=C.next,C.next=d),i.interleaved=d;return}}catch{}finally{}l=qf(t,i,d,c),l!==null&&(d=gt(),Gt(l,t,c,d),_p(l,i,c))}}function gp(t){var i=t.alternate;return t===$e||i!==null&&i===$e}function vp(t,i){ms=Jo=!0;var l=t.pending;l===null?i.next=i:(i.next=l.next,l.next=i),t.pending=i}function _p(t,i,l){if((l&4194240)!==0){var c=i.lanes;c&=t.pendingLanes,l|=c,i.lanes=l,Ba(t,l)}}var el={readContext:Ot,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},Lw={readContext:Ot,useCallback:function(t,i){return on().memoizedState=[t,i===void 0?null:i],t},useContext:Ot,useEffect:lp,useImperativeHandle:function(t,i,l){return l=l!=null?l.concat([t]):null,Xo(4194308,4,up.bind(null,i,t),l)},useLayoutEffect:function(t,i){return Xo(4194308,4,t,i)},useInsertionEffect:function(t,i){return Xo(4,2,t,i)},useMemo:function(t,i){var l=on();return i=i===void 0?null:i,t=t(),l.memoizedState=[t,i],t},useReducer:function(t,i,l){var c=on();return i=l!==void 0?l(i):i,c.memoizedState=c.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},c.queue=t,t=t.dispatch=Ow.bind(null,$e,t),[c.memoizedState,t]},useRef:function(t){var i=on();return t={current:t},i.memoizedState=t},useState:sp,useDebugValue:zc,useDeferredValue:function(t){return on().memoizedState=t},useTransition:function(){var t=sp(!1),i=t[0];return t=Dw.bind(null,t[1]),on().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,l){var c=$e,d=on();if(Ue){if(l===void 0)throw Error(n(407));l=l()}else{if(l=i(),nt===null)throw Error(n(349));(yr&30)!==0||ep(c,i,l)}d.memoizedState=l;var h={value:l,getSnapshot:i};return d.queue=h,lp(np.bind(null,c,h,t),[t]),c.flags|=2048,_s(9,tp.bind(null,c,h,l,i),void 0,null),l},useId:function(){var t=on(),i=nt.identifierPrefix;if(Ue){var l=mn,c=pn;l=(c&~(1<<32-zt(c)-1)).toString(32)+l,i=":"+i+"R"+l,l=gs++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=bw++,i=":"+i+"r"+l.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Mw={readContext:Ot,useCallback:hp,useContext:Ot,useEffect:Uc,useImperativeHandle:dp,useInsertionEffect:ap,useLayoutEffect:cp,useMemo:fp,useReducer:Mc,useRef:op,useState:function(){return Mc(vs)},useDebugValue:zc,useDeferredValue:function(t){var i=jt();return pp(i,Je.memoizedState,t)},useTransition:function(){var t=Mc(vs)[0],i=jt().memoizedState;return[t,i]},useMutableSource:Xf,useSyncExternalStore:Zf,useId:mp,unstable_isNewReconciler:!1},Fw={readContext:Ot,useCallback:hp,useContext:Ot,useEffect:Uc,useImperativeHandle:dp,useInsertionEffect:ap,useLayoutEffect:cp,useMemo:fp,useReducer:Fc,useRef:op,useState:function(){return Fc(vs)},useDebugValue:zc,useDeferredValue:function(t){var i=jt();return Je===null?i.memoizedState=t:pp(i,Je.memoizedState,t)},useTransition:function(){var t=Fc(vs)[0],i=jt().memoizedState;return[t,i]},useMutableSource:Xf,useSyncExternalStore:Zf,useId:mp,unstable_isNewReconciler:!1};function Wt(t,i){if(t&&t.defaultProps){i=q({},i),t=t.defaultProps;for(var l in t)i[l]===void 0&&(i[l]=t[l]);return i}return i}function $c(t,i,l,c){i=t.memoizedState,l=l(c,i),l=l==null?i:q({},i,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var tl={isMounted:function(t){return(t=t._reactInternals)?hr(t)===t:!1},enqueueSetState:function(t,i,l){t=t._reactInternals;var c=gt(),d=Hn(t),h=vn(c,d);h.payload=i,l!=null&&(h.callback=l),i=$n(t,h,d),i!==null&&(Gt(i,t,d,c),qo(i,t,d))},enqueueReplaceState:function(t,i,l){t=t._reactInternals;var c=gt(),d=Hn(t),h=vn(c,d);h.tag=1,h.payload=i,l!=null&&(h.callback=l),i=$n(t,h,d),i!==null&&(Gt(i,t,d,c),qo(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var l=gt(),c=Hn(t),d=vn(l,c);d.tag=2,i!=null&&(d.callback=i),i=$n(t,d,c),i!==null&&(Gt(i,t,c,l),qo(i,t,c))}};function yp(t,i,l,c,d,h,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,h,v):i.prototype&&i.prototype.isPureReactComponent?!is(l,c)||!is(d,h):!0}function wp(t,i,l){var c=!1,d=Fn,h=i.contextType;return typeof h=="object"&&h!==null?h=Ot(h):(d=Ct(i)?pr:ut.current,c=i.contextTypes,h=(c=c!=null)?Zr(t,d):Fn),i=new i(l,h),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=tl,t.stateNode=i,i._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=h),i}function Sp(t,i,l,c){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,c),i.state!==t&&tl.enqueueReplaceState(i,i.state,null)}function Bc(t,i,l,c){var d=t.stateNode;d.props=l,d.state=t.memoizedState,d.refs={},kc(t);var h=i.contextType;typeof h=="object"&&h!==null?d.context=Ot(h):(h=Ct(i)?pr:ut.current,d.context=Zr(t,h)),d.state=t.memoizedState,h=i.getDerivedStateFromProps,typeof h=="function"&&($c(t,i,h,l),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&tl.enqueueReplaceState(d,d.state,null),Ko(t,l,d,c),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function li(t,i){try{var l="",c=i;do l+=Ee(c),c=c.return;while(c);var d=l}catch(h){d=`
Error generating stack: `+h.message+`
`+h.stack}return{value:t,source:i,stack:d,digest:null}}function Wc(t,i,l){return{value:t,source:null,stack:l??null,digest:i??null}}function Vc(t,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var Uw=typeof WeakMap=="function"?WeakMap:Map;function Cp(t,i,l){l=vn(-1,l),l.tag=3,l.payload={element:null};var c=i.value;return l.callback=function(){al||(al=!0,su=c),Vc(t,i)},l}function Ep(t,i,l){l=vn(-1,l),l.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;l.payload=function(){return c(d)},l.callback=function(){Vc(t,i)}}var h=t.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(l.callback=function(){Vc(t,i),typeof c!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),l}function xp(t,i,l){var c=t.pingCache;if(c===null){c=t.pingCache=new Uw;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(l)||(d.add(l),t=Zw.bind(null,t,i,l),i.then(t,t))}function Ip(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function Np(t,i,l,c,d){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=vn(-1,1),i.tag=2,$n(l,i,1))),l.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var zw=H.ReactCurrentOwner,Et=!1;function mt(t,i,l,c){i.child=t===null?Gf(i,null,l,c):ri(i,t.child,l,c)}function Tp(t,i,l,c,d){l=l.render;var h=i.ref;return si(i,d),c=jc(t,i,l,c,h,d),l=Lc(),t!==null&&!Et?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,_n(t,i,d)):(Ue&&l&&_c(i),i.flags|=1,mt(t,i,c,d),i.child)}function kp(t,i,l,c,d){if(t===null){var h=l.type;return typeof h=="function"&&!hu(h)&&h.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=h,Pp(t,i,h,c,d)):(t=pl(l.type,null,c,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(h=t.child,(t.lanes&d)===0){var v=h.memoizedProps;if(l=l.compare,l=l!==null?l:is,l(v,c)&&t.ref===i.ref)return _n(t,i,d)}return i.flags|=1,t=qn(h,c),t.ref=i.ref,t.return=i,i.child=t}function Pp(t,i,l,c,d){if(t!==null){var h=t.memoizedProps;if(is(h,c)&&t.ref===i.ref)if(Et=!1,i.pendingProps=c=h,(t.lanes&d)!==0)(t.flags&131072)!==0&&(Et=!0);else return i.lanes=t.lanes,_n(t,i,d)}return Hc(t,i,l,c,d)}function Rp(t,i,l){var c=i.pendingProps,d=c.children,h=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(ci,At),At|=l;else{if((l&1073741824)===0)return t=h!==null?h.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,De(ci,At),At|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=h!==null?h.baseLanes:l,De(ci,At),At|=c}else h!==null?(c=h.baseLanes|l,i.memoizedState=null):c=l,De(ci,At),At|=c;return mt(t,i,d,l),i.child}function Ap(t,i){var l=i.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Hc(t,i,l,c,d){var h=Ct(l)?pr:ut.current;return h=Zr(i,h),si(i,d),l=jc(t,i,l,c,h,d),c=Lc(),t!==null&&!Et?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,_n(t,i,d)):(Ue&&c&&_c(i),i.flags|=1,mt(t,i,l,d),i.child)}function bp(t,i,l,c,d){if(Ct(l)){var h=!0;Uo(i)}else h=!1;if(si(i,d),i.stateNode===null)rl(t,i),wp(i,l,c),Bc(i,l,c,d),c=!0;else if(t===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var C=v.context,P=l.contextType;typeof P=="object"&&P!==null?P=Ot(P):(P=Ct(l)?pr:ut.current,P=Zr(i,P));var U=l.getDerivedStateFromProps,z=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function";z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==c||C!==P)&&Sp(i,v,c,P),zn=!1;var F=i.memoizedState;v.state=F,Ko(i,c,v,d),C=i.memoizedState,S!==c||F!==C||St.current||zn?(typeof U=="function"&&($c(i,l,U,c),C=i.memoizedState),(S=zn||yp(i,l,S,c,F,C,P))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=C),v.props=c,v.state=C,v.context=P,c=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,Kf(t,i),S=i.memoizedProps,P=i.type===i.elementType?S:Wt(i.type,S),v.props=P,z=i.pendingProps,F=v.context,C=l.contextType,typeof C=="object"&&C!==null?C=Ot(C):(C=Ct(l)?pr:ut.current,C=Zr(i,C));var K=l.getDerivedStateFromProps;(U=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==z||F!==C)&&Sp(i,v,c,C),zn=!1,F=i.memoizedState,v.state=F,Ko(i,c,v,d);var Z=i.memoizedState;S!==z||F!==Z||St.current||zn?(typeof K=="function"&&($c(i,l,K,c),Z=i.memoizedState),(P=zn||yp(i,l,P,c,F,Z,C)||!1)?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,C),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,C)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Z),v.props=c,v.state=Z,v.context=C,c=P):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),c=!1)}return Gc(t,i,l,c,h,d)}function Gc(t,i,l,c,d,h){Ap(t,i);var v=(i.flags&128)!==0;if(!c&&!v)return d&&Mf(i,l,!1),_n(t,i,h);c=i.stateNode,zw.current=i;var S=v&&typeof l.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,t!==null&&v?(i.child=ri(i,t.child,null,h),i.child=ri(i,null,S,h)):mt(t,i,S,h),i.memoizedState=c.state,d&&Mf(i,l,!0),i.child}function Dp(t){var i=t.stateNode;i.pendingContext?jf(t,i.pendingContext,i.pendingContext!==i.context):i.context&&jf(t,i.context,!1),Pc(t,i.containerInfo)}function Op(t,i,l,c,d){return ni(),Cc(d),i.flags|=256,mt(t,i,l,c),i.child}var qc={dehydrated:null,treeContext:null,retryLane:0};function Kc(t){return{baseLanes:t,cachePool:null,transitions:null}}function jp(t,i,l){var c=i.pendingProps,d=ze.current,h=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=t!==null&&t.memoizedState===null?!1:(d&2)!==0),S?(h=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),De(ze,d&1),t===null)return Sc(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,t=c.fallback,h?(c=i.mode,h=i.child,v={mode:"hidden",children:v},(c&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=v):h=ml(v,c,0,null),t=xr(t,c,l,null),h.return=i,t.return=i,h.sibling=t,i.child=h,i.child.memoizedState=Kc(l),i.memoizedState=qc,t):Qc(i,v));if(d=t.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return $w(t,i,v,c,S,d,l);if(h){h=c.fallback,v=i.mode,d=t.child,S=d.sibling;var C={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=C,i.deletions=null):(c=qn(d,C),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?h=qn(S,h):(h=xr(h,v,l,null),h.flags|=2),h.return=i,c.return=i,c.sibling=h,i.child=c,c=h,h=i.child,v=t.child.memoizedState,v=v===null?Kc(l):{baseLanes:v.baseLanes|l,cachePool:null,transitions:v.transitions},h.memoizedState=v,h.childLanes=t.childLanes&~l,i.memoizedState=qc,c}return h=t.child,t=h.sibling,c=qn(h,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=l),c.return=i,c.sibling=null,t!==null&&(l=i.deletions,l===null?(i.deletions=[t],i.flags|=16):l.push(t)),i.child=c,i.memoizedState=null,c}function Qc(t,i){return i=ml({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function nl(t,i,l,c){return c!==null&&Cc(c),ri(i,t.child,null,l),t=Qc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function $w(t,i,l,c,d,h,v){if(l)return i.flags&256?(i.flags&=-257,c=Wc(Error(n(422))),nl(t,i,v,c)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(h=c.fallback,d=i.mode,c=ml({mode:"visible",children:c.children},d,0,null),h=xr(h,d,v,null),h.flags|=2,c.return=i,h.return=i,c.sibling=h,i.child=c,(i.mode&1)!==0&&ri(i,t.child,null,v),i.child.memoizedState=Kc(v),i.memoizedState=qc,h);if((i.mode&1)===0)return nl(t,i,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,h=Error(n(419)),c=Wc(h,c,void 0),nl(t,i,v,c)}if(S=(v&t.childLanes)!==0,Et||S){if(c=nt,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==h.retryLane&&(h.retryLane=d,gn(t,d),Gt(c,t,d,-1))}return du(),c=Wc(Error(n(421))),nl(t,i,v,c)}return d.data==="$?"?(i.flags|=128,i.child=t.child,i=e0.bind(null,t),d._reactRetry=i,null):(t=h.treeContext,Rt=Ln(d.nextSibling),Pt=i,Ue=!0,Bt=null,t!==null&&(bt[Dt++]=pn,bt[Dt++]=mn,bt[Dt++]=mr,pn=t.id,mn=t.overflow,mr=i),i=Qc(i,c.children),i.flags|=4096,i)}function Lp(t,i,l){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i),Nc(t.return,i,l)}function Yc(t,i,l,c,d){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:d}:(h.isBackwards=i,h.rendering=null,h.renderingStartTime=0,h.last=c,h.tail=l,h.tailMode=d)}function Mp(t,i,l){var c=i.pendingProps,d=c.revealOrder,h=c.tail;if(mt(t,i,c.children,l),c=ze.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lp(t,l,i);else if(t.tag===19)Lp(t,l,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(De(ze,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(l=i.child,d=null;l!==null;)t=l.alternate,t!==null&&Qo(t)===null&&(d=l),l=l.sibling;l=d,l===null?(d=i.child,i.child=null):(d=l.sibling,l.sibling=null),Yc(i,!1,d,l,h);break;case"backwards":for(l=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&Qo(t)===null){i.child=d;break}t=d.sibling,d.sibling=l,l=d,d=t}Yc(i,!0,l,null,h);break;case"together":Yc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function rl(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function _n(t,i,l){if(t!==null&&(i.dependencies=t.dependencies),wr|=i.lanes,(l&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(n(153));if(i.child!==null){for(t=i.child,l=qn(t,t.pendingProps),i.child=l,l.return=i;t.sibling!==null;)t=t.sibling,l=l.sibling=qn(t,t.pendingProps),l.return=i;l.sibling=null}return i.child}function Bw(t,i,l){switch(i.tag){case 3:Dp(i),ni();break;case 5:Jf(i);break;case 1:Ct(i.type)&&Uo(i);break;case 4:Pc(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;De(Ho,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(De(ze,ze.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?jp(t,i,l):(De(ze,ze.current&1),t=_n(t,i,l),t!==null?t.sibling:null);De(ze,ze.current&1);break;case 19:if(c=(l&i.childLanes)!==0,(t.flags&128)!==0){if(c)return Mp(t,i,l);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),De(ze,ze.current),c)break;return null;case 22:case 23:return i.lanes=0,Rp(t,i,l)}return _n(t,i,l)}var Fp,Jc,Up,zp;Fp=function(t,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Jc=function(){},Up=function(t,i,l,c){var d=t.memoizedProps;if(d!==c){t=i.stateNode,_r(sn.current);var h=null;switch(l){case"input":d=Na(t,d),c=Na(t,c),h=[];break;case"select":d=q({},d,{value:void 0}),c=q({},c,{value:void 0}),h=[];break;case"textarea":d=Pa(t,d),c=Pa(t,c),h=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=Lo)}Aa(l,c);var v;l=null;for(P in d)if(!c.hasOwnProperty(P)&&d.hasOwnProperty(P)&&d[P]!=null)if(P==="style"){var S=d[P];for(v in S)S.hasOwnProperty(v)&&(l||(l={}),l[v]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(o.hasOwnProperty(P)?h||(h=[]):(h=h||[]).push(P,null));for(P in c){var C=c[P];if(S=d!=null?d[P]:void 0,c.hasOwnProperty(P)&&C!==S&&(C!=null||S!=null))if(P==="style")if(S){for(v in S)!S.hasOwnProperty(v)||C&&C.hasOwnProperty(v)||(l||(l={}),l[v]="");for(v in C)C.hasOwnProperty(v)&&S[v]!==C[v]&&(l||(l={}),l[v]=C[v])}else l||(h||(h=[]),h.push(P,l)),l=C;else P==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,S=S?S.__html:void 0,C!=null&&S!==C&&(h=h||[]).push(P,C)):P==="children"?typeof C!="string"&&typeof C!="number"||(h=h||[]).push(P,""+C):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(o.hasOwnProperty(P)?(C!=null&&P==="onScroll"&&Le("scroll",t),h||S===C||(h=[])):(h=h||[]).push(P,C))}l&&(h=h||[]).push("style",l);var P=h;(i.updateQueue=P)&&(i.flags|=4)}},zp=function(t,i,l,c){l!==c&&(i.flags|=4)};function ys(t,i){if(!Ue)switch(t.tailMode){case"hidden":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function ht(t){var i=t.alternate!==null&&t.alternate.child===t.child,l=0,c=0;if(i)for(var d=t.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=c,t.childLanes=l,i}function Ww(t,i,l){var c=i.pendingProps;switch(yc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(i),null;case 1:return Ct(i.type)&&Fo(),ht(i),null;case 3:return c=i.stateNode,oi(),Me(St),Me(ut),bc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(Wo(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bt!==null&&(au(Bt),Bt=null))),Jc(t,i),ht(i),null;case 5:Rc(i);var d=_r(ps.current);if(l=i.type,t!==null&&i.stateNode!=null)Up(t,i,l,c,d),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(n(166));return ht(i),null}if(t=_r(sn.current),Wo(i)){c=i.stateNode,l=i.type;var h=i.memoizedProps;switch(c[rn]=i,c[cs]=h,t=(i.mode&1)!==0,l){case"dialog":Le("cancel",c),Le("close",c);break;case"iframe":case"object":case"embed":Le("load",c);break;case"video":case"audio":for(d=0;d<os.length;d++)Le(os[d],c);break;case"source":Le("error",c);break;case"img":case"image":case"link":Le("error",c),Le("load",c);break;case"details":Le("toggle",c);break;case"input":yh(c,h),Le("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!h.multiple},Le("invalid",c);break;case"textarea":Ch(c,h),Le("invalid",c)}Aa(l,h),d=null;for(var v in h)if(h.hasOwnProperty(v)){var S=h[v];v==="children"?typeof S=="string"?c.textContent!==S&&(h.suppressHydrationWarning!==!0&&jo(c.textContent,S,t),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(h.suppressHydrationWarning!==!0&&jo(c.textContent,S,t),d=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Le("scroll",c)}switch(l){case"input":Fe(c),Sh(c,h,!0);break;case"textarea":Fe(c),xh(c);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(c.onclick=Lo)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ih(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=v.createElement(l,{is:c.is}):(t=v.createElement(l),l==="select"&&(v=t,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):t=v.createElementNS(t,l),t[rn]=i,t[cs]=c,Fp(t,i,!1,!1),i.stateNode=t;e:{switch(v=ba(l,c),l){case"dialog":Le("cancel",t),Le("close",t),d=c;break;case"iframe":case"object":case"embed":Le("load",t),d=c;break;case"video":case"audio":for(d=0;d<os.length;d++)Le(os[d],t);d=c;break;case"source":Le("error",t),d=c;break;case"img":case"image":case"link":Le("error",t),Le("load",t),d=c;break;case"details":Le("toggle",t),d=c;break;case"input":yh(t,c),d=Na(t,c),Le("invalid",t);break;case"option":d=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},d=q({},c,{value:void 0}),Le("invalid",t);break;case"textarea":Ch(t,c),d=Pa(t,c),Le("invalid",t);break;default:d=c}Aa(l,d),S=d;for(h in S)if(S.hasOwnProperty(h)){var C=S[h];h==="style"?kh(t,C):h==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Nh(t,C)):h==="children"?typeof C=="string"?(l!=="textarea"||C!=="")&&$i(t,C):typeof C=="number"&&$i(t,""+C):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(o.hasOwnProperty(h)?C!=null&&h==="onScroll"&&Le("scroll",t):C!=null&&G(t,h,C,v))}switch(l){case"input":Fe(t),Sh(t,c,!1);break;case"textarea":Fe(t),xh(t);break;case"option":c.value!=null&&t.setAttribute("value",""+ce(c.value));break;case"select":t.multiple=!!c.multiple,h=c.value,h!=null?$r(t,!!c.multiple,h,!1):c.defaultValue!=null&&$r(t,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=Lo)}switch(l){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ht(i),null;case 6:if(t&&i.stateNode!=null)zp(t,i,t.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(n(166));if(l=_r(ps.current),_r(sn.current),Wo(i)){if(c=i.stateNode,l=i.memoizedProps,c[rn]=i,(h=c.nodeValue!==l)&&(t=Pt,t!==null))switch(t.tag){case 3:jo(c.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jo(c.nodeValue,l,(t.mode&1)!==0)}h&&(i.flags|=4)}else c=(l.nodeType===9?l:l.ownerDocument).createTextNode(c),c[rn]=i,i.stateNode=c}return ht(i),null;case 13:if(Me(ze),c=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&Rt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Wf(),ni(),i.flags|=98560,h=!1;else if(h=Wo(i),c!==null&&c.dehydrated!==null){if(t===null){if(!h)throw Error(n(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));h[rn]=i}else ni(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),h=!1}else Bt!==null&&(au(Bt),Bt=null),h=!0;if(!h)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(ze.current&1)!==0?Xe===0&&(Xe=3):du())),i.updateQueue!==null&&(i.flags|=4),ht(i),null);case 4:return oi(),Jc(t,i),t===null&&ls(i.stateNode.containerInfo),ht(i),null;case 10:return Ic(i.type._context),ht(i),null;case 17:return Ct(i.type)&&Fo(),ht(i),null;case 19:if(Me(ze),h=i.memoizedState,h===null)return ht(i),null;if(c=(i.flags&128)!==0,v=h.rendering,v===null)if(c)ys(h,!1);else{if(Xe!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=Qo(t),v!==null){for(i.flags|=128,ys(h,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=l,l=i.child;l!==null;)h=l,t=c,h.flags&=14680066,v=h.alternate,v===null?(h.childLanes=0,h.lanes=t,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=v.childLanes,h.lanes=v.lanes,h.child=v.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=v.memoizedProps,h.memoizedState=v.memoizedState,h.updateQueue=v.updateQueue,h.type=v.type,t=v.dependencies,h.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return De(ze,ze.current&1|2),i.child}t=t.sibling}h.tail!==null&&qe()>ui&&(i.flags|=128,c=!0,ys(h,!1),i.lanes=4194304)}else{if(!c)if(t=Qo(v),t!==null){if(i.flags|=128,c=!0,l=t.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),ys(h,!0),h.tail===null&&h.tailMode==="hidden"&&!v.alternate&&!Ue)return ht(i),null}else 2*qe()-h.renderingStartTime>ui&&l!==1073741824&&(i.flags|=128,c=!0,ys(h,!1),i.lanes=4194304);h.isBackwards?(v.sibling=i.child,i.child=v):(l=h.last,l!==null?l.sibling=v:i.child=v,h.last=v)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=qe(),i.sibling=null,l=ze.current,De(ze,c?l&1|2:l&1),i):(ht(i),null);case 22:case 23:return uu(),c=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(At&1073741824)!==0&&(ht(i),i.subtreeFlags&6&&(i.flags|=8192)):ht(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function Vw(t,i){switch(yc(i),i.tag){case 1:return Ct(i.type)&&Fo(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return oi(),Me(St),Me(ut),bc(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return Rc(i),null;case 13:if(Me(ze),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ni()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Me(ze),null;case 4:return oi(),null;case 10:return Ic(i.type._context),null;case 22:case 23:return uu(),null;case 24:return null;default:return null}}var il=!1,ft=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,J=null;function ai(t,i){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(c){We(t,i,c)}else l.current=null}function Xc(t,i,l){try{l()}catch(c){We(t,i,c)}}var $p=!1;function Gw(t,i){if(uc=xo,t=yf(),nc(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var d=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{l.nodeType,h.nodeType}catch{l=null;break e}var v=0,S=-1,C=-1,P=0,U=0,z=t,F=null;t:for(;;){for(var K;z!==l||d!==0&&z.nodeType!==3||(S=v+d),z!==h||c!==0&&z.nodeType!==3||(C=v+c),z.nodeType===3&&(v+=z.nodeValue.length),(K=z.firstChild)!==null;)F=z,z=K;for(;;){if(z===t)break t;if(F===l&&++P===d&&(S=v),F===h&&++U===c&&(C=v),(K=z.nextSibling)!==null)break;z=F,F=z.parentNode}z=K}l=S===-1||C===-1?null:{start:S,end:C}}else l=null}l=l||{start:0,end:0}}else l=null;for(dc={focusedElem:t,selectionRange:l},xo=!1,J=i;J!==null;)if(i=J,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,J=t;else for(;J!==null;){i=J;try{var Z=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var ne=Z.memoizedProps,Ke=Z.memoizedState,N=i.stateNode,E=N.getSnapshotBeforeUpdate(i.elementType===i.type?ne:Wt(i.type,ne),Ke);N.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=i.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(W){We(i,i.return,W)}if(t=i.sibling,t!==null){t.return=i.return,J=t;break}J=i.return}return Z=$p,$p=!1,Z}function ws(t,i,l){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&t)===t){var h=d.destroy;d.destroy=void 0,h!==void 0&&Xc(i,l,h)}d=d.next}while(d!==c)}}function sl(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&t)===t){var c=l.create;l.destroy=c()}l=l.next}while(l!==i)}}function Zc(t){var i=t.ref;if(i!==null){var l=t.stateNode;switch(t.tag){case 5:t=l;break;default:t=l}typeof i=="function"?i(t):i.current=t}}function Bp(t){var i=t.alternate;i!==null&&(t.alternate=null,Bp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[rn],delete i[cs],delete i[mc],delete i[kw],delete i[Pw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wp(t){return t.tag===5||t.tag===3||t.tag===4}function Vp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eu(t,i,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(t,i):l.insertBefore(t,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(t,l)):(i=l,i.appendChild(t)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Lo));else if(c!==4&&(t=t.child,t!==null))for(eu(t,i,l),t=t.sibling;t!==null;)eu(t,i,l),t=t.sibling}function tu(t,i,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?l.insertBefore(t,i):l.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(tu(t,i,l),t=t.sibling;t!==null;)tu(t,i,l),t=t.sibling}var ot=null,Vt=!1;function Bn(t,i,l){for(l=l.child;l!==null;)Hp(t,i,l),l=l.sibling}function Hp(t,i,l){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(_o,l)}catch{}switch(l.tag){case 5:ft||ai(l,i);case 6:var c=ot,d=Vt;ot=null,Bn(t,i,l),ot=c,Vt=d,ot!==null&&(Vt?(t=ot,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):ot.removeChild(l.stateNode));break;case 18:ot!==null&&(Vt?(t=ot,l=l.stateNode,t.nodeType===8?pc(t.parentNode,l):t.nodeType===1&&pc(t,l),Xi(t)):pc(ot,l.stateNode));break;case 4:c=ot,d=Vt,ot=l.stateNode.containerInfo,Vt=!0,Bn(t,i,l),ot=c,Vt=d;break;case 0:case 11:case 14:case 15:if(!ft&&(c=l.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var h=d,v=h.destroy;h=h.tag,v!==void 0&&((h&2)!==0||(h&4)!==0)&&Xc(l,i,v),d=d.next}while(d!==c)}Bn(t,i,l);break;case 1:if(!ft&&(ai(l,i),c=l.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=l.memoizedProps,c.state=l.memoizedState,c.componentWillUnmount()}catch(S){We(l,i,S)}Bn(t,i,l);break;case 21:Bn(t,i,l);break;case 22:l.mode&1?(ft=(c=ft)||l.memoizedState!==null,Bn(t,i,l),ft=c):Bn(t,i,l);break;default:Bn(t,i,l)}}function Gp(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new Hw),i.forEach(function(c){var d=t0.bind(null,t,c);l.has(c)||(l.add(c),c.then(d,d))})}}function Ht(t,i){var l=i.deletions;if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];try{var h=t,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:ot=S.stateNode,Vt=!1;break e;case 3:ot=S.stateNode.containerInfo,Vt=!0;break e;case 4:ot=S.stateNode.containerInfo,Vt=!0;break e}S=S.return}if(ot===null)throw Error(n(160));Hp(h,v,d),ot=null,Vt=!1;var C=d.alternate;C!==null&&(C.return=null),d.return=null}catch(P){We(d,i,P)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)qp(i,t),i=i.sibling}function qp(t,i){var l=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(i,t),ln(t),c&4){try{ws(3,t,t.return),sl(3,t)}catch(ne){We(t,t.return,ne)}try{ws(5,t,t.return)}catch(ne){We(t,t.return,ne)}}break;case 1:Ht(i,t),ln(t),c&512&&l!==null&&ai(l,l.return);break;case 5:if(Ht(i,t),ln(t),c&512&&l!==null&&ai(l,l.return),t.flags&32){var d=t.stateNode;try{$i(d,"")}catch(ne){We(t,t.return,ne)}}if(c&4&&(d=t.stateNode,d!=null)){var h=t.memoizedProps,v=l!==null?l.memoizedProps:h,S=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{S==="input"&&h.type==="radio"&&h.name!=null&&wh(d,h),ba(S,v);var P=ba(S,h);for(v=0;v<C.length;v+=2){var U=C[v],z=C[v+1];U==="style"?kh(d,z):U==="dangerouslySetInnerHTML"?Nh(d,z):U==="children"?$i(d,z):G(d,U,z,P)}switch(S){case"input":Ta(d,h);break;case"textarea":Eh(d,h);break;case"select":var F=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!h.multiple;var K=h.value;K!=null?$r(d,!!h.multiple,K,!1):F!==!!h.multiple&&(h.defaultValue!=null?$r(d,!!h.multiple,h.defaultValue,!0):$r(d,!!h.multiple,h.multiple?[]:"",!1))}d[cs]=h}catch(ne){We(t,t.return,ne)}}break;case 6:if(Ht(i,t),ln(t),c&4){if(t.stateNode===null)throw Error(n(162));d=t.stateNode,h=t.memoizedProps;try{d.nodeValue=h}catch(ne){We(t,t.return,ne)}}break;case 3:if(Ht(i,t),ln(t),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Xi(i.containerInfo)}catch(ne){We(t,t.return,ne)}break;case 4:Ht(i,t),ln(t);break;case 13:Ht(i,t),ln(t),d=t.child,d.flags&8192&&(h=d.memoizedState!==null,d.stateNode.isHidden=h,!h||d.alternate!==null&&d.alternate.memoizedState!==null||(iu=qe())),c&4&&Gp(t);break;case 22:if(U=l!==null&&l.memoizedState!==null,t.mode&1?(ft=(P=ft)||U,Ht(i,t),ft=P):Ht(i,t),ln(t),c&8192){if(P=t.memoizedState!==null,(t.stateNode.isHidden=P)&&!U&&(t.mode&1)!==0)for(J=t,U=t.child;U!==null;){for(z=J=U;J!==null;){switch(F=J,K=F.child,F.tag){case 0:case 11:case 14:case 15:ws(4,F,F.return);break;case 1:ai(F,F.return);var Z=F.stateNode;if(typeof Z.componentWillUnmount=="function"){c=F,l=F.return;try{i=c,Z.props=i.memoizedProps,Z.state=i.memoizedState,Z.componentWillUnmount()}catch(ne){We(c,l,ne)}}break;case 5:ai(F,F.return);break;case 22:if(F.memoizedState!==null){Yp(z);continue}}K!==null?(K.return=F,J=K):Yp(z)}U=U.sibling}e:for(U=null,z=t;;){if(z.tag===5){if(U===null){U=z;try{d=z.stateNode,P?(h=d.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(S=z.stateNode,C=z.memoizedProps.style,v=C!=null&&C.hasOwnProperty("display")?C.display:null,S.style.display=Th("display",v))}catch(ne){We(t,t.return,ne)}}}else if(z.tag===6){if(U===null)try{z.stateNode.nodeValue=P?"":z.memoizedProps}catch(ne){We(t,t.return,ne)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===t)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===t)break e;for(;z.sibling===null;){if(z.return===null||z.return===t)break e;U===z&&(U=null),z=z.return}U===z&&(U=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:Ht(i,t),ln(t),c&4&&Gp(t);break;case 21:break;default:Ht(i,t),ln(t)}}function ln(t){var i=t.flags;if(i&2){try{e:{for(var l=t.return;l!==null;){if(Wp(l)){var c=l;break e}l=l.return}throw Error(n(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&($i(d,""),c.flags&=-33);var h=Vp(t);tu(t,h,d);break;case 3:case 4:var v=c.stateNode.containerInfo,S=Vp(t);eu(t,S,v);break;default:throw Error(n(161))}}catch(C){We(t,t.return,C)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function qw(t,i,l){J=t,Kp(t)}function Kp(t,i,l){for(var c=(t.mode&1)!==0;J!==null;){var d=J,h=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||il;if(!v){var S=d.alternate,C=S!==null&&S.memoizedState!==null||ft;S=il;var P=ft;if(il=v,(ft=C)&&!P)for(J=d;J!==null;)v=J,C=v.child,v.tag===22&&v.memoizedState!==null?Jp(d):C!==null?(C.return=v,J=C):Jp(d);for(;h!==null;)J=h,Kp(h),h=h.sibling;J=d,il=S,ft=P}Qp(t)}else(d.subtreeFlags&8772)!==0&&h!==null?(h.return=d,J=h):Qp(t)}}function Qp(t){for(;J!==null;){var i=J;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ft||sl(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!ft)if(l===null)c.componentDidMount();else{var d=i.elementType===i.type?l.memoizedProps:Wt(i.type,l.memoizedProps);c.componentDidUpdate(d,l.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var h=i.updateQueue;h!==null&&Yf(i,h,c);break;case 3:var v=i.updateQueue;if(v!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Yf(i,v,l)}break;case 5:var S=i.stateNode;if(l===null&&i.flags&4){l=S;var C=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&l.focus();break;case"img":C.src&&(l.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var P=i.alternate;if(P!==null){var U=P.memoizedState;if(U!==null){var z=U.dehydrated;z!==null&&Xi(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ft||i.flags&512&&Zc(i)}catch(F){We(i,i.return,F)}}if(i===t){J=null;break}if(l=i.sibling,l!==null){l.return=i.return,J=l;break}J=i.return}}function Yp(t){for(;J!==null;){var i=J;if(i===t){J=null;break}var l=i.sibling;if(l!==null){l.return=i.return,J=l;break}J=i.return}}function Jp(t){for(;J!==null;){var i=J;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{sl(4,i)}catch(C){We(i,l,C)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(C){We(i,d,C)}}var h=i.return;try{Zc(i)}catch(C){We(i,h,C)}break;case 5:var v=i.return;try{Zc(i)}catch(C){We(i,v,C)}}}catch(C){We(i,i.return,C)}if(i===t){J=null;break}var S=i.sibling;if(S!==null){S.return=i.return,J=S;break}J=i.return}}var Kw=Math.ceil,ol=H.ReactCurrentDispatcher,nu=H.ReactCurrentOwner,Lt=H.ReactCurrentBatchConfig,xe=0,nt=null,Qe=null,lt=0,At=0,ci=Mn(0),Xe=0,Ss=null,wr=0,ll=0,ru=0,Cs=null,xt=null,iu=0,ui=1/0,yn=null,al=!1,su=null,Wn=null,cl=!1,Vn=null,ul=0,Es=0,ou=null,dl=-1,hl=0;function gt(){return(xe&6)!==0?qe():dl!==-1?dl:dl=qe()}function Hn(t){return(t.mode&1)===0?1:(xe&2)!==0&&lt!==0?lt&-lt:Aw.transition!==null?(hl===0&&(hl=Wh()),hl):(t=Re,t!==0||(t=window.event,t=t===void 0?16:Xh(t.type)),t)}function Gt(t,i,l,c){if(50<Es)throw Es=0,ou=null,Error(n(185));qi(t,l,c),((xe&2)===0||t!==nt)&&(t===nt&&((xe&2)===0&&(ll|=l),Xe===4&&Gn(t,lt)),It(t,c),l===1&&xe===0&&(i.mode&1)===0&&(ui=qe()+500,zo&&Un()))}function It(t,i){var l=t.callbackNode;Ay(t,i);var c=So(t,t===nt?lt:0);if(c===0)l!==null&&zh(l),t.callbackNode=null,t.callbackPriority=0;else if(i=c&-c,t.callbackPriority!==i){if(l!=null&&zh(l),i===1)t.tag===0?Rw(Zp.bind(null,t)):Ff(Zp.bind(null,t)),Nw(function(){(xe&6)===0&&Un()}),l=null;else{switch(Vh(c)){case 1:l=Ua;break;case 4:l=$h;break;case 16:l=vo;break;case 536870912:l=Bh;break;default:l=vo}l=lm(l,Xp.bind(null,t))}t.callbackPriority=i,t.callbackNode=l}}function Xp(t,i){if(dl=-1,hl=0,(xe&6)!==0)throw Error(n(327));var l=t.callbackNode;if(di()&&t.callbackNode!==l)return null;var c=So(t,t===nt?lt:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||i)i=fl(t,c);else{i=c;var d=xe;xe|=2;var h=tm();(nt!==t||lt!==i)&&(yn=null,ui=qe()+500,Cr(t,i));do try{Jw();break}catch(S){em(t,S)}while(!0);xc(),ol.current=h,xe=d,Qe!==null?i=0:(nt=null,lt=0,i=Xe)}if(i!==0){if(i===2&&(d=za(t),d!==0&&(c=d,i=lu(t,d))),i===1)throw l=Ss,Cr(t,0),Gn(t,c),It(t,qe()),l;if(i===6)Gn(t,c);else{if(d=t.current.alternate,(c&30)===0&&!Qw(d)&&(i=fl(t,c),i===2&&(h=za(t),h!==0&&(c=h,i=lu(t,h))),i===1))throw l=Ss,Cr(t,0),Gn(t,c),It(t,qe()),l;switch(t.finishedWork=d,t.finishedLanes=c,i){case 0:case 1:throw Error(n(345));case 2:Er(t,xt,yn);break;case 3:if(Gn(t,c),(c&130023424)===c&&(i=iu+500-qe(),10<i)){if(So(t,0)!==0)break;if(d=t.suspendedLanes,(d&c)!==c){gt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=fc(Er.bind(null,t,xt,yn),i);break}Er(t,xt,yn);break;case 4:if(Gn(t,c),(c&4194240)===c)break;for(i=t.eventTimes,d=-1;0<c;){var v=31-zt(c);h=1<<v,v=i[v],v>d&&(d=v),c&=~h}if(c=d,c=qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Kw(c/1960))-c,10<c){t.timeoutHandle=fc(Er.bind(null,t,xt,yn),c);break}Er(t,xt,yn);break;case 5:Er(t,xt,yn);break;default:throw Error(n(329))}}}return It(t,qe()),t.callbackNode===l?Xp.bind(null,t):null}function lu(t,i){var l=Cs;return t.current.memoizedState.isDehydrated&&(Cr(t,i).flags|=256),t=fl(t,i),t!==2&&(i=xt,xt=l,i!==null&&au(i)),t}function au(t){xt===null?xt=t:xt.push.apply(xt,t)}function Qw(t){for(var i=t;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var c=0;c<l.length;c++){var d=l[c],h=d.getSnapshot;d=d.value;try{if(!$t(h(),d))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gn(t,i){for(i&=~ru,i&=~ll,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var l=31-zt(i),c=1<<l;t[l]=-1,i&=~c}}function Zp(t){if((xe&6)!==0)throw Error(n(327));di();var i=So(t,0);if((i&1)===0)return It(t,qe()),null;var l=fl(t,i);if(t.tag!==0&&l===2){var c=za(t);c!==0&&(i=c,l=lu(t,c))}if(l===1)throw l=Ss,Cr(t,0),Gn(t,i),It(t,qe()),l;if(l===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,Er(t,xt,yn),It(t,qe()),null}function cu(t,i){var l=xe;xe|=1;try{return t(i)}finally{xe=l,xe===0&&(ui=qe()+500,zo&&Un())}}function Sr(t){Vn!==null&&Vn.tag===0&&(xe&6)===0&&di();var i=xe;xe|=1;var l=Lt.transition,c=Re;try{if(Lt.transition=null,Re=1,t)return t()}finally{Re=c,Lt.transition=l,xe=i,(xe&6)===0&&Un()}}function uu(){At=ci.current,Me(ci)}function Cr(t,i){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,Iw(l)),Qe!==null)for(l=Qe.return;l!==null;){var c=l;switch(yc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Fo();break;case 3:oi(),Me(St),Me(ut),bc();break;case 5:Rc(c);break;case 4:oi();break;case 13:Me(ze);break;case 19:Me(ze);break;case 10:Ic(c.type._context);break;case 22:case 23:uu()}l=l.return}if(nt=t,Qe=t=qn(t.current,null),lt=At=i,Xe=0,Ss=null,ru=ll=wr=0,xt=Cs=null,vr!==null){for(i=0;i<vr.length;i++)if(l=vr[i],c=l.interleaved,c!==null){l.interleaved=null;var d=c.next,h=l.pending;if(h!==null){var v=h.next;h.next=d,c.next=v}l.pending=c}vr=null}return t}function em(t,i){do{var l=Qe;try{if(xc(),Yo.current=el,Jo){for(var c=$e.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Jo=!1}if(yr=0,tt=Je=$e=null,ms=!1,gs=0,nu.current=null,l===null||l.return===null){Xe=1,Ss=i,Qe=null;break}e:{var h=t,v=l.return,S=l,C=i;if(i=lt,S.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var P=C,U=S,z=U.tag;if((U.mode&1)===0&&(z===0||z===11||z===15)){var F=U.alternate;F?(U.updateQueue=F.updateQueue,U.memoizedState=F.memoizedState,U.lanes=F.lanes):(U.updateQueue=null,U.memoizedState=null)}var K=Ip(v);if(K!==null){K.flags&=-257,Np(K,v,S,h,i),K.mode&1&&xp(h,P,i),i=K,C=P;var Z=i.updateQueue;if(Z===null){var ne=new Set;ne.add(C),i.updateQueue=ne}else Z.add(C);break e}else{if((i&1)===0){xp(h,P,i),du();break e}C=Error(n(426))}}else if(Ue&&S.mode&1){var Ke=Ip(v);if(Ke!==null){(Ke.flags&65536)===0&&(Ke.flags|=256),Np(Ke,v,S,h,i),Cc(li(C,S));break e}}h=C=li(C,S),Xe!==4&&(Xe=2),Cs===null?Cs=[h]:Cs.push(h),h=v;do{switch(h.tag){case 3:h.flags|=65536,i&=-i,h.lanes|=i;var N=Cp(h,C,i);Qf(h,N);break e;case 1:S=C;var E=h.type,T=h.stateNode;if((h.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Wn===null||!Wn.has(T)))){h.flags|=65536,i&=-i,h.lanes|=i;var W=Ep(h,S,i);Qf(h,W);break e}}h=h.return}while(h!==null)}rm(l)}catch(ie){i=ie,Qe===l&&l!==null&&(Qe=l=l.return);continue}break}while(!0)}function tm(){var t=ol.current;return ol.current=el,t===null?el:t}function du(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),nt===null||(wr&268435455)===0&&(ll&268435455)===0||Gn(nt,lt)}function fl(t,i){var l=xe;xe|=2;var c=tm();(nt!==t||lt!==i)&&(yn=null,Cr(t,i));do try{Yw();break}catch(d){em(t,d)}while(!0);if(xc(),xe=l,ol.current=c,Qe!==null)throw Error(n(261));return nt=null,lt=0,Xe}function Yw(){for(;Qe!==null;)nm(Qe)}function Jw(){for(;Qe!==null&&!Cy();)nm(Qe)}function nm(t){var i=om(t.alternate,t,At);t.memoizedProps=t.pendingProps,i===null?rm(t):Qe=i,nu.current=null}function rm(t){var i=t;do{var l=i.alternate;if(t=i.return,(i.flags&32768)===0){if(l=Ww(l,i,At),l!==null){Qe=l;return}}else{if(l=Vw(l,i),l!==null){l.flags&=32767,Qe=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,Qe=null;return}}if(i=i.sibling,i!==null){Qe=i;return}Qe=i=t}while(i!==null);Xe===0&&(Xe=5)}function Er(t,i,l){var c=Re,d=Lt.transition;try{Lt.transition=null,Re=1,Xw(t,i,l,c)}finally{Lt.transition=d,Re=c}return null}function Xw(t,i,l,c){do di();while(Vn!==null);if((xe&6)!==0)throw Error(n(327));l=t.finishedWork;var d=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var h=l.lanes|l.childLanes;if(by(t,h),t===nt&&(Qe=nt=null,lt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||cl||(cl=!0,lm(vo,function(){return di(),null})),h=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||h){h=Lt.transition,Lt.transition=null;var v=Re;Re=1;var S=xe;xe|=4,nu.current=null,Gw(t,l),qp(l,t),_w(dc),xo=!!uc,dc=uc=null,t.current=l,qw(l),Ey(),xe=S,Re=v,Lt.transition=h}else t.current=l;if(cl&&(cl=!1,Vn=t,ul=d),h=t.pendingLanes,h===0&&(Wn=null),Ny(l.stateNode),It(t,qe()),i!==null)for(c=t.onRecoverableError,l=0;l<i.length;l++)d=i[l],c(d.value,{componentStack:d.stack,digest:d.digest});if(al)throw al=!1,t=su,su=null,t;return(ul&1)!==0&&t.tag!==0&&di(),h=t.pendingLanes,(h&1)!==0?t===ou?Es++:(Es=0,ou=t):Es=0,Un(),null}function di(){if(Vn!==null){var t=Vh(ul),i=Lt.transition,l=Re;try{if(Lt.transition=null,Re=16>t?16:t,Vn===null)var c=!1;else{if(t=Vn,Vn=null,ul=0,(xe&6)!==0)throw Error(n(331));var d=xe;for(xe|=4,J=t.current;J!==null;){var h=J,v=h.child;if((J.flags&16)!==0){var S=h.deletions;if(S!==null){for(var C=0;C<S.length;C++){var P=S[C];for(J=P;J!==null;){var U=J;switch(U.tag){case 0:case 11:case 15:ws(8,U,h)}var z=U.child;if(z!==null)z.return=U,J=z;else for(;J!==null;){U=J;var F=U.sibling,K=U.return;if(Bp(U),U===P){J=null;break}if(F!==null){F.return=K,J=F;break}J=K}}}var Z=h.alternate;if(Z!==null){var ne=Z.child;if(ne!==null){Z.child=null;do{var Ke=ne.sibling;ne.sibling=null,ne=Ke}while(ne!==null)}}J=h}}if((h.subtreeFlags&2064)!==0&&v!==null)v.return=h,J=v;else e:for(;J!==null;){if(h=J,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:ws(9,h,h.return)}var N=h.sibling;if(N!==null){N.return=h.return,J=N;break e}J=h.return}}var E=t.current;for(J=E;J!==null;){v=J;var T=v.child;if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,J=T;else e:for(v=E;J!==null;){if(S=J,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:sl(9,S)}}catch(ie){We(S,S.return,ie)}if(S===v){J=null;break e}var W=S.sibling;if(W!==null){W.return=S.return,J=W;break e}J=S.return}}if(xe=d,Un(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(_o,t)}catch{}c=!0}return c}finally{Re=l,Lt.transition=i}}return!1}function im(t,i,l){i=li(l,i),i=Cp(t,i,1),t=$n(t,i,1),i=gt(),t!==null&&(qi(t,1,i),It(t,i))}function We(t,i,l){if(t.tag===3)im(t,t,l);else for(;i!==null;){if(i.tag===3){im(i,t,l);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Wn===null||!Wn.has(c))){t=li(l,t),t=Ep(i,t,1),i=$n(i,t,1),t=gt(),i!==null&&(qi(i,1,t),It(i,t));break}}i=i.return}}function Zw(t,i,l){var c=t.pingCache;c!==null&&c.delete(i),i=gt(),t.pingedLanes|=t.suspendedLanes&l,nt===t&&(lt&l)===l&&(Xe===4||Xe===3&&(lt&130023424)===lt&&500>qe()-iu?Cr(t,0):ru|=l),It(t,i)}function sm(t,i){i===0&&((t.mode&1)===0?i=1:(i=wo,wo<<=1,(wo&130023424)===0&&(wo=4194304)));var l=gt();t=gn(t,i),t!==null&&(qi(t,i,l),It(t,l))}function e0(t){var i=t.memoizedState,l=0;i!==null&&(l=i.retryLane),sm(t,l)}function t0(t,i){var l=0;switch(t.tag){case 13:var c=t.stateNode,d=t.memoizedState;d!==null&&(l=d.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(i),sm(t,l)}var om;om=function(t,i,l){if(t!==null)if(t.memoizedProps!==i.pendingProps||St.current)Et=!0;else{if((t.lanes&l)===0&&(i.flags&128)===0)return Et=!1,Bw(t,i,l);Et=(t.flags&131072)!==0}else Et=!1,Ue&&(i.flags&1048576)!==0&&Uf(i,Bo,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;rl(t,i),t=i.pendingProps;var d=Zr(i,ut.current);si(i,l),d=jc(null,i,c,t,d,l);var h=Lc();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ct(c)?(h=!0,Uo(i)):h=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,kc(i),d.updater=tl,i.stateNode=d,d._reactInternals=i,Bc(i,c,t,l),i=Gc(null,i,c,!0,h,l)):(i.tag=0,Ue&&h&&_c(i),mt(null,i,d,l),i=i.child),i;case 16:c=i.elementType;e:{switch(rl(t,i),t=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=r0(c),t=Wt(c,t),d){case 0:i=Hc(null,i,c,t,l);break e;case 1:i=bp(null,i,c,t,l);break e;case 11:i=Tp(null,i,c,t,l);break e;case 14:i=kp(null,i,c,Wt(c.type,t),l);break e}throw Error(n(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Wt(c,d),Hc(t,i,c,d,l);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Wt(c,d),bp(t,i,c,d,l);case 3:e:{if(Dp(i),t===null)throw Error(n(387));c=i.pendingProps,h=i.memoizedState,d=h.element,Kf(t,i),Ko(i,c,null,l);var v=i.memoizedState;if(c=v.element,h.isDehydrated)if(h={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){d=li(Error(n(423)),i),i=Op(t,i,c,l,d);break e}else if(c!==d){d=li(Error(n(424)),i),i=Op(t,i,c,l,d);break e}else for(Rt=Ln(i.stateNode.containerInfo.firstChild),Pt=i,Ue=!0,Bt=null,l=Gf(i,null,c,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ni(),c===d){i=_n(t,i,l);break e}mt(t,i,c,l)}i=i.child}return i;case 5:return Jf(i),t===null&&Sc(i),c=i.type,d=i.pendingProps,h=t!==null?t.memoizedProps:null,v=d.children,hc(c,d)?v=null:h!==null&&hc(c,h)&&(i.flags|=32),Ap(t,i),mt(t,i,v,l),i.child;case 6:return t===null&&Sc(i),null;case 13:return jp(t,i,l);case 4:return Pc(i,i.stateNode.containerInfo),c=i.pendingProps,t===null?i.child=ri(i,null,c,l):mt(t,i,c,l),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Wt(c,d),Tp(t,i,c,d,l);case 7:return mt(t,i,i.pendingProps,l),i.child;case 8:return mt(t,i,i.pendingProps.children,l),i.child;case 12:return mt(t,i,i.pendingProps.children,l),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,h=i.memoizedProps,v=d.value,De(Ho,c._currentValue),c._currentValue=v,h!==null)if($t(h.value,v)){if(h.children===d.children&&!St.current){i=_n(t,i,l);break e}}else for(h=i.child,h!==null&&(h.return=i);h!==null;){var S=h.dependencies;if(S!==null){v=h.child;for(var C=S.firstContext;C!==null;){if(C.context===c){if(h.tag===1){C=vn(-1,l&-l),C.tag=2;var P=h.updateQueue;if(P!==null){P=P.shared;var U=P.pending;U===null?C.next=C:(C.next=U.next,U.next=C),P.pending=C}}h.lanes|=l,C=h.alternate,C!==null&&(C.lanes|=l),Nc(h.return,l,i),S.lanes|=l;break}C=C.next}}else if(h.tag===10)v=h.type===i.type?null:h.child;else if(h.tag===18){if(v=h.return,v===null)throw Error(n(341));v.lanes|=l,S=v.alternate,S!==null&&(S.lanes|=l),Nc(v,l,i),v=h.sibling}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===i){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}mt(t,i,d.children,l),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,si(i,l),d=Ot(d),c=c(d),i.flags|=1,mt(t,i,c,l),i.child;case 14:return c=i.type,d=Wt(c,i.pendingProps),d=Wt(c.type,d),kp(t,i,c,d,l);case 15:return Pp(t,i,i.type,i.pendingProps,l);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Wt(c,d),rl(t,i),i.tag=1,Ct(c)?(t=!0,Uo(i)):t=!1,si(i,l),wp(i,c,d),Bc(i,c,d,l),Gc(null,i,c,!0,t,l);case 19:return Mp(t,i,l);case 22:return Rp(t,i,l)}throw Error(n(156,i.tag))};function lm(t,i){return Uh(t,i)}function n0(t,i,l,c){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,i,l,c){return new n0(t,i,l,c)}function hu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r0(t){if(typeof t=="function")return hu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ge)return 11;if(t===re)return 14}return 2}function qn(t,i){var l=t.alternate;return l===null?(l=Mt(t.tag,i,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=i,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,i=t.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function pl(t,i,l,c,d,h){var v=2;if(c=t,typeof t=="function")hu(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case te:return xr(l.children,d,h,i);case fe:v=8,d|=8;break;case Ce:return t=Mt(12,l,i,d|2),t.elementType=Ce,t.lanes=h,t;case L:return t=Mt(13,l,i,d),t.elementType=L,t.lanes=h,t;case D:return t=Mt(19,l,i,d),t.elementType=D,t.lanes=h,t;case X:return ml(l,d,h,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pe:v=10;break e;case Ye:v=9;break e;case Ge:v=11;break e;case re:v=14;break e;case pe:v=16,c=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return i=Mt(v,l,i,d),i.elementType=t,i.type=c,i.lanes=h,i}function xr(t,i,l,c){return t=Mt(7,t,c,i),t.lanes=l,t}function ml(t,i,l,c){return t=Mt(22,t,c,i),t.elementType=X,t.lanes=l,t.stateNode={isHidden:!1},t}function fu(t,i,l){return t=Mt(6,t,null,i),t.lanes=l,t}function pu(t,i,l){return i=Mt(4,t.children!==null?t.children:[],t.key,i),i.lanes=l,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function i0(t,i,l,c,d){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$a(0),this.expirationTimes=$a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function mu(t,i,l,c,d,h,v,S,C){return t=new i0(t,i,l,S,C),i===1?(i=1,h===!0&&(i|=8)):i=0,h=Mt(3,null,null,i),t.current=h,h.stateNode=t,h.memoizedState={element:c,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},kc(h),t}function s0(t,i,l){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:c==null?null:""+c,children:t,containerInfo:i,implementation:l}}function am(t){if(!t)return Fn;t=t._reactInternals;e:{if(hr(t)!==t||t.tag!==1)throw Error(n(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ct(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(t.tag===1){var l=t.type;if(Ct(l))return Lf(t,l,i)}return i}function cm(t,i,l,c,d,h,v,S,C){return t=mu(l,c,!0,t,d,h,v,S,C),t.context=am(null),l=t.current,c=gt(),d=Hn(l),h=vn(c,d),h.callback=i??null,$n(l,h,d),t.current.lanes=d,qi(t,d,c),It(t,c),t}function gl(t,i,l,c){var d=i.current,h=gt(),v=Hn(d);return l=am(l),i.context===null?i.context=l:i.pendingContext=l,i=vn(h,v),i.payload={element:t},c=c===void 0?null:c,c!==null&&(i.callback=c),t=$n(d,i,v),t!==null&&(Gt(t,d,v,h),qo(t,d,v)),v}function vl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function um(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<i?l:i}}function gu(t,i){um(t,i),(t=t.alternate)&&um(t,i)}function o0(){return null}var dm=typeof reportError=="function"?reportError:function(t){console.error(t)};function vu(t){this._internalRoot=t}_l.prototype.render=vu.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(n(409));gl(t,i,null,null)},_l.prototype.unmount=vu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Sr(function(){gl(null,t,null,null)}),i[hn]=null}};function _l(t){this._internalRoot=t}_l.prototype.unstable_scheduleHydration=function(t){if(t){var i=qh();t={blockedOn:null,target:t,priority:i};for(var l=0;l<Dn.length&&i!==0&&i<Dn[l].priority;l++);Dn.splice(l,0,t),l===0&&Yh(t)}};function _u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hm(){}function l0(t,i,l,c,d){if(d){if(typeof c=="function"){var h=c;c=function(){var P=vl(v);h.call(P)}}var v=cm(i,c,t,0,null,!1,!1,"",hm);return t._reactRootContainer=v,t[hn]=v.current,ls(t.nodeType===8?t.parentNode:t),Sr(),v}for(;d=t.lastChild;)t.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var P=vl(C);S.call(P)}}var C=mu(t,0,!1,null,null,!1,!1,"",hm);return t._reactRootContainer=C,t[hn]=C.current,ls(t.nodeType===8?t.parentNode:t),Sr(function(){gl(i,C,l,c)}),C}function wl(t,i,l,c,d){var h=l._reactRootContainer;if(h){var v=h;if(typeof d=="function"){var S=d;d=function(){var C=vl(v);S.call(C)}}gl(i,v,t,d)}else v=l0(l,i,t,d,c);return vl(v)}Hh=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var l=Gi(i.pendingLanes);l!==0&&(Ba(i,l|1),It(i,qe()),(xe&6)===0&&(ui=qe()+500,Un()))}break;case 13:Sr(function(){var c=gn(t,1);if(c!==null){var d=gt();Gt(c,t,1,d)}}),gu(t,1)}},Wa=function(t){if(t.tag===13){var i=gn(t,134217728);if(i!==null){var l=gt();Gt(i,t,134217728,l)}gu(t,134217728)}},Gh=function(t){if(t.tag===13){var i=Hn(t),l=gn(t,i);if(l!==null){var c=gt();Gt(l,t,i,c)}gu(t,i)}},qh=function(){return Re},Kh=function(t,i){var l=Re;try{return Re=t,i()}finally{Re=l}},ja=function(t,i,l){switch(i){case"input":if(Ta(t,l),i=l.name,l.type==="radio"&&i!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var c=l[i];if(c!==t&&c.form===t.form){var d=Mo(c);if(!d)throw Error(n(90));tn(c),Ta(c,d)}}}break;case"textarea":Eh(t,l);break;case"select":i=l.value,i!=null&&$r(t,!!l.multiple,i,!1)}},bh=cu,Dh=Sr;var a0={usingClientEntryPoint:!1,Events:[us,Jr,Mo,Rh,Ah,cu]},xs={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c0={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mh(t),t===null?null:t.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||o0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{_o=Sl.inject(c0),nn=Sl}catch{}}return Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a0,Nt.createPortal=function(t,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_u(i))throw Error(n(200));return s0(t,i,null,l)},Nt.createRoot=function(t,i){if(!_u(t))throw Error(n(299));var l=!1,c="",d=dm;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=mu(t,1,!1,null,null,l,!1,c,d),t[hn]=i.current,ls(t.nodeType===8?t.parentNode:t),new vu(i)},Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=Mh(i),t=t===null?null:t.stateNode,t},Nt.flushSync=function(t){return Sr(t)},Nt.hydrate=function(t,i,l){if(!yl(i))throw Error(n(200));return wl(null,t,i,!0,l)},Nt.hydrateRoot=function(t,i,l){if(!_u(t))throw Error(n(405));var c=l!=null&&l.hydratedSources||null,d=!1,h="",v=dm;if(l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),i=cm(i,null,t,1,l??null,d,!1,h,v),t[hn]=i.current,ls(t),c)for(t=0;t<c.length;t++)l=c[t],d=l._getVersion,d=d(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,d]:i.mutableSourceEagerHydrationData.push(l,d);return new _l(i)},Nt.render=function(t,i,l){if(!yl(i))throw Error(n(200));return wl(null,t,i,!1,l)},Nt.unmountComponentAtNode=function(t){if(!yl(t))throw Error(n(40));return t._reactRootContainer?(Sr(function(){wl(null,null,t,!1,function(){t._reactRootContainer=null,t[hn]=null})}),!0):!1},Nt.unstable_batchedUpdates=cu,Nt.unstable_renderSubtreeIntoContainer=function(t,i,l,c){if(!yl(l))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return wl(t,i,l,!1,c)},Nt.version="18.3.1-next-f1338f8080-20240426",Nt}var wm;function Vg(){if(wm)return Su.exports;wm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Su.exports=_0(),Su.exports}var Sm;function y0(){if(Sm)return Cl;Sm=1;var r=Vg();return Cl.createRoot=r.createRoot,Cl.hydrateRoot=r.hydrateRoot,Cl}var w0=y0();const S0=Bg(w0);Vg();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Us(){return Us=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Us.apply(this,arguments)}var Zn;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Zn||(Zn={}));const Cm="popstate";function C0(r){r===void 0&&(r={});function e(s,o){let{pathname:a,search:u,hash:p}=s.location;return Wu("",{pathname:a,search:u,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:bl(o)}return x0(e,n,null,r)}function Be(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function vd(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E0(){return Math.random().toString(36).substr(2,8)}function Em(r,e){return{usr:r.state,key:r.key,idx:e}}function Wu(r,e,n,s){return n===void 0&&(n=null),Us({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Pi(e):e,{state:n,key:e&&e.key||s||E0()})}function bl(r){let{pathname:e="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Pi(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function x0(r,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:a=!1}=s,u=o.history,p=Zn.Pop,m=null,g=y();g==null&&(g=0,u.replaceState(Us({},u.state,{idx:g}),""));function y(){return(u.state||{idx:null}).idx}function _(){p=Zn.Pop;let O=y(),Q=O==null?null:O-g;g=O,m&&m({action:p,location:j.location,delta:Q})}function w(O,Q){p=Zn.Push;let A=Wu(j.location,O,Q);g=y()+1;let G=Em(A,g),H=j.createHref(A);try{u.pushState(G,"",H)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;o.location.assign(H)}a&&m&&m({action:p,location:j.location,delta:1})}function R(O,Q){p=Zn.Replace;let A=Wu(j.location,O,Q);g=y();let G=Em(A,g),H=j.createHref(A);u.replaceState(G,"",H),a&&m&&m({action:p,location:j.location,delta:0})}function b(O){let Q=o.location.origin!=="null"?o.location.origin:o.location.href,A=typeof O=="string"?O:bl(O);return A=A.replace(/ $/,"%20"),Be(Q,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,Q)}let j={get action(){return p},get location(){return r(o,u)},listen(O){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Cm,_),m=O,()=>{o.removeEventListener(Cm,_),m=null}},createHref(O){return e(o,O)},createURL:b,encodeLocation(O){let Q=b(O);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:w,replace:R,go(O){return u.go(O)}};return j}var xm;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(xm||(xm={}));function I0(r,e,n){return n===void 0&&(n="/"),N0(r,e,n)}function N0(r,e,n,s){let o=typeof e=="string"?Pi(e):e,a=yi(o.pathname||"/",n);if(a==null)return null;let u=Hg(r);T0(u);let p=null;for(let m=0;p==null&&m<u.length;++m){let g=F0(a);p=L0(u[m],g)}return p}function Hg(r,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(a,u,p)=>{let m={relativePath:p===void 0?a.path||"":p,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};m.relativePath.startsWith("/")&&(Be(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let g=tr([s,m.relativePath]),y=n.concat(m);a.children&&a.children.length>0&&(Be(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Hg(a.children,e,y,g)),!(a.path==null&&!a.index)&&e.push({path:g,score:O0(g,a.index),routesMeta:y})};return r.forEach((a,u)=>{var p;if(a.path===""||!((p=a.path)!=null&&p.includes("?")))o(a,u);else for(let m of Gg(a.path))o(a,u,m)}),e}function Gg(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return o?[a,""]:[a];let u=Gg(s.join("/")),p=[];return p.push(...u.map(m=>m===""?a:[a,m].join("/"))),o&&p.push(...u),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function T0(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:j0(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const k0=/^:[\w-]+$/,P0=3,R0=2,A0=1,b0=10,D0=-2,Im=r=>r==="*";function O0(r,e){let n=r.split("/"),s=n.length;return n.some(Im)&&(s+=D0),e&&(s+=R0),n.filter(o=>!Im(o)).reduce((o,a)=>o+(k0.test(a)?P0:a===""?A0:b0),s)}function j0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function L0(r,e,n){let{routesMeta:s}=r,o={},a="/",u=[];for(let p=0;p<s.length;++p){let m=s[p],g=p===s.length-1,y=a==="/"?e:e.slice(a.length)||"/",_=Vu({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),w=m.route;if(!_)return null;Object.assign(o,_.params),u.push({params:o,pathname:tr([a,_.pathname]),pathnameBase:W0(tr([a,_.pathnameBase])),route:w}),_.pathnameBase!=="/"&&(a=tr([a,_.pathnameBase]))}return u}function Vu(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=M0(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((g,y,_)=>{let{paramName:w,isOptional:R}=y;if(w==="*"){let j=p[_]||"";u=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const b=p[_];return R&&!b?g[w]=void 0:g[w]=(b||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:u,pattern:r}}function M0(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vd(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function F0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vd(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function yi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}const U0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z0=r=>U0.test(r);function $0(r,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?Pi(r):r,a;if(n)if(z0(n))a=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),vd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+n))}n.startsWith("/")?a=Nm(n.substring(1),"/"):a=Nm(n,e)}else a=e;return{pathname:a,search:V0(s),hash:H0(o)}}function Nm(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function xu(r,e,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function B0(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _d(r,e){let n=B0(r);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function yd(r,e,n,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Pi(r):(o=Us({},r),Be(!o.pathname||!o.pathname.includes("?"),xu("?","pathname","search",o)),Be(!o.pathname||!o.pathname.includes("#"),xu("#","pathname","hash",o)),Be(!o.search||!o.search.includes("#"),xu("#","search","hash",o)));let a=r===""||o.pathname==="",u=a?"/":o.pathname,p;if(u==null)p=n;else{let _=e.length-1;if(!s&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),_-=1;o.pathname=w.join("/")}p=_>=0?e[_]:"/"}let m=$0(o,p),g=u&&u!=="/"&&u.endsWith("/"),y=(a||u===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}const tr=r=>r.join("/").replace(/\/\/+/g,"/"),W0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),V0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,H0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function G0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const qg=["post","put","patch","delete"];new Set(qg);const q0=["get",...qg];new Set(q0);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zs(){return zs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},zs.apply(this,arguments)}const ia=k.createContext(null),Kg=k.createContext(null),kn=k.createContext(null),sa=k.createContext(null),ur=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Qg=k.createContext(null);function K0(r,e){let{relative:n}=e===void 0?{}:e;Ri()||Be(!1);let{basename:s,navigator:o}=k.useContext(kn),{hash:a,pathname:u,search:p}=oa(r,{relative:n}),m=u;return s!=="/"&&(m=u==="/"?s:tr([s,u])),o.createHref({pathname:m,search:p,hash:a})}function Ri(){return k.useContext(sa)!=null}function Fr(){return Ri()||Be(!1),k.useContext(sa).location}function Yg(r){k.useContext(kn).static||k.useLayoutEffect(r)}function wd(){let{isDataRoute:r}=k.useContext(ur);return r?lS():Q0()}function Q0(){Ri()||Be(!1);let r=k.useContext(ia),{basename:e,future:n,navigator:s}=k.useContext(kn),{matches:o}=k.useContext(ur),{pathname:a}=Fr(),u=JSON.stringify(_d(o,n.v7_relativeSplatPath)),p=k.useRef(!1);return Yg(()=>{p.current=!0}),k.useCallback(function(g,y){if(y===void 0&&(y={}),!p.current)return;if(typeof g=="number"){s.go(g);return}let _=yd(g,JSON.parse(u),a,y.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:tr([e,_.pathname])),(y.replace?s.replace:s.push)(_,y.state,y)},[e,s,u,a,r])}function oa(r,e){let{relative:n}=e===void 0?{}:e,{future:s}=k.useContext(kn),{matches:o}=k.useContext(ur),{pathname:a}=Fr(),u=JSON.stringify(_d(o,s.v7_relativeSplatPath));return k.useMemo(()=>yd(r,JSON.parse(u),a,n==="path"),[r,u,a,n])}function Y0(r,e){return J0(r,e)}function J0(r,e,n,s){Ri()||Be(!1);let{navigator:o}=k.useContext(kn),{matches:a}=k.useContext(ur),u=a[a.length-1],p=u?u.params:{};u&&u.pathname;let m=u?u.pathnameBase:"/";u&&u.route;let g=Fr(),y;if(e){var _;let O=typeof e=="string"?Pi(e):e;m==="/"||(_=O.pathname)!=null&&_.startsWith(m)||Be(!1),y=O}else y=g;let w=y.pathname||"/",R=w;if(m!=="/"){let O=m.replace(/^\//,"").split("/");R="/"+w.replace(/^\//,"").split("/").slice(O.length).join("/")}let b=I0(r,{pathname:R}),j=nS(b&&b.map(O=>Object.assign({},O,{params:Object.assign({},p,O.params),pathname:tr([m,o.encodeLocation?o.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?m:tr([m,o.encodeLocation?o.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),a,n,s);return e&&j?k.createElement(sa.Provider,{value:{location:zs({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Zn.Pop}},j):j}function X0(){let r=oS(),e=G0(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,null)}const Z0=k.createElement(X0,null);class eS extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(ur.Provider,{value:this.props.routeContext},k.createElement(Qg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tS(r){let{routeContext:e,match:n,children:s}=r,o=k.useContext(ia);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(ur.Provider,{value:e},s)}function nS(r,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var a;if(!n)return null;if(n.errors)r=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,p=(o=n)==null?void 0:o.errors;if(p!=null){let y=u.findIndex(_=>_.route.id&&(p==null?void 0:p[_.route.id])!==void 0);y>=0||Be(!1),u=u.slice(0,Math.min(u.length,y+1))}let m=!1,g=-1;if(n&&s&&s.v7_partialHydration)for(let y=0;y<u.length;y++){let _=u[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=y),_.route.id){let{loaderData:w,errors:R}=n,b=_.route.loader&&w[_.route.id]===void 0&&(!R||R[_.route.id]===void 0);if(_.route.lazy||b){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((y,_,w)=>{let R,b=!1,j=null,O=null;n&&(R=p&&_.route.id?p[_.route.id]:void 0,j=_.route.errorElement||Z0,m&&(g<0&&w===0?(aS("route-fallback"),b=!0,O=null):g===w&&(b=!0,O=_.route.hydrateFallbackElement||null)));let Q=e.concat(u.slice(0,w+1)),A=()=>{let G;return R?G=j:b?G=O:_.route.Component?G=k.createElement(_.route.Component,null):_.route.element?G=_.route.element:G=y,k.createElement(tS,{match:_,routeContext:{outlet:y,matches:Q,isDataRoute:n!=null},children:G})};return n&&(_.route.ErrorBoundary||_.route.errorElement||w===0)?k.createElement(eS,{location:n.location,revalidation:n.revalidation,component:j,error:R,children:A(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):A()},null)}var Jg=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Jg||{}),Xg=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Xg||{});function rS(r){let e=k.useContext(ia);return e||Be(!1),e}function iS(r){let e=k.useContext(Kg);return e||Be(!1),e}function sS(r){let e=k.useContext(ur);return e||Be(!1),e}function Zg(r){let e=sS(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function oS(){var r;let e=k.useContext(Qg),n=iS(),s=Zg();return e!==void 0?e:(r=n.errors)==null?void 0:r[s]}function lS(){let{router:r}=rS(Jg.UseNavigateStable),e=Zg(Xg.UseNavigateStable),n=k.useRef(!1);return Yg(()=>{n.current=!0}),k.useCallback(function(o,a){a===void 0&&(a={}),n.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,zs({fromRouteId:e},a)))},[r,e])}const Tm={};function aS(r,e,n){Tm[r]||(Tm[r]=!0)}function cS(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function uS(r){let{to:e,replace:n,state:s,relative:o}=r;Ri()||Be(!1);let{future:a,static:u}=k.useContext(kn),{matches:p}=k.useContext(ur),{pathname:m}=Fr(),g=wd(),y=yd(e,_d(p,a.v7_relativeSplatPath),m,o==="path"),_=JSON.stringify(y);return k.useEffect(()=>g(JSON.parse(_),{replace:n,state:s,relative:o}),[g,_,o,n,s]),null}function Nr(r){Be(!1)}function dS(r){let{basename:e="/",children:n=null,location:s,navigationType:o=Zn.Pop,navigator:a,static:u=!1,future:p}=r;Ri()&&Be(!1);let m=e.replace(/^\/*/,"/"),g=k.useMemo(()=>({basename:m,navigator:a,static:u,future:zs({v7_relativeSplatPath:!1},p)}),[m,p,a,u]);typeof s=="string"&&(s=Pi(s));let{pathname:y="/",search:_="",hash:w="",state:R=null,key:b="default"}=s,j=k.useMemo(()=>{let O=yi(y,m);return O==null?null:{location:{pathname:O,search:_,hash:w,state:R,key:b},navigationType:o}},[m,y,_,w,R,b,o]);return j==null?null:k.createElement(kn.Provider,{value:g},k.createElement(sa.Provider,{children:n,value:j}))}function hS(r){let{children:e,location:n}=r;return Y0(Hu(e),n)}new Promise(()=>{});function Hu(r,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(r,(s,o)=>{if(!k.isValidElement(s))return;let a=[...e,o];if(s.type===k.Fragment){n.push.apply(n,Hu(s.props.children,a));return}s.type!==Nr&&Be(!1),!s.props.index||!s.props.children||Be(!1);let u={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Hu(s.props.children,a)),n.push(u)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dl(){return Dl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Dl.apply(this,arguments)}function ev(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,a;for(a=0;a<s.length;a++)o=s[a],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function fS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function pS(r,e){return r.button===0&&(!e||e==="_self")&&!fS(r)}const mS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],vS="6";try{window.__reactRouterVersion=vS}catch{}const _S=k.createContext({isTransitioning:!1}),yS="startTransition",km=m0[yS];function wS(r){let{basename:e,children:n,future:s,window:o}=r,a=k.useRef();a.current==null&&(a.current=C0({window:o,v5Compat:!0}));let u=a.current,[p,m]=k.useState({action:u.action,location:u.location}),{v7_startTransition:g}=s||{},y=k.useCallback(_=>{g&&km?km(()=>m(_)):m(_)},[m,g]);return k.useLayoutEffect(()=>u.listen(y),[u,y]),k.useEffect(()=>cS(s),[s]),k.createElement(dS,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:u,future:s})}const SS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ES=k.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:a,replace:u,state:p,target:m,to:g,preventScrollReset:y,viewTransition:_}=e,w=ev(e,mS),{basename:R}=k.useContext(kn),b,j=!1;if(typeof g=="string"&&CS.test(g)&&(b=g,SS))try{let G=new URL(window.location.href),H=g.startsWith("//")?new URL(G.protocol+g):new URL(g),Y=yi(H.pathname,R);H.origin===G.origin&&Y!=null?g=Y+H.search+H.hash:j=!0}catch{}let O=K0(g,{relative:o}),Q=IS(g,{replace:u,state:p,target:m,preventScrollReset:y,relative:o,viewTransition:_});function A(G){s&&s(G),G.defaultPrevented||Q(G)}return k.createElement("a",Dl({},w,{href:b||O,onClick:j||a?s:A,ref:n,target:m}))}),Ns=k.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:o=!1,className:a="",end:u=!1,style:p,to:m,viewTransition:g,children:y}=e,_=ev(e,gS),w=oa(m,{relative:_.relative}),R=Fr(),b=k.useContext(Kg),{navigator:j,basename:O}=k.useContext(kn),Q=b!=null&&NS(w)&&g===!0,A=j.encodeLocation?j.encodeLocation(w).pathname:w.pathname,G=R.pathname,H=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;o||(G=G.toLowerCase(),H=H?H.toLowerCase():null,A=A.toLowerCase()),H&&O&&(H=yi(H,O)||H);const Y=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let ee=G===A||!u&&G.startsWith(A)&&G.charAt(Y)==="/",te=H!=null&&(H===A||!u&&H.startsWith(A)&&H.charAt(A.length)==="/"),fe={isActive:ee,isPending:te,isTransitioning:Q},Ce=ee?s:void 0,Pe;typeof a=="function"?Pe=a(fe):Pe=[a,ee?"active":null,te?"pending":null,Q?"transitioning":null].filter(Boolean).join(" ");let Ye=typeof p=="function"?p(fe):p;return k.createElement(ES,Dl({},_,{"aria-current":Ce,className:Pe,ref:n,style:Ye,to:m,viewTransition:g}),typeof y=="function"?y(fe):y)});var Gu;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Gu||(Gu={}));var Pm;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Pm||(Pm={}));function xS(r){let e=k.useContext(ia);return e||Be(!1),e}function IS(r,e){let{target:n,replace:s,state:o,preventScrollReset:a,relative:u,viewTransition:p}=e===void 0?{}:e,m=wd(),g=Fr(),y=oa(r,{relative:u});return k.useCallback(_=>{if(pS(_,n)){_.preventDefault();let w=s!==void 0?s:bl(g)===bl(y);m(r,{replace:w,state:o,preventScrollReset:a,relative:u,viewTransition:p})}},[g,m,y,s,o,n,r,a,u,p])}function NS(r,e){e===void 0&&(e={});let n=k.useContext(_S);n==null&&Be(!1);let{basename:s}=xS(Gu.useViewTransitionState),o=oa(r,{relative:e.relative});if(!n.isTransitioning)return!1;let a=yi(n.currentLocation.pathname,s)||n.currentLocation.pathname,u=yi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Vu(o.pathname,u)!=null||Vu(o.pathname,a)!=null}const TS=()=>{};var Rm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V=function(r,e){if(!r)throw Ai(e)},Ai=function(r){return new Error("Firebase Database ("+tv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},kS=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const a=r[n++];e[s++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=r[n++],u=r[n++],p=r[n++],m=((o&7)<<18|(a&63)<<12|(u&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const a=r[n++],u=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Sd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const a=r[o],u=o+1<r.length,p=u?r[o+1]:0,m=o+2<r.length,g=m?r[o+2]:0,y=a>>2,_=(a&3)<<4|p>>4;let w=(p&15)<<2|g>>6,R=g&63;m||(R=64,u||(w=64)),s.push(n[y],n[_],n[w],n[R])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(nv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):kS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const a=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const _=o<r.length?n[r.charAt(o)]:64;if(++o,a==null||p==null||g==null||_==null)throw new PS;const w=a<<2|p>>4;if(s.push(w),g!==64){const R=p<<4&240|g>>2;if(s.push(R),_!==64){const b=g<<6&192|_;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class PS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rv=function(r){const e=nv(r);return Sd.encodeByteArray(e,!0)},Ol=function(r){return rv(r).replace(/\./g,"")},jl=function(r){try{return Sd.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(r){return iv(void 0,r)}function iv(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!AS(n)||(r[n]=iv(r[n],e[n]));return r}function AS(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=()=>bS().__FIREBASE_DEFAULTS__,OS=()=>{if(typeof process>"u"||typeof Rm>"u")return;const r=Rm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},jS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&jl(r[1]);return e&&JSON.parse(e)},Cd=()=>{try{return TS()||DS()||OS()||jS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},sv=r=>{var e,n;return(n=(e=Cd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},LS=r=>{const e=sv(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ov=()=>{var r;return(r=Cd())===null||r===void 0?void 0:r.config},lv=r=>{var e;return(e=Cd())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function av(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ol(JSON.stringify(n)),Ol(JSON.stringify(u)),""].join(".")}const bs={};function FS(){const r={prod:[],emulator:[]};for(const e of Object.keys(bs))bs[e]?r.emulator.push(e):r.prod.push(e);return r}function US(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Am=!1;function cv(r,e){if(typeof window>"u"||typeof document>"u"||!bi(window.location.host)||bs[r]===e||bs[r]||Am)return;bs[r]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",a=FS().prod.length>0;function u(){const w=document.getElementById(s);w&&w.remove()}function p(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,R){w.setAttribute("width","24"),w.setAttribute("id",R),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Am=!0,u()},w}function y(w,R){w.setAttribute("id",R),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=US(s),R=n("text"),b=document.getElementById(R)||document.createElement("span"),j=n("learnmore"),O=document.getElementById(j)||document.createElement("a"),Q=n("preprendIcon"),A=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const G=w.element;p(G),y(O,j);const H=g();m(A,Q),G.append(A,b,O,H),document.body.appendChild(G)}a?(b.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ed(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function zS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $S(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function uv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BS(){const r=yt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function WS(){return tv.NODE_ADMIN===!0}function VS(){try{return typeof indexedDB=="object"}catch{return!1}}function HS(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="FirebaseError";class dr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=GS,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eo.prototype.create)}}class eo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?qS(a,s):"Error",p=`${this.serviceName}: ${u} (${o}).`;return new dr(o,p,s)}}function qS(r,e){return r.replace(KS,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const KS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(r){return JSON.parse(r)}function et(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=function(r){let e={},n={},s={},o="";try{const a=r.split(".");e=$s(jl(a[0])||""),n=$s(jl(a[1])||""),o=a[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:o}},QS=function(r){const e=dv(r),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},YS=function(r){const e=dv(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function wi(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function qu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ll(r,e,n){const s={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=e.call(n,r[o],o,r));return s}function br(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const a=r[o],u=e[o];if(bm(a)&&bm(u)){if(!br(a,u))return!1}else if(a!==u)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function bm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)s[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)s[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const w=s[_-3]^s[_-8]^s[_-14]^s[_-16];s[_]=(w<<1|w>>>31)&4294967295}let o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],p=this.chain_[3],m=this.chain_[4],g,y;for(let _=0;_<80;_++){_<40?_<20?(g=p^a&(u^p),y=1518500249):(g=a^u^p,y=1859775393):_<60?(g=a&u|p&(a|u),y=2400959708):(g=a^u^p,y=3395469782);const w=(o<<5|o>>>27)+g+m+y+s[_]&4294967295;m=p,p=u,u=(a<<30|a>>>2)&4294967295,a=o,o=w}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let o=0;const a=this.buf_;let u=this.inbuf_;for(;o<n;){if(u===0)for(;o<=s;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(a[u]=e.charCodeAt(o),++u,++o,u===this.blockSize){this.compress_(a),u=0;break}}else for(;o<n;)if(a[u]=e[o],++u,++o,u===this.blockSize){this.compress_(a),u=0;break}}this.inbuf_=u,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let a=24;a>=0;a-=8)e[s]=this.chain_[o]>>a&255,++s;return e}}function XS(r,e){const n=new ZS(r,e);return n.subscribe.bind(n)}class ZS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");eC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Iu),o.error===void 0&&(o.error=Iu),o.complete===void 0&&(o.complete=Iu);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eC(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Iu(){}function la(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);if(o>=55296&&o<=56319){const a=o-55296;s++,V(s<r.length,"Surrogate pair missing trail surrogate.");const u=r.charCodeAt(s)-56320;o=65536+(a<<10)+u}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},aa=function(r){let e=0;for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(r){return r&&r._delegate?r._delegate:r}class Dr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Zs;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iC(e))try{this.getOrInitializeService({instanceIdentifier:Tr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});s.resolve(a)}catch{}}}}clearInstance(e=Tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tr){return this.instances.has(e)}getOptions(e=Tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(a);s===p&&u.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Tr){return this.component?this.component.multipleInstances?e:Tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rC(r){return r===Tr?void 0:r}function iC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ae||(Ae={}));const oC={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},lC=Ae.INFO,aC={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},cC=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=aC[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xd{constructor(e){this.name=e,this._logLevel=lC,this._logHandler=cC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const uC=(r,e)=>e.some(n=>r instanceof n);let Dm,Om;function dC(){return Dm||(Dm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hC(){return Om||(Om=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hv=new WeakMap,Ku=new WeakMap,fv=new WeakMap,Nu=new WeakMap,Id=new WeakMap;function fC(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",a),r.removeEventListener("error",u)},a=()=>{n(nr(r.result)),o()},u=()=>{s(r.error),o()};r.addEventListener("success",a),r.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&hv.set(n,r)}).catch(()=>{}),Id.set(e,r),e}function pC(r){if(Ku.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",u),r.removeEventListener("abort",u)},a=()=>{n(),o()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",a),r.addEventListener("error",u),r.addEventListener("abort",u)});Ku.set(r,e)}let Qu={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Ku.get(r);if(e==="objectStoreNames")return r.objectStoreNames||fv.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function mC(r){Qu=r(Qu)}function gC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Tu(this),e,...n);return fv.set(s,e.sort?e.sort():[e]),nr(s)}:hC().includes(r)?function(...e){return r.apply(Tu(this),e),nr(hv.get(this))}:function(...e){return nr(r.apply(Tu(this),e))}}function vC(r){return typeof r=="function"?gC(r):(r instanceof IDBTransaction&&pC(r),uC(r,dC())?new Proxy(r,Qu):r)}function nr(r){if(r instanceof IDBRequest)return fC(r);if(Nu.has(r))return Nu.get(r);const e=vC(r);return e!==r&&(Nu.set(r,e),Id.set(e,r)),e}const Tu=r=>Id.get(r);function _C(r,e,{blocked:n,upgrade:s,blocking:o,terminated:a}={}){const u=indexedDB.open(r,e),p=nr(u);return s&&u.addEventListener("upgradeneeded",m=>{s(nr(u.result),m.oldVersion,m.newVersion,nr(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{a&&m.addEventListener("close",()=>a()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const yC=["get","getKey","getAll","getAllKeys","count"],wC=["put","add","delete","clear"],ku=new Map;function jm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ku.get(e))return ku.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=wC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||yC.includes(n)))return;const a=async function(u,...p){const m=this.transaction(u,o?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),o&&m.done]))[0]};return ku.set(e,a),a}mC(r=>({...r,get:(e,n,s)=>jm(e,n)||r.get(e,n,s),has:(e,n)=>!!jm(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function CC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yu="@firebase/app",Lm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new xd("@firebase/app"),EC="@firebase/app-compat",xC="@firebase/analytics-compat",IC="@firebase/analytics",NC="@firebase/app-check-compat",TC="@firebase/app-check",kC="@firebase/auth",PC="@firebase/auth-compat",RC="@firebase/database",AC="@firebase/data-connect",bC="@firebase/database-compat",DC="@firebase/functions",OC="@firebase/functions-compat",jC="@firebase/installations",LC="@firebase/installations-compat",MC="@firebase/messaging",FC="@firebase/messaging-compat",UC="@firebase/performance",zC="@firebase/performance-compat",$C="@firebase/remote-config",BC="@firebase/remote-config-compat",WC="@firebase/storage",VC="@firebase/storage-compat",HC="@firebase/firestore",GC="@firebase/ai",qC="@firebase/firestore-compat",KC="firebase",QC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="[DEFAULT]",YC={[Yu]:"fire-core",[EC]:"fire-core-compat",[IC]:"fire-analytics",[xC]:"fire-analytics-compat",[TC]:"fire-app-check",[NC]:"fire-app-check-compat",[kC]:"fire-auth",[PC]:"fire-auth-compat",[RC]:"fire-rtdb",[AC]:"fire-data-connect",[bC]:"fire-rtdb-compat",[DC]:"fire-fn",[OC]:"fire-fn-compat",[jC]:"fire-iid",[LC]:"fire-iid-compat",[MC]:"fire-fcm",[FC]:"fire-fcm-compat",[UC]:"fire-perf",[zC]:"fire-perf-compat",[$C]:"fire-rc",[BC]:"fire-rc-compat",[WC]:"fire-gcs",[VC]:"fire-gcs-compat",[HC]:"fire-fst",[qC]:"fire-fst-compat",[GC]:"fire-vertex","fire-js":"fire-js",[KC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=new Map,JC=new Map,Xu=new Map;function Mm(r,e){try{r.container.addComponent(e)}catch(n){In.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Si(r){const e=r.name;if(Xu.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;Xu.set(e,r);for(const n of Ml.values())Mm(n,r);for(const n of JC.values())Mm(n,r);return!0}function Nd(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Kt(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new eo("app","Firebase",XC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=QC;function pv(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ju,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw rr.create("bad-app-name",{appName:String(o)});if(n||(n=ov()),!n)throw rr.create("no-options");const a=Ml.get(o);if(a){if(br(n,a.options)&&br(s,a.config))return a;throw rr.create("duplicate-app",{appName:o})}const u=new sC(o);for(const m of Xu.values())u.addComponent(m);const p=new ZC(n,s,u);return Ml.set(o,p),p}function mv(r=Ju){const e=Ml.get(r);if(!e&&r===Ju&&ov())return pv();if(!e)throw rr.create("no-app",{appName:r});return e}function ir(r,e,n){var s;let o=(s=YC[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const p=[`Unable to register library "${o}" with version "${e}":`];a&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&p.push("and"),u&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(p.join(" "));return}Si(new Dr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firebase-heartbeat-database",tE=1,Bs="firebase-heartbeat-store";let Pu=null;function gv(){return Pu||(Pu=_C(eE,tE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Bs)}catch(n){console.warn(n)}}}}).catch(r=>{throw rr.create("idb-open",{originalErrorMessage:r.message})})),Pu}async function nE(r){try{const n=(await gv()).transaction(Bs),s=await n.objectStore(Bs).get(vv(r));return await n.done,s}catch(e){if(e instanceof dr)In.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});In.warn(n.message)}}}async function Fm(r,e){try{const s=(await gv()).transaction(Bs,"readwrite");await s.objectStore(Bs).put(e,vv(r)),await s.done}catch(n){if(n instanceof dr)In.warn(n.message);else{const s=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});In.warn(s.message)}}}function vv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=1024,iE=30;class sE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Um();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>iE){const u=aE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){In.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Um(),{heartbeatsToSend:s,unsentEntries:o}=oE(this._heartbeatsCache.heartbeats),a=Ol(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return In.warn(n),""}}}function Um(){return new Date().toISOString().substring(0,10)}function oE(r,e=rE){const n=[];let s=r.slice();for(const o of r){const a=n.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),zm(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),zm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class lE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VS()?HS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function zm(r){return Ol(JSON.stringify({version:2,heartbeats:r})).length}function aE(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(r){Si(new Dr("platform-logger",e=>new SC(e),"PRIVATE")),Si(new Dr("heartbeat",e=>new sE(e),"PRIVATE")),ir(Yu,Lm,r),ir(Yu,Lm,"esm2017"),ir("fire-js","")}cE("");function Td(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function _v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uE=_v,yv=new eo("auth","Firebase",_v());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new xd("@firebase/auth");function dE(r,...e){Fl.logLevel<=Ae.WARN&&Fl.warn(`Auth (${Oi}): ${r}`,...e)}function Tl(r,...e){Fl.logLevel<=Ae.ERROR&&Fl.error(`Auth (${Oi}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(r,...e){throw Pd(r,...e)}function Xt(r,...e){return Pd(r,...e)}function kd(r,e,n){const s=Object.assign(Object.assign({},uE()),{[e]:n});return new eo("auth","Firebase",s).create(e,{appName:r.name})}function Ar(r){return kd(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hE(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&cn(r,"argument-error"),kd(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pd(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return yv.create(r,...e)}function he(r,e,...n){if(!r)throw Pd(e,...n)}function Sn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Tl(e),new Error(e)}function Nn(r,e){r||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function fE(){return $m()==="http:"||$m()==="https:"}function $m(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fE()||$S()||"connection"in navigator)?navigator.onLine:!0}function mE(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nn(n>e,"Short delay should be less than long delay!"),this.isMobile=Ed()||uv()}get(){return pE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(r,e){Nn(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_E=new to(3e4,6e4);function Ad(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ji(r,e,n,s,o={}){return Sv(r,o,async()=>{let a={},u={};s&&(e==="GET"?u=s:a={body:JSON.stringify(s)});const p=Di(Object.assign({key:r.config.apiKey},u)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:m},a);return zS()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&bi(r.emulatorConfig.host)&&(g.credentials="include"),wv.fetch()(await Cv(r,r.config.apiHost,n,p),g)})}async function Sv(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},gE),e);try{const o=new wE(r),a=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw El(r,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const p=a.ok?u.errorMessage:u.error.message,[m,g]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw El(r,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw El(r,"email-already-in-use",u);if(m==="USER_DISABLED")throw El(r,"user-disabled",u);const y=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw kd(r,y,g);cn(r,y)}}catch(o){if(o instanceof dr)throw o;cn(r,"network-request-failed",{message:String(o)})}}async function yE(r,e,n,s,o={}){const a=await ji(r,e,n,s,o);return"mfaPendingCredential"in a&&cn(r,"multi-factor-auth-required",{_serverResponse:a}),a}async function Cv(r,e,n,s){const o=`${e}${n}?${s}`,a=r,u=a.config.emulator?Rd(r.config,o):`${r.config.apiScheme}://${o}`;return vE.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class wE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Xt(this.auth,"network-request-failed")),_E.get())})}}function El(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Xt(r,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(r,e){return ji(r,"POST","/v1/accounts:delete",e)}async function Ul(r,e){return ji(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CE(r,e=!1){const n=wt(r),s=await n.getIdToken(e),o=bd(s);he(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:s,authTime:Ds(Ru(o.auth_time)),issuedAtTime:Ds(Ru(o.iat)),expirationTime:Ds(Ru(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ru(r){return Number(r)*1e3}function bd(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Tl("JWT malformed, contained fewer than 3 sections"),null;try{const o=jl(n);return o?JSON.parse(o):(Tl("Failed to decode base64 JWT payload"),null)}catch(o){return Tl("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Bm(r){const e=bd(r);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof dr&&EE(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function EE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ds(this.lastLoginAt),this.creationTime=Ds(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(r){var e;const n=r.auth,s=await r.getIdToken(),o=await Ws(r,Ul(n,{idToken:s}));he(o==null?void 0:o.users.length,n,"internal-error");const a=o.users[0];r._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Ev(a.providerUserInfo):[],p=NE(r.providerData,u),m=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(p!=null&&p.length),y=m?g:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:p,metadata:new ed(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(r,_)}async function IE(r){const e=wt(r);await zl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NE(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Ev(r){return r.map(e=>{var{providerId:n}=e,s=Td(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(r,e){const n=await Sv(r,{},async()=>{const s=Di({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=r.config,u=await Cv(r,o,"/v1/token",`key=${a}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:s};return r.emulatorConfig&&bi(r.emulatorConfig.host)&&(m.credentials="include"),wv.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kE(r,e){return ji(r,"POST","/v2/accounts:revokeToken",Ad(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=Bm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:a}=await TE(e,n);this.updateTokensAndExpiration(s,o,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:a}=n,u=new pi;return s&&(he(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(he(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(he(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pi,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(r,e){he(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Yt{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,a=Td(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ed(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ws(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CE(this,e)}reload(){return IE(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await zl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kt(this.auth.app))return Promise.reject(Ar(this.auth));const e=await this.getIdToken();return await Ws(this,SE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,a,u,p,m,g,y;const _=(s=n.displayName)!==null&&s!==void 0?s:void 0,w=(o=n.email)!==null&&o!==void 0?o:void 0,R=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(u=n.photoURL)!==null&&u!==void 0?u:void 0,j=(p=n.tenantId)!==null&&p!==void 0?p:void 0,O=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,Q=(g=n.createdAt)!==null&&g!==void 0?g:void 0,A=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:G,emailVerified:H,isAnonymous:Y,providerData:ee,stsTokenManager:te}=n;he(G&&te,e,"internal-error");const fe=pi.fromJSON(this.name,te);he(typeof G=="string",e,"internal-error"),Qn(_,e.name),Qn(w,e.name),he(typeof H=="boolean",e,"internal-error"),he(typeof Y=="boolean",e,"internal-error"),Qn(R,e.name),Qn(b,e.name),Qn(j,e.name),Qn(O,e.name),Qn(Q,e.name),Qn(A,e.name);const Ce=new Yt({uid:G,auth:e,email:w,emailVerified:H,displayName:_,isAnonymous:Y,photoURL:b,phoneNumber:R,tenantId:j,stsTokenManager:fe,createdAt:Q,lastLoginAt:A});return ee&&Array.isArray(ee)&&(Ce.providerData=ee.map(Pe=>Object.assign({},Pe))),O&&(Ce._redirectEventId=O),Ce}static async _fromIdTokenResponse(e,n,s=!1){const o=new pi;o.updateFromServerResponse(n);const a=new Yt({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await zl(a),a}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];he(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?Ev(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),p=new pi;p.updateFromIdToken(s);const m=new Yt({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ed(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=new Map;function Cn(r){Nn(r instanceof Function,"Expected a class definition");let e=Wm.get(r);return e?(Nn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Wm.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xv.type="NONE";const Vm=xv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(r,e,n){return`firebase:${r}:${e}:${n}`}class mi{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:a}=this.auth;this.fullUserKey=kl(this.userKey,o.apiKey,a),this.fullPersistenceKey=kl("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ul(this.auth,{idToken:e}).catch(()=>{});return n?Yt._fromGetAccountInfoResponse(this.auth,n,e):null}return Yt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new mi(Cn(Vm),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=o[0]||Cn(Vm);const u=kl(s,e.config.apiKey,e.name);let p=null;for(const g of n)try{const y=await g._get(u);if(y){let _;if(typeof y=="string"){const w=await Ul(e,{idToken:y}).catch(()=>{});if(!w)break;_=await Yt._fromGetAccountInfoResponse(e,w,y)}else _=Yt._fromJSON(e,y);g!==a&&(p=_),a=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new mi(a,e,s):(a=m[0],p&&await a._set(u,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==a)try{await g._remove(u)}catch{}})),new mi(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Iv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rv(e))return"Blackberry";if(Av(e))return"Webos";if(Nv(e))return"Safari";if((e.includes("chrome/")||Tv(e))&&!e.includes("edge/"))return"Chrome";if(Pv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Iv(r=yt()){return/firefox\//i.test(r)}function Nv(r=yt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tv(r=yt()){return/crios\//i.test(r)}function kv(r=yt()){return/iemobile/i.test(r)}function Pv(r=yt()){return/android/i.test(r)}function Rv(r=yt()){return/blackberry/i.test(r)}function Av(r=yt()){return/webos/i.test(r)}function Dd(r=yt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function PE(r=yt()){var e;return Dd(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RE(){return BS()&&document.documentMode===10}function bv(r=yt()){return Dd(r)||Pv(r)||Av(r)||Rv(r)||/windows phone/i.test(r)||kv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(r,e=[]){let n;switch(r){case"Browser":n=Hm(yt());break;case"Worker":n=`${Hm(yt())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((u,p)=>{try{const m=e(a);u(m)}catch(m){p(m)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bE(r,e={}){return ji(r,"GET","/v2/passwordPolicy",Ad(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=6;class OE{constructor(e){var n,s,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:DE,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,a,u,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(a=m.containsUppercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gm(this),this.idTokenSubscription=new Gm(this),this.beforeStateQueue=new AE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cn(n)),this._initializationPromise=this.queue(async()=>{var s,o,a;if(!this._deleted&&(this.persistenceManager=await mi.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ul(this,{idToken:e}),s=await Yt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(p,p))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===p)&&(m!=null&&m.user)&&(o=m.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kt(this.app))return Promise.reject(Ar(this));const n=e?wt(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kt(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kt(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bE(this),n=new OE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await kE(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cn(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await mi.create(this,[Cn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(p,this,"internal-error"),p.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,o);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&dE(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ca(r){return wt(r)}class Gm{constructor(e){this.auth=e,this.observer=null,this.addObserver=XS(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LE(r){Od=r}function ME(r){return Od.loadJS(r)}function FE(){return Od.gapiScript}function UE(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(r,e){const n=Nd(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),a=n.getOptions();if(br(a,e??{}))return o;cn(o,"already-initialized")}return n.initialize({options:e})}function $E(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Cn);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function BE(r,e,n){const s=ca(r);he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,a=Ov(e),{host:u,port:p}=WE(e),m=p===null?"":`:${p}`,g={url:`${a}//${u}${m}/`},y=Object.freeze({host:u,port:p,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){he(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),he(br(g,s.config.emulator)&&br(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,bi(u)?(av(`${a}//${u}${m}`),cv("Auth",!0)):VE()}function Ov(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function WE(r){const e=Ov(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const a=o[1];return{host:a,port:qm(s.substr(a.length+1))}}else{const[a,u]=s.split(":");return{host:a,port:qm(u)}}}function qm(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function VE(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gi(r,e){return yE(r,"POST","/v1/accounts:signInWithIdp",Ad(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="http://localhost";class Or extends jv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Or(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,a=Td(n,["providerId","signInMethod"]);if(!s||!o)return null;const u=new Or(s,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return gi(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,gi(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gi(e,n)}buildRequest(){const e={requestUri:HE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Di(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends jd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends no{constructor(){super("facebook.com")}static credential(e){return Or._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yn.credential(e.oauthAccessToken)}catch{return null}}}Yn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends no{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Or._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wn.credentialFromTaggedObject(e)}static credentialFromError(e){return wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return wn.credential(n,s)}catch{return null}}}wn.GOOGLE_SIGN_IN_METHOD="google.com";wn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends no{constructor(){super("github.com")}static credential(e){return Or._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jn.credential(e.oauthAccessToken)}catch{return null}}}Jn.GITHUB_SIGN_IN_METHOD="github.com";Jn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends no{constructor(){super("twitter.com")}static credential(e,n){return Or._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Xn.credential(n,s)}catch{return null}}}Xn.TWITTER_SIGN_IN_METHOD="twitter.com";Xn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const a=await Yt._fromIdTokenResponse(e,s,o),u=Km(s);return new Ci({user:a,providerId:u,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Km(s);return new Ci({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Km(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends dr{constructor(e,n,s,o){var a;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,$l.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new $l(e,n,s,o)}}function Lv(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?$l._fromErrorAndOperation(r,a,e,s):a})}async function GE(r,e,n=!1){const s=await Ws(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Ci._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(r,e,n=!1){const{auth:s}=r;if(Kt(s.app))return Promise.reject(Ar(s));const o="reauthenticate";try{const a=await Ws(r,Lv(s,o,e,r),n);he(a.idToken,s,"internal-error");const u=bd(a.idToken);he(u,s,"internal-error");const{sub:p}=u;return he(r.uid===p,s,"user-mismatch"),Ci._forOperation(r,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&cn(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KE(r,e,n=!1){if(Kt(r.app))return Promise.reject(Ar(r));const s="signIn",o=await Lv(r,s,e),a=await Ci._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(a.user),a}function QE(r,e,n,s){return wt(r).onIdTokenChanged(e,n,s)}function YE(r,e,n){return wt(r).beforeAuthStateChanged(e,n)}function JE(r,e,n,s){return wt(r).onAuthStateChanged(e,n,s)}function XE(r){return wt(r).signOut()}const Bl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bl,"1"),this.storage.removeItem(Bl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=1e3,ex=10;class Fv extends Mv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,p,m)=>{this.notifyListeners(u,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!n&&this.localCache[s]===u||this.notifyListeners(s,u)},a=this.storage.getItem(s);RE()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ex):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},ZE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fv.type="LOCAL";const tx=Fv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends Mv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Uv.type="SESSION";const zv=Uv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new ua(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:a}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(u).map(async g=>g(n.origin,a)),m=await nx(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ua.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((p,m)=>{const g=Ld("",20);o.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(_){const w=_;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),p(w.data.response);break;default:clearTimeout(y),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function ix(r){an().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function sx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ox(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function lx(){return $v()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="firebaseLocalStorageDb",ax=1,Wl="firebaseLocalStorage",Wv="fbase_key";class ro{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function da(r,e){return r.transaction([Wl],e?"readwrite":"readonly").objectStore(Wl)}function cx(){const r=indexedDB.deleteDatabase(Bv);return new ro(r).toPromise()}function td(){const r=indexedDB.open(Bv,ax);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Wl,{keyPath:Wv})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Wl)?e(s):(s.close(),await cx(),e(await td()))})})}async function Qm(r,e,n){const s=da(r,!0).put({[Wv]:e,value:n});return new ro(s).toPromise()}async function ux(r,e){const n=da(r,!1).get(e),s=await new ro(n).toPromise();return s===void 0?null:s.value}function Ym(r,e){const n=da(r,!0).delete(e);return new ro(n).toPromise()}const dx=800,hx=3;class Vv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await td(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>hx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $v()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ua._getInstance(lx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sx(),!this.activeServiceWorker)return;this.sender=new rx(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ox()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await td();return await Qm(e,Bl,"1"),await Ym(e,Bl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Qm(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>ux(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ym(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=da(o,!1).getAll();return new ro(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vv.type="LOCAL";const fx=Vv;new to(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(r,e){return e?Cn(e):(he(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends jv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function px(r){return KE(r.auth,new Md(r),r.bypassAuthState)}function mx(r){const{auth:e,user:n}=r;return he(n,e,"internal-error"),qE(n,new Md(r),r.bypassAuthState)}async function gx(r){const{auth:e,user:n}=r;return he(n,e,"internal-error"),GE(n,new Md(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n,s,o,a=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:a,error:u,type:p}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return px;case"linkViaPopup":case"linkViaRedirect":return gx;case"reauthViaPopup":case"reauthViaRedirect":return mx;default:cn(this.auth,"internal-error")}}resolve(e){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=new to(2e3,1e4);async function _x(r,e,n){if(Kt(r.app))return Promise.reject(Xt(r,"operation-not-supported-in-this-environment"));const s=ca(r);hE(r,e,jd);const o=Hv(s,n);return new Pr(s,"signInViaPopup",e,o).executeNotNull()}class Pr extends Gv{constructor(e,n,s,o,a){super(e,n,o,a),this.provider=s,this.authWindow=null,this.pollId=null,Pr.currentPopupAction&&Pr.currentPopupAction.cancel(),Pr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Nn(this.filter.length===1,"Popup operations only handle one event");const e=Ld();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vx.get())};e()}}Pr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="pendingRedirect",Pl=new Map;class wx extends Gv{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Pl.get(this.auth._key());if(!e){try{const s=await Sx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Pl.set(this.auth._key(),e)}return this.bypassAuthState||Pl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sx(r,e){const n=xx(e),s=Ex(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Cx(r,e){Pl.set(r._key(),e)}function Ex(r){return Cn(r._redirectPersistence)}function xx(r){return kl(yx,r.config.apiKey,r.name)}async function Ix(r,e,n=!1){if(Kt(r.app))return Promise.reject(Ar(r));const s=ca(r),o=Hv(s,e),u=await new wx(s,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=600*1e3;class Tx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!qv(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Xt(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Nx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jm(e))}saveEventToCache(e){this.cachedEventUids.add(Jm(e)),this.lastProcessedEventTime=Date.now()}}function Jm(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function qv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(r,e={}){return ji(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ax=/^https?/;async function bx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Px(r);for(const n of e)try{if(Dx(n))return}catch{}cn(r,"unauthorized-domain")}function Dx(r){const e=Zu(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===s}if(!Ax.test(n))return!1;if(Rx.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=new to(3e4,6e4);function Xm(){const r=an().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function jx(r){return new Promise((e,n)=>{var s,o,a;function u(){Xm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xm(),n(Xt(r,"network-request-failed"))},timeout:Ox.get()})}if(!((o=(s=an().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=an().gapi)===null||a===void 0)&&a.load)u();else{const p=UE("iframefcb");return an()[p]=()=>{gapi.load?u():n(Xt(r,"network-request-failed"))},ME(`${FE()}?onload=${p}`).catch(m=>n(m))}}).catch(e=>{throw Rl=null,e})}let Rl=null;function Lx(r){return Rl=Rl||jx(r),Rl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new to(5e3,15e3),Fx="__/auth/iframe",Ux="emulator/auth/iframe",zx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$x=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bx(r){const e=r.config;he(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Rd(e,Ux):`https://${r.config.authDomain}/${Fx}`,s={apiKey:e.apiKey,appName:r.name,v:Oi},o=$x.get(r.config.apiHost);o&&(s.eid=o);const a=r._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${Di(s).slice(1)}`}async function Wx(r){const e=await Lx(r),n=an().gapi;return he(n,r,"internal-error"),e.open({where:document.body,url:Bx(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zx,dontclear:!0},s=>new Promise(async(o,a)=>{await s.restyle({setHideOnLeave:!1});const u=Xt(r,"network-request-failed"),p=an().setTimeout(()=>{a(u)},Mx.get());function m(){an().clearTimeout(p),o(s)}s.ping(m).then(m,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hx=500,Gx=600,qx="_blank",Kx="http://localhost";class Zm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qx(r,e,n,s=Hx,o=Gx){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const m=Object.assign(Object.assign({},Vx),{width:s.toString(),height:o.toString(),top:a,left:u}),g=yt().toLowerCase();n&&(p=Tv(g)?qx:n),Iv(g)&&(e=e||Kx,m.scrollbars="yes");const y=Object.entries(m).reduce((w,[R,b])=>`${w}${R}=${b},`,"");if(PE(g)&&p!=="_self")return Yx(e||"",p),new Zm(null);const _=window.open(e||"",p,y);he(_,r,"popup-blocked");try{_.focus()}catch{}return new Zm(_)}function Yx(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="__/auth/handler",Xx="emulator/auth/handler",Zx=encodeURIComponent("fac");async function eg(r,e,n,s,o,a){he(r.config.authDomain,r,"auth-domain-config-required"),he(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Oi,eventId:o};if(e instanceof jd){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",qu(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))u[y]=_}if(e instanceof no){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(u.scopes=y.join(","))}r.tenantId&&(u.tid=r.tenantId);const p=u;for(const y of Object.keys(p))p[y]===void 0&&delete p[y];const m=await r._getAppCheckToken(),g=m?`#${Zx}=${encodeURIComponent(m)}`:"";return`${eI(r)}?${Di(p).slice(1)}${g}`}function eI({config:r}){return r.emulator?Rd(r,Xx):`https://${r.authDomain}/${Jx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au="webStorageSupport";class tI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zv,this._completeRedirectFn=Ix,this._overrideRedirectResult=Cx}async _openPopup(e,n,s,o){var a;Nn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await eg(e,n,s,Zu(),o);return Qx(e,u,Ld())}async _openRedirect(e,n,s,o){await this._originValidation(e);const a=await eg(e,n,s,Zu(),o);return ix(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:a}=this.eventManagers[n];return o?Promise.resolve(o):(Nn(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Wx(e),s=new Tx(e);return n.register("authEvent",o=>(he(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Au,{type:Au},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Au];u!==void 0&&n(!!u),cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bv()||Nv()||Dd()}}const nI=tI;var tg="@firebase/auth",ng="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sI(r){Si(new Dr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=s.options;he(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:u,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dv(r)},g=new jE(s,o,a,m);return $E(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Si(new Dr("auth-internal",e=>{const n=ca(e.getProvider("auth").getImmediate());return(s=>new rI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(tg,ng,iI(r)),ir(tg,ng,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=300,lI=lv("authIdTokenMaxAge")||oI;let rg=null;const aI=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>lI)return;const o=n==null?void 0:n.token;rg!==o&&(rg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cI(r=mv()){const e=Nd(r,"auth");if(e.isInitialized())return e.getImmediate();const n=zE(r,{popupRedirectResolver:nI,persistence:[fx,tx,zv]}),s=lv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const u=aI(a.toString());YE(n,u,()=>u(n.currentUser)),QE(n,p=>u(p))}}const o=sv("auth");return o&&BE(n,`http://${o}`),n}function uI(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}LE({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const a=Xt("internal-error");a.customData=o,n(a)},s.type="text/javascript",s.charset="UTF-8",uI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sI("Browser");var dI="firebase",hI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(dI,hI,"app");var ig={};const sg="@firebase/database",og="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kv="";function fI(r){Kv=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),et(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:$s(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return un(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pI(e)}}catch{}return new mI},Rr=Qv("localStorage"),gI=Qv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new xd("@firebase/database"),vI=(function(){let r=1;return function(){return r++}})(),Yv=function(r){const e=tC(r),n=new JS;n.update(e);const s=n.digest();return Sd.encodeByteArray(s)},io=function(...r){let e="";for(let n=0;n<r.length;n++){const s=r[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=io.apply(null,s):typeof s=="object"?e+=et(s):e+=s,e+=" "}return e};let Os=null,lg=!0;const _I=function(r,e){V(!0,"Can't turn on custom loggers persistently."),vi.logLevel=Ae.VERBOSE,Os=vi.log.bind(vi)},at=function(...r){if(lg===!0&&(lg=!1,Os===null&&gI.get("logging_enabled")===!0&&_I()),Os){const e=io.apply(null,r);Os(e)}},so=function(r){return function(...e){at(r,...e)}},nd=function(...r){const e="FIREBASE INTERNAL ERROR: "+io(...r);vi.error(e)},Tn=function(...r){const e=`FIREBASE FATAL ERROR: ${io(...r)}`;throw vi.error(e),new Error(e)},_t=function(...r){const e="FIREBASE WARNING: "+io(...r);vi.warn(e)},yI=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_t("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fd=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},wI=function(r){if(document.readyState==="complete")r();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ei="[MIN_NAME]",jr="[MAX_NAME]",Ur=function(r,e){if(r===e)return 0;if(r===Ei||e===jr)return-1;if(e===Ei||r===jr)return 1;{const n=ag(r),s=ag(e);return n!==null?s!==null?n-s===0?r.length-e.length:n-s:-1:s!==null?1:r<e?-1:1}},SI=function(r,e){return r===e?0:r<e?-1:1},Ts=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+et(e))},Ud=function(r){if(typeof r!="object"||r===null)return et(r);const e=[];for(const s in r)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=et(e[s]),n+=":",n+=Ud(r[e[s]]);return n+="}",n},Jv=function(r,e){const n=r.length;if(n<=e)return[r];const s=[];for(let o=0;o<n;o+=e)o+e>n?s.push(r.substring(o,n)):s.push(r.substring(o,o+e));return s};function ct(r,e){for(const n in r)r.hasOwnProperty(n)&&e(n,r[n])}const Xv=function(r){V(!Fd(r),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let o,a,u,p,m;r===0?(a=0,u=0,o=1/r===-1/0?1:0):(o=r<0,r=Math.abs(r),r>=Math.pow(2,1-s)?(p=Math.min(Math.floor(Math.log(r)/Math.LN2),s),a=p+s,u=Math.round(r*Math.pow(2,n-p)-Math.pow(2,n))):(a=0,u=Math.round(r/Math.pow(2,1-s-n))));const g=[];for(m=n;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);for(m=e;m;m-=1)g.push(a%2?1:0),a=Math.floor(a/2);g.push(o?1:0),g.reverse();const y=g.join("");let _="";for(m=0;m<64;m+=8){let w=parseInt(y.substr(m,8),2).toString(16);w.length===1&&(w="0"+w),_=_+w}return _.toLowerCase()},CI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},EI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function xI(r,e){let n="Unknown Error";r==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?n="Client doesn't have permission to access the desired data.":r==="unavailable"&&(n="The service is unavailable");const s=new Error(r+" at "+e._path.toString()+": "+n);return s.code=r.toUpperCase(),s}const II=new RegExp("^-?(0*)\\d{1,10}$"),NI=-2147483648,TI=2147483647,ag=function(r){if(II.test(r)){const e=Number(r);if(e>=NI&&e<=TI)return e}return null},Li=function(r){try{r()}catch(e){setTimeout(()=>{const n=e.stack||"";throw _t("Exception was thrown by user callback.",n),e},Math.floor(0))}},kI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},js=function(r,e){const n=setTimeout(r,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Kt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){_t(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(at("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_t(e)}}class Al{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Al.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="5",Zv="v",e_="s",t_="r",n_="f",r_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,i_="ls",s_="p",rd="ac",o_="websocket",l_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n,s,o,a=!1,u="",p=!1,m=!1,g=null){this.secure=n,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function AI(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function c_(r,e,n){V(typeof e=="string","typeof type must == string"),V(typeof n=="object","typeof params must == object");let s;if(e===o_)s=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===l_)s=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);AI(r)&&(n.ns=r.namespace);const o=[];return ct(n,(a,u)=>{o.push(a+"="+u)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.counters_={}}incrementCounter(e,n=1){un(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return RS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu={},Du={};function $d(r){const e=r.toString();return bu[e]||(bu[e]=new bI),bu[e]}function DI(r,e){const n=r.toString();return Du[n]||(Du[n]=e()),Du[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Li(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="start",jI="close",LI="pLPCommand",MI="pRTLPCB",u_="id",d_="pw",h_="ser",FI="cb",UI="seg",zI="ts",$I="d",BI="dframe",f_=1870,p_=30,WI=f_-p_,VI=25e3,HI=3e4;class fi{constructor(e,n,s,o,a,u,p){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.transportSessionId=u,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=so(e),this.stats_=$d(n),this.urlFn=m=>(this.appCheckToken&&(m[rd]=this.appCheckToken),c_(n,l_,m))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new OI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HI)),wI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bd((...a)=>{const[u,p,m,g,y]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===cg)this.id=p,this.password=m;else if(u===jI)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...a)=>{const[u,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,p)},()=>{this.onClosed_()},this.urlFn);const s={};s[cg]="t",s[h_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[FI]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Zv]=zd,this.transportSessionId&&(s[e_]=this.transportSessionId),this.lastSessionId&&(s[i_]=this.lastSessionId),this.applicationId&&(s[s_]=this.applicationId),this.appCheckToken&&(s[rd]=this.appCheckToken),typeof location<"u"&&location.hostname&&r_.test(location.hostname)&&(s[t_]=n_);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fi.forceAllow_=!0}static forceDisallow(){fi.forceDisallow_=!0}static isAvailable(){return fi.forceAllow_?!0:!fi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!CI()&&!EI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=rv(n),o=Jv(s,WI);for(let a=0;a<o.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[BI]="t",s[u_]=e,s[d_]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=et(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Bd{constructor(e,n,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=vI(),window[LI+this.uniqueCallbackIdentifier]=e,window[MI+this.uniqueCallbackIdentifier]=n,this.myIFrame=Bd.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(p){at("frame writing exception"),p.stack&&at(p.stack),at(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||at("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[u_]=this.myID,e[d_]=this.myPW,e[h_]=this.currentSerial;let n=this.urlFn(e),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+p_+s.length<=f_;){const u=this.pendingSegs.shift();s=s+"&"+UI+o+"="+u.seg+"&"+zI+o+"="+u.ts+"&"+$I+o+"="+u.d,o++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(s,Math.floor(VI)),a=()=>{clearTimeout(o),s()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{at("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=16384,qI=45e3;let Vl=null;typeof MozWebSocket<"u"?Vl=MozWebSocket:typeof WebSocket<"u"&&(Vl=WebSocket);class Qt{constructor(e,n,s,o,a,u,p){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=so(this.connId),this.stats_=$d(n),this.connURL=Qt.connectionURL_(n,u,p,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,a){const u={};return u[Zv]=zd,typeof location<"u"&&location.hostname&&r_.test(location.hostname)&&(u[t_]=n_),n&&(u[e_]=n),s&&(u[i_]=s),o&&(u[rd]=o),a&&(u[s_]=a),c_(e,o_,u)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rr.set("previous_websocket_failure",!0);try{let s;WS(),this.mySock=new Vl(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){Qt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Vl!==null&&!Qt.forceDisallow_}static previouslyFailed(){return Rr.isInMemoryStorage||Rr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Rr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=$s(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(V(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Jv(n,GI);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(qI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qt.responsesRequiredToBeHealthy=2;Qt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{static get ALL_TRANSPORTS(){return[fi,Qt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Qt&&Qt.isAvailable();let s=n&&!Qt.previouslyFailed();if(e.webSocketOnly&&(n||_t("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Qt];else{const o=this.transports_=[];for(const a of Vs.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);Vs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Vs.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=6e4,QI=5e3,YI=10*1024,JI=100*1024,Ou="t",ug="d",XI="s",dg="r",ZI="e",hg="o",fg="a",pg="n",mg="p",eN="h";class tN{constructor(e,n,s,o,a,u,p,m,g,y){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=a,this.onMessage_=u,this.onReady_=p,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=so("c:"+this.id+":"),this.transportManager_=new Vs(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=js(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>JI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>YI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ou in e){const n=e[Ou];n===fg?this.upgradeIfSecondaryHealthy_():n===dg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===hg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ts("t",e),s=Ts("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:pg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ts("t",e),s=Ts("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ts(Ou,e);if(ug in e){const s=e[ug];if(n===eN){const o=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===pg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===XI?this.onConnectionShutdown_(s):n===dg?this.onReset_(s):n===ZI?nd("Server Error: "+s):n===hg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),zd!==s&&_t("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),js(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(KI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):js(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(QI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{put(e,n,s,o){}merge(e,n,s,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.allowedEvents_=e,this.listeners_={},V(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const o=this.getInitialEvent(e);o&&n.apply(s,o)}off(e,n,s){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let a=0;a<o.length;a++)if(o[a].callback===n&&(!s||s===o[a].context)){o.splice(a,1);return}}validateEventType_(e){V(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends g_{static getInstance(){return new Hl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ed()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return V(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=32,vg=768;class be{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ne(){return new be("")}function ye(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function lr(r){return r.pieces_.length-r.pieceNum_}function je(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new be(r.pieces_,e)}function Wd(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function nN(r){let e="";for(let n=r.pieceNum_;n<r.pieces_.length;n++)r.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[n])));return e||"/"}function Hs(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function v_(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let n=r.pieceNum_;n<r.pieces_.length-1;n++)e.push(r.pieces_[n]);return new be(e,0)}function Ve(r,e){const n=[];for(let s=r.pieceNum_;s<r.pieces_.length;s++)n.push(r.pieces_[s]);if(e instanceof be)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&n.push(s[o])}return new be(n,0)}function Se(r){return r.pieceNum_>=r.pieces_.length}function vt(r,e){const n=ye(r),s=ye(e);if(n===null)return e;if(n===s)return vt(je(r),je(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function rN(r,e){const n=Hs(r,0),s=Hs(e,0);for(let o=0;o<n.length&&o<s.length;o++){const a=Ur(n[o],s[o]);if(a!==0)return a}return n.length===s.length?0:n.length<s.length?-1:1}function Vd(r,e){if(lr(r)!==lr(e))return!1;for(let n=r.pieceNum_,s=e.pieceNum_;n<=r.pieces_.length;n++,s++)if(r.pieces_[n]!==e.pieces_[s])return!1;return!0}function Ft(r,e){let n=r.pieceNum_,s=e.pieceNum_;if(lr(r)>lr(e))return!1;for(;n<r.pieces_.length;){if(r.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class iN{constructor(e,n){this.errorPrefix_=n,this.parts_=Hs(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=aa(this.parts_[s]);__(this)}}function sN(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=aa(e),__(r)}function oN(r){const e=r.parts_.pop();r.byteLength_-=aa(e),r.parts_.length>0&&(r.byteLength_-=1)}function __(r){if(r.byteLength_>vg)throw new Error(r.errorPrefix_+"has a key path longer than "+vg+" bytes ("+r.byteLength_+").");if(r.parts_.length>gg)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gg+") or object contains a cycle "+kr(r))}function kr(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends g_{static getInstance(){return new Hd}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return V(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=1e3,lN=300*1e3,_g=30*1e3,aN=1.3,cN=3e4,uN="server_kill",yg=3;class xn extends m_{constructor(e,n,s,o,a,u,p,m){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=u,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=xn.nextPersistentConnectionId_++,this.log_=so("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ks,this.maxReconnectDelay_=lN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Hd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Hl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const o=++this.requestNumber_,a={r:o,a:e,b:n};this.log_(et(a)),V(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();const n=new Zs,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const p=u.d;u.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,s,o){this.initConnection_();const a=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+a),this.listens.has(u)||this.listens.set(u,new Map),V(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),V(!this.listens.get(u).has(a),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(u).set(a,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);const a={p:s},u="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(u,a,p=>{const m=p.d,g=p.s;xn.warnOnListenWarnings_(m,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&un(e,"w")){const s=wi(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();_t(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||YS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_g)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=QS(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{const a=o.s,u=o.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),V(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);const a={p:e},u="n";o&&(a.q=s,a.t=o),this.sendRequest(u,a)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){const a={p:n,d:s};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,u=>{o&&setTimeout(()=>{o(u.s,u.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,a){this.initConnection_();const u={p:n,d:s};a!==void 0&&(u.h=a),this.outstandingPuts_.push({action:e,request:u,onComplete:o}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+et(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):nd("Unrecognized action received from server: "+et(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){V(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ks,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ks,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>cN&&(this.reconnectDelay_=ks),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*aN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+xn.nextConnectionId_++,a=this.lastSessionId;let u=!1,p=null;const m=function(){p?p.close():(u=!0,s())},g=function(_){V(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(_)};this.realtime_={close:m,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,w]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);u?at("getToken() completed but was canceled"):(at("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=w&&w.token,p=new tN(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,R=>{_t(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(uN)},a))}catch(_){this.log_("Failed to get token: "+_),u||(this.repoInfo_.nodeAdmin&&_t(_),m())}}}interrupt(e){at("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){at("Resuming connection for reason: "+e),delete this.interruptReasons_[e],qu(this.interruptReasons_)&&(this.reconnectDelay_=ks,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(a=>Ud(a)).join("$"):s="default";const o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const s=new be(e).toString();let o;if(this.listens.has(s)){const a=this.listens.get(s);o=a.get(n),a.delete(n),a.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){at("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yg&&(this.reconnectDelay_=_g,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){at("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Kv.replace(/\./g,"-")]=1,Ed()?e["framework.cordova"]=1:uv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Hl.getInstance().currentlyOnline();return qu(this.interruptReasons_)&&e}}xn.nextPersistentConnectionId_=0;xn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new we(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new we(Ei,e),o=new we(Ei,n);return this.compare(s,o)!==0}minPost(){return we.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl;class y_ extends ha{static get __EMPTY_NODE(){return xl}static set __EMPTY_NODE(e){xl=e}compare(e,n){return Ur(e.name,n.name)}isDefinedOn(e){throw Ai("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return we.MIN}maxPost(){return new we(jr,xl)}makePost(e,n){return V(typeof e=="string","KeyIndex indexValue must always be a string."),new we(e,xl)}toString(){return".key"}}const _i=new y_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n,s,o,a=null){this.isReverse_=o,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=n?s(e.key,n):1,o&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class st{constructor(e,n,s,o,a){this.key=e,this.value=n,this.color=s??st.RED,this.left=o??Tt.EMPTY_NODE,this.right=a??Tt.EMPTY_NODE}copy(e,n,s,o,a){return new st(e??this.key,n??this.value,s??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const a=s(e,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):a===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}st.RED=!0;st.BLACK=!1;class dN{copy(e,n,s,o,a){return this}insert(e,n,s){return new st(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Tt{constructor(e,n=Tt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Tt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,st.BLACK,null,null))}remove(e){return new Tt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,st.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,o=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Il(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Il(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Il(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Il(this.root_,null,this.comparator_,!0,e)}}Tt.EMPTY_NODE=new dN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(r,e){return Ur(r.name,e.name)}function Gd(r,e){return Ur(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id;function fN(r){id=r}const w_=function(r){return typeof r=="number"?"number:"+Xv(r):"string:"+r},S_=function(r){if(r.isLeafNode()){const e=r.val();V(typeof e=="string"||typeof e=="number"||typeof e=="object"&&un(e,".sv"),"Priority must be a string or number.")}else V(r===id||r.isEmpty(),"priority of unexpected type.");V(r===id||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wg;class it{static set __childrenNodeConstructor(e){wg=e}static get __childrenNodeConstructor(){return wg}constructor(e,n=it.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,V(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),S_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new it(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:it.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Se(e)?this:ye(e)===".priority"?this.priorityNode_:it.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:it.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=ye(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(V(s!==".priority"||lr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,it.__childrenNodeConstructor.EMPTY_NODE.updateChild(je(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+w_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Xv(this.value_):e+=this.value_,this.lazyHash_=Yv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===it.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof it.__childrenNodeConstructor?-1:(V(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,o=it.VALUE_TYPE_ORDER.indexOf(n),a=it.VALUE_TYPE_ORDER.indexOf(s);return V(o>=0,"Unknown leaf type: "+n),V(a>=0,"Unknown leaf type: "+s),o===a?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}it.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C_,E_;function pN(r){C_=r}function mN(r){E_=r}class gN extends ha{compare(e,n){const s=e.node.getPriority(),o=n.node.getPriority(),a=s.compareTo(o);return a===0?Ur(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return we.MIN}maxPost(){return new we(jr,new it("[PRIORITY-POST]",E_))}makePost(e,n){const s=C_(e);return new we(n,new it("[PRIORITY-POST]",s))}toString(){return".priority"}}const He=new gN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=Math.log(2);class _N{constructor(e){const n=a=>parseInt(Math.log(a)/vN,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=s(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gl=function(r,e,n,s){r.sort(e);const o=function(m,g){const y=g-m;let _,w;if(y===0)return null;if(y===1)return _=r[m],w=n?n(_):_,new st(w,_.node,st.BLACK,null,null);{const R=parseInt(y/2,10)+m,b=o(m,R),j=o(R+1,g);return _=r[R],w=n?n(_):_,new st(w,_.node,st.BLACK,b,j)}},a=function(m){let g=null,y=null,_=r.length;const w=function(b,j){const O=_-b,Q=_;_-=b;const A=o(O+1,Q),G=r[O],H=n?n(G):G;R(new st(H,G.node,j,null,A))},R=function(b){g?(g.left=b,g=b):(y=b,g=b)};for(let b=0;b<m.count;++b){const j=m.nextBitIsOne(),O=Math.pow(2,m.count-(b+1));j?w(O,st.BLACK):(w(O,st.BLACK),w(O,st.RED))}return y},u=new _N(r.length),p=a(u);return new Tt(s||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju;const hi={};class En{static get Default(){return V(hi&&He,"ChildrenNode.ts has not been loaded"),ju=ju||new En({".priority":hi},{".priority":He}),ju}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=wi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Tt?n:null}hasIndex(e){return un(this.indexSet_,e.toString())}addIndex(e,n){V(e!==_i,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const a=n.getIterator(we.Wrap);let u=a.getNext();for(;u;)o=o||e.isDefinedOn(u.node),s.push(u),u=a.getNext();let p;o?p=Gl(s,e.getCompare()):p=hi;const m=e.toString(),g=Object.assign({},this.indexSet_);g[m]=e;const y=Object.assign({},this.indexes_);return y[m]=p,new En(y,g)}addToIndexes(e,n){const s=Ll(this.indexes_,(o,a)=>{const u=wi(this.indexSet_,a);if(V(u,"Missing index implementation for "+a),o===hi)if(u.isDefinedOn(e.node)){const p=[],m=n.getIterator(we.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&p.push(g),g=m.getNext();return p.push(e),Gl(p,u.getCompare())}else return hi;else{const p=n.get(e.name);let m=o;return p&&(m=m.remove(new we(e.name,p))),m.insert(e,e.node)}});return new En(s,this.indexSet_)}removeFromIndexes(e,n){const s=Ll(this.indexes_,o=>{if(o===hi)return o;{const a=n.get(e.name);return a?o.remove(new we(e.name,a)):o}});return new En(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ps;class ue{static get EMPTY_NODE(){return Ps||(Ps=new ue(new Tt(Gd),null,En.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&S_(this.priorityNode_),this.children_.isEmpty()&&V(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ps}updatePriority(e){return this.children_.isEmpty()?this:new ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ps:n}}getChild(e){const n=ye(e);return n===null?this:this.getImmediateChild(n).getChild(je(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(V(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new we(e,n);let o,a;n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(s,this.children_));const u=o.isEmpty()?Ps:this.priorityNode_;return new ue(o,u,a)}}updateChild(e,n){const s=ye(e);if(s===null)return n;{V(ye(e)!==".priority"||lr(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(je(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,o=0,a=!0;if(this.forEachChild(He,(u,p)=>{n[u]=p.val(e),s++,a&&ue.INTEGER_REGEXP_.test(u)?o=Math.max(o,Number(u)):a=!1}),!e&&a&&o<2*s){const u=[];for(const p in n)u[p]=n[p];return u}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+w_(this.getPriority().val())+":"),this.forEachChild(He,(n,s)=>{const o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":Yv(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const o=this.resolveIndex_(s);if(o){const a=o.getPredecessorKey(new we(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new we(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new we(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,we.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,we.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)>0;)o.getNext(),a=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===oo?-1:0}withIndex(e){if(e===_i||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===_i||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(He),o=n.getIterator(He);let a=s.getNext(),u=o.getNext();for(;a&&u;){if(a.name!==u.name||!a.node.equals(u.node))return!1;a=s.getNext(),u=o.getNext()}return a===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===_i?null:this.indexMap_.get(e.toString())}}ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yN extends ue{constructor(){super(new Tt(Gd),ue.EMPTY_NODE,En.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}}const oo=new yN;Object.defineProperties(we,{MIN:{value:new we(Ei,ue.EMPTY_NODE)},MAX:{value:new we(jr,oo)}});y_.__EMPTY_NODE=ue.EMPTY_NODE;it.__childrenNodeConstructor=ue;fN(oo);mN(oo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=!0;function Ze(r,e=null){if(r===null)return ue.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),V(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const n=r;return new it(n,Ze(e))}if(!(r instanceof Array)&&wN){const n=[];let s=!1;if(ct(r,(u,p)=>{if(u.substring(0,1)!=="."){const m=Ze(p);m.isEmpty()||(s=s||!m.getPriority().isEmpty(),n.push(new we(u,m)))}}),n.length===0)return ue.EMPTY_NODE;const a=Gl(n,hN,u=>u.name,Gd);if(s){const u=Gl(n,He.getCompare());return new ue(a,Ze(e),new En({".priority":u},{".priority":He}))}else return new ue(a,Ze(e),En.Default)}else{let n=ue.EMPTY_NODE;return ct(r,(s,o)=>{if(un(r,s)&&s.substring(0,1)!=="."){const a=Ze(o);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(s,a))}}),n.updatePriority(Ze(e))}}pN(Ze);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN extends ha{constructor(e){super(),this.indexPath_=e,V(!Se(e)&&ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),o=this.extractChild(n.node),a=s.compareTo(o);return a===0?Ur(e.name,n.name):a}makePost(e,n){const s=Ze(e),o=ue.EMPTY_NODE.updateChild(this.indexPath_,s);return new we(n,o)}maxPost(){const e=ue.EMPTY_NODE.updateChild(this.indexPath_,oo);return new we(jr,e)}toString(){return Hs(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN extends ha{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Ur(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return we.MIN}maxPost(){return we.MAX}makePost(e,n){const s=Ze(e);return new we(n,s)}toString(){return".value"}}const EN=new CN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(r){return{type:"value",snapshotNode:r}}function xi(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function Gs(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function qs(r,e,n){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:n}}function xN(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e){this.index_=e}updateChild(e,n,s,o,a,u){V(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(n);return p.getChild(o).equals(s.getChild(o))&&p.isEmpty()===s.isEmpty()||(u!=null&&(s.isEmpty()?e.hasChild(n)?u.trackChildChange(Gs(n,p)):V(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?u.trackChildChange(xi(n,s)):u.trackChildChange(qs(n,s,p))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(He,(o,a)=>{n.hasChild(o)||s.trackChildChange(Gs(o,a))}),n.isLeafNode()||n.forEachChild(He,(o,a)=>{if(e.hasChild(o)){const u=e.getImmediateChild(o);u.equals(a)||s.trackChildChange(qs(o,a,u))}else s.trackChildChange(xi(o,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.indexedFilter_=new qd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ks.getStartPost_(e),this.endPost_=Ks.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,o,a,u){return this.matches(new we(n,s))||(s=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,o,a,u)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ue.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ue.EMPTY_NODE);const a=this;return n.forEachChild(He,(u,p)=>{a.matches(new we(u,p))||(o=o.updateImmediateChild(u,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Ks(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,o,a,u){return this.rangedFilter_.matches(new we(n,s))||(s=ue.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,o,a,u):this.fullLimitUpdateChild_(e,n,s,a,u)}updateFullNode(e,n,s){let o;if(n.isLeafNode()||n.isEmpty())o=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ue.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const p=a.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))o=o.updateImmediateChild(p.name,p.node),u++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(ue.EMPTY_NODE);let a;this.reverse_?a=o.getReverseIterator(this.index_):a=o.getIterator(this.index_);let u=0;for(;a.hasNext();){const p=a.getNext();u<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?u++:o=o.updateImmediateChild(p.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,o,a){let u;if(this.reverse_){const _=this.index_.getCompare();u=(w,R)=>_(R,w)}else u=this.index_.getCompare();const p=e;V(p.numChildren()===this.limit_,"");const m=new we(n,s),g=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),y=this.rangedFilter_.matches(m);if(p.hasChild(n)){const _=p.getImmediateChild(n);let w=o.getChildAfterChild(this.index_,g,this.reverse_);for(;w!=null&&(w.name===n||p.hasChild(w.name));)w=o.getChildAfterChild(this.index_,w,this.reverse_);const R=w==null?1:u(w,m);if(y&&!s.isEmpty()&&R>=0)return a!=null&&a.trackChildChange(qs(n,s,_)),p.updateImmediateChild(n,s);{a!=null&&a.trackChildChange(Gs(n,_));const j=p.updateImmediateChild(n,ue.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(a!=null&&a.trackChildChange(xi(w.name,w.node)),j.updateImmediateChild(w.name,w.node)):j}}else return s.isEmpty()?e:y&&u(g,m)>=0?(a!=null&&(a.trackChildChange(Gs(g.name,g.node)),a.trackChildChange(xi(n,s))),p.updateImmediateChild(n,s).updateImmediateChild(g.name,ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=He}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return V(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return V(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ei}hasEnd(){return this.endSet_}getIndexEndValue(){return V(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return V(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return V(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===He}copy(){const e=new Kd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function NN(r){return r.loadsAllData()?new qd(r.getIndex()):r.hasLimit()?new IN(r):new Ks(r)}function Sg(r){const e={};if(r.isDefault())return e;let n;if(r.index_===He?n="$priority":r.index_===EN?n="$value":r.index_===_i?n="$key":(V(r.index_ instanceof SN,"Unrecognized index type!"),n=r.index_.toString()),e.orderBy=et(n),r.startSet_){const s=r.startAfterSet_?"startAfter":"startAt";e[s]=et(r.indexStartValue_),r.startNameSet_&&(e[s]+=","+et(r.indexStartName_))}if(r.endSet_){const s=r.endBeforeSet_?"endBefore":"endAt";e[s]=et(r.indexEndValue_),r.endNameSet_&&(e[s]+=","+et(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function Cg(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let n=r.viewFrom_;n===""&&(r.isViewFromLeft()?n="l":n="r"),e.vf=n}return r.index_!==He&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends m_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(V(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=so("p:rest:"),this.listens_={}}listen(e,n,s,o){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=ql.getListenId_(e,s),p={};this.listens_[u]=p;const m=Sg(e._queryParams);this.restRequest_(a+".json",m,(g,y)=>{let _=y;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(a,_,!1,s),wi(this.listens_,u)===p){let w;g?g===401?w="permission_denied":w="rest_error:"+g:w="ok",o(w,null)}})}unlisten(e,n){const s=ql.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Sg(e._queryParams),s=e._path.toString(),o=new Zs;return this.restRequest_(s+".json",n,(a,u)=>{let p=u;a===404&&(p=null,a=null),a===null?(this.onDataUpdate_(s,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,a])=>{o&&o.accessToken&&(n.auth=o.accessToken),a&&a.token&&(n.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Di(n);this.log_("Sending REST request for "+u);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(s&&p.readyState===4){this.log_("REST Response for "+u+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=$s(p.responseText)}catch{_t("Failed to parse JSON response for "+u+": "+p.responseText)}s(null,m)}else p.status!==401&&p.status!==404&&_t("Got unsuccessful REST response for "+u+" Status: "+p.status),s(p.status);s=null}},p.open("GET",u,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(){return{value:null,children:new Map}}function I_(r,e,n){if(Se(e))r.value=n,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,n);else{const s=ye(e);r.children.has(s)||r.children.set(s,Kl());const o=r.children.get(s);e=je(e),I_(o,e,n)}}function sd(r,e,n){r.value!==null?n(e,r.value):kN(r,(s,o)=>{const a=new be(e.toString()+"/"+s);sd(o,a,n)})}function kN(r,e){r.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ct(this.last_,(s,o)=>{n[s]=n[s]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg=10*1e3,RN=30*1e3,AN=300*1e3;class bN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new PN(e);const s=Eg+(RN-Eg)*Math.random();js(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;ct(e,(o,a)=>{a>0&&un(this.statsToReport_,o)&&(n[o]=a,s=!0)}),s&&this.server_.reportStats(n),js(this.reportStats_.bind(this),Math.floor(Math.random()*2*AN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Jt||(Jt={}));function Qd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Yd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Jd(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Jt.ACK_USER_WRITE,this.source=Qd()}operationForChild(e){if(Se(this.path)){if(this.affectedTree.value!=null)return V(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new be(e));return new Ql(Ne(),n,this.revert)}}else return V(ye(this.path)===e,"operationForChild called for unrelated child."),new Ql(je(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this.source=e,this.path=n,this.type=Jt.LISTEN_COMPLETE}operationForChild(e){return Se(this.path)?new Qs(this.source,Ne()):new Qs(this.source,je(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Jt.OVERWRITE}operationForChild(e){return Se(this.path)?new Lr(this.source,Ne(),this.snap.getImmediateChild(e)):new Lr(this.source,je(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Jt.MERGE}operationForChild(e){if(Se(this.path)){const n=this.children.subtree(new be(e));return n.isEmpty()?null:n.value?new Lr(this.source,Ne(),n.value):new Ii(this.source,Ne(),n)}else return V(ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ii(this.source,je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Se(e))return this.isFullyInitialized()&&!this.filtered_;const n=ye(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ON(r,e,n,s){const o=[],a=[];return e.forEach(u=>{u.type==="child_changed"&&r.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(xN(u.childName,u.snapshotNode))}),Rs(r,o,"child_removed",e,s,n),Rs(r,o,"child_added",e,s,n),Rs(r,o,"child_moved",a,s,n),Rs(r,o,"child_changed",e,s,n),Rs(r,o,"value",e,s,n),o}function Rs(r,e,n,s,o,a){const u=s.filter(p=>p.type===n);u.sort((p,m)=>LN(r,p,m)),u.forEach(p=>{const m=jN(r,p,a);o.forEach(g=>{g.respondsTo(p.type)&&e.push(g.createEvent(m,r.query_))})})}function jN(r,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function LN(r,e,n){if(e.childName==null||n.childName==null)throw Ai("Should only compare child_ events.");const s=new we(e.childName,e.snapshotNode),o=new we(n.childName,n.snapshotNode);return r.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(r,e){return{eventCache:r,serverCache:e}}function Ls(r,e,n,s){return fa(new ar(e,n,s),r.serverCache)}function N_(r,e,n,s){return fa(r.eventCache,new ar(e,n,s))}function Yl(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function Mr(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu;const MN=()=>(Lu||(Lu=new Tt(SI)),Lu);class Oe{static fromObject(e){let n=new Oe(null);return ct(e,(s,o)=>{n=n.set(new be(s),o)}),n}constructor(e,n=MN()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ne(),value:this.value};if(Se(e))return null;{const s=ye(e),o=this.children.get(s);if(o!==null){const a=o.findRootMostMatchingPathAndValue(je(e),n);return a!=null?{path:Ve(new be(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Se(e))return this;{const n=ye(e),s=this.children.get(n);return s!==null?s.subtree(je(e)):new Oe(null)}}set(e,n){if(Se(e))return new Oe(n,this.children);{const s=ye(e),a=(this.children.get(s)||new Oe(null)).set(je(e),n),u=this.children.insert(s,a);return new Oe(this.value,u)}}remove(e){if(Se(e))return this.children.isEmpty()?new Oe(null):new Oe(null,this.children);{const n=ye(e),s=this.children.get(n);if(s){const o=s.remove(je(e));let a;return o.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,o),this.value===null&&a.isEmpty()?new Oe(null):new Oe(this.value,a)}else return this}}get(e){if(Se(e))return this.value;{const n=ye(e),s=this.children.get(n);return s?s.get(je(e)):null}}setTree(e,n){if(Se(e))return n;{const s=ye(e),a=(this.children.get(s)||new Oe(null)).setTree(je(e),n);let u;return a.isEmpty()?u=this.children.remove(s):u=this.children.insert(s,a),new Oe(this.value,u)}}fold(e){return this.fold_(Ne(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((o,a)=>{s[o]=a.fold_(Ve(e,o),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Ne(),n)}findOnPath_(e,n,s){const o=this.value?s(n,this.value):!1;if(o)return o;if(Se(e))return null;{const a=ye(e),u=this.children.get(a);return u?u.findOnPath_(je(e),Ve(n,a),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ne(),n)}foreachOnPath_(e,n,s){if(Se(e))return this;{this.value&&s(n,this.value);const o=ye(e),a=this.children.get(o);return a?a.foreachOnPath_(je(e),Ve(n,o),s):new Oe(null)}}foreach(e){this.foreach_(Ne(),e)}foreach_(e,n){this.children.inorderTraversal((s,o)=>{o.foreach_(Ve(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.writeTree_=e}static empty(){return new Zt(new Oe(null))}}function Ms(r,e,n){if(Se(e))return new Zt(new Oe(n));{const s=r.writeTree_.findRootMostValueAndPath(e);if(s!=null){const o=s.path;let a=s.value;const u=vt(o,e);return a=a.updateChild(u,n),new Zt(r.writeTree_.set(o,a))}else{const o=new Oe(n),a=r.writeTree_.setTree(e,o);return new Zt(a)}}}function od(r,e,n){let s=r;return ct(n,(o,a)=>{s=Ms(s,Ve(e,o),a)}),s}function xg(r,e){if(Se(e))return Zt.empty();{const n=r.writeTree_.setTree(e,new Oe(null));return new Zt(n)}}function ld(r,e){return zr(r,e)!=null}function zr(r,e){const n=r.writeTree_.findRootMostValueAndPath(e);return n!=null?r.writeTree_.get(n.path).getChild(vt(n.path,e)):null}function Ig(r){const e=[],n=r.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(He,(s,o)=>{e.push(new we(s,o))}):r.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&e.push(new we(s,o.value))}),e}function sr(r,e){if(Se(e))return r;{const n=zr(r,e);return n!=null?new Zt(new Oe(n)):new Zt(r.writeTree_.subtree(e))}}function ad(r){return r.writeTree_.isEmpty()}function Ni(r,e){return T_(Ne(),r.writeTree_,e)}function T_(r,e,n){if(e.value!=null)return n.updateChild(r,e.value);{let s=null;return e.children.inorderTraversal((o,a)=>{o===".priority"?(V(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):n=T_(Ve(r,o),a,n)}),!n.getChild(r).isEmpty()&&s!==null&&(n=n.updateChild(Ve(r,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(r,e){return A_(e,r)}function FN(r,e,n,s,o){V(s>r.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),r.allWrites.push({path:e,snap:n,writeId:s,visible:o}),o&&(r.visibleWrites=Ms(r.visibleWrites,e,n)),r.lastWriteId=s}function UN(r,e,n,s){V(s>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:n,writeId:s,visible:!0}),r.visibleWrites=od(r.visibleWrites,e,n),r.lastWriteId=s}function zN(r,e){for(let n=0;n<r.allWrites.length;n++){const s=r.allWrites[n];if(s.writeId===e)return s}return null}function $N(r,e){const n=r.allWrites.findIndex(p=>p.writeId===e);V(n>=0,"removeWrite called with nonexistent writeId.");const s=r.allWrites[n];r.allWrites.splice(n,1);let o=s.visible,a=!1,u=r.allWrites.length-1;for(;o&&u>=0;){const p=r.allWrites[u];p.visible&&(u>=n&&BN(p,s.path)?o=!1:Ft(s.path,p.path)&&(a=!0)),u--}if(o){if(a)return WN(r),!0;if(s.snap)r.visibleWrites=xg(r.visibleWrites,s.path);else{const p=s.children;ct(p,m=>{r.visibleWrites=xg(r.visibleWrites,Ve(s.path,m))})}return!0}else return!1}function BN(r,e){if(r.snap)return Ft(r.path,e);for(const n in r.children)if(r.children.hasOwnProperty(n)&&Ft(Ve(r.path,n),e))return!0;return!1}function WN(r){r.visibleWrites=k_(r.allWrites,VN,Ne()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function VN(r){return r.visible}function k_(r,e,n){let s=Zt.empty();for(let o=0;o<r.length;++o){const a=r[o];if(e(a)){const u=a.path;let p;if(a.snap)Ft(n,u)?(p=vt(n,u),s=Ms(s,p,a.snap)):Ft(u,n)&&(p=vt(u,n),s=Ms(s,Ne(),a.snap.getChild(p)));else if(a.children){if(Ft(n,u))p=vt(n,u),s=od(s,p,a.children);else if(Ft(u,n))if(p=vt(u,n),Se(p))s=od(s,Ne(),a.children);else{const m=wi(a.children,ye(p));if(m){const g=m.getChild(je(p));s=Ms(s,Ne(),g)}}}else throw Ai("WriteRecord should have .snap or .children")}}return s}function P_(r,e,n,s,o){if(!s&&!o){const a=zr(r.visibleWrites,e);if(a!=null)return a;{const u=sr(r.visibleWrites,e);if(ad(u))return n;if(n==null&&!ld(u,Ne()))return null;{const p=n||ue.EMPTY_NODE;return Ni(u,p)}}}else{const a=sr(r.visibleWrites,e);if(!o&&ad(a))return n;if(!o&&n==null&&!ld(a,Ne()))return null;{const u=function(g){return(g.visible||o)&&(!s||!~s.indexOf(g.writeId))&&(Ft(g.path,e)||Ft(e,g.path))},p=k_(r.allWrites,u,e),m=n||ue.EMPTY_NODE;return Ni(p,m)}}}function HN(r,e,n){let s=ue.EMPTY_NODE;const o=zr(r.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(He,(a,u)=>{s=s.updateImmediateChild(a,u)}),s;if(n){const a=sr(r.visibleWrites,e);return n.forEachChild(He,(u,p)=>{const m=Ni(sr(a,new be(u)),p);s=s.updateImmediateChild(u,m)}),Ig(a).forEach(u=>{s=s.updateImmediateChild(u.name,u.node)}),s}else{const a=sr(r.visibleWrites,e);return Ig(a).forEach(u=>{s=s.updateImmediateChild(u.name,u.node)}),s}}function GN(r,e,n,s,o){V(s||o,"Either existingEventSnap or existingServerSnap must exist");const a=Ve(e,n);if(ld(r.visibleWrites,a))return null;{const u=sr(r.visibleWrites,a);return ad(u)?o.getChild(n):Ni(u,o.getChild(n))}}function qN(r,e,n,s){const o=Ve(e,n),a=zr(r.visibleWrites,o);if(a!=null)return a;if(s.isCompleteForChild(n)){const u=sr(r.visibleWrites,o);return Ni(u,s.getNode().getImmediateChild(n))}else return null}function KN(r,e){return zr(r.visibleWrites,e)}function QN(r,e,n,s,o,a,u){let p;const m=sr(r.visibleWrites,e),g=zr(m,Ne());if(g!=null)p=g;else if(n!=null)p=Ni(m,n);else return[];if(p=p.withIndex(u),!p.isEmpty()&&!p.isLeafNode()){const y=[],_=u.getCompare(),w=a?p.getReverseIteratorFrom(s,u):p.getIteratorFrom(s,u);let R=w.getNext();for(;R&&y.length<o;)_(R,s)!==0&&y.push(R),R=w.getNext();return y}else return[]}function YN(){return{visibleWrites:Zt.empty(),allWrites:[],lastWriteId:-1}}function Jl(r,e,n,s){return P_(r.writeTree,r.treePath,e,n,s)}function Xd(r,e){return HN(r.writeTree,r.treePath,e)}function Ng(r,e,n,s){return GN(r.writeTree,r.treePath,e,n,s)}function Xl(r,e){return KN(r.writeTree,Ve(r.treePath,e))}function JN(r,e,n,s,o,a){return QN(r.writeTree,r.treePath,e,n,s,o,a)}function Zd(r,e,n){return qN(r.writeTree,r.treePath,e,n)}function R_(r,e){return A_(Ve(r.treePath,e),r.writeTree)}function A_(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;V(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),V(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const a=o.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(s,qs(s,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(s,Gs(s,o.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(s,xi(s,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(s,qs(s,e.snapshotNode,o.oldSnap));else throw Ai("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const b_=new ZN;class eh{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new ar(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zd(this.writes_,e,s)}}getChildAfterChild(e,n,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Mr(this.viewCache_),a=JN(this.writes_,o,n,1,s,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(r){return{filter:r}}function t1(r,e){V(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),V(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function n1(r,e,n,s,o){const a=new XN;let u,p;if(n.type===Jt.OVERWRITE){const g=n;g.source.fromUser?u=cd(r,e,g.path,g.snap,s,o,a):(V(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered()&&!Se(g.path),u=Zl(r,e,g.path,g.snap,s,o,p,a))}else if(n.type===Jt.MERGE){const g=n;g.source.fromUser?u=i1(r,e,g.path,g.children,s,o,a):(V(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered(),u=ud(r,e,g.path,g.children,s,o,p,a))}else if(n.type===Jt.ACK_USER_WRITE){const g=n;g.revert?u=l1(r,e,g.path,s,o,a):u=s1(r,e,g.path,g.affectedTree,s,o,a)}else if(n.type===Jt.LISTEN_COMPLETE)u=o1(r,e,n.path,s,a);else throw Ai("Unknown operation type: "+n.type);const m=a.getChanges();return r1(e,u,m),{viewCache:u,changes:m}}function r1(r,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=Yl(r);(n.length>0||!r.eventCache.isFullyInitialized()||o&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&n.push(x_(Yl(e)))}}function D_(r,e,n,s,o,a){const u=e.eventCache;if(Xl(s,n)!=null)return e;{let p,m;if(Se(n))if(V(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Mr(e),y=g instanceof ue?g:ue.EMPTY_NODE,_=Xd(s,y);p=r.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const g=Jl(s,Mr(e));p=r.filter.updateFullNode(e.eventCache.getNode(),g,a)}else{const g=ye(n);if(g===".priority"){V(lr(n)===1,"Can't have a priority with additional path components");const y=u.getNode();m=e.serverCache.getNode();const _=Ng(s,n,y,m);_!=null?p=r.filter.updatePriority(y,_):p=u.getNode()}else{const y=je(n);let _;if(u.isCompleteForChild(g)){m=e.serverCache.getNode();const w=Ng(s,n,u.getNode(),m);w!=null?_=u.getNode().getImmediateChild(g).updateChild(y,w):_=u.getNode().getImmediateChild(g)}else _=Zd(s,g,e.serverCache);_!=null?p=r.filter.updateChild(u.getNode(),g,_,y,o,a):p=u.getNode()}}return Ls(e,p,u.isFullyInitialized()||Se(n),r.filter.filtersNodes())}}function Zl(r,e,n,s,o,a,u,p){const m=e.serverCache;let g;const y=u?r.filter:r.filter.getIndexedFilter();if(Se(n))g=y.updateFullNode(m.getNode(),s,null);else if(y.filtersNodes()&&!m.isFiltered()){const R=m.getNode().updateChild(n,s);g=y.updateFullNode(m.getNode(),R,null)}else{const R=ye(n);if(!m.isCompleteForPath(n)&&lr(n)>1)return e;const b=je(n),O=m.getNode().getImmediateChild(R).updateChild(b,s);R===".priority"?g=y.updatePriority(m.getNode(),O):g=y.updateChild(m.getNode(),R,O,b,b_,null)}const _=N_(e,g,m.isFullyInitialized()||Se(n),y.filtersNodes()),w=new eh(o,_,a);return D_(r,_,n,o,w,p)}function cd(r,e,n,s,o,a,u){const p=e.eventCache;let m,g;const y=new eh(o,e,a);if(Se(n))g=r.filter.updateFullNode(e.eventCache.getNode(),s,u),m=Ls(e,g,!0,r.filter.filtersNodes());else{const _=ye(n);if(_===".priority")g=r.filter.updatePriority(e.eventCache.getNode(),s),m=Ls(e,g,p.isFullyInitialized(),p.isFiltered());else{const w=je(n),R=p.getNode().getImmediateChild(_);let b;if(Se(w))b=s;else{const j=y.getCompleteChild(_);j!=null?Wd(w)===".priority"&&j.getChild(v_(w)).isEmpty()?b=j:b=j.updateChild(w,s):b=ue.EMPTY_NODE}if(R.equals(b))m=e;else{const j=r.filter.updateChild(p.getNode(),_,b,w,y,u);m=Ls(e,j,p.isFullyInitialized(),r.filter.filtersNodes())}}}return m}function Tg(r,e){return r.eventCache.isCompleteForChild(e)}function i1(r,e,n,s,o,a,u){let p=e;return s.foreach((m,g)=>{const y=Ve(n,m);Tg(e,ye(y))&&(p=cd(r,p,y,g,o,a,u))}),s.foreach((m,g)=>{const y=Ve(n,m);Tg(e,ye(y))||(p=cd(r,p,y,g,o,a,u))}),p}function kg(r,e,n){return n.foreach((s,o)=>{e=e.updateChild(s,o)}),e}function ud(r,e,n,s,o,a,u,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;Se(n)?g=s:g=new Oe(null).setTree(n,s);const y=e.serverCache.getNode();return g.children.inorderTraversal((_,w)=>{if(y.hasChild(_)){const R=e.serverCache.getNode().getImmediateChild(_),b=kg(r,R,w);m=Zl(r,m,new be(_),b,o,a,u,p)}}),g.children.inorderTraversal((_,w)=>{const R=!e.serverCache.isCompleteForChild(_)&&w.value===null;if(!y.hasChild(_)&&!R){const b=e.serverCache.getNode().getImmediateChild(_),j=kg(r,b,w);m=Zl(r,m,new be(_),j,o,a,u,p)}}),m}function s1(r,e,n,s,o,a,u){if(Xl(o,n)!=null)return e;const p=e.serverCache.isFiltered(),m=e.serverCache;if(s.value!=null){if(Se(n)&&m.isFullyInitialized()||m.isCompleteForPath(n))return Zl(r,e,n,m.getNode().getChild(n),o,a,p,u);if(Se(n)){let g=new Oe(null);return m.getNode().forEachChild(_i,(y,_)=>{g=g.set(new be(y),_)}),ud(r,e,n,g,o,a,p,u)}else return e}else{let g=new Oe(null);return s.foreach((y,_)=>{const w=Ve(n,y);m.isCompleteForPath(w)&&(g=g.set(y,m.getNode().getChild(w)))}),ud(r,e,n,g,o,a,p,u)}}function o1(r,e,n,s,o){const a=e.serverCache,u=N_(e,a.getNode(),a.isFullyInitialized()||Se(n),a.isFiltered());return D_(r,u,n,s,b_,o)}function l1(r,e,n,s,o,a){let u;if(Xl(s,n)!=null)return e;{const p=new eh(s,e,o),m=e.eventCache.getNode();let g;if(Se(n)||ye(n)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=Jl(s,Mr(e));else{const _=e.serverCache.getNode();V(_ instanceof ue,"serverChildren would be complete if leaf node"),y=Xd(s,_)}y=y,g=r.filter.updateFullNode(m,y,a)}else{const y=ye(n);let _=Zd(s,y,e.serverCache);_==null&&e.serverCache.isCompleteForChild(y)&&(_=m.getImmediateChild(y)),_!=null?g=r.filter.updateChild(m,y,_,je(n),p,a):e.eventCache.getNode().hasChild(y)?g=r.filter.updateChild(m,y,ue.EMPTY_NODE,je(n),p,a):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Jl(s,Mr(e)),u.isLeafNode()&&(g=r.filter.updateFullNode(g,u,a)))}return u=e.serverCache.isFullyInitialized()||Xl(s,Ne())!=null,Ls(e,g,u,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new qd(s.getIndex()),a=NN(s);this.processor_=e1(a);const u=n.serverCache,p=n.eventCache,m=o.updateFullNode(ue.EMPTY_NODE,u.getNode(),null),g=a.updateFullNode(ue.EMPTY_NODE,p.getNode(),null),y=new ar(m,u.isFullyInitialized(),o.filtersNodes()),_=new ar(g,p.isFullyInitialized(),a.filtersNodes());this.viewCache_=fa(_,y),this.eventGenerator_=new DN(this.query_)}get query(){return this.query_}}function c1(r){return r.viewCache_.serverCache.getNode()}function u1(r){return Yl(r.viewCache_)}function d1(r,e){const n=Mr(r.viewCache_);return n&&(r.query._queryParams.loadsAllData()||!Se(e)&&!n.getImmediateChild(ye(e)).isEmpty())?n.getChild(e):null}function Pg(r){return r.eventRegistrations_.length===0}function h1(r,e){r.eventRegistrations_.push(e)}function Rg(r,e,n){const s=[];if(n){V(e==null,"A cancel should cancel all event registrations.");const o=r.query._path;r.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(n,o);u&&s.push(u)})}if(e){let o=[];for(let a=0;a<r.eventRegistrations_.length;++a){const u=r.eventRegistrations_[a];if(!u.matches(e))o.push(u);else if(e.hasAnyCallback()){o=o.concat(r.eventRegistrations_.slice(a+1));break}}r.eventRegistrations_=o}else r.eventRegistrations_=[];return s}function Ag(r,e,n,s){e.type===Jt.MERGE&&e.source.queryId!==null&&(V(Mr(r.viewCache_),"We should always have a full cache before handling merges"),V(Yl(r.viewCache_),"Missing event cache, even though we have a server cache"));const o=r.viewCache_,a=n1(r.processor_,o,e,n,s);return t1(r.processor_,a.viewCache),V(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=a.viewCache,O_(r,a.changes,a.viewCache.eventCache.getNode(),null)}function f1(r,e){const n=r.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(He,(a,u)=>{s.push(xi(a,u))}),n.isFullyInitialized()&&s.push(x_(n.getNode())),O_(r,s,n.getNode(),e)}function O_(r,e,n,s){const o=s?[s]:r.eventRegistrations_;return ON(r.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea;class j_{constructor(){this.views=new Map}}function p1(r){V(!ea,"__referenceConstructor has already been defined"),ea=r}function m1(){return V(ea,"Reference.ts has not been loaded"),ea}function g1(r){return r.views.size===0}function th(r,e,n,s){const o=e.source.queryId;if(o!==null){const a=r.views.get(o);return V(a!=null,"SyncTree gave us an op for an invalid query."),Ag(a,e,n,s)}else{let a=[];for(const u of r.views.values())a=a.concat(Ag(u,e,n,s));return a}}function L_(r,e,n,s,o){const a=e._queryIdentifier,u=r.views.get(a);if(!u){let p=Jl(n,o?s:null),m=!1;p?m=!0:s instanceof ue?(p=Xd(n,s),m=!1):(p=ue.EMPTY_NODE,m=!1);const g=fa(new ar(p,m,!1),new ar(s,o,!1));return new a1(e,g)}return u}function v1(r,e,n,s,o,a){const u=L_(r,e,s,o,a);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,u),h1(u,n),f1(u,n)}function _1(r,e,n,s){const o=e._queryIdentifier,a=[];let u=[];const p=cr(r);if(o==="default")for(const[m,g]of r.views.entries())u=u.concat(Rg(g,n,s)),Pg(g)&&(r.views.delete(m),g.query._queryParams.loadsAllData()||a.push(g.query));else{const m=r.views.get(o);m&&(u=u.concat(Rg(m,n,s)),Pg(m)&&(r.views.delete(o),m.query._queryParams.loadsAllData()||a.push(m.query)))}return p&&!cr(r)&&a.push(new(m1())(e._repo,e._path)),{removed:a,events:u}}function M_(r){const e=[];for(const n of r.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function or(r,e){let n=null;for(const s of r.views.values())n=n||d1(s,e);return n}function F_(r,e){if(e._queryParams.loadsAllData())return ma(r);{const s=e._queryIdentifier;return r.views.get(s)}}function U_(r,e){return F_(r,e)!=null}function cr(r){return ma(r)!=null}function ma(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta;function y1(r){V(!ta,"__referenceConstructor has already been defined"),ta=r}function w1(){return V(ta,"Reference.ts has not been loaded"),ta}let S1=1;class bg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Oe(null),this.pendingWriteTree_=YN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function z_(r,e,n,s,o){return FN(r.pendingWriteTree_,e,n,s,o),o?Mi(r,new Lr(Qd(),e,n)):[]}function C1(r,e,n,s){UN(r.pendingWriteTree_,e,n,s);const o=Oe.fromObject(n);return Mi(r,new Ii(Qd(),e,o))}function er(r,e,n=!1){const s=zN(r.pendingWriteTree_,e);if($N(r.pendingWriteTree_,e)){let a=new Oe(null);return s.snap!=null?a=a.set(Ne(),!0):ct(s.children,u=>{a=a.set(new be(u),!0)}),Mi(r,new Ql(s.path,a,n))}else return[]}function lo(r,e,n){return Mi(r,new Lr(Yd(),e,n))}function E1(r,e,n){const s=Oe.fromObject(n);return Mi(r,new Ii(Yd(),e,s))}function x1(r,e){return Mi(r,new Qs(Yd(),e))}function I1(r,e,n){const s=rh(r,n);if(s){const o=ih(s),a=o.path,u=o.queryId,p=vt(a,e),m=new Qs(Jd(u),p);return sh(r,a,m)}else return[]}function na(r,e,n,s,o=!1){const a=e._path,u=r.syncPointTree_.get(a);let p=[];if(u&&(e._queryIdentifier==="default"||U_(u,e))){const m=_1(u,e,n,s);g1(u)&&(r.syncPointTree_=r.syncPointTree_.remove(a));const g=m.removed;if(p=m.events,!o){const y=g.findIndex(w=>w._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(a,(w,R)=>cr(R));if(y&&!_){const w=r.syncPointTree_.subtree(a);if(!w.isEmpty()){const R=k1(w);for(let b=0;b<R.length;++b){const j=R[b],O=j.query,Q=V_(r,j);r.listenProvider_.startListening(Fs(O),Ys(r,O),Q.hashFn,Q.onComplete)}}}!_&&g.length>0&&!s&&(y?r.listenProvider_.stopListening(Fs(e),null):g.forEach(w=>{const R=r.queryToTagMap.get(ga(w));r.listenProvider_.stopListening(Fs(w),R)}))}P1(r,g)}return p}function $_(r,e,n,s){const o=rh(r,s);if(o!=null){const a=ih(o),u=a.path,p=a.queryId,m=vt(u,e),g=new Lr(Jd(p),m,n);return sh(r,u,g)}else return[]}function N1(r,e,n,s){const o=rh(r,s);if(o){const a=ih(o),u=a.path,p=a.queryId,m=vt(u,e),g=Oe.fromObject(n),y=new Ii(Jd(p),m,g);return sh(r,u,y)}else return[]}function dd(r,e,n,s=!1){const o=e._path;let a=null,u=!1;r.syncPointTree_.foreachOnPath(o,(w,R)=>{const b=vt(w,o);a=a||or(R,b),u=u||cr(R)});let p=r.syncPointTree_.get(o);p?(u=u||cr(p),a=a||or(p,Ne())):(p=new j_,r.syncPointTree_=r.syncPointTree_.set(o,p));let m;a!=null?m=!0:(m=!1,a=ue.EMPTY_NODE,r.syncPointTree_.subtree(o).foreachChild((R,b)=>{const j=or(b,Ne());j&&(a=a.updateImmediateChild(R,j))}));const g=U_(p,e);if(!g&&!e._queryParams.loadsAllData()){const w=ga(e);V(!r.queryToTagMap.has(w),"View does not exist, but we have a tag");const R=R1();r.queryToTagMap.set(w,R),r.tagToQueryMap.set(R,w)}const y=pa(r.pendingWriteTree_,o);let _=v1(p,e,n,y,a,m);if(!g&&!u&&!s){const w=F_(p,e);_=_.concat(A1(r,e,w))}return _}function nh(r,e,n){const o=r.pendingWriteTree_,a=r.syncPointTree_.findOnPath(e,(u,p)=>{const m=vt(u,e),g=or(p,m);if(g)return g});return P_(o,e,a,n,!0)}function T1(r,e){const n=e._path;let s=null;r.syncPointTree_.foreachOnPath(n,(g,y)=>{const _=vt(g,n);s=s||or(y,_)});let o=r.syncPointTree_.get(n);o?s=s||or(o,Ne()):(o=new j_,r.syncPointTree_=r.syncPointTree_.set(n,o));const a=s!=null,u=a?new ar(s,!0,!1):null,p=pa(r.pendingWriteTree_,e._path),m=L_(o,e,p,a?u.getNode():ue.EMPTY_NODE,a);return u1(m)}function Mi(r,e){return B_(e,r.syncPointTree_,null,pa(r.pendingWriteTree_,Ne()))}function B_(r,e,n,s){if(Se(r.path))return W_(r,e,n,s);{const o=e.get(Ne());n==null&&o!=null&&(n=or(o,Ne()));let a=[];const u=ye(r.path),p=r.operationForChild(u),m=e.children.get(u);if(m&&p){const g=n?n.getImmediateChild(u):null,y=R_(s,u);a=a.concat(B_(p,m,g,y))}return o&&(a=a.concat(th(o,r,s,n))),a}}function W_(r,e,n,s){const o=e.get(Ne());n==null&&o!=null&&(n=or(o,Ne()));let a=[];return e.children.inorderTraversal((u,p)=>{const m=n?n.getImmediateChild(u):null,g=R_(s,u),y=r.operationForChild(u);y&&(a=a.concat(W_(y,p,m,g)))}),o&&(a=a.concat(th(o,r,s,n))),a}function V_(r,e){const n=e.query,s=Ys(r,n);return{hashFn:()=>(c1(e)||ue.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?I1(r,n._path,s):x1(r,n._path);{const a=xI(o,n);return na(r,n,null,a)}}}}function Ys(r,e){const n=ga(e);return r.queryToTagMap.get(n)}function ga(r){return r._path.toString()+"$"+r._queryIdentifier}function rh(r,e){return r.tagToQueryMap.get(e)}function ih(r){const e=r.indexOf("$");return V(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new be(r.substr(0,e))}}function sh(r,e,n){const s=r.syncPointTree_.get(e);V(s,"Missing sync point for query tag that we're tracking");const o=pa(r.pendingWriteTree_,e);return th(s,n,o,null)}function k1(r){return r.fold((e,n,s)=>{if(n&&cr(n))return[ma(n)];{let o=[];return n&&(o=M_(n)),ct(s,(a,u)=>{o=o.concat(u)}),o}})}function Fs(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(w1())(r._repo,r._path):r}function P1(r,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const o=ga(s),a=r.queryToTagMap.get(o);r.queryToTagMap.delete(o),r.tagToQueryMap.delete(a)}}}function R1(){return S1++}function A1(r,e,n){const s=e._path,o=Ys(r,e),a=V_(r,n),u=r.listenProvider_.startListening(Fs(e),o,a.hashFn,a.onComplete),p=r.syncPointTree_.subtree(s);if(o)V(!cr(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((g,y,_)=>{if(!Se(g)&&y&&cr(y))return[ma(y).query];{let w=[];return y&&(w=w.concat(M_(y).map(R=>R.query))),ct(_,(R,b)=>{w=w.concat(b)}),w}});for(let g=0;g<m.length;++g){const y=m[g];r.listenProvider_.stopListening(Fs(y),Ys(r,y))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new oh(n)}node(){return this.node_}}class lh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ve(this.path_,e);return new lh(this.syncTree_,n)}node(){return nh(this.syncTree_,this.path_)}}const b1=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},Dg=function(r,e,n){if(!r||typeof r!="object")return r;if(V(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return D1(r[".sv"],e,n);if(typeof r[".sv"]=="object")return O1(r[".sv"],e);V(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},D1=function(r,e,n){switch(r){case"timestamp":return n.timestamp;default:V(!1,"Unexpected server value: "+r)}},O1=function(r,e,n){r.hasOwnProperty("increment")||V(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const s=r.increment;typeof s!="number"&&V(!1,"Unexpected increment value: "+s);const o=e.node();if(V(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const u=o.getValue();return typeof u!="number"?s:u+s},H_=function(r,e,n,s){return ah(e,new lh(n,r),s)},G_=function(r,e,n){return ah(r,new oh(e),n)};function ah(r,e,n){const s=r.getPriority().val(),o=Dg(s,e.getImmediateChild(".priority"),n);let a;if(r.isLeafNode()){const u=r,p=Dg(u.getValue(),e,n);return p!==u.getValue()||o!==u.getPriority().val()?new it(p,Ze(o)):r}else{const u=r;return a=u,o!==u.getPriority().val()&&(a=a.updatePriority(new it(o))),u.forEachChild(He,(p,m)=>{const g=ah(m,e.getImmediateChild(p),n);g!==m&&(a=a.updateImmediateChild(p,g))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function uh(r,e){let n=e instanceof be?e:new be(e),s=r,o=ye(n);for(;o!==null;){const a=wi(s.node.children,o)||{children:{},childCount:0};s=new ch(o,s,a),n=je(n),o=ye(n)}return s}function Fi(r){return r.node.value}function q_(r,e){r.node.value=e,hd(r)}function K_(r){return r.node.childCount>0}function j1(r){return Fi(r)===void 0&&!K_(r)}function va(r,e){ct(r.node.children,(n,s)=>{e(new ch(n,r,s))})}function Q_(r,e,n,s){n&&e(r),va(r,o=>{Q_(o,e,!0)})}function L1(r,e,n){let s=r.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function ao(r){return new be(r.parent===null?r.name:ao(r.parent)+"/"+r.name)}function hd(r){r.parent!==null&&M1(r.parent,r.name,r)}function M1(r,e,n){const s=j1(n),o=un(r.node.children,e);s&&o?(delete r.node.children[e],r.node.childCount--,hd(r)):!s&&!o&&(r.node.children[e]=n.node,r.node.childCount++,hd(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=/[\[\].#$\/\u0000-\u001F\u007F]/,U1=/[\[\].#$\u0000-\u001F\u007F]/,Mu=10*1024*1024,dh=function(r){return typeof r=="string"&&r.length!==0&&!F1.test(r)},Y_=function(r){return typeof r=="string"&&r.length!==0&&!U1.test(r)},z1=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Y_(r)},$1=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!Fd(r)||r&&typeof r=="object"&&un(r,".sv")},J_=function(r,e,n,s){s&&e===void 0||_a(la(r,"value"),e,n)},_a=function(r,e,n){const s=n instanceof be?new iN(n,r):n;if(e===void 0)throw new Error(r+"contains undefined "+kr(s));if(typeof e=="function")throw new Error(r+"contains a function "+kr(s)+" with contents = "+e.toString());if(Fd(e))throw new Error(r+"contains "+e.toString()+" "+kr(s));if(typeof e=="string"&&e.length>Mu/3&&aa(e)>Mu)throw new Error(r+"contains a string greater than "+Mu+" utf8 bytes "+kr(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,a=!1;if(ct(e,(u,p)=>{if(u===".value")o=!0;else if(u!==".priority"&&u!==".sv"&&(a=!0,!dh(u)))throw new Error(r+" contains an invalid key ("+u+") "+kr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sN(s,u),_a(r,p,s),oN(s)}),o&&a)throw new Error(r+' contains ".value" child '+kr(s)+" in addition to actual children.")}},B1=function(r,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const a=Hs(s);for(let u=0;u<a.length;u++)if(!(a[u]===".priority"&&u===a.length-1)){if(!dh(a[u]))throw new Error(r+"contains an invalid key ("+a[u]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(rN);let o=null;for(n=0;n<e.length;n++){if(s=e[n],o!==null&&Ft(o,s))throw new Error(r+"contains a path "+o.toString()+" that is ancestor of another path "+s.toString());o=s}},W1=function(r,e,n,s){const o=la(r,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const a=[];ct(e,(u,p)=>{const m=new be(u);if(_a(o,p,Ve(n,m)),Wd(m)===".priority"&&!$1(p))throw new Error(o+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),B1(o,a)},X_=function(r,e,n,s){if(!Y_(n))throw new Error(la(r,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},V1=function(r,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),X_(r,e,n)},hh=function(r,e){if(ye(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},H1=function(r,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!dh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!z1(n))throw new Error(la(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ya(r,e){let n=null;for(let s=0;s<e.length;s++){const o=e[s],a=o.getPath();n!==null&&!Vd(a,n.path)&&(r.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(o)}n&&r.eventLists_.push(n)}function Z_(r,e,n){ya(r,n),ey(r,s=>Vd(s,e))}function Ut(r,e,n){ya(r,n),ey(r,s=>Ft(s,e)||Ft(e,s))}function ey(r,e){r.recursionDepth_++;let n=!0;for(let s=0;s<r.eventLists_.length;s++){const o=r.eventLists_[s];if(o){const a=o.path;e(a)?(q1(r.eventLists_[s]),r.eventLists_[s]=null):n=!1}}n&&(r.eventLists_=[]),r.recursionDepth_--}function q1(r){for(let e=0;e<r.events.length;e++){const n=r.events[e];if(n!==null){r.events[e]=null;const s=n.getEventRunner();Os&&at("event: "+n.toString()),Li(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="repo_interrupt",Q1=25;class Y1{constructor(e,n,s,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new G1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Kl(),this.transactionQueueTree_=new ch,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function J1(r,e,n){if(r.stats_=$d(r.repoInfo_),r.forceRestClient_||kI())r.server_=new ql(r.repoInfo_,(s,o,a,u)=>{Og(r,s,o,a,u)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>jg(r,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{et(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}r.persistentConnection_=new xn(r.repoInfo_,e,(s,o,a,u)=>{Og(r,s,o,a,u)},s=>{jg(r,s)},s=>{X1(r,s)},r.authTokenProvider_,r.appCheckProvider_,n),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(s=>{r.server_.refreshAuthToken(s)}),r.appCheckProvider_.addTokenChangeListener(s=>{r.server_.refreshAppCheckToken(s.token)}),r.statsReporter_=DI(r.repoInfo_,()=>new bN(r.stats_,r.server_)),r.infoData_=new TN,r.infoSyncTree_=new bg({startListening:(s,o,a,u)=>{let p=[];const m=r.infoData_.getNode(s._path);return m.isEmpty()||(p=lo(r.infoSyncTree_,s._path,m),setTimeout(()=>{u("ok")},0)),p},stopListening:()=>{}}),fh(r,"connected",!1),r.serverSyncTree_=new bg({startListening:(s,o,a,u)=>(r.server_.listen(s,a,o,(p,m)=>{const g=u(p,m);Ut(r.eventQueue_,s._path,g)}),[]),stopListening:(s,o)=>{r.server_.unlisten(s,o)}})}function ty(r){const n=r.infoData_.getNode(new be(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function wa(r){return b1({timestamp:ty(r)})}function Og(r,e,n,s,o){r.dataUpdateCount++;const a=new be(e);n=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,n):n;let u=[];if(o)if(s){const m=Ll(n,g=>Ze(g));u=N1(r.serverSyncTree_,a,m,o)}else{const m=Ze(n);u=$_(r.serverSyncTree_,a,m,o)}else if(s){const m=Ll(n,g=>Ze(g));u=E1(r.serverSyncTree_,a,m)}else{const m=Ze(n);u=lo(r.serverSyncTree_,a,m)}let p=a;u.length>0&&(p=Ti(r,a)),Ut(r.eventQueue_,p,u)}function jg(r,e){fh(r,"connected",e),e===!1&&nT(r)}function X1(r,e){ct(e,(n,s)=>{fh(r,n,s)})}function fh(r,e,n){const s=new be("/.info/"+e),o=Ze(n);r.infoData_.updateSnapshot(s,o);const a=lo(r.infoSyncTree_,s,o);Ut(r.eventQueue_,s,a)}function ph(r){return r.nextWriteId_++}function Z1(r,e,n){const s=T1(r.serverSyncTree_,e);return s!=null?Promise.resolve(s):r.server_.get(e).then(o=>{const a=Ze(o).withIndex(e._queryParams.getIndex());dd(r.serverSyncTree_,e,n,!0);let u;if(e._queryParams.loadsAllData())u=lo(r.serverSyncTree_,e._path,a);else{const p=Ys(r.serverSyncTree_,e);u=$_(r.serverSyncTree_,e._path,a,p)}return Ut(r.eventQueue_,e._path,u),na(r.serverSyncTree_,e,n,null,!0),a},o=>(co(r,"get for query "+et(e)+" failed: "+o),Promise.reject(new Error(o))))}function eT(r,e,n,s,o){co(r,"set",{path:e.toString(),value:n,priority:s});const a=wa(r),u=Ze(n,s),p=nh(r.serverSyncTree_,e),m=G_(u,p,a),g=ph(r),y=z_(r.serverSyncTree_,e,m,g,!0);ya(r.eventQueue_,y),r.server_.put(e.toString(),u.val(!0),(w,R)=>{const b=w==="ok";b||_t("set at "+e+" failed: "+w);const j=er(r.serverSyncTree_,g,!b);Ut(r.eventQueue_,e,j),fd(r,o,w,R)});const _=gh(r,e);Ti(r,_),Ut(r.eventQueue_,_,[])}function tT(r,e,n,s){co(r,"update",{path:e.toString(),value:n});let o=!0;const a=wa(r),u={};if(ct(n,(p,m)=>{o=!1,u[p]=H_(Ve(e,p),Ze(m),r.serverSyncTree_,a)}),o)at("update() called with empty data.  Don't do anything."),fd(r,s,"ok",void 0);else{const p=ph(r),m=C1(r.serverSyncTree_,e,u,p);ya(r.eventQueue_,m),r.server_.merge(e.toString(),n,(g,y)=>{const _=g==="ok";_||_t("update at "+e+" failed: "+g);const w=er(r.serverSyncTree_,p,!_),R=w.length>0?Ti(r,e):e;Ut(r.eventQueue_,R,w),fd(r,s,g,y)}),ct(n,g=>{const y=gh(r,Ve(e,g));Ti(r,y)}),Ut(r.eventQueue_,e,[])}}function nT(r){co(r,"onDisconnectEvents");const e=wa(r),n=Kl();sd(r.onDisconnect_,Ne(),(o,a)=>{const u=H_(o,a,r.serverSyncTree_,e);I_(n,o,u)});let s=[];sd(n,Ne(),(o,a)=>{s=s.concat(lo(r.serverSyncTree_,o,a));const u=gh(r,o);Ti(r,u)}),r.onDisconnect_=Kl(),Ut(r.eventQueue_,Ne(),s)}function rT(r,e,n){let s;ye(e._path)===".info"?s=dd(r.infoSyncTree_,e,n):s=dd(r.serverSyncTree_,e,n),Z_(r.eventQueue_,e._path,s)}function iT(r,e,n){let s;ye(e._path)===".info"?s=na(r.infoSyncTree_,e,n):s=na(r.serverSyncTree_,e,n),Z_(r.eventQueue_,e._path,s)}function sT(r){r.persistentConnection_&&r.persistentConnection_.interrupt(K1)}function co(r,...e){let n="";r.persistentConnection_&&(n=r.persistentConnection_.id+":"),at(n,...e)}function fd(r,e,n,s){e&&Li(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let a=o;s&&(a+=": "+s);const u=new Error(a);u.code=o,e(u)}})}function ny(r,e,n){return nh(r.serverSyncTree_,e,n)||ue.EMPTY_NODE}function mh(r,e=r.transactionQueueTree_){if(e||Sa(r,e),Fi(e)){const n=iy(r,e);V(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&oT(r,ao(e),n)}else K_(e)&&va(e,n=>{mh(r,n)})}function oT(r,e,n){const s=n.map(g=>g.currentWriteId),o=ny(r,e,s);let a=o;const u=o.hash();for(let g=0;g<n.length;g++){const y=n[g];V(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const _=vt(e,y.path);a=a.updateChild(_,y.currentOutputSnapshotRaw)}const p=a.val(!0),m=e;r.server_.put(m.toString(),p,g=>{co(r,"transaction put response",{path:m.toString(),status:g});let y=[];if(g==="ok"){const _=[];for(let w=0;w<n.length;w++)n[w].status=2,y=y.concat(er(r.serverSyncTree_,n[w].currentWriteId)),n[w].onComplete&&_.push(()=>n[w].onComplete(null,!0,n[w].currentOutputSnapshotResolved)),n[w].unwatcher();Sa(r,uh(r.transactionQueueTree_,e)),mh(r,r.transactionQueueTree_),Ut(r.eventQueue_,e,y);for(let w=0;w<_.length;w++)Li(_[w])}else{if(g==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{_t("transaction at "+m.toString()+" failed: "+g);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=g}Ti(r,e)}},u)}function Ti(r,e){const n=ry(r,e),s=ao(n),o=iy(r,n);return lT(r,o,s),s}function lT(r,e,n){if(e.length===0)return;const s=[];let o=[];const u=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const m=e[p],g=vt(n,m.path);let y=!1,_;if(V(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)y=!0,_=m.abortReason,o=o.concat(er(r.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=Q1)y=!0,_="maxretry",o=o.concat(er(r.serverSyncTree_,m.currentWriteId,!0));else{const w=ny(r,m.path,u);m.currentInputSnapshot=w;const R=e[p].update(w.val());if(R!==void 0){_a("transaction failed: Data returned ",R,m.path);let b=Ze(R);typeof R=="object"&&R!=null&&un(R,".priority")||(b=b.updatePriority(w.getPriority()));const O=m.currentWriteId,Q=wa(r),A=G_(b,w,Q);m.currentOutputSnapshotRaw=b,m.currentOutputSnapshotResolved=A,m.currentWriteId=ph(r),u.splice(u.indexOf(O),1),o=o.concat(z_(r.serverSyncTree_,m.path,A,m.currentWriteId,m.applyLocally)),o=o.concat(er(r.serverSyncTree_,O,!0))}else y=!0,_="nodata",o=o.concat(er(r.serverSyncTree_,m.currentWriteId,!0))}Ut(r.eventQueue_,n,o),o=[],y&&(e[p].status=2,(function(w){setTimeout(w,Math.floor(0))})(e[p].unwatcher),e[p].onComplete&&(_==="nodata"?s.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):s.push(()=>e[p].onComplete(new Error(_),!1,null))))}Sa(r,r.transactionQueueTree_);for(let p=0;p<s.length;p++)Li(s[p]);mh(r,r.transactionQueueTree_)}function ry(r,e){let n,s=r.transactionQueueTree_;for(n=ye(e);n!==null&&Fi(s)===void 0;)s=uh(s,n),e=je(e),n=ye(e);return s}function iy(r,e){const n=[];return sy(r,e,n),n.sort((s,o)=>s.order-o.order),n}function sy(r,e,n){const s=Fi(e);if(s)for(let o=0;o<s.length;o++)n.push(s[o]);va(e,o=>{sy(r,o,n)})}function Sa(r,e){const n=Fi(e);if(n){let s=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[s]=n[o],s++);n.length=s,q_(e,n.length>0?n:void 0)}va(e,s=>{Sa(r,s)})}function gh(r,e){const n=ao(ry(r,e)),s=uh(r.transactionQueueTree_,e);return L1(s,o=>{Fu(r,o)}),Fu(r,s),Q_(s,o=>{Fu(r,o)}),n}function Fu(r,e){const n=Fi(e);if(n){const s=[];let o=[],a=-1;for(let u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?(V(a===u-1,"All SENT items should be at beginning of queue."),a=u,n[u].status=3,n[u].abortReason="set"):(V(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),o=o.concat(er(r.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&s.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));a===-1?q_(e,void 0):n.length=a+1,Ut(r.eventQueue_,ao(e),o);for(let u=0;u<s.length;u++)Li(s[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(r){let e="";const n=r.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let o=n[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function cT(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const n of r.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):_t(`Invalid query segment '${n}' in query '${r}'`)}return e}const Lg=function(r,e){const n=uT(r),s=n.namespace;n.domain==="firebase.com"&&Tn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Tn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yI();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new a_(n.host,n.secure,s,o,e,"",s!==n.subdomain),path:new be(n.pathString)}},uT=function(r){let e="",n="",s="",o="",a="",u=!0,p="https",m=443;if(typeof r=="string"){let g=r.indexOf("//");g>=0&&(p=r.substring(0,g-1),r=r.substring(g+2));let y=r.indexOf("/");y===-1&&(y=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),e=r.substring(0,Math.min(y,_)),y<_&&(o=aT(r.substring(y,_)));const w=cT(r.substring(Math.min(r.length,_)));g=e.indexOf(":"),g>=0?(u=p==="https"||p==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const R=e.slice(0,g);if(R.toLowerCase()==="localhost")n="localhost";else if(R.split(".").length<=2)n=R;else{const b=e.indexOf(".");s=e.substring(0,b).toLowerCase(),n=e.substring(b+1),a=s}"ns"in w&&(a=w.ns)}return{host:e,port:m,domain:n,subdomain:s,secure:u,scheme:p,pathString:o,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dT=(function(){let r=0;const e=[];return function(n){const s=n===r;r=n;let o;const a=new Array(8);for(o=7;o>=0;o--)a[o]=Mg.charAt(n%64),n=Math.floor(n/64);V(n===0,"Cannot push at time == 0");let u=a.join("");if(s){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)u+=Mg.charAt(e[o]);return V(u.length===20,"nextPushId: Length should be 20."),u}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n,s,o){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+et(this.snapshot.exportVal())}}class fT{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return V(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,s,o){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=o}get key(){return Se(this._path)?null:Wd(this._path)}get ref(){return new Pn(this._repo,this._path)}get _queryIdentifier(){const e=Cg(this._queryParams),n=Ud(e);return n==="{}"?"default":n}get _queryObject(){return Cg(this._queryParams)}isEqual(e){if(e=wt(e),!(e instanceof vh))return!1;const n=this._repo===e._repo,s=Vd(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+nN(this._path)}}class Pn extends vh{constructor(e,n){super(e,n,new Kd,!1)}get parent(){const e=v_(this._path);return e===null?null:new Pn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Js{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new be(e),s=Xs(this.ref,e);return new Js(this._node.getChild(n),s,He)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>e(new Js(o,Xs(this.ref,s),He)))}hasChild(e){const n=new be(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Te(r,e){return r=wt(r),r._checkNotDeleted("ref"),e!==void 0?Xs(r._root,e):r._root}function Xs(r,e){return r=wt(r),ye(r._path)===null?V1("child","path",e):X_("child","path",e),new Pn(r._repo,Ve(r._path,e))}function _h(r,e){r=wt(r),hh("push",r._path),J_("push",e,r._path,!0);const n=ty(r._repo),s=dT(n),o=Xs(r,s),a=Xs(r,s);let u;return u=Promise.resolve(a),o.then=u.then.bind(u),o.catch=u.then.bind(u,void 0),o}function ra(r){return hh("remove",r._path),pT(r,null)}function pT(r,e){r=wt(r),hh("set",r._path),J_("set",e,r._path,!1);const n=new Zs;return eT(r._repo,r._path,e,null,n.wrapCallback(()=>{})),n.promise}function pt(r,e){W1("update",e,r._path);const n=new Zs;return tT(r._repo,r._path,e,n.wrapCallback(()=>{})),n.promise}function dn(r){r=wt(r);const e=new oy(()=>{}),n=new Ca(e);return Z1(r._repo,r,n).then(s=>new Js(s,new Pn(r._repo,r._path),r._queryParams.getIndex()))}class Ca{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new hT("value",this,new Js(e.snapshotNode,new Pn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new fT(this,e,n):null}matches(e){return e instanceof Ca?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function mT(r,e,n,s,o){const a=new oy(n,void 0),u=new Ca(a);return rT(r._repo,r,u),()=>iT(r._repo,r,u)}function ki(r,e,n,s){return mT(r,"value",e)}p1(Pn);y1(Pn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="FIREBASE_DATABASE_EMULATOR_HOST",pd={};let vT=!1;function _T(r,e,n,s){const o=e.lastIndexOf(":"),a=e.substring(0,o),u=bi(a);r.repoInfo_=new a_(e,u,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(r.authTokenProvider_=s)}function yT(r,e,n,s,o){let a=s||r.options.databaseURL;a===void 0&&(r.options.projectId||Tn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),at("Using default host for project ",r.options.projectId),a=`${r.options.projectId}-default-rtdb.firebaseio.com`);let u=Lg(a,o),p=u.repoInfo,m;typeof process<"u"&&ig&&(m=ig[gT]),m?(a=`http://${m}?ns=${p.namespace}`,u=Lg(a,o),p=u.repoInfo):u.repoInfo.secure;const g=new RI(r.name,r.options,e);H1("Invalid Firebase Database URL",u),Se(u.path)||Tn("Database URL must point to the root of a Firebase Database (not including a child path).");const y=ST(p,r,g,new PI(r,n));return new CT(y,r)}function wT(r,e){const n=pd[e];(!n||n[r.key]!==r)&&Tn(`Database ${e}(${r.repoInfo_}) has already been deleted.`),sT(r),delete n[r.key]}function ST(r,e,n,s){let o=pd[e.name];o||(o={},pd[e.name]=o);let a=o[r.toURLString()];return a&&Tn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Y1(r,vT,n,s),o[r.toURLString()]=a,a}class CT{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(J1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pn(this._repo,Ne())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Tn("Cannot call "+e+" on a deleted database.")}}function ET(r=mv(),e){const n=Nd(r,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=LS("database");s&&xT(n,...s)}return n}function xT(r,e,n,s={}){r=wt(r),r._checkNotDeleted("useEmulator");const o=`${e}:${n}`,a=r._repoInternal;if(r._instanceStarted){if(o===r._repoInternal.repoInfo_.host&&br(s,a.repoInfo_.emulatorOptions))return;Tn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(a.repoInfo_.nodeAdmin)s.mockUserToken&&Tn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Al(Al.OWNER);else if(s.mockUserToken){const p=typeof s.mockUserToken=="string"?s.mockUserToken:MS(s.mockUserToken,r.app.options.projectId);u=new Al(p)}bi(e)&&(av(e),cv("Database",!0)),_T(a,o,s,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(r){fI(Oi),Si(new Dr("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return yT(s,o,a,n)},"PUBLIC").setMultipleInstances(!0)),ir(sg,og,r),ir(sg,og,"esm2017")}xn.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};xn.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};IT();const NT={apiKey:"AIzaSyCrFLv4OkNYI86ll6U0Xjo5OegDaUzqFMA",authDomain:"stockduloft.firebaseapp.com",databaseURL:"https://stockduloft-default-rtdb.firebaseio.com",projectId:"stockduloft",storageBucket:"stockduloft.firebasestorage.app",messagingSenderId:"375022059708",appId:"1:375022059708:web:f059d080070233a5b590b9",measurementId:"G-C7CW1SSW2Z"},ly=pv(NT),ke=ET(ly),Uu=cI(ly),TT=new wn,ay=k.createContext(null);function kT({children:r}){const[e,n]=k.useState(null),[s,o]=k.useState(!0);k.useEffect(()=>JE(Uu,m=>{n(m),o(!1)}),[]);const a=async()=>{try{await _x(Uu,TT)}catch(p){throw console.error("Erreur de connexion:",p),p}},u=async()=>{try{await XE(Uu)}catch(p){console.error("Erreur de dconnexion:",p)}};return s?f.jsxs("div",{className:"loading-screen",children:[f.jsx("div",{className:"loading-spinner"}),f.jsx("p",{children:"Chargement..."})]}):f.jsx(ay.Provider,{value:{user:e,login:a,logout:u},children:r})}function Ea(){const r=k.useContext(ay);if(!r)throw new Error("useAuth doit tre utilis dans un AuthProvider");return r}const zu=600,$u=600,PT=.6,Nl=80,RT=.4;function cy(r){return new Promise((e,n)=>{const s=new FileReader;s.onload=o=>{const a=new Image;a.onload=()=>{const u=document.createElement("canvas");let{width:p,height:m}=a;p>m?p>zu&&(m=Math.round(m*zu/p),p=zu):m>$u&&(p=Math.round(p*$u/m),m=$u),u.width=p,u.height=m,u.getContext("2d").drawImage(a,0,0,p,m);const y=u.toDataURL("image/jpeg",PT);e(y)},a.onerror=()=>n(new Error("Impossible de charger l'image")),a.src=o.target.result},s.onerror=()=>n(new Error("Impossible de lire le fichier")),s.readAsDataURL(r)})}function AT(r){return new Promise((e,n)=>{const s=new FileReader;s.onload=o=>{const a=new Image;a.onload=()=>{const u=document.createElement("canvas");u.width=Nl,u.height=Nl;const p=u.getContext("2d"),m=Math.min(a.width,a.height),g=(a.width-m)/2,y=(a.height-m)/2;p.drawImage(a,g,y,m,m,0,0,Nl,Nl);const _=u.toDataURL("image/jpeg",RT);e(_)},a.onerror=()=>n(new Error("Impossible de charger l'image")),a.src=o.target.result},s.onerror=()=>n(new Error("Impossible de lire le fichier")),s.readAsDataURL(r)})}const en="stockduloft/items",Ui="stockduloft/photos",uo="stockduloft/stores",xa=4;async function bT(r){const e=Te(ke,`${Ui}/${r}`),n=await dn(e);return n.exists()&&n.val().photoBase64||null}async function Bu(r){const e=Te(ke,`${Ui}/${r}`),n=await dn(e);if(!n.exists())return[];const s=n.val(),o=[];s.photoBase64&&o.push(s.photoBase64);for(let a=1;a<=xa;a++)s[`photo_${a}`]&&o.push(s[`photo_${a}`]);return o}async function DT(r,e){const n=Te(ke,`${Ui}/${r}`),s=await dn(n),o=s.exists()?s.val():{};let a=null;for(let g=1;g<=xa;g++)if(!o[`photo_${g}`]){a=g;break}if(a===null)return null;const u=await cy(e);await pt(n,{[`photo_${a}`]:u});const p=uy(o)+1,m=Te(ke,`${en}/${r}`);return await pt(m,{photoCount:p,updatedAt:Date.now()}),a}async function OT(r,e){if(e<1||e>xa)return;const n=Te(ke,`${Ui}/${r}`);await pt(n,{[`photo_${e}`]:null});const s=await dn(n),o=s.exists()?s.val():{},a=uy(o),u=Te(ke,`${en}/${r}`);await pt(u,{photoCount:a,updatedAt:Date.now()})}function uy(r){let e=0;r.photoBase64&&e++;for(let n=1;n<=xa;n++)r[`photo_${n}`]&&e++;return e}function dy(r){const e=Te(ke,uo);return ki(e,s=>{const o=[];s.exists()&&s.forEach(a=>{o.push({id:a.key,...a.val()})}),o.sort((a,u)=>(a.name||"").localeCompare(u.name||"")),r(o)})}async function hy(r){const e=Te(ke,`${uo}/${r}`),n=await dn(e);return n.exists()?{id:r,...n.val()}:null}async function jT({name:r,commissionPercent:e,locationFee:n}){const s={name:r.trim(),commissionPercent:parseFloat(e)||0,locationFee:parseFloat(n)||0,active:!0,createdAt:Date.now()},o=Te(ke,uo),a=_h(o);return await pt(a,s),{id:a.key,...s}}async function LT(r,e){const n=Te(ke,`${uo}/${r}`);await pt(n,e)}async function MT(r){const e=Te(ke,`${uo}/${r}`);await ra(e)}async function FT({uniqueId:r,description:e,longDescription:n,price:s,photoFile:o,category:a,itemDate:u}){const p={uniqueId:r.toUpperCase().trim(),description:e.trim(),longDescription:(n==null?void 0:n.trim())||"",price:parseFloat(s),hasPhoto:!1,photoCount:0,category:a||"",status:"inventory",itemDate:u||new Date().toISOString().split("T")[0],consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,sellerName:"",createdAt:Date.now(),updatedAt:Date.now()},m=Te(ke,en),g=_h(m);if(await pt(g,p),o){const[y,_]=await Promise.all([cy(o),AT(o)]),w=Te(ke,`${Ui}/${g.key}`);await pt(w,{photoBase64:y}),await pt(g,{hasPhoto:!0,thumbnail:_,photoCount:1}),p.hasPhoto=!0,p.thumbnail=_,p.photoCount=1}return{id:g.key,...p}}async function UT(r,e){const n=Te(ke,`${en}/${r}`);await pt(n,{...e,updatedAt:Date.now()})}async function zT(r){const e=Te(ke,`${en}/${r}`),n=Te(ke,`${Ui}/${r}`);await ra(n),await ra(e)}async function fy(r){const e=Te(ke,en),n=await dn(e);if(!n.exists())return null;const s=r.toUpperCase().trim();let o=null;return n.forEach(a=>{const u=a.val();u.uniqueId===s&&(o={id:a.key,...u})}),o&&o.hasPhoto&&(o.photoBase64=await bT(o.id)),o}async function Fg(r="ADL"){const e=Te(ke,en),n=await dn(e);let s=0;n.exists()&&n.forEach(a=>{const m=(a.val().uniqueId||"").match(new RegExp(`^${r}-(\\d+)$`,"i"));if(m){const g=parseInt(m[1],10);g>s&&(s=g)}});const o=s+1;return`${r}-${String(o).padStart(3,"0")}`}async function $T(r,e,n=null,s=null,o="",a=!1,u=""){const p=Te(ke,`${en}/${r}`),m=await dn(p),g=m.exists()?m.val():{},y=a?0:s!==null?parseFloat(s):g.price,_={status:"sold",sellerName:e.trim(),saleDate:n||new Date().toISOString().split("T")[0],salePrice:y,marketName:o.trim(),isGift:a,giftNote:a?u.trim():"",updatedAt:Date.now()};if(g.status==="consignment"&&g.consignmentStoreId&&!a){const w=await hy(g.consignmentStoreId);if(w&&w.commissionPercent>0){const R=Math.round(y*w.commissionPercent)/100;_.commissionPercent=w.commissionPercent,_.commissionAmount=R,_.netRevenue=Math.round((y-R)*100)/100}else _.commissionPercent=0,_.commissionAmount=0,_.netRevenue=y}return await pt(p,_),_}async function BT(r,e,n=null,s=""){const o=Te(ke,`${en}/${r}`);await pt(o,{status:"consignment",consignmentStore:e.trim(),consignmentStoreId:s,consignmentDate:n||new Date().toISOString().split("T")[0],updatedAt:Date.now()})}async function WT(r){const e=Te(ke,`${en}/${r}`);await pt(e,{status:"inventory",consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,salePrice:null,marketName:"",sellerName:"",isGift:!1,giftNote:"",commissionPercent:null,commissionAmount:null,netRevenue:null,updatedAt:Date.now()})}function py(r){const e=Te(ke,en);return ki(e,s=>{const o=[];s.exists()&&s.forEach(a=>{o.push({id:a.key,...a.val()})}),o.sort((a,u)=>(u.createdAt||0)-(a.createdAt||0)),r(o)})}const Ug={all:"Tous",inventory:"En stock",consignment:"En consigne",sold:"Vendus"},VT={inventory:"#2ecc71",consignment:"#f39c12",sold:"#e74c3c"};function Ir(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function HT(){const[r,e]=k.useState([]),[n,s]=k.useState([]),[o,a]=k.useState("all"),[u,p]=k.useState(""),[m,g]=k.useState(null),[y,_]=k.useState(!0),[w,R]=k.useState({}),[b,j]=k.useState({}),[O,Q]=k.useState(null),[A,G]=k.useState({description:"",longDescription:"",price:"",category:""}),[H,Y]=k.useState(!1),[ee,te]=k.useState(null),[fe,Ce]=k.useState(""),[Pe,Ye]=k.useState(""),Ge=k.useRef(null);k.useEffect(()=>py(se=>{e(se),_(!1)}),[]),k.useEffect(()=>dy(s),[]);const L=async I=>{if(m===I.id){g(null);return}if(g(I.id),j(se=>({...se,[I.id]:0})),!w[I.id]&&(I.hasPhoto||I.photoBase64)){const se=await Bu(I.id);se.length===0&&I.photoBase64?R(ce=>({...ce,[I.id]:[I.photoBase64]})):R(ce=>({...ce,[I.id]:se}))}},D=async(I,se)=>{var ge;const ce=(ge=se.target.files)==null?void 0:ge[0];if(ce){Y(!0);try{if(await DT(I.id,ce)===null)alert("Maximum de 5 photos atteint pour cet article.");else{const Fe=await Bu(I.id);R(tn=>({...tn,[I.id]:Fe}))}}catch(oe){console.error("Erreur ajout photo:",oe),alert("Erreur lors de l'ajout de la photo.")}finally{Y(!1),Ge.current&&(Ge.current.value="")}}},re=async(I,se)=>{if(se===0){alert("La photo principale ne peut pas tre supprime ici.");return}if(confirm("Supprimer cette photo?"))try{await OT(I.id,se);const ce=await Bu(I.id);R(ge=>({...ge,[I.id]:ce})),j(ge=>({...ge,[I.id]:0}))}catch(ce){console.error("Erreur suppression photo:",ce)}},pe=r.filter(I=>{var ge,oe;const se=o==="all"||I.status===o,ce=u===""||((ge=I.uniqueId)==null?void 0:ge.toLowerCase().includes(u.toLowerCase()))||((oe=I.description)==null?void 0:oe.toLowerCase().includes(u.toLowerCase()));return se&&ce}),X={all:r.length,inventory:r.filter(I=>I.status==="inventory").length,consignment:r.filter(I=>I.status==="consignment").length,sold:r.filter(I=>I.status==="sold").length},$=I=>{var se;Q(I.id),G({description:I.description||"",longDescription:I.longDescription||"",price:((se=I.price)==null?void 0:se.toString())||"",category:I.category||""})},B=async I=>{await UT(I.id,{description:A.description.trim(),longDescription:A.longDescription.trim(),price:parseFloat(A.price)||0,category:A.category.trim()}),Q(null)},q=()=>{Q(null)},x=async I=>{confirm(`Remettre "${I.uniqueId}" en inventaire?`)&&(await WT(I.id),g(null))},M=async I=>{confirm(`Supprimer dfinitivement "${I.uniqueId}"?`)&&(await zT(I.id),g(null),R(se=>{const ce={...se};return delete ce[I.id],ce}))},me=I=>{te(I.id),Ce(""),Ye("")},ve=async I=>{let se=Pe.trim(),ce=fe;if(fe&&fe!=="other"){const ge=n.find(oe=>oe.id===fe);ge&&(se=ge.name)}if(!se){alert("Entrez le nom du magasin");return}await BT(I.id,se,null,ce==="other"?"":ce),te(null),g(null)},Ee=()=>{te(null)};return y?f.jsxs("div",{className:"page-loading",children:[f.jsx("div",{className:"loading-spinner"}),f.jsx("p",{children:"Chargement de l'inventaire..."})]}):f.jsxs("div",{className:"page inventory-page",children:[f.jsxs("div",{className:"search-bar",children:[f.jsx("input",{type:"text",placeholder:" Rechercher par # ou description...",value:u,onChange:I=>p(I.target.value),className:"search-input"}),u&&f.jsx("button",{className:"search-clear",onClick:()=>p(""),children:""})]}),f.jsx("div",{className:"status-filters",children:Object.entries(Ug).map(([I,se])=>f.jsxs("button",{className:`filter-btn ${o===I?"active":""}`,onClick:()=>a(I),children:[se,f.jsx("span",{className:"filter-count",children:X[I]})]},I))}),pe.length===0?f.jsxs("div",{className:"empty-state",children:[f.jsx("p",{className:"empty-icon",children:""}),f.jsx("p",{children:u?"Aucun rsultat trouv":"Aucun item dans cette catgorie"})]}):f.jsx("div",{className:"items-list",children:pe.map(I=>{var se,ce,ge;return f.jsxs("div",{className:`item-card ${m===I.id?"expanded":""}`,onClick:()=>L(I),children:[f.jsxs("div",{className:"item-row",children:[f.jsxs("div",{className:"item-photo",children:[I.thumbnail?f.jsx("img",{src:I.thumbnail,alt:I.description,className:"item-thumbnail"}):I.hasPhoto||I.photoBase64?f.jsx("div",{className:"photo-placeholder",children:""}):f.jsx("div",{className:"photo-placeholder",children:""}),I.photoCount>1&&f.jsx("span",{className:"photo-count-badge",children:I.photoCount})]}),f.jsxs("div",{className:"item-info",children:[f.jsxs("div",{className:"item-id-row",children:[f.jsxs("span",{className:"item-unique-id",children:["#",I.uniqueId]}),f.jsx("span",{className:"item-status-badge",style:{backgroundColor:VT[I.status]},children:Ug[I.status]})]}),f.jsx("p",{className:"item-description",children:I.description}),f.jsxs("div",{className:"item-meta",children:[f.jsxs("span",{className:"item-price",children:[Ir(I.price)," $"]}),I.itemDate&&f.jsxs("span",{className:"item-date",children:[" ",I.itemDate]}),I.status==="consignment"&&f.jsxs("span",{className:"item-consignment",children:[" ",I.consignmentStore," ",I.consignmentDate&&`(${I.consignmentDate})`]}),I.status==="sold"&&f.jsxs("span",{className:"item-sold-info",children:[I.isGift?f.jsxs(f.Fragment,{children:[" Cadeau",I.giftNote?`  ${I.giftNote}`:"","  "]}):I.salePrice&&I.salePrice!==I.price?f.jsxs(f.Fragment,{children:[f.jsxs("s",{children:[Ir(I.price)," $"]}),"  ",Ir(I.salePrice)," $  "]}):"",I.saleDate,"  ",I.sellerName,I.marketName?`   ${I.marketName}`:"",I.commissionAmount>0&&f.jsxs(f.Fragment,{children:["   Net: ",Ir(I.netRevenue)," $"]})]})]})]})]}),m===I.id&&f.jsxs("div",{onClick:oe=>oe.stopPropagation(),children:[w[I.id]&&w[I.id].length>0&&f.jsxs("div",{className:"photo-gallery",children:[f.jsx("div",{className:"gallery-main",children:f.jsx("img",{src:w[I.id][b[I.id]||0],alt:I.description})}),w[I.id].length>1&&f.jsx("div",{className:"gallery-thumbs",children:w[I.id].map((oe,Fe)=>f.jsxs("div",{className:`gallery-thumb ${(b[I.id]||0)===Fe?"active":""}`,onClick:()=>j(tn=>({...tn,[I.id]:Fe})),children:[f.jsx("img",{src:oe,alt:`Photo ${Fe+1}`}),Fe>0&&O===I.id&&f.jsx("button",{className:"gallery-thumb-delete",onClick:tn=>{tn.stopPropagation(),re(I,Fe)},children:""})]},Fe))})]}),I.hasPhoto&&!w[I.id]&&f.jsx("div",{className:"item-expanded-photo loading",children:f.jsx("div",{className:"loading-spinner"})}),I.longDescription&&O!==I.id&&f.jsx("div",{className:"item-long-description",children:f.jsx("p",{children:I.longDescription})}),I.status==="sold"&&I.commissionAmount>0&&f.jsxs("div",{className:"item-commission-info",children:[f.jsxs("div",{className:"commission-row",children:[f.jsx("span",{children:"Prix de vente"}),f.jsxs("span",{children:[Ir(I.salePrice)," $"]})]}),f.jsxs("div",{className:"commission-row commission-negative",children:[f.jsxs("span",{children:["Commission ",I.consignmentStore," (",I.commissionPercent,"%)"]}),f.jsxs("span",{children:["-",Ir(I.commissionAmount)," $"]})]}),f.jsxs("div",{className:"commission-row commission-total",children:[f.jsx("span",{children:"Revenu net"}),f.jsxs("span",{children:[Ir(I.netRevenue)," $"]})]})]}),f.jsx("div",{className:"item-actions",children:ee===I.id?f.jsxs("div",{className:"item-edit-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Magasin de consigne"}),n.length>0?f.jsxs("select",{value:fe,onChange:oe=>{if(Ce(oe.target.value),oe.target.value!=="other"){const Fe=n.find(tn=>tn.id===oe.target.value);Fe&&Ye(Fe.name)}},className:"form-input",children:[f.jsx("option",{value:"",children:" Choisir un magasin "}),n.map(oe=>f.jsxs("option",{value:oe.id,children:[oe.name,oe.commissionPercent>0?` (${oe.commissionPercent}%)`:"",oe.locationFee>0?` + ${oe.locationFee}$/mois`:""]},oe.id)),f.jsx("option",{value:"other",children:" Autre magasin..."})]}):f.jsx("input",{type:"text",value:Pe,onChange:oe=>Ye(oe.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),fe==="other"&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Nom du magasin"}),f.jsx("input",{type:"text",value:Pe,onChange:oe=>Ye(oe.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),f.jsxs("div",{className:"item-edit-actions",children:[f.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>ve(I),disabled:!fe&&!Pe.trim(),children:" Confirmer consigne"}),f.jsx("button",{className:"btn btn-small btn-secondary",onClick:Ee,children:"Annuler"})]})]}):O===I.id?f.jsxs("div",{className:"item-edit-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Titre"}),f.jsx("input",{type:"text",value:A.description,onChange:oe=>G(Fe=>({...Fe,description:oe.target.value})),className:"form-input"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Description dtaille"}),f.jsx("textarea",{value:A.longDescription,onChange:oe=>G(Fe=>({...Fe,longDescription:oe.target.value})),className:"form-input form-textarea",rows:"4",placeholder:"Dcrivez l'article en dtail..."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Prix ($)"}),f.jsx("input",{type:"number",value:A.price,onChange:oe=>G(Fe=>({...Fe,price:oe.target.value})),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Catgorie"}),f.jsx("input",{type:"text",value:A.category,onChange:oe=>G(Fe=>({...Fe,category:oe.target.value})),className:"form-input"})]}),f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{className:"form-label",children:[" Photos (",((se=w[I.id])==null?void 0:se.length)||(I.hasPhoto?1:0),"/5)"]}),(((ce=w[I.id])==null?void 0:ce.length)||0)<5&&f.jsxs(f.Fragment,{children:[f.jsx("input",{ref:Ge,type:"file",accept:"image/*",capture:"environment",onChange:oe=>D(I,oe),className:"hidden-input"}),f.jsx("button",{type:"button",className:"btn btn-small btn-add-photo",onClick:()=>{var oe;return(oe=Ge.current)==null?void 0:oe.click()},disabled:H,children:H?" Ajout en cours...":" Ajouter une photo"})]}),(((ge=w[I.id])==null?void 0:ge.length)||0)>=5&&f.jsx("p",{className:"form-hint",children:"Maximum de 5 photos atteint"})]}),f.jsxs("div",{className:"item-edit-actions",children:[f.jsx("button",{className:"btn btn-small btn-save",onClick:()=>B(I),children:" Sauvegarder"}),f.jsx("button",{className:"btn btn-small btn-secondary",onClick:q,children:"Annuler"})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>$(I),children:" Modifier"}),I.status==="inventory"&&f.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>me(I),children:" Consigne"}),(I.status==="consignment"||I.status==="sold")&&f.jsx("button",{className:"btn btn-small btn-return",onClick:()=>x(I),children:" Retour inventaire"}),f.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>M(I),children:" Supprimer"})]})})]})]},I.id)})})]})}const GT="https://us-central1-stockduloft.cloudfunctions.net/analyzePhoto";async function qT(r,e=[],n=""){try{const s=await fetch(GT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:r,categories:e,userHint:n})});if(!s.ok)throw new Error(`Erreur serveur: ${s.status}`);const o=await s.json();if(o.success)return{category:o.category,title:o.title,description:o.description};throw new Error(o.error||"Erreur inconnue")}catch(s){throw console.error("Erreur AI:",s),s}}function KT({imageBase64:r,categories:e,onSuggestion:n}){const[s,o]=k.useState(!1),[a,u]=k.useState(null),[p,m]=k.useState(""),g=async()=>{if(!r){u("Prenez une photo d'abord");return}o(!0),u(null);try{const y=await qT(r,e,p);n(y)}catch(y){u("Impossible d'analyser la photo. Ressayez."),console.error(y)}finally{o(!1)}};return f.jsxs("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[f.jsx("input",{type:"text",value:p,onChange:y=>m(y.target.value),placeholder:"C'est quoi? Ex: butoir de porte, sac  lunch, coussin...",style:{width:"100%",padding:"10px 12px",fontSize:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",marginBottom:"8px",boxSizing:"border-box"}}),f.jsx("button",{type:"button",onClick:g,disabled:s||!r,style:{padding:"10px 20px",backgroundColor:s?"#ccc":"#7c3aed",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:s?"wait":"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:s?f.jsxs(f.Fragment,{children:[f.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid white",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Analyse en cours..."]}):f.jsx(f.Fragment,{children:" Suggestion AI"})}),a&&f.jsx("p",{style:{color:"red",fontSize:"14px",marginTop:"5px"},children:a}),f.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function QT(){const r=wd(),e=k.useRef(null),[n,s]=k.useState({uniqueId:"",description:"",longDescription:"",price:"",category:"",itemDate:new Date().toISOString().split("T")[0]}),[o,a]=k.useState(null),[u,p]=k.useState(null),[m,g]=k.useState(!1),[y,_]=k.useState(""),[w,R]=k.useState("");k.useEffect(()=>{Fg("ADL").then(Y=>{s(ee=>({...ee,uniqueId:Y})),R(Y)})},[]);const b=Y=>{const{name:ee,value:te}=Y.target;s(fe=>({...fe,[ee]:te})),ee==="uniqueId"&&_("")},j=Y=>{var fe;const ee=(fe=Y.target.files)==null?void 0:fe[0];if(!ee)return;a(ee);const te=new FileReader;te.onload=Ce=>p(Ce.target.result),te.readAsDataURL(ee)},O=()=>{var Y;(Y=e.current)==null||Y.click()},Q=()=>{a(null),p(null),e.current&&(e.current.value="")},A=()=>{s(Y=>({...Y,uniqueId:w})),_("")},G=Y=>{s(ee=>({...ee,...Y.category?{category:Y.category}:{},...Y.title?{description:Y.title}:{},...Y.description?{longDescription:Y.description}:{}}))},H=async Y=>{if(Y.preventDefault(),_(""),!n.uniqueId.trim()){_("Le numro unique est requis");return}if(!n.price||parseFloat(n.price)<=0){_("Le prix doit tre suprieur  0");return}if(await fy(n.uniqueId)){const te=await Fg("ADL");R(te),_(`Le numro "${n.uniqueId.toUpperCase()}" existe dj !`);return}g(!0);try{await FT({uniqueId:n.uniqueId,description:n.description,longDescription:n.longDescription,price:n.price,category:n.category,itemDate:n.itemDate,photoFile:o}),r("/")}catch(te){console.error("Erreur:",te),_("Erreur lors de la sauvegarde. Ressayez.")}finally{g(!1)}};return f.jsxs("div",{className:"page add-item-page",children:[f.jsx("h2",{className:"page-title",children:"Nouvel item"}),f.jsxs("form",{onSubmit:H,className:"add-form",children:[f.jsxs("div",{className:"photo-section",children:[f.jsx("input",{ref:e,type:"file",accept:"image/*",capture:"environment",onChange:j,className:"hidden-input"}),u?f.jsxs("div",{className:"photo-preview-container",children:[f.jsx("img",{src:u,alt:"Aperu",className:"photo-preview"}),f.jsx("button",{type:"button",className:"photo-remove",onClick:Q,children:""})]}):f.jsxs("button",{type:"button",className:"photo-capture-btn",onClick:O,children:[f.jsx("span",{className:"capture-icon",children:""}),f.jsx("span",{children:"Prendre une photo"})]}),f.jsx("p",{className:"photo-hint",children:" Photo principale  vous pourrez ajouter d'autres photos en modifiant l'article"})]}),u&&f.jsx(KT,{imageBase64:u,onSuggestion:G}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Numro unique *"}),f.jsx("input",{type:"text",name:"uniqueId",value:n.uniqueId,onChange:b,placeholder:"Ex: ADL-001",className:"form-input",autoComplete:"off",style:{textTransform:"uppercase"}})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Titre / Description courte"}),f.jsx("input",{type:"text",name:"description",value:n.description,onChange:b,placeholder:"Ex: Sac  main fleuri",className:"form-input"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Description dtaille"}),f.jsx("textarea",{name:"longDescription",value:n.longDescription,onChange:b,placeholder:"Dcrivez l'article en dtail : matriaux, dimensions, couleurs, entretien...",className:"form-input form-textarea",rows:"4"}),f.jsx("p",{className:"form-hint",children:"Affich dans la vitrine publique"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Prix ($) *"}),f.jsx("input",{type:"number",name:"price",value:n.price,onChange:b,placeholder:"0.00",className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Catgorie"}),f.jsx("input",{type:"text",name:"category",value:n.category,onChange:b,placeholder:"Ex: Sacs, Vtements, Accessoires...",className:"form-input"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Date de cration"}),f.jsx("input",{type:"date",name:"itemDate",value:n.itemDate,onChange:b,className:"form-input"})]}),y&&f.jsxs("div",{className:"error-block",children:[f.jsx("p",{className:"error-text",children:y}),w&&y.includes("existe dj")&&f.jsxs("button",{type:"button",className:"btn btn-small btn-suggest",onClick:A,children:["Utiliser ",w]})]}),f.jsxs("div",{className:"form-actions",children:[f.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:m,children:m?"Sauvegarde en cours...":" Ajouter  l'inventaire"}),f.jsx("button",{type:"button",className:"btn btn-secondary btn-full",onClick:()=>r("/"),children:"Annuler"})]})]})]})}function qt(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function YT(){var pe;const{user:r}=Ea(),[e,n]=k.useState("ADL-"),[s,o]=k.useState(null),[a,u]=k.useState(null),[p,m]=k.useState(((pe=r==null?void 0:r.displayName)==null?void 0:pe.split(" ")[0])||""),[g,y]=k.useState(new Date().toISOString().split("T")[0]),[_,w]=k.useState(""),[R,b]=k.useState(()=>localStorage.getItem("sdl_marketName")||""),[j,O]=k.useState(!1),[Q,A]=k.useState(!1),[G,H]=k.useState(""),[Y,ee]=k.useState(""),[te,fe]=k.useState(!1),[Ce,Pe]=k.useState(""),Ye=async X=>{var $;if(X==null||X.preventDefault(),!!e.trim()){O(!0),H(""),ee(""),o(null),u(null);try{const B=await fy(e);if(!B){H(`Aucun item trouv avec le numro "${e.toUpperCase()}"`);return}if(B.status==="sold"){H(`Cet item est dj vendu (${B.saleDate} par ${B.sellerName})`);return}if(o(B),w((($=B.price)==null?void 0:$.toFixed(2))||""),B.status==="consignment"&&B.consignmentStoreId){const q=await hy(B.consignmentStoreId);u(q)}}catch(B){console.error(B),H("Erreur de recherche. Ressayez.")}finally{O(!1)}}},L=(()=>{if(!a||!a.commissionPercent||te)return null;const X=parseFloat(_)||0,$=Math.round(X*a.commissionPercent)/100,B=Math.round((X-$)*100)/100;return{commissionAmount:$,netRevenue:B,percent:a.commissionPercent}})(),D=async()=>{if(!(!s||!p.trim())){A(!0),H("");try{const X=te?0:parseFloat(_)||s.price,$=await $T(s.id,p,g,X,R,te,Ce);let B;te?B=` ${s.uniqueId} donn en cadeau${Ce?`  ${Ce}`:""}`:$.commissionAmount>0?B=` ${s.uniqueId} vendu pour ${qt(X)} $
 Commission ${s.consignmentStore}: -${qt($.commissionAmount)} $
 Revenu net: ${qt($.netRevenue)} $`:B=` ${s.uniqueId} vendu pour ${qt(X)} $${R?` au ${R}`:""}`,ee(B),o(null),u(null),n("ADL-"),w(""),fe(!1),Pe("")}catch(X){console.error(X),H("Erreur lors de la vente. Ressayez.")}finally{A(!1)}}},re=()=>{n("ADL-"),o(null),u(null),w(""),H(""),ee(""),fe(!1),Pe("")};return f.jsxs("div",{className:"page sale-page",children:[f.jsx("h2",{className:"page-title",children:" Vente rapide"}),f.jsx("form",{onSubmit:Ye,className:"sale-search-form",children:f.jsxs("div",{className:"sale-search-row",children:[f.jsx("input",{type:"text",value:e,onChange:X=>n(X.target.value.toUpperCase()),placeholder:"Ex: ADL-001",className:"form-input sale-search-input",autoComplete:"off",autoFocus:!0}),f.jsx("button",{type:"submit",className:"btn btn-primary sale-search-btn",disabled:j||!e.trim(),children:j?"...":""})]})}),Y&&f.jsxs("div",{className:"sale-success",children:[f.jsx("p",{style:{whiteSpace:"pre-line"},children:Y}),f.jsx("button",{className:"btn btn-primary btn-full",onClick:re,children:"Prochaine vente"})]}),G&&f.jsxs("div",{className:"sale-error",children:[f.jsx("p",{children:G}),f.jsx("button",{className:"btn btn-secondary",onClick:re,children:"Ressayer"})]}),s&&f.jsxs("div",{className:"sale-confirmation",children:[f.jsxs("div",{className:"sale-item-card",children:[s.photoBase64?f.jsx("img",{src:s.photoBase64,alt:s.description,className:"sale-item-photo"}):f.jsx("div",{className:"sale-photo-placeholder",children:""}),f.jsxs("div",{className:"sale-item-details",children:[f.jsxs("span",{className:"sale-item-id",children:["#",s.uniqueId]}),f.jsx("p",{className:"sale-item-desc",children:s.description}),f.jsxs("p",{className:"sale-item-price",children:[qt(s.price)," $"]}),s.status==="consignment"&&f.jsxs("p",{className:"sale-item-consign",children:[" En consigne: ",s.consignmentStore,a&&a.commissionPercent>0&&f.jsxs("span",{className:"sale-commission-badge",children:[a.commissionPercent,"% commission"]})]})]})]}),f.jsxs("div",{className:"sale-form",children:[f.jsx("div",{className:"form-group",children:f.jsxs("label",{className:"gift-toggle",children:[f.jsx("input",{type:"checkbox",checked:te,onChange:X=>{var $;fe(X.target.checked),X.target.checked?w("0"):w((($=s.price)==null?void 0:$.toFixed(2))||"")}}),f.jsx("span",{children:" Donn en cadeau"})]})}),te&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Note"}),f.jsx("input",{type:"text",value:Ce,onChange:X=>Pe(X.target.value),className:"form-input",placeholder:"Ex: Cadeau pour maman, change, etc."})]}),!te&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Prix de vente ($)"}),f.jsxs("div",{className:"sale-price-row",children:[f.jsx("input",{type:"number",value:_,onChange:X=>w(X.target.value),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"}),parseFloat(_)<s.price&&f.jsxs("span",{className:"sale-discount",children:["Rabais de ",qt(s.price-parseFloat(_))," $"]})]})]}),L&&f.jsxs("div",{className:"sale-commission-preview",children:[f.jsxs("div",{className:"commission-row",children:[f.jsx("span",{children:"Prix de vente"}),f.jsxs("span",{children:[qt(parseFloat(_))," $"]})]}),f.jsxs("div",{className:"commission-row commission-negative",children:[f.jsxs("span",{children:["Commission ",s.consignmentStore," (",L.percent,"%)"]}),f.jsxs("span",{children:["-",qt(L.commissionAmount)," $"]})]}),f.jsxs("div",{className:"commission-row commission-total",children:[f.jsx("span",{children:"Revenu net pour Jose"}),f.jsxs("span",{children:[qt(L.netRevenue)," $"]})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Vendeuse"}),f.jsx("input",{type:"text",value:p,onChange:X=>m(X.target.value),className:"form-input",placeholder:"Nom de la vendeuse"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"March / Point de vente"}),f.jsx("input",{type:"text",value:R,onChange:X=>{b(X.target.value),localStorage.setItem("sdl_marketName",X.target.value)},className:"form-input",placeholder:"Ex: March Jean-Talon, Facebook, etc."})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Date de vente"}),f.jsx("input",{type:"date",value:g,onChange:X=>y(X.target.value),className:"form-input"})]}),f.jsxs("div",{className:"sale-actions",children:[f.jsx("button",{className:"btn btn-sell btn-full",onClick:D,disabled:Q||!p.trim(),children:Q?"En cours...":te?" Confirmer le cadeau":L?`Confirmer  Net: ${qt(L.netRevenue)} $`:`Confirmer la vente  ${qt(parseFloat(_||0))} $`}),f.jsx("button",{className:"btn btn-secondary btn-full",onClick:re,children:"Annuler"})]})]})]}),!s&&!G&&!Y&&f.jsxs("div",{className:"sale-hint",children:[f.jsx("p",{className:"hint-icon",children:""}),f.jsxs("p",{children:["Entre le numro de l'tiquette",f.jsx("br",{}),"pour enregistrer une vente"]})]})]})}const zg="stockduloft/settings";function As(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}const JT={free:{name:"Dcouverte",badge:"",articlesLimit:25,vitrineLimit:10,price:null},artisan:{name:"Artisan",badge:"",articlesLimit:1/0,vitrineLimit:1/0,price:{monthly:12.99,yearly:100}}};function XT(){const[r,e]=k.useState(7),[n,s]=k.useState([]),[o,a]=k.useState([]),[u,p]=k.useState(!1),[m,g]=k.useState(null),[y,_]=k.useState({name:"",commissionPercent:"",locationFee:""}),[w,R]=k.useState(null),[b,j]=k.useState(()=>{const D=new Date;return`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}`});k.useEffect(()=>{const D=Te(ke,zg);return ki(D,pe=>{if(pe.exists()){const X=pe.val();X.vitrineSoldDays!==void 0&&e(X.vitrineSoldDays),X.subscription?R(X.subscription):R({plan:"free",planType:null,startDate:null,expiryDate:null})}})},[]),k.useEffect(()=>dy(s),[]),k.useEffect(()=>py(a),[]);const O=async D=>{const re=parseInt(D);e(re),await pt(Te(ke,zg),{vitrineSoldDays:re})},Q=JT[(w==null?void 0:w.plan)||"free"],A=o.filter(D=>D.status!=="sold").length,G=Q.articlesLimit===1/0?0:Math.min(100,Math.round(A/Q.articlesLimit*100)),H=((w==null?void 0:w.plan)||"free")==="free",Y=D=>D?new Date(D).toLocaleDateString("fr-CA",{year:"numeric",month:"long",day:"numeric"}):"",ee=()=>{if(!(w!=null&&w.expiryDate))return null;const D=new Date,re=new Date(w.expiryDate);return Math.ceil((re-D)/(1e3*60*60*24))},te=async()=>{y.name.trim()&&(await jT(y),_({name:"",commissionPercent:"",locationFee:""}),p(!1))},fe=D=>{var re,pe;g(D.id),_({name:D.name,commissionPercent:((re=D.commissionPercent)==null?void 0:re.toString())||"",locationFee:((pe=D.locationFee)==null?void 0:pe.toString())||""})},Ce=async D=>{await LT(D,{name:y.name.trim(),commissionPercent:parseFloat(y.commissionPercent)||0,locationFee:parseFloat(y.locationFee)||0}),g(null),_({name:"",commissionPercent:"",locationFee:""})},Pe=async D=>{const re=o.filter(pe=>pe.status==="consignment"&&pe.consignmentStoreId===D.id);if(re.length>0){alert(`Impossible de supprimer : ${re.length} article(s) en consigne chez ${D.name}`);return}confirm(`Supprimer le magasin "${D.name}" ?`)&&await MT(D.id)},Ge=(()=>{const[D,re]=b.split("-").map(Number),pe=`${D}-${String(re).padStart(2,"0")}-01`,X=re===12?`${D+1}-01-01`:`${D}-${String(re+1).padStart(2,"0")}-01`,$={};return n.forEach(B=>{$[B.id]={storeName:B.name,commissionPercent:B.commissionPercent,locationFee:B.locationFee,totalSales:0,totalCommission:0,totalNet:0,itemsSold:0,itemsInConsignment:0}}),o.forEach(B=>{if(B.status==="consignment"&&B.consignmentStoreId&&$[B.consignmentStoreId]&&$[B.consignmentStoreId].itemsInConsignment++,B.status==="sold"&&B.saleDate&&B.saleDate>=pe&&B.saleDate<X&&B.consignmentStoreId&&$[B.consignmentStoreId]){const q=$[B.consignmentStoreId];q.itemsSold++,q.totalSales+=B.salePrice||0,q.totalCommission+=B.commissionAmount||0,q.totalNet+=B.netRevenue||B.salePrice||0}}),Object.values($)})(),L=Ge.some(D=>D.itemsSold>0||D.itemsInConsignment>0);return f.jsxs("div",{className:"page about-page",children:[f.jsx("h2",{className:"page-title",children:"  propos"}),f.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[f.jsx("h4",{children:" Mon abonnement"}),f.jsxs("div",{className:"subscription-section",children:[f.jsx("div",{className:"subscription-plan-row",children:f.jsxs("div",{className:"subscription-plan-info",children:[f.jsxs("span",{className:"subscription-plan-badge",children:[Q.badge," ",Q.name]}),!H&&(w==null?void 0:w.planType)&&f.jsx("span",{className:"subscription-plan-type",children:w.planType==="yearly"?"100.00 $/an":"12.99 $/mois"})]})}),f.jsxs("div",{className:"subscription-articles",children:[f.jsxs("div",{className:"subscription-articles-label",children:[f.jsx("span",{children:" Articles actifs"}),f.jsxs("span",{children:[A,H?` / ${Q.articlesLimit}`:"  Illimit"]})]}),H&&f.jsx("div",{className:"subscription-progress-bar",children:f.jsx("div",{className:`subscription-progress-fill ${G>=80?"warning":""} ${G>=100?"full":""}`,style:{width:`${G}%`}})})]}),f.jsxs("div",{className:"subscription-detail-row",children:[f.jsx("span",{children:" Vitrine publique"}),f.jsx("span",{children:H?`${Q.vitrineLimit} articles max`:"Illimite"})]}),f.jsxs("div",{className:"subscription-detail-row",children:[f.jsx("span",{children:" Suivi consignes"}),f.jsx("span",{children:H?"":""})]}),f.jsxs("div",{className:"subscription-detail-row",children:[f.jsx("span",{children:" tiquettes QR"}),f.jsx("span",{children:H?"":""})]}),!H&&(w==null?void 0:w.expiryDate)&&f.jsxs("div",{className:"subscription-renewal",children:[f.jsx("span",{children:" Renouvellement"}),f.jsxs("span",{className:ee()<=7?"renewal-soon":"",children:[Y(w.expiryDate),ee()<=7&&ee()>0&&f.jsxs("span",{className:"renewal-badge",children:["Dans ",ee()," jour(s)"]})]})]}),H?f.jsxs("div",{className:"subscription-upgrade",children:[f.jsx("p",{className:"subscription-upgrade-pitch",children:"Passez au plan Artisan pour des articles illimits, la vitrine complte, le suivi des consignes et plus encore."}),f.jsxs("div",{className:"subscription-upgrade-options",children:[f.jsx("button",{className:"btn btn-upgrade btn-full",children:" Plan Artisan  12.99 $/mois"}),f.jsxs("button",{className:"btn btn-upgrade-yearly btn-full",children:[" Plan Annuel  100 $/an",f.jsx("span",{className:"upgrade-savings",children:"conomisez 56 $ !"})]})]})]}):f.jsx("div",{className:"subscription-manage",children:f.jsx("button",{className:"btn btn-small btn-secondary btn-full",children:"Grer mon abonnement"})})]})]}),f.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[f.jsx("h4",{children:" Magasins de consigne"}),n.length===0?f.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",margin:"12px 0"},children:"Aucun magasin configur"}):f.jsx("div",{className:"stores-list",children:n.map(D=>f.jsx("div",{className:"store-card",children:m===D.id?f.jsxs("div",{className:"store-edit-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Nom"}),f.jsx("input",{type:"text",value:y.name,onChange:re=>_(pe=>({...pe,name:re.target.value})),className:"form-input"})]}),f.jsxs("div",{className:"store-form-row",children:[f.jsxs("div",{className:"form-group",style:{flex:1},children:[f.jsx("label",{className:"form-label",children:"Commission (%)"}),f.jsx("input",{type:"number",value:y.commissionPercent,onChange:re=>_(pe=>({...pe,commissionPercent:re.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"0"})]}),f.jsxs("div",{className:"form-group",style:{flex:1},children:[f.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),f.jsx("input",{type:"number",value:y.locationFee,onChange:re=>_(pe=>({...pe,locationFee:re.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"0"})]})]}),f.jsxs("div",{className:"store-edit-actions",children:[f.jsx("button",{className:"btn btn-small btn-save",onClick:()=>Ce(D.id),children:" Sauvegarder"}),f.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>g(null),children:"Annuler"})]})]}):f.jsxs("div",{className:"store-info",children:[f.jsxs("div",{className:"store-header",children:[f.jsx("span",{className:"store-name",children:D.name}),f.jsxs("div",{className:"store-actions-btns",children:[f.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>fe(D),children:""}),f.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>Pe(D),children:""})]})]}),f.jsxs("div",{className:"store-details",children:[D.commissionPercent>0&&f.jsxs("span",{className:"store-tag store-tag-commission",children:[D.commissionPercent,"% commission"]}),D.locationFee>0&&f.jsxs("span",{className:"store-tag store-tag-location",children:[As(D.locationFee)," $/mois loyer"]}),!D.commissionPercent&&!D.locationFee&&f.jsx("span",{className:"store-tag",children:"Aucun frais configur"})]}),o.filter(re=>re.status==="consignment"&&re.consignmentStoreId===D.id).length>0&&f.jsxs("p",{className:"store-consigned-count",children:[" ",o.filter(re=>re.status==="consignment"&&re.consignmentStoreId===D.id).length," article(s) en consigne"]})]})},D.id))}),u?f.jsxs("div",{className:"store-add-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Nom du magasin"}),f.jsx("input",{type:"text",value:y.name,onChange:D=>_(re=>({...re,name:D.target.value})),className:"form-input",placeholder:"Ex: SF Studios",autoFocus:!0})]}),f.jsxs("div",{className:"store-form-row",children:[f.jsxs("div",{className:"form-group",style:{flex:1},children:[f.jsx("label",{className:"form-label",children:"Commission (%)"}),f.jsx("input",{type:"number",value:y.commissionPercent,onChange:D=>_(re=>({...re,commissionPercent:D.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"Ex: 30"})]}),f.jsxs("div",{className:"form-group",style:{flex:1},children:[f.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),f.jsx("input",{type:"number",value:y.locationFee,onChange:D=>_(re=>({...re,locationFee:D.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"Ex: 50"})]})]}),f.jsxs("div",{className:"store-edit-actions",children:[f.jsx("button",{className:"btn btn-small btn-save",onClick:te,disabled:!y.name.trim(),children:" Ajouter"}),f.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>{p(!1),_({name:"",commissionPercent:"",locationFee:""})},children:"Annuler"})]})]}):f.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{p(!0),_({name:"",commissionPercent:"",locationFee:""})},style:{marginTop:"10px"},children:" Ajouter un magasin"})]}),f.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[f.jsx("h4",{children:" Rapport consignes"}),f.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[f.jsx("label",{className:"form-label",children:"Mois"}),f.jsx("input",{type:"month",value:b,onChange:D=>j(D.target.value),className:"form-input"})]}),L?f.jsx("div",{className:"report-list",children:Ge.filter(D=>D.itemsSold>0||D.itemsInConsignment>0).map((D,re)=>f.jsxs("div",{className:"report-store-card",children:[f.jsx("div",{className:"report-store-name",children:D.storeName}),D.itemsInConsignment>0&&f.jsxs("div",{className:"report-row",children:[f.jsx("span",{children:" En consigne actuellement"}),f.jsxs("span",{children:[D.itemsInConsignment," article(s)"]})]}),D.itemsSold>0&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"report-row",children:[f.jsx("span",{children:" Articles vendus"}),f.jsx("span",{children:D.itemsSold})]}),f.jsxs("div",{className:"report-row",children:[f.jsx("span",{children:" Total ventes"}),f.jsxs("span",{children:[As(D.totalSales)," $"]})]}),D.commissionPercent>0&&f.jsxs("div",{className:"report-row report-row-negative",children:[f.jsxs("span",{children:[" Commission (",D.commissionPercent,"%)"]}),f.jsxs("span",{children:["-",As(D.totalCommission)," $"]})]}),D.locationFee>0&&f.jsxs("div",{className:"report-row report-row-negative",children:[f.jsx("span",{children:" Loyer mensuel"}),f.jsxs("span",{children:["-",As(D.locationFee)," $"]})]}),f.jsxs("div",{className:"report-row report-row-total",children:[f.jsx("span",{children:" Revenu net"}),f.jsxs("span",{children:[As(D.totalNet-(D.locationFee||0))," $"]})]})]})]},re))}):f.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginTop:"10px"},children:"Aucune activit de consigne pour ce mois"})]}),f.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[f.jsx("h4",{children:" Paramtres Vitrine"}),f.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[f.jsx("label",{className:"form-label",children:"Afficher les articles vendus pendant :"}),f.jsxs("select",{value:r,onChange:D=>O(D.target.value),className:"form-input",children:[f.jsx("option",{value:0,children:"Ne pas afficher"}),f.jsx("option",{value:3,children:"3 jours"}),f.jsx("option",{value:7,children:"7 jours (1 semaine)"}),f.jsx("option",{value:14,children:"14 jours (2 semaines)"}),f.jsx("option",{value:30,children:"30 jours (1 mois)"})]}),f.jsx("p",{className:"about-setting-hint",children:"Les articles vendus apparatront avec un bandeau  VENDU  dans la vitrine publique."})]})]}),f.jsxs("div",{className:"about-card",children:[f.jsx("div",{className:"about-logo",children:f.jsx("img",{src:"/pwa-192x192.png",alt:"Stock du Loft"})}),f.jsx("h3",{children:" Stock du Loft"}),f.jsx("p",{className:"about-version",children:"Version 1.2"}),f.jsx("p",{className:"about-description",children:"Application de gestion d'inventaire conue pour les artisans et crateurs. Grez vos articles, suivez vos consignes et enregistrez vos ventes en toute simplicit."}),f.jsxs("div",{className:"about-author",children:[f.jsxs("p",{children:["Cr par ",f.jsx("strong",{children:"Jean-Marc Lacroix"})]}),f.jsx("p",{children:" 2026  Tous droits rservs"}),f.jsx("p",{style:{marginTop:"12px"},children:" Commentaires et suggestions bienvenus"}),f.jsx("a",{href:"mailto:lacroix.jeanmarc@gmail.com",className:"about-email",children:" lacroix.jeanmarc@gmail.com"})]})]})]})}const ZT="stockduloft/items",ek="stockduloft/photos",tk="stockduloft/settings",nk=4;function $g(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function rk(r,e){if(r.status!=="sold"||!r.saleDate)return!1;const n=new Date(r.saleDate);return(new Date-n)/(1e3*60*60*24)<=e}function ik(r){const e=[];if(!r)return e;r.photoBase64&&e.push(r.photoBase64);for(let n=1;n<=nk;n++)r[`photo_${n}`]&&e.push(r[`photo_${n}`]);return e}function sk(){const[r,e]=k.useState([]),[n,s]=k.useState(!0),[o,a]=k.useState("all"),[u,p]=k.useState(null),[m,g]=k.useState({}),[y,_]=k.useState({}),[w,R]=k.useState(7);k.useEffect(()=>{const A=Te(ke,tk);return ki(A,H=>{if(H.exists()){const Y=H.val();Y.vitrineSoldDays!==void 0&&R(Y.vitrineSoldDays)}})},[]),k.useEffect(()=>{const A=Te(ke,ZT);return ki(A,H=>{const Y=[];H.exists()&&H.forEach(ee=>{const te={id:ee.key,...ee.val()};(te.status==="inventory"||te.status==="consignment"||rk(te,w))&&Y.push(te)}),Y.sort((ee,te)=>(te.createdAt||0)-(ee.createdAt||0)),e(Y),s(!1),Y.forEach(async ee=>{if(ee.hasPhoto&&!ee.photoBase64)try{const te=Te(ke,`${ek}/${ee.id}`),fe=await dn(te);if(fe.exists()){const Ce=ik(fe.val());g(Pe=>({...Pe,[ee.id]:Ce}))}}catch(te){console.error("Erreur photo:",te)}})})},[w]);const b=[...new Set(r.map(A=>A.category).filter(Boolean))].sort(),j=o==="all"?r:r.filter(A=>A.category===o),O=A=>{u===A?p(null):(p(A),_(G=>({...G,[A]:0})))},Q=A=>m[A.id]&&m[A.id].length>0?m[A.id]:A.photoBase64?[A.photoBase64]:[];return n?f.jsx("div",{className:"vitrine",children:f.jsxs("div",{className:"vitrine-loading",children:[f.jsx("div",{className:"loading-spinner"}),f.jsx("p",{children:"Chargement du catalogue..."})]})}):f.jsxs("div",{className:"vitrine",children:[f.jsxs("header",{className:"vitrine-header",children:[f.jsx("img",{src:"/pwa-192x192.png",alt:"Logo",className:"vitrine-logo"}),f.jsxs("div",{children:[f.jsx("h1",{className:"vitrine-title",children:" L'Atelier du Loft"}),f.jsx("p",{className:"vitrine-subtitle-name",children:"Jose Bourgouin"}),f.jsxs("p",{className:"vitrine-subtitle",children:[j.length," article",j.length>1?"s":""," disponible",j.length>1?"s":""]})]})]}),b.length>0&&f.jsxs("div",{className:"vitrine-filters",children:[f.jsx("button",{className:`vitrine-filter-btn ${o==="all"?"active":""}`,onClick:()=>a("all"),children:"Tous"}),b.map(A=>f.jsx("button",{className:`vitrine-filter-btn ${o===A?"active":""}`,onClick:()=>a(A),children:A},A))]}),j.length===0?f.jsxs("div",{className:"vitrine-empty",children:[f.jsx("p",{children:""}),f.jsx("p",{children:"Aucun article disponible pour le moment"})]}):f.jsx("div",{className:"vitrine-grid",children:j.map(A=>{const G=u===A.id,H=Q(A),Y=y[A.id]||0;return f.jsxs("div",{className:`vitrine-card ${G?"expanded":""}`,onClick:()=>O(A.id),children:[!G&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"vitrine-card-photo",children:[H.length>0?f.jsx("img",{src:H[0],alt:A.description}):A.thumbnail?f.jsx("img",{src:A.thumbnail,alt:A.description,className:"vitrine-thumb-blur"}):f.jsx("div",{className:"vitrine-card-no-photo",children:""}),A.status==="sold"&&f.jsx("div",{className:"vitrine-sold-overlay",children:f.jsx("span",{children:"VENDU"})}),H.length>1&&f.jsxs("span",{className:"vitrine-photo-count",children:[" ",H.length]})]}),f.jsxs("div",{className:"vitrine-card-info",children:[f.jsx("p",{className:"vitrine-card-desc",children:A.description||"Sans description"}),f.jsxs("p",{className:"vitrine-card-price",children:[$g(A.price)," $"]}),A.category&&f.jsx("span",{className:"vitrine-card-category",children:A.category})]})]}),G&&f.jsxs("div",{className:"vitrine-detail",onClick:ee=>ee.stopPropagation(),children:[f.jsx("button",{className:"vitrine-detail-close",onClick:()=>p(null),children:" Fermer"}),H.length>0&&f.jsxs("div",{className:"vitrine-gallery",children:[f.jsxs("div",{className:"vitrine-gallery-main",children:[f.jsx("img",{src:H[Y],alt:A.description}),A.status==="sold"&&f.jsx("div",{className:"vitrine-sold-overlay",children:f.jsx("span",{children:"VENDU"})})]}),H.length>1&&f.jsx("div",{className:"vitrine-gallery-thumbs",children:H.map((ee,te)=>f.jsx("div",{className:`vitrine-gallery-thumb ${Y===te?"active":""}`,onClick:fe=>{fe.stopPropagation(),_(Ce=>({...Ce,[A.id]:te}))},children:f.jsx("img",{src:ee,alt:`Photo ${te+1}`})},te))})]}),f.jsxs("div",{className:"vitrine-detail-info",children:[f.jsx("h3",{className:"vitrine-detail-title",children:A.description||"Sans titre"}),f.jsxs("p",{className:"vitrine-detail-price",children:[$g(A.price)," $"]}),f.jsxs("p",{className:"vitrine-detail-id",children:["#",A.uniqueId]}),A.category&&f.jsx("span",{className:"vitrine-card-category",children:A.category}),A.longDescription&&f.jsx("div",{className:"vitrine-detail-description",children:f.jsx("p",{children:A.longDescription})}),A.status==="consignment"&&A.consignmentStore&&f.jsxs("p",{className:"vitrine-detail-consignment",children:[" Disponible chez: ",A.consignmentStore]}),A.itemDate&&f.jsxs("p",{className:"vitrine-detail-date",children:[" Cr le ",A.itemDate]})]})]})]},A.id)})}),f.jsxs("footer",{className:"vitrine-footer",children:[f.jsx("p",{children:" L'Atelier du Loft  Jose Bourgouin"}),f.jsx("p",{className:"vitrine-footer-cta",children:"crivez-moi si quelque chose vous intresse!"}),f.jsx("a",{href:"mailto:Jose.Bourgouin@gmail.com",children:" Jose.Bourgouin@gmail.com"})]})]})}const ho="stockduloft/tenants",ok="lacroix.jeanmarc@gmail.com";function md(r){var e;return((e=r==null?void 0:r.email)==null?void 0:e.toLowerCase())===ok}function lk(r){const e=Te(ke,ho);return ki(e,s=>{const o=[];s.exists()&&s.forEach(a=>{o.push({id:a.key,...a.val()})}),o.sort((a,u)=>(u.createdAt||0)-(a.createdAt||0)),r(o)})}async function ak({businessName:r,ownerName:e,email:n,phone:s}){const o={businessName:r.trim(),ownerName:e.trim(),email:n.trim().toLowerCase(),phone:(s==null?void 0:s.trim())||"",plan:"free",planType:null,startDate:null,expiryDate:null,articlesCount:0,active:!0,notes:"",createdAt:Date.now()},a=Te(ke,ho),u=_h(a);return await pt(u,o),{id:u.key,...o}}async function Ia(r,e){const n=Te(ke,`${ho}/${r}`);await pt(n,{...e,updatedAt:Date.now()})}async function ck(r,e="monthly"){const n=new Date,s=n.toISOString().split("T")[0];let o;if(e==="yearly"){const a=new Date(n);a.setFullYear(a.getFullYear()+1),o=a.toISOString().split("T")[0]}else{const a=new Date(n);a.setMonth(a.getMonth()+1),o=a.toISOString().split("T")[0]}await Ia(r,{plan:"artisan",planType:e,startDate:s,expiryDate:o})}async function uk(r,e=null){const n=Te(ke,`${ho}/${r}`),s=await dn(n);if(!s.exists())return;const o=s.val(),a=e||o.planType||"monthly",u=o.expiryDate?new Date(o.expiryDate):new Date,p=new Date,m=u>p?u:p;let g;if(a==="yearly"){const y=new Date(m);y.setFullYear(y.getFullYear()+1),g=y.toISOString().split("T")[0]}else{const y=new Date(m);y.setMonth(y.getMonth()+1),g=y.toISOString().split("T")[0]}await Ia(r,{plan:"artisan",planType:a,expiryDate:g})}async function dk(r){await Ia(r,{plan:"free",planType:null,startDate:null,expiryDate:null})}async function hk(r){const e=Te(ke,`${ho}/${r}`);await ra(e)}function fk(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function pk(){const{user:r}=Ea(),[e,n]=k.useState([]),[s,o]=k.useState(!1),[a,u]=k.useState({businessName:"",ownerName:"",email:"",phone:""}),[p,m]=k.useState(null),[g,y]=k.useState(null),[_,w]=k.useState("");if(k.useEffect(()=>md(r)?lk(n):void 0,[r]),!md(r))return f.jsxs("div",{className:"page admin-page",children:[f.jsx("h2",{className:"page-title",children:" Accs refus"}),f.jsx("p",{style:{textAlign:"center",color:"var(--text-muted)"},children:"Cette page est rserve  l'administrateur."})]});const R=e.length,b=e.filter(L=>L.plan==="artisan").length,j=e.filter(L=>L.plan==="free").length,O=e.reduce((L,D)=>D.plan!=="artisan"?L:D.planType==="yearly"?L+100/12:L+12.99,0),Q=e.filter(L=>{if(L.plan!=="artisan"||!L.expiryDate)return!1;const D=Math.ceil((new Date(L.expiryDate)-new Date)/(1e3*60*60*24));return D<=7&&D>0}),A=e.filter(L=>L.plan!=="artisan"||!L.expiryDate?!1:new Date(L.expiryDate)<new Date),G=async()=>{!a.businessName.trim()||!a.ownerName.trim()||(await ak(a),u({businessName:"",ownerName:"",email:"",phone:""}),o(!1))},H=async(L,D)=>{confirm(`Activer le plan ${D==="yearly"?"annuel (100$/an)":"mensuel (12.99$/mois)"}?`)&&await ck(L,D)},Y=async L=>{confirm("Renouveler le plan?")&&await uk(L)},ee=async L=>{confirm("Rtrograder au plan gratuit?")&&await dk(L)},te=async L=>{confirm(`Supprimer "${L.businessName}" ? Cette action est irrversible.`)&&(await hk(L.id),m(null))},fe=async L=>{await Ia(L,{notes:_}),y(null)},Ce=L=>L?new Date(L).toLocaleDateString("fr-CA"):"",Pe=L=>L?Math.ceil((new Date(L)-new Date)/(1e3*60*60*24)):null,Ye=L=>L.plan==="free"?"plan-badge-free":L.expiryDate&&new Date(L.expiryDate)<new Date?"plan-badge-expired":"plan-badge-artisan",Ge=L=>L.plan==="free"?" Dcouverte":L.expiryDate&&new Date(L.expiryDate)<new Date?" Expir":" Artisan";return f.jsxs("div",{className:"page admin-page",children:[f.jsx("h2",{className:"page-title",children:" Admin  Vitrine Artisan"}),f.jsxs("div",{className:"admin-stats",children:[f.jsxs("div",{className:"admin-stat-card",children:[f.jsx("span",{className:"admin-stat-number",children:R}),f.jsx("span",{className:"admin-stat-label",children:"Artisans"})]}),f.jsxs("div",{className:"admin-stat-card stat-paying",children:[f.jsx("span",{className:"admin-stat-number",children:b}),f.jsx("span",{className:"admin-stat-label",children:"Payants"})]}),f.jsxs("div",{className:"admin-stat-card stat-free",children:[f.jsx("span",{className:"admin-stat-number",children:j}),f.jsx("span",{className:"admin-stat-label",children:"Gratuits"})]}),f.jsxs("div",{className:"admin-stat-card stat-revenue",children:[f.jsxs("span",{className:"admin-stat-number",children:[fk(O)," $"]}),f.jsx("span",{className:"admin-stat-label",children:"Rev./mois"})]})]}),(Q.length>0||A.length>0)&&f.jsxs("div",{className:"admin-alerts",children:[A.length>0&&f.jsxs("div",{className:"admin-alert admin-alert-danger",children:[" ",A.length," plan(s) expir(s)  action requise"]}),Q.length>0&&f.jsxs("div",{className:"admin-alert admin-alert-warning",children:[" ",Q.length," plan(s) expire(nt) dans 7 jours"]})]}),f.jsxs("div",{className:"admin-section",children:[f.jsxs("div",{className:"admin-section-header",children:[f.jsx("h3",{children:" Artisans"}),f.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{o(!s),u({businessName:"",ownerName:"",email:"",phone:""})},children:" Nouveau client"})]}),s&&f.jsxs("div",{className:"admin-add-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Nom de l'entreprise"}),f.jsx("input",{type:"text",value:a.businessName,onChange:L=>u(D=>({...D,businessName:L.target.value})),className:"form-input",placeholder:"Ex: Les Crations de Marie",autoFocus:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:"Nom du propritaire"}),f.jsx("input",{type:"text",value:a.ownerName,onChange:L=>u(D=>({...D,ownerName:L.target.value})),className:"form-input",placeholder:"Ex: Marie Tremblay"})]}),f.jsxs("div",{className:"store-form-row",children:[f.jsxs("div",{className:"form-group",style:{flex:1},children:[f.jsx("label",{className:"form-label",children:"Courriel"}),f.jsx("input",{type:"email",value:a.email,onChange:L=>u(D=>({...D,email:L.target.value})),className:"form-input",placeholder:"marie@gmail.com"})]}),f.jsxs("div",{className:"form-group",style:{flex:1},children:[f.jsx("label",{className:"form-label",children:"Tlphone"}),f.jsx("input",{type:"tel",value:a.phone,onChange:L=>u(D=>({...D,phone:L.target.value})),className:"form-input",placeholder:"819-555-1234"})]})]}),f.jsxs("div",{className:"store-edit-actions",children:[f.jsx("button",{className:"btn btn-small btn-save",onClick:G,disabled:!a.businessName.trim()||!a.ownerName.trim(),children:" Ajouter"}),f.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>o(!1),children:"Annuler"})]})]}),e.length===0?f.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",textAlign:"center",padding:"20px 0"},children:"Aucun artisan inscrit"}):f.jsx("div",{className:"admin-tenants-list",children:e.map(L=>{const D=p===L.id,re=Pe(L.expiryDate),pe=L.plan==="artisan"&&re!==null&&re<=0;return f.jsxs("div",{className:`admin-tenant-card ${D?"expanded":""} ${pe?"tenant-expired":""}`,onClick:()=>m(D?null:L.id),children:[f.jsxs("div",{className:"admin-tenant-summary",children:[f.jsxs("div",{className:"admin-tenant-info",children:[f.jsx("span",{className:"admin-tenant-business",children:L.businessName}),f.jsx("span",{className:"admin-tenant-owner",children:L.ownerName})]}),f.jsx("span",{className:`admin-plan-badge ${Ye(L)}`,children:Ge(L)})]}),D&&f.jsxs("div",{className:"admin-tenant-details",onClick:X=>X.stopPropagation(),children:[f.jsxs("div",{className:"admin-detail-grid",children:[f.jsxs("div",{className:"admin-detail-item",children:[f.jsx("span",{className:"admin-detail-label",children:" Courriel"}),f.jsx("span",{className:"admin-detail-value",children:L.email||""})]}),f.jsxs("div",{className:"admin-detail-item",children:[f.jsx("span",{className:"admin-detail-label",children:" Tlphone"}),f.jsx("span",{className:"admin-detail-value",children:L.phone||""})]}),f.jsxs("div",{className:"admin-detail-item",children:[f.jsx("span",{className:"admin-detail-label",children:" Inscrit le"}),f.jsx("span",{className:"admin-detail-value",children:Ce(L.createdAt?new Date(L.createdAt).toISOString():null)})]}),L.plan==="artisan"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"admin-detail-item",children:[f.jsx("span",{className:"admin-detail-label",children:" Type"}),f.jsx("span",{className:"admin-detail-value",children:L.planType==="yearly"?"Annuel (100$/an)":"Mensuel (12.99$/mois)"})]}),f.jsxs("div",{className:"admin-detail-item",children:[f.jsx("span",{className:"admin-detail-label",children:" Dbut"}),f.jsx("span",{className:"admin-detail-value",children:Ce(L.startDate)})]}),f.jsxs("div",{className:"admin-detail-item",children:[f.jsx("span",{className:"admin-detail-label",children:" Expiration"}),f.jsxs("span",{className:`admin-detail-value ${pe?"text-danger":re<=7?"text-warning":""}`,children:[Ce(L.expiryDate),re!==null&&f.jsx("span",{className:"admin-days-badge",children:pe?`Expir (${Math.abs(re)}j)`:`${re}j`})]})]})]})]}),f.jsx("div",{className:"admin-notes",children:g===L.id?f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"form-label",children:" Notes"}),f.jsx("textarea",{value:_,onChange:X=>w(X.target.value),className:"form-input form-textarea",rows:"3",placeholder:"Notes sur ce client..."}),f.jsxs("div",{className:"store-edit-actions",style:{marginTop:"6px"},children:[f.jsx("button",{className:"btn btn-small btn-save",onClick:()=>fe(L.id),children:""}),f.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>y(null),children:"Annuler"})]})]}):f.jsxs("div",{className:"admin-notes-display",onClick:()=>{y(L.id),w(L.notes||"")},children:[f.jsx("span",{className:"admin-detail-label",children:" Notes"}),f.jsx("p",{children:L.notes||"Cliquez pour ajouter une note..."})]})}),f.jsxs("div",{className:"admin-tenant-actions",children:[L.plan==="free"?f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"btn btn-small btn-upgrade",onClick:()=>H(L.id,"monthly"),children:" Activer mensuel"}),f.jsx("button",{className:"btn btn-small btn-upgrade-yearly",onClick:()=>H(L.id,"yearly"),children:" Activer annuel"})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"btn btn-small btn-save",onClick:()=>Y(L.id),children:" Renouveler"}),f.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>ee(L.id),children:" Plan gratuit"})]}),f.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>te(L),children:" Supprimer"})]})]})]},L.id)})})]})]})}function mk(){const{login:r}=Ea(),[e,n]=k.useState(""),[s,o]=k.useState(!1),a=async()=>{n(""),o(!0);try{await r()}catch{n("Erreur de connexion. Ressayez.")}finally{o(!1)}};return f.jsx("div",{className:"login-page",children:f.jsxs("div",{className:"login-card",children:[f.jsx("div",{className:"login-logo",children:""}),f.jsx("h1",{className:"login-title",children:"Stock du Loft"}),f.jsxs("p",{className:"login-subtitle",children:["Gestion d'inventaire pour",f.jsx("br",{}),"L'Atelier du Loft"]}),f.jsx("button",{onClick:a,className:"btn btn-primary btn-login",disabled:s,children:s?"Connexion...":" Se connecter avec Google"}),e&&f.jsx("p",{className:"error-text",children:e})]})})}function gk(){var s;const{user:r,logout:e}=Ea();return Fr().pathname==="/vitrine"?f.jsx(sk,{}):r?f.jsxs("div",{className:"app",children:[f.jsx("header",{className:"app-header",children:f.jsxs("div",{className:"header-content",children:[f.jsxs("h1",{className:"app-title",children:[f.jsx("span",{className:"title-icon",children:""}),"Stock du Loft"]}),f.jsxs("div",{className:"header-user",children:[f.jsx("span",{className:"user-name",children:(s=r.displayName)==null?void 0:s.split(" ")[0]}),f.jsx("button",{onClick:e,className:"btn-logout",title:"Dconnexion",children:""})]})]})}),f.jsx("main",{className:"app-main",children:f.jsxs(hS,{children:[f.jsx(Nr,{path:"/",element:f.jsx(HT,{})}),f.jsx(Nr,{path:"/add",element:f.jsx(QT,{})}),f.jsx(Nr,{path:"/sale",element:f.jsx(YT,{})}),f.jsx(Nr,{path:"/about",element:f.jsx(XT,{})}),f.jsx(Nr,{path:"/admin",element:f.jsx(pk,{})}),f.jsx(Nr,{path:"*",element:f.jsx(uS,{to:"/",replace:!0})})]})}),f.jsxs("nav",{className:"bottom-nav",children:[f.jsxs(Ns,{to:"/",end:!0,className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[f.jsx("span",{className:"nav-icon",children:""}),f.jsx("span",{className:"nav-label",children:"Inventaire"})]}),f.jsxs(Ns,{to:"/sale",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[f.jsx("span",{className:"nav-icon",children:""}),f.jsx("span",{className:"nav-label",children:"Vente"})]}),f.jsxs(Ns,{to:"/add",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[f.jsx("span",{className:"nav-icon",children:""}),f.jsx("span",{className:"nav-label",children:"Ajouter"})]}),f.jsxs(Ns,{to:"/about",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[f.jsx("span",{className:"nav-icon",children:""}),f.jsx("span",{className:"nav-label",children:"Info"})]}),md(r)&&f.jsxs(Ns,{to:"/admin",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[f.jsx("span",{className:"nav-icon",children:""}),f.jsx("span",{className:"nav-label",children:"Admin"})]})]})]}):f.jsx(mk,{})}function vk(){return f.jsx(kT,{children:f.jsx(gk,{})})}S0.createRoot(document.getElementById("root")).render(f.jsx(Wg.StrictMode,{children:f.jsx(wS,{children:f.jsx(vk,{})})}));
