function d0(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Bg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Cu={exports:{}},bs={},Eu={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function h0(){if(pm)return ye;pm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=_&&N[_]||N["@@iterator"],typeof N=="function"?N:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,O={};function j(N,D,pe){this.props=N,this.context=D,this.refs=O,this.updater=pe||R}j.prototype.isReactComponent={},j.prototype.setState=function(N,D){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,D,"setState")},j.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ee(){}ee.prototype=j.prototype;function b(N,D,pe){this.props=N,this.context=D,this.refs=O,this.updater=pe||R}var G=b.prototype=new ee;G.constructor=b,A(G,j.prototype),G.isPureReactComponent=!0;var V=Array.isArray,Y=Object.prototype.hasOwnProperty,re={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function fe(N,D,pe){var W,te={},C=null,K=null;if(D!=null)for(W in D.ref!==void 0&&(K=D.ref),D.key!==void 0&&(C=""+D.key),D)Y.call(D,W)&&!X.hasOwnProperty(W)&&(te[W]=D[W]);var ae=arguments.length-2;if(ae===1)te.children=pe;else if(1<ae){for(var ge=Array(ae),oe=0;oe<ae;oe++)ge[oe]=arguments[oe+2];te.children=ge}if(N&&N.defaultProps)for(W in ae=N.defaultProps,ae)te[W]===void 0&&(te[W]=ae[W]);return{$$typeof:r,type:N,key:C,ref:K,props:te,_owner:re.current}}function Ce(N,D){return{$$typeof:r,type:N.type,key:D,ref:N.ref,props:N.props,_owner:N._owner}}function Te(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function Ae(N){var D={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(pe){return D[pe]})}var Ge=/\/+/g;function U(N,D){return typeof N=="object"&&N!==null&&N.key!=null?Ae(""+N.key):D.toString(36)}function me(N,D,pe,W,te){var C=typeof N;(C==="undefined"||C==="boolean")&&(N=null);var K=!1;if(N===null)K=!0;else switch(C){case"string":case"number":K=!0;break;case"object":switch(N.$$typeof){case r:case e:K=!0}}if(K)return K=N,te=te(K),N=W===""?"."+U(K,0):W,V(te)?(pe="",N!=null&&(pe=N.replace(Ge,"$&/")+"/"),me(te,D,pe,"",function(oe){return oe})):te!=null&&(Te(te)&&(te=Ce(te,pe+(!te.key||K&&K.key===te.key?"":(""+te.key).replace(Ge,"$&/")+"/")+N)),D.push(te)),1;if(K=0,W=W===""?".":W+":",V(N))for(var ae=0;ae<N.length;ae++){C=N[ae];var ge=W+U(C,ae);K+=me(C,D,pe,ge,te)}else if(ge=y(N),typeof ge=="function")for(N=ge.call(N),ae=0;!(C=N.next()).done;)C=C.value,ge=W+U(C,ae++),K+=me(C,D,pe,ge,te);else if(C==="object")throw D=String(N),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return K}function Re(N,D,pe){if(N==null)return N;var W=[],te=0;return me(N,W,"","",function(C){return D.call(pe,C,te++)}),W}function Ue(N){if(N._status===-1){var D=N._result;D=D(),D.then(function(pe){(N._status===0||N._status===-1)&&(N._status=1,N._result=pe)},function(pe){(N._status===0||N._status===-1)&&(N._status=2,N._result=pe)}),N._status===-1&&(N._status=0,N._result=D)}if(N._status===1)return N._result.default;throw N._result}var _e={current:null},H={transition:null},se={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:H,ReactCurrentOwner:re};function q(){throw Error("act(...) is not supported in production builds of React.")}return ye.Children={map:Re,forEach:function(N,D,pe){Re(N,function(){D.apply(this,arguments)},pe)},count:function(N){var D=0;return Re(N,function(){D++}),D},toArray:function(N){return Re(N,function(D){return D})||[]},only:function(N){if(!Te(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ye.Component=j,ye.Fragment=n,ye.Profiler=o,ye.PureComponent=b,ye.StrictMode=s,ye.Suspense=m,ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,ye.act=q,ye.cloneElement=function(N,D,pe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var W=A({},N.props),te=N.key,C=N.ref,K=N._owner;if(D!=null){if(D.ref!==void 0&&(C=D.ref,K=re.current),D.key!==void 0&&(te=""+D.key),N.type&&N.type.defaultProps)var ae=N.type.defaultProps;for(ge in D)Y.call(D,ge)&&!X.hasOwnProperty(ge)&&(W[ge]=D[ge]===void 0&&ae!==void 0?ae[ge]:D[ge])}var ge=arguments.length-2;if(ge===1)W.children=pe;else if(1<ge){ae=Array(ge);for(var oe=0;oe<ge;oe++)ae[oe]=arguments[oe+2];W.children=ae}return{$$typeof:r,type:N.type,key:te,ref:C,props:W,_owner:K}},ye.createContext=function(N){return N={$$typeof:u,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:l,_context:N},N.Consumer=N},ye.createElement=fe,ye.createFactory=function(N){var D=fe.bind(null,N);return D.type=N,D},ye.createRef=function(){return{current:null}},ye.forwardRef=function(N){return{$$typeof:p,render:N}},ye.isValidElement=Te,ye.lazy=function(N){return{$$typeof:w,_payload:{_status:-1,_result:N},_init:Ue}},ye.memo=function(N,D){return{$$typeof:g,type:N,compare:D===void 0?null:D}},ye.startTransition=function(N){var D=H.transition;H.transition={};try{N()}finally{H.transition=D}},ye.unstable_act=q,ye.useCallback=function(N,D){return _e.current.useCallback(N,D)},ye.useContext=function(N){return _e.current.useContext(N)},ye.useDebugValue=function(){},ye.useDeferredValue=function(N){return _e.current.useDeferredValue(N)},ye.useEffect=function(N,D){return _e.current.useEffect(N,D)},ye.useId=function(){return _e.current.useId()},ye.useImperativeHandle=function(N,D,pe){return _e.current.useImperativeHandle(N,D,pe)},ye.useInsertionEffect=function(N,D){return _e.current.useInsertionEffect(N,D)},ye.useLayoutEffect=function(N,D){return _e.current.useLayoutEffect(N,D)},ye.useMemo=function(N,D){return _e.current.useMemo(N,D)},ye.useReducer=function(N,D,pe){return _e.current.useReducer(N,D,pe)},ye.useRef=function(N){return _e.current.useRef(N)},ye.useState=function(N){return _e.current.useState(N)},ye.useSyncExternalStore=function(N,D,pe){return _e.current.useSyncExternalStore(N,D,pe)},ye.useTransition=function(){return _e.current.useTransition()},ye.version="18.3.1",ye}var mm;function wd(){return mm||(mm=1,Eu.exports=h0()),Eu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function f0(){if(gm)return bs;gm=1;var r=wd(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(p,m,g){var w,_={},y=null,R=null;g!==void 0&&(y=""+g),m.key!==void 0&&(y=""+m.key),m.ref!==void 0&&(R=m.ref);for(w in m)s.call(m,w)&&!l.hasOwnProperty(w)&&(_[w]=m[w]);if(p&&p.defaultProps)for(w in m=p.defaultProps,m)_[w]===void 0&&(_[w]=m[w]);return{$$typeof:e,type:p,key:y,ref:R,props:_,_owner:o.current}}return bs.Fragment=n,bs.jsx=u,bs.jsxs=u,bs}var vm;function p0(){return vm||(vm=1,Cu.exports=f0()),Cu.exports}var h=p0(),k=wd();const Wg=Bg(k),m0=d0({__proto__:null,default:Wg},[k]);var Ta={},Nu={exports:{}},At={},Iu={exports:{}},Tu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function g0(){return _m||(_m=1,(function(r){function e(H,se){var q=H.length;H.push(se);e:for(;0<q;){var N=q-1>>>1,D=H[N];if(0<o(D,se))H[N]=se,H[q]=D,q=N;else break e}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var se=H[0],q=H.pop();if(q!==se){H[0]=q;e:for(var N=0,D=H.length,pe=D>>>1;N<pe;){var W=2*(N+1)-1,te=H[W],C=W+1,K=H[C];if(0>o(te,q))C<D&&0>o(K,te)?(H[N]=K,H[C]=q,N=C):(H[N]=te,H[W]=q,N=W);else if(C<D&&0>o(K,q))H[N]=K,H[C]=q,N=C;else break e}}return se}function o(H,se){var q=H.sortIndex-se.sortIndex;return q!==0?q:H.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,p=u.now();r.unstable_now=function(){return u.now()-p}}var m=[],g=[],w=1,_=null,y=3,R=!1,A=!1,O=!1,j=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(H){for(var se=n(g);se!==null;){if(se.callback===null)s(g);else if(se.startTime<=H)s(g),se.sortIndex=se.expirationTime,e(m,se);else break;se=n(g)}}function V(H){if(O=!1,G(H),!A)if(n(m)!==null)A=!0,Ue(Y);else{var se=n(g);se!==null&&_e(V,se.startTime-H)}}function Y(H,se){A=!1,O&&(O=!1,ee(fe),fe=-1),R=!0;var q=y;try{for(G(se),_=n(m);_!==null&&(!(_.expirationTime>se)||H&&!Ae());){var N=_.callback;if(typeof N=="function"){_.callback=null,y=_.priorityLevel;var D=N(_.expirationTime<=se);se=r.unstable_now(),typeof D=="function"?_.callback=D:_===n(m)&&s(m),G(se)}else s(m);_=n(m)}if(_!==null)var pe=!0;else{var W=n(g);W!==null&&_e(V,W.startTime-se),pe=!1}return pe}finally{_=null,y=q,R=!1}}var re=!1,X=null,fe=-1,Ce=5,Te=-1;function Ae(){return!(r.unstable_now()-Te<Ce)}function Ge(){if(X!==null){var H=r.unstable_now();Te=H;var se=!0;try{se=X(!0,H)}finally{se?U():(re=!1,X=null)}}else re=!1}var U;if(typeof b=="function")U=function(){b(Ge)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Re=me.port2;me.port1.onmessage=Ge,U=function(){Re.postMessage(null)}}else U=function(){j(Ge,0)};function Ue(H){X=H,re||(re=!0,U())}function _e(H,se){fe=j(function(){H(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){A||R||(A=!0,Ue(Y))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ce=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return n(m)},r.unstable_next=function(H){switch(y){case 1:case 2:case 3:var se=3;break;default:se=y}var q=y;y=se;try{return H()}finally{y=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,se){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=y;y=H;try{return se()}finally{y=q}},r.unstable_scheduleCallback=function(H,se,q){var N=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?N+q:N):q=N,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=q+D,H={id:w++,callback:se,priorityLevel:H,startTime:q,expirationTime:D,sortIndex:-1},q>N?(H.sortIndex=q,e(g,H),n(m)===null&&H===n(g)&&(O?(ee(fe),fe=-1):O=!0,_e(V,q-N))):(H.sortIndex=D,e(m,H),A||R||(A=!0,Ue(Y))),H},r.unstable_shouldYield=Ae,r.unstable_wrapCallback=function(H){var se=y;return function(){var q=y;y=se;try{return H.apply(this,arguments)}finally{y=q}}}})(Tu)),Tu}var ym;function v0(){return ym||(ym=1,Iu.exports=g0()),Iu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function _0(){if(wm)return At;wm=1;var r=wd(),e=v0();function n(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(t,i){u(t,i),u(t+"Capture",i)}function u(t,i){for(o[t]=i,t=0;t<i.length;t++)s.add(i[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function y(t){return m.call(_,t)?!0:m.call(w,t)?!1:g.test(t)?_[t]=!0:(w[t]=!0,!1)}function R(t,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function A(t,i,a,c){if(i===null||typeof i>"u"||R(t,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function O(t,i,a,c,d,f,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=t,this.type=i,this.sanitizeURL=f,this.removeEmptyString=v}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new O(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];j[i]=new O(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new O(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new O(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new O(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new O(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new O(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new O(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new O(t,5,!1,t.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(ee,b);j[i]=new O(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(ee,b);j[i]=new O(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(ee,b);j[i]=new O(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new O(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new O(t,1,!1,t.toLowerCase(),null,!0,!0)});function G(t,i,a,c){var d=j.hasOwnProperty(i)?j[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(A(i,a,d,c)&&(a=null),c||d===null?y(i)&&(a===null?t.removeAttribute(i):t.setAttribute(i,""+a)):d.mustUseProperty?t[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?t.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?t.setAttributeNS(c,i,a):t.setAttribute(i,a))))}var V=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),re=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),Ce=Symbol.for("react.profiler"),Te=Symbol.for("react.provider"),Ae=Symbol.for("react.context"),Ge=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),Re=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),H=Symbol.iterator;function se(t){return t===null||typeof t!="object"?null:(t=H&&t[H]||t["@@iterator"],typeof t=="function"?t:null)}var q=Object.assign,N;function D(t){if(N===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);N=i&&i[1]||""}return`
`+N+t}var pe=!1;function W(t,i){if(!t||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(P){var c=P}Reflect.construct(t,[],i)}else{try{i.call()}catch(P){c=P}t.call(i.prototype)}else{try{throw Error()}catch(P){c=P}t()}}catch(P){if(P&&c&&typeof P.stack=="string"){for(var d=P.stack.split(`
`),f=c.stack.split(`
`),v=d.length-1,S=f.length-1;1<=v&&0<=S&&d[v]!==f[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==f[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==f[S]){var x=`
`+d[v].replace(" at new "," at ");return t.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",t.displayName)),x}while(1<=v&&0<=S);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?D(t):""}function te(t){switch(t.tag){case 5:return D(t.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return t=W(t.type,!1),t;case 11:return t=W(t.type.render,!1),t;case 1:return t=W(t.type,!0),t;default:return""}}function C(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case re:return"Portal";case Ce:return"Profiler";case fe:return"StrictMode";case U:return"Suspense";case me:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ae:return(t.displayName||"Context")+".Consumer";case Te:return(t._context.displayName||"Context")+".Provider";case Ge:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Re:return i=t.displayName||null,i!==null?i:C(t.type)||"Memo";case Ue:i=t._payload,t=t._init;try{return C(t(i))}catch{}}return null}function K(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(i);case 8:return i===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ae(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ge(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function oe(t){var i=ge(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),c=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,f.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Oe(t){t._valueTracker||(t._valueTracker=oe(t))}function F(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return t&&(c=ge(t)?t.checked?"true":"false":t.value),t=c,t!==a?(i.setValue(t),!0):!1}function ve(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xe(t,i){var a=i.checked;return q({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function nt(t,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=ae(i.value!=null?i.value:a),t._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function gn(t,i){i=i.checked,i!=null&&G(t,"checked",i,!1)}function Be(t,i){gn(t,i);var a=ae(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Al(t,i.type,a):i.hasOwnProperty("defaultValue")&&Al(t,i.type,ae(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function vr(t,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,a||i===t.value||(t.value=i),t.defaultValue=i}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function Al(t,i,a){(i!=="number"||ve(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var qi=Array.isArray;function Kr(t,i,a,c){if(t=t.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=i.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&c&&(t[a].defaultSelected=!0)}else{for(a=""+ae(a),i=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,c&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function Dl(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return q({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ch(t,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(n(92));if(qi(a)){if(1<a.length)throw Error(n(93));a=a[0]}i=a}i==null&&(i=""),a=i}t._wrapperState={initialValue:ae(a)}}function Eh(t,i){var a=ae(i.value),c=ae(i.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),i.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),c!=null&&(t.defaultValue=""+c)}function Nh(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Ih(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jl(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Ih(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yo,Th=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return t(i,a,c,d)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(yo=yo||document.createElement("div"),yo.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=yo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function Gi(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},my=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(t){my.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Ki[i]=Ki[t]})});function kh(t,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Ki.hasOwnProperty(t)&&Ki[t]?(""+i).trim():i+"px"}function Ph(t,i){t=t.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=kh(a,i[a],c);a==="float"&&(a="cssFloat"),c?t.setProperty(a,d):t[a]=d}}var gy=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ol(t,i){if(i){if(gy[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function Ll(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ml=null;function Fl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ul=null,Qr=null,Yr=null;function Rh(t){if(t=gs(t)){if(typeof Ul!="function")throw Error(n(280));var i=t.stateNode;i&&(i=Bo(i),Ul(t.stateNode,t.type,i))}}function bh(t){Qr?Yr?Yr.push(t):Yr=[t]:Qr=t}function Ah(){if(Qr){var t=Qr,i=Yr;if(Yr=Qr=null,Rh(t),i)for(t=0;t<i.length;t++)Rh(i[t])}}function Dh(t,i){return t(i)}function jh(){}var $l=!1;function Oh(t,i,a){if($l)return t(i,a);$l=!0;try{return Dh(t,i,a)}finally{$l=!1,(Qr!==null||Yr!==null)&&(jh(),Ah())}}function Qi(t,i){var a=t.stateNode;if(a===null)return null;var c=Bo(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(n(231,i,typeof a));return a}var zl=!1;if(p)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){zl=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{zl=!1}function vy(t,i,a,c,d,f,v,S,x){var P=Array.prototype.slice.call(arguments,3);try{i.apply(a,P)}catch(M){this.onError(M)}}var Ji=!1,wo=null,So=!1,Bl=null,_y={onError:function(t){Ji=!0,wo=t}};function yy(t,i,a,c,d,f,v,S,x){Ji=!1,wo=null,vy.apply(_y,arguments)}function wy(t,i,a,c,d,f,v,S,x){if(yy.apply(this,arguments),Ji){if(Ji){var P=wo;Ji=!1,wo=null}else throw Error(n(198));So||(So=!0,Bl=P)}}function _r(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function Lh(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function Mh(t){if(_r(t)!==t)throw Error(n(188))}function Sy(t){var i=t.alternate;if(!i){if(i=_r(t),i===null)throw Error(n(188));return i!==t?null:t}for(var a=t,c=i;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return Mh(d),t;if(f===c)return Mh(d),i;f=f.sibling}throw Error(n(188))}if(a.return!==c.return)a=d,c=f;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,c=f;break}if(S===c){v=!0,c=d,a=f;break}S=S.sibling}if(!v){for(S=f.child;S;){if(S===a){v=!0,a=f,c=d;break}if(S===c){v=!0,c=f,a=d;break}S=S.sibling}if(!v)throw Error(n(189))}}if(a.alternate!==c)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?t:i}function Fh(t){return t=Sy(t),t!==null?Uh(t):null}function Uh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Uh(t);if(i!==null)return i;t=t.sibling}return null}var $h=e.unstable_scheduleCallback,zh=e.unstable_cancelCallback,xy=e.unstable_shouldYield,Cy=e.unstable_requestPaint,Ze=e.unstable_now,Ey=e.unstable_getCurrentPriorityLevel,Wl=e.unstable_ImmediatePriority,Bh=e.unstable_UserBlockingPriority,xo=e.unstable_NormalPriority,Ny=e.unstable_LowPriority,Wh=e.unstable_IdlePriority,Co=null,an=null;function Iy(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Co,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Py,Ty=Math.log,ky=Math.LN2;function Py(t){return t>>>=0,t===0?32:31-(Ty(t)/ky|0)|0}var Eo=64,No=4194304;function Xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Io(t,i){var a=t.pendingLanes;if(a===0)return 0;var c=0,d=t.suspendedLanes,f=t.pingedLanes,v=a&268435455;if(v!==0){var S=v&~d;S!==0?c=Xi(S):(f&=v,f!==0&&(c=Xi(f)))}else v=a&~d,v!==0?c=Xi(v):f!==0&&(c=Xi(f));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,f=i&-i,d>=f||d===16&&(f&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=c;0<i;)a=31-qt(i),d=1<<a,c|=t[a],i&=~d;return c}function Ry(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function by(t,i){for(var a=t.suspendedLanes,c=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes;0<f;){var v=31-qt(f),S=1<<v,x=d[v];x===-1?((S&a)===0||(S&c)!==0)&&(d[v]=Ry(S,i)):x<=i&&(t.expiredLanes|=S),f&=~S}}function Vl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vh(){var t=Eo;return Eo<<=1,(Eo&4194240)===0&&(Eo=64),t}function Hl(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Zi(t,i,a){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-qt(i),t[i]=a}function Ay(t,i){var a=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<a;){var d=31-qt(a),f=1<<d;i[d]=0,c[d]=-1,t[d]=-1,a&=~f}}function ql(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var c=31-qt(a),d=1<<c;d&i|t[c]&i&&(t[c]|=i),a&=~d}}var be=0;function Hh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var qh,Gl,Gh,Kh,Qh,Kl=!1,To=[],On=null,Ln=null,Mn=null,es=new Map,ts=new Map,Fn=[],Dy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yh(t,i){switch(t){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":es.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ts.delete(i.pointerId)}}function ns(t,i,a,c,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},i!==null&&(i=gs(i),i!==null&&Gl(i)),t):(t.eventSystemFlags|=c,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function jy(t,i,a,c,d){switch(i){case"focusin":return On=ns(On,t,i,a,c,d),!0;case"dragenter":return Ln=ns(Ln,t,i,a,c,d),!0;case"mouseover":return Mn=ns(Mn,t,i,a,c,d),!0;case"pointerover":var f=d.pointerId;return es.set(f,ns(es.get(f)||null,t,i,a,c,d)),!0;case"gotpointercapture":return f=d.pointerId,ts.set(f,ns(ts.get(f)||null,t,i,a,c,d)),!0}return!1}function Jh(t){var i=yr(t.target);if(i!==null){var a=_r(i);if(a!==null){if(i=a.tag,i===13){if(i=Lh(a),i!==null){t.blockedOn=i,Qh(t.priority,function(){Gh(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ko(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Yl(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var c=new a.constructor(a.type,a);Ml=c,a.target.dispatchEvent(c),Ml=null}else return i=gs(a),i!==null&&Gl(i),t.blockedOn=a,!1;i.shift()}return!0}function Xh(t,i,a){ko(t)&&a.delete(i)}function Oy(){Kl=!1,On!==null&&ko(On)&&(On=null),Ln!==null&&ko(Ln)&&(Ln=null),Mn!==null&&ko(Mn)&&(Mn=null),es.forEach(Xh),ts.forEach(Xh)}function rs(t,i){t.blockedOn===i&&(t.blockedOn=null,Kl||(Kl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Oy)))}function is(t){function i(d){return rs(d,t)}if(0<To.length){rs(To[0],t);for(var a=1;a<To.length;a++){var c=To[a];c.blockedOn===t&&(c.blockedOn=null)}}for(On!==null&&rs(On,t),Ln!==null&&rs(Ln,t),Mn!==null&&rs(Mn,t),es.forEach(i),ts.forEach(i),a=0;a<Fn.length;a++)c=Fn[a],c.blockedOn===t&&(c.blockedOn=null);for(;0<Fn.length&&(a=Fn[0],a.blockedOn===null);)Jh(a),a.blockedOn===null&&Fn.shift()}var Jr=V.ReactCurrentBatchConfig,Po=!0;function Ly(t,i,a,c){var d=be,f=Jr.transition;Jr.transition=null;try{be=1,Ql(t,i,a,c)}finally{be=d,Jr.transition=f}}function My(t,i,a,c){var d=be,f=Jr.transition;Jr.transition=null;try{be=4,Ql(t,i,a,c)}finally{be=d,Jr.transition=f}}function Ql(t,i,a,c){if(Po){var d=Yl(t,i,a,c);if(d===null)fc(t,i,c,Ro,a),Yh(t,c);else if(jy(d,t,i,a,c))c.stopPropagation();else if(Yh(t,c),i&4&&-1<Dy.indexOf(t)){for(;d!==null;){var f=gs(d);if(f!==null&&qh(f),f=Yl(t,i,a,c),f===null&&fc(t,i,c,Ro,a),f===d)break;d=f}d!==null&&c.stopPropagation()}else fc(t,i,c,null,a)}}var Ro=null;function Yl(t,i,a,c){if(Ro=null,t=Fl(c),t=yr(t),t!==null)if(i=_r(t),i===null)t=null;else if(a=i.tag,a===13){if(t=Lh(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return Ro=t,null}function Zh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ey()){case Wl:return 1;case Bh:return 4;case xo:case Ny:return 16;case Wh:return 536870912;default:return 16}default:return 16}}var Un=null,Jl=null,bo=null;function ef(){if(bo)return bo;var t,i=Jl,a=i.length,c,d="value"in Un?Un.value:Un.textContent,f=d.length;for(t=0;t<a&&i[t]===d[t];t++);var v=a-t;for(c=1;c<=v&&i[a-c]===d[f-c];c++);return bo=d.slice(t,1<c?1-c:void 0)}function Ao(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Do(){return!0}function tf(){return!1}function jt(t){function i(a,c,d,f,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Do:tf,this.isPropagationStopped=tf,this}return q(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Do)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Do)},persist:function(){},isPersistent:Do}),i}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xl=jt(Xr),ss=q({},Xr,{view:0,detail:0}),Fy=jt(ss),Zl,ec,os,jo=q({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==os&&(os&&t.type==="mousemove"?(Zl=t.screenX-os.screenX,ec=t.screenY-os.screenY):ec=Zl=0,os=t),Zl)},movementY:function(t){return"movementY"in t?t.movementY:ec}}),nf=jt(jo),Uy=q({},jo,{dataTransfer:0}),$y=jt(Uy),zy=q({},ss,{relatedTarget:0}),tc=jt(zy),By=q({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wy=jt(By),Vy=q({},Xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hy=jt(Vy),qy=q({},Xr,{data:0}),rf=jt(qy),Gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ky={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yy(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Qy[t])?!!i[t]:!1}function nc(){return Yy}var Jy=q({},ss,{key:function(t){if(t.key){var i=Gy[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ao(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ky[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(t){return t.type==="keypress"?Ao(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ao(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xy=jt(Jy),Zy=q({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sf=jt(Zy),ew=q({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc}),tw=jt(ew),nw=q({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rw=jt(nw),iw=q({},jo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sw=jt(iw),ow=[9,13,27,32],rc=p&&"CompositionEvent"in window,as=null;p&&"documentMode"in document&&(as=document.documentMode);var aw=p&&"TextEvent"in window&&!as,of=p&&(!rc||as&&8<as&&11>=as),af=" ",lf=!1;function cf(t,i){switch(t){case"keyup":return ow.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zr=!1;function lw(t,i){switch(t){case"compositionend":return uf(i);case"keypress":return i.which!==32?null:(lf=!0,af);case"textInput":return t=i.data,t===af&&lf?null:t;default:return null}}function cw(t,i){if(Zr)return t==="compositionend"||!rc&&cf(t,i)?(t=ef(),bo=Jl=Un=null,Zr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return of&&i.locale!=="ko"?null:i.data;default:return null}}var uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!uw[t.type]:i==="textarea"}function hf(t,i,a,c){bh(c),i=Uo(i,"onChange"),0<i.length&&(a=new Xl("onChange","change",null,a,c),t.push({event:a,listeners:i}))}var ls=null,cs=null;function dw(t){Rf(t,0)}function Oo(t){var i=ii(t);if(F(i))return t}function hw(t,i){if(t==="change")return i}var ff=!1;if(p){var ic;if(p){var sc="oninput"in document;if(!sc){var pf=document.createElement("div");pf.setAttribute("oninput","return;"),sc=typeof pf.oninput=="function"}ic=sc}else ic=!1;ff=ic&&(!document.documentMode||9<document.documentMode)}function mf(){ls&&(ls.detachEvent("onpropertychange",gf),cs=ls=null)}function gf(t){if(t.propertyName==="value"&&Oo(cs)){var i=[];hf(i,cs,t,Fl(t)),Oh(dw,i)}}function fw(t,i,a){t==="focusin"?(mf(),ls=i,cs=a,ls.attachEvent("onpropertychange",gf)):t==="focusout"&&mf()}function pw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oo(cs)}function mw(t,i){if(t==="click")return Oo(i)}function gw(t,i){if(t==="input"||t==="change")return Oo(i)}function vw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Gt=typeof Object.is=="function"?Object.is:vw;function us(t,i){if(Gt(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!m.call(i,d)||!Gt(t[d],i[d]))return!1}return!0}function vf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _f(t,i){var a=vf(t);t=0;for(var c;a;){if(a.nodeType===3){if(c=t+a.textContent.length,t<=i&&c>=i)return{node:a,offset:i-t};t=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vf(a)}}function yf(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?yf(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function wf(){for(var t=window,i=ve();i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ve(t.document)}return i}function oc(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function _w(t){var i=wf(),a=t.focusedElem,c=t.selectionRange;if(i!==a&&a&&a.ownerDocument&&yf(a.ownerDocument.documentElement,a)){if(c!==null&&oc(a)){if(i=c.start,t=c.end,t===void 0&&(t=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(t,a.value.length);else if(t=(i=a.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var d=a.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!t.extend&&f>c&&(d=c,c=f,f=d),d=_f(a,f);var v=_f(a,c);d&&v&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),t.removeAllRanges(),f>c?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=a;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)t=i[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yw=p&&"documentMode"in document&&11>=document.documentMode,ei=null,ac=null,ds=null,lc=!1;function Sf(t,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;lc||ei==null||ei!==ve(c)||(c=ei,"selectionStart"in c&&oc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ds&&us(ds,c)||(ds=c,c=Uo(ac,"onSelect"),0<c.length&&(i=new Xl("onSelect","select",null,i,a),t.push({event:i,listeners:c}),i.target=ei)))}function Lo(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ti={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},cc={},xf={};p&&(xf=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function Mo(t){if(cc[t])return cc[t];if(!ti[t])return t;var i=ti[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in xf)return cc[t]=i[a];return t}var Cf=Mo("animationend"),Ef=Mo("animationiteration"),Nf=Mo("animationstart"),If=Mo("transitionend"),Tf=new Map,kf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(t,i){Tf.set(t,i),l(i,[t])}for(var uc=0;uc<kf.length;uc++){var dc=kf[uc],ww=dc.toLowerCase(),Sw=dc[0].toUpperCase()+dc.slice(1);$n(ww,"on"+Sw)}$n(Cf,"onAnimationEnd"),$n(Ef,"onAnimationIteration"),$n(Nf,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(If,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xw=new Set("cancel close invalid load scroll toggle".split(" ").concat(hs));function Pf(t,i,a){var c=t.type||"unknown-event";t.currentTarget=a,wy(c,i,void 0,t),t.currentTarget=null}function Rf(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var c=t[a],d=c.event;c=c.listeners;e:{var f=void 0;if(i)for(var v=c.length-1;0<=v;v--){var S=c[v],x=S.instance,P=S.currentTarget;if(S=S.listener,x!==f&&d.isPropagationStopped())break e;Pf(d,S,P),f=x}else for(v=0;v<c.length;v++){if(S=c[v],x=S.instance,P=S.currentTarget,S=S.listener,x!==f&&d.isPropagationStopped())break e;Pf(d,S,P),f=x}}}if(So)throw t=Bl,So=!1,Bl=null,t}function $e(t,i){var a=i[yc];a===void 0&&(a=i[yc]=new Set);var c=t+"__bubble";a.has(c)||(bf(i,t,2,!1),a.add(c))}function hc(t,i,a){var c=0;i&&(c|=4),bf(a,t,c,i)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function fs(t){if(!t[Fo]){t[Fo]=!0,s.forEach(function(a){a!=="selectionchange"&&(xw.has(a)||hc(a,!1,t),hc(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Fo]||(i[Fo]=!0,hc("selectionchange",!1,i))}}function bf(t,i,a,c){switch(Zh(i)){case 1:var d=Ly;break;case 4:d=My;break;default:d=Ql}a=d.bind(null,i,a,t),d=void 0,!zl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?t.addEventListener(i,a,{capture:!0,passive:d}):t.addEventListener(i,a,!0):d!==void 0?t.addEventListener(i,a,{passive:d}):t.addEventListener(i,a,!1)}function fc(t,i,a,c,d){var f=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var x=v.tag;if((x===3||x===4)&&(x=v.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;v=v.return}for(;S!==null;){if(v=yr(S),v===null)return;if(x=v.tag,x===5||x===6){c=f=v;continue e}S=S.parentNode}}c=c.return}Oh(function(){var P=f,M=Fl(a),$=[];e:{var L=Tf.get(t);if(L!==void 0){var Q=Xl,Z=t;switch(t){case"keypress":if(Ao(a)===0)break e;case"keydown":case"keyup":Q=Xy;break;case"focusin":Z="focus",Q=tc;break;case"focusout":Z="blur",Q=tc;break;case"beforeblur":case"afterblur":Q=tc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=$y;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=tw;break;case Cf:case Ef:case Nf:Q=Wy;break;case If:Q=rw;break;case"scroll":Q=Fy;break;case"wheel":Q=sw;break;case"copy":case"cut":case"paste":Q=Hy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=sf}var ne=(i&4)!==0,et=!ne&&t==="scroll",I=ne?L!==null?L+"Capture":null:L;ne=[];for(var E=P,T;E!==null;){T=E;var z=T.stateNode;if(T.tag===5&&z!==null&&(T=z,I!==null&&(z=Qi(E,I),z!=null&&ne.push(ps(E,z,T)))),et)break;E=E.return}0<ne.length&&(L=new Q(L,Z,null,a,M),$.push({event:L,listeners:ne}))}}if((i&7)===0){e:{if(L=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",L&&a!==Ml&&(Z=a.relatedTarget||a.fromElement)&&(yr(Z)||Z[vn]))break e;if((Q||L)&&(L=M.window===M?M:(L=M.ownerDocument)?L.defaultView||L.parentWindow:window,Q?(Z=a.relatedTarget||a.toElement,Q=P,Z=Z?yr(Z):null,Z!==null&&(et=_r(Z),Z!==et||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(Q=null,Z=P),Q!==Z)){if(ne=nf,z="onMouseLeave",I="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(ne=sf,z="onPointerLeave",I="onPointerEnter",E="pointer"),et=Q==null?L:ii(Q),T=Z==null?L:ii(Z),L=new ne(z,E+"leave",Q,a,M),L.target=et,L.relatedTarget=T,z=null,yr(M)===P&&(ne=new ne(I,E+"enter",Z,a,M),ne.target=T,ne.relatedTarget=et,z=ne),et=z,Q&&Z)t:{for(ne=Q,I=Z,E=0,T=ne;T;T=ni(T))E++;for(T=0,z=I;z;z=ni(z))T++;for(;0<E-T;)ne=ni(ne),E--;for(;0<T-E;)I=ni(I),T--;for(;E--;){if(ne===I||I!==null&&ne===I.alternate)break t;ne=ni(ne),I=ni(I)}ne=null}else ne=null;Q!==null&&Af($,L,Q,ne,!1),Z!==null&&et!==null&&Af($,et,Z,ne,!0)}}e:{if(L=P?ii(P):window,Q=L.nodeName&&L.nodeName.toLowerCase(),Q==="select"||Q==="input"&&L.type==="file")var ie=hw;else if(df(L))if(ff)ie=gw;else{ie=pw;var le=fw}else(Q=L.nodeName)&&Q.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(ie=mw);if(ie&&(ie=ie(t,P))){hf($,ie,a,M);break e}le&&le(t,L,P),t==="focusout"&&(le=L._wrapperState)&&le.controlled&&L.type==="number"&&Al(L,"number",L.value)}switch(le=P?ii(P):window,t){case"focusin":(df(le)||le.contentEditable==="true")&&(ei=le,ac=P,ds=null);break;case"focusout":ds=ac=ei=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,Sf($,a,M);break;case"selectionchange":if(yw)break;case"keydown":case"keyup":Sf($,a,M)}var ce;if(rc)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Zr?cf(t,a)&&(de="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(de="onCompositionStart");de&&(of&&a.locale!=="ko"&&(Zr||de!=="onCompositionStart"?de==="onCompositionEnd"&&Zr&&(ce=ef()):(Un=M,Jl="value"in Un?Un.value:Un.textContent,Zr=!0)),le=Uo(P,de),0<le.length&&(de=new rf(de,t,null,a,M),$.push({event:de,listeners:le}),ce?de.data=ce:(ce=uf(a),ce!==null&&(de.data=ce)))),(ce=aw?lw(t,a):cw(t,a))&&(P=Uo(P,"onBeforeInput"),0<P.length&&(M=new rf("onBeforeInput","beforeinput",null,a,M),$.push({event:M,listeners:P}),M.data=ce))}Rf($,i)})}function ps(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Uo(t,i){for(var a=i+"Capture",c=[];t!==null;){var d=t,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Qi(t,a),f!=null&&c.unshift(ps(t,f,d)),f=Qi(t,i),f!=null&&c.push(ps(t,f,d))),t=t.return}return c}function ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Af(t,i,a,c,d){for(var f=i._reactName,v=[];a!==null&&a!==c;){var S=a,x=S.alternate,P=S.stateNode;if(x!==null&&x===c)break;S.tag===5&&P!==null&&(S=P,d?(x=Qi(a,f),x!=null&&v.unshift(ps(a,x,S))):d||(x=Qi(a,f),x!=null&&v.push(ps(a,x,S)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var Cw=/\r\n?/g,Ew=/\u0000|\uFFFD/g;function Df(t){return(typeof t=="string"?t:""+t).replace(Cw,`
`).replace(Ew,"")}function $o(t,i,a){if(i=Df(i),Df(t)!==i&&a)throw Error(n(425))}function zo(){}var pc=null,mc=null;function gc(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var vc=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,jf=typeof Promise=="function"?Promise:void 0,Iw=typeof queueMicrotask=="function"?queueMicrotask:typeof jf<"u"?function(t){return jf.resolve(null).then(t).catch(Tw)}:vc;function Tw(t){setTimeout(function(){throw t})}function _c(t,i){var a=i,c=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){t.removeChild(d),is(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);is(i)}function zn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Of(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}var ri=Math.random().toString(36).slice(2),ln="__reactFiber$"+ri,ms="__reactProps$"+ri,vn="__reactContainer$"+ri,yc="__reactEvents$"+ri,kw="__reactListeners$"+ri,Pw="__reactHandles$"+ri;function yr(t){var i=t[ln];if(i)return i;for(var a=t.parentNode;a;){if(i=a[vn]||a[ln]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Of(t);t!==null;){if(a=t[ln])return a;t=Of(t)}return i}t=a,a=t.parentNode}return null}function gs(t){return t=t[ln]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ii(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Bo(t){return t[ms]||null}var wc=[],si=-1;function Bn(t){return{current:t}}function ze(t){0>si||(t.current=wc[si],wc[si]=null,si--)}function Le(t,i){si++,wc[si]=t.current,t.current=i}var Wn={},vt=Bn(Wn),Tt=Bn(!1),wr=Wn;function oi(t,i){var a=t.type.contextTypes;if(!a)return Wn;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=i[f];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=d),d}function kt(t){return t=t.childContextTypes,t!=null}function Wo(){ze(Tt),ze(vt)}function Lf(t,i,a){if(vt.current!==Wn)throw Error(n(168));Le(vt,i),Le(Tt,a)}function Mf(t,i,a){var c=t.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(n(108,K(t)||"Unknown",d));return q({},a,c)}function Vo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wn,wr=vt.current,Le(vt,t),Le(Tt,Tt.current),!0}function Ff(t,i,a){var c=t.stateNode;if(!c)throw Error(n(169));a?(t=Mf(t,i,wr),c.__reactInternalMemoizedMergedChildContext=t,ze(Tt),ze(vt),Le(vt,t)):ze(Tt),Le(Tt,a)}var _n=null,Ho=!1,Sc=!1;function Uf(t){_n===null?_n=[t]:_n.push(t)}function Rw(t){Ho=!0,Uf(t)}function Vn(){if(!Sc&&_n!==null){Sc=!0;var t=0,i=be;try{var a=_n;for(be=1;t<a.length;t++){var c=a[t];do c=c(!0);while(c!==null)}_n=null,Ho=!1}catch(d){throw _n!==null&&(_n=_n.slice(t+1)),$h(Wl,Vn),d}finally{be=i,Sc=!1}}return null}var ai=[],li=0,qo=null,Go=0,Ft=[],Ut=0,Sr=null,yn=1,wn="";function xr(t,i){ai[li++]=Go,ai[li++]=qo,qo=t,Go=i}function $f(t,i,a){Ft[Ut++]=yn,Ft[Ut++]=wn,Ft[Ut++]=Sr,Sr=t;var c=yn;t=wn;var d=32-qt(c)-1;c&=~(1<<d),a+=1;var f=32-qt(i)+d;if(30<f){var v=d-d%5;f=(c&(1<<v)-1).toString(32),c>>=v,d-=v,yn=1<<32-qt(i)+d|a<<d|c,wn=f+t}else yn=1<<f|a<<d|c,wn=t}function xc(t){t.return!==null&&(xr(t,1),$f(t,1,0))}function Cc(t){for(;t===qo;)qo=ai[--li],ai[li]=null,Go=ai[--li],ai[li]=null;for(;t===Sr;)Sr=Ft[--Ut],Ft[Ut]=null,wn=Ft[--Ut],Ft[Ut]=null,yn=Ft[--Ut],Ft[Ut]=null}var Ot=null,Lt=null,We=!1,Kt=null;function zf(t,i){var a=Wt(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=t,i=t.deletions,i===null?(t.deletions=[a],t.flags|=16):i.push(a)}function Bf(t,i){switch(t.tag){case 5:var a=t.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Ot=t,Lt=zn(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Ot=t,Lt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Sr!==null?{id:yn,overflow:wn}:null,t.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Wt(18,null,null,0),a.stateNode=i,a.return=t,t.child=a,Ot=t,Lt=null,!0):!1;default:return!1}}function Ec(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nc(t){if(We){var i=Lt;if(i){var a=i;if(!Bf(t,i)){if(Ec(t))throw Error(n(418));i=zn(a.nextSibling);var c=Ot;i&&Bf(t,i)?zf(c,a):(t.flags=t.flags&-4097|2,We=!1,Ot=t)}}else{if(Ec(t))throw Error(n(418));t.flags=t.flags&-4097|2,We=!1,Ot=t}}}function Wf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function Ko(t){if(t!==Ot)return!1;if(!We)return Wf(t),We=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!gc(t.type,t.memoizedProps)),i&&(i=Lt)){if(Ec(t))throw Vf(),Error(n(418));for(;i;)zf(t,i),i=zn(i.nextSibling)}if(Wf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(i===0){Lt=zn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}t=t.nextSibling}Lt=null}}else Lt=Ot?zn(t.stateNode.nextSibling):null;return!0}function Vf(){for(var t=Lt;t;)t=zn(t.nextSibling)}function ci(){Lt=Ot=null,We=!1}function Ic(t){Kt===null?Kt=[t]:Kt.push(t)}var bw=V.ReactCurrentBatchConfig;function vs(t,i,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(n(309));var c=a.stateNode}if(!c)throw Error(n(147,t));var d=c,f=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===f?i.ref:(i=function(v){var S=d.refs;v===null?delete S[f]:S[f]=v},i._stringRef=f,i)}if(typeof t!="string")throw Error(n(284));if(!a._owner)throw Error(n(290,t))}return t}function Qo(t,i){throw t=Object.prototype.toString.call(i),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Hf(t){var i=t._init;return i(t._payload)}function qf(t){function i(I,E){if(t){var T=I.deletions;T===null?(I.deletions=[E],I.flags|=16):T.push(E)}}function a(I,E){if(!t)return null;for(;E!==null;)i(I,E),E=E.sibling;return null}function c(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function d(I,E){return I=Xn(I,E),I.index=0,I.sibling=null,I}function f(I,E,T){return I.index=T,t?(T=I.alternate,T!==null?(T=T.index,T<E?(I.flags|=2,E):T):(I.flags|=2,E)):(I.flags|=1048576,E)}function v(I){return t&&I.alternate===null&&(I.flags|=2),I}function S(I,E,T,z){return E===null||E.tag!==6?(E=vu(T,I.mode,z),E.return=I,E):(E=d(E,T),E.return=I,E)}function x(I,E,T,z){var ie=T.type;return ie===X?M(I,E,T.props.children,z,T.key):E!==null&&(E.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ue&&Hf(ie)===E.type)?(z=d(E,T.props),z.ref=vs(I,E,T),z.return=I,z):(z=ya(T.type,T.key,T.props,null,I.mode,z),z.ref=vs(I,E,T),z.return=I,z)}function P(I,E,T,z){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=_u(T,I.mode,z),E.return=I,E):(E=d(E,T.children||[]),E.return=I,E)}function M(I,E,T,z,ie){return E===null||E.tag!==7?(E=Rr(T,I.mode,z,ie),E.return=I,E):(E=d(E,T),E.return=I,E)}function $(I,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=vu(""+E,I.mode,T),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Y:return T=ya(E.type,E.key,E.props,null,I.mode,T),T.ref=vs(I,null,E),T.return=I,T;case re:return E=_u(E,I.mode,T),E.return=I,E;case Ue:var z=E._init;return $(I,z(E._payload),T)}if(qi(E)||se(E))return E=Rr(E,I.mode,T,null),E.return=I,E;Qo(I,E)}return null}function L(I,E,T,z){var ie=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return ie!==null?null:S(I,E,""+T,z);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Y:return T.key===ie?x(I,E,T,z):null;case re:return T.key===ie?P(I,E,T,z):null;case Ue:return ie=T._init,L(I,E,ie(T._payload),z)}if(qi(T)||se(T))return ie!==null?null:M(I,E,T,z,null);Qo(I,T)}return null}function Q(I,E,T,z,ie){if(typeof z=="string"&&z!==""||typeof z=="number")return I=I.get(T)||null,S(E,I,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Y:return I=I.get(z.key===null?T:z.key)||null,x(E,I,z,ie);case re:return I=I.get(z.key===null?T:z.key)||null,P(E,I,z,ie);case Ue:var le=z._init;return Q(I,E,T,le(z._payload),ie)}if(qi(z)||se(z))return I=I.get(T)||null,M(E,I,z,ie,null);Qo(E,z)}return null}function Z(I,E,T,z){for(var ie=null,le=null,ce=E,de=E=0,ct=null;ce!==null&&de<T.length;de++){ce.index>de?(ct=ce,ce=null):ct=ce.sibling;var ke=L(I,ce,T[de],z);if(ke===null){ce===null&&(ce=ct);break}t&&ce&&ke.alternate===null&&i(I,ce),E=f(ke,E,de),le===null?ie=ke:le.sibling=ke,le=ke,ce=ct}if(de===T.length)return a(I,ce),We&&xr(I,de),ie;if(ce===null){for(;de<T.length;de++)ce=$(I,T[de],z),ce!==null&&(E=f(ce,E,de),le===null?ie=ce:le.sibling=ce,le=ce);return We&&xr(I,de),ie}for(ce=c(I,ce);de<T.length;de++)ct=Q(ce,I,de,T[de],z),ct!==null&&(t&&ct.alternate!==null&&ce.delete(ct.key===null?de:ct.key),E=f(ct,E,de),le===null?ie=ct:le.sibling=ct,le=ct);return t&&ce.forEach(function(Zn){return i(I,Zn)}),We&&xr(I,de),ie}function ne(I,E,T,z){var ie=se(T);if(typeof ie!="function")throw Error(n(150));if(T=ie.call(T),T==null)throw Error(n(151));for(var le=ie=null,ce=E,de=E=0,ct=null,ke=T.next();ce!==null&&!ke.done;de++,ke=T.next()){ce.index>de?(ct=ce,ce=null):ct=ce.sibling;var Zn=L(I,ce,ke.value,z);if(Zn===null){ce===null&&(ce=ct);break}t&&ce&&Zn.alternate===null&&i(I,ce),E=f(Zn,E,de),le===null?ie=Zn:le.sibling=Zn,le=Zn,ce=ct}if(ke.done)return a(I,ce),We&&xr(I,de),ie;if(ce===null){for(;!ke.done;de++,ke=T.next())ke=$(I,ke.value,z),ke!==null&&(E=f(ke,E,de),le===null?ie=ke:le.sibling=ke,le=ke);return We&&xr(I,de),ie}for(ce=c(I,ce);!ke.done;de++,ke=T.next())ke=Q(ce,I,de,ke.value,z),ke!==null&&(t&&ke.alternate!==null&&ce.delete(ke.key===null?de:ke.key),E=f(ke,E,de),le===null?ie=ke:le.sibling=ke,le=ke);return t&&ce.forEach(function(u0){return i(I,u0)}),We&&xr(I,de),ie}function et(I,E,T,z){if(typeof T=="object"&&T!==null&&T.type===X&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Y:e:{for(var ie=T.key,le=E;le!==null;){if(le.key===ie){if(ie=T.type,ie===X){if(le.tag===7){a(I,le.sibling),E=d(le,T.props.children),E.return=I,I=E;break e}}else if(le.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ue&&Hf(ie)===le.type){a(I,le.sibling),E=d(le,T.props),E.ref=vs(I,le,T),E.return=I,I=E;break e}a(I,le);break}else i(I,le);le=le.sibling}T.type===X?(E=Rr(T.props.children,I.mode,z,T.key),E.return=I,I=E):(z=ya(T.type,T.key,T.props,null,I.mode,z),z.ref=vs(I,E,T),z.return=I,I=z)}return v(I);case re:e:{for(le=T.key;E!==null;){if(E.key===le)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){a(I,E.sibling),E=d(E,T.children||[]),E.return=I,I=E;break e}else{a(I,E);break}else i(I,E);E=E.sibling}E=_u(T,I.mode,z),E.return=I,I=E}return v(I);case Ue:return le=T._init,et(I,E,le(T._payload),z)}if(qi(T))return Z(I,E,T,z);if(se(T))return ne(I,E,T,z);Qo(I,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(a(I,E.sibling),E=d(E,T),E.return=I,I=E):(a(I,E),E=vu(T,I.mode,z),E.return=I,I=E),v(I)):a(I,E)}return et}var ui=qf(!0),Gf=qf(!1),Yo=Bn(null),Jo=null,di=null,Tc=null;function kc(){Tc=di=Jo=null}function Pc(t){var i=Yo.current;ze(Yo),t._currentValue=i}function Rc(t,i,a){for(;t!==null;){var c=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),t===a)break;t=t.return}}function hi(t,i){Jo=t,Tc=di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(Pt=!0),t.firstContext=null)}function $t(t){var i=t._currentValue;if(Tc!==t)if(t={context:t,memoizedValue:i,next:null},di===null){if(Jo===null)throw Error(n(308));di=t,Jo.dependencies={lanes:0,firstContext:t}}else di=di.next=t;return i}var Cr=null;function bc(t){Cr===null?Cr=[t]:Cr.push(t)}function Kf(t,i,a,c){var d=i.interleaved;return d===null?(a.next=a,bc(i)):(a.next=d.next,d.next=a),i.interleaved=a,Sn(t,c)}function Sn(t,i){t.lanes|=i;var a=t.alternate;for(a!==null&&(a.lanes|=i),a=t,t=t.return;t!==null;)t.childLanes|=i,a=t.alternate,a!==null&&(a.childLanes|=i),a=t,t=t.return;return a.tag===3?a.stateNode:null}var Hn=!1;function Ac(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function qn(t,i,a){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Ie&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Sn(t,a)}return d=c.interleaved,d===null?(i.next=i,bc(c)):(i.next=d.next,d.next=i),c.interleaved=i,Sn(t,a)}function Xo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=t.pendingLanes,a|=c,i.lanes=a,ql(t,a)}}function Yf(t,i){var a=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?d=f=i:f=f.next=i}else d=f=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}function Zo(t,i,a,c){var d=t.updateQueue;Hn=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var x=S,P=x.next;x.next=null,v===null?f=P:v.next=P,v=x;var M=t.alternate;M!==null&&(M=M.updateQueue,S=M.lastBaseUpdate,S!==v&&(S===null?M.firstBaseUpdate=P:S.next=P,M.lastBaseUpdate=x))}if(f!==null){var $=d.baseState;v=0,M=P=x=null,S=f;do{var L=S.lane,Q=S.eventTime;if((c&L)===L){M!==null&&(M=M.next={eventTime:Q,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Z=t,ne=S;switch(L=i,Q=a,ne.tag){case 1:if(Z=ne.payload,typeof Z=="function"){$=Z.call(Q,$,L);break e}$=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ne.payload,L=typeof Z=="function"?Z.call(Q,$,L):Z,L==null)break e;$=q({},$,L);break e;case 2:Hn=!0}}S.callback!==null&&S.lane!==0&&(t.flags|=64,L=d.effects,L===null?d.effects=[S]:L.push(S))}else Q={eventTime:Q,lane:L,tag:S.tag,payload:S.payload,callback:S.callback,next:null},M===null?(P=M=Q,x=$):M=M.next=Q,v|=L;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;L=S,S=L.next,L.next=null,d.lastBaseUpdate=L,d.shared.pending=null}}while(!0);if(M===null&&(x=$),d.baseState=x,d.firstBaseUpdate=P,d.lastBaseUpdate=M,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else f===null&&(d.shared.lanes=0);Ir|=v,t.lanes=v,t.memoizedState=$}}function Jf(t,i,a){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var c=t[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(n(191,d));d.call(c)}}}var _s={},cn=Bn(_s),ys=Bn(_s),ws=Bn(_s);function Er(t){if(t===_s)throw Error(n(174));return t}function Dc(t,i){switch(Le(ws,i),Le(ys,t),Le(cn,_s),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:jl(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=jl(i,t)}ze(cn),Le(cn,i)}function fi(){ze(cn),ze(ys),ze(ws)}function Xf(t){Er(ws.current);var i=Er(cn.current),a=jl(i,t.type);i!==a&&(Le(ys,t),Le(cn,a))}function jc(t){ys.current===t&&(ze(cn),ze(ys))}var Ve=Bn(0);function ea(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Oc=[];function Lc(){for(var t=0;t<Oc.length;t++)Oc[t]._workInProgressVersionPrimary=null;Oc.length=0}var ta=V.ReactCurrentDispatcher,Mc=V.ReactCurrentBatchConfig,Nr=0,He=null,rt=null,at=null,na=!1,Ss=!1,xs=0,Aw=0;function _t(){throw Error(n(321))}function Fc(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Gt(t[a],i[a]))return!1;return!0}function Uc(t,i,a,c,d,f){if(Nr=f,He=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ta.current=t===null||t.memoizedState===null?Lw:Mw,t=a(c,d),Ss){f=0;do{if(Ss=!1,xs=0,25<=f)throw Error(n(301));f+=1,at=rt=null,i.updateQueue=null,ta.current=Fw,t=a(c,d)}while(Ss)}if(ta.current=sa,i=rt!==null&&rt.next!==null,Nr=0,at=rt=He=null,na=!1,i)throw Error(n(300));return t}function $c(){var t=xs!==0;return xs=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?He.memoizedState=at=t:at=at.next=t,at}function zt(){if(rt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var i=at===null?He.memoizedState:at.next;if(i!==null)at=i,rt=t;else{if(t===null)throw Error(n(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},at===null?He.memoizedState=at=t:at=at.next=t}return at}function Cs(t,i){return typeof i=="function"?i(t):i}function zc(t){var i=zt(),a=i.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=t;var c=rt,d=c.baseQueue,f=a.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}c.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,c=c.baseState;var S=v=null,x=null,P=f;do{var M=P.lane;if((Nr&M)===M)x!==null&&(x=x.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),c=P.hasEagerState?P.eagerState:t(c,P.action);else{var $={lane:M,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};x===null?(S=x=$,v=c):x=x.next=$,He.lanes|=M,Ir|=M}P=P.next}while(P!==null&&P!==f);x===null?v=c:x.next=S,Gt(c,i.memoizedState)||(Pt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=x,a.lastRenderedState=c}if(t=a.interleaved,t!==null){d=t;do f=d.lane,He.lanes|=f,Ir|=f,d=d.next;while(d!==t)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Bc(t){var i=zt(),a=i.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=t;var c=a.dispatch,d=a.pending,f=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do f=t(f,v.action),v=v.next;while(v!==d);Gt(f,i.memoizedState)||(Pt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,c]}function Zf(){}function ep(t,i){var a=He,c=zt(),d=i(),f=!Gt(c.memoizedState,d);if(f&&(c.memoizedState=d,Pt=!0),c=c.queue,Wc(rp.bind(null,a,c,t),[t]),c.getSnapshot!==i||f||at!==null&&at.memoizedState.tag&1){if(a.flags|=2048,Es(9,np.bind(null,a,c,d,i),void 0,null),lt===null)throw Error(n(349));(Nr&30)!==0||tp(a,i,d)}return d}function tp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=He.updateQueue,i===null?(i={lastEffect:null,stores:null},He.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function np(t,i,a,c){i.value=a,i.getSnapshot=c,ip(i)&&sp(t)}function rp(t,i,a){return a(function(){ip(i)&&sp(t)})}function ip(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Gt(t,a)}catch{return!0}}function sp(t){var i=Sn(t,1);i!==null&&Xt(i,t,1,-1)}function op(t){var i=un();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:t},i.queue=t,t=t.dispatch=Ow.bind(null,He,t),[i.memoizedState,t]}function Es(t,i,a,c){return t={tag:t,create:i,destroy:a,deps:c,next:null},i=He.updateQueue,i===null?(i={lastEffect:null,stores:null},He.updateQueue=i,i.lastEffect=t.next=t):(a=i.lastEffect,a===null?i.lastEffect=t.next=t:(c=a.next,a.next=t,t.next=c,i.lastEffect=t)),t}function ap(){return zt().memoizedState}function ra(t,i,a,c){var d=un();He.flags|=t,d.memoizedState=Es(1|i,a,void 0,c===void 0?null:c)}function ia(t,i,a,c){var d=zt();c=c===void 0?null:c;var f=void 0;if(rt!==null){var v=rt.memoizedState;if(f=v.destroy,c!==null&&Fc(c,v.deps)){d.memoizedState=Es(i,a,f,c);return}}He.flags|=t,d.memoizedState=Es(1|i,a,f,c)}function lp(t,i){return ra(8390656,8,t,i)}function Wc(t,i){return ia(2048,8,t,i)}function cp(t,i){return ia(4,2,t,i)}function up(t,i){return ia(4,4,t,i)}function dp(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function hp(t,i,a){return a=a!=null?a.concat([t]):null,ia(4,4,dp.bind(null,i,t),a)}function Vc(){}function fp(t,i){var a=zt();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Fc(i,c[1])?c[0]:(a.memoizedState=[t,i],t)}function pp(t,i){var a=zt();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Fc(i,c[1])?c[0]:(t=t(),a.memoizedState=[t,i],t)}function mp(t,i,a){return(Nr&21)===0?(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=a):(Gt(a,i)||(a=Vh(),He.lanes|=a,Ir|=a,t.baseState=!0),i)}function Dw(t,i){var a=be;be=a!==0&&4>a?a:4,t(!0);var c=Mc.transition;Mc.transition={};try{t(!1),i()}finally{be=a,Mc.transition=c}}function gp(){return zt().memoizedState}function jw(t,i,a){var c=Yn(t);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},vp(t))_p(i,a);else if(a=Kf(t,i,a,c),a!==null){var d=xt();Xt(a,t,c,d),yp(a,i,c)}}function Ow(t,i,a){var c=Yn(t),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(vp(t))_p(i,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,S=f(v,a);if(d.hasEagerState=!0,d.eagerState=S,Gt(S,v)){var x=i.interleaved;x===null?(d.next=d,bc(i)):(d.next=x.next,x.next=d),i.interleaved=d;return}}catch{}finally{}a=Kf(t,i,d,c),a!==null&&(d=xt(),Xt(a,t,c,d),yp(a,i,c))}}function vp(t){var i=t.alternate;return t===He||i!==null&&i===He}function _p(t,i){Ss=na=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function yp(t,i,a){if((a&4194240)!==0){var c=i.lanes;c&=t.pendingLanes,a|=c,i.lanes=a,ql(t,a)}}var sa={readContext:$t,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},Lw={readContext:$t,useCallback:function(t,i){return un().memoizedState=[t,i===void 0?null:i],t},useContext:$t,useEffect:lp,useImperativeHandle:function(t,i,a){return a=a!=null?a.concat([t]):null,ra(4194308,4,dp.bind(null,i,t),a)},useLayoutEffect:function(t,i){return ra(4194308,4,t,i)},useInsertionEffect:function(t,i){return ra(4,2,t,i)},useMemo:function(t,i){var a=un();return i=i===void 0?null:i,t=t(),a.memoizedState=[t,i],t},useReducer:function(t,i,a){var c=un();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},c.queue=t,t=t.dispatch=jw.bind(null,He,t),[c.memoizedState,t]},useRef:function(t){var i=un();return t={current:t},i.memoizedState=t},useState:op,useDebugValue:Vc,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=op(!1),i=t[0];return t=Dw.bind(null,t[1]),un().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,a){var c=He,d=un();if(We){if(a===void 0)throw Error(n(407));a=a()}else{if(a=i(),lt===null)throw Error(n(349));(Nr&30)!==0||tp(c,i,a)}d.memoizedState=a;var f={value:a,getSnapshot:i};return d.queue=f,lp(rp.bind(null,c,f,t),[t]),c.flags|=2048,Es(9,np.bind(null,c,f,a,i),void 0,null),a},useId:function(){var t=un(),i=lt.identifierPrefix;if(We){var a=wn,c=yn;a=(c&~(1<<32-qt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=xs++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Aw++,i=":"+i+"r"+a.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Mw={readContext:$t,useCallback:fp,useContext:$t,useEffect:Wc,useImperativeHandle:hp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:pp,useReducer:zc,useRef:ap,useState:function(){return zc(Cs)},useDebugValue:Vc,useDeferredValue:function(t){var i=zt();return mp(i,rt.memoizedState,t)},useTransition:function(){var t=zc(Cs)[0],i=zt().memoizedState;return[t,i]},useMutableSource:Zf,useSyncExternalStore:ep,useId:gp,unstable_isNewReconciler:!1},Fw={readContext:$t,useCallback:fp,useContext:$t,useEffect:Wc,useImperativeHandle:hp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:pp,useReducer:Bc,useRef:ap,useState:function(){return Bc(Cs)},useDebugValue:Vc,useDeferredValue:function(t){var i=zt();return rt===null?i.memoizedState=t:mp(i,rt.memoizedState,t)},useTransition:function(){var t=Bc(Cs)[0],i=zt().memoizedState;return[t,i]},useMutableSource:Zf,useSyncExternalStore:ep,useId:gp,unstable_isNewReconciler:!1};function Qt(t,i){if(t&&t.defaultProps){i=q({},i),t=t.defaultProps;for(var a in t)i[a]===void 0&&(i[a]=t[a]);return i}return i}function Hc(t,i,a,c){i=t.memoizedState,a=a(c,i),a=a==null?i:q({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var oa={isMounted:function(t){return(t=t._reactInternals)?_r(t)===t:!1},enqueueSetState:function(t,i,a){t=t._reactInternals;var c=xt(),d=Yn(t),f=xn(c,d);f.payload=i,a!=null&&(f.callback=a),i=qn(t,f,d),i!==null&&(Xt(i,t,d,c),Xo(i,t,d))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var c=xt(),d=Yn(t),f=xn(c,d);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=qn(t,f,d),i!==null&&(Xt(i,t,d,c),Xo(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=xt(),c=Yn(t),d=xn(a,c);d.tag=2,i!=null&&(d.callback=i),i=qn(t,d,c),i!==null&&(Xt(i,t,c,a),Xo(i,t,c))}};function wp(t,i,a,c,d,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,f,v):i.prototype&&i.prototype.isPureReactComponent?!us(a,c)||!us(d,f):!0}function Sp(t,i,a){var c=!1,d=Wn,f=i.contextType;return typeof f=="object"&&f!==null?f=$t(f):(d=kt(i)?wr:vt.current,c=i.contextTypes,f=(c=c!=null)?oi(t,d):Wn),i=new i(a,f),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=oa,t.stateNode=i,i._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=f),i}function xp(t,i,a,c){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==t&&oa.enqueueReplaceState(i,i.state,null)}function qc(t,i,a,c){var d=t.stateNode;d.props=a,d.state=t.memoizedState,d.refs={},Ac(t);var f=i.contextType;typeof f=="object"&&f!==null?d.context=$t(f):(f=kt(i)?wr:vt.current,d.context=oi(t,f)),d.state=t.memoizedState,f=i.getDerivedStateFromProps,typeof f=="function"&&(Hc(t,i,f,a),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&oa.enqueueReplaceState(d,d.state,null),Zo(t,a,d,c),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function pi(t,i){try{var a="",c=i;do a+=te(c),c=c.return;while(c);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:t,source:i,stack:d,digest:null}}function Gc(t,i,a){return{value:t,source:null,stack:a??null,digest:i??null}}function Kc(t,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Uw=typeof WeakMap=="function"?WeakMap:Map;function Cp(t,i,a){a=xn(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){fa||(fa=!0,cu=c),Kc(t,i)},a}function Ep(t,i,a){a=xn(-1,a),a.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Kc(t,i)}}var f=t.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){Kc(t,i),typeof c!="function"&&(Kn===null?Kn=new Set([this]):Kn.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function Np(t,i,a){var c=t.pingCache;if(c===null){c=t.pingCache=new Uw;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),t=Zw.bind(null,t,i,a),i.then(t,t))}function Ip(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function Tp(t,i,a,c,d){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=xn(-1,1),i.tag=2,qn(a,i,1))),a.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var $w=V.ReactCurrentOwner,Pt=!1;function St(t,i,a,c){i.child=t===null?Gf(i,null,a,c):ui(i,t.child,a,c)}function kp(t,i,a,c,d){a=a.render;var f=i.ref;return hi(i,d),c=Uc(t,i,a,c,f,d),a=$c(),t!==null&&!Pt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,Cn(t,i,d)):(We&&a&&xc(i),i.flags|=1,St(t,i,c,d),i.child)}function Pp(t,i,a,c,d){if(t===null){var f=a.type;return typeof f=="function"&&!gu(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=f,Rp(t,i,f,c,d)):(t=ya(a.type,null,c,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,(t.lanes&d)===0){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:us,a(v,c)&&t.ref===i.ref)return Cn(t,i,d)}return i.flags|=1,t=Xn(f,c),t.ref=i.ref,t.return=i,i.child=t}function Rp(t,i,a,c,d){if(t!==null){var f=t.memoizedProps;if(us(f,c)&&t.ref===i.ref)if(Pt=!1,i.pendingProps=c=f,(t.lanes&d)!==0)(t.flags&131072)!==0&&(Pt=!0);else return i.lanes=t.lanes,Cn(t,i,d)}return Qc(t,i,a,c,d)}function bp(t,i,a){var c=i.pendingProps,d=c.children,f=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(gi,Mt),Mt|=a;else{if((a&1073741824)===0)return t=f!==null?f.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,Le(gi,Mt),Mt|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Le(gi,Mt),Mt|=c}else f!==null?(c=f.baseLanes|a,i.memoizedState=null):c=a,Le(gi,Mt),Mt|=c;return St(t,i,d,a),i.child}function Ap(t,i){var a=i.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Qc(t,i,a,c,d){var f=kt(a)?wr:vt.current;return f=oi(i,f),hi(i,d),a=Uc(t,i,a,c,f,d),c=$c(),t!==null&&!Pt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,Cn(t,i,d)):(We&&c&&xc(i),i.flags|=1,St(t,i,a,d),i.child)}function Dp(t,i,a,c,d){if(kt(a)){var f=!0;Vo(i)}else f=!1;if(hi(i,d),i.stateNode===null)la(t,i),Sp(i,a,c),qc(i,a,c,d),c=!0;else if(t===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var x=v.context,P=a.contextType;typeof P=="object"&&P!==null?P=$t(P):(P=kt(a)?wr:vt.current,P=oi(i,P));var M=a.getDerivedStateFromProps,$=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function";$||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==c||x!==P)&&xp(i,v,c,P),Hn=!1;var L=i.memoizedState;v.state=L,Zo(i,c,v,d),x=i.memoizedState,S!==c||L!==x||Tt.current||Hn?(typeof M=="function"&&(Hc(i,a,M,c),x=i.memoizedState),(S=Hn||wp(i,a,S,c,L,x,P))?($||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=x),v.props=c,v.state=x,v.context=P,c=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,Qf(t,i),S=i.memoizedProps,P=i.type===i.elementType?S:Qt(i.type,S),v.props=P,$=i.pendingProps,L=v.context,x=a.contextType,typeof x=="object"&&x!==null?x=$t(x):(x=kt(a)?wr:vt.current,x=oi(i,x));var Q=a.getDerivedStateFromProps;(M=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==$||L!==x)&&xp(i,v,c,x),Hn=!1,L=i.memoizedState,v.state=L,Zo(i,c,v,d);var Z=i.memoizedState;S!==$||L!==Z||Tt.current||Hn?(typeof Q=="function"&&(Hc(i,a,Q,c),Z=i.memoizedState),(P=Hn||wp(i,a,P,c,L,Z,x)||!1)?(M||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,x),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,x)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Z),v.props=c,v.state=Z,v.context=x,c=P):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(i.flags|=1024),c=!1)}return Yc(t,i,a,c,f,d)}function Yc(t,i,a,c,d,f){Ap(t,i);var v=(i.flags&128)!==0;if(!c&&!v)return d&&Ff(i,a,!1),Cn(t,i,f);c=i.stateNode,$w.current=i;var S=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,t!==null&&v?(i.child=ui(i,t.child,null,f),i.child=ui(i,null,S,f)):St(t,i,S,f),i.memoizedState=c.state,d&&Ff(i,a,!0),i.child}function jp(t){var i=t.stateNode;i.pendingContext?Lf(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Lf(t,i.context,!1),Dc(t,i.containerInfo)}function Op(t,i,a,c,d){return ci(),Ic(d),i.flags|=256,St(t,i,a,c),i.child}var Jc={dehydrated:null,treeContext:null,retryLane:0};function Xc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lp(t,i,a){var c=i.pendingProps,d=Ve.current,f=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=t!==null&&t.memoizedState===null?!1:(d&2)!==0),S?(f=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),Le(Ve,d&1),t===null)return Nc(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,t=c.fallback,f?(c=i.mode,f=i.child,v={mode:"hidden",children:v},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=wa(v,c,0,null),t=Rr(t,c,a,null),f.return=i,t.return=i,f.sibling=t,i.child=f,i.child.memoizedState=Xc(a),i.memoizedState=Jc,t):Zc(i,v));if(d=t.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return zw(t,i,v,c,S,d,a);if(f){f=c.fallback,v=i.mode,d=t.child,S=d.sibling;var x={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=x,i.deletions=null):(c=Xn(d,x),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?f=Xn(S,f):(f=Rr(f,v,a,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,v=t.child.memoizedState,v=v===null?Xc(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=t.childLanes&~a,i.memoizedState=Jc,c}return f=t.child,t=f.sibling,c=Xn(f,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,t!==null&&(a=i.deletions,a===null?(i.deletions=[t],i.flags|=16):a.push(t)),i.child=c,i.memoizedState=null,c}function Zc(t,i){return i=wa({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function aa(t,i,a,c){return c!==null&&Ic(c),ui(i,t.child,null,a),t=Zc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function zw(t,i,a,c,d,f,v){if(a)return i.flags&256?(i.flags&=-257,c=Gc(Error(n(422))),aa(t,i,v,c)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(f=c.fallback,d=i.mode,c=wa({mode:"visible",children:c.children},d,0,null),f=Rr(f,d,v,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,(i.mode&1)!==0&&ui(i,t.child,null,v),i.child.memoizedState=Xc(v),i.memoizedState=Jc,f);if((i.mode&1)===0)return aa(t,i,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,f=Error(n(419)),c=Gc(f,c,void 0),aa(t,i,v,c)}if(S=(v&t.childLanes)!==0,Pt||S){if(c=lt,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Sn(t,d),Xt(c,t,d,-1))}return mu(),c=Gc(Error(n(421))),aa(t,i,v,c)}return d.data==="$?"?(i.flags|=128,i.child=t.child,i=e0.bind(null,t),d._reactRetry=i,null):(t=f.treeContext,Lt=zn(d.nextSibling),Ot=i,We=!0,Kt=null,t!==null&&(Ft[Ut++]=yn,Ft[Ut++]=wn,Ft[Ut++]=Sr,yn=t.id,wn=t.overflow,Sr=i),i=Zc(i,c.children),i.flags|=4096,i)}function Mp(t,i,a){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i),Rc(t.return,i,a)}function eu(t,i,a,c,d){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=d)}function Fp(t,i,a){var c=i.pendingProps,d=c.revealOrder,f=c.tail;if(St(t,i,c.children,a),c=Ve.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mp(t,a,i);else if(t.tag===19)Mp(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Le(Ve,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)t=a.alternate,t!==null&&ea(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),eu(i,!1,d,a,f);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&ea(t)===null){i.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}eu(i,!0,a,null,f);break;case"together":eu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function la(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Cn(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Ir|=i.lanes,(a&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(n(153));if(i.child!==null){for(t=i.child,a=Xn(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Xn(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Bw(t,i,a){switch(i.tag){case 3:jp(i),ci();break;case 5:Xf(i);break;case 1:kt(i.type)&&Vo(i);break;case 4:Dc(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Le(Yo,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Le(Ve,Ve.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Lp(t,i,a):(Le(Ve,Ve.current&1),t=Cn(t,i,a),t!==null?t.sibling:null);Le(Ve,Ve.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(t.flags&128)!==0){if(c)return Fp(t,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Le(Ve,Ve.current),c)break;return null;case 22:case 23:return i.lanes=0,bp(t,i,a)}return Cn(t,i,a)}var Up,tu,$p,zp;Up=function(t,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},tu=function(){},$p=function(t,i,a,c){var d=t.memoizedProps;if(d!==c){t=i.stateNode,Er(cn.current);var f=null;switch(a){case"input":d=Xe(t,d),c=Xe(t,c),f=[];break;case"select":d=q({},d,{value:void 0}),c=q({},c,{value:void 0}),f=[];break;case"textarea":d=Dl(t,d),c=Dl(t,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=zo)}Ol(a,c);var v;a=null;for(P in d)if(!c.hasOwnProperty(P)&&d.hasOwnProperty(P)&&d[P]!=null)if(P==="style"){var S=d[P];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(o.hasOwnProperty(P)?f||(f=[]):(f=f||[]).push(P,null));for(P in c){var x=c[P];if(S=d!=null?d[P]:void 0,c.hasOwnProperty(P)&&x!==S&&(x!=null||S!=null))if(P==="style")if(S){for(v in S)!S.hasOwnProperty(v)||x&&x.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in x)x.hasOwnProperty(v)&&S[v]!==x[v]&&(a||(a={}),a[v]=x[v])}else a||(f||(f=[]),f.push(P,a)),a=x;else P==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,S=S?S.__html:void 0,x!=null&&S!==x&&(f=f||[]).push(P,x)):P==="children"?typeof x!="string"&&typeof x!="number"||(f=f||[]).push(P,""+x):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(o.hasOwnProperty(P)?(x!=null&&P==="onScroll"&&$e("scroll",t),f||S===x||(f=[])):(f=f||[]).push(P,x))}a&&(f=f||[]).push("style",a);var P=f;(i.updateQueue=P)&&(i.flags|=4)}},zp=function(t,i,a,c){a!==c&&(i.flags|=4)};function Ns(t,i){if(!We)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function yt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,c=0;if(i)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=c,t.childLanes=a,i}function Ww(t,i,a){var c=i.pendingProps;switch(Cc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(i),null;case 1:return kt(i.type)&&Wo(),yt(i),null;case 3:return c=i.stateNode,fi(),ze(Tt),ze(vt),Lc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(Ko(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Kt!==null&&(hu(Kt),Kt=null))),tu(t,i),yt(i),null;case 5:jc(i);var d=Er(ws.current);if(a=i.type,t!==null&&i.stateNode!=null)$p(t,i,a,c,d),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(n(166));return yt(i),null}if(t=Er(cn.current),Ko(i)){c=i.stateNode,a=i.type;var f=i.memoizedProps;switch(c[ln]=i,c[ms]=f,t=(i.mode&1)!==0,a){case"dialog":$e("cancel",c),$e("close",c);break;case"iframe":case"object":case"embed":$e("load",c);break;case"video":case"audio":for(d=0;d<hs.length;d++)$e(hs[d],c);break;case"source":$e("error",c);break;case"img":case"image":case"link":$e("error",c),$e("load",c);break;case"details":$e("toggle",c);break;case"input":nt(c,f),$e("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},$e("invalid",c);break;case"textarea":Ch(c,f),$e("invalid",c)}Ol(a,f),d=null;for(var v in f)if(f.hasOwnProperty(v)){var S=f[v];v==="children"?typeof S=="string"?c.textContent!==S&&(f.suppressHydrationWarning!==!0&&$o(c.textContent,S,t),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(f.suppressHydrationWarning!==!0&&$o(c.textContent,S,t),d=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&$e("scroll",c)}switch(a){case"input":Oe(c),vr(c,f,!0);break;case"textarea":Oe(c),Nh(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=zo)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ih(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=v.createElement(a,{is:c.is}):(t=v.createElement(a),a==="select"&&(v=t,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):t=v.createElementNS(t,a),t[ln]=i,t[ms]=c,Up(t,i,!1,!1),i.stateNode=t;e:{switch(v=Ll(a,c),a){case"dialog":$e("cancel",t),$e("close",t),d=c;break;case"iframe":case"object":case"embed":$e("load",t),d=c;break;case"video":case"audio":for(d=0;d<hs.length;d++)$e(hs[d],t);d=c;break;case"source":$e("error",t),d=c;break;case"img":case"image":case"link":$e("error",t),$e("load",t),d=c;break;case"details":$e("toggle",t),d=c;break;case"input":nt(t,c),d=Xe(t,c),$e("invalid",t);break;case"option":d=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},d=q({},c,{value:void 0}),$e("invalid",t);break;case"textarea":Ch(t,c),d=Dl(t,c),$e("invalid",t);break;default:d=c}Ol(a,d),S=d;for(f in S)if(S.hasOwnProperty(f)){var x=S[f];f==="style"?Ph(t,x):f==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Th(t,x)):f==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&Gi(t,x):typeof x=="number"&&Gi(t,""+x):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?x!=null&&f==="onScroll"&&$e("scroll",t):x!=null&&G(t,f,x,v))}switch(a){case"input":Oe(t),vr(t,c,!1);break;case"textarea":Oe(t),Nh(t);break;case"option":c.value!=null&&t.setAttribute("value",""+ae(c.value));break;case"select":t.multiple=!!c.multiple,f=c.value,f!=null?Kr(t,!!c.multiple,f,!1):c.defaultValue!=null&&Kr(t,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=zo)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return yt(i),null;case 6:if(t&&i.stateNode!=null)zp(t,i,t.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(n(166));if(a=Er(ws.current),Er(cn.current),Ko(i)){if(c=i.stateNode,a=i.memoizedProps,c[ln]=i,(f=c.nodeValue!==a)&&(t=Ot,t!==null))switch(t.tag){case 3:$o(c.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$o(c.nodeValue,a,(t.mode&1)!==0)}f&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[ln]=i,i.stateNode=c}return yt(i),null;case 13:if(ze(Ve),c=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&Lt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Vf(),ci(),i.flags|=98560,f=!1;else if(f=Ko(i),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(n(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[ln]=i}else ci(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yt(i),f=!1}else Kt!==null&&(hu(Kt),Kt=null),f=!0;if(!f)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(Ve.current&1)!==0?it===0&&(it=3):mu())),i.updateQueue!==null&&(i.flags|=4),yt(i),null);case 4:return fi(),tu(t,i),t===null&&fs(i.stateNode.containerInfo),yt(i),null;case 10:return Pc(i.type._context),yt(i),null;case 17:return kt(i.type)&&Wo(),yt(i),null;case 19:if(ze(Ve),f=i.memoizedState,f===null)return yt(i),null;if(c=(i.flags&128)!==0,v=f.rendering,v===null)if(c)Ns(f,!1);else{if(it!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=ea(t),v!==null){for(i.flags|=128,Ns(f,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)f=a,t=c,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=t,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,t=v.dependencies,f.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return Le(Ve,Ve.current&1|2),i.child}t=t.sibling}f.tail!==null&&Ze()>vi&&(i.flags|=128,c=!0,Ns(f,!1),i.lanes=4194304)}else{if(!c)if(t=ea(v),t!==null){if(i.flags|=128,c=!0,a=t.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ns(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!We)return yt(i),null}else 2*Ze()-f.renderingStartTime>vi&&a!==1073741824&&(i.flags|=128,c=!0,Ns(f,!1),i.lanes=4194304);f.isBackwards?(v.sibling=i.child,i.child=v):(a=f.last,a!==null?a.sibling=v:i.child=v,f.last=v)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ze(),i.sibling=null,a=Ve.current,Le(Ve,c?a&1|2:a&1),i):(yt(i),null);case 22:case 23:return pu(),c=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(Mt&1073741824)!==0&&(yt(i),i.subtreeFlags&6&&(i.flags|=8192)):yt(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function Vw(t,i){switch(Cc(i),i.tag){case 1:return kt(i.type)&&Wo(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return fi(),ze(Tt),ze(vt),Lc(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return jc(i),null;case 13:if(ze(Ve),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ci()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ze(Ve),null;case 4:return fi(),null;case 10:return Pc(i.type._context),null;case 22:case 23:return pu(),null;case 24:return null;default:return null}}var ca=!1,wt=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,J=null;function mi(t,i){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Ke(t,i,c)}else a.current=null}function nu(t,i,a){try{a()}catch(c){Ke(t,i,c)}}var Bp=!1;function qw(t,i){if(pc=Po,t=wf(),oc(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,S=-1,x=-1,P=0,M=0,$=t,L=null;t:for(;;){for(var Q;$!==a||d!==0&&$.nodeType!==3||(S=v+d),$!==f||c!==0&&$.nodeType!==3||(x=v+c),$.nodeType===3&&(v+=$.nodeValue.length),(Q=$.firstChild)!==null;)L=$,$=Q;for(;;){if($===t)break t;if(L===a&&++P===d&&(S=v),L===f&&++M===c&&(x=v),(Q=$.nextSibling)!==null)break;$=L,L=$.parentNode}$=Q}a=S===-1||x===-1?null:{start:S,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(mc={focusedElem:t,selectionRange:a},Po=!1,J=i;J!==null;)if(i=J,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,J=t;else for(;J!==null;){i=J;try{var Z=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var ne=Z.memoizedProps,et=Z.memoizedState,I=i.stateNode,E=I.getSnapshotBeforeUpdate(i.elementType===i.type?ne:Qt(i.type,ne),et);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=i.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(z){Ke(i,i.return,z)}if(t=i.sibling,t!==null){t.return=i.return,J=t;break}J=i.return}return Z=Bp,Bp=!1,Z}function Is(t,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&t)===t){var f=d.destroy;d.destroy=void 0,f!==void 0&&nu(i,a,f)}d=d.next}while(d!==c)}}function ua(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function ru(t){var i=t.ref;if(i!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof i=="function"?i(t):i.current=t}}function Wp(t){var i=t.alternate;i!==null&&(t.alternate=null,Wp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[ln],delete i[ms],delete i[yc],delete i[kw],delete i[Pw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vp(t){return t.tag===5||t.tag===3||t.tag===4}function Hp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iu(t,i,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(t,i):a.insertBefore(t,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(t,a)):(i=a,i.appendChild(t)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=zo));else if(c!==4&&(t=t.child,t!==null))for(iu(t,i,a),t=t.sibling;t!==null;)iu(t,i,a),t=t.sibling}function su(t,i,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(su(t,i,a),t=t.sibling;t!==null;)su(t,i,a),t=t.sibling}var ft=null,Yt=!1;function Gn(t,i,a){for(a=a.child;a!==null;)qp(t,i,a),a=a.sibling}function qp(t,i,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Co,a)}catch{}switch(a.tag){case 5:wt||mi(a,i);case 6:var c=ft,d=Yt;ft=null,Gn(t,i,a),ft=c,Yt=d,ft!==null&&(Yt?(t=ft,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):ft.removeChild(a.stateNode));break;case 18:ft!==null&&(Yt?(t=ft,a=a.stateNode,t.nodeType===8?_c(t.parentNode,a):t.nodeType===1&&_c(t,a),is(t)):_c(ft,a.stateNode));break;case 4:c=ft,d=Yt,ft=a.stateNode.containerInfo,Yt=!0,Gn(t,i,a),ft=c,Yt=d;break;case 0:case 11:case 14:case 15:if(!wt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&nu(a,i,v),d=d.next}while(d!==c)}Gn(t,i,a);break;case 1:if(!wt&&(mi(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){Ke(a,i,S)}Gn(t,i,a);break;case 21:Gn(t,i,a);break;case 22:a.mode&1?(wt=(c=wt)||a.memoizedState!==null,Gn(t,i,a),wt=c):Gn(t,i,a);break;default:Gn(t,i,a)}}function Gp(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new Hw),i.forEach(function(c){var d=t0.bind(null,t,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Jt(t,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var f=t,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:ft=S.stateNode,Yt=!1;break e;case 3:ft=S.stateNode.containerInfo,Yt=!0;break e;case 4:ft=S.stateNode.containerInfo,Yt=!0;break e}S=S.return}if(ft===null)throw Error(n(160));qp(f,v,d),ft=null,Yt=!1;var x=d.alternate;x!==null&&(x.return=null),d.return=null}catch(P){Ke(d,i,P)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Kp(i,t),i=i.sibling}function Kp(t,i){var a=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(i,t),dn(t),c&4){try{Is(3,t,t.return),ua(3,t)}catch(ne){Ke(t,t.return,ne)}try{Is(5,t,t.return)}catch(ne){Ke(t,t.return,ne)}}break;case 1:Jt(i,t),dn(t),c&512&&a!==null&&mi(a,a.return);break;case 5:if(Jt(i,t),dn(t),c&512&&a!==null&&mi(a,a.return),t.flags&32){var d=t.stateNode;try{Gi(d,"")}catch(ne){Ke(t,t.return,ne)}}if(c&4&&(d=t.stateNode,d!=null)){var f=t.memoizedProps,v=a!==null?a.memoizedProps:f,S=t.type,x=t.updateQueue;if(t.updateQueue=null,x!==null)try{S==="input"&&f.type==="radio"&&f.name!=null&&gn(d,f),Ll(S,v);var P=Ll(S,f);for(v=0;v<x.length;v+=2){var M=x[v],$=x[v+1];M==="style"?Ph(d,$):M==="dangerouslySetInnerHTML"?Th(d,$):M==="children"?Gi(d,$):G(d,M,$,P)}switch(S){case"input":Be(d,f);break;case"textarea":Eh(d,f);break;case"select":var L=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var Q=f.value;Q!=null?Kr(d,!!f.multiple,Q,!1):L!==!!f.multiple&&(f.defaultValue!=null?Kr(d,!!f.multiple,f.defaultValue,!0):Kr(d,!!f.multiple,f.multiple?[]:"",!1))}d[ms]=f}catch(ne){Ke(t,t.return,ne)}}break;case 6:if(Jt(i,t),dn(t),c&4){if(t.stateNode===null)throw Error(n(162));d=t.stateNode,f=t.memoizedProps;try{d.nodeValue=f}catch(ne){Ke(t,t.return,ne)}}break;case 3:if(Jt(i,t),dn(t),c&4&&a!==null&&a.memoizedState.isDehydrated)try{is(i.containerInfo)}catch(ne){Ke(t,t.return,ne)}break;case 4:Jt(i,t),dn(t);break;case 13:Jt(i,t),dn(t),d=t.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(lu=Ze())),c&4&&Gp(t);break;case 22:if(M=a!==null&&a.memoizedState!==null,t.mode&1?(wt=(P=wt)||M,Jt(i,t),wt=P):Jt(i,t),dn(t),c&8192){if(P=t.memoizedState!==null,(t.stateNode.isHidden=P)&&!M&&(t.mode&1)!==0)for(J=t,M=t.child;M!==null;){for($=J=M;J!==null;){switch(L=J,Q=L.child,L.tag){case 0:case 11:case 14:case 15:Is(4,L,L.return);break;case 1:mi(L,L.return);var Z=L.stateNode;if(typeof Z.componentWillUnmount=="function"){c=L,a=L.return;try{i=c,Z.props=i.memoizedProps,Z.state=i.memoizedState,Z.componentWillUnmount()}catch(ne){Ke(c,a,ne)}}break;case 5:mi(L,L.return);break;case 22:if(L.memoizedState!==null){Jp($);continue}}Q!==null?(Q.return=L,J=Q):Jp($)}M=M.sibling}e:for(M=null,$=t;;){if($.tag===5){if(M===null){M=$;try{d=$.stateNode,P?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(S=$.stateNode,x=$.memoizedProps.style,v=x!=null&&x.hasOwnProperty("display")?x.display:null,S.style.display=kh("display",v))}catch(ne){Ke(t,t.return,ne)}}}else if($.tag===6){if(M===null)try{$.stateNode.nodeValue=P?"":$.memoizedProps}catch(ne){Ke(t,t.return,ne)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===t)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===t)break e;for(;$.sibling===null;){if($.return===null||$.return===t)break e;M===$&&(M=null),$=$.return}M===$&&(M=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:Jt(i,t),dn(t),c&4&&Gp(t);break;case 21:break;default:Jt(i,t),dn(t)}}function dn(t){var i=t.flags;if(i&2){try{e:{for(var a=t.return;a!==null;){if(Vp(a)){var c=a;break e}a=a.return}throw Error(n(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Gi(d,""),c.flags&=-33);var f=Hp(t);su(t,f,d);break;case 3:case 4:var v=c.stateNode.containerInfo,S=Hp(t);iu(t,S,v);break;default:throw Error(n(161))}}catch(x){Ke(t,t.return,x)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Gw(t,i,a){J=t,Qp(t)}function Qp(t,i,a){for(var c=(t.mode&1)!==0;J!==null;){var d=J,f=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||ca;if(!v){var S=d.alternate,x=S!==null&&S.memoizedState!==null||wt;S=ca;var P=wt;if(ca=v,(wt=x)&&!P)for(J=d;J!==null;)v=J,x=v.child,v.tag===22&&v.memoizedState!==null?Xp(d):x!==null?(x.return=v,J=x):Xp(d);for(;f!==null;)J=f,Qp(f),f=f.sibling;J=d,ca=S,wt=P}Yp(t)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,J=f):Yp(t)}}function Yp(t){for(;J!==null;){var i=J;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:wt||ua(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!wt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Qt(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=i.updateQueue;f!==null&&Jf(i,f,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Jf(i,v,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var x=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var P=i.alternate;if(P!==null){var M=P.memoizedState;if(M!==null){var $=M.dehydrated;$!==null&&is($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}wt||i.flags&512&&ru(i)}catch(L){Ke(i,i.return,L)}}if(i===t){J=null;break}if(a=i.sibling,a!==null){a.return=i.return,J=a;break}J=i.return}}function Jp(t){for(;J!==null;){var i=J;if(i===t){J=null;break}var a=i.sibling;if(a!==null){a.return=i.return,J=a;break}J=i.return}}function Xp(t){for(;J!==null;){var i=J;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ua(4,i)}catch(x){Ke(i,a,x)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(x){Ke(i,d,x)}}var f=i.return;try{ru(i)}catch(x){Ke(i,f,x)}break;case 5:var v=i.return;try{ru(i)}catch(x){Ke(i,v,x)}}}catch(x){Ke(i,i.return,x)}if(i===t){J=null;break}var S=i.sibling;if(S!==null){S.return=i.return,J=S;break}J=i.return}}var Kw=Math.ceil,da=V.ReactCurrentDispatcher,ou=V.ReactCurrentOwner,Bt=V.ReactCurrentBatchConfig,Ie=0,lt=null,tt=null,pt=0,Mt=0,gi=Bn(0),it=0,Ts=null,Ir=0,ha=0,au=0,ks=null,Rt=null,lu=0,vi=1/0,En=null,fa=!1,cu=null,Kn=null,pa=!1,Qn=null,ma=0,Ps=0,uu=null,ga=-1,va=0;function xt(){return(Ie&6)!==0?Ze():ga!==-1?ga:ga=Ze()}function Yn(t){return(t.mode&1)===0?1:(Ie&2)!==0&&pt!==0?pt&-pt:bw.transition!==null?(va===0&&(va=Vh()),va):(t=be,t!==0||(t=window.event,t=t===void 0?16:Zh(t.type)),t)}function Xt(t,i,a,c){if(50<Ps)throw Ps=0,uu=null,Error(n(185));Zi(t,a,c),((Ie&2)===0||t!==lt)&&(t===lt&&((Ie&2)===0&&(ha|=a),it===4&&Jn(t,pt)),bt(t,c),a===1&&Ie===0&&(i.mode&1)===0&&(vi=Ze()+500,Ho&&Vn()))}function bt(t,i){var a=t.callbackNode;by(t,i);var c=Io(t,t===lt?pt:0);if(c===0)a!==null&&zh(a),t.callbackNode=null,t.callbackPriority=0;else if(i=c&-c,t.callbackPriority!==i){if(a!=null&&zh(a),i===1)t.tag===0?Rw(em.bind(null,t)):Uf(em.bind(null,t)),Iw(function(){(Ie&6)===0&&Vn()}),a=null;else{switch(Hh(c)){case 1:a=Wl;break;case 4:a=Bh;break;case 16:a=xo;break;case 536870912:a=Wh;break;default:a=xo}a=lm(a,Zp.bind(null,t))}t.callbackPriority=i,t.callbackNode=a}}function Zp(t,i){if(ga=-1,va=0,(Ie&6)!==0)throw Error(n(327));var a=t.callbackNode;if(_i()&&t.callbackNode!==a)return null;var c=Io(t,t===lt?pt:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||i)i=_a(t,c);else{i=c;var d=Ie;Ie|=2;var f=nm();(lt!==t||pt!==i)&&(En=null,vi=Ze()+500,kr(t,i));do try{Jw();break}catch(S){tm(t,S)}while(!0);kc(),da.current=f,Ie=d,tt!==null?i=0:(lt=null,pt=0,i=it)}if(i!==0){if(i===2&&(d=Vl(t),d!==0&&(c=d,i=du(t,d))),i===1)throw a=Ts,kr(t,0),Jn(t,c),bt(t,Ze()),a;if(i===6)Jn(t,c);else{if(d=t.current.alternate,(c&30)===0&&!Qw(d)&&(i=_a(t,c),i===2&&(f=Vl(t),f!==0&&(c=f,i=du(t,f))),i===1))throw a=Ts,kr(t,0),Jn(t,c),bt(t,Ze()),a;switch(t.finishedWork=d,t.finishedLanes=c,i){case 0:case 1:throw Error(n(345));case 2:Pr(t,Rt,En);break;case 3:if(Jn(t,c),(c&130023424)===c&&(i=lu+500-Ze(),10<i)){if(Io(t,0)!==0)break;if(d=t.suspendedLanes,(d&c)!==c){xt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=vc(Pr.bind(null,t,Rt,En),i);break}Pr(t,Rt,En);break;case 4:if(Jn(t,c),(c&4194240)===c)break;for(i=t.eventTimes,d=-1;0<c;){var v=31-qt(c);f=1<<v,v=i[v],v>d&&(d=v),c&=~f}if(c=d,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Kw(c/1960))-c,10<c){t.timeoutHandle=vc(Pr.bind(null,t,Rt,En),c);break}Pr(t,Rt,En);break;case 5:Pr(t,Rt,En);break;default:throw Error(n(329))}}}return bt(t,Ze()),t.callbackNode===a?Zp.bind(null,t):null}function du(t,i){var a=ks;return t.current.memoizedState.isDehydrated&&(kr(t,i).flags|=256),t=_a(t,i),t!==2&&(i=Rt,Rt=a,i!==null&&hu(i)),t}function hu(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function Qw(t){for(var i=t;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],f=d.getSnapshot;d=d.value;try{if(!Gt(f(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Jn(t,i){for(i&=~au,i&=~ha,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var a=31-qt(i),c=1<<a;t[a]=-1,i&=~c}}function em(t){if((Ie&6)!==0)throw Error(n(327));_i();var i=Io(t,0);if((i&1)===0)return bt(t,Ze()),null;var a=_a(t,i);if(t.tag!==0&&a===2){var c=Vl(t);c!==0&&(i=c,a=du(t,c))}if(a===1)throw a=Ts,kr(t,0),Jn(t,i),bt(t,Ze()),a;if(a===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,Pr(t,Rt,En),bt(t,Ze()),null}function fu(t,i){var a=Ie;Ie|=1;try{return t(i)}finally{Ie=a,Ie===0&&(vi=Ze()+500,Ho&&Vn())}}function Tr(t){Qn!==null&&Qn.tag===0&&(Ie&6)===0&&_i();var i=Ie;Ie|=1;var a=Bt.transition,c=be;try{if(Bt.transition=null,be=1,t)return t()}finally{be=c,Bt.transition=a,Ie=i,(Ie&6)===0&&Vn()}}function pu(){Mt=gi.current,ze(gi)}function kr(t,i){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,Nw(a)),tt!==null)for(a=tt.return;a!==null;){var c=a;switch(Cc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Wo();break;case 3:fi(),ze(Tt),ze(vt),Lc();break;case 5:jc(c);break;case 4:fi();break;case 13:ze(Ve);break;case 19:ze(Ve);break;case 10:Pc(c.type._context);break;case 22:case 23:pu()}a=a.return}if(lt=t,tt=t=Xn(t.current,null),pt=Mt=i,it=0,Ts=null,au=ha=Ir=0,Rt=ks=null,Cr!==null){for(i=0;i<Cr.length;i++)if(a=Cr[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,f=a.pending;if(f!==null){var v=f.next;f.next=d,c.next=v}a.pending=c}Cr=null}return t}function tm(t,i){do{var a=tt;try{if(kc(),ta.current=sa,na){for(var c=He.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}na=!1}if(Nr=0,at=rt=He=null,Ss=!1,xs=0,ou.current=null,a===null||a.return===null){it=1,Ts=i,tt=null;break}e:{var f=t,v=a.return,S=a,x=i;if(i=pt,S.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var P=x,M=S,$=M.tag;if((M.mode&1)===0&&($===0||$===11||$===15)){var L=M.alternate;L?(M.updateQueue=L.updateQueue,M.memoizedState=L.memoizedState,M.lanes=L.lanes):(M.updateQueue=null,M.memoizedState=null)}var Q=Ip(v);if(Q!==null){Q.flags&=-257,Tp(Q,v,S,f,i),Q.mode&1&&Np(f,P,i),i=Q,x=P;var Z=i.updateQueue;if(Z===null){var ne=new Set;ne.add(x),i.updateQueue=ne}else Z.add(x);break e}else{if((i&1)===0){Np(f,P,i),mu();break e}x=Error(n(426))}}else if(We&&S.mode&1){var et=Ip(v);if(et!==null){(et.flags&65536)===0&&(et.flags|=256),Tp(et,v,S,f,i),Ic(pi(x,S));break e}}f=x=pi(x,S),it!==4&&(it=2),ks===null?ks=[f]:ks.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,i&=-i,f.lanes|=i;var I=Cp(f,x,i);Yf(f,I);break e;case 1:S=x;var E=f.type,T=f.stateNode;if((f.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Kn===null||!Kn.has(T)))){f.flags|=65536,i&=-i,f.lanes|=i;var z=Ep(f,S,i);Yf(f,z);break e}}f=f.return}while(f!==null)}im(a)}catch(ie){i=ie,tt===a&&a!==null&&(tt=a=a.return);continue}break}while(!0)}function nm(){var t=da.current;return da.current=sa,t===null?sa:t}function mu(){(it===0||it===3||it===2)&&(it=4),lt===null||(Ir&268435455)===0&&(ha&268435455)===0||Jn(lt,pt)}function _a(t,i){var a=Ie;Ie|=2;var c=nm();(lt!==t||pt!==i)&&(En=null,kr(t,i));do try{Yw();break}catch(d){tm(t,d)}while(!0);if(kc(),Ie=a,da.current=c,tt!==null)throw Error(n(261));return lt=null,pt=0,it}function Yw(){for(;tt!==null;)rm(tt)}function Jw(){for(;tt!==null&&!xy();)rm(tt)}function rm(t){var i=am(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,i===null?im(t):tt=i,ou.current=null}function im(t){var i=t;do{var a=i.alternate;if(t=i.return,(i.flags&32768)===0){if(a=Ww(a,i,Mt),a!==null){tt=a;return}}else{if(a=Vw(a,i),a!==null){a.flags&=32767,tt=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,tt=null;return}}if(i=i.sibling,i!==null){tt=i;return}tt=i=t}while(i!==null);it===0&&(it=5)}function Pr(t,i,a){var c=be,d=Bt.transition;try{Bt.transition=null,be=1,Xw(t,i,a,c)}finally{Bt.transition=d,be=c}return null}function Xw(t,i,a,c){do _i();while(Qn!==null);if((Ie&6)!==0)throw Error(n(327));a=t.finishedWork;var d=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var f=a.lanes|a.childLanes;if(Ay(t,f),t===lt&&(tt=lt=null,pt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||pa||(pa=!0,lm(xo,function(){return _i(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=Bt.transition,Bt.transition=null;var v=be;be=1;var S=Ie;Ie|=4,ou.current=null,qw(t,a),Kp(a,t),_w(mc),Po=!!pc,mc=pc=null,t.current=a,Gw(a),Cy(),Ie=S,be=v,Bt.transition=f}else t.current=a;if(pa&&(pa=!1,Qn=t,ma=d),f=t.pendingLanes,f===0&&(Kn=null),Iy(a.stateNode),bt(t,Ze()),i!==null)for(c=t.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(fa)throw fa=!1,t=cu,cu=null,t;return(ma&1)!==0&&t.tag!==0&&_i(),f=t.pendingLanes,(f&1)!==0?t===uu?Ps++:(Ps=0,uu=t):Ps=0,Vn(),null}function _i(){if(Qn!==null){var t=Hh(ma),i=Bt.transition,a=be;try{if(Bt.transition=null,be=16>t?16:t,Qn===null)var c=!1;else{if(t=Qn,Qn=null,ma=0,(Ie&6)!==0)throw Error(n(331));var d=Ie;for(Ie|=4,J=t.current;J!==null;){var f=J,v=f.child;if((J.flags&16)!==0){var S=f.deletions;if(S!==null){for(var x=0;x<S.length;x++){var P=S[x];for(J=P;J!==null;){var M=J;switch(M.tag){case 0:case 11:case 15:Is(8,M,f)}var $=M.child;if($!==null)$.return=M,J=$;else for(;J!==null;){M=J;var L=M.sibling,Q=M.return;if(Wp(M),M===P){J=null;break}if(L!==null){L.return=Q,J=L;break}J=Q}}}var Z=f.alternate;if(Z!==null){var ne=Z.child;if(ne!==null){Z.child=null;do{var et=ne.sibling;ne.sibling=null,ne=et}while(ne!==null)}}J=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,J=v;else e:for(;J!==null;){if(f=J,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Is(9,f,f.return)}var I=f.sibling;if(I!==null){I.return=f.return,J=I;break e}J=f.return}}var E=t.current;for(J=E;J!==null;){v=J;var T=v.child;if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,J=T;else e:for(v=E;J!==null;){if(S=J,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:ua(9,S)}}catch(ie){Ke(S,S.return,ie)}if(S===v){J=null;break e}var z=S.sibling;if(z!==null){z.return=S.return,J=z;break e}J=S.return}}if(Ie=d,Vn(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Co,t)}catch{}c=!0}return c}finally{be=a,Bt.transition=i}}return!1}function sm(t,i,a){i=pi(a,i),i=Cp(t,i,1),t=qn(t,i,1),i=xt(),t!==null&&(Zi(t,1,i),bt(t,i))}function Ke(t,i,a){if(t.tag===3)sm(t,t,a);else for(;i!==null;){if(i.tag===3){sm(i,t,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Kn===null||!Kn.has(c))){t=pi(a,t),t=Ep(i,t,1),i=qn(i,t,1),t=xt(),i!==null&&(Zi(i,1,t),bt(i,t));break}}i=i.return}}function Zw(t,i,a){var c=t.pingCache;c!==null&&c.delete(i),i=xt(),t.pingedLanes|=t.suspendedLanes&a,lt===t&&(pt&a)===a&&(it===4||it===3&&(pt&130023424)===pt&&500>Ze()-lu?kr(t,0):au|=a),bt(t,i)}function om(t,i){i===0&&((t.mode&1)===0?i=1:(i=No,No<<=1,(No&130023424)===0&&(No=4194304)));var a=xt();t=Sn(t,i),t!==null&&(Zi(t,i,a),bt(t,a))}function e0(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),om(t,a)}function t0(t,i){var a=0;switch(t.tag){case 13:var c=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(i),om(t,a)}var am;am=function(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps||Tt.current)Pt=!0;else{if((t.lanes&a)===0&&(i.flags&128)===0)return Pt=!1,Bw(t,i,a);Pt=(t.flags&131072)!==0}else Pt=!1,We&&(i.flags&1048576)!==0&&$f(i,Go,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;la(t,i),t=i.pendingProps;var d=oi(i,vt.current);hi(i,a),d=Uc(null,i,c,t,d,a);var f=$c();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,kt(c)?(f=!0,Vo(i)):f=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ac(i),d.updater=oa,i.stateNode=d,d._reactInternals=i,qc(i,c,t,a),i=Yc(null,i,c,!0,f,a)):(i.tag=0,We&&f&&xc(i),St(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(la(t,i),t=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=r0(c),t=Qt(c,t),d){case 0:i=Qc(null,i,c,t,a);break e;case 1:i=Dp(null,i,c,t,a);break e;case 11:i=kp(null,i,c,t,a);break e;case 14:i=Pp(null,i,c,Qt(c.type,t),a);break e}throw Error(n(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Qt(c,d),Qc(t,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Qt(c,d),Dp(t,i,c,d,a);case 3:e:{if(jp(i),t===null)throw Error(n(387));c=i.pendingProps,f=i.memoizedState,d=f.element,Qf(t,i),Zo(i,c,null,a);var v=i.memoizedState;if(c=v.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){d=pi(Error(n(423)),i),i=Op(t,i,c,a,d);break e}else if(c!==d){d=pi(Error(n(424)),i),i=Op(t,i,c,a,d);break e}else for(Lt=zn(i.stateNode.containerInfo.firstChild),Ot=i,We=!0,Kt=null,a=Gf(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ci(),c===d){i=Cn(t,i,a);break e}St(t,i,c,a)}i=i.child}return i;case 5:return Xf(i),t===null&&Nc(i),c=i.type,d=i.pendingProps,f=t!==null?t.memoizedProps:null,v=d.children,gc(c,d)?v=null:f!==null&&gc(c,f)&&(i.flags|=32),Ap(t,i),St(t,i,v,a),i.child;case 6:return t===null&&Nc(i),null;case 13:return Lp(t,i,a);case 4:return Dc(i,i.stateNode.containerInfo),c=i.pendingProps,t===null?i.child=ui(i,null,c,a):St(t,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Qt(c,d),kp(t,i,c,d,a);case 7:return St(t,i,i.pendingProps,a),i.child;case 8:return St(t,i,i.pendingProps.children,a),i.child;case 12:return St(t,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,f=i.memoizedProps,v=d.value,Le(Yo,c._currentValue),c._currentValue=v,f!==null)if(Gt(f.value,v)){if(f.children===d.children&&!Tt.current){i=Cn(t,i,a);break e}}else for(f=i.child,f!==null&&(f.return=i);f!==null;){var S=f.dependencies;if(S!==null){v=f.child;for(var x=S.firstContext;x!==null;){if(x.context===c){if(f.tag===1){x=xn(-1,a&-a),x.tag=2;var P=f.updateQueue;if(P!==null){P=P.shared;var M=P.pending;M===null?x.next=x:(x.next=M.next,M.next=x),P.pending=x}}f.lanes|=a,x=f.alternate,x!==null&&(x.lanes|=a),Rc(f.return,a,i),S.lanes|=a;break}x=x.next}}else if(f.tag===10)v=f.type===i.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(n(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),Rc(v,a,i),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===i){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}St(t,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,hi(i,a),d=$t(d),c=c(d),i.flags|=1,St(t,i,c,a),i.child;case 14:return c=i.type,d=Qt(c,i.pendingProps),d=Qt(c.type,d),Pp(t,i,c,d,a);case 15:return Rp(t,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Qt(c,d),la(t,i),i.tag=1,kt(c)?(t=!0,Vo(i)):t=!1,hi(i,a),Sp(i,c,d),qc(i,c,d,a),Yc(null,i,c,!0,t,a);case 19:return Fp(t,i,a);case 22:return bp(t,i,a)}throw Error(n(156,i.tag))};function lm(t,i){return $h(t,i)}function n0(t,i,a,c){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,i,a,c){return new n0(t,i,a,c)}function gu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r0(t){if(typeof t=="function")return gu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ge)return 11;if(t===Re)return 14}return 2}function Xn(t,i){var a=t.alternate;return a===null?(a=Wt(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function ya(t,i,a,c,d,f){var v=2;if(c=t,typeof t=="function")gu(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case X:return Rr(a.children,d,f,i);case fe:v=8,d|=8;break;case Ce:return t=Wt(12,a,i,d|2),t.elementType=Ce,t.lanes=f,t;case U:return t=Wt(13,a,i,d),t.elementType=U,t.lanes=f,t;case me:return t=Wt(19,a,i,d),t.elementType=me,t.lanes=f,t;case _e:return wa(a,d,f,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Te:v=10;break e;case Ae:v=9;break e;case Ge:v=11;break e;case Re:v=14;break e;case Ue:v=16,c=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return i=Wt(v,a,i,d),i.elementType=t,i.type=c,i.lanes=f,i}function Rr(t,i,a,c){return t=Wt(7,t,c,i),t.lanes=a,t}function wa(t,i,a,c){return t=Wt(22,t,c,i),t.elementType=_e,t.lanes=a,t.stateNode={isHidden:!1},t}function vu(t,i,a){return t=Wt(6,t,null,i),t.lanes=a,t}function _u(t,i,a){return i=Wt(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function i0(t,i,a,c,d){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function yu(t,i,a,c,d,f,v,S,x){return t=new i0(t,i,a,S,x),i===1?(i=1,f===!0&&(i|=8)):i=0,f=Wt(3,null,null,i),t.current=f,f.stateNode=t,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ac(f),t}function s0(t,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:c==null?null:""+c,children:t,containerInfo:i,implementation:a}}function cm(t){if(!t)return Wn;t=t._reactInternals;e:{if(_r(t)!==t||t.tag!==1)throw Error(n(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(kt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(t.tag===1){var a=t.type;if(kt(a))return Mf(t,a,i)}return i}function um(t,i,a,c,d,f,v,S,x){return t=yu(a,c,!0,t,d,f,v,S,x),t.context=cm(null),a=t.current,c=xt(),d=Yn(a),f=xn(c,d),f.callback=i??null,qn(a,f,d),t.current.lanes=d,Zi(t,d,c),bt(t,c),t}function Sa(t,i,a,c){var d=i.current,f=xt(),v=Yn(d);return a=cm(a),i.context===null?i.context=a:i.pendingContext=a,i=xn(f,v),i.payload={element:t},c=c===void 0?null:c,c!==null&&(i.callback=c),t=qn(d,i,v),t!==null&&(Xt(t,d,v,f),Xo(t,d,v)),v}function xa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dm(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function wu(t,i){dm(t,i),(t=t.alternate)&&dm(t,i)}function o0(){return null}var hm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Su(t){this._internalRoot=t}Ca.prototype.render=Su.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(n(409));Sa(t,i,null,null)},Ca.prototype.unmount=Su.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Tr(function(){Sa(null,t,null,null)}),i[vn]=null}};function Ca(t){this._internalRoot=t}Ca.prototype.unstable_scheduleHydration=function(t){if(t){var i=Kh();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Fn.length&&i!==0&&i<Fn[a].priority;a++);Fn.splice(a,0,t),a===0&&Jh(t)}};function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ea(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fm(){}function a0(t,i,a,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var P=xa(v);f.call(P)}}var v=um(i,c,t,0,null,!1,!1,"",fm);return t._reactRootContainer=v,t[vn]=v.current,fs(t.nodeType===8?t.parentNode:t),Tr(),v}for(;d=t.lastChild;)t.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var P=xa(x);S.call(P)}}var x=yu(t,0,!1,null,null,!1,!1,"",fm);return t._reactRootContainer=x,t[vn]=x.current,fs(t.nodeType===8?t.parentNode:t),Tr(function(){Sa(i,x,a,c)}),x}function Na(t,i,a,c,d){var f=a._reactRootContainer;if(f){var v=f;if(typeof d=="function"){var S=d;d=function(){var x=xa(v);S.call(x)}}Sa(i,v,t,d)}else v=a0(a,i,t,d,c);return xa(v)}qh=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var a=Xi(i.pendingLanes);a!==0&&(ql(i,a|1),bt(i,Ze()),(Ie&6)===0&&(vi=Ze()+500,Vn()))}break;case 13:Tr(function(){var c=Sn(t,1);if(c!==null){var d=xt();Xt(c,t,1,d)}}),wu(t,1)}},Gl=function(t){if(t.tag===13){var i=Sn(t,134217728);if(i!==null){var a=xt();Xt(i,t,134217728,a)}wu(t,134217728)}},Gh=function(t){if(t.tag===13){var i=Yn(t),a=Sn(t,i);if(a!==null){var c=xt();Xt(a,t,i,c)}wu(t,i)}},Kh=function(){return be},Qh=function(t,i){var a=be;try{return be=t,i()}finally{be=a}},Ul=function(t,i,a){switch(i){case"input":if(Be(t,a),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==t&&c.form===t.form){var d=Bo(c);if(!d)throw Error(n(90));F(c),Be(c,d)}}}break;case"textarea":Eh(t,a);break;case"select":i=a.value,i!=null&&Kr(t,!!a.multiple,i,!1)}},Dh=fu,jh=Tr;var l0={usingClientEntryPoint:!1,Events:[gs,ii,Bo,bh,Ah,fu]},Rs={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c0={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fh(t),t===null?null:t.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||o0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ia.isDisabled&&Ia.supportsFiber)try{Co=Ia.inject(c0),an=Ia}catch{}}return At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l0,At.createPortal=function(t,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xu(i))throw Error(n(200));return s0(t,i,null,a)},At.createRoot=function(t,i){if(!xu(t))throw Error(n(299));var a=!1,c="",d=hm;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=yu(t,1,!1,null,null,a,!1,c,d),t[vn]=i.current,fs(t.nodeType===8?t.parentNode:t),new Su(i)},At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=Fh(i),t=t===null?null:t.stateNode,t},At.flushSync=function(t){return Tr(t)},At.hydrate=function(t,i,a){if(!Ea(i))throw Error(n(200));return Na(null,t,i,!0,a)},At.hydrateRoot=function(t,i,a){if(!xu(t))throw Error(n(405));var c=a!=null&&a.hydratedSources||null,d=!1,f="",v=hm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=um(i,null,t,1,a??null,d,!1,f,v),t[vn]=i.current,fs(t),c)for(t=0;t<c.length;t++)a=c[t],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Ca(i)},At.render=function(t,i,a){if(!Ea(i))throw Error(n(200));return Na(null,t,i,!1,a)},At.unmountComponentAtNode=function(t){if(!Ea(t))throw Error(n(40));return t._reactRootContainer?(Tr(function(){Na(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1},At.unstable_batchedUpdates=fu,At.unstable_renderSubtreeIntoContainer=function(t,i,a,c){if(!Ea(a))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Na(t,i,a,!1,c)},At.version="18.3.1-next-f1338f8080-20240426",At}var Sm;function Vg(){if(Sm)return Nu.exports;Sm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Nu.exports=_0(),Nu.exports}var xm;function y0(){if(xm)return Ta;xm=1;var r=Vg();return Ta.createRoot=r.createRoot,Ta.hydrateRoot=r.hydrateRoot,Ta}var w0=y0();const S0=Bg(w0);Vg();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hs(){return Hs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Hs.apply(this,arguments)}var ir;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ir||(ir={}));const Cm="popstate";function x0(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:u,hash:p}=s.location;return Gu("",{pathname:l,search:u,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Fa(o)}return E0(e,n,null,r)}function qe(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Sd(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C0(){return Math.random().toString(36).substr(2,8)}function Em(r,e){return{usr:r.state,key:r.key,idx:e}}function Gu(r,e,n,s){return n===void 0&&(n=null),Hs({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Oi(e):e,{state:n,key:e&&e.key||s||C0()})}function Fa(r){let{pathname:e="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Oi(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function E0(r,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,u=o.history,p=ir.Pop,m=null,g=w();g==null&&(g=0,u.replaceState(Hs({},u.state,{idx:g}),""));function w(){return(u.state||{idx:null}).idx}function _(){p=ir.Pop;let j=w(),ee=j==null?null:j-g;g=j,m&&m({action:p,location:O.location,delta:ee})}function y(j,ee){p=ir.Push;let b=Gu(O.location,j,ee);g=w()+1;let G=Em(b,g),V=O.createHref(b);try{u.pushState(G,"",V)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;o.location.assign(V)}l&&m&&m({action:p,location:O.location,delta:1})}function R(j,ee){p=ir.Replace;let b=Gu(O.location,j,ee);g=w();let G=Em(b,g),V=O.createHref(b);u.replaceState(G,"",V),l&&m&&m({action:p,location:O.location,delta:0})}function A(j){let ee=o.location.origin!=="null"?o.location.origin:o.location.href,b=typeof j=="string"?j:Fa(j);return b=b.replace(/ $/,"%20"),qe(ee,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,ee)}let O={get action(){return p},get location(){return r(o,u)},listen(j){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Cm,_),m=j,()=>{o.removeEventListener(Cm,_),m=null}},createHref(j){return e(o,j)},createURL:A,encodeLocation(j){let ee=A(j);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:y,replace:R,go(j){return u.go(j)}};return O}var Nm;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Nm||(Nm={}));function N0(r,e,n){return n===void 0&&(n="/"),I0(r,e,n)}function I0(r,e,n,s){let o=typeof e=="string"?Oi(e):e,l=Ii(o.pathname||"/",n);if(l==null)return null;let u=Hg(r);T0(u);let p=null;for(let m=0;p==null&&m<u.length;++m){let g=F0(l);p=L0(u[m],g)}return p}function Hg(r,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(l,u,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};m.relativePath.startsWith("/")&&(qe(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let g=or([s,m.relativePath]),w=n.concat(m);l.children&&l.children.length>0&&(qe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Hg(l.children,e,w,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:j0(g,l.index),routesMeta:w})};return r.forEach((l,u)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,u);else for(let m of qg(l.path))o(l,u,m)}),e}function qg(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let u=qg(s.join("/")),p=[];return p.push(...u.map(m=>m===""?l:[l,m].join("/"))),o&&p.push(...u),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function T0(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:O0(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const k0=/^:[\w-]+$/,P0=3,R0=2,b0=1,A0=10,D0=-2,Im=r=>r==="*";function j0(r,e){let n=r.split("/"),s=n.length;return n.some(Im)&&(s+=D0),e&&(s+=R0),n.filter(o=>!Im(o)).reduce((o,l)=>o+(k0.test(l)?P0:l===""?b0:A0),s)}function O0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function L0(r,e,n){let{routesMeta:s}=r,o={},l="/",u=[];for(let p=0;p<s.length;++p){let m=s[p],g=p===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",_=Ku({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},w),y=m.route;if(!_)return null;Object.assign(o,_.params),u.push({params:o,pathname:or([l,_.pathname]),pathnameBase:W0(or([l,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(l=or([l,_.pathnameBase]))}return u}function Ku(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=M0(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((g,w,_)=>{let{paramName:y,isOptional:R}=w;if(y==="*"){let O=p[_]||"";u=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const A=p[_];return R&&!A?g[y]=void 0:g[y]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:r}}function M0(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Sd(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function F0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sd(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Ii(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}const U0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$0=r=>U0.test(r);function z0(r,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?Oi(r):r,l;if(n)if($0(n))l=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Sd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+n))}n.startsWith("/")?l=Tm(n.substring(1),"/"):l=Tm(n,e)}else l=e;return{pathname:l,search:V0(s),hash:H0(o)}}function Tm(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ku(r,e,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function B0(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xd(r,e){let n=B0(r);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Cd(r,e,n,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Oi(r):(o=Hs({},r),qe(!o.pathname||!o.pathname.includes("?"),ku("?","pathname","search",o)),qe(!o.pathname||!o.pathname.includes("#"),ku("#","pathname","hash",o)),qe(!o.search||!o.search.includes("#"),ku("#","search","hash",o)));let l=r===""||o.pathname==="",u=l?"/":o.pathname,p;if(u==null)p=n;else{let _=e.length-1;if(!s&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),_-=1;o.pathname=y.join("/")}p=_>=0?e[_]:"/"}let m=z0(o,p),g=u&&u!=="/"&&u.endsWith("/"),w=(l||u===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(g||w)&&(m.pathname+="/"),m}const or=r=>r.join("/").replace(/\/\/+/g,"/"),W0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),V0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,H0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function q0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Gg=["post","put","patch","delete"];new Set(Gg);const G0=["get",...Gg];new Set(G0);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qs(){return qs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},qs.apply(this,arguments)}const ul=k.createContext(null),Kg=k.createContext(null),Dn=k.createContext(null),dl=k.createContext(null),mr=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Qg=k.createContext(null);function K0(r,e){let{relative:n}=e===void 0?{}:e;Li()||qe(!1);let{basename:s,navigator:o}=k.useContext(Dn),{hash:l,pathname:u,search:p}=hl(r,{relative:n}),m=u;return s!=="/"&&(m=u==="/"?s:or([s,u])),o.createHref({pathname:m,search:p,hash:l})}function Li(){return k.useContext(dl)!=null}function Hr(){return Li()||qe(!1),k.useContext(dl).location}function Yg(r){k.useContext(Dn).static||k.useLayoutEffect(r)}function Ed(){let{isDataRoute:r}=k.useContext(mr);return r?aS():Q0()}function Q0(){Li()||qe(!1);let r=k.useContext(ul),{basename:e,future:n,navigator:s}=k.useContext(Dn),{matches:o}=k.useContext(mr),{pathname:l}=Hr(),u=JSON.stringify(xd(o,n.v7_relativeSplatPath)),p=k.useRef(!1);return Yg(()=>{p.current=!0}),k.useCallback(function(g,w){if(w===void 0&&(w={}),!p.current)return;if(typeof g=="number"){s.go(g);return}let _=Cd(g,JSON.parse(u),l,w.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:or([e,_.pathname])),(w.replace?s.replace:s.push)(_,w.state,w)},[e,s,u,l,r])}function hl(r,e){let{relative:n}=e===void 0?{}:e,{future:s}=k.useContext(Dn),{matches:o}=k.useContext(mr),{pathname:l}=Hr(),u=JSON.stringify(xd(o,s.v7_relativeSplatPath));return k.useMemo(()=>Cd(r,JSON.parse(u),l,n==="path"),[r,u,l,n])}function Y0(r,e){return J0(r,e)}function J0(r,e,n,s){Li()||qe(!1);let{navigator:o}=k.useContext(Dn),{matches:l}=k.useContext(mr),u=l[l.length-1],p=u?u.params:{};u&&u.pathname;let m=u?u.pathnameBase:"/";u&&u.route;let g=Hr(),w;if(e){var _;let j=typeof e=="string"?Oi(e):e;m==="/"||(_=j.pathname)!=null&&_.startsWith(m)||qe(!1),w=j}else w=g;let y=w.pathname||"/",R=y;if(m!=="/"){let j=m.replace(/^\//,"").split("/");R="/"+y.replace(/^\//,"").split("/").slice(j.length).join("/")}let A=N0(r,{pathname:R}),O=nS(A&&A.map(j=>Object.assign({},j,{params:Object.assign({},p,j.params),pathname:or([m,o.encodeLocation?o.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?m:or([m,o.encodeLocation?o.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,n,s);return e&&O?k.createElement(dl.Provider,{value:{location:qs({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:ir.Pop}},O):O}function X0(){let r=oS(),e=q0(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,null)}const Z0=k.createElement(X0,null);class eS extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(mr.Provider,{value:this.props.routeContext},k.createElement(Qg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tS(r){let{routeContext:e,match:n,children:s}=r,o=k.useContext(ul);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(mr.Provider,{value:e},s)}function nS(r,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var l;if(!n)return null;if(n.errors)r=n.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,p=(o=n)==null?void 0:o.errors;if(p!=null){let w=u.findIndex(_=>_.route.id&&(p==null?void 0:p[_.route.id])!==void 0);w>=0||qe(!1),u=u.slice(0,Math.min(u.length,w+1))}let m=!1,g=-1;if(n&&s&&s.v7_partialHydration)for(let w=0;w<u.length;w++){let _=u[w];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=w),_.route.id){let{loaderData:y,errors:R}=n,A=_.route.loader&&y[_.route.id]===void 0&&(!R||R[_.route.id]===void 0);if(_.route.lazy||A){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((w,_,y)=>{let R,A=!1,O=null,j=null;n&&(R=p&&_.route.id?p[_.route.id]:void 0,O=_.route.errorElement||Z0,m&&(g<0&&y===0?(lS("route-fallback"),A=!0,j=null):g===y&&(A=!0,j=_.route.hydrateFallbackElement||null)));let ee=e.concat(u.slice(0,y+1)),b=()=>{let G;return R?G=O:A?G=j:_.route.Component?G=k.createElement(_.route.Component,null):_.route.element?G=_.route.element:G=w,k.createElement(tS,{match:_,routeContext:{outlet:w,matches:ee,isDataRoute:n!=null},children:G})};return n&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?k.createElement(eS,{location:n.location,revalidation:n.revalidation,component:O,error:R,children:b(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):b()},null)}var Jg=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Jg||{}),Xg=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Xg||{});function rS(r){let e=k.useContext(ul);return e||qe(!1),e}function iS(r){let e=k.useContext(Kg);return e||qe(!1),e}function sS(r){let e=k.useContext(mr);return e||qe(!1),e}function Zg(r){let e=sS(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function oS(){var r;let e=k.useContext(Qg),n=iS(),s=Zg();return e!==void 0?e:(r=n.errors)==null?void 0:r[s]}function aS(){let{router:r}=rS(Jg.UseNavigateStable),e=Zg(Xg.UseNavigateStable),n=k.useRef(!1);return Yg(()=>{n.current=!0}),k.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,qs({fromRouteId:e},l)))},[r,e])}const km={};function lS(r,e,n){km[r]||(km[r]=!0)}function cS(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function uS(r){let{to:e,replace:n,state:s,relative:o}=r;Li()||qe(!1);let{future:l,static:u}=k.useContext(Dn),{matches:p}=k.useContext(mr),{pathname:m}=Hr(),g=Ed(),w=Cd(e,xd(p,l.v7_relativeSplatPath),m,o==="path"),_=JSON.stringify(w);return k.useEffect(()=>g(JSON.parse(_),{replace:n,state:s,relative:o}),[g,_,o,n,s]),null}function Ar(r){qe(!1)}function dS(r){let{basename:e="/",children:n=null,location:s,navigationType:o=ir.Pop,navigator:l,static:u=!1,future:p}=r;Li()&&qe(!1);let m=e.replace(/^\/*/,"/"),g=k.useMemo(()=>({basename:m,navigator:l,static:u,future:qs({v7_relativeSplatPath:!1},p)}),[m,p,l,u]);typeof s=="string"&&(s=Oi(s));let{pathname:w="/",search:_="",hash:y="",state:R=null,key:A="default"}=s,O=k.useMemo(()=>{let j=Ii(w,m);return j==null?null:{location:{pathname:j,search:_,hash:y,state:R,key:A},navigationType:o}},[m,w,_,y,R,A,o]);return O==null?null:k.createElement(Dn.Provider,{value:g},k.createElement(dl.Provider,{children:n,value:O}))}function hS(r){let{children:e,location:n}=r;return Y0(Qu(e),n)}new Promise(()=>{});function Qu(r,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(r,(s,o)=>{if(!k.isValidElement(s))return;let l=[...e,o];if(s.type===k.Fragment){n.push.apply(n,Qu(s.props.children,l));return}s.type!==Ar&&qe(!1),!s.props.index||!s.props.children||qe(!1);let u={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Qu(s.props.children,l)),n.push(u)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Ua.apply(this,arguments)}function ev(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function fS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function pS(r,e){return r.button===0&&(!e||e==="_self")&&!fS(r)}const mS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],vS="6";try{window.__reactRouterVersion=vS}catch{}const _S=k.createContext({isTransitioning:!1}),yS="startTransition",Pm=m0[yS];function wS(r){let{basename:e,children:n,future:s,window:o}=r,l=k.useRef();l.current==null&&(l.current=x0({window:o,v5Compat:!0}));let u=l.current,[p,m]=k.useState({action:u.action,location:u.location}),{v7_startTransition:g}=s||{},w=k.useCallback(_=>{g&&Pm?Pm(()=>m(_)):m(_)},[m,g]);return k.useLayoutEffect(()=>u.listen(w),[u,w]),k.useEffect(()=>cS(s),[s]),k.createElement(dS,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:u,future:s})}const SS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CS=k.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:l,replace:u,state:p,target:m,to:g,preventScrollReset:w,viewTransition:_}=e,y=ev(e,mS),{basename:R}=k.useContext(Dn),A,O=!1;if(typeof g=="string"&&xS.test(g)&&(A=g,SS))try{let G=new URL(window.location.href),V=g.startsWith("//")?new URL(G.protocol+g):new URL(g),Y=Ii(V.pathname,R);V.origin===G.origin&&Y!=null?g=Y+V.search+V.hash:O=!0}catch{}let j=K0(g,{relative:o}),ee=NS(g,{replace:u,state:p,target:m,preventScrollReset:w,relative:o,viewTransition:_});function b(G){s&&s(G),G.defaultPrevented||ee(G)}return k.createElement("a",Ua({},y,{href:A||j,onClick:O||l?s:b,ref:n,target:m}))}),As=k.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:o=!1,className:l="",end:u=!1,style:p,to:m,viewTransition:g,children:w}=e,_=ev(e,gS),y=hl(m,{relative:_.relative}),R=Hr(),A=k.useContext(Kg),{navigator:O,basename:j}=k.useContext(Dn),ee=A!=null&&IS(y)&&g===!0,b=O.encodeLocation?O.encodeLocation(y).pathname:y.pathname,G=R.pathname,V=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;o||(G=G.toLowerCase(),V=V?V.toLowerCase():null,b=b.toLowerCase()),V&&j&&(V=Ii(V,j)||V);const Y=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let re=G===b||!u&&G.startsWith(b)&&G.charAt(Y)==="/",X=V!=null&&(V===b||!u&&V.startsWith(b)&&V.charAt(b.length)==="/"),fe={isActive:re,isPending:X,isTransitioning:ee},Ce=re?s:void 0,Te;typeof l=="function"?Te=l(fe):Te=[l,re?"active":null,X?"pending":null,ee?"transitioning":null].filter(Boolean).join(" ");let Ae=typeof p=="function"?p(fe):p;return k.createElement(CS,Ua({},_,{"aria-current":Ce,className:Te,ref:n,style:Ae,to:m,viewTransition:g}),typeof w=="function"?w(fe):w)});var Yu;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Yu||(Yu={}));var Rm;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Rm||(Rm={}));function ES(r){let e=k.useContext(ul);return e||qe(!1),e}function NS(r,e){let{target:n,replace:s,state:o,preventScrollReset:l,relative:u,viewTransition:p}=e===void 0?{}:e,m=Ed(),g=Hr(),w=hl(r,{relative:u});return k.useCallback(_=>{if(pS(_,n)){_.preventDefault();let y=s!==void 0?s:Fa(g)===Fa(w);m(r,{replace:y,state:o,preventScrollReset:l,relative:u,viewTransition:p})}},[g,m,w,s,o,n,r,l,u,p])}function IS(r,e){e===void 0&&(e={});let n=k.useContext(_S);n==null&&qe(!1);let{basename:s}=ES(Yu.useViewTransitionState),o=hl(r,{relative:e.relative});if(!n.isTransitioning)return!1;let l=Ii(n.currentLocation.pathname,s)||n.currentLocation.pathname,u=Ii(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ku(o.pathname,u)!=null||Ku(o.pathname,l)!=null}const TS=()=>{};var bm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(r,e){if(!r)throw Mi(e)},Mi=function(r){return new Error("Firebase Database ("+tv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},kS=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[n++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[n++],u=r[n++],p=r[n++],m=((o&7)<<18|(l&63)<<12|(u&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=r[n++],u=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Nd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],u=o+1<r.length,p=u?r[o+1]:0,m=o+2<r.length,g=m?r[o+2]:0,w=l>>2,_=(l&3)<<4|p>>4;let y=(p&15)<<2|g>>6,R=g&63;m||(R=64,u||(y=64)),s.push(n[w],n[_],n[y],n[R])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(nv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):kS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const _=o<r.length?n[r.charAt(o)]:64;if(++o,l==null||p==null||g==null||_==null)throw new PS;const y=l<<2|p>>4;if(s.push(y),g!==64){const R=p<<4&240|g>>2;if(s.push(R),_!==64){const A=g<<6&192|_;s.push(A)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class PS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rv=function(r){const e=nv(r);return Nd.encodeByteArray(e,!0)},$a=function(r){return rv(r).replace(/\./g,"")},za=function(r){try{return Nd.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(r){return iv(void 0,r)}function iv(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!bS(n)||(r[n]=iv(r[n],e[n]));return r}function bS(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=()=>AS().__FIREBASE_DEFAULTS__,jS=()=>{if(typeof process>"u"||typeof bm>"u")return;const r=bm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},OS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&za(r[1]);return e&&JSON.parse(e)},Id=()=>{try{return TS()||DS()||jS()||OS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},sv=r=>{var e,n;return(n=(e=Id())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},LS=r=>{const e=sv(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ov=()=>{var r;return(r=Id())===null||r===void 0?void 0:r.config},av=r=>{var e;return(e=Id())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[$a(JSON.stringify(n)),$a(JSON.stringify(u)),""].join(".")}const Fs={};function FS(){const r={prod:[],emulator:[]};for(const e of Object.keys(Fs))Fs[e]?r.emulator.push(e):r.prod.push(e);return r}function US(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Am=!1;function cv(r,e){if(typeof window>"u"||typeof document>"u"||!Fi(window.location.host)||Fs[r]===e||Fs[r]||Am)return;Fs[r]=e;function n(y){return`__firebase__banner__${y}`}const s="__firebase__banner",l=FS().prod.length>0;function u(){const y=document.getElementById(s);y&&y.remove()}function p(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function m(y,R){y.setAttribute("width","24"),y.setAttribute("id",R),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function g(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Am=!0,u()},y}function w(y,R){y.setAttribute("id",R),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function _(){const y=US(s),R=n("text"),A=document.getElementById(R)||document.createElement("span"),O=n("learnmore"),j=document.getElementById(O)||document.createElement("a"),ee=n("preprendIcon"),b=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const G=y.element;p(G),w(j,O);const V=g();m(b,ee),G.append(b,A,j,V),document.body.appendChild(G)}l?(A.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Td(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function $S(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function uv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BS(){const r=Nt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function WS(){return tv.NODE_ADMIN===!0}function VS(){try{return typeof indexedDB=="object"}catch{return!1}}function HS(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="FirebaseError";class gr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=qS,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oo.prototype.create)}}class oo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?GS(l,s):"Error",p=`${this.serviceName}: ${u} (${o}).`;return new gr(o,p,s)}}function GS(r,e){return r.replace(KS,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const KS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(r){return JSON.parse(r)}function ot(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=function(r){let e={},n={},s={},o="";try{const l=r.split(".");e=Gs(za(l[0])||""),n=Gs(za(l[1])||""),o=l[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:o}},QS=function(r){const e=dv(r),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},YS=function(r){const e=dv(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Ti(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function Ju(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ba(r,e,n){const s={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=e.call(n,r[o],o,r));return s}function Fr(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const l=r[o],u=e[o];if(Dm(l)&&Dm(u)){if(!Fr(l,u))return!1}else if(l!==u)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Dm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)s[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)s[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const y=s[_-3]^s[_-8]^s[_-14]^s[_-16];s[_]=(y<<1|y>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],u=this.chain_[2],p=this.chain_[3],m=this.chain_[4],g,w;for(let _=0;_<80;_++){_<40?_<20?(g=p^l&(u^p),w=1518500249):(g=l^u^p,w=1859775393):_<60?(g=l&u|p&(l|u),w=2400959708):(g=l^u^p,w=3395469782);const y=(o<<5|o>>>27)+g+m+w+s[_]&4294967295;m=p,p=u,u=(l<<30|l>>>2)&4294967295,l=o,o=y}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let o=0;const l=this.buf_;let u=this.inbuf_;for(;o<n;){if(u===0)for(;o<=s;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(l[u]=e.charCodeAt(o),++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}else for(;o<n;)if(l[u]=e[o],++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[s]=this.chain_[o]>>l&255,++s;return e}}function XS(r,e){const n=new ZS(r,e);return n.subscribe.bind(n)}class ZS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");ex(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Pu),o.error===void 0&&(o.error=Pu),o.complete===void 0&&(o.complete=Pu);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ex(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Pu(){}function fl(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);if(o>=55296&&o<=56319){const l=o-55296;s++,B(s<r.length,"Surrogate pair missing trail surrogate.");const u=r.charCodeAt(s)-56320;o=65536+(l<<10)+u}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},pl=function(r){let e=0;for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r){return r&&r._delegate?r._delegate:r}class Ur{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new so;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ix(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[l,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&u.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rx(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rx(r){return r===Dr?void 0:r}function ix(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(De||(De={}));const ox={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},ax=De.INFO,lx={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},cx=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=lx[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kd{constructor(e){this.name=e,this._logLevel=ax,this._logHandler=cx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ox[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const ux=(r,e)=>e.some(n=>r instanceof n);let jm,Om;function dx(){return jm||(jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hx(){return Om||(Om=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hv=new WeakMap,Xu=new WeakMap,fv=new WeakMap,Ru=new WeakMap,Pd=new WeakMap;function fx(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{n(ar(r.result)),o()},u=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&hv.set(n,r)}).catch(()=>{}),Pd.set(e,r),e}function px(r){if(Xu.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{n(),o()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Xu.set(r,e)}let Zu={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Xu.get(r);if(e==="objectStoreNames")return r.objectStoreNames||fv.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function mx(r){Zu=r(Zu)}function gx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(bu(this),e,...n);return fv.set(s,e.sort?e.sort():[e]),ar(s)}:hx().includes(r)?function(...e){return r.apply(bu(this),e),ar(hv.get(this))}:function(...e){return ar(r.apply(bu(this),e))}}function vx(r){return typeof r=="function"?gx(r):(r instanceof IDBTransaction&&px(r),ux(r,dx())?new Proxy(r,Zu):r)}function ar(r){if(r instanceof IDBRequest)return fx(r);if(Ru.has(r))return Ru.get(r);const e=vx(r);return e!==r&&(Ru.set(r,e),Pd.set(e,r)),e}const bu=r=>Pd.get(r);function _x(r,e,{blocked:n,upgrade:s,blocking:o,terminated:l}={}){const u=indexedDB.open(r,e),p=ar(u);return s&&u.addEventListener("upgradeneeded",m=>{s(ar(u.result),m.oldVersion,m.newVersion,ar(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const yx=["get","getKey","getAll","getAllKeys","count"],wx=["put","add","delete","clear"],Au=new Map;function Lm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Au.get(e))return Au.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=wx.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||yx.includes(n)))return;const l=async function(u,...p){const m=this.transaction(u,o?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),o&&m.done]))[0]};return Au.set(e,l),l}mx(r=>({...r,get:(e,n,s)=>Lm(e,n)||r.get(e,n,s),has:(e,n)=>!!Lm(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function xx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ed="@firebase/app",Mm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new kd("@firebase/app"),Cx="@firebase/app-compat",Ex="@firebase/analytics-compat",Nx="@firebase/analytics",Ix="@firebase/app-check-compat",Tx="@firebase/app-check",kx="@firebase/auth",Px="@firebase/auth-compat",Rx="@firebase/database",bx="@firebase/data-connect",Ax="@firebase/database-compat",Dx="@firebase/functions",jx="@firebase/functions-compat",Ox="@firebase/installations",Lx="@firebase/installations-compat",Mx="@firebase/messaging",Fx="@firebase/messaging-compat",Ux="@firebase/performance",$x="@firebase/performance-compat",zx="@firebase/remote-config",Bx="@firebase/remote-config-compat",Wx="@firebase/storage",Vx="@firebase/storage-compat",Hx="@firebase/firestore",qx="@firebase/ai",Gx="@firebase/firestore-compat",Kx="firebase",Qx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="[DEFAULT]",Yx={[ed]:"fire-core",[Cx]:"fire-core-compat",[Nx]:"fire-analytics",[Ex]:"fire-analytics-compat",[Tx]:"fire-app-check",[Ix]:"fire-app-check-compat",[kx]:"fire-auth",[Px]:"fire-auth-compat",[Rx]:"fire-rtdb",[bx]:"fire-data-connect",[Ax]:"fire-rtdb-compat",[Dx]:"fire-fn",[jx]:"fire-fn-compat",[Ox]:"fire-iid",[Lx]:"fire-iid-compat",[Mx]:"fire-fcm",[Fx]:"fire-fcm-compat",[Ux]:"fire-perf",[$x]:"fire-perf-compat",[zx]:"fire-rc",[Bx]:"fire-rc-compat",[Wx]:"fire-gcs",[Vx]:"fire-gcs-compat",[Hx]:"fire-fst",[Gx]:"fire-fst-compat",[qx]:"fire-vertex","fire-js":"fire-js",[Kx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new Map,Jx=new Map,nd=new Map;function Fm(r,e){try{r.container.addComponent(e)}catch(n){Rn.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ki(r){const e=r.name;if(nd.has(e))return Rn.debug(`There were multiple attempts to register component ${e}.`),!1;nd.set(e,r);for(const n of Wa.values())Fm(n,r);for(const n of Jx.values())Fm(n,r);return!0}function Rd(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Zt(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new oo("app","Firebase",Xx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=Qx;function pv(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:td,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw lr.create("bad-app-name",{appName:String(o)});if(n||(n=ov()),!n)throw lr.create("no-options");const l=Wa.get(o);if(l){if(Fr(n,l.options)&&Fr(s,l.config))return l;throw lr.create("duplicate-app",{appName:o})}const u=new sx(o);for(const m of nd.values())u.addComponent(m);const p=new Zx(n,s,u);return Wa.set(o,p),p}function mv(r=td){const e=Wa.get(r);if(!e&&r===td&&ov())return pv();if(!e)throw lr.create("no-app",{appName:r});return e}function cr(r,e,n){var s;let o=(s=Yx[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&p.push("and"),u&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rn.warn(p.join(" "));return}ki(new Ur(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebase-heartbeat-database",tC=1,Ks="firebase-heartbeat-store";let Du=null;function gv(){return Du||(Du=_x(eC,tC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ks)}catch(n){console.warn(n)}}}}).catch(r=>{throw lr.create("idb-open",{originalErrorMessage:r.message})})),Du}async function nC(r){try{const n=(await gv()).transaction(Ks),s=await n.objectStore(Ks).get(vv(r));return await n.done,s}catch(e){if(e instanceof gr)Rn.warn(e.message);else{const n=lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rn.warn(n.message)}}}async function Um(r,e){try{const s=(await gv()).transaction(Ks,"readwrite");await s.objectStore(Ks).put(e,vv(r)),await s.done}catch(n){if(n instanceof gr)Rn.warn(n.message);else{const s=lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rn.warn(s.message)}}}function vv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=1024,iC=30;class sC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$m();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>iC){const u=lC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Rn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$m(),{heartbeatsToSend:s,unsentEntries:o}=oC(this._heartbeatsCache.heartbeats),l=$a(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Rn.warn(n),""}}}function $m(){return new Date().toISOString().substring(0,10)}function oC(r,e=rC){const n=[];let s=r.slice();for(const o of r){const l=n.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),zm(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),zm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class aC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VS()?HS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Um(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Um(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function zm(r){return $a(JSON.stringify({version:2,heartbeats:r})).length}function lC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(r){ki(new Ur("platform-logger",e=>new Sx(e),"PRIVATE")),ki(new Ur("heartbeat",e=>new sC(e),"PRIVATE")),cr(ed,Mm,r),cr(ed,Mm,"esm2017"),cr("fire-js","")}cC("");function bd(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function _v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uC=_v,yv=new oo("auth","Firebase",_v());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new kd("@firebase/auth");function dC(r,...e){Va.logLevel<=De.WARN&&Va.warn(`Auth (${$i}): ${r}`,...e)}function Da(r,...e){Va.logLevel<=De.ERROR&&Va.error(`Auth (${$i}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(r,...e){throw Dd(r,...e)}function rn(r,...e){return Dd(r,...e)}function Ad(r,e,n){const s=Object.assign(Object.assign({},uC()),{[e]:n});return new oo("auth","Firebase",s).create(e,{appName:r.name})}function Mr(r){return Ad(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hC(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&fn(r,"argument-error"),Ad(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dd(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return yv.create(r,...e)}function he(r,e,...n){if(!r)throw Dd(e,...n)}function In(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Da(e),new Error(e)}function bn(r,e){r||In(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function fC(){return Bm()==="http:"||Bm()==="https:"}function Bm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fC()||zS()||"connection"in navigator)?navigator.onLine:!0}function mC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this.shortDelay=e,this.longDelay=n,bn(n>e,"Short delay should be less than long delay!"),this.isMobile=Td()||uv()}get(){return pC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(r,e){bn(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;In("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;In("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;In("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_C=new ao(3e4,6e4);function Od(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function zi(r,e,n,s,o={}){return Sv(r,o,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const p=Ui(Object.assign({key:r.config.apiKey},u)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:m},l);return $S()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Fi(r.emulatorConfig.host)&&(g.credentials="include"),wv.fetch()(await xv(r,r.config.apiHost,n,p),g)})}async function Sv(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},gC),e);try{const o=new wC(r),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw ka(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const p=l.ok?u.errorMessage:u.error.message,[m,g]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw ka(r,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw ka(r,"email-already-in-use",u);if(m==="USER_DISABLED")throw ka(r,"user-disabled",u);const w=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Ad(r,w,g);fn(r,w)}}catch(o){if(o instanceof gr)throw o;fn(r,"network-request-failed",{message:String(o)})}}async function yC(r,e,n,s,o={}){const l=await zi(r,e,n,s,o);return"mfaPendingCredential"in l&&fn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function xv(r,e,n,s){const o=`${e}${n}?${s}`,l=r,u=l.config.emulator?jd(r.config,o):`${r.config.apiScheme}://${o}`;return vC.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class wC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(rn(this.auth,"network-request-failed")),_C.get())})}}function ka(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=rn(r,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(r,e){return zi(r,"POST","/v1/accounts:delete",e)}async function Ha(r,e){return zi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xC(r,e=!1){const n=It(r),s=await n.getIdToken(e),o=Ld(s);he(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Us(ju(o.auth_time)),issuedAtTime:Us(ju(o.iat)),expirationTime:Us(ju(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function ju(r){return Number(r)*1e3}function Ld(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Da("JWT malformed, contained fewer than 3 sections"),null;try{const o=za(n);return o?JSON.parse(o):(Da("Failed to decode base64 JWT payload"),null)}catch(o){return Da("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Wm(r){const e=Ld(r);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof gr&&CC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function CC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Us(this.lastLoginAt),this.creationTime=Us(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(r){var e;const n=r.auth,s=await r.getIdToken(),o=await Qs(r,Ha(n,{idToken:s}));he(o==null?void 0:o.users.length,n,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Cv(l.providerUserInfo):[],p=IC(r.providerData,u),m=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),w=m?g:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new id(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,_)}async function NC(r){const e=It(r);await qa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IC(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Cv(r){return r.map(e=>{var{providerId:n}=e,s=bd(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(r,e){const n=await Sv(r,{},async()=>{const s=Ui({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,u=await xv(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:s};return r.emulatorConfig&&Fi(r.emulatorConfig.host)&&(m.credentials="include"),wv.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kC(r,e){return zi(r,"POST","/v2/accounts:revokeToken",Od(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=Wm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:l}=await TC(e,n);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:l}=n,u=new Si;return s&&(he(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(he(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(he(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Si,this.toJSON())}_performRefresh(){return In("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(r,e){he(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class tn{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,l=bd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new id(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Qs(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xC(this,e)}reload(){return NC(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await qa(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zt(this.auth.app))return Promise.reject(Mr(this.auth));const e=await this.getIdToken();return await Qs(this,SC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,l,u,p,m,g,w;const _=(s=n.displayName)!==null&&s!==void 0?s:void 0,y=(o=n.email)!==null&&o!==void 0?o:void 0,R=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,A=(u=n.photoURL)!==null&&u!==void 0?u:void 0,O=(p=n.tenantId)!==null&&p!==void 0?p:void 0,j=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,ee=(g=n.createdAt)!==null&&g!==void 0?g:void 0,b=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:G,emailVerified:V,isAnonymous:Y,providerData:re,stsTokenManager:X}=n;he(G&&X,e,"internal-error");const fe=Si.fromJSON(this.name,X);he(typeof G=="string",e,"internal-error"),er(_,e.name),er(y,e.name),he(typeof V=="boolean",e,"internal-error"),he(typeof Y=="boolean",e,"internal-error"),er(R,e.name),er(A,e.name),er(O,e.name),er(j,e.name),er(ee,e.name),er(b,e.name);const Ce=new tn({uid:G,auth:e,email:y,emailVerified:V,displayName:_,isAnonymous:Y,photoURL:A,phoneNumber:R,tenantId:O,stsTokenManager:fe,createdAt:ee,lastLoginAt:b});return re&&Array.isArray(re)&&(Ce.providerData=re.map(Te=>Object.assign({},Te))),j&&(Ce._redirectEventId=j),Ce}static async _fromIdTokenResponse(e,n,s=!1){const o=new Si;o.updateFromServerResponse(n);const l=new tn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await qa(l),l}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];he(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Cv(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Si;p.updateFromIdToken(s);const m=new tn({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new id(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=new Map;function Tn(r){bn(r instanceof Function,"Expected a class definition");let e=Vm.get(r);return e?(bn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Vm.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ev.type="NONE";const Hm=Ev;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(r,e,n){return`firebase:${r}:${e}:${n}`}class xi{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=ja(this.userKey,o.apiKey,l),this.fullPersistenceKey=ja("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ha(this.auth,{idToken:e}).catch(()=>{});return n?tn._fromGetAccountInfoResponse(this.auth,n,e):null}return tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new xi(Tn(Hm),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||Tn(Hm);const u=ja(s,e.config.apiKey,e.name);let p=null;for(const g of n)try{const w=await g._get(u);if(w){let _;if(typeof w=="string"){const y=await Ha(e,{idToken:w}).catch(()=>{});if(!y)break;_=await tn._fromGetAccountInfoResponse(e,y,w)}else _=tn._fromJSON(e,w);g!==l&&(p=_),l=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new xi(l,e,s):(l=m[0],p&&await l._set(u,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new xi(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rv(e))return"Blackberry";if(bv(e))return"Webos";if(Iv(e))return"Safari";if((e.includes("chrome/")||Tv(e))&&!e.includes("edge/"))return"Chrome";if(Pv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Nv(r=Nt()){return/firefox\//i.test(r)}function Iv(r=Nt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tv(r=Nt()){return/crios\//i.test(r)}function kv(r=Nt()){return/iemobile/i.test(r)}function Pv(r=Nt()){return/android/i.test(r)}function Rv(r=Nt()){return/blackberry/i.test(r)}function bv(r=Nt()){return/webos/i.test(r)}function Md(r=Nt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function PC(r=Nt()){var e;return Md(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RC(){return BS()&&document.documentMode===10}function Av(r=Nt()){return Md(r)||Pv(r)||bv(r)||Rv(r)||/windows phone/i.test(r)||kv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(r,e=[]){let n;switch(r){case"Browser":n=qm(Nt());break;case"Worker":n=`${qm(Nt())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$i}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=l=>new Promise((u,p)=>{try{const m=e(l);u(m)}catch(m){p(m)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(r,e={}){return zi(r,"GET","/v2/passwordPolicy",Od(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=6;class jC{constructor(e){var n,s,o,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:DC,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,l,u,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gm(this),this.idTokenSubscription=new Gm(this),this.beforeStateQueue=new bC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Tn(n)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await xi.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ha(this,{idToken:e}),s=await tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(p,p))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===p)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zt(this.app))return Promise.reject(Mr(this));const n=e?It(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zt(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zt(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AC(this),n=new jC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new oo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await kC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Tn(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await xi.create(this,[Tn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(p,this,"internal-error"),p.then(()=>{u||l(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,o);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&dC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ml(r){return It(r)}class Gm{constructor(e){this.auth=e,this.observer=null,this.addObserver=XS(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LC(r){Fd=r}function MC(r){return Fd.loadJS(r)}function FC(){return Fd.gapiScript}function UC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(r,e){const n=Rd(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(Fr(l,e??{}))return o;fn(o,"already-initialized")}return n.initialize({options:e})}function zC(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Tn);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function BC(r,e,n){const s=ml(r);he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=jv(e),{host:u,port:p}=WC(e),m=p===null?"":`:${p}`,g={url:`${l}//${u}${m}/`},w=Object.freeze({host:u,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){he(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),he(Fr(g,s.config.emulator)&&Fr(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,Fi(u)?(lv(`${l}//${u}${m}`),cv("Auth",!0)):VC()}function jv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function WC(r){const e=jv(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Km(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:Km(u)}}}function Km(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function VC(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return In("not implemented")}_getIdTokenResponse(e){return In("not implemented")}_linkToIdToken(e,n){return In("not implemented")}_getReauthenticationResolver(e){return In("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(r,e){return yC(r,"POST","/v1/accounts:signInWithIdp",Od(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="http://localhost";class $r extends Ov{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,l=bd(n,["providerId","signInMethod"]);if(!s||!o)return null;const u=new $r(s,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ci(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ci(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ci(e,n)}buildRequest(){const e={requestUri:HC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ui(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Ud{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends lo{constructor(){super("facebook.com")}static credential(e){return $r._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends lo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $r._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Nn.credential(n,s)}catch{return null}}}Nn.GOOGLE_SIGN_IN_METHOD="google.com";Nn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends lo{constructor(){super("github.com")}static credential(e){return $r._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends lo{constructor(){super("twitter.com")}static credential(e,n){return $r._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return rr.credential(n,s)}catch{return null}}}rr.TWITTER_SIGN_IN_METHOD="twitter.com";rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const l=await tn._fromIdTokenResponse(e,s,o),u=Qm(s);return new Pi({user:l,providerId:u,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Qm(s);return new Pi({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Qm(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends gr{constructor(e,n,s,o){var l;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ga.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Ga(e,n,s,o)}}function Lv(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ga._fromErrorAndOperation(r,l,e,s):l})}async function qC(r,e,n=!1){const s=await Qs(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Pi._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(r,e,n=!1){const{auth:s}=r;if(Zt(s.app))return Promise.reject(Mr(s));const o="reauthenticate";try{const l=await Qs(r,Lv(s,o,e,r),n);he(l.idToken,s,"internal-error");const u=Ld(l.idToken);he(u,s,"internal-error");const{sub:p}=u;return he(r.uid===p,s,"user-mismatch"),Pi._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&fn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(r,e,n=!1){if(Zt(r.app))return Promise.reject(Mr(r));const s="signIn",o=await Lv(r,s,e),l=await Pi._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(l.user),l}function QC(r,e,n,s){return It(r).onIdTokenChanged(e,n,s)}function YC(r,e,n){return It(r).beforeAuthStateChanged(e,n)}function JC(r,e,n,s){return It(r).onAuthStateChanged(e,n,s)}function XC(r){return It(r).signOut()}const Ka="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ka,"1"),this.storage.removeItem(Ka),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1e3,eE=10;class Fv extends Mv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Av(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,p,m)=>{this.notifyListeners(u,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!n&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);RC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,eE):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},ZC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fv.type="LOCAL";const tE=Fv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends Mv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Uv.type="SESSION";const $v=Uv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new gl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:l}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(u).map(async g=>g(n.origin,l)),m=await nE(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((p,m)=>{const g=$d("",20);o.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(_){const y=_;if(y.data.eventId===g)switch(y.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(y.data.response);break;default:clearTimeout(w),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return window}function iE(r){hn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(){return typeof hn().WorkerGlobalScope<"u"&&typeof hn().importScripts=="function"}async function sE(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oE(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function aE(){return zv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="firebaseLocalStorageDb",lE=1,Qa="firebaseLocalStorage",Wv="fbase_key";class co{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vl(r,e){return r.transaction([Qa],e?"readwrite":"readonly").objectStore(Qa)}function cE(){const r=indexedDB.deleteDatabase(Bv);return new co(r).toPromise()}function sd(){const r=indexedDB.open(Bv,lE);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Qa,{keyPath:Wv})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Qa)?e(s):(s.close(),await cE(),e(await sd()))})})}async function Ym(r,e,n){const s=vl(r,!0).put({[Wv]:e,value:n});return new co(s).toPromise()}async function uE(r,e){const n=vl(r,!1).get(e),s=await new co(n).toPromise();return s===void 0?null:s.value}function Jm(r,e){const n=vl(r,!0).delete(e);return new co(n).toPromise()}const dE=800,hE=3;class Vv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>hE)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gl._getInstance(aE()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sE(),!this.activeServiceWorker)return;this.sender=new rE(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sd();return await Ym(e,Ka,"1"),await Jm(e,Ka),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ym(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>uE(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=vl(o,!1).getAll();return new co(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vv.type="LOCAL";const fE=Vv;new ao(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(r,e){return e?Tn(e):(he(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends Ov{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pE(r){return KC(r.auth,new zd(r),r.bypassAuthState)}function mE(r){const{auth:e,user:n}=r;return he(n,e,"internal-error"),GC(n,new zd(r),r.bypassAuthState)}async function gE(r){const{auth:e,user:n}=r;return he(n,e,"internal-error"),qC(n,new zd(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:l,error:u,type:p}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pE;case"linkViaPopup":case"linkViaRedirect":return gE;case"reauthViaPopup":case"reauthViaRedirect":return mE;default:fn(this.auth,"internal-error")}}resolve(e){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=new ao(2e3,1e4);async function _E(r,e,n){if(Zt(r.app))return Promise.reject(rn(r,"operation-not-supported-in-this-environment"));const s=ml(r);hC(r,e,Ud);const o=Hv(s,n);return new Or(s,"signInViaPopup",e,o).executeNotNull()}class Or extends qv{constructor(e,n,s,o,l){super(e,n,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Or.currentPopupAction&&Or.currentPopupAction.cancel(),Or.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){bn(this.filter.length===1,"Popup operations only handle one event");const e=$d();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Or.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vE.get())};e()}}Or.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="pendingRedirect",Oa=new Map;class wE extends qv{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Oa.get(this.auth._key());if(!e){try{const s=await SE(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Oa.set(this.auth._key(),e)}return this.bypassAuthState||Oa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SE(r,e){const n=EE(e),s=CE(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function xE(r,e){Oa.set(r._key(),e)}function CE(r){return Tn(r._redirectPersistence)}function EE(r){return ja(yE,r.config.apiKey,r.name)}async function NE(r,e,n=!1){if(Zt(r.app))return Promise.reject(Mr(r));const s=ml(r),o=Hv(s,e),u=await new wE(s,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=600*1e3;class TE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kE(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Gv(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(rn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IE&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xm(e))}saveEventToCache(e){this.cachedEventUids.add(Xm(e)),this.lastProcessedEventTime=Date.now()}}function Xm(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Gv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kE(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PE(r,e={}){return zi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bE=/^https?/;async function AE(r){if(r.config.emulator)return;const{authorizedDomains:e}=await PE(r);for(const n of e)try{if(DE(n))return}catch{}fn(r,"unauthorized-domain")}function DE(r){const e=rd(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===s}if(!bE.test(n))return!1;if(RE.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new ao(3e4,6e4);function Zm(){const r=hn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function OE(r){return new Promise((e,n)=>{var s,o,l;function u(){Zm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zm(),n(rn(r,"network-request-failed"))},timeout:jE.get()})}if(!((o=(s=hn().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=hn().gapi)===null||l===void 0)&&l.load)u();else{const p=UC("iframefcb");return hn()[p]=()=>{gapi.load?u():n(rn(r,"network-request-failed"))},MC(`${FC()}?onload=${p}`).catch(m=>n(m))}}).catch(e=>{throw La=null,e})}let La=null;function LE(r){return La=La||OE(r),La}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new ao(5e3,15e3),FE="__/auth/iframe",UE="emulator/auth/iframe",$E={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BE(r){const e=r.config;he(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?jd(e,UE):`https://${r.config.authDomain}/${FE}`,s={apiKey:e.apiKey,appName:r.name,v:$i},o=zE.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${n}?${Ui(s).slice(1)}`}async function WE(r){const e=await LE(r),n=hn().gapi;return he(n,r,"internal-error"),e.open({where:document.body,url:BE(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$E,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const u=rn(r,"network-request-failed"),p=hn().setTimeout(()=>{l(u)},ME.get());function m(){hn().clearTimeout(p),o(s)}s.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HE=500,qE=600,GE="_blank",KE="http://localhost";class eg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QE(r,e,n,s=HE,o=qE){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const m=Object.assign(Object.assign({},VE),{width:s.toString(),height:o.toString(),top:l,left:u}),g=Nt().toLowerCase();n&&(p=Tv(g)?GE:n),Nv(g)&&(e=e||KE,m.scrollbars="yes");const w=Object.entries(m).reduce((y,[R,A])=>`${y}${R}=${A},`,"");if(PC(g)&&p!=="_self")return YE(e||"",p),new eg(null);const _=window.open(e||"",p,w);he(_,r,"popup-blocked");try{_.focus()}catch{}return new eg(_)}function YE(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="__/auth/handler",XE="emulator/auth/handler",ZE=encodeURIComponent("fac");async function tg(r,e,n,s,o,l){he(r.config.authDomain,r,"auth-domain-config-required"),he(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:$i,eventId:o};if(e instanceof Ud){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",Ju(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,_]of Object.entries({}))u[w]=_}if(e instanceof lo){const w=e.getScopes().filter(_=>_!=="");w.length>0&&(u.scopes=w.join(","))}r.tenantId&&(u.tid=r.tenantId);const p=u;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const m=await r._getAppCheckToken(),g=m?`#${ZE}=${encodeURIComponent(m)}`:"";return`${eN(r)}?${Ui(p).slice(1)}${g}`}function eN({config:r}){return r.emulator?jd(r,XE):`https://${r.authDomain}/${JE}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou="webStorageSupport";class tN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$v,this._completeRedirectFn=NE,this._overrideRedirectResult=xE}async _openPopup(e,n,s,o){var l;bn((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await tg(e,n,s,rd(),o);return QE(e,u,$d())}async _openRedirect(e,n,s,o){await this._originValidation(e);const l=await tg(e,n,s,rd(),o);return iE(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(bn(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await WE(e),s=new TE(e);return n.register("authEvent",o=>(he(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ou,{type:Ou},o=>{var l;const u=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Ou];u!==void 0&&n(!!u),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AE(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Av()||Iv()||Md()}}const nN=tN;var ng="@firebase/auth",rg="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sN(r){ki(new Ur("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=s.options;he(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:u,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dv(r)},g=new OC(s,o,l,m);return zC(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ki(new Ur("auth-internal",e=>{const n=ml(e.getProvider("auth").getImmediate());return(s=>new rN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(ng,rg,iN(r)),cr(ng,rg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=300,aN=av("authIdTokenMaxAge")||oN;let ig=null;const lN=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>aN)return;const o=n==null?void 0:n.token;ig!==o&&(ig=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cN(r=mv()){const e=Rd(r,"auth");if(e.isInitialized())return e.getImmediate();const n=$C(r,{popupRedirectResolver:nN,persistence:[fE,tE,$v]}),s=av("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=lN(l.toString());YC(n,u,()=>u(n.currentUser)),QC(n,p=>u(p))}}const o=sv("auth");return o&&BC(n,`http://${o}`),n}function uN(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}LC({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=rn("internal-error");l.customData=o,n(l)},s.type="text/javascript",s.charset="UTF-8",uN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sN("Browser");var dN="firebase",hN="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(dN,hN,"app");var sg={};const og="@firebase/database",ag="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kv="";function fN(r){Kv=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ot(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Gs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return pn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pN(e)}}catch{}return new mN},Lr=Qv("localStorage"),gN=Qv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new kd("@firebase/database"),vN=(function(){let r=1;return function(){return r++}})(),Yv=function(r){const e=tx(r),n=new JS;n.update(e);const s=n.digest();return Nd.encodeByteArray(s)},uo=function(...r){let e="";for(let n=0;n<r.length;n++){const s=r[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=uo.apply(null,s):typeof s=="object"?e+=ot(s):e+=s,e+=" "}return e};let $s=null,lg=!0;const _N=function(r,e){B(!0,"Can't turn on custom loggers persistently."),Ei.logLevel=De.VERBOSE,$s=Ei.log.bind(Ei)},mt=function(...r){if(lg===!0&&(lg=!1,$s===null&&gN.get("logging_enabled")===!0&&_N()),$s){const e=uo.apply(null,r);$s(e)}},ho=function(r){return function(...e){mt(r,...e)}},od=function(...r){const e="FIREBASE INTERNAL ERROR: "+uo(...r);Ei.error(e)},An=function(...r){const e=`FIREBASE FATAL ERROR: ${uo(...r)}`;throw Ei.error(e),new Error(e)},Et=function(...r){const e="FIREBASE WARNING: "+uo(...r);Ei.warn(e)},yN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Bd=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},wN=function(r){if(document.readyState==="complete")r();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ri="[MIN_NAME]",zr="[MAX_NAME]",qr=function(r,e){if(r===e)return 0;if(r===Ri||e===zr)return-1;if(e===Ri||r===zr)return 1;{const n=cg(r),s=cg(e);return n!==null?s!==null?n-s===0?r.length-e.length:n-s:-1:s!==null?1:r<e?-1:1}},SN=function(r,e){return r===e?0:r<e?-1:1},Ds=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+ot(e))},Wd=function(r){if(typeof r!="object"||r===null)return ot(r);const e=[];for(const s in r)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=ot(e[s]),n+=":",n+=Wd(r[e[s]]);return n+="}",n},Jv=function(r,e){const n=r.length;if(n<=e)return[r];const s=[];for(let o=0;o<n;o+=e)o+e>n?s.push(r.substring(o,n)):s.push(r.substring(o,o+e));return s};function gt(r,e){for(const n in r)r.hasOwnProperty(n)&&e(n,r[n])}const Xv=function(r){B(!Bd(r),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let o,l,u,p,m;r===0?(l=0,u=0,o=1/r===-1/0?1:0):(o=r<0,r=Math.abs(r),r>=Math.pow(2,1-s)?(p=Math.min(Math.floor(Math.log(r)/Math.LN2),s),l=p+s,u=Math.round(r*Math.pow(2,n-p)-Math.pow(2,n))):(l=0,u=Math.round(r/Math.pow(2,1-s-n))));const g=[];for(m=n;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);for(m=e;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(o?1:0),g.reverse();const w=g.join("");let _="";for(m=0;m<64;m+=8){let y=parseInt(w.substr(m,8),2).toString(16);y.length===1&&(y="0"+y),_=_+y}return _.toLowerCase()},xN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},CN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function EN(r,e){let n="Unknown Error";r==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?n="Client doesn't have permission to access the desired data.":r==="unavailable"&&(n="The service is unavailable");const s=new Error(r+" at "+e._path.toString()+": "+n);return s.code=r.toUpperCase(),s}const NN=new RegExp("^-?(0*)\\d{1,10}$"),IN=-2147483648,TN=2147483647,cg=function(r){if(NN.test(r)){const e=Number(r);if(e>=IN&&e<=TN)return e}return null},Bi=function(r){try{r()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Et("Exception was thrown by user callback.",n),e},Math.floor(0))}},kN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zs=function(r,e){const n=setTimeout(r,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Zt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Et(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(mt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Et(e)}}class Ma{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ma.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="5",Zv="v",e_="s",t_="r",n_="f",r_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,i_="ls",s_="p",ad="ac",o_="websocket",a_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,n,s,o,l=!1,u="",p=!1,m=!1,g=null){this.secure=n,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function bN(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function c_(r,e,n){B(typeof e=="string","typeof type must == string"),B(typeof n=="object","typeof params must == object");let s;if(e===o_)s=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===a_)s=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);bN(r)&&(n.ns=r.namespace);const o=[];return gt(n,(l,u)=>{o.push(l+"="+u)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.counters_={}}incrementCounter(e,n=1){pn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return RS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu={},Mu={};function Hd(r){const e=r.toString();return Lu[e]||(Lu[e]=new AN),Lu[e]}function DN(r,e){const n=r.toString();return Mu[n]||(Mu[n]=e()),Mu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Bi(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="start",ON="close",LN="pLPCommand",MN="pRTLPCB",u_="id",d_="pw",h_="ser",FN="cb",UN="seg",$N="ts",zN="d",BN="dframe",f_=1870,p_=30,WN=f_-p_,VN=25e3,HN=3e4;class wi{constructor(e,n,s,o,l,u,p){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=o,this.authToken=l,this.transportSessionId=u,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ho(e),this.stats_=Hd(n),this.urlFn=m=>(this.appCheckToken&&(m[ad]=this.appCheckToken),c_(n,a_,m))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new jN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HN)),wN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qd((...l)=>{const[u,p,m,g,w]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===ug)this.id=p,this.password=m;else if(u===ON)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,p]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,p)},()=>{this.onClosed_()},this.urlFn);const s={};s[ug]="t",s[h_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[FN]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Zv]=Vd,this.transportSessionId&&(s[e_]=this.transportSessionId),this.lastSessionId&&(s[i_]=this.lastSessionId),this.applicationId&&(s[s_]=this.applicationId),this.appCheckToken&&(s[ad]=this.appCheckToken),typeof location<"u"&&location.hostname&&r_.test(location.hostname)&&(s[t_]=n_);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wi.forceAllow_=!0}static forceDisallow(){wi.forceDisallow_=!0}static isAvailable(){return wi.forceAllow_?!0:!wi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xN()&&!CN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ot(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=rv(n),o=Jv(s,WN);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[BN]="t",s[u_]=e,s[d_]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ot(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class qd{constructor(e,n,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=vN(),window[LN+this.uniqueCallbackIdentifier]=e,window[MN+this.uniqueCallbackIdentifier]=n,this.myIFrame=qd.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(p){mt("frame writing exception"),p.stack&&mt(p.stack),mt(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||mt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[u_]=this.myID,e[d_]=this.myPW,e[h_]=this.currentSerial;let n=this.urlFn(e),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+p_+s.length<=f_;){const u=this.pendingSegs.shift();s=s+"&"+UN+o+"="+u.seg+"&"+$N+o+"="+u.ts+"&"+zN+o+"="+u.d,o++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(s,Math.floor(VN)),l=()=>{clearTimeout(o),s()};this.addTag(e,l)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{mt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=16384,GN=45e3;let Ya=null;typeof MozWebSocket<"u"?Ya=MozWebSocket:typeof WebSocket<"u"&&(Ya=WebSocket);class en{constructor(e,n,s,o,l,u,p){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ho(this.connId),this.stats_=Hd(n),this.connURL=en.connectionURL_(n,u,p,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,l){const u={};return u[Zv]=Vd,typeof location<"u"&&location.hostname&&r_.test(location.hostname)&&(u[t_]=n_),n&&(u[e_]=n),s&&(u[i_]=s),o&&(u[ad]=o),l&&(u[s_]=l),c_(e,o_,u)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lr.set("previous_websocket_failure",!0);try{let s;WS(),this.mySock=new Ya(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){en.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Ya!==null&&!en.forceDisallow_}static previouslyFailed(){return Lr.isInMemoryStorage||Lr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Lr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Gs(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(B(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=ot(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Jv(n,qN);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(GN))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}en.responsesRequiredToBeHealthy=2;en.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{static get ALL_TRANSPORTS(){return[wi,en]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=en&&en.isAvailable();let s=n&&!en.previouslyFailed();if(e.webSocketOnly&&(n||Et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[en];else{const o=this.transports_=[];for(const l of Ys.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);Ys.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ys.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=6e4,QN=5e3,YN=10*1024,JN=100*1024,Fu="t",dg="d",XN="s",hg="r",ZN="e",fg="o",pg="a",mg="n",gg="p",eI="h";class tI{constructor(e,n,s,o,l,u,p,m,g,w){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=u,this.onReady_=p,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ho("c:"+this.id+":"),this.transportManager_=new Ys(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=zs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>JN?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>YN?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Fu in e){const n=e[Fu];n===pg?this.upgradeIfSecondaryHealthy_():n===hg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===fg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ds("t",e),s=Ds("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:gg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:pg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:mg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ds("t",e),s=Ds("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ds(Fu,e);if(dg in e){const s=e[dg];if(n===eI){const o=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===mg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===XN?this.onConnectionShutdown_(s):n===hg?this.onReset_(s):n===ZN?od("Server Error: "+s):n===fg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):od("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Vd!==s&&Et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),zs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(KN))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(QN))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:gg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{put(e,n,s,o){}merge(e,n,s,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.allowedEvents_=e,this.listeners_={},B(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const o=this.getInitialEvent(e);o&&n.apply(s,o)}off(e,n,s){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===n&&(!s||s===o[l].context)){o.splice(l,1);return}}validateEventType_(e){B(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends g_{static getInstance(){return new Ja}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Td()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return B(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=32,_g=768;class je{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Pe(){return new je("")}function we(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function hr(r){return r.pieces_.length-r.pieceNum_}function Fe(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new je(r.pieces_,e)}function Gd(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function nI(r){let e="";for(let n=r.pieceNum_;n<r.pieces_.length;n++)r.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[n])));return e||"/"}function Js(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function v_(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let n=r.pieceNum_;n<r.pieces_.length-1;n++)e.push(r.pieces_[n]);return new je(e,0)}function Ye(r,e){const n=[];for(let s=r.pieceNum_;s<r.pieces_.length;s++)n.push(r.pieces_[s]);if(e instanceof je)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&n.push(s[o])}return new je(n,0)}function xe(r){return r.pieceNum_>=r.pieces_.length}function Ct(r,e){const n=we(r),s=we(e);if(n===null)return e;if(n===s)return Ct(Fe(r),Fe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function rI(r,e){const n=Js(r,0),s=Js(e,0);for(let o=0;o<n.length&&o<s.length;o++){const l=qr(n[o],s[o]);if(l!==0)return l}return n.length===s.length?0:n.length<s.length?-1:1}function Kd(r,e){if(hr(r)!==hr(e))return!1;for(let n=r.pieceNum_,s=e.pieceNum_;n<=r.pieces_.length;n++,s++)if(r.pieces_[n]!==e.pieces_[s])return!1;return!0}function Vt(r,e){let n=r.pieceNum_,s=e.pieceNum_;if(hr(r)>hr(e))return!1;for(;n<r.pieces_.length;){if(r.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class iI{constructor(e,n){this.errorPrefix_=n,this.parts_=Js(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=pl(this.parts_[s]);__(this)}}function sI(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=pl(e),__(r)}function oI(r){const e=r.parts_.pop();r.byteLength_-=pl(e),r.parts_.length>0&&(r.byteLength_-=1)}function __(r){if(r.byteLength_>_g)throw new Error(r.errorPrefix_+"has a key path longer than "+_g+" bytes ("+r.byteLength_+").");if(r.parts_.length>vg)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vg+") or object contains a cycle "+jr(r))}function jr(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends g_{static getInstance(){return new Qd}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return B(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=1e3,aI=300*1e3,yg=30*1e3,lI=1.3,cI=3e4,uI="server_kill",wg=3;class Pn extends m_{constructor(e,n,s,o,l,u,p,m){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=Pn.nextPersistentConnectionId_++,this.log_=ho("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=js,this.maxReconnectDelay_=aI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ja.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const o=++this.requestNumber_,l={r:o,a:e,b:n};this.log_(ot(l)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();const n=new so,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const p=u.d;u.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),n.promise}listen(e,n,s,o){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(u).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);const l={p:s},u="q";e.tag&&(l.q=n._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,p=>{const m=p.d,g=p.s;Pn.warnOnListenWarnings_(m,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&pn(e,"w")){const s=Ti(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',l=n._path.toString();Et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||YS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=yg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=QS(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{const l=o.s,u=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);const l={p:e},u="n";o&&(l.q=s,l.t=o),this.sendRequest(u,l)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){const l={p:n,d:s};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{o&&setTimeout(()=>{o(u.s,u.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,l){this.initConnection_();const u={p:n,d:s};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:o}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,l=>{this.log_(n+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const l=s.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ot(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):od("Unrecognized action received from server: "+ot(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=js,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=js,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>cI&&(this.reconnectDelay_=js),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Pn.nextConnectionId_++,l=this.lastSessionId;let u=!1,p=null;const m=function(){p?p.close():(u=!0,s())},g=function(_){B(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(_)};this.realtime_={close:m,sendRequest:g};const w=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,y]=await Promise.all([this.authTokenProvider_.getToken(w),this.appCheckTokenProvider_.getToken(w)]);u?mt("getToken() completed but was canceled"):(mt("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=y&&y.token,p=new tI(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,R=>{Et(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(uI)},l))}catch(_){this.log_("Failed to get token: "+_),u||(this.repoInfo_.nodeAdmin&&Et(_),m())}}}interrupt(e){mt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){mt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ju(this.interruptReasons_)&&(this.reconnectDelay_=js,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(l=>Wd(l)).join("$"):s="default";const o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const s=new je(e).toString();let o;if(this.listens.has(s)){const l=this.listens.get(s);o=l.get(n),l.delete(n),l.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){mt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wg&&(this.reconnectDelay_=yg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){mt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Kv.replace(/\./g,"-")]=1,Td()?e["framework.cordova"]=1:uv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ja.getInstance().currentlyOnline();return Ju(this.interruptReasons_)&&e}}Pn.nextPersistentConnectionId_=0;Pn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Se(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Se(Ri,e),o=new Se(Ri,n);return this.compare(s,o)!==0}minPost(){return Se.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa;class y_ extends _l{static get __EMPTY_NODE(){return Pa}static set __EMPTY_NODE(e){Pa=e}compare(e,n){return qr(e.name,n.name)}isDefinedOn(e){throw Mi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Se.MIN}maxPost(){return new Se(zr,Pa)}makePost(e,n){return B(typeof e=="string","KeyIndex indexValue must always be a string."),new Se(e,Pa)}toString(){return".key"}}const Ni=new y_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,s,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=n?s(e.key,n):1,o&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class dt{constructor(e,n,s,o,l){this.key=e,this.value=n,this.color=s??dt.RED,this.left=o??Dt.EMPTY_NODE,this.right=l??Dt.EMPTY_NODE}copy(e,n,s,o,l){return new dt(e??this.key,n??this.value,s??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const l=s(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):l===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Dt.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}dt.RED=!0;dt.BLACK=!1;class dI{copy(e,n,s,o,l){return this}insert(e,n,s){return new dt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Dt{constructor(e,n=Dt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Dt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,dt.BLACK,null,null))}remove(e){return new Dt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,o=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ra(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ra(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ra(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ra(this.root_,null,this.comparator_,!0,e)}}Dt.EMPTY_NODE=new dI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(r,e){return qr(r.name,e.name)}function Yd(r,e){return qr(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld;function fI(r){ld=r}const w_=function(r){return typeof r=="number"?"number:"+Xv(r):"string:"+r},S_=function(r){if(r.isLeafNode()){const e=r.val();B(typeof e=="string"||typeof e=="number"||typeof e=="object"&&pn(e,".sv"),"Priority must be a string or number.")}else B(r===ld||r.isEmpty(),"priority of unexpected type.");B(r===ld||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg;class ut{static set __childrenNodeConstructor(e){Sg=e}static get __childrenNodeConstructor(){return Sg}constructor(e,n=ut.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),S_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ut(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ut.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:we(e)===".priority"?this.priorityNode_:ut.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ut.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=we(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(B(s!==".priority"||hr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,ut.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+w_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Xv(this.value_):e+=this.value_,this.lazyHash_=Yv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ut.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ut.__childrenNodeConstructor?-1:(B(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,o=ut.VALUE_TYPE_ORDER.indexOf(n),l=ut.VALUE_TYPE_ORDER.indexOf(s);return B(o>=0,"Unknown leaf type: "+n),B(l>=0,"Unknown leaf type: "+s),o===l?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ut.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x_,C_;function pI(r){x_=r}function mI(r){C_=r}class gI extends _l{compare(e,n){const s=e.node.getPriority(),o=n.node.getPriority(),l=s.compareTo(o);return l===0?qr(e.name,n.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Se.MIN}maxPost(){return new Se(zr,new ut("[PRIORITY-POST]",C_))}makePost(e,n){const s=x_(e);return new Se(n,new ut("[PRIORITY-POST]",s))}toString(){return".priority"}}const Je=new gI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=Math.log(2);class _I{constructor(e){const n=l=>parseInt(Math.log(l)/vI,10),s=l=>parseInt(Array(l+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=s(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xa=function(r,e,n,s){r.sort(e);const o=function(m,g){const w=g-m;let _,y;if(w===0)return null;if(w===1)return _=r[m],y=n?n(_):_,new dt(y,_.node,dt.BLACK,null,null);{const R=parseInt(w/2,10)+m,A=o(m,R),O=o(R+1,g);return _=r[R],y=n?n(_):_,new dt(y,_.node,dt.BLACK,A,O)}},l=function(m){let g=null,w=null,_=r.length;const y=function(A,O){const j=_-A,ee=_;_-=A;const b=o(j+1,ee),G=r[j],V=n?n(G):G;R(new dt(V,G.node,O,null,b))},R=function(A){g?(g.left=A,g=A):(w=A,g=A)};for(let A=0;A<m.count;++A){const O=m.nextBitIsOne(),j=Math.pow(2,m.count-(A+1));O?y(j,dt.BLACK):(y(j,dt.BLACK),y(j,dt.RED))}return w},u=new _I(r.length),p=l(u);return new Dt(s||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu;const yi={};class kn{static get Default(){return B(yi&&Je,"ChildrenNode.ts has not been loaded"),Uu=Uu||new kn({".priority":yi},{".priority":Je}),Uu}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ti(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Dt?n:null}hasIndex(e){return pn(this.indexSet_,e.toString())}addIndex(e,n){B(e!==Ni,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const l=n.getIterator(Se.Wrap);let u=l.getNext();for(;u;)o=o||e.isDefinedOn(u.node),s.push(u),u=l.getNext();let p;o?p=Xa(s,e.getCompare()):p=yi;const m=e.toString(),g=Object.assign({},this.indexSet_);g[m]=e;const w=Object.assign({},this.indexes_);return w[m]=p,new kn(w,g)}addToIndexes(e,n){const s=Ba(this.indexes_,(o,l)=>{const u=Ti(this.indexSet_,l);if(B(u,"Missing index implementation for "+l),o===yi)if(u.isDefinedOn(e.node)){const p=[],m=n.getIterator(Se.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&p.push(g),g=m.getNext();return p.push(e),Xa(p,u.getCompare())}else return yi;else{const p=n.get(e.name);let m=o;return p&&(m=m.remove(new Se(e.name,p))),m.insert(e,e.node)}});return new kn(s,this.indexSet_)}removeFromIndexes(e,n){const s=Ba(this.indexes_,o=>{if(o===yi)return o;{const l=n.get(e.name);return l?o.remove(new Se(e.name,l)):o}});return new kn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Os;class ue{static get EMPTY_NODE(){return Os||(Os=new ue(new Dt(Yd),null,kn.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&S_(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Os}updatePriority(e){return this.children_.isEmpty()?this:new ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Os:n}}getChild(e){const n=we(e);return n===null?this:this.getImmediateChild(n).getChild(Fe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(B(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Se(e,n);let o,l;n.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(s,this.children_));const u=o.isEmpty()?Os:this.priorityNode_;return new ue(o,u,l)}}updateChild(e,n){const s=we(e);if(s===null)return n;{B(we(e)!==".priority"||hr(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(Fe(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,o=0,l=!0;if(this.forEachChild(Je,(u,p)=>{n[u]=p.val(e),s++,l&&ue.INTEGER_REGEXP_.test(u)?o=Math.max(o,Number(u)):l=!1}),!e&&l&&o<2*s){const u=[];for(const p in n)u[p]=n[p];return u}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+w_(this.getPriority().val())+":"),this.forEachChild(Je,(n,s)=>{const o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":Yv(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const o=this.resolveIndex_(s);if(o){const l=o.getPredecessorKey(new Se(e,n));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Se(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Se(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Se.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Se.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fo?-1:0}withIndex(e){if(e===Ni||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ni||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Je),o=n.getIterator(Je);let l=s.getNext(),u=o.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=s.getNext(),u=o.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===Ni?null:this.indexMap_.get(e.toString())}}ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yI extends ue{constructor(){super(new Dt(Yd),ue.EMPTY_NODE,kn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}}const fo=new yI;Object.defineProperties(Se,{MIN:{value:new Se(Ri,ue.EMPTY_NODE)},MAX:{value:new Se(zr,fo)}});y_.__EMPTY_NODE=ue.EMPTY_NODE;ut.__childrenNodeConstructor=ue;fI(fo);mI(fo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=!0;function st(r,e=null){if(r===null)return ue.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),B(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const n=r;return new ut(n,st(e))}if(!(r instanceof Array)&&wI){const n=[];let s=!1;if(gt(r,(u,p)=>{if(u.substring(0,1)!=="."){const m=st(p);m.isEmpty()||(s=s||!m.getPriority().isEmpty(),n.push(new Se(u,m)))}}),n.length===0)return ue.EMPTY_NODE;const l=Xa(n,hI,u=>u.name,Yd);if(s){const u=Xa(n,Je.getCompare());return new ue(l,st(e),new kn({".priority":u},{".priority":Je}))}else return new ue(l,st(e),kn.Default)}else{let n=ue.EMPTY_NODE;return gt(r,(s,o)=>{if(pn(r,s)&&s.substring(0,1)!=="."){const l=st(o);(l.isLeafNode()||!l.isEmpty())&&(n=n.updateImmediateChild(s,l))}}),n.updatePriority(st(e))}}pI(st);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI extends _l{constructor(e){super(),this.indexPath_=e,B(!xe(e)&&we(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),o=this.extractChild(n.node),l=s.compareTo(o);return l===0?qr(e.name,n.name):l}makePost(e,n){const s=st(e),o=ue.EMPTY_NODE.updateChild(this.indexPath_,s);return new Se(n,o)}maxPost(){const e=ue.EMPTY_NODE.updateChild(this.indexPath_,fo);return new Se(zr,e)}toString(){return Js(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI extends _l{compare(e,n){const s=e.node.compareTo(n.node);return s===0?qr(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Se.MIN}maxPost(){return Se.MAX}makePost(e,n){const s=st(e);return new Se(n,s)}toString(){return".value"}}const CI=new xI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(r){return{type:"value",snapshotNode:r}}function bi(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function Xs(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function Zs(r,e,n){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:n}}function EI(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this.index_=e}updateChild(e,n,s,o,l,u){B(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(n);return p.getChild(o).equals(s.getChild(o))&&p.isEmpty()===s.isEmpty()||(u!=null&&(s.isEmpty()?e.hasChild(n)?u.trackChildChange(Xs(n,p)):B(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?u.trackChildChange(bi(n,s)):u.trackChildChange(Zs(n,s,p))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Je,(o,l)=>{n.hasChild(o)||s.trackChildChange(Xs(o,l))}),n.isLeafNode()||n.forEachChild(Je,(o,l)=>{if(e.hasChild(o)){const u=e.getImmediateChild(o);u.equals(l)||s.trackChildChange(Zs(o,l,u))}else s.trackChildChange(bi(o,l))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.indexedFilter_=new Jd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=eo.getStartPost_(e),this.endPost_=eo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,o,l,u){return this.matches(new Se(n,s))||(s=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,o,l,u)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ue.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ue.EMPTY_NODE);const l=this;return n.forEachChild(Je,(u,p)=>{l.matches(new Se(u,p))||(o=o.updateImmediateChild(u,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new eo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,o,l,u){return this.rangedFilter_.matches(new Se(n,s))||(s=ue.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,o,l,u):this.fullLimitUpdateChild_(e,n,s,l,u)}updateFullNode(e,n,s){let o;if(n.isLeafNode()||n.isEmpty())o=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ue.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const p=l.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))o=o.updateImmediateChild(p.name,p.node),u++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(ue.EMPTY_NODE);let l;this.reverse_?l=o.getReverseIterator(this.index_):l=o.getIterator(this.index_);let u=0;for(;l.hasNext();){const p=l.getNext();u<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?u++:o=o.updateImmediateChild(p.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,o,l){let u;if(this.reverse_){const _=this.index_.getCompare();u=(y,R)=>_(R,y)}else u=this.index_.getCompare();const p=e;B(p.numChildren()===this.limit_,"");const m=new Se(n,s),g=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),w=this.rangedFilter_.matches(m);if(p.hasChild(n)){const _=p.getImmediateChild(n);let y=o.getChildAfterChild(this.index_,g,this.reverse_);for(;y!=null&&(y.name===n||p.hasChild(y.name));)y=o.getChildAfterChild(this.index_,y,this.reverse_);const R=y==null?1:u(y,m);if(w&&!s.isEmpty()&&R>=0)return l!=null&&l.trackChildChange(Zs(n,s,_)),p.updateImmediateChild(n,s);{l!=null&&l.trackChildChange(Xs(n,_));const O=p.updateImmediateChild(n,ue.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(l!=null&&l.trackChildChange(bi(y.name,y.node)),O.updateImmediateChild(y.name,y.node)):O}}else return s.isEmpty()?e:w&&u(g,m)>=0?(l!=null&&(l.trackChildChange(Xs(g.name,g.node)),l.trackChildChange(bi(n,s))),p.updateImmediateChild(n,s).updateImmediateChild(g.name,ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Je}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ri}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Je}copy(){const e=new Xd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function II(r){return r.loadsAllData()?new Jd(r.getIndex()):r.hasLimit()?new NI(r):new eo(r)}function xg(r){const e={};if(r.isDefault())return e;let n;if(r.index_===Je?n="$priority":r.index_===CI?n="$value":r.index_===Ni?n="$key":(B(r.index_ instanceof SI,"Unrecognized index type!"),n=r.index_.toString()),e.orderBy=ot(n),r.startSet_){const s=r.startAfterSet_?"startAfter":"startAt";e[s]=ot(r.indexStartValue_),r.startNameSet_&&(e[s]+=","+ot(r.indexStartName_))}if(r.endSet_){const s=r.endBeforeSet_?"endBefore":"endAt";e[s]=ot(r.indexEndValue_),r.endNameSet_&&(e[s]+=","+ot(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function Cg(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let n=r.viewFrom_;n===""&&(r.isViewFromLeft()?n="l":n="r"),e.vf=n}return r.index_!==Je&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends m_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(B(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=ho("p:rest:"),this.listens_={}}listen(e,n,s,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=Za.getListenId_(e,s),p={};this.listens_[u]=p;const m=xg(e._queryParams);this.restRequest_(l+".json",m,(g,w)=>{let _=w;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(l,_,!1,s),Ti(this.listens_,u)===p){let y;g?g===401?y="permission_denied":y="rest_error:"+g:y="ok",o(y,null)}})}unlisten(e,n){const s=Za.getListenId_(e,n);delete this.listens_[s]}get(e){const n=xg(e._queryParams),s=e._path.toString(),o=new so;return this.restRequest_(s+".json",n,(l,u)=>{let p=u;l===404&&(p=null,l=null),l===null?(this.onDataUpdate_(s,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(n.auth=o.accessToken),l&&l.token&&(n.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ui(n);this.log_("Sending REST request for "+u);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(s&&p.readyState===4){this.log_("REST Response for "+u+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=Gs(p.responseText)}catch{Et("Failed to parse JSON response for "+u+": "+p.responseText)}s(null,m)}else p.status!==401&&p.status!==404&&Et("Got unsuccessful REST response for "+u+" Status: "+p.status),s(p.status);s=null}},p.open("GET",u,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(){return{value:null,children:new Map}}function N_(r,e,n){if(xe(e))r.value=n,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,n);else{const s=we(e);r.children.has(s)||r.children.set(s,el());const o=r.children.get(s);e=Fe(e),N_(o,e,n)}}function cd(r,e,n){r.value!==null?n(e,r.value):kI(r,(s,o)=>{const l=new je(e.toString()+"/"+s);cd(o,l,n)})}function kI(r,e){r.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gt(this.last_,(s,o)=>{n[s]=n[s]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg=10*1e3,RI=30*1e3,bI=300*1e3;class AI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new PI(e);const s=Eg+(RI-Eg)*Math.random();zs(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;gt(e,(o,l)=>{l>0&&pn(this.statsToReport_,o)&&(n[o]=l,s=!0)}),s&&this.server_.reportStats(n),zs(this.reportStats_.bind(this),Math.floor(Math.random()*2*bI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(nn||(nn={}));function Zd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function eh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function th(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=nn.ACK_USER_WRITE,this.source=Zd()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new je(e));return new tl(Pe(),n,this.revert)}}else return B(we(this.path)===e,"operationForChild called for unrelated child."),new tl(Fe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n){this.source=e,this.path=n,this.type=nn.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new to(this.source,Pe()):new to(this.source,Fe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=nn.OVERWRITE}operationForChild(e){return xe(this.path)?new Br(this.source,Pe(),this.snap.getImmediateChild(e)):new Br(this.source,Fe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=nn.MERGE}operationForChild(e){if(xe(this.path)){const n=this.children.subtree(new je(e));return n.isEmpty()?null:n.value?new Br(this.source,Pe(),n.value):new Ai(this.source,Pe(),n)}else return B(we(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ai(this.source,Fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=we(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jI(r,e,n,s){const o=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&r.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(EI(u.childName,u.snapshotNode))}),Ls(r,o,"child_removed",e,s,n),Ls(r,o,"child_added",e,s,n),Ls(r,o,"child_moved",l,s,n),Ls(r,o,"child_changed",e,s,n),Ls(r,o,"value",e,s,n),o}function Ls(r,e,n,s,o,l){const u=s.filter(p=>p.type===n);u.sort((p,m)=>LI(r,p,m)),u.forEach(p=>{const m=OI(r,p,l);o.forEach(g=>{g.respondsTo(p.type)&&e.push(g.createEvent(m,r.query_))})})}function OI(r,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function LI(r,e,n){if(e.childName==null||n.childName==null)throw Mi("Should only compare child_ events.");const s=new Se(e.childName,e.snapshotNode),o=new Se(n.childName,n.snapshotNode);return r.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(r,e){return{eventCache:r,serverCache:e}}function Bs(r,e,n,s){return yl(new fr(e,n,s),r.serverCache)}function I_(r,e,n,s){return yl(r.eventCache,new fr(e,n,s))}function nl(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function Wr(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u;const MI=()=>($u||($u=new Dt(SN)),$u);class Me{static fromObject(e){let n=new Me(null);return gt(e,(s,o)=>{n=n.set(new je(s),o)}),n}constructor(e,n=MI()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Pe(),value:this.value};if(xe(e))return null;{const s=we(e),o=this.children.get(s);if(o!==null){const l=o.findRootMostMatchingPathAndValue(Fe(e),n);return l!=null?{path:Ye(new je(s),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const n=we(e),s=this.children.get(n);return s!==null?s.subtree(Fe(e)):new Me(null)}}set(e,n){if(xe(e))return new Me(n,this.children);{const s=we(e),l=(this.children.get(s)||new Me(null)).set(Fe(e),n),u=this.children.insert(s,l);return new Me(this.value,u)}}remove(e){if(xe(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=we(e),s=this.children.get(n);if(s){const o=s.remove(Fe(e));let l;return o.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,o),this.value===null&&l.isEmpty()?new Me(null):new Me(this.value,l)}else return this}}get(e){if(xe(e))return this.value;{const n=we(e),s=this.children.get(n);return s?s.get(Fe(e)):null}}setTree(e,n){if(xe(e))return n;{const s=we(e),l=(this.children.get(s)||new Me(null)).setTree(Fe(e),n);let u;return l.isEmpty()?u=this.children.remove(s):u=this.children.insert(s,l),new Me(this.value,u)}}fold(e){return this.fold_(Pe(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((o,l)=>{s[o]=l.fold_(Ye(e,o),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Pe(),n)}findOnPath_(e,n,s){const o=this.value?s(n,this.value):!1;if(o)return o;if(xe(e))return null;{const l=we(e),u=this.children.get(l);return u?u.findOnPath_(Fe(e),Ye(n,l),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Pe(),n)}foreachOnPath_(e,n,s){if(xe(e))return this;{this.value&&s(n,this.value);const o=we(e),l=this.children.get(o);return l?l.foreachOnPath_(Fe(e),Ye(n,o),s):new Me(null)}}foreach(e){this.foreach_(Pe(),e)}foreach_(e,n){this.children.inorderTraversal((s,o)=>{o.foreach_(Ye(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.writeTree_=e}static empty(){return new sn(new Me(null))}}function Ws(r,e,n){if(xe(e))return new sn(new Me(n));{const s=r.writeTree_.findRootMostValueAndPath(e);if(s!=null){const o=s.path;let l=s.value;const u=Ct(o,e);return l=l.updateChild(u,n),new sn(r.writeTree_.set(o,l))}else{const o=new Me(n),l=r.writeTree_.setTree(e,o);return new sn(l)}}}function ud(r,e,n){let s=r;return gt(n,(o,l)=>{s=Ws(s,Ye(e,o),l)}),s}function Ng(r,e){if(xe(e))return sn.empty();{const n=r.writeTree_.setTree(e,new Me(null));return new sn(n)}}function dd(r,e){return Gr(r,e)!=null}function Gr(r,e){const n=r.writeTree_.findRootMostValueAndPath(e);return n!=null?r.writeTree_.get(n.path).getChild(Ct(n.path,e)):null}function Ig(r){const e=[],n=r.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Je,(s,o)=>{e.push(new Se(s,o))}):r.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&e.push(new Se(s,o.value))}),e}function ur(r,e){if(xe(e))return r;{const n=Gr(r,e);return n!=null?new sn(new Me(n)):new sn(r.writeTree_.subtree(e))}}function hd(r){return r.writeTree_.isEmpty()}function Di(r,e){return T_(Pe(),r.writeTree_,e)}function T_(r,e,n){if(e.value!=null)return n.updateChild(r,e.value);{let s=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?(B(l.value!==null,"Priority writes must always be leaf nodes"),s=l.value):n=T_(Ye(r,o),l,n)}),!n.getChild(r).isEmpty()&&s!==null&&(n=n.updateChild(Ye(r,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(r,e){return b_(e,r)}function FI(r,e,n,s,o){B(s>r.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),r.allWrites.push({path:e,snap:n,writeId:s,visible:o}),o&&(r.visibleWrites=Ws(r.visibleWrites,e,n)),r.lastWriteId=s}function UI(r,e,n,s){B(s>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:n,writeId:s,visible:!0}),r.visibleWrites=ud(r.visibleWrites,e,n),r.lastWriteId=s}function $I(r,e){for(let n=0;n<r.allWrites.length;n++){const s=r.allWrites[n];if(s.writeId===e)return s}return null}function zI(r,e){const n=r.allWrites.findIndex(p=>p.writeId===e);B(n>=0,"removeWrite called with nonexistent writeId.");const s=r.allWrites[n];r.allWrites.splice(n,1);let o=s.visible,l=!1,u=r.allWrites.length-1;for(;o&&u>=0;){const p=r.allWrites[u];p.visible&&(u>=n&&BI(p,s.path)?o=!1:Vt(s.path,p.path)&&(l=!0)),u--}if(o){if(l)return WI(r),!0;if(s.snap)r.visibleWrites=Ng(r.visibleWrites,s.path);else{const p=s.children;gt(p,m=>{r.visibleWrites=Ng(r.visibleWrites,Ye(s.path,m))})}return!0}else return!1}function BI(r,e){if(r.snap)return Vt(r.path,e);for(const n in r.children)if(r.children.hasOwnProperty(n)&&Vt(Ye(r.path,n),e))return!0;return!1}function WI(r){r.visibleWrites=k_(r.allWrites,VI,Pe()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function VI(r){return r.visible}function k_(r,e,n){let s=sn.empty();for(let o=0;o<r.length;++o){const l=r[o];if(e(l)){const u=l.path;let p;if(l.snap)Vt(n,u)?(p=Ct(n,u),s=Ws(s,p,l.snap)):Vt(u,n)&&(p=Ct(u,n),s=Ws(s,Pe(),l.snap.getChild(p)));else if(l.children){if(Vt(n,u))p=Ct(n,u),s=ud(s,p,l.children);else if(Vt(u,n))if(p=Ct(u,n),xe(p))s=ud(s,Pe(),l.children);else{const m=Ti(l.children,we(p));if(m){const g=m.getChild(Fe(p));s=Ws(s,Pe(),g)}}}else throw Mi("WriteRecord should have .snap or .children")}}return s}function P_(r,e,n,s,o){if(!s&&!o){const l=Gr(r.visibleWrites,e);if(l!=null)return l;{const u=ur(r.visibleWrites,e);if(hd(u))return n;if(n==null&&!dd(u,Pe()))return null;{const p=n||ue.EMPTY_NODE;return Di(u,p)}}}else{const l=ur(r.visibleWrites,e);if(!o&&hd(l))return n;if(!o&&n==null&&!dd(l,Pe()))return null;{const u=function(g){return(g.visible||o)&&(!s||!~s.indexOf(g.writeId))&&(Vt(g.path,e)||Vt(e,g.path))},p=k_(r.allWrites,u,e),m=n||ue.EMPTY_NODE;return Di(p,m)}}}function HI(r,e,n){let s=ue.EMPTY_NODE;const o=Gr(r.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Je,(l,u)=>{s=s.updateImmediateChild(l,u)}),s;if(n){const l=ur(r.visibleWrites,e);return n.forEachChild(Je,(u,p)=>{const m=Di(ur(l,new je(u)),p);s=s.updateImmediateChild(u,m)}),Ig(l).forEach(u=>{s=s.updateImmediateChild(u.name,u.node)}),s}else{const l=ur(r.visibleWrites,e);return Ig(l).forEach(u=>{s=s.updateImmediateChild(u.name,u.node)}),s}}function qI(r,e,n,s,o){B(s||o,"Either existingEventSnap or existingServerSnap must exist");const l=Ye(e,n);if(dd(r.visibleWrites,l))return null;{const u=ur(r.visibleWrites,l);return hd(u)?o.getChild(n):Di(u,o.getChild(n))}}function GI(r,e,n,s){const o=Ye(e,n),l=Gr(r.visibleWrites,o);if(l!=null)return l;if(s.isCompleteForChild(n)){const u=ur(r.visibleWrites,o);return Di(u,s.getNode().getImmediateChild(n))}else return null}function KI(r,e){return Gr(r.visibleWrites,e)}function QI(r,e,n,s,o,l,u){let p;const m=ur(r.visibleWrites,e),g=Gr(m,Pe());if(g!=null)p=g;else if(n!=null)p=Di(m,n);else return[];if(p=p.withIndex(u),!p.isEmpty()&&!p.isLeafNode()){const w=[],_=u.getCompare(),y=l?p.getReverseIteratorFrom(s,u):p.getIteratorFrom(s,u);let R=y.getNext();for(;R&&w.length<o;)_(R,s)!==0&&w.push(R),R=y.getNext();return w}else return[]}function YI(){return{visibleWrites:sn.empty(),allWrites:[],lastWriteId:-1}}function rl(r,e,n,s){return P_(r.writeTree,r.treePath,e,n,s)}function nh(r,e){return HI(r.writeTree,r.treePath,e)}function Tg(r,e,n,s){return qI(r.writeTree,r.treePath,e,n,s)}function il(r,e){return KI(r.writeTree,Ye(r.treePath,e))}function JI(r,e,n,s,o,l){return QI(r.writeTree,r.treePath,e,n,s,o,l)}function rh(r,e,n){return GI(r.writeTree,r.treePath,e,n)}function R_(r,e){return b_(Ye(r.treePath,e),r.writeTree)}function b_(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;B(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),B(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const l=o.type;if(n==="child_added"&&l==="child_removed")this.changeMap.set(s,Zs(s,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&l==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&l==="child_changed")this.changeMap.set(s,Xs(s,o.oldSnap));else if(n==="child_changed"&&l==="child_added")this.changeMap.set(s,bi(s,e.snapshotNode));else if(n==="child_changed"&&l==="child_changed")this.changeMap.set(s,Zs(s,e.snapshotNode,o.oldSnap));else throw Mi("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const A_=new ZI;class ih{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new fr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rh(this.writes_,e,s)}}getChildAfterChild(e,n,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Wr(this.viewCache_),l=JI(this.writes_,o,n,1,s,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(r){return{filter:r}}function t1(r,e){B(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),B(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function n1(r,e,n,s,o){const l=new XI;let u,p;if(n.type===nn.OVERWRITE){const g=n;g.source.fromUser?u=fd(r,e,g.path,g.snap,s,o,l):(B(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered()&&!xe(g.path),u=sl(r,e,g.path,g.snap,s,o,p,l))}else if(n.type===nn.MERGE){const g=n;g.source.fromUser?u=i1(r,e,g.path,g.children,s,o,l):(B(g.source.fromServer,"Unknown source."),p=g.source.tagged||e.serverCache.isFiltered(),u=pd(r,e,g.path,g.children,s,o,p,l))}else if(n.type===nn.ACK_USER_WRITE){const g=n;g.revert?u=a1(r,e,g.path,s,o,l):u=s1(r,e,g.path,g.affectedTree,s,o,l)}else if(n.type===nn.LISTEN_COMPLETE)u=o1(r,e,n.path,s,l);else throw Mi("Unknown operation type: "+n.type);const m=l.getChanges();return r1(e,u,m),{viewCache:u,changes:m}}function r1(r,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),l=nl(r);(n.length>0||!r.eventCache.isFullyInitialized()||o&&!s.getNode().equals(l)||!s.getNode().getPriority().equals(l.getPriority()))&&n.push(E_(nl(e)))}}function D_(r,e,n,s,o,l){const u=e.eventCache;if(il(s,n)!=null)return e;{let p,m;if(xe(n))if(B(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Wr(e),w=g instanceof ue?g:ue.EMPTY_NODE,_=nh(s,w);p=r.filter.updateFullNode(e.eventCache.getNode(),_,l)}else{const g=rl(s,Wr(e));p=r.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=we(n);if(g===".priority"){B(hr(n)===1,"Can't have a priority with additional path components");const w=u.getNode();m=e.serverCache.getNode();const _=Tg(s,n,w,m);_!=null?p=r.filter.updatePriority(w,_):p=u.getNode()}else{const w=Fe(n);let _;if(u.isCompleteForChild(g)){m=e.serverCache.getNode();const y=Tg(s,n,u.getNode(),m);y!=null?_=u.getNode().getImmediateChild(g).updateChild(w,y):_=u.getNode().getImmediateChild(g)}else _=rh(s,g,e.serverCache);_!=null?p=r.filter.updateChild(u.getNode(),g,_,w,o,l):p=u.getNode()}}return Bs(e,p,u.isFullyInitialized()||xe(n),r.filter.filtersNodes())}}function sl(r,e,n,s,o,l,u,p){const m=e.serverCache;let g;const w=u?r.filter:r.filter.getIndexedFilter();if(xe(n))g=w.updateFullNode(m.getNode(),s,null);else if(w.filtersNodes()&&!m.isFiltered()){const R=m.getNode().updateChild(n,s);g=w.updateFullNode(m.getNode(),R,null)}else{const R=we(n);if(!m.isCompleteForPath(n)&&hr(n)>1)return e;const A=Fe(n),j=m.getNode().getImmediateChild(R).updateChild(A,s);R===".priority"?g=w.updatePriority(m.getNode(),j):g=w.updateChild(m.getNode(),R,j,A,A_,null)}const _=I_(e,g,m.isFullyInitialized()||xe(n),w.filtersNodes()),y=new ih(o,_,l);return D_(r,_,n,o,y,p)}function fd(r,e,n,s,o,l,u){const p=e.eventCache;let m,g;const w=new ih(o,e,l);if(xe(n))g=r.filter.updateFullNode(e.eventCache.getNode(),s,u),m=Bs(e,g,!0,r.filter.filtersNodes());else{const _=we(n);if(_===".priority")g=r.filter.updatePriority(e.eventCache.getNode(),s),m=Bs(e,g,p.isFullyInitialized(),p.isFiltered());else{const y=Fe(n),R=p.getNode().getImmediateChild(_);let A;if(xe(y))A=s;else{const O=w.getCompleteChild(_);O!=null?Gd(y)===".priority"&&O.getChild(v_(y)).isEmpty()?A=O:A=O.updateChild(y,s):A=ue.EMPTY_NODE}if(R.equals(A))m=e;else{const O=r.filter.updateChild(p.getNode(),_,A,y,w,u);m=Bs(e,O,p.isFullyInitialized(),r.filter.filtersNodes())}}}return m}function kg(r,e){return r.eventCache.isCompleteForChild(e)}function i1(r,e,n,s,o,l,u){let p=e;return s.foreach((m,g)=>{const w=Ye(n,m);kg(e,we(w))&&(p=fd(r,p,w,g,o,l,u))}),s.foreach((m,g)=>{const w=Ye(n,m);kg(e,we(w))||(p=fd(r,p,w,g,o,l,u))}),p}function Pg(r,e,n){return n.foreach((s,o)=>{e=e.updateChild(s,o)}),e}function pd(r,e,n,s,o,l,u,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;xe(n)?g=s:g=new Me(null).setTree(n,s);const w=e.serverCache.getNode();return g.children.inorderTraversal((_,y)=>{if(w.hasChild(_)){const R=e.serverCache.getNode().getImmediateChild(_),A=Pg(r,R,y);m=sl(r,m,new je(_),A,o,l,u,p)}}),g.children.inorderTraversal((_,y)=>{const R=!e.serverCache.isCompleteForChild(_)&&y.value===null;if(!w.hasChild(_)&&!R){const A=e.serverCache.getNode().getImmediateChild(_),O=Pg(r,A,y);m=sl(r,m,new je(_),O,o,l,u,p)}}),m}function s1(r,e,n,s,o,l,u){if(il(o,n)!=null)return e;const p=e.serverCache.isFiltered(),m=e.serverCache;if(s.value!=null){if(xe(n)&&m.isFullyInitialized()||m.isCompleteForPath(n))return sl(r,e,n,m.getNode().getChild(n),o,l,p,u);if(xe(n)){let g=new Me(null);return m.getNode().forEachChild(Ni,(w,_)=>{g=g.set(new je(w),_)}),pd(r,e,n,g,o,l,p,u)}else return e}else{let g=new Me(null);return s.foreach((w,_)=>{const y=Ye(n,w);m.isCompleteForPath(y)&&(g=g.set(w,m.getNode().getChild(y)))}),pd(r,e,n,g,o,l,p,u)}}function o1(r,e,n,s,o){const l=e.serverCache,u=I_(e,l.getNode(),l.isFullyInitialized()||xe(n),l.isFiltered());return D_(r,u,n,s,A_,o)}function a1(r,e,n,s,o,l){let u;if(il(s,n)!=null)return e;{const p=new ih(s,e,o),m=e.eventCache.getNode();let g;if(xe(n)||we(n)===".priority"){let w;if(e.serverCache.isFullyInitialized())w=rl(s,Wr(e));else{const _=e.serverCache.getNode();B(_ instanceof ue,"serverChildren would be complete if leaf node"),w=nh(s,_)}w=w,g=r.filter.updateFullNode(m,w,l)}else{const w=we(n);let _=rh(s,w,e.serverCache);_==null&&e.serverCache.isCompleteForChild(w)&&(_=m.getImmediateChild(w)),_!=null?g=r.filter.updateChild(m,w,_,Fe(n),p,l):e.eventCache.getNode().hasChild(w)?g=r.filter.updateChild(m,w,ue.EMPTY_NODE,Fe(n),p,l):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=rl(s,Wr(e)),u.isLeafNode()&&(g=r.filter.updateFullNode(g,u,l)))}return u=e.serverCache.isFullyInitialized()||il(s,Pe())!=null,Bs(e,g,u,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new Jd(s.getIndex()),l=II(s);this.processor_=e1(l);const u=n.serverCache,p=n.eventCache,m=o.updateFullNode(ue.EMPTY_NODE,u.getNode(),null),g=l.updateFullNode(ue.EMPTY_NODE,p.getNode(),null),w=new fr(m,u.isFullyInitialized(),o.filtersNodes()),_=new fr(g,p.isFullyInitialized(),l.filtersNodes());this.viewCache_=yl(_,w),this.eventGenerator_=new DI(this.query_)}get query(){return this.query_}}function c1(r){return r.viewCache_.serverCache.getNode()}function u1(r){return nl(r.viewCache_)}function d1(r,e){const n=Wr(r.viewCache_);return n&&(r.query._queryParams.loadsAllData()||!xe(e)&&!n.getImmediateChild(we(e)).isEmpty())?n.getChild(e):null}function Rg(r){return r.eventRegistrations_.length===0}function h1(r,e){r.eventRegistrations_.push(e)}function bg(r,e,n){const s=[];if(n){B(e==null,"A cancel should cancel all event registrations.");const o=r.query._path;r.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(n,o);u&&s.push(u)})}if(e){let o=[];for(let l=0;l<r.eventRegistrations_.length;++l){const u=r.eventRegistrations_[l];if(!u.matches(e))o.push(u);else if(e.hasAnyCallback()){o=o.concat(r.eventRegistrations_.slice(l+1));break}}r.eventRegistrations_=o}else r.eventRegistrations_=[];return s}function Ag(r,e,n,s){e.type===nn.MERGE&&e.source.queryId!==null&&(B(Wr(r.viewCache_),"We should always have a full cache before handling merges"),B(nl(r.viewCache_),"Missing event cache, even though we have a server cache"));const o=r.viewCache_,l=n1(r.processor_,o,e,n,s);return t1(r.processor_,l.viewCache),B(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=l.viewCache,j_(r,l.changes,l.viewCache.eventCache.getNode(),null)}function f1(r,e){const n=r.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Je,(l,u)=>{s.push(bi(l,u))}),n.isFullyInitialized()&&s.push(E_(n.getNode())),j_(r,s,n.getNode(),e)}function j_(r,e,n,s){const o=s?[s]:r.eventRegistrations_;return jI(r.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol;class O_{constructor(){this.views=new Map}}function p1(r){B(!ol,"__referenceConstructor has already been defined"),ol=r}function m1(){return B(ol,"Reference.ts has not been loaded"),ol}function g1(r){return r.views.size===0}function sh(r,e,n,s){const o=e.source.queryId;if(o!==null){const l=r.views.get(o);return B(l!=null,"SyncTree gave us an op for an invalid query."),Ag(l,e,n,s)}else{let l=[];for(const u of r.views.values())l=l.concat(Ag(u,e,n,s));return l}}function L_(r,e,n,s,o){const l=e._queryIdentifier,u=r.views.get(l);if(!u){let p=rl(n,o?s:null),m=!1;p?m=!0:s instanceof ue?(p=nh(n,s),m=!1):(p=ue.EMPTY_NODE,m=!1);const g=yl(new fr(p,m,!1),new fr(s,o,!1));return new l1(e,g)}return u}function v1(r,e,n,s,o,l){const u=L_(r,e,s,o,l);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,u),h1(u,n),f1(u,n)}function _1(r,e,n,s){const o=e._queryIdentifier,l=[];let u=[];const p=pr(r);if(o==="default")for(const[m,g]of r.views.entries())u=u.concat(bg(g,n,s)),Rg(g)&&(r.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=r.views.get(o);m&&(u=u.concat(bg(m,n,s)),Rg(m)&&(r.views.delete(o),m.query._queryParams.loadsAllData()||l.push(m.query)))}return p&&!pr(r)&&l.push(new(m1())(e._repo,e._path)),{removed:l,events:u}}function M_(r){const e=[];for(const n of r.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function dr(r,e){let n=null;for(const s of r.views.values())n=n||d1(s,e);return n}function F_(r,e){if(e._queryParams.loadsAllData())return Sl(r);{const s=e._queryIdentifier;return r.views.get(s)}}function U_(r,e){return F_(r,e)!=null}function pr(r){return Sl(r)!=null}function Sl(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al;function y1(r){B(!al,"__referenceConstructor has already been defined"),al=r}function w1(){return B(al,"Reference.ts has not been loaded"),al}let S1=1;class Dg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=YI(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $_(r,e,n,s,o){return FI(r.pendingWriteTree_,e,n,s,o),o?Wi(r,new Br(Zd(),e,n)):[]}function x1(r,e,n,s){UI(r.pendingWriteTree_,e,n,s);const o=Me.fromObject(n);return Wi(r,new Ai(Zd(),e,o))}function sr(r,e,n=!1){const s=$I(r.pendingWriteTree_,e);if(zI(r.pendingWriteTree_,e)){let l=new Me(null);return s.snap!=null?l=l.set(Pe(),!0):gt(s.children,u=>{l=l.set(new je(u),!0)}),Wi(r,new tl(s.path,l,n))}else return[]}function po(r,e,n){return Wi(r,new Br(eh(),e,n))}function C1(r,e,n){const s=Me.fromObject(n);return Wi(r,new Ai(eh(),e,s))}function E1(r,e){return Wi(r,new to(eh(),e))}function N1(r,e,n){const s=ah(r,n);if(s){const o=lh(s),l=o.path,u=o.queryId,p=Ct(l,e),m=new to(th(u),p);return ch(r,l,m)}else return[]}function ll(r,e,n,s,o=!1){const l=e._path,u=r.syncPointTree_.get(l);let p=[];if(u&&(e._queryIdentifier==="default"||U_(u,e))){const m=_1(u,e,n,s);g1(u)&&(r.syncPointTree_=r.syncPointTree_.remove(l));const g=m.removed;if(p=m.events,!o){const w=g.findIndex(y=>y._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(l,(y,R)=>pr(R));if(w&&!_){const y=r.syncPointTree_.subtree(l);if(!y.isEmpty()){const R=k1(y);for(let A=0;A<R.length;++A){const O=R[A],j=O.query,ee=V_(r,O);r.listenProvider_.startListening(Vs(j),no(r,j),ee.hashFn,ee.onComplete)}}}!_&&g.length>0&&!s&&(w?r.listenProvider_.stopListening(Vs(e),null):g.forEach(y=>{const R=r.queryToTagMap.get(xl(y));r.listenProvider_.stopListening(Vs(y),R)}))}P1(r,g)}return p}function z_(r,e,n,s){const o=ah(r,s);if(o!=null){const l=lh(o),u=l.path,p=l.queryId,m=Ct(u,e),g=new Br(th(p),m,n);return ch(r,u,g)}else return[]}function I1(r,e,n,s){const o=ah(r,s);if(o){const l=lh(o),u=l.path,p=l.queryId,m=Ct(u,e),g=Me.fromObject(n),w=new Ai(th(p),m,g);return ch(r,u,w)}else return[]}function md(r,e,n,s=!1){const o=e._path;let l=null,u=!1;r.syncPointTree_.foreachOnPath(o,(y,R)=>{const A=Ct(y,o);l=l||dr(R,A),u=u||pr(R)});let p=r.syncPointTree_.get(o);p?(u=u||pr(p),l=l||dr(p,Pe())):(p=new O_,r.syncPointTree_=r.syncPointTree_.set(o,p));let m;l!=null?m=!0:(m=!1,l=ue.EMPTY_NODE,r.syncPointTree_.subtree(o).foreachChild((R,A)=>{const O=dr(A,Pe());O&&(l=l.updateImmediateChild(R,O))}));const g=U_(p,e);if(!g&&!e._queryParams.loadsAllData()){const y=xl(e);B(!r.queryToTagMap.has(y),"View does not exist, but we have a tag");const R=R1();r.queryToTagMap.set(y,R),r.tagToQueryMap.set(R,y)}const w=wl(r.pendingWriteTree_,o);let _=v1(p,e,n,w,l,m);if(!g&&!u&&!s){const y=F_(p,e);_=_.concat(b1(r,e,y))}return _}function oh(r,e,n){const o=r.pendingWriteTree_,l=r.syncPointTree_.findOnPath(e,(u,p)=>{const m=Ct(u,e),g=dr(p,m);if(g)return g});return P_(o,e,l,n,!0)}function T1(r,e){const n=e._path;let s=null;r.syncPointTree_.foreachOnPath(n,(g,w)=>{const _=Ct(g,n);s=s||dr(w,_)});let o=r.syncPointTree_.get(n);o?s=s||dr(o,Pe()):(o=new O_,r.syncPointTree_=r.syncPointTree_.set(n,o));const l=s!=null,u=l?new fr(s,!0,!1):null,p=wl(r.pendingWriteTree_,e._path),m=L_(o,e,p,l?u.getNode():ue.EMPTY_NODE,l);return u1(m)}function Wi(r,e){return B_(e,r.syncPointTree_,null,wl(r.pendingWriteTree_,Pe()))}function B_(r,e,n,s){if(xe(r.path))return W_(r,e,n,s);{const o=e.get(Pe());n==null&&o!=null&&(n=dr(o,Pe()));let l=[];const u=we(r.path),p=r.operationForChild(u),m=e.children.get(u);if(m&&p){const g=n?n.getImmediateChild(u):null,w=R_(s,u);l=l.concat(B_(p,m,g,w))}return o&&(l=l.concat(sh(o,r,s,n))),l}}function W_(r,e,n,s){const o=e.get(Pe());n==null&&o!=null&&(n=dr(o,Pe()));let l=[];return e.children.inorderTraversal((u,p)=>{const m=n?n.getImmediateChild(u):null,g=R_(s,u),w=r.operationForChild(u);w&&(l=l.concat(W_(w,p,m,g)))}),o&&(l=l.concat(sh(o,r,s,n))),l}function V_(r,e){const n=e.query,s=no(r,n);return{hashFn:()=>(c1(e)||ue.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?N1(r,n._path,s):E1(r,n._path);{const l=EN(o,n);return ll(r,n,null,l)}}}}function no(r,e){const n=xl(e);return r.queryToTagMap.get(n)}function xl(r){return r._path.toString()+"$"+r._queryIdentifier}function ah(r,e){return r.tagToQueryMap.get(e)}function lh(r){const e=r.indexOf("$");return B(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new je(r.substr(0,e))}}function ch(r,e,n){const s=r.syncPointTree_.get(e);B(s,"Missing sync point for query tag that we're tracking");const o=wl(r.pendingWriteTree_,e);return sh(s,n,o,null)}function k1(r){return r.fold((e,n,s)=>{if(n&&pr(n))return[Sl(n)];{let o=[];return n&&(o=M_(n)),gt(s,(l,u)=>{o=o.concat(u)}),o}})}function Vs(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(w1())(r._repo,r._path):r}function P1(r,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const o=xl(s),l=r.queryToTagMap.get(o);r.queryToTagMap.delete(o),r.tagToQueryMap.delete(l)}}}function R1(){return S1++}function b1(r,e,n){const s=e._path,o=no(r,e),l=V_(r,n),u=r.listenProvider_.startListening(Vs(e),o,l.hashFn,l.onComplete),p=r.syncPointTree_.subtree(s);if(o)B(!pr(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((g,w,_)=>{if(!xe(g)&&w&&pr(w))return[Sl(w).query];{let y=[];return w&&(y=y.concat(M_(w).map(R=>R.query))),gt(_,(R,A)=>{y=y.concat(A)}),y}});for(let g=0;g<m.length;++g){const w=m[g];r.listenProvider_.stopListening(Vs(w),no(r,w))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new uh(n)}node(){return this.node_}}class dh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ye(this.path_,e);return new dh(this.syncTree_,n)}node(){return oh(this.syncTree_,this.path_)}}const A1=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},jg=function(r,e,n){if(!r||typeof r!="object")return r;if(B(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return D1(r[".sv"],e,n);if(typeof r[".sv"]=="object")return j1(r[".sv"],e);B(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},D1=function(r,e,n){switch(r){case"timestamp":return n.timestamp;default:B(!1,"Unexpected server value: "+r)}},j1=function(r,e,n){r.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const s=r.increment;typeof s!="number"&&B(!1,"Unexpected increment value: "+s);const o=e.node();if(B(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const u=o.getValue();return typeof u!="number"?s:u+s},H_=function(r,e,n,s){return hh(e,new dh(n,r),s)},q_=function(r,e,n){return hh(r,new uh(e),n)};function hh(r,e,n){const s=r.getPriority().val(),o=jg(s,e.getImmediateChild(".priority"),n);let l;if(r.isLeafNode()){const u=r,p=jg(u.getValue(),e,n);return p!==u.getValue()||o!==u.getPriority().val()?new ut(p,st(o)):r}else{const u=r;return l=u,o!==u.getPriority().val()&&(l=l.updatePriority(new ut(o))),u.forEachChild(Je,(p,m)=>{const g=hh(m,e.getImmediateChild(p),n);g!==m&&(l=l.updateImmediateChild(p,g))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function ph(r,e){let n=e instanceof je?e:new je(e),s=r,o=we(n);for(;o!==null;){const l=Ti(s.node.children,o)||{children:{},childCount:0};s=new fh(o,s,l),n=Fe(n),o=we(n)}return s}function Vi(r){return r.node.value}function G_(r,e){r.node.value=e,gd(r)}function K_(r){return r.node.childCount>0}function O1(r){return Vi(r)===void 0&&!K_(r)}function Cl(r,e){gt(r.node.children,(n,s)=>{e(new fh(n,r,s))})}function Q_(r,e,n,s){n&&e(r),Cl(r,o=>{Q_(o,e,!0)})}function L1(r,e,n){let s=r.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function mo(r){return new je(r.parent===null?r.name:mo(r.parent)+"/"+r.name)}function gd(r){r.parent!==null&&M1(r.parent,r.name,r)}function M1(r,e,n){const s=O1(n),o=pn(r.node.children,e);s&&o?(delete r.node.children[e],r.node.childCount--,gd(r)):!s&&!o&&(r.node.children[e]=n.node,r.node.childCount++,gd(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=/[\[\].#$\/\u0000-\u001F\u007F]/,U1=/[\[\].#$\u0000-\u001F\u007F]/,zu=10*1024*1024,mh=function(r){return typeof r=="string"&&r.length!==0&&!F1.test(r)},Y_=function(r){return typeof r=="string"&&r.length!==0&&!U1.test(r)},$1=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Y_(r)},z1=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!Bd(r)||r&&typeof r=="object"&&pn(r,".sv")},J_=function(r,e,n,s){s&&e===void 0||El(fl(r,"value"),e,n)},El=function(r,e,n){const s=n instanceof je?new iI(n,r):n;if(e===void 0)throw new Error(r+"contains undefined "+jr(s));if(typeof e=="function")throw new Error(r+"contains a function "+jr(s)+" with contents = "+e.toString());if(Bd(e))throw new Error(r+"contains "+e.toString()+" "+jr(s));if(typeof e=="string"&&e.length>zu/3&&pl(e)>zu)throw new Error(r+"contains a string greater than "+zu+" utf8 bytes "+jr(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(gt(e,(u,p)=>{if(u===".value")o=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!mh(u)))throw new Error(r+" contains an invalid key ("+u+") "+jr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sI(s,u),El(r,p,s),oI(s)}),o&&l)throw new Error(r+' contains ".value" child '+jr(s)+" in addition to actual children.")}},B1=function(r,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const l=Js(s);for(let u=0;u<l.length;u++)if(!(l[u]===".priority"&&u===l.length-1)){if(!mh(l[u]))throw new Error(r+"contains an invalid key ("+l[u]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(rI);let o=null;for(n=0;n<e.length;n++){if(s=e[n],o!==null&&Vt(o,s))throw new Error(r+"contains a path "+o.toString()+" that is ancestor of another path "+s.toString());o=s}},W1=function(r,e,n,s){const o=fl(r,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];gt(e,(u,p)=>{const m=new je(u);if(El(o,p,Ye(n,m)),Gd(m)===".priority"&&!z1(p))throw new Error(o+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),B1(o,l)},X_=function(r,e,n,s){if(!Y_(n))throw new Error(fl(r,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},V1=function(r,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),X_(r,e,n)},gh=function(r,e){if(we(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},H1=function(r,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!mh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$1(n))throw new Error(fl(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Nl(r,e){let n=null;for(let s=0;s<e.length;s++){const o=e[s],l=o.getPath();n!==null&&!Kd(l,n.path)&&(r.eventLists_.push(n),n=null),n===null&&(n={events:[],path:l}),n.events.push(o)}n&&r.eventLists_.push(n)}function Z_(r,e,n){Nl(r,n),ey(r,s=>Kd(s,e))}function Ht(r,e,n){Nl(r,n),ey(r,s=>Vt(s,e)||Vt(e,s))}function ey(r,e){r.recursionDepth_++;let n=!0;for(let s=0;s<r.eventLists_.length;s++){const o=r.eventLists_[s];if(o){const l=o.path;e(l)?(G1(r.eventLists_[s]),r.eventLists_[s]=null):n=!1}}n&&(r.eventLists_=[]),r.recursionDepth_--}function G1(r){for(let e=0;e<r.events.length;e++){const n=r.events[e];if(n!==null){r.events[e]=null;const s=n.getEventRunner();$s&&mt("event: "+n.toString()),Bi(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="repo_interrupt",Q1=25;class Y1{constructor(e,n,s,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new q1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=el(),this.transactionQueueTree_=new fh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function J1(r,e,n){if(r.stats_=Hd(r.repoInfo_),r.forceRestClient_||kN())r.server_=new Za(r.repoInfo_,(s,o,l,u)=>{Og(r,s,o,l,u)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Lg(r,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ot(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}r.persistentConnection_=new Pn(r.repoInfo_,e,(s,o,l,u)=>{Og(r,s,o,l,u)},s=>{Lg(r,s)},s=>{X1(r,s)},r.authTokenProvider_,r.appCheckProvider_,n),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(s=>{r.server_.refreshAuthToken(s)}),r.appCheckProvider_.addTokenChangeListener(s=>{r.server_.refreshAppCheckToken(s.token)}),r.statsReporter_=DN(r.repoInfo_,()=>new AI(r.stats_,r.server_)),r.infoData_=new TI,r.infoSyncTree_=new Dg({startListening:(s,o,l,u)=>{let p=[];const m=r.infoData_.getNode(s._path);return m.isEmpty()||(p=po(r.infoSyncTree_,s._path,m),setTimeout(()=>{u("ok")},0)),p},stopListening:()=>{}}),vh(r,"connected",!1),r.serverSyncTree_=new Dg({startListening:(s,o,l,u)=>(r.server_.listen(s,l,o,(p,m)=>{const g=u(p,m);Ht(r.eventQueue_,s._path,g)}),[]),stopListening:(s,o)=>{r.server_.unlisten(s,o)}})}function ty(r){const n=r.infoData_.getNode(new je(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Il(r){return A1({timestamp:ty(r)})}function Og(r,e,n,s,o){r.dataUpdateCount++;const l=new je(e);n=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,n):n;let u=[];if(o)if(s){const m=Ba(n,g=>st(g));u=I1(r.serverSyncTree_,l,m,o)}else{const m=st(n);u=z_(r.serverSyncTree_,l,m,o)}else if(s){const m=Ba(n,g=>st(g));u=C1(r.serverSyncTree_,l,m)}else{const m=st(n);u=po(r.serverSyncTree_,l,m)}let p=l;u.length>0&&(p=ji(r,l)),Ht(r.eventQueue_,p,u)}function Lg(r,e){vh(r,"connected",e),e===!1&&nT(r)}function X1(r,e){gt(e,(n,s)=>{vh(r,n,s)})}function vh(r,e,n){const s=new je("/.info/"+e),o=st(n);r.infoData_.updateSnapshot(s,o);const l=po(r.infoSyncTree_,s,o);Ht(r.eventQueue_,s,l)}function _h(r){return r.nextWriteId_++}function Z1(r,e,n){const s=T1(r.serverSyncTree_,e);return s!=null?Promise.resolve(s):r.server_.get(e).then(o=>{const l=st(o).withIndex(e._queryParams.getIndex());md(r.serverSyncTree_,e,n,!0);let u;if(e._queryParams.loadsAllData())u=po(r.serverSyncTree_,e._path,l);else{const p=no(r.serverSyncTree_,e);u=z_(r.serverSyncTree_,e._path,l,p)}return Ht(r.eventQueue_,e._path,u),ll(r.serverSyncTree_,e,n,null,!0),l},o=>(go(r,"get for query "+ot(e)+" failed: "+o),Promise.reject(new Error(o))))}function eT(r,e,n,s,o){go(r,"set",{path:e.toString(),value:n,priority:s});const l=Il(r),u=st(n,s),p=oh(r.serverSyncTree_,e),m=q_(u,p,l),g=_h(r),w=$_(r.serverSyncTree_,e,m,g,!0);Nl(r.eventQueue_,w),r.server_.put(e.toString(),u.val(!0),(y,R)=>{const A=y==="ok";A||Et("set at "+e+" failed: "+y);const O=sr(r.serverSyncTree_,g,!A);Ht(r.eventQueue_,e,O),vd(r,o,y,R)});const _=wh(r,e);ji(r,_),Ht(r.eventQueue_,_,[])}function tT(r,e,n,s){go(r,"update",{path:e.toString(),value:n});let o=!0;const l=Il(r),u={};if(gt(n,(p,m)=>{o=!1,u[p]=H_(Ye(e,p),st(m),r.serverSyncTree_,l)}),o)mt("update() called with empty data.  Don't do anything."),vd(r,s,"ok",void 0);else{const p=_h(r),m=x1(r.serverSyncTree_,e,u,p);Nl(r.eventQueue_,m),r.server_.merge(e.toString(),n,(g,w)=>{const _=g==="ok";_||Et("update at "+e+" failed: "+g);const y=sr(r.serverSyncTree_,p,!_),R=y.length>0?ji(r,e):e;Ht(r.eventQueue_,R,y),vd(r,s,g,w)}),gt(n,g=>{const w=wh(r,Ye(e,g));ji(r,w)}),Ht(r.eventQueue_,e,[])}}function nT(r){go(r,"onDisconnectEvents");const e=Il(r),n=el();cd(r.onDisconnect_,Pe(),(o,l)=>{const u=H_(o,l,r.serverSyncTree_,e);N_(n,o,u)});let s=[];cd(n,Pe(),(o,l)=>{s=s.concat(po(r.serverSyncTree_,o,l));const u=wh(r,o);ji(r,u)}),r.onDisconnect_=el(),Ht(r.eventQueue_,Pe(),s)}function rT(r,e,n){let s;we(e._path)===".info"?s=md(r.infoSyncTree_,e,n):s=md(r.serverSyncTree_,e,n),Z_(r.eventQueue_,e._path,s)}function iT(r,e,n){let s;we(e._path)===".info"?s=ll(r.infoSyncTree_,e,n):s=ll(r.serverSyncTree_,e,n),Z_(r.eventQueue_,e._path,s)}function sT(r){r.persistentConnection_&&r.persistentConnection_.interrupt(K1)}function go(r,...e){let n="";r.persistentConnection_&&(n=r.persistentConnection_.id+":"),mt(n,...e)}function vd(r,e,n,s){e&&Bi(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let l=o;s&&(l+=": "+s);const u=new Error(l);u.code=o,e(u)}})}function ny(r,e,n){return oh(r.serverSyncTree_,e,n)||ue.EMPTY_NODE}function yh(r,e=r.transactionQueueTree_){if(e||Tl(r,e),Vi(e)){const n=iy(r,e);B(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&oT(r,mo(e),n)}else K_(e)&&Cl(e,n=>{yh(r,n)})}function oT(r,e,n){const s=n.map(g=>g.currentWriteId),o=ny(r,e,s);let l=o;const u=o.hash();for(let g=0;g<n.length;g++){const w=n[g];B(w.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const _=Ct(e,w.path);l=l.updateChild(_,w.currentOutputSnapshotRaw)}const p=l.val(!0),m=e;r.server_.put(m.toString(),p,g=>{go(r,"transaction put response",{path:m.toString(),status:g});let w=[];if(g==="ok"){const _=[];for(let y=0;y<n.length;y++)n[y].status=2,w=w.concat(sr(r.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&_.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();Tl(r,ph(r.transactionQueueTree_,e)),yh(r,r.transactionQueueTree_),Ht(r.eventQueue_,e,w);for(let y=0;y<_.length;y++)Bi(_[y])}else{if(g==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{Et("transaction at "+m.toString()+" failed: "+g);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=g}ji(r,e)}},u)}function ji(r,e){const n=ry(r,e),s=mo(n),o=iy(r,n);return aT(r,o,s),s}function aT(r,e,n){if(e.length===0)return;const s=[];let o=[];const u=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const m=e[p],g=Ct(n,m.path);let w=!1,_;if(B(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)w=!0,_=m.abortReason,o=o.concat(sr(r.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=Q1)w=!0,_="maxretry",o=o.concat(sr(r.serverSyncTree_,m.currentWriteId,!0));else{const y=ny(r,m.path,u);m.currentInputSnapshot=y;const R=e[p].update(y.val());if(R!==void 0){El("transaction failed: Data returned ",R,m.path);let A=st(R);typeof R=="object"&&R!=null&&pn(R,".priority")||(A=A.updatePriority(y.getPriority()));const j=m.currentWriteId,ee=Il(r),b=q_(A,y,ee);m.currentOutputSnapshotRaw=A,m.currentOutputSnapshotResolved=b,m.currentWriteId=_h(r),u.splice(u.indexOf(j),1),o=o.concat($_(r.serverSyncTree_,m.path,b,m.currentWriteId,m.applyLocally)),o=o.concat(sr(r.serverSyncTree_,j,!0))}else w=!0,_="nodata",o=o.concat(sr(r.serverSyncTree_,m.currentWriteId,!0))}Ht(r.eventQueue_,n,o),o=[],w&&(e[p].status=2,(function(y){setTimeout(y,Math.floor(0))})(e[p].unwatcher),e[p].onComplete&&(_==="nodata"?s.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):s.push(()=>e[p].onComplete(new Error(_),!1,null))))}Tl(r,r.transactionQueueTree_);for(let p=0;p<s.length;p++)Bi(s[p]);yh(r,r.transactionQueueTree_)}function ry(r,e){let n,s=r.transactionQueueTree_;for(n=we(e);n!==null&&Vi(s)===void 0;)s=ph(s,n),e=Fe(e),n=we(e);return s}function iy(r,e){const n=[];return sy(r,e,n),n.sort((s,o)=>s.order-o.order),n}function sy(r,e,n){const s=Vi(e);if(s)for(let o=0;o<s.length;o++)n.push(s[o]);Cl(e,o=>{sy(r,o,n)})}function Tl(r,e){const n=Vi(e);if(n){let s=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[s]=n[o],s++);n.length=s,G_(e,n.length>0?n:void 0)}Cl(e,s=>{Tl(r,s)})}function wh(r,e){const n=mo(ry(r,e)),s=ph(r.transactionQueueTree_,e);return L1(s,o=>{Bu(r,o)}),Bu(r,s),Q_(s,o=>{Bu(r,o)}),n}function Bu(r,e){const n=Vi(e);if(n){const s=[];let o=[],l=-1;for(let u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?(B(l===u-1,"All SENT items should be at beginning of queue."),l=u,n[u].status=3,n[u].abortReason="set"):(B(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),o=o.concat(sr(r.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&s.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?G_(e,void 0):n.length=l+1,Ht(r.eventQueue_,mo(e),o);for(let u=0;u<s.length;u++)Bi(s[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(r){let e="";const n=r.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let o=n[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function cT(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const n of r.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Et(`Invalid query segment '${n}' in query '${r}'`)}return e}const Mg=function(r,e){const n=uT(r),s=n.namespace;n.domain==="firebase.com"&&An(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&An("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yN();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new l_(n.host,n.secure,s,o,e,"",s!==n.subdomain),path:new je(n.pathString)}},uT=function(r){let e="",n="",s="",o="",l="",u=!0,p="https",m=443;if(typeof r=="string"){let g=r.indexOf("//");g>=0&&(p=r.substring(0,g-1),r=r.substring(g+2));let w=r.indexOf("/");w===-1&&(w=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),e=r.substring(0,Math.min(w,_)),w<_&&(o=lT(r.substring(w,_)));const y=cT(r.substring(Math.min(r.length,_)));g=e.indexOf(":"),g>=0?(u=p==="https"||p==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const R=e.slice(0,g);if(R.toLowerCase()==="localhost")n="localhost";else if(R.split(".").length<=2)n=R;else{const A=e.indexOf(".");s=e.substring(0,A).toLowerCase(),n=e.substring(A+1),l=s}"ns"in y&&(l=y.ns)}return{host:e,port:m,domain:n,subdomain:s,secure:u,scheme:p,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dT=(function(){let r=0;const e=[];return function(n){const s=n===r;r=n;let o;const l=new Array(8);for(o=7;o>=0;o--)l[o]=Fg.charAt(n%64),n=Math.floor(n/64);B(n===0,"Cannot push at time == 0");let u=l.join("");if(s){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)u+=Fg.charAt(e[o]);return B(u.length===20,"nextPushId: Length should be 20."),u}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n,s,o){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ot(this.snapshot.exportVal())}}class fT{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return B(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n,s,o){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=o}get key(){return xe(this._path)?null:Gd(this._path)}get ref(){return new jn(this._repo,this._path)}get _queryIdentifier(){const e=Cg(this._queryParams),n=Wd(e);return n==="{}"?"default":n}get _queryObject(){return Cg(this._queryParams)}isEqual(e){if(e=It(e),!(e instanceof Sh))return!1;const n=this._repo===e._repo,s=Kd(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+nI(this._path)}}class jn extends Sh{constructor(e,n){super(e,n,new Xd,!1)}get parent(){const e=v_(this._path);return e===null?null:new jn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ro{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new je(e),s=io(this.ref,e);return new ro(this._node.getChild(n),s,Je)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>e(new ro(o,io(this.ref,s),Je)))}hasChild(e){const n=new je(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ee(r,e){return r=It(r),r._checkNotDeleted("ref"),e!==void 0?io(r._root,e):r._root}function io(r,e){return r=It(r),we(r._path)===null?V1("child","path",e):X_("child","path",e),new jn(r._repo,Ye(r._path,e))}function xh(r,e){r=It(r),gh("push",r._path),J_("push",e,r._path,!0);const n=ty(r._repo),s=dT(n),o=io(r,s),l=io(r,s);let u;return u=Promise.resolve(l),o.then=u.then.bind(u),o.catch=u.then.bind(u,void 0),o}function cl(r){return gh("remove",r._path),pT(r,null)}function pT(r,e){r=It(r),gh("set",r._path),J_("set",e,r._path,!1);const n=new so;return eT(r._repo,r._path,e,null,n.wrapCallback(()=>{})),n.promise}function ht(r,e){W1("update",e,r._path);const n=new so;return tT(r._repo,r._path,e,n.wrapCallback(()=>{})),n.promise}function mn(r){r=It(r);const e=new oy(()=>{}),n=new kl(e);return Z1(r._repo,r,n).then(s=>new ro(s,new jn(r._repo,r._path),r._queryParams.getIndex()))}class kl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new hT("value",this,new ro(e.snapshotNode,new jn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new fT(this,e,n):null}matches(e){return e instanceof kl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function mT(r,e,n,s,o){const l=new oy(n,void 0),u=new kl(l);return rT(r._repo,r,u),()=>iT(r._repo,r,u)}function Vr(r,e,n,s){return mT(r,"value",e)}p1(jn);y1(jn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="FIREBASE_DATABASE_EMULATOR_HOST",_d={};let vT=!1;function _T(r,e,n,s){const o=e.lastIndexOf(":"),l=e.substring(0,o),u=Fi(l);r.repoInfo_=new l_(e,u,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(r.authTokenProvider_=s)}function yT(r,e,n,s,o){let l=s||r.options.databaseURL;l===void 0&&(r.options.projectId||An("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mt("Using default host for project ",r.options.projectId),l=`${r.options.projectId}-default-rtdb.firebaseio.com`);let u=Mg(l,o),p=u.repoInfo,m;typeof process<"u"&&sg&&(m=sg[gT]),m?(l=`http://${m}?ns=${p.namespace}`,u=Mg(l,o),p=u.repoInfo):u.repoInfo.secure;const g=new RN(r.name,r.options,e);H1("Invalid Firebase Database URL",u),xe(u.path)||An("Database URL must point to the root of a Firebase Database (not including a child path).");const w=ST(p,r,g,new PN(r,n));return new xT(w,r)}function wT(r,e){const n=_d[e];(!n||n[r.key]!==r)&&An(`Database ${e}(${r.repoInfo_}) has already been deleted.`),sT(r),delete n[r.key]}function ST(r,e,n,s){let o=_d[e.name];o||(o={},_d[e.name]=o);let l=o[r.toURLString()];return l&&An("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new Y1(r,vT,n,s),o[r.toURLString()]=l,l}class xT{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(J1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new jn(this._repo,Pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&An("Cannot call "+e+" on a deleted database.")}}function CT(r=mv(),e){const n=Rd(r,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=LS("database");s&&ET(n,...s)}return n}function ET(r,e,n,s={}){r=It(r),r._checkNotDeleted("useEmulator");const o=`${e}:${n}`,l=r._repoInternal;if(r._instanceStarted){if(o===r._repoInternal.repoInfo_.host&&Fr(s,l.repoInfo_.emulatorOptions))return;An("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)s.mockUserToken&&An('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Ma(Ma.OWNER);else if(s.mockUserToken){const p=typeof s.mockUserToken=="string"?s.mockUserToken:MS(s.mockUserToken,r.app.options.projectId);u=new Ma(p)}Fi(e)&&(lv(e),cv("Database",!0)),_T(l,o,s,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(r){fN($i),ki(new Ur("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return yT(s,o,l,n)},"PUBLIC").setMultipleInstances(!0)),cr(og,ag,r),cr(og,ag,"esm2017")}Pn.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Pn.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};NT();const IT={apiKey:"AIzaSyCrFLv4OkNYI86ll6U0Xjo5OegDaUzqFMA",authDomain:"stockduloft.firebaseapp.com",databaseURL:"https://stockduloft-default-rtdb.firebaseio.com",projectId:"stockduloft",storageBucket:"stockduloft.firebasestorage.app",messagingSenderId:"375022059708",appId:"1:375022059708:web:f059d080070233a5b590b9",measurementId:"G-C7CW1SSW2Z"},ay=pv(IT),Ne=CT(ay),Wu=cN(ay),TT=new Nn,ly=k.createContext(null);function kT({children:r}){const[e,n]=k.useState(null),[s,o]=k.useState(!0);k.useEffect(()=>JC(Wu,m=>{n(m),o(!1)}),[]);const l=async()=>{try{await _E(Wu,TT)}catch(p){throw console.error("Erreur de connexion:",p),p}},u=async()=>{try{await XC(Wu)}catch(p){console.error("Erreur de dconnexion:",p)}};return s?h.jsxs("div",{className:"loading-screen",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Chargement..."})]}):h.jsx(ly.Provider,{value:{user:e,login:l,logout:u},children:r})}function Pl(){const r=k.useContext(ly);if(!r)throw new Error("useAuth doit tre utilis dans un AuthProvider");return r}const Vu=600,Hu=600,PT=.6,ba=80,RT=.4;function cy(r){return new Promise((e,n)=>{const s=new FileReader;s.onload=o=>{const l=new Image;l.onload=()=>{const u=document.createElement("canvas");let{width:p,height:m}=l;p>m?p>Vu&&(m=Math.round(m*Vu/p),p=Vu):m>Hu&&(p=Math.round(p*Hu/m),m=Hu),u.width=p,u.height=m,u.getContext("2d").drawImage(l,0,0,p,m);const w=u.toDataURL("image/jpeg",PT);e(w)},l.onerror=()=>n(new Error("Impossible de charger l'image")),l.src=o.target.result},s.onerror=()=>n(new Error("Impossible de lire le fichier")),s.readAsDataURL(r)})}function bT(r){return new Promise((e,n)=>{const s=new FileReader;s.onload=o=>{const l=new Image;l.onload=()=>{const u=document.createElement("canvas");u.width=ba,u.height=ba;const p=u.getContext("2d"),m=Math.min(l.width,l.height),g=(l.width-m)/2,w=(l.height-m)/2;p.drawImage(l,g,w,m,m,0,0,ba,ba);const _=u.toDataURL("image/jpeg",RT);e(_)},l.onerror=()=>n(new Error("Impossible de charger l'image")),l.src=o.target.result},s.onerror=()=>n(new Error("Impossible de lire le fichier")),s.readAsDataURL(r)})}const on="stockduloft/items",Hi="stockduloft/photos",vo="stockduloft/stores",Rl=4;async function AT(r){const e=Ee(Ne,`${Hi}/${r}`),n=await mn(e);return n.exists()&&n.val().photoBase64||null}async function qu(r){const e=Ee(Ne,`${Hi}/${r}`),n=await mn(e);if(!n.exists())return[];const s=n.val(),o=[];s.photoBase64&&o.push(s.photoBase64);for(let l=1;l<=Rl;l++)s[`photo_${l}`]&&o.push(s[`photo_${l}`]);return o}async function DT(r,e){const n=Ee(Ne,`${Hi}/${r}`),s=await mn(n),o=s.exists()?s.val():{};let l=null;for(let g=1;g<=Rl;g++)if(!o[`photo_${g}`]){l=g;break}if(l===null)return null;const u=await cy(e);await ht(n,{[`photo_${l}`]:u});const p=uy(o)+1,m=Ee(Ne,`${on}/${r}`);return await ht(m,{photoCount:p,updatedAt:Date.now()}),l}async function jT(r,e){if(e<1||e>Rl)return;const n=Ee(Ne,`${Hi}/${r}`);await ht(n,{[`photo_${e}`]:null});const s=await mn(n),o=s.exists()?s.val():{},l=uy(o),u=Ee(Ne,`${on}/${r}`);await ht(u,{photoCount:l,updatedAt:Date.now()})}function uy(r){let e=0;r.photoBase64&&e++;for(let n=1;n<=Rl;n++)r[`photo_${n}`]&&e++;return e}function dy(r){const e=Ee(Ne,vo);return Vr(e,s=>{const o=[];s.exists()&&s.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(l.name||"").localeCompare(u.name||"")),r(o)})}async function hy(r){const e=Ee(Ne,`${vo}/${r}`),n=await mn(e);return n.exists()?{id:r,...n.val()}:null}async function OT({name:r,commissionPercent:e,locationFee:n}){const s={name:r.trim(),commissionPercent:parseFloat(e)||0,locationFee:parseFloat(n)||0,active:!0,createdAt:Date.now()},o=Ee(Ne,vo),l=xh(o);return await ht(l,s),{id:l.key,...s}}async function LT(r,e){const n=Ee(Ne,`${vo}/${r}`);await ht(n,e)}async function MT(r){const e=Ee(Ne,`${vo}/${r}`);await cl(e)}async function FT({uniqueId:r,description:e,longDescription:n,price:s,photoFile:o,category:l,itemDate:u}){const p={uniqueId:r.toUpperCase().trim(),description:e.trim(),longDescription:(n==null?void 0:n.trim())||"",price:parseFloat(s),hasPhoto:!1,photoCount:0,category:l||"",status:"inventory",itemDate:u||new Date().toISOString().split("T")[0],consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,sellerName:"",createdAt:Date.now(),updatedAt:Date.now()},m=Ee(Ne,on),g=xh(m);if(await ht(g,p),o){const[w,_]=await Promise.all([cy(o),bT(o)]),y=Ee(Ne,`${Hi}/${g.key}`);await ht(y,{photoBase64:w}),await ht(g,{hasPhoto:!0,thumbnail:_,photoCount:1}),p.hasPhoto=!0,p.thumbnail=_,p.photoCount=1}return{id:g.key,...p}}async function UT(r,e){const n=Ee(Ne,`${on}/${r}`);await ht(n,{...e,updatedAt:Date.now()})}async function $T(r){const e=Ee(Ne,`${on}/${r}`),n=Ee(Ne,`${Hi}/${r}`);await cl(n),await cl(e)}async function fy(r){const e=Ee(Ne,on),n=await mn(e);if(!n.exists())return null;const s=r.toUpperCase().trim();let o=null;return n.forEach(l=>{const u=l.val();u.uniqueId===s&&(o={id:l.key,...u})}),o&&o.hasPhoto&&(o.photoBase64=await AT(o.id)),o}async function Ug(r="ADL"){const e=Ee(Ne,on),n=await mn(e);let s=0;n.exists()&&n.forEach(l=>{const m=(l.val().uniqueId||"").match(new RegExp(`^${r}-(\\d+)$`,"i"));if(m){const g=parseInt(m[1],10);g>s&&(s=g)}});const o=s+1;return`${r}-${String(o).padStart(3,"0")}`}async function zT(r,e,n=null,s=null,o="",l=!1,u="",p=null){const m=Ee(Ne,`${on}/${r}`),g=await mn(m),w=g.exists()?g.val():{},_=l?0:s!==null?parseFloat(s):w.price,y={status:"sold",sellerName:e.trim(),saleDate:n||new Date().toISOString().split("T")[0],salePrice:_,marketName:o.trim(),isGift:l,giftNote:l?u.trim():"",updatedAt:Date.now()};if(p&&!l?(y.taxEnabled=!0,y.tpsRate=p.tpsRate,y.tvqRate=p.tvqRate,y.tpsAmount=p.tpsAmount,y.tvqAmount=p.tvqAmount,y.totalWithTax=p.totalWithTax):(y.taxEnabled=!1,y.tpsRate=null,y.tvqRate=null,y.tpsAmount=null,y.tvqAmount=null,y.totalWithTax=null),w.status==="consignment"&&w.consignmentStoreId&&!l){const R=await hy(w.consignmentStoreId);if(R&&R.commissionPercent>0){const A=Math.round(_*R.commissionPercent)/100;y.commissionPercent=R.commissionPercent,y.commissionAmount=A,y.netRevenue=Math.round((_-A)*100)/100}else y.commissionPercent=0,y.commissionAmount=0,y.netRevenue=_}return await ht(m,y),y}async function BT(r,e,n=null,s=""){const o=Ee(Ne,`${on}/${r}`);await ht(o,{status:"consignment",consignmentStore:e.trim(),consignmentStoreId:s,consignmentDate:n||new Date().toISOString().split("T")[0],updatedAt:Date.now()})}async function WT(r){const e=Ee(Ne,`${on}/${r}`);await ht(e,{status:"inventory",consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,salePrice:null,marketName:"",sellerName:"",isGift:!1,giftNote:"",commissionPercent:null,commissionAmount:null,netRevenue:null,taxEnabled:null,tpsRate:null,tvqRate:null,tpsAmount:null,tvqAmount:null,totalWithTax:null,updatedAt:Date.now()})}function py(r){const e=Ee(Ne,on);return Vr(e,s=>{const o=[];s.exists()&&s.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(u.createdAt||0)-(l.createdAt||0)),r(o)})}const $g={all:"Tous",inventory:"En stock",consignment:"En consigne",sold:"Vendus"},VT={inventory:"#2ecc71",consignment:"#f39c12",sold:"#e74c3c"};function br(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function HT(){const[r,e]=k.useState([]),[n,s]=k.useState([]),[o,l]=k.useState("all"),[u,p]=k.useState(""),[m,g]=k.useState(null),[w,_]=k.useState(!0),[y,R]=k.useState({}),[A,O]=k.useState({}),[j,ee]=k.useState(null),[b,G]=k.useState({description:"",longDescription:"",price:"",category:""}),[V,Y]=k.useState(!1),[re,X]=k.useState(null),[fe,Ce]=k.useState(""),[Te,Ae]=k.useState(""),Ge=k.useRef(null);k.useEffect(()=>py(K=>{e(K),_(!1)}),[]),k.useEffect(()=>dy(s),[]);const U=async C=>{if(m===C.id){g(null);return}if(g(C.id),O(K=>({...K,[C.id]:0})),!y[C.id]&&(C.hasPhoto||C.photoBase64)){const K=await qu(C.id);K.length===0&&C.photoBase64?R(ae=>({...ae,[C.id]:[C.photoBase64]})):R(ae=>({...ae,[C.id]:K}))}},me=async(C,K)=>{var ge;const ae=(ge=K.target.files)==null?void 0:ge[0];if(ae){Y(!0);try{if(await DT(C.id,ae)===null)alert("Maximum de 5 photos atteint pour cet article.");else{const Oe=await qu(C.id);R(F=>({...F,[C.id]:Oe}))}}catch(oe){console.error("Erreur ajout photo:",oe),alert("Erreur lors de l'ajout de la photo.")}finally{Y(!1),Ge.current&&(Ge.current.value="")}}},Re=async(C,K)=>{if(K===0){alert("La photo principale ne peut pas tre supprime ici.");return}if(confirm("Supprimer cette photo?"))try{await jT(C.id,K);const ae=await qu(C.id);R(ge=>({...ge,[C.id]:ae})),O(ge=>({...ge,[C.id]:0}))}catch(ae){console.error("Erreur suppression photo:",ae)}},Ue=r.filter(C=>{var ge,oe;const K=o==="all"||C.status===o,ae=u===""||((ge=C.uniqueId)==null?void 0:ge.toLowerCase().includes(u.toLowerCase()))||((oe=C.description)==null?void 0:oe.toLowerCase().includes(u.toLowerCase()));return K&&ae}),_e={all:r.length,inventory:r.filter(C=>C.status==="inventory").length,consignment:r.filter(C=>C.status==="consignment").length,sold:r.filter(C=>C.status==="sold").length},H=C=>{var K;ee(C.id),G({description:C.description||"",longDescription:C.longDescription||"",price:((K=C.price)==null?void 0:K.toString())||"",category:C.category||""})},se=async C=>{await UT(C.id,{description:b.description.trim(),longDescription:b.longDescription.trim(),price:parseFloat(b.price)||0,category:b.category.trim()}),ee(null)},q=()=>{ee(null)},N=async C=>{confirm(`Remettre "${C.uniqueId}" en inventaire?`)&&(await WT(C.id),g(null))},D=async C=>{confirm(`Supprimer dfinitivement "${C.uniqueId}"?`)&&(await $T(C.id),g(null),R(K=>{const ae={...K};return delete ae[C.id],ae}))},pe=C=>{X(C.id),Ce(""),Ae("")},W=async C=>{let K=Te.trim(),ae=fe;if(fe&&fe!=="other"){const ge=n.find(oe=>oe.id===fe);ge&&(K=ge.name)}if(!K){alert("Entrez le nom du magasin");return}await BT(C.id,K,null,ae==="other"?"":ae),X(null),g(null)},te=()=>{X(null)};return w?h.jsxs("div",{className:"page-loading",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Chargement de l'inventaire..."})]}):h.jsxs("div",{className:"page inventory-page",children:[h.jsxs("div",{className:"search-bar",children:[h.jsx("input",{type:"text",placeholder:" Rechercher par # ou description...",value:u,onChange:C=>p(C.target.value),className:"search-input"}),u&&h.jsx("button",{className:"search-clear",onClick:()=>p(""),children:""})]}),h.jsx("div",{className:"status-filters",children:Object.entries($g).map(([C,K])=>h.jsxs("button",{className:`filter-btn ${o===C?"active":""}`,onClick:()=>l(C),children:[K,h.jsx("span",{className:"filter-count",children:_e[C]})]},C))}),Ue.length===0?h.jsxs("div",{className:"empty-state",children:[h.jsx("p",{className:"empty-icon",children:""}),h.jsx("p",{children:u?"Aucun rsultat trouv":"Aucun item dans cette catgorie"})]}):h.jsx("div",{className:"items-list",children:Ue.map(C=>{var K,ae,ge;return h.jsxs("div",{className:`item-card ${m===C.id?"expanded":""}`,onClick:()=>U(C),children:[h.jsxs("div",{className:"item-row",children:[h.jsxs("div",{className:"item-photo",children:[C.thumbnail?h.jsx("img",{src:C.thumbnail,alt:C.description,className:"item-thumbnail"}):C.hasPhoto||C.photoBase64?h.jsx("div",{className:"photo-placeholder",children:""}):h.jsx("div",{className:"photo-placeholder",children:""}),C.photoCount>1&&h.jsx("span",{className:"photo-count-badge",children:C.photoCount})]}),h.jsxs("div",{className:"item-info",children:[h.jsxs("div",{className:"item-id-row",children:[h.jsxs("span",{className:"item-unique-id",children:["#",C.uniqueId]}),h.jsx("span",{className:"item-status-badge",style:{backgroundColor:VT[C.status]},children:$g[C.status]})]}),h.jsx("p",{className:"item-description",children:C.description}),h.jsxs("div",{className:"item-meta",children:[h.jsxs("span",{className:"item-price",children:[br(C.price)," $"]}),C.itemDate&&h.jsxs("span",{className:"item-date",children:[" ",C.itemDate]}),C.status==="consignment"&&h.jsxs("span",{className:"item-consignment",children:[" ",C.consignmentStore," ",C.consignmentDate&&`(${C.consignmentDate})`]}),C.status==="sold"&&h.jsxs("span",{className:"item-sold-info",children:[C.isGift?h.jsxs(h.Fragment,{children:[" Cadeau",C.giftNote?`  ${C.giftNote}`:"","  "]}):C.salePrice&&C.salePrice!==C.price?h.jsxs(h.Fragment,{children:[h.jsxs("s",{children:[br(C.price)," $"]}),"  ",br(C.salePrice)," $  "]}):"",C.saleDate,"  ",C.sellerName,C.marketName?`   ${C.marketName}`:"",C.commissionAmount>0&&h.jsxs(h.Fragment,{children:["   Net: ",br(C.netRevenue)," $"]})]})]})]})]}),m===C.id&&h.jsxs("div",{onClick:oe=>oe.stopPropagation(),children:[y[C.id]&&y[C.id].length>0&&h.jsxs("div",{className:"photo-gallery",children:[h.jsx("div",{className:"gallery-main",children:h.jsx("img",{src:y[C.id][A[C.id]||0],alt:C.description})}),y[C.id].length>1&&h.jsx("div",{className:"gallery-thumbs",children:y[C.id].map((oe,Oe)=>h.jsxs("div",{className:`gallery-thumb ${(A[C.id]||0)===Oe?"active":""}`,onClick:()=>O(F=>({...F,[C.id]:Oe})),children:[h.jsx("img",{src:oe,alt:`Photo ${Oe+1}`}),Oe>0&&j===C.id&&h.jsx("button",{className:"gallery-thumb-delete",onClick:F=>{F.stopPropagation(),Re(C,Oe)},children:""})]},Oe))})]}),C.hasPhoto&&!y[C.id]&&h.jsx("div",{className:"item-expanded-photo loading",children:h.jsx("div",{className:"loading-spinner"})}),C.longDescription&&j!==C.id&&h.jsx("div",{className:"item-long-description",children:h.jsx("p",{children:C.longDescription})}),C.status==="sold"&&C.commissionAmount>0&&h.jsxs("div",{className:"item-commission-info",children:[h.jsxs("div",{className:"commission-row",children:[h.jsx("span",{children:"Prix de vente"}),h.jsxs("span",{children:[br(C.salePrice)," $"]})]}),h.jsxs("div",{className:"commission-row commission-negative",children:[h.jsxs("span",{children:["Commission ",C.consignmentStore," (",C.commissionPercent,"%)"]}),h.jsxs("span",{children:["-",br(C.commissionAmount)," $"]})]}),h.jsxs("div",{className:"commission-row commission-total",children:[h.jsx("span",{children:"Revenu net"}),h.jsxs("span",{children:[br(C.netRevenue)," $"]})]})]}),h.jsx("div",{className:"item-actions",children:re===C.id?h.jsxs("div",{className:"item-edit-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Magasin de consigne"}),n.length>0?h.jsxs("select",{value:fe,onChange:oe=>{if(Ce(oe.target.value),oe.target.value!=="other"){const Oe=n.find(F=>F.id===oe.target.value);Oe&&Ae(Oe.name)}},className:"form-input",children:[h.jsx("option",{value:"",children:" Choisir un magasin "}),n.map(oe=>h.jsxs("option",{value:oe.id,children:[oe.name,oe.commissionPercent>0?` (${oe.commissionPercent}%)`:"",oe.locationFee>0?` + ${oe.locationFee}$/mois`:""]},oe.id)),h.jsx("option",{value:"other",children:" Autre magasin..."})]}):h.jsx("input",{type:"text",value:Te,onChange:oe=>Ae(oe.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),fe==="other"&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom du magasin"}),h.jsx("input",{type:"text",value:Te,onChange:oe=>Ae(oe.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),h.jsxs("div",{className:"item-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>W(C),disabled:!fe&&!Te.trim(),children:" Confirmer consigne"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:te,children:"Annuler"})]})]}):j===C.id?h.jsxs("div",{className:"item-edit-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Titre"}),h.jsx("input",{type:"text",value:b.description,onChange:oe=>G(Oe=>({...Oe,description:oe.target.value})),className:"form-input"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Description dtaille"}),h.jsx("textarea",{value:b.longDescription,onChange:oe=>G(Oe=>({...Oe,longDescription:oe.target.value})),className:"form-input form-textarea",rows:"4",placeholder:"Dcrivez l'article en dtail..."})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Prix ($)"}),h.jsx("input",{type:"number",value:b.price,onChange:oe=>G(Oe=>({...Oe,price:oe.target.value})),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Catgorie"}),h.jsx("input",{type:"text",value:b.category,onChange:oe=>G(Oe=>({...Oe,category:oe.target.value})),className:"form-input"})]}),h.jsxs("div",{className:"form-group",children:[h.jsxs("label",{className:"form-label",children:[" Photos (",((K=y[C.id])==null?void 0:K.length)||(C.hasPhoto?1:0),"/5)"]}),(((ae=y[C.id])==null?void 0:ae.length)||0)<5&&h.jsxs(h.Fragment,{children:[h.jsx("input",{ref:Ge,type:"file",accept:"image/*",capture:"environment",onChange:oe=>me(C,oe),className:"hidden-input"}),h.jsx("button",{type:"button",className:"btn btn-small btn-add-photo",onClick:()=>{var oe;return(oe=Ge.current)==null?void 0:oe.click()},disabled:V,children:V?" Ajout en cours...":" Ajouter une photo"})]}),(((ge=y[C.id])==null?void 0:ge.length)||0)>=5&&h.jsx("p",{className:"form-hint",children:"Maximum de 5 photos atteint"})]}),h.jsxs("div",{className:"item-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:()=>se(C),children:" Sauvegarder"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:q,children:"Annuler"})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>H(C),children:" Modifier"}),C.status==="inventory"&&h.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>pe(C),children:" Consigne"}),(C.status==="consignment"||C.status==="sold")&&h.jsx("button",{className:"btn btn-small btn-return",onClick:()=>N(C),children:" Retour inventaire"}),h.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>D(C),children:" Supprimer"})]})})]})]},C.id)})})]})}const qT="https://us-central1-stockduloft.cloudfunctions.net/analyzePhoto";async function GT(r,e=[],n=""){try{const s=await fetch(qT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:r,categories:e,userHint:n})});if(!s.ok)throw new Error(`Erreur serveur: ${s.status}`);const o=await s.json();if(o.success)return{category:o.category,title:o.title,description:o.description};throw new Error(o.error||"Erreur inconnue")}catch(s){throw console.error("Erreur AI:",s),s}}function KT({imageBase64:r,categories:e,onSuggestion:n}){const[s,o]=k.useState(!1),[l,u]=k.useState(null),[p,m]=k.useState(""),g=async()=>{if(!r){u("Prenez une photo d'abord");return}o(!0),u(null);try{const w=await GT(r,e,p);n(w)}catch(w){u("Impossible d'analyser la photo. Ressayez."),console.error(w)}finally{o(!1)}};return h.jsxs("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[h.jsx("input",{type:"text",value:p,onChange:w=>m(w.target.value),placeholder:"C'est quoi? Ex: butoir de porte, sac  lunch, coussin...",style:{width:"100%",padding:"10px 12px",fontSize:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",marginBottom:"8px",boxSizing:"border-box"}}),h.jsx("button",{type:"button",onClick:g,disabled:s||!r,style:{padding:"10px 20px",backgroundColor:s?"#ccc":"#7c3aed",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:s?"wait":"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:s?h.jsxs(h.Fragment,{children:[h.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid white",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Analyse en cours..."]}):h.jsx(h.Fragment,{children:" Suggestion AI"})}),l&&h.jsx("p",{style:{color:"red",fontSize:"14px",marginTop:"5px"},children:l}),h.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function QT(){const r=Ed(),e=k.useRef(null),[n,s]=k.useState({uniqueId:"",description:"",longDescription:"",price:"",category:"",itemDate:new Date().toISOString().split("T")[0]}),[o,l]=k.useState(null),[u,p]=k.useState(null),[m,g]=k.useState(!1),[w,_]=k.useState(""),[y,R]=k.useState("");k.useEffect(()=>{Ug("ADL").then(Y=>{s(re=>({...re,uniqueId:Y})),R(Y)})},[]);const A=Y=>{const{name:re,value:X}=Y.target;s(fe=>({...fe,[re]:X})),re==="uniqueId"&&_("")},O=Y=>{var fe;const re=(fe=Y.target.files)==null?void 0:fe[0];if(!re)return;l(re);const X=new FileReader;X.onload=Ce=>p(Ce.target.result),X.readAsDataURL(re)},j=()=>{var Y;(Y=e.current)==null||Y.click()},ee=()=>{l(null),p(null),e.current&&(e.current.value="")},b=()=>{s(Y=>({...Y,uniqueId:y})),_("")},G=Y=>{s(re=>({...re,...Y.category?{category:Y.category}:{},...Y.title?{description:Y.title}:{},...Y.description?{longDescription:Y.description}:{}}))},V=async Y=>{if(Y.preventDefault(),_(""),!n.uniqueId.trim()){_("Le numro unique est requis");return}if(!n.price||parseFloat(n.price)<=0){_("Le prix doit tre suprieur  0");return}if(await fy(n.uniqueId)){const X=await Ug("ADL");R(X),_(`Le numro "${n.uniqueId.toUpperCase()}" existe dj !`);return}g(!0);try{await FT({uniqueId:n.uniqueId,description:n.description,longDescription:n.longDescription,price:n.price,category:n.category,itemDate:n.itemDate,photoFile:o}),r("/")}catch(X){console.error("Erreur:",X),_("Erreur lors de la sauvegarde. Ressayez.")}finally{g(!1)}};return h.jsxs("div",{className:"page add-item-page",children:[h.jsx("h2",{className:"page-title",children:"Nouvel item"}),h.jsxs("form",{onSubmit:V,className:"add-form",children:[h.jsxs("div",{className:"photo-section",children:[h.jsx("input",{ref:e,type:"file",accept:"image/*",capture:"environment",onChange:O,className:"hidden-input"}),u?h.jsxs("div",{className:"photo-preview-container",children:[h.jsx("img",{src:u,alt:"Aperu",className:"photo-preview"}),h.jsx("button",{type:"button",className:"photo-remove",onClick:ee,children:""})]}):h.jsxs("button",{type:"button",className:"photo-capture-btn",onClick:j,children:[h.jsx("span",{className:"capture-icon",children:""}),h.jsx("span",{children:"Prendre une photo"})]}),h.jsx("p",{className:"photo-hint",children:" Photo principale  vous pourrez ajouter d'autres photos en modifiant l'article"})]}),u&&h.jsx(KT,{imageBase64:u,onSuggestion:G}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Numro unique *"}),h.jsx("input",{type:"text",name:"uniqueId",value:n.uniqueId,onChange:A,placeholder:"Ex: ADL-001",className:"form-input",autoComplete:"off",style:{textTransform:"uppercase"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Titre / Description courte"}),h.jsx("input",{type:"text",name:"description",value:n.description,onChange:A,placeholder:"Ex: Sac  main fleuri",className:"form-input"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Description dtaille"}),h.jsx("textarea",{name:"longDescription",value:n.longDescription,onChange:A,placeholder:"Dcrivez l'article en dtail : matriaux, dimensions, couleurs, entretien...",className:"form-input form-textarea",rows:"4"}),h.jsx("p",{className:"form-hint",children:"Affich dans la vitrine publique"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Prix ($) *"}),h.jsx("input",{type:"number",name:"price",value:n.price,onChange:A,placeholder:"0.00",className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Catgorie"}),h.jsx("input",{type:"text",name:"category",value:n.category,onChange:A,placeholder:"Ex: Sacs, Vtements, Accessoires...",className:"form-input"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Date de cration"}),h.jsx("input",{type:"date",name:"itemDate",value:n.itemDate,onChange:A,className:"form-input"})]}),w&&h.jsxs("div",{className:"error-block",children:[h.jsx("p",{className:"error-text",children:w}),y&&w.includes("existe dj")&&h.jsxs("button",{type:"button",className:"btn btn-small btn-suggest",onClick:b,children:["Utiliser ",y]})]}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:m,children:m?"Sauvegarde en cours...":" Ajouter  l'inventaire"}),h.jsx("button",{type:"button",className:"btn btn-secondary btn-full",onClick:()=>r("/"),children:"Annuler"})]})]})]})}function Qe(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function YT(){var pe;const{user:r}=Pl(),[e,n]=k.useState("ADL-"),[s,o]=k.useState(null),[l,u]=k.useState(null),[p,m]=k.useState(((pe=r==null?void 0:r.displayName)==null?void 0:pe.split(" ")[0])||""),[g,w]=k.useState(new Date().toISOString().split("T")[0]),[_,y]=k.useState(""),[R,A]=k.useState(()=>localStorage.getItem("sdl_marketName")||""),[O,j]=k.useState(!1),[ee,b]=k.useState(!1),[G,V]=k.useState(""),[Y,re]=k.useState(""),[X,fe]=k.useState(!1),[Ce,Te]=k.useState(""),[Ae,Ge]=k.useState(null);k.useEffect(()=>{const W=Ee(Ne,"stockduloft/settings/taxes");return Vr(W,C=>{C.exists()?Ge(C.val()):Ge({enabled:!1})})},[]);const U=(Ae==null?void 0:Ae.enabled)||!1,me=(Ae==null?void 0:Ae.tpsRate)||5,Re=(Ae==null?void 0:Ae.tvqRate)||9.975,_e=(()=>{if(!U||X)return null;const W=parseFloat(_)||0;if(W<=0)return null;const te=Math.round(W*me)/100,C=Math.round(W*Re*100)/1e4,K=Math.round((W+te+C)*100)/100;return{tpsAmount:te,tvqAmount:C,totalWithTax:K}})(),H=async W=>{var te;if(W==null||W.preventDefault(),!!e.trim()){j(!0),V(""),re(""),o(null),u(null);try{const C=await fy(e);if(!C){V(`Aucun item trouv avec le numro "${e.toUpperCase()}"`);return}if(C.status==="sold"){V(`Cet item est dj vendu (${C.saleDate} par ${C.sellerName})`);return}if(o(C),y(((te=C.price)==null?void 0:te.toFixed(2))||""),C.status==="consignment"&&C.consignmentStoreId){const K=await hy(C.consignmentStoreId);u(K)}}catch(C){console.error(C),V("Erreur de recherche. Ressayez.")}finally{j(!1)}}},q=(()=>{if(!l||!l.commissionPercent||X)return null;const W=parseFloat(_)||0,te=Math.round(W*l.commissionPercent)/100,C=Math.round((W-te)*100)/100;return{commissionAmount:te,netRevenue:C,percent:l.commissionPercent}})(),N=async()=>{if(!(!s||!p.trim())){b(!0),V("");try{const W=X?0:parseFloat(_)||s.price;let te=null;if(U&&!X&&W>0){const ae=Math.round(W*me)/100,ge=Math.round(W*Re*100)/1e4;te={tpsRate:me,tvqRate:Re,tpsAmount:ae,tvqAmount:ge,totalWithTax:Math.round((W+ae+ge)*100)/100}}const C=await zT(s.id,p,g,W,R,X,Ce,te);let K;X?K=` ${s.uniqueId} donn en cadeau${Ce?`  ${Ce}`:""}`:C.commissionAmount>0?(K=` ${s.uniqueId} vendu pour ${Qe(W)} $`,te&&(K+=`
 TPS: ${Qe(te.tpsAmount)} $ + TVQ: ${Qe(te.tvqAmount)} $ = Total: ${Qe(te.totalWithTax)} $`),K+=`
 Commission ${s.consignmentStore}: -${Qe(C.commissionAmount)} $`,K+=`
 Revenu net: ${Qe(C.netRevenue)} $`):(K=` ${s.uniqueId} vendu pour ${Qe(W)} $`,te&&(K+=`
 TPS: ${Qe(te.tpsAmount)} $ + TVQ: ${Qe(te.tvqAmount)} $
 Total avec taxes: ${Qe(te.totalWithTax)} $`),R&&(K+=`${te?"":`
`}${te?"  ":" au "}${R}`)),re(K),o(null),u(null),n("ADL-"),y(""),fe(!1),Te("")}catch(W){console.error(W),V("Erreur lors de la vente. Ressayez.")}finally{b(!1)}}},D=()=>{n("ADL-"),o(null),u(null),y(""),V(""),re(""),fe(!1),Te("")};return h.jsxs("div",{className:"page sale-page",children:[h.jsx("h2",{className:"page-title",children:" Vente rapide"}),h.jsx("form",{onSubmit:H,className:"sale-search-form",children:h.jsxs("div",{className:"sale-search-row",children:[h.jsx("input",{type:"text",value:e,onChange:W=>n(W.target.value.toUpperCase()),placeholder:"Ex: ADL-001",className:"form-input sale-search-input",autoComplete:"off",autoFocus:!0}),h.jsx("button",{type:"submit",className:"btn btn-primary sale-search-btn",disabled:O||!e.trim(),children:O?"...":""})]})}),Y&&h.jsxs("div",{className:"sale-success",children:[h.jsx("p",{style:{whiteSpace:"pre-line"},children:Y}),h.jsx("button",{className:"btn btn-primary btn-full",onClick:D,children:"Prochaine vente"})]}),G&&h.jsxs("div",{className:"sale-error",children:[h.jsx("p",{children:G}),h.jsx("button",{className:"btn btn-secondary",onClick:D,children:"Ressayer"})]}),s&&h.jsxs("div",{className:"sale-confirmation",children:[h.jsxs("div",{className:"sale-item-card",children:[s.photoBase64?h.jsx("img",{src:s.photoBase64,alt:s.description,className:"sale-item-photo"}):h.jsx("div",{className:"sale-photo-placeholder",children:""}),h.jsxs("div",{className:"sale-item-details",children:[h.jsxs("span",{className:"sale-item-id",children:["#",s.uniqueId]}),h.jsx("p",{className:"sale-item-desc",children:s.description}),h.jsxs("p",{className:"sale-item-price",children:[Qe(s.price)," $"]}),s.status==="consignment"&&h.jsxs("p",{className:"sale-item-consign",children:[" En consigne: ",s.consignmentStore,l&&l.commissionPercent>0&&h.jsxs("span",{className:"sale-commission-badge",children:[l.commissionPercent,"% commission"]})]})]})]}),h.jsxs("div",{className:"sale-form",children:[h.jsx("div",{className:"form-group",children:h.jsxs("label",{className:"gift-toggle",children:[h.jsx("input",{type:"checkbox",checked:X,onChange:W=>{var te;fe(W.target.checked),W.target.checked?y("0"):y(((te=s.price)==null?void 0:te.toFixed(2))||"")}}),h.jsx("span",{children:" Donn en cadeau"})]})}),X&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Note"}),h.jsx("input",{type:"text",value:Ce,onChange:W=>Te(W.target.value),className:"form-input",placeholder:"Ex: Cadeau pour maman, change, etc."})]}),!X&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Prix de vente ($)"}),h.jsxs("div",{className:"sale-price-row",children:[h.jsx("input",{type:"number",value:_,onChange:W=>y(W.target.value),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"}),parseFloat(_)<s.price&&h.jsxs("span",{className:"sale-discount",children:["Rabais de ",Qe(s.price-parseFloat(_))," $"]})]})]}),_e&&h.jsxs("div",{className:"sale-tax-preview",children:[h.jsxs("div",{className:"tax-calc-row",children:[h.jsx("span",{children:"Prix"}),h.jsxs("span",{children:[Qe(parseFloat(_))," $"]})]}),h.jsxs("div",{className:"tax-calc-row",children:[h.jsxs("span",{children:["TPS (",me,"%)"]}),h.jsxs("span",{children:[Qe(_e.tpsAmount)," $"]})]}),h.jsxs("div",{className:"tax-calc-row",children:[h.jsxs("span",{children:["TVQ (",Re,"%)"]}),h.jsxs("span",{children:[Qe(_e.tvqAmount)," $"]})]}),h.jsxs("div",{className:"tax-calc-row tax-calc-total",children:[h.jsx("span",{children:" Total  encaisser"}),h.jsxs("span",{children:[Qe(_e.totalWithTax)," $"]})]})]}),q&&h.jsxs("div",{className:"sale-commission-preview",children:[h.jsxs("div",{className:"commission-row",children:[h.jsx("span",{children:"Prix de vente"}),h.jsxs("span",{children:[Qe(parseFloat(_))," $"]})]}),h.jsxs("div",{className:"commission-row commission-negative",children:[h.jsxs("span",{children:["Commission ",s.consignmentStore," (",q.percent,"%)"]}),h.jsxs("span",{children:["-",Qe(q.commissionAmount)," $"]})]}),h.jsxs("div",{className:"commission-row commission-total",children:[h.jsx("span",{children:"Revenu net pour vous"}),h.jsxs("span",{children:[Qe(q.netRevenue)," $"]})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Vendeuse"}),h.jsx("input",{type:"text",value:p,onChange:W=>m(W.target.value),className:"form-input",placeholder:"Nom de la vendeuse"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"March / Point de vente"}),h.jsx("input",{type:"text",value:R,onChange:W=>{A(W.target.value),localStorage.setItem("sdl_marketName",W.target.value)},className:"form-input",placeholder:"Ex: March Jean-Talon, Facebook, etc."})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Date de vente"}),h.jsx("input",{type:"date",value:g,onChange:W=>w(W.target.value),className:"form-input"})]}),h.jsxs("div",{className:"sale-actions",children:[h.jsx("button",{className:"btn btn-sell btn-full",onClick:N,disabled:ee||!p.trim(),children:ee?"En cours...":X?" Confirmer le cadeau":_e?`Confirmer  Total: ${Qe(_e.totalWithTax)} $`:q?`Confirmer  Net: ${Qe(q.netRevenue)} $`:`Confirmer la vente  ${Qe(parseFloat(_||0))} $`}),h.jsx("button",{className:"btn btn-secondary btn-full",onClick:D,children:"Annuler"})]})]})]}),!s&&!G&&!Y&&h.jsxs("div",{className:"sale-hint",children:[h.jsx("p",{className:"hint-icon",children:""}),h.jsxs("p",{children:["Entre le numro de l'tiquette",h.jsx("br",{}),"pour enregistrer une vente"]})]})]})}const Aa="stockduloft/settings";function Ms(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}const JT={free:{name:"Dcouverte",badge:"",articlesLimit:25,vitrineLimit:10,price:null},artisan:{name:"Artisan",badge:"",articlesLimit:1/0,vitrineLimit:1/0,price:{monthly:12.99,yearly:100}}};function XT(){const[r,e]=k.useState(7),[n,s]=k.useState([]),[o,l]=k.useState([]),[u,p]=k.useState(!1),[m,g]=k.useState(null),[w,_]=k.useState({name:"",commissionPercent:"",locationFee:""}),[y,R]=k.useState(null),[A,O]=k.useState(()=>{const F=new Date;return`${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}`}),[j,ee]=k.useState(!1),[b,G]=k.useState("5"),[V,Y]=k.useState("9.975"),[re,X]=k.useState(""),[fe,Ce]=k.useState(""),[Te,Ae]=k.useState(!1);k.useEffect(()=>{const F=Ee(Ne,Aa);return Vr(F,Xe=>{if(Xe.exists()){const nt=Xe.val();nt.vitrineSoldDays!==void 0&&e(nt.vitrineSoldDays),nt.subscription?R(nt.subscription):R({plan:"free",planType:null,startDate:null,expiryDate:null}),nt.taxes&&(ee(nt.taxes.enabled||!1),nt.taxes.tpsRate!==void 0&&G(nt.taxes.tpsRate.toString()),nt.taxes.tvqRate!==void 0&&Y(nt.taxes.tvqRate.toString()),nt.taxes.tpsNumber!==void 0&&X(nt.taxes.tpsNumber),nt.taxes.tvqNumber!==void 0&&Ce(nt.taxes.tvqNumber))}})},[]),k.useEffect(()=>dy(s),[]),k.useEffect(()=>py(l),[]);const Ge=async F=>{const ve=parseInt(F);e(ve),await ht(Ee(Ne,Aa),{vitrineSoldDays:ve})},U=async F=>{ee(F),await ht(Ee(Ne,`${Aa}/taxes`),{enabled:F,tpsRate:parseFloat(b)||5,tvqRate:parseFloat(V)||9.975,tpsNumber:re,tvqNumber:fe})},me=async()=>{await ht(Ee(Ne,`${Aa}/taxes`),{enabled:j,tpsRate:parseFloat(b)||5,tvqRate:parseFloat(V)||9.975,tpsNumber:re.trim(),tvqNumber:fe.trim()})},Re=50,Ue=Math.round(Re*(parseFloat(b)||0))/100,_e=Math.round(Re*(parseFloat(V)||0)*100)/1e4,H=Re+Ue+_e,se=JT[(y==null?void 0:y.plan)||"free"],q=o.filter(F=>F.status!=="sold").length,N=se.articlesLimit===1/0?0:Math.min(100,Math.round(q/se.articlesLimit*100)),D=((y==null?void 0:y.plan)||"free")==="free",pe=F=>F?new Date(F).toLocaleDateString("fr-CA",{year:"numeric",month:"long",day:"numeric"}):"",W=()=>{if(!(y!=null&&y.expiryDate))return null;const F=new Date,ve=new Date(y.expiryDate);return Math.ceil((ve-F)/(1e3*60*60*24))},te=async()=>{w.name.trim()&&(await OT(w),_({name:"",commissionPercent:"",locationFee:""}),p(!1))},C=F=>{var ve,Xe;g(F.id),_({name:F.name,commissionPercent:((ve=F.commissionPercent)==null?void 0:ve.toString())||"",locationFee:((Xe=F.locationFee)==null?void 0:Xe.toString())||""})},K=async F=>{await LT(F,{name:w.name.trim(),commissionPercent:parseFloat(w.commissionPercent)||0,locationFee:parseFloat(w.locationFee)||0}),g(null),_({name:"",commissionPercent:"",locationFee:""})},ae=async F=>{const ve=o.filter(Xe=>Xe.status==="consignment"&&Xe.consignmentStoreId===F.id);if(ve.length>0){alert(`Impossible de supprimer : ${ve.length} article(s) en consigne chez ${F.name}`);return}confirm(`Supprimer le magasin "${F.name}" ?`)&&await MT(F.id)},oe=(()=>{const[F,ve]=A.split("-").map(Number),Xe=`${F}-${String(ve).padStart(2,"0")}-01`,nt=ve===12?`${F+1}-01-01`:`${F}-${String(ve+1).padStart(2,"0")}-01`,gn={};return n.forEach(Be=>{gn[Be.id]={storeName:Be.name,commissionPercent:Be.commissionPercent,locationFee:Be.locationFee,totalSales:0,totalCommission:0,totalNet:0,itemsSold:0,itemsInConsignment:0}}),o.forEach(Be=>{if(Be.status==="consignment"&&Be.consignmentStoreId&&gn[Be.consignmentStoreId]&&gn[Be.consignmentStoreId].itemsInConsignment++,Be.status==="sold"&&Be.saleDate&&Be.saleDate>=Xe&&Be.saleDate<nt&&Be.consignmentStoreId&&gn[Be.consignmentStoreId]){const vr=gn[Be.consignmentStoreId];vr.itemsSold++,vr.totalSales+=Be.salePrice||0,vr.totalCommission+=Be.commissionAmount||0,vr.totalNet+=Be.netRevenue||Be.salePrice||0}}),Object.values(gn)})(),Oe=oe.some(F=>F.itemsSold>0||F.itemsInConsignment>0);return h.jsxs("div",{className:"page about-page",children:[h.jsx("h2",{className:"page-title",children:"  propos"}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Mon abonnement"}),h.jsxs("div",{className:"subscription-section",children:[h.jsx("div",{className:"subscription-plan-row",children:h.jsxs("div",{className:"subscription-plan-info",children:[h.jsxs("span",{className:"subscription-plan-badge",children:[se.badge," ",se.name]}),!D&&(y==null?void 0:y.planType)&&h.jsx("span",{className:"subscription-plan-type",children:y.planType==="yearly"?"100.00 $/an":"12.99 $/mois"})]})}),h.jsxs("div",{className:"subscription-articles",children:[h.jsxs("div",{className:"subscription-articles-label",children:[h.jsx("span",{children:" Articles actifs"}),h.jsxs("span",{children:[q,D?` / ${se.articlesLimit}`:"  Illimit"]})]}),D&&h.jsx("div",{className:"subscription-progress-bar",children:h.jsx("div",{className:`subscription-progress-fill ${N>=80?"warning":""} ${N>=100?"full":""}`,style:{width:`${N}%`}})})]}),h.jsxs("div",{className:"subscription-detail-row",children:[h.jsx("span",{children:" Vitrine publique"}),h.jsx("span",{children:D?`${se.vitrineLimit} articles max`:"Illimite"})]}),h.jsxs("div",{className:"subscription-detail-row",children:[h.jsx("span",{children:" Suivi consignes"}),h.jsx("span",{children:D?"":""})]}),h.jsxs("div",{className:"subscription-detail-row",children:[h.jsx("span",{children:" tiquettes QR"}),h.jsx("span",{children:D?"":""})]}),!D&&(y==null?void 0:y.expiryDate)&&h.jsxs("div",{className:"subscription-renewal",children:[h.jsx("span",{children:" Renouvellement"}),h.jsxs("span",{className:W()<=7?"renewal-soon":"",children:[pe(y.expiryDate),W()<=7&&W()>0&&h.jsxs("span",{className:"renewal-badge",children:["Dans ",W()," jour(s)"]})]})]}),D?h.jsxs("div",{className:"subscription-upgrade",children:[h.jsx("p",{className:"subscription-upgrade-pitch",children:"Passez au plan Artisan pour des articles illimits, la vitrine complte, le suivi des consignes et plus encore."}),h.jsxs("div",{className:"subscription-upgrade-options",children:[h.jsx("button",{className:"btn btn-upgrade btn-full",children:" Plan Artisan  12.99 $/mois"}),h.jsxs("button",{className:"btn btn-upgrade-yearly btn-full",children:[" Plan Annuel  100 $/an",h.jsx("span",{className:"upgrade-savings",children:"conomisez 56 $ !"})]})]})]}):h.jsx("div",{className:"subscription-manage",children:h.jsx("button",{className:"btn btn-small btn-secondary btn-full",children:"Grer mon abonnement"})})]})]}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Taxes de vente"}),h.jsxs("div",{className:"tax-section",children:[h.jsx("div",{className:"tax-toggle-row",children:h.jsxs("label",{className:"tax-toggle-label",children:[h.jsx("input",{type:"checkbox",checked:j,onChange:F=>U(F.target.checked)}),h.jsx("span",{className:"tax-toggle-text",children:"Je perois les taxes de vente"})]})}),j&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"store-form-row",style:{marginTop:"12px"},children:[h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"TPS (%)"}),h.jsx("input",{type:"number",value:b,onChange:F=>G(F.target.value),onBlur:me,className:"form-input",step:"0.001",min:"0",max:"20",inputMode:"decimal"})]}),h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"TVQ (%)"}),h.jsx("input",{type:"number",value:V,onChange:F=>Y(F.target.value),onBlur:me,className:"form-input",step:"0.001",min:"0",max:"20",inputMode:"decimal"})]})]}),h.jsxs("div",{className:"form-group",style:{marginTop:"8px"},children:[h.jsx("label",{className:"form-label",children:"Numro TPS (optionnel)"}),h.jsx("input",{type:"text",value:re,onChange:F=>X(F.target.value),onBlur:me,className:"form-input",placeholder:"Ex: 123456789RT0001"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Numro TVQ (optionnel)"}),h.jsx("input",{type:"text",value:fe,onChange:F=>Ce(F.target.value),onBlur:me,className:"form-input",placeholder:"Ex: 1234567890TQ0001"})]}),h.jsxs("div",{className:"tax-preview",children:[h.jsx("p",{className:"tax-preview-title",children:"Aperu sur un article  50.00 $ :"}),h.jsxs("div",{className:"tax-preview-row",children:[h.jsx("span",{children:"Prix"}),h.jsx("span",{children:"50.00 $"})]}),h.jsxs("div",{className:"tax-preview-row",children:[h.jsxs("span",{children:["TPS (",b,"%)"]}),h.jsxs("span",{children:[Ue.toFixed(2)," $"]})]}),h.jsxs("div",{className:"tax-preview-row",children:[h.jsxs("span",{children:["TVQ (",V,"%)"]}),h.jsxs("span",{children:[_e.toFixed(2)," $"]})]}),h.jsxs("div",{className:"tax-preview-row tax-preview-total",children:[h.jsx("span",{children:"Total"}),h.jsxs("span",{children:[H.toFixed(2)," $"]})]})]})]}),h.jsx("button",{className:"btn btn-small btn-secondary btn-full",style:{marginTop:"12px"},onClick:()=>Ae(!Te),children:Te?" Masquer":" Ce que vous devez savoir sur les taxes"}),Te&&h.jsxs("div",{className:"tax-info-section",children:[h.jsx("h5",{children:" Taxes de vente  Ce que vous devez savoir"}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Suis-je oblig de percevoir les taxes ?"}),h.jsxs("p",{children:["Au Canada, si vos ventes totales sont infrieures  30 000 $ sur quatre trimestres civils conscutifs, vous tes considr  petit fournisseur  et vous n'tes",h.jsx("strong",{children:" pas oblig"})," de vous inscrire aux taxes (TPS/TVH au fdral et TVQ au Qubec)."]})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Avantages de s'inscrire volontairement"}),h.jsx("p",{children:"Mme sous le seuil de 30 000 $, l'inscription volontaire peut tre avantageuse. Vous pouvez rclamer des crdits de taxe sur les intrants (CTI) pour rcuprer la TPS et la TVQ payes sur vos achats de matriaux, fournitures, outils et quipement. Pour certains artisans, ces remboursements peuvent tre significatifs."})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Inconvnients"}),h.jsx("p",{children:"Si vous vous inscrivez, vous devez percevoir les taxes sur toutes vos ventes, produire des dclarations de taxes rgulirement, et remettre les montants perus aux gouvernements. Cela ajoute de la comptabilit et de l'administration. Vos prix peuvent aussi paratre plus levs face  des artisans non inscrits."})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Si vous dpassez 30 000 $"}),h.jsx("p",{children:"Ds que vos ventes dpassent 30 000 $ au cours d'un seul trimestre civil ou sur quatre trimestres conscutifs, vous devez vous inscrire dans les 29 jours suivants et commencer  percevoir les taxes. Il est important de surveiller vos ventes pour ne pas manquer ce seuil."})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Taux au Qubec"}),h.jsx("p",{children:"TPS (fdral) : 5 %  TVQ (Qubec) : 9,975 %. La TVQ se calcule sur le prix avant TPS (et non sur le prix + TPS). Le taux combin effectif est d'environ 14,975 %."})]}),h.jsxs("div",{className:"tax-info-block",children:[h.jsx("p",{className:"tax-info-subtitle",children:"Ressources officielles"}),h.jsxs("p",{children:[" ",h.jsx("a",{href:"https://www.canada.ca/fr/agence-revenu/services/impot/entreprises/sujets/tps-tvh-entreprises/compte-tps-tvh/inscrire-compte.html",target:"_blank",rel:"noopener noreferrer",children:"Agence du revenu du Canada  Inscription TPS/TVH"}),h.jsx("br",{})," ",h.jsx("a",{href:"https://www.revenuquebec.ca/fr/entreprises/taxes/tpstvh-et-tvq/inscription-aux-fichiers-de-la-tps-et-de-la-tvq/",target:"_blank",rel:"noopener noreferrer",children:"Revenu Qubec  Inscription TPS et TVQ"})]})]}),h.jsx("div",{className:"tax-info-disclaimer",children:h.jsxs("p",{children:[" ",h.jsx("strong",{children:"Avis important :"})," Cette information est fournie  titre indicatif seulement et ne constitue pas un avis fiscal ou juridique. Chaque situation est unique. Consultez un comptable ou un professionnel qualifi pour dterminer ce qui convient  votre situation. Cette application est un outil de gestion d'inventaire et n'assume aucune responsabilit en matire de conformit fiscale."]})})]})]})]}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Magasins de consigne"}),n.length===0?h.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",margin:"12px 0"},children:"Aucun magasin configur"}):h.jsx("div",{className:"stores-list",children:n.map(F=>h.jsx("div",{className:"store-card",children:m===F.id?h.jsxs("div",{className:"store-edit-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom"}),h.jsx("input",{type:"text",value:w.name,onChange:ve=>_(Xe=>({...Xe,name:ve.target.value})),className:"form-input"})]}),h.jsxs("div",{className:"store-form-row",children:[h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Commission (%)"}),h.jsx("input",{type:"number",value:w.commissionPercent,onChange:ve=>_(Xe=>({...Xe,commissionPercent:ve.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"0"})]}),h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),h.jsx("input",{type:"number",value:w.locationFee,onChange:ve=>_(Xe=>({...Xe,locationFee:ve.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"0"})]})]}),h.jsxs("div",{className:"store-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:()=>K(F.id),children:" Sauvegarder"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>g(null),children:"Annuler"})]})]}):h.jsxs("div",{className:"store-info",children:[h.jsxs("div",{className:"store-header",children:[h.jsx("span",{className:"store-name",children:F.name}),h.jsxs("div",{className:"store-actions-btns",children:[h.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>C(F),children:""}),h.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>ae(F),children:""})]})]}),h.jsxs("div",{className:"store-details",children:[F.commissionPercent>0&&h.jsxs("span",{className:"store-tag store-tag-commission",children:[F.commissionPercent,"% commission"]}),F.locationFee>0&&h.jsxs("span",{className:"store-tag store-tag-location",children:[Ms(F.locationFee)," $/mois loyer"]}),!F.commissionPercent&&!F.locationFee&&h.jsx("span",{className:"store-tag",children:"Aucun frais configur"})]}),o.filter(ve=>ve.status==="consignment"&&ve.consignmentStoreId===F.id).length>0&&h.jsxs("p",{className:"store-consigned-count",children:[" ",o.filter(ve=>ve.status==="consignment"&&ve.consignmentStoreId===F.id).length," article(s) en consigne"]})]})},F.id))}),u?h.jsxs("div",{className:"store-add-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom du magasin"}),h.jsx("input",{type:"text",value:w.name,onChange:F=>_(ve=>({...ve,name:F.target.value})),className:"form-input",placeholder:"Ex: SF Studios",autoFocus:!0})]}),h.jsxs("div",{className:"store-form-row",children:[h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Commission (%)"}),h.jsx("input",{type:"number",value:w.commissionPercent,onChange:F=>_(ve=>({...ve,commissionPercent:F.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"Ex: 30"})]}),h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),h.jsx("input",{type:"number",value:w.locationFee,onChange:F=>_(ve=>({...ve,locationFee:F.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"Ex: 50"})]})]}),h.jsxs("div",{className:"store-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:te,disabled:!w.name.trim(),children:" Ajouter"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>{p(!1),_({name:"",commissionPercent:"",locationFee:""})},children:"Annuler"})]})]}):h.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{p(!0),_({name:"",commissionPercent:"",locationFee:""})},style:{marginTop:"10px"},children:" Ajouter un magasin"})]}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Rapport consignes"}),h.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[h.jsx("label",{className:"form-label",children:"Mois"}),h.jsx("input",{type:"month",value:A,onChange:F=>O(F.target.value),className:"form-input"})]}),Oe?h.jsx("div",{className:"report-list",children:oe.filter(F=>F.itemsSold>0||F.itemsInConsignment>0).map((F,ve)=>h.jsxs("div",{className:"report-store-card",children:[h.jsx("div",{className:"report-store-name",children:F.storeName}),F.itemsInConsignment>0&&h.jsxs("div",{className:"report-row",children:[h.jsx("span",{children:" En consigne actuellement"}),h.jsxs("span",{children:[F.itemsInConsignment," article(s)"]})]}),F.itemsSold>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"report-row",children:[h.jsx("span",{children:" Articles vendus"}),h.jsx("span",{children:F.itemsSold})]}),h.jsxs("div",{className:"report-row",children:[h.jsx("span",{children:" Total ventes"}),h.jsxs("span",{children:[Ms(F.totalSales)," $"]})]}),F.commissionPercent>0&&h.jsxs("div",{className:"report-row report-row-negative",children:[h.jsxs("span",{children:[" Commission (",F.commissionPercent,"%)"]}),h.jsxs("span",{children:["-",Ms(F.totalCommission)," $"]})]}),F.locationFee>0&&h.jsxs("div",{className:"report-row report-row-negative",children:[h.jsx("span",{children:" Loyer mensuel"}),h.jsxs("span",{children:["-",Ms(F.locationFee)," $"]})]}),h.jsxs("div",{className:"report-row report-row-total",children:[h.jsx("span",{children:" Revenu net"}),h.jsxs("span",{children:[Ms(F.totalNet-(F.locationFee||0))," $"]})]})]})]},ve))}):h.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginTop:"10px"},children:"Aucune activit de consigne pour ce mois"})]}),h.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[h.jsx("h4",{children:" Paramtres Vitrine"}),h.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[h.jsx("label",{className:"form-label",children:"Afficher les articles vendus pendant :"}),h.jsxs("select",{value:r,onChange:F=>Ge(F.target.value),className:"form-input",children:[h.jsx("option",{value:0,children:"Ne pas afficher"}),h.jsx("option",{value:3,children:"3 jours"}),h.jsx("option",{value:7,children:"7 jours (1 semaine)"}),h.jsx("option",{value:14,children:"14 jours (2 semaines)"}),h.jsx("option",{value:30,children:"30 jours (1 mois)"})]}),h.jsx("p",{className:"about-setting-hint",children:"Les articles vendus apparatront avec un bandeau  VENDU  dans la vitrine publique."})]})]}),h.jsxs("div",{className:"about-card",children:[h.jsx("div",{className:"about-logo",children:h.jsx("img",{src:"/pwa-192x192.png",alt:"Vitrine Artisan"})}),h.jsx("h3",{children:" Vitrine Artisan"}),h.jsx("p",{className:"about-version",children:"Version 1.3"}),h.jsx("p",{className:"about-description",children:"Application de gestion d'inventaire conue pour les artisans et crateurs. Grez vos articles, suivez vos consignes et enregistrez vos ventes en toute simplicit."}),h.jsxs("div",{className:"about-author",children:[h.jsxs("p",{children:["Cr par ",h.jsx("strong",{children:"Jean-Marc Lacroix"})]}),h.jsx("p",{children:" 2026  Tous droits rservs"}),h.jsx("p",{style:{marginTop:"12px"},children:" Commentaires et suggestions bienvenus"}),h.jsx("a",{href:"mailto:lacroix.jeanmarc@gmail.com",className:"about-email",children:" lacroix.jeanmarc@gmail.com"})]})]})]})}const ZT="stockduloft/items",ek="stockduloft/photos",tk="stockduloft/settings",nk=4;function zg(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function rk(r,e){if(r.status!=="sold"||!r.saleDate)return!1;const n=new Date(r.saleDate);return(new Date-n)/(1e3*60*60*24)<=e}function ik(r){const e=[];if(!r)return e;r.photoBase64&&e.push(r.photoBase64);for(let n=1;n<=nk;n++)r[`photo_${n}`]&&e.push(r[`photo_${n}`]);return e}function sk(){const[r,e]=k.useState([]),[n,s]=k.useState(!0),[o,l]=k.useState("all"),[u,p]=k.useState(null),[m,g]=k.useState({}),[w,_]=k.useState({}),[y,R]=k.useState(7);k.useEffect(()=>{const b=Ee(Ne,tk);return Vr(b,V=>{if(V.exists()){const Y=V.val();Y.vitrineSoldDays!==void 0&&R(Y.vitrineSoldDays)}})},[]),k.useEffect(()=>{const b=Ee(Ne,ZT);return Vr(b,V=>{const Y=[];V.exists()&&V.forEach(re=>{const X={id:re.key,...re.val()};(X.status==="inventory"||X.status==="consignment"||rk(X,y))&&Y.push(X)}),Y.sort((re,X)=>(X.createdAt||0)-(re.createdAt||0)),e(Y),s(!1),Y.forEach(async re=>{if(re.hasPhoto&&!re.photoBase64)try{const X=Ee(Ne,`${ek}/${re.id}`),fe=await mn(X);if(fe.exists()){const Ce=ik(fe.val());g(Te=>({...Te,[re.id]:Ce}))}}catch(X){console.error("Erreur photo:",X)}})})},[y]);const A=[...new Set(r.map(b=>b.category).filter(Boolean))].sort(),O=o==="all"?r:r.filter(b=>b.category===o),j=b=>{u===b?p(null):(p(b),_(G=>({...G,[b]:0})))},ee=b=>m[b.id]&&m[b.id].length>0?m[b.id]:b.photoBase64?[b.photoBase64]:[];return n?h.jsx("div",{className:"vitrine",children:h.jsxs("div",{className:"vitrine-loading",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Chargement du catalogue..."})]})}):h.jsxs("div",{className:"vitrine",children:[h.jsxs("header",{className:"vitrine-header",children:[h.jsx("img",{src:"/pwa-192x192.png",alt:"Logo",className:"vitrine-logo"}),h.jsxs("div",{children:[h.jsx("h1",{className:"vitrine-title",children:" L'Atelier du Loft"}),h.jsx("p",{className:"vitrine-subtitle-name",children:"Jose Bourgouin"}),h.jsxs("p",{className:"vitrine-subtitle",children:[O.length," article",O.length>1?"s":""," disponible",O.length>1?"s":""]})]})]}),A.length>0&&h.jsxs("div",{className:"vitrine-filters",children:[h.jsx("button",{className:`vitrine-filter-btn ${o==="all"?"active":""}`,onClick:()=>l("all"),children:"Tous"}),A.map(b=>h.jsx("button",{className:`vitrine-filter-btn ${o===b?"active":""}`,onClick:()=>l(b),children:b},b))]}),O.length===0?h.jsxs("div",{className:"vitrine-empty",children:[h.jsx("p",{children:""}),h.jsx("p",{children:"Aucun article disponible pour le moment"})]}):h.jsx("div",{className:"vitrine-grid",children:O.map(b=>{const G=u===b.id,V=ee(b),Y=w[b.id]||0;return h.jsxs("div",{className:`vitrine-card ${G?"expanded":""}`,onClick:()=>j(b.id),children:[!G&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"vitrine-card-photo",children:[V.length>0?h.jsx("img",{src:V[0],alt:b.description}):b.thumbnail?h.jsx("img",{src:b.thumbnail,alt:b.description,className:"vitrine-thumb-blur"}):h.jsx("div",{className:"vitrine-card-no-photo",children:""}),b.status==="sold"&&h.jsx("div",{className:"vitrine-sold-overlay",children:h.jsx("span",{children:"VENDU"})}),V.length>1&&h.jsxs("span",{className:"vitrine-photo-count",children:[" ",V.length]})]}),h.jsxs("div",{className:"vitrine-card-info",children:[h.jsx("p",{className:"vitrine-card-desc",children:b.description||"Sans description"}),h.jsxs("p",{className:"vitrine-card-price",children:[zg(b.price)," $"]}),b.category&&h.jsx("span",{className:"vitrine-card-category",children:b.category})]})]}),G&&h.jsxs("div",{className:"vitrine-detail",onClick:re=>re.stopPropagation(),children:[h.jsx("button",{className:"vitrine-detail-close",onClick:()=>p(null),children:" Fermer"}),V.length>0&&h.jsxs("div",{className:"vitrine-gallery",children:[h.jsxs("div",{className:"vitrine-gallery-main",children:[h.jsx("img",{src:V[Y],alt:b.description}),b.status==="sold"&&h.jsx("div",{className:"vitrine-sold-overlay",children:h.jsx("span",{children:"VENDU"})})]}),V.length>1&&h.jsx("div",{className:"vitrine-gallery-thumbs",children:V.map((re,X)=>h.jsx("div",{className:`vitrine-gallery-thumb ${Y===X?"active":""}`,onClick:fe=>{fe.stopPropagation(),_(Ce=>({...Ce,[b.id]:X}))},children:h.jsx("img",{src:re,alt:`Photo ${X+1}`})},X))})]}),h.jsxs("div",{className:"vitrine-detail-info",children:[h.jsx("h3",{className:"vitrine-detail-title",children:b.description||"Sans titre"}),h.jsxs("p",{className:"vitrine-detail-price",children:[zg(b.price)," $"]}),h.jsxs("p",{className:"vitrine-detail-id",children:["#",b.uniqueId]}),b.category&&h.jsx("span",{className:"vitrine-card-category",children:b.category}),b.longDescription&&h.jsx("div",{className:"vitrine-detail-description",children:h.jsx("p",{children:b.longDescription})}),b.status==="consignment"&&b.consignmentStore&&h.jsxs("p",{className:"vitrine-detail-consignment",children:[" Disponible chez: ",b.consignmentStore]}),b.itemDate&&h.jsxs("p",{className:"vitrine-detail-date",children:[" Cr le ",b.itemDate]})]})]})]},b.id)})}),h.jsxs("footer",{className:"vitrine-footer",children:[h.jsx("p",{children:" L'Atelier du Loft  Jose Bourgouin"}),h.jsx("p",{className:"vitrine-footer-cta",children:"crivez-moi si quelque chose vous intresse!"}),h.jsx("a",{href:"mailto:Jose.Bourgouin@gmail.com",children:" Jose.Bourgouin@gmail.com"})]})]})}const _o="stockduloft/tenants",ok="lacroix.jeanmarc@gmail.com";function yd(r){var e;return((e=r==null?void 0:r.email)==null?void 0:e.toLowerCase())===ok}function ak(r){const e=Ee(Ne,_o);return Vr(e,s=>{const o=[];s.exists()&&s.forEach(l=>{o.push({id:l.key,...l.val()})}),o.sort((l,u)=>(u.createdAt||0)-(l.createdAt||0)),r(o)})}async function lk({businessName:r,ownerName:e,email:n,phone:s}){const o={businessName:r.trim(),ownerName:e.trim(),email:n.trim().toLowerCase(),phone:(s==null?void 0:s.trim())||"",plan:"free",planType:null,startDate:null,expiryDate:null,articlesCount:0,active:!0,notes:"",createdAt:Date.now()},l=Ee(Ne,_o),u=xh(l);return await ht(u,o),{id:u.key,...o}}async function bl(r,e){const n=Ee(Ne,`${_o}/${r}`);await ht(n,{...e,updatedAt:Date.now()})}async function ck(r,e="monthly"){const n=new Date,s=n.toISOString().split("T")[0];let o;if(e==="yearly"){const l=new Date(n);l.setFullYear(l.getFullYear()+1),o=l.toISOString().split("T")[0]}else{const l=new Date(n);l.setMonth(l.getMonth()+1),o=l.toISOString().split("T")[0]}await bl(r,{plan:"artisan",planType:e,startDate:s,expiryDate:o})}async function uk(r,e=null){const n=Ee(Ne,`${_o}/${r}`),s=await mn(n);if(!s.exists())return;const o=s.val(),l=e||o.planType||"monthly",u=o.expiryDate?new Date(o.expiryDate):new Date,p=new Date,m=u>p?u:p;let g;if(l==="yearly"){const w=new Date(m);w.setFullYear(w.getFullYear()+1),g=w.toISOString().split("T")[0]}else{const w=new Date(m);w.setMonth(w.getMonth()+1),g=w.toISOString().split("T")[0]}await bl(r,{plan:"artisan",planType:l,expiryDate:g})}async function dk(r){await bl(r,{plan:"free",planType:null,startDate:null,expiryDate:null})}async function hk(r){const e=Ee(Ne,`${_o}/${r}`);await cl(e)}function fk(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function pk(){const{user:r}=Pl(),[e,n]=k.useState([]),[s,o]=k.useState(!1),[l,u]=k.useState({businessName:"",ownerName:"",email:"",phone:""}),[p,m]=k.useState(null),[g,w]=k.useState(null),[_,y]=k.useState("");if(k.useEffect(()=>yd(r)?ak(n):void 0,[r]),!yd(r))return h.jsxs("div",{className:"page admin-page",children:[h.jsx("h2",{className:"page-title",children:" Accs refus"}),h.jsx("p",{style:{textAlign:"center",color:"var(--text-muted)"},children:"Cette page est rserve  l'administrateur."})]});const R=e.length,A=e.filter(U=>U.plan==="artisan").length,O=e.filter(U=>U.plan==="free").length,j=e.reduce((U,me)=>me.plan!=="artisan"?U:me.planType==="yearly"?U+100/12:U+12.99,0),ee=e.filter(U=>{if(U.plan!=="artisan"||!U.expiryDate)return!1;const me=Math.ceil((new Date(U.expiryDate)-new Date)/(1e3*60*60*24));return me<=7&&me>0}),b=e.filter(U=>U.plan!=="artisan"||!U.expiryDate?!1:new Date(U.expiryDate)<new Date),G=async()=>{!l.businessName.trim()||!l.ownerName.trim()||(await lk(l),u({businessName:"",ownerName:"",email:"",phone:""}),o(!1))},V=async(U,me)=>{confirm(`Activer le plan ${me==="yearly"?"annuel (100$/an)":"mensuel (12.99$/mois)"}?`)&&await ck(U,me)},Y=async U=>{confirm("Renouveler le plan?")&&await uk(U)},re=async U=>{confirm("Rtrograder au plan gratuit?")&&await dk(U)},X=async U=>{confirm(`Supprimer "${U.businessName}" ? Cette action est irrversible.`)&&(await hk(U.id),m(null))},fe=async U=>{await bl(U,{notes:_}),w(null)},Ce=U=>U?new Date(U).toLocaleDateString("fr-CA"):"",Te=U=>U?Math.ceil((new Date(U)-new Date)/(1e3*60*60*24)):null,Ae=U=>U.plan==="free"?"plan-badge-free":U.expiryDate&&new Date(U.expiryDate)<new Date?"plan-badge-expired":"plan-badge-artisan",Ge=U=>U.plan==="free"?" Dcouverte":U.expiryDate&&new Date(U.expiryDate)<new Date?" Expir":" Artisan";return h.jsxs("div",{className:"page admin-page",children:[h.jsx("h2",{className:"page-title",children:" Admin  Vitrine Artisan"}),h.jsxs("div",{className:"admin-stats",children:[h.jsxs("div",{className:"admin-stat-card",children:[h.jsx("span",{className:"admin-stat-number",children:R}),h.jsx("span",{className:"admin-stat-label",children:"Artisans"})]}),h.jsxs("div",{className:"admin-stat-card stat-paying",children:[h.jsx("span",{className:"admin-stat-number",children:A}),h.jsx("span",{className:"admin-stat-label",children:"Payants"})]}),h.jsxs("div",{className:"admin-stat-card stat-free",children:[h.jsx("span",{className:"admin-stat-number",children:O}),h.jsx("span",{className:"admin-stat-label",children:"Gratuits"})]}),h.jsxs("div",{className:"admin-stat-card stat-revenue",children:[h.jsxs("span",{className:"admin-stat-number",children:[fk(j)," $"]}),h.jsx("span",{className:"admin-stat-label",children:"Rev./mois"})]})]}),(ee.length>0||b.length>0)&&h.jsxs("div",{className:"admin-alerts",children:[b.length>0&&h.jsxs("div",{className:"admin-alert admin-alert-danger",children:[" ",b.length," plan(s) expir(s)  action requise"]}),ee.length>0&&h.jsxs("div",{className:"admin-alert admin-alert-warning",children:[" ",ee.length," plan(s) expire(nt) dans 7 jours"]})]}),h.jsxs("div",{className:"admin-section",children:[h.jsxs("div",{className:"admin-section-header",children:[h.jsx("h3",{children:" Artisans"}),h.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{o(!s),u({businessName:"",ownerName:"",email:"",phone:""})},children:" Nouveau client"})]}),s&&h.jsxs("div",{className:"admin-add-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom de l'entreprise"}),h.jsx("input",{type:"text",value:l.businessName,onChange:U=>u(me=>({...me,businessName:U.target.value})),className:"form-input",placeholder:"Ex: Les Crations de Marie",autoFocus:!0})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Nom du propritaire"}),h.jsx("input",{type:"text",value:l.ownerName,onChange:U=>u(me=>({...me,ownerName:U.target.value})),className:"form-input",placeholder:"Ex: Marie Tremblay"})]}),h.jsxs("div",{className:"store-form-row",children:[h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Courriel"}),h.jsx("input",{type:"email",value:l.email,onChange:U=>u(me=>({...me,email:U.target.value})),className:"form-input",placeholder:"marie@gmail.com"})]}),h.jsxs("div",{className:"form-group",style:{flex:1},children:[h.jsx("label",{className:"form-label",children:"Tlphone"}),h.jsx("input",{type:"tel",value:l.phone,onChange:U=>u(me=>({...me,phone:U.target.value})),className:"form-input",placeholder:"819-555-1234"})]})]}),h.jsxs("div",{className:"store-edit-actions",children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:G,disabled:!l.businessName.trim()||!l.ownerName.trim(),children:" Ajouter"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>o(!1),children:"Annuler"})]})]}),e.length===0?h.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",textAlign:"center",padding:"20px 0"},children:"Aucun artisan inscrit"}):h.jsx("div",{className:"admin-tenants-list",children:e.map(U=>{const me=p===U.id,Re=Te(U.expiryDate),Ue=U.plan==="artisan"&&Re!==null&&Re<=0;return h.jsxs("div",{className:`admin-tenant-card ${me?"expanded":""} ${Ue?"tenant-expired":""}`,onClick:()=>m(me?null:U.id),children:[h.jsxs("div",{className:"admin-tenant-summary",children:[h.jsxs("div",{className:"admin-tenant-info",children:[h.jsx("span",{className:"admin-tenant-business",children:U.businessName}),h.jsx("span",{className:"admin-tenant-owner",children:U.ownerName})]}),h.jsx("span",{className:`admin-plan-badge ${Ae(U)}`,children:Ge(U)})]}),me&&h.jsxs("div",{className:"admin-tenant-details",onClick:_e=>_e.stopPropagation(),children:[h.jsxs("div",{className:"admin-detail-grid",children:[h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Courriel"}),h.jsx("span",{className:"admin-detail-value",children:U.email||""})]}),h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Tlphone"}),h.jsx("span",{className:"admin-detail-value",children:U.phone||""})]}),h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Inscrit le"}),h.jsx("span",{className:"admin-detail-value",children:Ce(U.createdAt?new Date(U.createdAt).toISOString():null)})]}),U.plan==="artisan"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Type"}),h.jsx("span",{className:"admin-detail-value",children:U.planType==="yearly"?"Annuel (100$/an)":"Mensuel (12.99$/mois)"})]}),h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Dbut"}),h.jsx("span",{className:"admin-detail-value",children:Ce(U.startDate)})]}),h.jsxs("div",{className:"admin-detail-item",children:[h.jsx("span",{className:"admin-detail-label",children:" Expiration"}),h.jsxs("span",{className:`admin-detail-value ${Ue?"text-danger":Re<=7?"text-warning":""}`,children:[Ce(U.expiryDate),Re!==null&&h.jsx("span",{className:"admin-days-badge",children:Ue?`Expir (${Math.abs(Re)}j)`:`${Re}j`})]})]})]})]}),h.jsx("div",{className:"admin-notes",children:g===U.id?h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:" Notes"}),h.jsx("textarea",{value:_,onChange:_e=>y(_e.target.value),className:"form-input form-textarea",rows:"3",placeholder:"Notes sur ce client..."}),h.jsxs("div",{className:"store-edit-actions",style:{marginTop:"6px"},children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:()=>fe(U.id),children:""}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>w(null),children:"Annuler"})]})]}):h.jsxs("div",{className:"admin-notes-display",onClick:()=>{w(U.id),y(U.notes||"")},children:[h.jsx("span",{className:"admin-detail-label",children:" Notes"}),h.jsx("p",{children:U.notes||"Cliquez pour ajouter une note..."})]})}),h.jsxs("div",{className:"admin-tenant-actions",children:[U.plan==="free"?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-small btn-upgrade",onClick:()=>V(U.id,"monthly"),children:" Activer mensuel"}),h.jsx("button",{className:"btn btn-small btn-upgrade-yearly",onClick:()=>V(U.id,"yearly"),children:" Activer annuel"})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-small btn-save",onClick:()=>Y(U.id),children:" Renouveler"}),h.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>re(U.id),children:" Plan gratuit"})]}),h.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>X(U),children:" Supprimer"})]})]})]},U.id)})})]})]})}function mk(){const{login:r}=Pl(),[e,n]=k.useState(""),[s,o]=k.useState(!1),l=async()=>{n(""),o(!0);try{await r()}catch{n("Erreur de connexion. Ressayez.")}finally{o(!1)}};return h.jsx("div",{className:"login-page",children:h.jsxs("div",{className:"login-card",children:[h.jsx("div",{className:"login-logo",children:""}),h.jsx("h1",{className:"login-title",children:"Stock du Loft"}),h.jsxs("p",{className:"login-subtitle",children:["Gestion d'inventaire pour",h.jsx("br",{}),"L'Atelier du Loft"]}),h.jsx("button",{onClick:l,className:"btn btn-primary btn-login",disabled:s,children:s?"Connexion...":" Se connecter avec Google"}),e&&h.jsx("p",{className:"error-text",children:e})]})})}function gk(){var s;const{user:r,logout:e}=Pl();return Hr().pathname==="/vitrine"?h.jsx(sk,{}):r?h.jsxs("div",{className:"app",children:[h.jsx("header",{className:"app-header",children:h.jsxs("div",{className:"header-content",children:[h.jsxs("h1",{className:"app-title",children:[h.jsx("span",{className:"title-icon",children:""}),"Stock du Loft"]}),h.jsxs("div",{className:"header-user",children:[h.jsx("span",{className:"user-name",children:(s=r.displayName)==null?void 0:s.split(" ")[0]}),h.jsx("button",{onClick:e,className:"btn-logout",title:"Dconnexion",children:""})]})]})}),h.jsx("main",{className:"app-main",children:h.jsxs(hS,{children:[h.jsx(Ar,{path:"/",element:h.jsx(HT,{})}),h.jsx(Ar,{path:"/add",element:h.jsx(QT,{})}),h.jsx(Ar,{path:"/sale",element:h.jsx(YT,{})}),h.jsx(Ar,{path:"/about",element:h.jsx(XT,{})}),h.jsx(Ar,{path:"/admin",element:h.jsx(pk,{})}),h.jsx(Ar,{path:"*",element:h.jsx(uS,{to:"/",replace:!0})})]})}),h.jsxs("nav",{className:"bottom-nav",children:[h.jsxs(As,{to:"/",end:!0,className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Inventaire"})]}),h.jsxs(As,{to:"/sale",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Vente"})]}),h.jsxs(As,{to:"/add",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Ajouter"})]}),h.jsxs(As,{to:"/about",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Info"})]}),yd(r)&&h.jsxs(As,{to:"/admin",className:({isActive:o})=>`nav-item ${o?"active":""}`,children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Admin"})]})]})]}):h.jsx(mk,{})}function vk(){return h.jsx(kT,{children:h.jsx(gk,{})})}S0.createRoot(document.getElementById("root")).render(h.jsx(Wg.StrictMode,{children:h.jsx(wS,{children:h.jsx(vk,{})})}));
