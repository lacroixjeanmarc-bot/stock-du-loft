function a0(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in r)){const a=Object.getOwnPropertyDescriptor(s,l);a&&Object.defineProperty(r,l,a.get?a:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function Fg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var mc={exports:{}},Is={},gc={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um;function u0(){if(um)return ve;um=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=_&&I[_]||I["@@iterator"],typeof I=="function"?I:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,D={};function O(I,L,fe){this.props=I,this.context=L,this.refs=D,this.updater=fe||R}O.prototype.isReactComponent={},O.prototype.setState=function(I,L){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,L,"setState")},O.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function J(){}J.prototype=O.prototype;function A(I,L,fe){this.props=I,this.context=L,this.refs=D,this.updater=fe||R}var G=A.prototype=new J;G.constructor=A,b(G,O.prototype),G.isPureReactComponent=!0;var V=Array.isArray,Q=Object.prototype.hasOwnProperty,Z={current:null},ee={key:!0,ref:!0,__self:!0,__source:!0};function he(I,L,fe){var me,Se={},x=null,re=null;if(L!=null)for(me in L.ref!==void 0&&(re=L.ref),L.key!==void 0&&(x=""+L.key),L)Q.call(L,me)&&!ee.hasOwnProperty(me)&&(Se[me]=L[me]);var ae=arguments.length-2;if(ae===1)Se.children=fe;else if(1<ae){for(var pe=Array(ae),ie=0;ie<ae;ie++)pe[ie]=arguments[ie+2];Se.children=pe}if(I&&I.defaultProps)for(me in ae=I.defaultProps,ae)Se[me]===void 0&&(Se[me]=ae[me]);return{$$typeof:r,type:I,key:x,ref:re,props:Se,_owner:Z.current}}function xe(I,L){return{$$typeof:r,type:I.type,key:L,ref:I.ref,props:I.props,_owner:I._owner}}function ke(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function st(I){var L={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(fe){return L[fe]})}var Qe=/\/+/g;function je(I,L){return typeof I=="object"&&I!==null&&I.key!=null?st(""+I.key):L.toString(36)}function z(I,L,fe,me,Se){var x=typeof I;(x==="undefined"||x==="boolean")&&(I=null);var re=!1;if(I===null)re=!0;else switch(x){case"string":case"number":re=!0;break;case"object":switch(I.$$typeof){case r:case e:re=!0}}if(re)return re=I,Se=Se(re),I=me===""?"."+je(re,0):me,V(Se)?(fe="",I!=null&&(fe=I.replace(Qe,"$&/")+"/"),z(Se,L,fe,"",function(ie){return ie})):Se!=null&&(ke(Se)&&(Se=xe(Se,fe+(!Se.key||re&&re.key===Se.key?"":(""+Se.key).replace(Qe,"$&/")+"/")+I)),L.push(Se)),1;if(re=0,me=me===""?".":me+":",V(I))for(var ae=0;ae<I.length;ae++){x=I[ae];var pe=me+je(x,ae);re+=z(x,L,fe,pe,Se)}else if(pe=y(I),typeof pe=="function")for(I=pe.call(I),ae=0;!(x=I.next()).done;)x=x.value,pe=me+je(x,ae++),re+=z(x,L,fe,pe,Se);else if(x==="object")throw L=String(I),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return re}function se(I,L,fe){if(I==null)return I;var me=[],Se=0;return z(I,me,"","",function(x){return L.call(fe,x,Se++)}),me}function ge(I){if(I._status===-1){var L=I._result;L=L(),L.then(function(fe){(I._status===0||I._status===-1)&&(I._status=1,I._result=fe)},function(fe){(I._status===0||I._status===-1)&&(I._status=2,I._result=fe)}),I._status===-1&&(I._status=0,I._result=L)}if(I._status===1)return I._result.default;throw I._result}var te={current:null},U={transition:null},$={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:U,ReactCurrentOwner:Z};function H(){throw Error("act(...) is not supported in production builds of React.")}return ve.Children={map:se,forEach:function(I,L,fe){se(I,function(){L.apply(this,arguments)},fe)},count:function(I){var L=0;return se(I,function(){L++}),L},toArray:function(I){return se(I,function(L){return L})||[]},only:function(I){if(!ke(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},ve.Component=O,ve.Fragment=n,ve.Profiler=l,ve.PureComponent=A,ve.StrictMode=s,ve.Suspense=p,ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,ve.act=H,ve.cloneElement=function(I,L,fe){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var me=b({},I.props),Se=I.key,x=I.ref,re=I._owner;if(L!=null){if(L.ref!==void 0&&(x=L.ref,re=Z.current),L.key!==void 0&&(Se=""+L.key),I.type&&I.type.defaultProps)var ae=I.type.defaultProps;for(pe in L)Q.call(L,pe)&&!ee.hasOwnProperty(pe)&&(me[pe]=L[pe]===void 0&&ae!==void 0?ae[pe]:L[pe])}var pe=arguments.length-2;if(pe===1)me.children=fe;else if(1<pe){ae=Array(pe);for(var ie=0;ie<pe;ie++)ae[ie]=arguments[ie+2];me.children=ae}return{$$typeof:r,type:I.type,key:Se,ref:x,props:me,_owner:re}},ve.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:a,_context:I},I.Consumer=I},ve.createElement=he,ve.createFactory=function(I){var L=he.bind(null,I);return L.type=I,L},ve.createRef=function(){return{current:null}},ve.forwardRef=function(I){return{$$typeof:f,render:I}},ve.isValidElement=ke,ve.lazy=function(I){return{$$typeof:w,_payload:{_status:-1,_result:I},_init:ge}},ve.memo=function(I,L){return{$$typeof:g,type:I,compare:L===void 0?null:L}},ve.startTransition=function(I){var L=U.transition;U.transition={};try{I()}finally{U.transition=L}},ve.unstable_act=H,ve.useCallback=function(I,L){return te.current.useCallback(I,L)},ve.useContext=function(I){return te.current.useContext(I)},ve.useDebugValue=function(){},ve.useDeferredValue=function(I){return te.current.useDeferredValue(I)},ve.useEffect=function(I,L){return te.current.useEffect(I,L)},ve.useId=function(){return te.current.useId()},ve.useImperativeHandle=function(I,L,fe){return te.current.useImperativeHandle(I,L,fe)},ve.useInsertionEffect=function(I,L){return te.current.useInsertionEffect(I,L)},ve.useLayoutEffect=function(I,L){return te.current.useLayoutEffect(I,L)},ve.useMemo=function(I,L){return te.current.useMemo(I,L)},ve.useReducer=function(I,L,fe){return te.current.useReducer(I,L,fe)},ve.useRef=function(I){return te.current.useRef(I)},ve.useState=function(I){return te.current.useState(I)},ve.useSyncExternalStore=function(I,L,fe){return te.current.useSyncExternalStore(I,L,fe)},ve.useTransition=function(){return te.current.useTransition()},ve.version="18.3.1",ve}var cm;function hd(){return cm||(cm=1,gc.exports=u0()),gc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm;function c0(){if(dm)return Is;dm=1;var r=hd(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,g){var w,_={},y=null,R=null;g!==void 0&&(y=""+g),p.key!==void 0&&(y=""+p.key),p.ref!==void 0&&(R=p.ref);for(w in p)s.call(p,w)&&!a.hasOwnProperty(w)&&(_[w]=p[w]);if(f&&f.defaultProps)for(w in p=f.defaultProps,p)_[w]===void 0&&(_[w]=p[w]);return{$$typeof:e,type:f,key:y,ref:R,props:_,_owner:l.current}}return Is.Fragment=n,Is.jsx=c,Is.jsxs=c,Is}var hm;function d0(){return hm||(hm=1,mc.exports=c0()),mc.exports}var m=d0(),P=hd();const Ug=Fg(P),h0=a0({__proto__:null,default:Ug},[P]);var wl={},vc={exports:{}},xt={},_c={exports:{}},yc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function f0(){return fm||(fm=1,(function(r){function e(U,$){var H=U.length;U.push($);e:for(;0<H;){var I=H-1>>>1,L=U[I];if(0<l(L,$))U[I]=$,U[H]=L,H=I;else break e}}function n(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var $=U[0],H=U.pop();if(H!==$){U[0]=H;e:for(var I=0,L=U.length,fe=L>>>1;I<fe;){var me=2*(I+1)-1,Se=U[me],x=me+1,re=U[x];if(0>l(Se,H))x<L&&0>l(re,Se)?(U[I]=re,U[x]=H,I=x):(U[I]=Se,U[me]=H,I=me);else if(x<L&&0>l(re,H))U[I]=re,U[x]=H,I=x;else break e}}return $}function l(U,$){var H=U.sortIndex-$.sortIndex;return H!==0?H:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var p=[],g=[],w=1,_=null,y=3,R=!1,b=!1,D=!1,O=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(U){for(var $=n(g);$!==null;){if($.callback===null)s(g);else if($.startTime<=U)s(g),$.sortIndex=$.expirationTime,e(p,$);else break;$=n(g)}}function V(U){if(D=!1,G(U),!b)if(n(p)!==null)b=!0,ge(Q);else{var $=n(g);$!==null&&te(V,$.startTime-U)}}function Q(U,$){b=!1,D&&(D=!1,J(he),he=-1),R=!0;var H=y;try{for(G($),_=n(p);_!==null&&(!(_.expirationTime>$)||U&&!st());){var I=_.callback;if(typeof I=="function"){_.callback=null,y=_.priorityLevel;var L=I(_.expirationTime<=$);$=r.unstable_now(),typeof L=="function"?_.callback=L:_===n(p)&&s(p),G($)}else s(p);_=n(p)}if(_!==null)var fe=!0;else{var me=n(g);me!==null&&te(V,me.startTime-$),fe=!1}return fe}finally{_=null,y=H,R=!1}}var Z=!1,ee=null,he=-1,xe=5,ke=-1;function st(){return!(r.unstable_now()-ke<xe)}function Qe(){if(ee!==null){var U=r.unstable_now();ke=U;var $=!0;try{$=ee(!0,U)}finally{$?je():(Z=!1,ee=null)}}else Z=!1}var je;if(typeof A=="function")je=function(){A(Qe)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,se=z.port2;z.port1.onmessage=Qe,je=function(){se.postMessage(null)}}else je=function(){O(Qe,0)};function ge(U){ee=U,Z||(Z=!0,je())}function te(U,$){he=O(function(){U(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_continueExecution=function(){b||R||(b=!0,ge(Q))},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return n(p)},r.unstable_next=function(U){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var H=y;y=$;try{return U()}finally{y=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=y;y=U;try{return $()}finally{y=H}},r.unstable_scheduleCallback=function(U,$,H){var I=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?I+H:I):H=I,U){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=H+L,U={id:w++,callback:$,priorityLevel:U,startTime:H,expirationTime:L,sortIndex:-1},H>I?(U.sortIndex=H,e(g,U),n(p)===null&&U===n(g)&&(D?(J(he),he=-1):D=!0,te(V,H-I))):(U.sortIndex=L,e(p,U),b||R||(b=!0,ge(Q))),U},r.unstable_shouldYield=st,r.unstable_wrapCallback=function(U){var $=y;return function(){var H=y;y=$;try{return U.apply(this,arguments)}finally{y=H}}}})(yc)),yc}var pm;function p0(){return pm||(pm=1,_c.exports=f0()),_c.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function m0(){if(mm)return xt;mm=1;var r=hd(),e=p0();function n(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function a(t,i){c(t,i),c(t+"Capture",i)}function c(t,i){for(l[t]=i,t=0;t<i.length;t++)s.add(i[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function y(t){return p.call(_,t)?!0:p.call(w,t)?!1:g.test(t)?_[t]=!0:(w[t]=!0,!1)}function R(t,i,o,u){if(o!==null&&o.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b(t,i,o,u){if(i===null||typeof i>"u"||R(t,i,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function D(t,i,o,u,d,h,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=t,this.type=i,this.sanitizeURL=h,this.removeEmptyString=v}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){O[t]=new D(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];O[i]=new D(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){O[t]=new D(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){O[t]=new D(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){O[t]=new D(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){O[t]=new D(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){O[t]=new D(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){O[t]=new D(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){O[t]=new D(t,5,!1,t.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function A(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(J,A);O[i]=new D(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(J,A);O[i]=new D(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(J,A);O[i]=new D(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){O[t]=new D(t,1,!1,t.toLowerCase(),null,!1,!1)}),O.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){O[t]=new D(t,1,!1,t.toLowerCase(),null,!0,!0)});function G(t,i,o,u){var d=O.hasOwnProperty(i)?O[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(b(i,o,d,u)&&(o=null),u||d===null?y(i)&&(o===null?t.removeAttribute(i):t.setAttribute(i,""+o)):d.mustUseProperty?t[d.propertyName]=o===null?d.type===3?!1:"":o:(i=d.attributeName,u=d.attributeNamespace,o===null?t.removeAttribute(i):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,u?t.setAttributeNS(u,i,o):t.setAttribute(i,o))))}var V=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),Z=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),xe=Symbol.for("react.profiler"),ke=Symbol.for("react.provider"),st=Symbol.for("react.context"),Qe=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),U=Symbol.iterator;function $(t){return t===null||typeof t!="object"?null:(t=U&&t[U]||t["@@iterator"],typeof t=="function"?t:null)}var H=Object.assign,I;function L(t){if(I===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);I=i&&i[1]||""}return`
`+I+t}var fe=!1;function me(t,i){if(!t||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(T){var u=T}Reflect.construct(t,[],i)}else{try{i.call()}catch(T){u=T}t.call(i.prototype)}else{try{throw Error()}catch(T){u=T}t()}}catch(T){if(T&&u&&typeof T.stack=="string"){for(var d=T.stack.split(`
`),h=u.stack.split(`
`),v=d.length-1,S=h.length-1;1<=v&&0<=S&&d[v]!==h[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==h[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==h[S]){var C=`
`+d[v].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=v&&0<=S);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?L(t):""}function Se(t){switch(t.tag){case 5:return L(t.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return t=me(t.type,!1),t;case 11:return t=me(t.type.render,!1),t;case 1:return t=me(t.type,!0),t;default:return""}}function x(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ee:return"Fragment";case Z:return"Portal";case xe:return"Profiler";case he:return"StrictMode";case je:return"Suspense";case z:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case st:return(t.displayName||"Context")+".Consumer";case ke:return(t._context.displayName||"Context")+".Provider";case Qe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case se:return i=t.displayName||null,i!==null?i:x(t.type)||"Memo";case ge:i=t._payload,t=t._init;try{return x(t(i))}catch{}}return null}function re(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return x(i);case 8:return i===he?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ae(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pe(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ie(t){var i=pe(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),u=""+t[i];if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,h=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,h.call(this,v)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Fe(t){t._valueTracker||(t._valueTracker=ie(t))}function tn(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return t&&(u=pe(t)?t.checked?"true":"false":t.value),t=u,t!==o?(i.setValue(t),!0):!1}function co(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ca(t,i){var o=i.checked;return H({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function mh(t,i){var o=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;o=ae(i.value!=null?i.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function gh(t,i){i=i.checked,i!=null&&G(t,"checked",i,!1)}function Ea(t,i){gh(t,i);var o=ae(i.value),u=i.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Ia(t,i.type,o):i.hasOwnProperty("defaultValue")&&Ia(t,i.type,ae(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function vh(t,i,o){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,o||i===t.value||(t.value=i),t.defaultValue=i}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Ia(t,i,o){(i!=="number"||co(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Ui=Array.isArray;function zr(t,i,o,u){if(t=t.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<t.length;o++)d=i.hasOwnProperty("$"+t[o].value),t[o].selected!==d&&(t[o].selected=d),d&&u&&(t[o].defaultSelected=!0)}else{for(o=""+ae(o),i=null,d=0;d<t.length;d++){if(t[d].value===o){t[d].selected=!0,u&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function xa(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return H({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _h(t,i){var o=i.value;if(o==null){if(o=i.children,i=i.defaultValue,o!=null){if(i!=null)throw Error(n(92));if(Ui(o)){if(1<o.length)throw Error(n(93));o=o[0]}i=o}i==null&&(i=""),o=i}t._wrapperState={initialValue:ae(o)}}function yh(t,i){var o=ae(i.value),u=ae(i.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),i.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function wh(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Sh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Na(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Sh(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ho,Ch=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,o,u,d){MSApp.execUnsafeLocalFunction(function(){return t(i,o,u,d)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(ho=ho||document.createElement("div"),ho.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ho.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function zi(t,i){if(i){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=i;return}}t.textContent=i}var $i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hy=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(t){hy.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),$i[i]=$i[t]})});function Eh(t,i,o){return i==null||typeof i=="boolean"||i===""?"":o||typeof i!="number"||i===0||$i.hasOwnProperty(t)&&$i[t]?(""+i).trim():i+"px"}function Ih(t,i){t=t.style;for(var o in i)if(i.hasOwnProperty(o)){var u=o.indexOf("--")===0,d=Eh(o,i[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,d):t[o]=d}}var fy=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ka(t,i){if(i){if(fy[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function Ta(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=null;function Ra(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Aa=null,$r=null,Br=null;function xh(t){if(t=us(t)){if(typeof Aa!="function")throw Error(n(280));var i=t.stateNode;i&&(i=Lo(i),Aa(t.stateNode,t.type,i))}}function Nh(t){$r?Br?Br.push(t):Br=[t]:$r=t}function kh(){if($r){var t=$r,i=Br;if(Br=$r=null,xh(t),i)for(t=0;t<i.length;t++)xh(i[t])}}function Th(t,i){return t(i)}function Ph(){}var ba=!1;function Rh(t,i,o){if(ba)return t(i,o);ba=!0;try{return Th(t,i,o)}finally{ba=!1,($r!==null||Br!==null)&&(Ph(),kh())}}function Bi(t,i){var o=t.stateNode;if(o===null)return null;var u=Lo(o);if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,i,typeof o));return o}var Oa=!1;if(f)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{Oa=!1}function py(t,i,o,u,d,h,v,S,C){var T=Array.prototype.slice.call(arguments,3);try{i.apply(o,T)}catch(j){this.onError(j)}}var Vi=!1,fo=null,po=!1,Da=null,my={onError:function(t){Vi=!0,fo=t}};function gy(t,i,o,u,d,h,v,S,C){Vi=!1,fo=null,py.apply(my,arguments)}function vy(t,i,o,u,d,h,v,S,C){if(gy.apply(this,arguments),Vi){if(Vi){var T=fo;Vi=!1,fo=null}else throw Error(n(198));po||(po=!0,Da=T)}}function hr(t){var i=t,o=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(o=i.return),t=i.return;while(t)}return i.tag===3?o:null}function Ah(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function bh(t){if(hr(t)!==t)throw Error(n(188))}function _y(t){var i=t.alternate;if(!i){if(i=hr(t),i===null)throw Error(n(188));return i!==t?null:t}for(var o=t,u=i;;){var d=o.return;if(d===null)break;var h=d.alternate;if(h===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===o)return bh(d),t;if(h===u)return bh(d),i;h=h.sibling}throw Error(n(188))}if(o.return!==u.return)o=d,u=h;else{for(var v=!1,S=d.child;S;){if(S===o){v=!0,o=d,u=h;break}if(S===u){v=!0,u=d,o=h;break}S=S.sibling}if(!v){for(S=h.child;S;){if(S===o){v=!0,o=h,u=d;break}if(S===u){v=!0,u=h,o=d;break}S=S.sibling}if(!v)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:i}function Oh(t){return t=_y(t),t!==null?Dh(t):null}function Dh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Dh(t);if(i!==null)return i;t=t.sibling}return null}var Lh=e.unstable_scheduleCallback,Mh=e.unstable_cancelCallback,yy=e.unstable_shouldYield,wy=e.unstable_requestPaint,Ge=e.unstable_now,Sy=e.unstable_getCurrentPriorityLevel,La=e.unstable_ImmediatePriority,jh=e.unstable_UserBlockingPriority,mo=e.unstable_NormalPriority,Cy=e.unstable_LowPriority,Fh=e.unstable_IdlePriority,go=null,nn=null;function Ey(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(go,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Ny,Iy=Math.log,xy=Math.LN2;function Ny(t){return t>>>=0,t===0?32:31-(Iy(t)/xy|0)|0}var vo=64,_o=4194304;function Hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yo(t,i){var o=t.pendingLanes;if(o===0)return 0;var u=0,d=t.suspendedLanes,h=t.pingedLanes,v=o&268435455;if(v!==0){var S=v&~d;S!==0?u=Hi(S):(h&=v,h!==0&&(u=Hi(h)))}else v=o&~d,v!==0?u=Hi(v):h!==0&&(u=Hi(h));if(u===0)return 0;if(i!==0&&i!==u&&(i&d)===0&&(d=u&-u,h=i&-i,d>=h||d===16&&(h&4194240)!==0))return i;if((u&4)!==0&&(u|=o&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=u;0<i;)o=31-zt(i),d=1<<o,u|=t[o],i&=~d;return u}function ky(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ty(t,i){for(var o=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,h=t.pendingLanes;0<h;){var v=31-zt(h),S=1<<v,C=d[v];C===-1?((S&o)===0||(S&u)!==0)&&(d[v]=ky(S,i)):C<=i&&(t.expiredLanes|=S),h&=~S}}function Ma(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uh(){var t=vo;return vo<<=1,(vo&4194240)===0&&(vo=64),t}function ja(t){for(var i=[],o=0;31>o;o++)i.push(t);return i}function Gi(t,i,o){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-zt(i),t[i]=o}function Py(t,i){var o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var d=31-zt(o),h=1<<d;i[d]=0,u[d]=-1,t[d]=-1,o&=~h}}function Fa(t,i){var o=t.entangledLanes|=i;for(t=t.entanglements;o;){var u=31-zt(o),d=1<<u;d&i|t[u]&i&&(t[u]|=i),o&=~d}}var Ne=0;function zh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var $h,Ua,Bh,Wh,Vh,za=!1,wo=[],Rn=null,An=null,bn=null,qi=new Map,Ki=new Map,On=[],Ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hh(t,i){switch(t){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":qi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(i.pointerId)}}function Qi(t,i,o,u,d,h){return t===null||t.nativeEvent!==h?(t={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:h,targetContainers:[d]},i!==null&&(i=us(i),i!==null&&Ua(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function Ay(t,i,o,u,d){switch(i){case"focusin":return Rn=Qi(Rn,t,i,o,u,d),!0;case"dragenter":return An=Qi(An,t,i,o,u,d),!0;case"mouseover":return bn=Qi(bn,t,i,o,u,d),!0;case"pointerover":var h=d.pointerId;return qi.set(h,Qi(qi.get(h)||null,t,i,o,u,d)),!0;case"gotpointercapture":return h=d.pointerId,Ki.set(h,Qi(Ki.get(h)||null,t,i,o,u,d)),!0}return!1}function Gh(t){var i=fr(t.target);if(i!==null){var o=hr(i);if(o!==null){if(i=o.tag,i===13){if(i=Ah(o),i!==null){t.blockedOn=i,Vh(t.priority,function(){Bh(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function So(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var o=Ba(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);Pa=u,o.target.dispatchEvent(u),Pa=null}else return i=us(o),i!==null&&Ua(i),t.blockedOn=o,!1;i.shift()}return!0}function qh(t,i,o){So(t)&&o.delete(i)}function by(){za=!1,Rn!==null&&So(Rn)&&(Rn=null),An!==null&&So(An)&&(An=null),bn!==null&&So(bn)&&(bn=null),qi.forEach(qh),Ki.forEach(qh)}function Yi(t,i){t.blockedOn===i&&(t.blockedOn=null,za||(za=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,by)))}function Ji(t){function i(d){return Yi(d,t)}if(0<wo.length){Yi(wo[0],t);for(var o=1;o<wo.length;o++){var u=wo[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Rn!==null&&Yi(Rn,t),An!==null&&Yi(An,t),bn!==null&&Yi(bn,t),qi.forEach(i),Ki.forEach(i),o=0;o<On.length;o++)u=On[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<On.length&&(o=On[0],o.blockedOn===null);)Gh(o),o.blockedOn===null&&On.shift()}var Wr=V.ReactCurrentBatchConfig,Co=!0;function Oy(t,i,o,u){var d=Ne,h=Wr.transition;Wr.transition=null;try{Ne=1,$a(t,i,o,u)}finally{Ne=d,Wr.transition=h}}function Dy(t,i,o,u){var d=Ne,h=Wr.transition;Wr.transition=null;try{Ne=4,$a(t,i,o,u)}finally{Ne=d,Wr.transition=h}}function $a(t,i,o,u){if(Co){var d=Ba(t,i,o,u);if(d===null)su(t,i,u,Eo,o),Hh(t,u);else if(Ay(d,t,i,o,u))u.stopPropagation();else if(Hh(t,u),i&4&&-1<Ry.indexOf(t)){for(;d!==null;){var h=us(d);if(h!==null&&$h(h),h=Ba(t,i,o,u),h===null&&su(t,i,u,Eo,o),h===d)break;d=h}d!==null&&u.stopPropagation()}else su(t,i,u,null,o)}}var Eo=null;function Ba(t,i,o,u){if(Eo=null,t=Ra(u),t=fr(t),t!==null)if(i=hr(t),i===null)t=null;else if(o=i.tag,o===13){if(t=Ah(i),t!==null)return t;t=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return Eo=t,null}function Kh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sy()){case La:return 1;case jh:return 4;case mo:case Cy:return 16;case Fh:return 536870912;default:return 16}default:return 16}}var Dn=null,Wa=null,Io=null;function Qh(){if(Io)return Io;var t,i=Wa,o=i.length,u,d="value"in Dn?Dn.value:Dn.textContent,h=d.length;for(t=0;t<o&&i[t]===d[t];t++);var v=o-t;for(u=1;u<=v&&i[o-u]===d[h-u];u++);return Io=d.slice(t,1<u?1-u:void 0)}function xo(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function No(){return!0}function Yh(){return!1}function Tt(t){function i(o,u,d,h,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(o=t[S],this[S]=o?o(h):h[S]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?No:Yh,this.isPropagationStopped=Yh,this}return H(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=No)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=No)},persist:function(){},isPersistent:No}),i}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Va=Tt(Vr),Xi=H({},Vr,{view:0,detail:0}),Ly=Tt(Xi),Ha,Ga,Zi,ko=H({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ka,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zi&&(Zi&&t.type==="mousemove"?(Ha=t.screenX-Zi.screenX,Ga=t.screenY-Zi.screenY):Ga=Ha=0,Zi=t),Ha)},movementY:function(t){return"movementY"in t?t.movementY:Ga}}),Jh=Tt(ko),My=H({},ko,{dataTransfer:0}),jy=Tt(My),Fy=H({},Xi,{relatedTarget:0}),qa=Tt(Fy),Uy=H({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),zy=Tt(Uy),$y=H({},Vr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),By=Tt($y),Wy=H({},Vr,{data:0}),Xh=Tt(Wy),Vy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qy(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Gy[t])?!!i[t]:!1}function Ka(){return qy}var Ky=H({},Xi,{key:function(t){if(t.key){var i=Vy[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=xo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ka,charCode:function(t){return t.type==="keypress"?xo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qy=Tt(Ky),Yy=H({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zh=Tt(Yy),Jy=H({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ka}),Xy=Tt(Jy),Zy=H({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ew=Tt(Zy),tw=H({},ko,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nw=Tt(tw),rw=[9,13,27,32],Qa=f&&"CompositionEvent"in window,es=null;f&&"documentMode"in document&&(es=document.documentMode);var iw=f&&"TextEvent"in window&&!es,ef=f&&(!Qa||es&&8<es&&11>=es),tf=" ",nf=!1;function rf(t,i){switch(t){case"keyup":return rw.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hr=!1;function sw(t,i){switch(t){case"compositionend":return sf(i);case"keypress":return i.which!==32?null:(nf=!0,tf);case"textInput":return t=i.data,t===tf&&nf?null:t;default:return null}}function ow(t,i){if(Hr)return t==="compositionend"||!Qa&&rf(t,i)?(t=Qh(),Io=Wa=Dn=null,Hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ef&&i.locale!=="ko"?null:i.data;default:return null}}var lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function of(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!lw[t.type]:i==="textarea"}function lf(t,i,o,u){Nh(u),i=bo(i,"onChange"),0<i.length&&(o=new Va("onChange","change",null,o,u),t.push({event:o,listeners:i}))}var ts=null,ns=null;function aw(t){xf(t,0)}function To(t){var i=Yr(t);if(tn(i))return t}function uw(t,i){if(t==="change")return i}var af=!1;if(f){var Ya;if(f){var Ja="oninput"in document;if(!Ja){var uf=document.createElement("div");uf.setAttribute("oninput","return;"),Ja=typeof uf.oninput=="function"}Ya=Ja}else Ya=!1;af=Ya&&(!document.documentMode||9<document.documentMode)}function cf(){ts&&(ts.detachEvent("onpropertychange",df),ns=ts=null)}function df(t){if(t.propertyName==="value"&&To(ns)){var i=[];lf(i,ns,t,Ra(t)),Rh(aw,i)}}function cw(t,i,o){t==="focusin"?(cf(),ts=i,ns=o,ts.attachEvent("onpropertychange",df)):t==="focusout"&&cf()}function dw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return To(ns)}function hw(t,i){if(t==="click")return To(i)}function fw(t,i){if(t==="input"||t==="change")return To(i)}function pw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var $t=typeof Object.is=="function"?Object.is:pw;function rs(t,i){if($t(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var o=Object.keys(t),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!p.call(i,d)||!$t(t[d],i[d]))return!1}return!0}function hf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ff(t,i){var o=hf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=i&&u>=i)return{node:o,offset:i-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=hf(o)}}function pf(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?pf(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function mf(){for(var t=window,i=co();i instanceof t.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)t=i.contentWindow;else break;i=co(t.document)}return i}function Xa(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function mw(t){var i=mf(),o=t.focusedElem,u=t.selectionRange;if(i!==o&&o&&o.ownerDocument&&pf(o.ownerDocument.documentElement,o)){if(u!==null&&Xa(o)){if(i=u.start,t=u.end,t===void 0&&(t=i),"selectionStart"in o)o.selectionStart=i,o.selectionEnd=Math.min(t,o.value.length);else if(t=(i=o.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var d=o.textContent.length,h=Math.min(u.start,d);u=u.end===void 0?h:Math.min(u.end,d),!t.extend&&h>u&&(d=u,u=h,h=d),d=ff(o,h);var v=ff(o,u);d&&v&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),t.removeAllRanges(),h>u?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=o;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<i.length;o++)t=i[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gw=f&&"documentMode"in document&&11>=document.documentMode,Gr=null,Za=null,is=null,eu=!1;function gf(t,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;eu||Gr==null||Gr!==co(u)||(u=Gr,"selectionStart"in u&&Xa(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),is&&rs(is,u)||(is=u,u=bo(Za,"onSelect"),0<u.length&&(i=new Va("onSelect","select",null,i,o),t.push({event:i,listeners:u}),i.target=Gr)))}function Po(t,i){var o={};return o[t.toLowerCase()]=i.toLowerCase(),o["Webkit"+t]="webkit"+i,o["Moz"+t]="moz"+i,o}var qr={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionend:Po("Transition","TransitionEnd")},tu={},vf={};f&&(vf=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function Ro(t){if(tu[t])return tu[t];if(!qr[t])return t;var i=qr[t],o;for(o in i)if(i.hasOwnProperty(o)&&o in vf)return tu[t]=i[o];return t}var _f=Ro("animationend"),yf=Ro("animationiteration"),wf=Ro("animationstart"),Sf=Ro("transitionend"),Cf=new Map,Ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ln(t,i){Cf.set(t,i),a(i,[t])}for(var nu=0;nu<Ef.length;nu++){var ru=Ef[nu],vw=ru.toLowerCase(),_w=ru[0].toUpperCase()+ru.slice(1);Ln(vw,"on"+_w)}Ln(_f,"onAnimationEnd"),Ln(yf,"onAnimationIteration"),Ln(wf,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(Sf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function If(t,i,o){var u=t.type||"unknown-event";t.currentTarget=o,vy(u,i,void 0,t),t.currentTarget=null}function xf(t,i){i=(i&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],d=u.event;u=u.listeners;e:{var h=void 0;if(i)for(var v=u.length-1;0<=v;v--){var S=u[v],C=S.instance,T=S.currentTarget;if(S=S.listener,C!==h&&d.isPropagationStopped())break e;If(d,S,T),h=C}else for(v=0;v<u.length;v++){if(S=u[v],C=S.instance,T=S.currentTarget,S=S.listener,C!==h&&d.isPropagationStopped())break e;If(d,S,T),h=C}}}if(po)throw t=Da,po=!1,Da=null,t}function Le(t,i){var o=i[du];o===void 0&&(o=i[du]=new Set);var u=t+"__bubble";o.has(u)||(Nf(i,t,2,!1),o.add(u))}function iu(t,i,o){var u=0;i&&(u|=4),Nf(o,t,u,i)}var Ao="_reactListening"+Math.random().toString(36).slice(2);function os(t){if(!t[Ao]){t[Ao]=!0,s.forEach(function(o){o!=="selectionchange"&&(yw.has(o)||iu(o,!1,t),iu(o,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ao]||(i[Ao]=!0,iu("selectionchange",!1,i))}}function Nf(t,i,o,u){switch(Kh(i)){case 1:var d=Oy;break;case 4:d=Dy;break;default:d=$a}o=d.bind(null,i,o,t),d=void 0,!Oa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?t.addEventListener(i,o,{capture:!0,passive:d}):t.addEventListener(i,o,!0):d!==void 0?t.addEventListener(i,o,{passive:d}):t.addEventListener(i,o,!1)}function su(t,i,o,u,d){var h=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var S=u.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var C=v.tag;if((C===3||C===4)&&(C=v.stateNode.containerInfo,C===d||C.nodeType===8&&C.parentNode===d))return;v=v.return}for(;S!==null;){if(v=fr(S),v===null)return;if(C=v.tag,C===5||C===6){u=h=v;continue e}S=S.parentNode}}u=u.return}Rh(function(){var T=h,j=Ra(o),F=[];e:{var M=Cf.get(t);if(M!==void 0){var q=Va,Y=t;switch(t){case"keypress":if(xo(o)===0)break e;case"keydown":case"keyup":q=Qy;break;case"focusin":Y="focus",q=qa;break;case"focusout":Y="blur",q=qa;break;case"beforeblur":case"afterblur":q=qa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Xy;break;case _f:case yf:case wf:q=zy;break;case Sf:q=ew;break;case"scroll":q=Ly;break;case"wheel":q=nw;break;case"copy":case"cut":case"paste":q=By;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Zh}var X=(i&4)!==0,qe=!X&&t==="scroll",N=X?M!==null?M+"Capture":null:M;X=[];for(var E=T,k;E!==null;){k=E;var B=k.stateNode;if(k.tag===5&&B!==null&&(k=B,N!==null&&(B=Bi(E,N),B!=null&&X.push(ls(E,B,k)))),qe)break;E=E.return}0<X.length&&(M=new q(M,Y,null,o,j),F.push({event:M,listeners:X}))}}if((i&7)===0){e:{if(M=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",M&&o!==Pa&&(Y=o.relatedTarget||o.fromElement)&&(fr(Y)||Y[dn]))break e;if((q||M)&&(M=j.window===j?j:(M=j.ownerDocument)?M.defaultView||M.parentWindow:window,q?(Y=o.relatedTarget||o.toElement,q=T,Y=Y?fr(Y):null,Y!==null&&(qe=hr(Y),Y!==qe||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(q=null,Y=T),q!==Y)){if(X=Jh,B="onMouseLeave",N="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(X=Zh,B="onPointerLeave",N="onPointerEnter",E="pointer"),qe=q==null?M:Yr(q),k=Y==null?M:Yr(Y),M=new X(B,E+"leave",q,o,j),M.target=qe,M.relatedTarget=k,B=null,fr(j)===T&&(X=new X(N,E+"enter",Y,o,j),X.target=k,X.relatedTarget=qe,B=X),qe=B,q&&Y)t:{for(X=q,N=Y,E=0,k=X;k;k=Kr(k))E++;for(k=0,B=N;B;B=Kr(B))k++;for(;0<E-k;)X=Kr(X),E--;for(;0<k-E;)N=Kr(N),k--;for(;E--;){if(X===N||N!==null&&X===N.alternate)break t;X=Kr(X),N=Kr(N)}X=null}else X=null;q!==null&&kf(F,M,q,X,!1),Y!==null&&qe!==null&&kf(F,qe,Y,X,!0)}}e:{if(M=T?Yr(T):window,q=M.nodeName&&M.nodeName.toLowerCase(),q==="select"||q==="input"&&M.type==="file")var ne=uw;else if(of(M))if(af)ne=fw;else{ne=dw;var oe=cw}else(q=M.nodeName)&&q.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(ne=hw);if(ne&&(ne=ne(t,T))){lf(F,ne,o,j);break e}oe&&oe(t,M,T),t==="focusout"&&(oe=M._wrapperState)&&oe.controlled&&M.type==="number"&&Ia(M,"number",M.value)}switch(oe=T?Yr(T):window,t){case"focusin":(of(oe)||oe.contentEditable==="true")&&(Gr=oe,Za=T,is=null);break;case"focusout":is=Za=Gr=null;break;case"mousedown":eu=!0;break;case"contextmenu":case"mouseup":case"dragend":eu=!1,gf(F,o,j);break;case"selectionchange":if(gw)break;case"keydown":case"keyup":gf(F,o,j)}var le;if(Qa)e:{switch(t){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else Hr?rf(t,o)&&(ce="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ce="onCompositionStart");ce&&(ef&&o.locale!=="ko"&&(Hr||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&Hr&&(le=Qh()):(Dn=j,Wa="value"in Dn?Dn.value:Dn.textContent,Hr=!0)),oe=bo(T,ce),0<oe.length&&(ce=new Xh(ce,t,null,o,j),F.push({event:ce,listeners:oe}),le?ce.data=le:(le=sf(o),le!==null&&(ce.data=le)))),(le=iw?sw(t,o):ow(t,o))&&(T=bo(T,"onBeforeInput"),0<T.length&&(j=new Xh("onBeforeInput","beforeinput",null,o,j),F.push({event:j,listeners:T}),j.data=le))}xf(F,i)})}function ls(t,i,o){return{instance:t,listener:i,currentTarget:o}}function bo(t,i){for(var o=i+"Capture",u=[];t!==null;){var d=t,h=d.stateNode;d.tag===5&&h!==null&&(d=h,h=Bi(t,o),h!=null&&u.unshift(ls(t,h,d)),h=Bi(t,i),h!=null&&u.push(ls(t,h,d))),t=t.return}return u}function Kr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kf(t,i,o,u,d){for(var h=i._reactName,v=[];o!==null&&o!==u;){var S=o,C=S.alternate,T=S.stateNode;if(C!==null&&C===u)break;S.tag===5&&T!==null&&(S=T,d?(C=Bi(o,h),C!=null&&v.unshift(ls(o,C,S))):d||(C=Bi(o,h),C!=null&&v.push(ls(o,C,S)))),o=o.return}v.length!==0&&t.push({event:i,listeners:v})}var ww=/\r\n?/g,Sw=/\u0000|\uFFFD/g;function Tf(t){return(typeof t=="string"?t:""+t).replace(ww,`
`).replace(Sw,"")}function Oo(t,i,o){if(i=Tf(i),Tf(t)!==i&&o)throw Error(n(425))}function Do(){}var ou=null,lu=null;function au(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var uu=typeof setTimeout=="function"?setTimeout:void 0,Cw=typeof clearTimeout=="function"?clearTimeout:void 0,Pf=typeof Promise=="function"?Promise:void 0,Ew=typeof queueMicrotask=="function"?queueMicrotask:typeof Pf<"u"?function(t){return Pf.resolve(null).then(t).catch(Iw)}:uu;function Iw(t){setTimeout(function(){throw t})}function cu(t,i){var o=i,u=0;do{var d=o.nextSibling;if(t.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(u===0){t.removeChild(d),Ji(i);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=d}while(o);Ji(i)}function Mn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Rf(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return t;i--}else o==="/$"&&i++}t=t.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),rn="__reactFiber$"+Qr,as="__reactProps$"+Qr,dn="__reactContainer$"+Qr,du="__reactEvents$"+Qr,xw="__reactListeners$"+Qr,Nw="__reactHandles$"+Qr;function fr(t){var i=t[rn];if(i)return i;for(var o=t.parentNode;o;){if(i=o[dn]||o[rn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(t=Rf(t);t!==null;){if(o=t[rn])return o;t=Rf(t)}return i}t=o,o=t.parentNode}return null}function us(t){return t=t[rn]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Lo(t){return t[as]||null}var hu=[],Jr=-1;function jn(t){return{current:t}}function Me(t){0>Jr||(t.current=hu[Jr],hu[Jr]=null,Jr--)}function be(t,i){Jr++,hu[Jr]=t.current,t.current=i}var Fn={},ct=jn(Fn),wt=jn(!1),pr=Fn;function Xr(t,i){var o=t.type.contextTypes;if(!o)return Fn;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},h;for(h in o)d[h]=i[h];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=d),d}function St(t){return t=t.childContextTypes,t!=null}function Mo(){Me(wt),Me(ct)}function Af(t,i,o){if(ct.current!==Fn)throw Error(n(168));be(ct,i),be(wt,o)}function bf(t,i,o){var u=t.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(n(108,re(t)||"Unknown",d));return H({},o,u)}function jo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fn,pr=ct.current,be(ct,t),be(wt,wt.current),!0}function Of(t,i,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=bf(t,i,pr),u.__reactInternalMemoizedMergedChildContext=t,Me(wt),Me(ct),be(ct,t)):Me(wt),be(wt,o)}var hn=null,Fo=!1,fu=!1;function Df(t){hn===null?hn=[t]:hn.push(t)}function kw(t){Fo=!0,Df(t)}function Un(){if(!fu&&hn!==null){fu=!0;var t=0,i=Ne;try{var o=hn;for(Ne=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}hn=null,Fo=!1}catch(d){throw hn!==null&&(hn=hn.slice(t+1)),Lh(La,Un),d}finally{Ne=i,fu=!1}}return null}var Zr=[],ei=0,Uo=null,zo=0,bt=[],Ot=0,mr=null,fn=1,pn="";function gr(t,i){Zr[ei++]=zo,Zr[ei++]=Uo,Uo=t,zo=i}function Lf(t,i,o){bt[Ot++]=fn,bt[Ot++]=pn,bt[Ot++]=mr,mr=t;var u=fn;t=pn;var d=32-zt(u)-1;u&=~(1<<d),o+=1;var h=32-zt(i)+d;if(30<h){var v=d-d%5;h=(u&(1<<v)-1).toString(32),u>>=v,d-=v,fn=1<<32-zt(i)+d|o<<d|u,pn=h+t}else fn=1<<h|o<<d|u,pn=t}function pu(t){t.return!==null&&(gr(t,1),Lf(t,1,0))}function mu(t){for(;t===Uo;)Uo=Zr[--ei],Zr[ei]=null,zo=Zr[--ei],Zr[ei]=null;for(;t===mr;)mr=bt[--Ot],bt[Ot]=null,pn=bt[--Ot],bt[Ot]=null,fn=bt[--Ot],bt[Ot]=null}var Pt=null,Rt=null,Ue=!1,Bt=null;function Mf(t,i){var o=jt(5,null,null,0);o.elementType="DELETED",o.stateNode=i,o.return=t,i=t.deletions,i===null?(t.deletions=[o],t.flags|=16):i.push(o)}function jf(t,i){switch(t.tag){case 5:var o=t.type;return i=i.nodeType!==1||o.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Pt=t,Rt=Mn(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Pt=t,Rt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(o=mr!==null?{id:fn,overflow:pn}:null,t.memoizedState={dehydrated:i,treeContext:o,retryLane:1073741824},o=jt(18,null,null,0),o.stateNode=i,o.return=t,t.child=o,Pt=t,Rt=null,!0):!1;default:return!1}}function gu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vu(t){if(Ue){var i=Rt;if(i){var o=i;if(!jf(t,i)){if(gu(t))throw Error(n(418));i=Mn(o.nextSibling);var u=Pt;i&&jf(t,i)?Mf(u,o):(t.flags=t.flags&-4097|2,Ue=!1,Pt=t)}}else{if(gu(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ue=!1,Pt=t}}}function Ff(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function $o(t){if(t!==Pt)return!1;if(!Ue)return Ff(t),Ue=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!au(t.type,t.memoizedProps)),i&&(i=Rt)){if(gu(t))throw Uf(),Error(n(418));for(;i;)Mf(t,i),i=Mn(i.nextSibling)}if(Ff(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(i===0){Rt=Mn(t.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++}t=t.nextSibling}Rt=null}}else Rt=Pt?Mn(t.stateNode.nextSibling):null;return!0}function Uf(){for(var t=Rt;t;)t=Mn(t.nextSibling)}function ti(){Rt=Pt=null,Ue=!1}function _u(t){Bt===null?Bt=[t]:Bt.push(t)}var Tw=V.ReactCurrentBatchConfig;function cs(t,i,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var d=u,h=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===h?i.ref:(i=function(v){var S=d.refs;v===null?delete S[h]:S[h]=v},i._stringRef=h,i)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Bo(t,i){throw t=Object.prototype.toString.call(i),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function zf(t){var i=t._init;return i(t._payload)}function $f(t){function i(N,E){if(t){var k=N.deletions;k===null?(N.deletions=[E],N.flags|=16):k.push(E)}}function o(N,E){if(!t)return null;for(;E!==null;)i(N,E),E=E.sibling;return null}function u(N,E){for(N=new Map;E!==null;)E.key!==null?N.set(E.key,E):N.set(E.index,E),E=E.sibling;return N}function d(N,E){return N=qn(N,E),N.index=0,N.sibling=null,N}function h(N,E,k){return N.index=k,t?(k=N.alternate,k!==null?(k=k.index,k<E?(N.flags|=2,E):k):(N.flags|=2,E)):(N.flags|=1048576,E)}function v(N){return t&&N.alternate===null&&(N.flags|=2),N}function S(N,E,k,B){return E===null||E.tag!==6?(E=uc(k,N.mode,B),E.return=N,E):(E=d(E,k),E.return=N,E)}function C(N,E,k,B){var ne=k.type;return ne===ee?j(N,E,k.props.children,B,k.key):E!==null&&(E.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ge&&zf(ne)===E.type)?(B=d(E,k.props),B.ref=cs(N,E,k),B.return=N,B):(B=hl(k.type,k.key,k.props,null,N.mode,B),B.ref=cs(N,E,k),B.return=N,B)}function T(N,E,k,B){return E===null||E.tag!==4||E.stateNode.containerInfo!==k.containerInfo||E.stateNode.implementation!==k.implementation?(E=cc(k,N.mode,B),E.return=N,E):(E=d(E,k.children||[]),E.return=N,E)}function j(N,E,k,B,ne){return E===null||E.tag!==7?(E=Ir(k,N.mode,B,ne),E.return=N,E):(E=d(E,k),E.return=N,E)}function F(N,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return E=uc(""+E,N.mode,k),E.return=N,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Q:return k=hl(E.type,E.key,E.props,null,N.mode,k),k.ref=cs(N,null,E),k.return=N,k;case Z:return E=cc(E,N.mode,k),E.return=N,E;case ge:var B=E._init;return F(N,B(E._payload),k)}if(Ui(E)||$(E))return E=Ir(E,N.mode,k,null),E.return=N,E;Bo(N,E)}return null}function M(N,E,k,B){var ne=E!==null?E.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return ne!==null?null:S(N,E,""+k,B);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Q:return k.key===ne?C(N,E,k,B):null;case Z:return k.key===ne?T(N,E,k,B):null;case ge:return ne=k._init,M(N,E,ne(k._payload),B)}if(Ui(k)||$(k))return ne!==null?null:j(N,E,k,B,null);Bo(N,k)}return null}function q(N,E,k,B,ne){if(typeof B=="string"&&B!==""||typeof B=="number")return N=N.get(k)||null,S(E,N,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Q:return N=N.get(B.key===null?k:B.key)||null,C(E,N,B,ne);case Z:return N=N.get(B.key===null?k:B.key)||null,T(E,N,B,ne);case ge:var oe=B._init;return q(N,E,k,oe(B._payload),ne)}if(Ui(B)||$(B))return N=N.get(k)||null,j(E,N,B,ne,null);Bo(E,B)}return null}function Y(N,E,k,B){for(var ne=null,oe=null,le=E,ce=E=0,nt=null;le!==null&&ce<k.length;ce++){le.index>ce?(nt=le,le=null):nt=le.sibling;var Ee=M(N,le,k[ce],B);if(Ee===null){le===null&&(le=nt);break}t&&le&&Ee.alternate===null&&i(N,le),E=h(Ee,E,ce),oe===null?ne=Ee:oe.sibling=Ee,oe=Ee,le=nt}if(ce===k.length)return o(N,le),Ue&&gr(N,ce),ne;if(le===null){for(;ce<k.length;ce++)le=F(N,k[ce],B),le!==null&&(E=h(le,E,ce),oe===null?ne=le:oe.sibling=le,oe=le);return Ue&&gr(N,ce),ne}for(le=u(N,le);ce<k.length;ce++)nt=q(le,N,ce,k[ce],B),nt!==null&&(t&&nt.alternate!==null&&le.delete(nt.key===null?ce:nt.key),E=h(nt,E,ce),oe===null?ne=nt:oe.sibling=nt,oe=nt);return t&&le.forEach(function(Kn){return i(N,Kn)}),Ue&&gr(N,ce),ne}function X(N,E,k,B){var ne=$(k);if(typeof ne!="function")throw Error(n(150));if(k=ne.call(k),k==null)throw Error(n(151));for(var oe=ne=null,le=E,ce=E=0,nt=null,Ee=k.next();le!==null&&!Ee.done;ce++,Ee=k.next()){le.index>ce?(nt=le,le=null):nt=le.sibling;var Kn=M(N,le,Ee.value,B);if(Kn===null){le===null&&(le=nt);break}t&&le&&Kn.alternate===null&&i(N,le),E=h(Kn,E,ce),oe===null?ne=Kn:oe.sibling=Kn,oe=Kn,le=nt}if(Ee.done)return o(N,le),Ue&&gr(N,ce),ne;if(le===null){for(;!Ee.done;ce++,Ee=k.next())Ee=F(N,Ee.value,B),Ee!==null&&(E=h(Ee,E,ce),oe===null?ne=Ee:oe.sibling=Ee,oe=Ee);return Ue&&gr(N,ce),ne}for(le=u(N,le);!Ee.done;ce++,Ee=k.next())Ee=q(le,N,ce,Ee.value,B),Ee!==null&&(t&&Ee.alternate!==null&&le.delete(Ee.key===null?ce:Ee.key),E=h(Ee,E,ce),oe===null?ne=Ee:oe.sibling=Ee,oe=Ee);return t&&le.forEach(function(l0){return i(N,l0)}),Ue&&gr(N,ce),ne}function qe(N,E,k,B){if(typeof k=="object"&&k!==null&&k.type===ee&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Q:e:{for(var ne=k.key,oe=E;oe!==null;){if(oe.key===ne){if(ne=k.type,ne===ee){if(oe.tag===7){o(N,oe.sibling),E=d(oe,k.props.children),E.return=N,N=E;break e}}else if(oe.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ge&&zf(ne)===oe.type){o(N,oe.sibling),E=d(oe,k.props),E.ref=cs(N,oe,k),E.return=N,N=E;break e}o(N,oe);break}else i(N,oe);oe=oe.sibling}k.type===ee?(E=Ir(k.props.children,N.mode,B,k.key),E.return=N,N=E):(B=hl(k.type,k.key,k.props,null,N.mode,B),B.ref=cs(N,E,k),B.return=N,N=B)}return v(N);case Z:e:{for(oe=k.key;E!==null;){if(E.key===oe)if(E.tag===4&&E.stateNode.containerInfo===k.containerInfo&&E.stateNode.implementation===k.implementation){o(N,E.sibling),E=d(E,k.children||[]),E.return=N,N=E;break e}else{o(N,E);break}else i(N,E);E=E.sibling}E=cc(k,N.mode,B),E.return=N,N=E}return v(N);case ge:return oe=k._init,qe(N,E,oe(k._payload),B)}if(Ui(k))return Y(N,E,k,B);if($(k))return X(N,E,k,B);Bo(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,E!==null&&E.tag===6?(o(N,E.sibling),E=d(E,k),E.return=N,N=E):(o(N,E),E=uc(k,N.mode,B),E.return=N,N=E),v(N)):o(N,E)}return qe}var ni=$f(!0),Bf=$f(!1),Wo=jn(null),Vo=null,ri=null,yu=null;function wu(){yu=ri=Vo=null}function Su(t){var i=Wo.current;Me(Wo),t._currentValue=i}function Cu(t,i,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===o)break;t=t.return}}function ii(t,i){Vo=t,yu=ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(Ct=!0),t.firstContext=null)}function Dt(t){var i=t._currentValue;if(yu!==t)if(t={context:t,memoizedValue:i,next:null},ri===null){if(Vo===null)throw Error(n(308));ri=t,Vo.dependencies={lanes:0,firstContext:t}}else ri=ri.next=t;return i}var vr=null;function Eu(t){vr===null?vr=[t]:vr.push(t)}function Wf(t,i,o,u){var d=i.interleaved;return d===null?(o.next=o,Eu(i)):(o.next=d.next,d.next=o),i.interleaved=o,mn(t,u)}function mn(t,i){t.lanes|=i;var o=t.alternate;for(o!==null&&(o.lanes|=i),o=t,t=t.return;t!==null;)t.childLanes|=i,o=t.alternate,o!==null&&(o.childLanes|=i),o=t,t=t.return;return o.tag===3?o.stateNode:null}var zn=!1;function Iu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function $n(t,i,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Ce&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,mn(t,o)}return d=u.interleaved,d===null?(i.next=i,Eu(u)):(i.next=d.next,d.next=i),u.interleaved=i,mn(t,o)}function Ho(t,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194240)!==0)){var u=i.lanes;u&=t.pendingLanes,o|=u,i.lanes=o,Fa(t,o)}}function Hf(t,i){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,h=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};h===null?d=h=v:h=h.next=v,o=o.next}while(o!==null);h===null?d=h=i:h=h.next=i}else d=h=i;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=i:t.next=i,o.lastBaseUpdate=i}function Go(t,i,o,u){var d=t.updateQueue;zn=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var C=S,T=C.next;C.next=null,v===null?h=T:v.next=T,v=C;var j=t.alternate;j!==null&&(j=j.updateQueue,S=j.lastBaseUpdate,S!==v&&(S===null?j.firstBaseUpdate=T:S.next=T,j.lastBaseUpdate=C))}if(h!==null){var F=d.baseState;v=0,j=T=C=null,S=h;do{var M=S.lane,q=S.eventTime;if((u&M)===M){j!==null&&(j=j.next={eventTime:q,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Y=t,X=S;switch(M=i,q=o,X.tag){case 1:if(Y=X.payload,typeof Y=="function"){F=Y.call(q,F,M);break e}F=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=X.payload,M=typeof Y=="function"?Y.call(q,F,M):Y,M==null)break e;F=H({},F,M);break e;case 2:zn=!0}}S.callback!==null&&S.lane!==0&&(t.flags|=64,M=d.effects,M===null?d.effects=[S]:M.push(S))}else q={eventTime:q,lane:M,tag:S.tag,payload:S.payload,callback:S.callback,next:null},j===null?(T=j=q,C=F):j=j.next=q,v|=M;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;M=S,S=M.next,M.next=null,d.lastBaseUpdate=M,d.shared.pending=null}}while(!0);if(j===null&&(C=F),d.baseState=C,d.firstBaseUpdate=T,d.lastBaseUpdate=j,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else h===null&&(d.shared.lanes=0);wr|=v,t.lanes=v,t.memoizedState=F}}function Gf(t,i,o){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var u=t[i],d=u.callback;if(d!==null){if(u.callback=null,u=o,typeof d!="function")throw Error(n(191,d));d.call(u)}}}var ds={},sn=jn(ds),hs=jn(ds),fs=jn(ds);function _r(t){if(t===ds)throw Error(n(174));return t}function xu(t,i){switch(be(fs,i),be(hs,t),be(sn,ds),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Na(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=Na(i,t)}Me(sn),be(sn,i)}function si(){Me(sn),Me(hs),Me(fs)}function qf(t){_r(fs.current);var i=_r(sn.current),o=Na(i,t.type);i!==o&&(be(hs,t),be(sn,o))}function Nu(t){hs.current===t&&(Me(sn),Me(hs))}var ze=jn(0);function qo(t){for(var i=t;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ku=[];function Tu(){for(var t=0;t<ku.length;t++)ku[t]._workInProgressVersionPrimary=null;ku.length=0}var Ko=V.ReactCurrentDispatcher,Pu=V.ReactCurrentBatchConfig,yr=0,$e=null,Ye=null,et=null,Qo=!1,ps=!1,ms=0,Pw=0;function dt(){throw Error(n(321))}function Ru(t,i){if(i===null)return!1;for(var o=0;o<i.length&&o<t.length;o++)if(!$t(t[o],i[o]))return!1;return!0}function Au(t,i,o,u,d,h){if(yr=h,$e=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ko.current=t===null||t.memoizedState===null?Ow:Dw,t=o(u,d),ps){h=0;do{if(ps=!1,ms=0,25<=h)throw Error(n(301));h+=1,et=Ye=null,i.updateQueue=null,Ko.current=Lw,t=o(u,d)}while(ps)}if(Ko.current=Xo,i=Ye!==null&&Ye.next!==null,yr=0,et=Ye=$e=null,Qo=!1,i)throw Error(n(300));return t}function bu(){var t=ms!==0;return ms=0,t}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?$e.memoizedState=et=t:et=et.next=t,et}function Lt(){if(Ye===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var i=et===null?$e.memoizedState:et.next;if(i!==null)et=i,Ye=t;else{if(t===null)throw Error(n(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?$e.memoizedState=et=t:et=et.next=t}return et}function gs(t,i){return typeof i=="function"?i(t):i}function Ou(t){var i=Lt(),o=i.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=Ye,d=u.baseQueue,h=o.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}u.baseQueue=d=h,o.pending=null}if(d!==null){h=d.next,u=u.baseState;var S=v=null,C=null,T=h;do{var j=T.lane;if((yr&j)===j)C!==null&&(C=C.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),u=T.hasEagerState?T.eagerState:t(u,T.action);else{var F={lane:j,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};C===null?(S=C=F,v=u):C=C.next=F,$e.lanes|=j,wr|=j}T=T.next}while(T!==null&&T!==h);C===null?v=u:C.next=S,$t(u,i.memoizedState)||(Ct=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=C,o.lastRenderedState=u}if(t=o.interleaved,t!==null){d=t;do h=d.lane,$e.lanes|=h,wr|=h,d=d.next;while(d!==t)}else d===null&&(o.lanes=0);return[i.memoizedState,o.dispatch]}function Du(t){var i=Lt(),o=i.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,d=o.pending,h=i.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do h=t(h,v.action),v=v.next;while(v!==d);$t(h,i.memoizedState)||(Ct=!0),i.memoizedState=h,i.baseQueue===null&&(i.baseState=h),o.lastRenderedState=h}return[h,u]}function Kf(){}function Qf(t,i){var o=$e,u=Lt(),d=i(),h=!$t(u.memoizedState,d);if(h&&(u.memoizedState=d,Ct=!0),u=u.queue,Lu(Xf.bind(null,o,u,t),[t]),u.getSnapshot!==i||h||et!==null&&et.memoizedState.tag&1){if(o.flags|=2048,vs(9,Jf.bind(null,o,u,d,i),void 0,null),tt===null)throw Error(n(349));(yr&30)!==0||Yf(o,i,d)}return d}function Yf(t,i,o){t.flags|=16384,t={getSnapshot:i,value:o},i=$e.updateQueue,i===null?(i={lastEffect:null,stores:null},$e.updateQueue=i,i.stores=[t]):(o=i.stores,o===null?i.stores=[t]:o.push(t))}function Jf(t,i,o,u){i.value=o,i.getSnapshot=u,Zf(i)&&ep(t)}function Xf(t,i,o){return o(function(){Zf(i)&&ep(t)})}function Zf(t){var i=t.getSnapshot;t=t.value;try{var o=i();return!$t(t,o)}catch{return!0}}function ep(t){var i=mn(t,1);i!==null&&Gt(i,t,1,-1)}function tp(t){var i=on();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:t},i.queue=t,t=t.dispatch=bw.bind(null,$e,t),[i.memoizedState,t]}function vs(t,i,o,u){return t={tag:t,create:i,destroy:o,deps:u,next:null},i=$e.updateQueue,i===null?(i={lastEffect:null,stores:null},$e.updateQueue=i,i.lastEffect=t.next=t):(o=i.lastEffect,o===null?i.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,i.lastEffect=t)),t}function np(){return Lt().memoizedState}function Yo(t,i,o,u){var d=on();$e.flags|=t,d.memoizedState=vs(1|i,o,void 0,u===void 0?null:u)}function Jo(t,i,o,u){var d=Lt();u=u===void 0?null:u;var h=void 0;if(Ye!==null){var v=Ye.memoizedState;if(h=v.destroy,u!==null&&Ru(u,v.deps)){d.memoizedState=vs(i,o,h,u);return}}$e.flags|=t,d.memoizedState=vs(1|i,o,h,u)}function rp(t,i){return Yo(8390656,8,t,i)}function Lu(t,i){return Jo(2048,8,t,i)}function ip(t,i){return Jo(4,2,t,i)}function sp(t,i){return Jo(4,4,t,i)}function op(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function lp(t,i,o){return o=o!=null?o.concat([t]):null,Jo(4,4,op.bind(null,i,t),o)}function Mu(){}function ap(t,i){var o=Lt();i=i===void 0?null:i;var u=o.memoizedState;return u!==null&&i!==null&&Ru(i,u[1])?u[0]:(o.memoizedState=[t,i],t)}function up(t,i){var o=Lt();i=i===void 0?null:i;var u=o.memoizedState;return u!==null&&i!==null&&Ru(i,u[1])?u[0]:(t=t(),o.memoizedState=[t,i],t)}function cp(t,i,o){return(yr&21)===0?(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=o):($t(o,i)||(o=Uh(),$e.lanes|=o,wr|=o,t.baseState=!0),i)}function Rw(t,i){var o=Ne;Ne=o!==0&&4>o?o:4,t(!0);var u=Pu.transition;Pu.transition={};try{t(!1),i()}finally{Ne=o,Pu.transition=u}}function dp(){return Lt().memoizedState}function Aw(t,i,o){var u=Hn(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},hp(t))fp(i,o);else if(o=Wf(t,i,o,u),o!==null){var d=mt();Gt(o,t,u,d),pp(o,i,u)}}function bw(t,i,o){var u=Hn(t),d={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(hp(t))fp(i,d);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=i.lastRenderedReducer,h!==null))try{var v=i.lastRenderedState,S=h(v,o);if(d.hasEagerState=!0,d.eagerState=S,$t(S,v)){var C=i.interleaved;C===null?(d.next=d,Eu(i)):(d.next=C.next,C.next=d),i.interleaved=d;return}}catch{}finally{}o=Wf(t,i,d,u),o!==null&&(d=mt(),Gt(o,t,u,d),pp(o,i,u))}}function hp(t){var i=t.alternate;return t===$e||i!==null&&i===$e}function fp(t,i){ps=Qo=!0;var o=t.pending;o===null?i.next=i:(i.next=o.next,o.next=i),t.pending=i}function pp(t,i,o){if((o&4194240)!==0){var u=i.lanes;u&=t.pendingLanes,o|=u,i.lanes=o,Fa(t,o)}}var Xo={readContext:Dt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},Ow={readContext:Dt,useCallback:function(t,i){return on().memoizedState=[t,i===void 0?null:i],t},useContext:Dt,useEffect:rp,useImperativeHandle:function(t,i,o){return o=o!=null?o.concat([t]):null,Yo(4194308,4,op.bind(null,i,t),o)},useLayoutEffect:function(t,i){return Yo(4194308,4,t,i)},useInsertionEffect:function(t,i){return Yo(4,2,t,i)},useMemo:function(t,i){var o=on();return i=i===void 0?null:i,t=t(),o.memoizedState=[t,i],t},useReducer:function(t,i,o){var u=on();return i=o!==void 0?o(i):i,u.memoizedState=u.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},u.queue=t,t=t.dispatch=Aw.bind(null,$e,t),[u.memoizedState,t]},useRef:function(t){var i=on();return t={current:t},i.memoizedState=t},useState:tp,useDebugValue:Mu,useDeferredValue:function(t){return on().memoizedState=t},useTransition:function(){var t=tp(!1),i=t[0];return t=Rw.bind(null,t[1]),on().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,o){var u=$e,d=on();if(Ue){if(o===void 0)throw Error(n(407));o=o()}else{if(o=i(),tt===null)throw Error(n(349));(yr&30)!==0||Yf(u,i,o)}d.memoizedState=o;var h={value:o,getSnapshot:i};return d.queue=h,rp(Xf.bind(null,u,h,t),[t]),u.flags|=2048,vs(9,Jf.bind(null,u,h,o,i),void 0,null),o},useId:function(){var t=on(),i=tt.identifierPrefix;if(Ue){var o=pn,u=fn;o=(u&~(1<<32-zt(u)-1)).toString(32)+o,i=":"+i+"R"+o,o=ms++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=Pw++,i=":"+i+"r"+o.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Dw={readContext:Dt,useCallback:ap,useContext:Dt,useEffect:Lu,useImperativeHandle:lp,useInsertionEffect:ip,useLayoutEffect:sp,useMemo:up,useReducer:Ou,useRef:np,useState:function(){return Ou(gs)},useDebugValue:Mu,useDeferredValue:function(t){var i=Lt();return cp(i,Ye.memoizedState,t)},useTransition:function(){var t=Ou(gs)[0],i=Lt().memoizedState;return[t,i]},useMutableSource:Kf,useSyncExternalStore:Qf,useId:dp,unstable_isNewReconciler:!1},Lw={readContext:Dt,useCallback:ap,useContext:Dt,useEffect:Lu,useImperativeHandle:lp,useInsertionEffect:ip,useLayoutEffect:sp,useMemo:up,useReducer:Du,useRef:np,useState:function(){return Du(gs)},useDebugValue:Mu,useDeferredValue:function(t){var i=Lt();return Ye===null?i.memoizedState=t:cp(i,Ye.memoizedState,t)},useTransition:function(){var t=Du(gs)[0],i=Lt().memoizedState;return[t,i]},useMutableSource:Kf,useSyncExternalStore:Qf,useId:dp,unstable_isNewReconciler:!1};function Wt(t,i){if(t&&t.defaultProps){i=H({},i),t=t.defaultProps;for(var o in t)i[o]===void 0&&(i[o]=t[o]);return i}return i}function ju(t,i,o,u){i=t.memoizedState,o=o(u,i),o=o==null?i:H({},i,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Zo={isMounted:function(t){return(t=t._reactInternals)?hr(t)===t:!1},enqueueSetState:function(t,i,o){t=t._reactInternals;var u=mt(),d=Hn(t),h=gn(u,d);h.payload=i,o!=null&&(h.callback=o),i=$n(t,h,d),i!==null&&(Gt(i,t,d,u),Ho(i,t,d))},enqueueReplaceState:function(t,i,o){t=t._reactInternals;var u=mt(),d=Hn(t),h=gn(u,d);h.tag=1,h.payload=i,o!=null&&(h.callback=o),i=$n(t,h,d),i!==null&&(Gt(i,t,d,u),Ho(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var o=mt(),u=Hn(t),d=gn(o,u);d.tag=2,i!=null&&(d.callback=i),i=$n(t,d,u),i!==null&&(Gt(i,t,u,o),Ho(i,t,u))}};function mp(t,i,o,u,d,h,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,h,v):i.prototype&&i.prototype.isPureReactComponent?!rs(o,u)||!rs(d,h):!0}function gp(t,i,o){var u=!1,d=Fn,h=i.contextType;return typeof h=="object"&&h!==null?h=Dt(h):(d=St(i)?pr:ct.current,u=i.contextTypes,h=(u=u!=null)?Xr(t,d):Fn),i=new i(o,h),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Zo,t.stateNode=i,i._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=h),i}function vp(t,i,o,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==t&&Zo.enqueueReplaceState(i,i.state,null)}function Fu(t,i,o,u){var d=t.stateNode;d.props=o,d.state=t.memoizedState,d.refs={},Iu(t);var h=i.contextType;typeof h=="object"&&h!==null?d.context=Dt(h):(h=St(i)?pr:ct.current,d.context=Xr(t,h)),d.state=t.memoizedState,h=i.getDerivedStateFromProps,typeof h=="function"&&(ju(t,i,h,o),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Zo.enqueueReplaceState(d,d.state,null),Go(t,o,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function oi(t,i){try{var o="",u=i;do o+=Se(u),u=u.return;while(u);var d=o}catch(h){d=`
Error generating stack: `+h.message+`
`+h.stack}return{value:t,source:i,stack:d,digest:null}}function Uu(t,i,o){return{value:t,source:null,stack:o??null,digest:i??null}}function zu(t,i){try{console.error(i.value)}catch(o){setTimeout(function(){throw o})}}var Mw=typeof WeakMap=="function"?WeakMap:Map;function _p(t,i,o){o=gn(-1,o),o.tag=3,o.payload={element:null};var u=i.value;return o.callback=function(){ol||(ol=!0,tc=u),zu(t,i)},o}function yp(t,i,o){o=gn(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;o.payload=function(){return u(d)},o.callback=function(){zu(t,i)}}var h=t.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(o.callback=function(){zu(t,i),typeof u!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),o}function wp(t,i,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Mw;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(o)||(d.add(o),t=Yw.bind(null,t,i,o),i.then(t,t))}function Sp(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function Cp(t,i,o,u,d){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(i=gn(-1,1),i.tag=2,$n(o,i,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var jw=V.ReactCurrentOwner,Ct=!1;function pt(t,i,o,u){i.child=t===null?Bf(i,null,o,u):ni(i,t.child,o,u)}function Ep(t,i,o,u,d){o=o.render;var h=i.ref;return ii(i,d),u=Au(t,i,o,u,h,d),o=bu(),t!==null&&!Ct?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,vn(t,i,d)):(Ue&&o&&pu(i),i.flags|=1,pt(t,i,u,d),i.child)}function Ip(t,i,o,u,d){if(t===null){var h=o.type;return typeof h=="function"&&!ac(h)&&h.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(i.tag=15,i.type=h,xp(t,i,h,u,d)):(t=hl(o.type,null,u,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(h=t.child,(t.lanes&d)===0){var v=h.memoizedProps;if(o=o.compare,o=o!==null?o:rs,o(v,u)&&t.ref===i.ref)return vn(t,i,d)}return i.flags|=1,t=qn(h,u),t.ref=i.ref,t.return=i,i.child=t}function xp(t,i,o,u,d){if(t!==null){var h=t.memoizedProps;if(rs(h,u)&&t.ref===i.ref)if(Ct=!1,i.pendingProps=u=h,(t.lanes&d)!==0)(t.flags&131072)!==0&&(Ct=!0);else return i.lanes=t.lanes,vn(t,i,d)}return $u(t,i,o,u,d)}function Np(t,i,o){var u=i.pendingProps,d=u.children,h=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(ai,At),At|=o;else{if((o&1073741824)===0)return t=h!==null?h.baseLanes|o:o,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,be(ai,At),At|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=h!==null?h.baseLanes:o,be(ai,At),At|=u}else h!==null?(u=h.baseLanes|o,i.memoizedState=null):u=o,be(ai,At),At|=u;return pt(t,i,d,o),i.child}function kp(t,i){var o=i.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(i.flags|=512,i.flags|=2097152)}function $u(t,i,o,u,d){var h=St(o)?pr:ct.current;return h=Xr(i,h),ii(i,d),o=Au(t,i,o,u,h,d),u=bu(),t!==null&&!Ct?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,vn(t,i,d)):(Ue&&u&&pu(i),i.flags|=1,pt(t,i,o,d),i.child)}function Tp(t,i,o,u,d){if(St(o)){var h=!0;jo(i)}else h=!1;if(ii(i,d),i.stateNode===null)tl(t,i),gp(i,o,u),Fu(i,o,u,d),u=!0;else if(t===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var C=v.context,T=o.contextType;typeof T=="object"&&T!==null?T=Dt(T):(T=St(o)?pr:ct.current,T=Xr(i,T));var j=o.getDerivedStateFromProps,F=typeof j=="function"||typeof v.getSnapshotBeforeUpdate=="function";F||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==u||C!==T)&&vp(i,v,u,T),zn=!1;var M=i.memoizedState;v.state=M,Go(i,u,v,d),C=i.memoizedState,S!==u||M!==C||wt.current||zn?(typeof j=="function"&&(ju(i,o,j,u),C=i.memoizedState),(S=zn||mp(i,o,S,u,M,C,T))?(F||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=C),v.props=u,v.state=C,v.context=T,u=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,Vf(t,i),S=i.memoizedProps,T=i.type===i.elementType?S:Wt(i.type,S),v.props=T,F=i.pendingProps,M=v.context,C=o.contextType,typeof C=="object"&&C!==null?C=Dt(C):(C=St(o)?pr:ct.current,C=Xr(i,C));var q=o.getDerivedStateFromProps;(j=typeof q=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==F||M!==C)&&vp(i,v,u,C),zn=!1,M=i.memoizedState,v.state=M,Go(i,u,v,d);var Y=i.memoizedState;S!==F||M!==Y||wt.current||zn?(typeof q=="function"&&(ju(i,o,q,u),Y=i.memoizedState),(T=zn||mp(i,o,T,u,M,Y,C)||!1)?(j||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,Y,C),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,Y,C)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&M===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&M===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Y),v.props=u,v.state=Y,v.context=C,u=T):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&M===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&M===t.memoizedState||(i.flags|=1024),u=!1)}return Bu(t,i,o,u,h,d)}function Bu(t,i,o,u,d,h){kp(t,i);var v=(i.flags&128)!==0;if(!u&&!v)return d&&Of(i,o,!1),vn(t,i,h);u=i.stateNode,jw.current=i;var S=v&&typeof o.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,t!==null&&v?(i.child=ni(i,t.child,null,h),i.child=ni(i,null,S,h)):pt(t,i,S,h),i.memoizedState=u.state,d&&Of(i,o,!0),i.child}function Pp(t){var i=t.stateNode;i.pendingContext?Af(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Af(t,i.context,!1),xu(t,i.containerInfo)}function Rp(t,i,o,u,d){return ti(),_u(d),i.flags|=256,pt(t,i,o,u),i.child}var Wu={dehydrated:null,treeContext:null,retryLane:0};function Vu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ap(t,i,o){var u=i.pendingProps,d=ze.current,h=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=t!==null&&t.memoizedState===null?!1:(d&2)!==0),S?(h=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),be(ze,d&1),t===null)return vu(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,t=u.fallback,h?(u=i.mode,h=i.child,v={mode:"hidden",children:v},(u&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=v):h=fl(v,u,0,null),t=Ir(t,u,o,null),h.return=i,t.return=i,h.sibling=t,i.child=h,i.child.memoizedState=Vu(o),i.memoizedState=Wu,t):Hu(i,v));if(d=t.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return Fw(t,i,v,u,S,d,o);if(h){h=u.fallback,v=i.mode,d=t.child,S=d.sibling;var C={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=C,i.deletions=null):(u=qn(d,C),u.subtreeFlags=d.subtreeFlags&14680064),S!==null?h=qn(S,h):(h=Ir(h,v,o,null),h.flags|=2),h.return=i,u.return=i,u.sibling=h,i.child=u,u=h,h=i.child,v=t.child.memoizedState,v=v===null?Vu(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},h.memoizedState=v,h.childLanes=t.childLanes&~o,i.memoizedState=Wu,u}return h=t.child,t=h.sibling,u=qn(h,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=o),u.return=i,u.sibling=null,t!==null&&(o=i.deletions,o===null?(i.deletions=[t],i.flags|=16):o.push(t)),i.child=u,i.memoizedState=null,u}function Hu(t,i){return i=fl({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function el(t,i,o,u){return u!==null&&_u(u),ni(i,t.child,null,o),t=Hu(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Fw(t,i,o,u,d,h,v){if(o)return i.flags&256?(i.flags&=-257,u=Uu(Error(n(422))),el(t,i,v,u)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(h=u.fallback,d=i.mode,u=fl({mode:"visible",children:u.children},d,0,null),h=Ir(h,d,v,null),h.flags|=2,u.return=i,h.return=i,u.sibling=h,i.child=u,(i.mode&1)!==0&&ni(i,t.child,null,v),i.child.memoizedState=Vu(v),i.memoizedState=Wu,h);if((i.mode&1)===0)return el(t,i,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var S=u.dgst;return u=S,h=Error(n(419)),u=Uu(h,u,void 0),el(t,i,v,u)}if(S=(v&t.childLanes)!==0,Ct||S){if(u=tt,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==h.retryLane&&(h.retryLane=d,mn(t,d),Gt(u,t,d,-1))}return lc(),u=Uu(Error(n(421))),el(t,i,v,u)}return d.data==="$?"?(i.flags|=128,i.child=t.child,i=Jw.bind(null,t),d._reactRetry=i,null):(t=h.treeContext,Rt=Mn(d.nextSibling),Pt=i,Ue=!0,Bt=null,t!==null&&(bt[Ot++]=fn,bt[Ot++]=pn,bt[Ot++]=mr,fn=t.id,pn=t.overflow,mr=i),i=Hu(i,u.children),i.flags|=4096,i)}function bp(t,i,o){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),Cu(t.return,i,o)}function Gu(t,i,o,u,d){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d}:(h.isBackwards=i,h.rendering=null,h.renderingStartTime=0,h.last=u,h.tail=o,h.tailMode=d)}function Op(t,i,o){var u=i.pendingProps,d=u.revealOrder,h=u.tail;if(pt(t,i,u.children,o),u=ze.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bp(t,o,i);else if(t.tag===19)bp(t,o,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(be(ze,u),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(o=i.child,d=null;o!==null;)t=o.alternate,t!==null&&qo(t)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),Gu(i,!1,d,o,h);break;case"backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&qo(t)===null){i.child=d;break}t=d.sibling,d.sibling=o,o=d,d=t}Gu(i,!0,o,null,h);break;case"together":Gu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function tl(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function vn(t,i,o){if(t!==null&&(i.dependencies=t.dependencies),wr|=i.lanes,(o&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(n(153));if(i.child!==null){for(t=i.child,o=qn(t,t.pendingProps),i.child=o,o.return=i;t.sibling!==null;)t=t.sibling,o=o.sibling=qn(t,t.pendingProps),o.return=i;o.sibling=null}return i.child}function Uw(t,i,o){switch(i.tag){case 3:Pp(i),ti();break;case 5:qf(i);break;case 1:St(i.type)&&jo(i);break;case 4:xu(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;be(Wo,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(be(ze,ze.current&1),i.flags|=128,null):(o&i.child.childLanes)!==0?Ap(t,i,o):(be(ze,ze.current&1),t=vn(t,i,o),t!==null?t.sibling:null);be(ze,ze.current&1);break;case 19:if(u=(o&i.childLanes)!==0,(t.flags&128)!==0){if(u)return Op(t,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),be(ze,ze.current),u)break;return null;case 22:case 23:return i.lanes=0,Np(t,i,o)}return vn(t,i,o)}var Dp,qu,Lp,Mp;Dp=function(t,i){for(var o=i.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},qu=function(){},Lp=function(t,i,o,u){var d=t.memoizedProps;if(d!==u){t=i.stateNode,_r(sn.current);var h=null;switch(o){case"input":d=Ca(t,d),u=Ca(t,u),h=[];break;case"select":d=H({},d,{value:void 0}),u=H({},u,{value:void 0}),h=[];break;case"textarea":d=xa(t,d),u=xa(t,u),h=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Do)}ka(o,u);var v;o=null;for(T in d)if(!u.hasOwnProperty(T)&&d.hasOwnProperty(T)&&d[T]!=null)if(T==="style"){var S=d[T];for(v in S)S.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(l.hasOwnProperty(T)?h||(h=[]):(h=h||[]).push(T,null));for(T in u){var C=u[T];if(S=d!=null?d[T]:void 0,u.hasOwnProperty(T)&&C!==S&&(C!=null||S!=null))if(T==="style")if(S){for(v in S)!S.hasOwnProperty(v)||C&&C.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in C)C.hasOwnProperty(v)&&S[v]!==C[v]&&(o||(o={}),o[v]=C[v])}else o||(h||(h=[]),h.push(T,o)),o=C;else T==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,S=S?S.__html:void 0,C!=null&&S!==C&&(h=h||[]).push(T,C)):T==="children"?typeof C!="string"&&typeof C!="number"||(h=h||[]).push(T,""+C):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(l.hasOwnProperty(T)?(C!=null&&T==="onScroll"&&Le("scroll",t),h||S===C||(h=[])):(h=h||[]).push(T,C))}o&&(h=h||[]).push("style",o);var T=h;(i.updateQueue=T)&&(i.flags|=4)}},Mp=function(t,i,o,u){o!==u&&(i.flags|=4)};function _s(t,i){if(!Ue)switch(t.tailMode){case"hidden":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function ht(t){var i=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(i)for(var d=t.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=o,i}function zw(t,i,o){var u=i.pendingProps;switch(mu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(i),null;case 1:return St(i.type)&&Mo(),ht(i),null;case 3:return u=i.stateNode,si(),Me(wt),Me(ct),Tu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&($o(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bt!==null&&(ic(Bt),Bt=null))),qu(t,i),ht(i),null;case 5:Nu(i);var d=_r(fs.current);if(o=i.type,t!==null&&i.stateNode!=null)Lp(t,i,o,u,d),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(n(166));return ht(i),null}if(t=_r(sn.current),$o(i)){u=i.stateNode,o=i.type;var h=i.memoizedProps;switch(u[rn]=i,u[as]=h,t=(i.mode&1)!==0,o){case"dialog":Le("cancel",u),Le("close",u);break;case"iframe":case"object":case"embed":Le("load",u);break;case"video":case"audio":for(d=0;d<ss.length;d++)Le(ss[d],u);break;case"source":Le("error",u);break;case"img":case"image":case"link":Le("error",u),Le("load",u);break;case"details":Le("toggle",u);break;case"input":mh(u,h),Le("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!h.multiple},Le("invalid",u);break;case"textarea":_h(u,h),Le("invalid",u)}ka(o,h),d=null;for(var v in h)if(h.hasOwnProperty(v)){var S=h[v];v==="children"?typeof S=="string"?u.textContent!==S&&(h.suppressHydrationWarning!==!0&&Oo(u.textContent,S,t),d=["children",S]):typeof S=="number"&&u.textContent!==""+S&&(h.suppressHydrationWarning!==!0&&Oo(u.textContent,S,t),d=["children",""+S]):l.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Le("scroll",u)}switch(o){case"input":Fe(u),vh(u,h,!0);break;case"textarea":Fe(u),wh(u);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(u.onclick=Do)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sh(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(o,{is:u.is}):(t=v.createElement(o),o==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,o),t[rn]=i,t[as]=u,Dp(t,i,!1,!1),i.stateNode=t;e:{switch(v=Ta(o,u),o){case"dialog":Le("cancel",t),Le("close",t),d=u;break;case"iframe":case"object":case"embed":Le("load",t),d=u;break;case"video":case"audio":for(d=0;d<ss.length;d++)Le(ss[d],t);d=u;break;case"source":Le("error",t),d=u;break;case"img":case"image":case"link":Le("error",t),Le("load",t),d=u;break;case"details":Le("toggle",t),d=u;break;case"input":mh(t,u),d=Ca(t,u),Le("invalid",t);break;case"option":d=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},d=H({},u,{value:void 0}),Le("invalid",t);break;case"textarea":_h(t,u),d=xa(t,u),Le("invalid",t);break;default:d=u}ka(o,d),S=d;for(h in S)if(S.hasOwnProperty(h)){var C=S[h];h==="style"?Ih(t,C):h==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Ch(t,C)):h==="children"?typeof C=="string"?(o!=="textarea"||C!=="")&&zi(t,C):typeof C=="number"&&zi(t,""+C):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(l.hasOwnProperty(h)?C!=null&&h==="onScroll"&&Le("scroll",t):C!=null&&G(t,h,C,v))}switch(o){case"input":Fe(t),vh(t,u,!1);break;case"textarea":Fe(t),wh(t);break;case"option":u.value!=null&&t.setAttribute("value",""+ae(u.value));break;case"select":t.multiple=!!u.multiple,h=u.value,h!=null?zr(t,!!u.multiple,h,!1):u.defaultValue!=null&&zr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=Do)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ht(i),null;case 6:if(t&&i.stateNode!=null)Mp(t,i,t.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(o=_r(fs.current),_r(sn.current),$o(i)){if(u=i.stateNode,o=i.memoizedProps,u[rn]=i,(h=u.nodeValue!==o)&&(t=Pt,t!==null))switch(t.tag){case 3:Oo(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Oo(u.nodeValue,o,(t.mode&1)!==0)}h&&(i.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[rn]=i,i.stateNode=u}return ht(i),null;case 13:if(Me(ze),u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&Rt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Uf(),ti(),i.flags|=98560,h=!1;else if(h=$o(i),u!==null&&u.dehydrated!==null){if(t===null){if(!h)throw Error(n(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));h[rn]=i}else ti(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),h=!1}else Bt!==null&&(ic(Bt),Bt=null),h=!0;if(!h)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=o,i):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(ze.current&1)!==0?Je===0&&(Je=3):lc())),i.updateQueue!==null&&(i.flags|=4),ht(i),null);case 4:return si(),qu(t,i),t===null&&os(i.stateNode.containerInfo),ht(i),null;case 10:return Su(i.type._context),ht(i),null;case 17:return St(i.type)&&Mo(),ht(i),null;case 19:if(Me(ze),h=i.memoizedState,h===null)return ht(i),null;if(u=(i.flags&128)!==0,v=h.rendering,v===null)if(u)_s(h,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=qo(t),v!==null){for(i.flags|=128,_s(h,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=o,o=i.child;o!==null;)h=o,t=u,h.flags&=14680066,v=h.alternate,v===null?(h.childLanes=0,h.lanes=t,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=v.childLanes,h.lanes=v.lanes,h.child=v.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=v.memoizedProps,h.memoizedState=v.memoizedState,h.updateQueue=v.updateQueue,h.type=v.type,t=v.dependencies,h.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return be(ze,ze.current&1|2),i.child}t=t.sibling}h.tail!==null&&Ge()>ui&&(i.flags|=128,u=!0,_s(h,!1),i.lanes=4194304)}else{if(!u)if(t=qo(v),t!==null){if(i.flags|=128,u=!0,o=t.updateQueue,o!==null&&(i.updateQueue=o,i.flags|=4),_s(h,!0),h.tail===null&&h.tailMode==="hidden"&&!v.alternate&&!Ue)return ht(i),null}else 2*Ge()-h.renderingStartTime>ui&&o!==1073741824&&(i.flags|=128,u=!0,_s(h,!1),i.lanes=4194304);h.isBackwards?(v.sibling=i.child,i.child=v):(o=h.last,o!==null?o.sibling=v:i.child=v,h.last=v)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Ge(),i.sibling=null,o=ze.current,be(ze,u?o&1|2:o&1),i):(ht(i),null);case 22:case 23:return oc(),u=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(At&1073741824)!==0&&(ht(i),i.subtreeFlags&6&&(i.flags|=8192)):ht(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function $w(t,i){switch(mu(i),i.tag){case 1:return St(i.type)&&Mo(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return si(),Me(wt),Me(ct),Tu(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return Nu(i),null;case 13:if(Me(ze),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ti()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Me(ze),null;case 4:return si(),null;case 10:return Su(i.type._context),null;case 22:case 23:return oc(),null;case 24:return null;default:return null}}var nl=!1,ft=!1,Bw=typeof WeakSet=="function"?WeakSet:Set,K=null;function li(t,i){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){We(t,i,u)}else o.current=null}function Ku(t,i,o){try{o()}catch(u){We(t,i,u)}}var jp=!1;function Ww(t,i){if(ou=Co,t=mf(),Xa(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{o.nodeType,h.nodeType}catch{o=null;break e}var v=0,S=-1,C=-1,T=0,j=0,F=t,M=null;t:for(;;){for(var q;F!==o||d!==0&&F.nodeType!==3||(S=v+d),F!==h||u!==0&&F.nodeType!==3||(C=v+u),F.nodeType===3&&(v+=F.nodeValue.length),(q=F.firstChild)!==null;)M=F,F=q;for(;;){if(F===t)break t;if(M===o&&++T===d&&(S=v),M===h&&++j===u&&(C=v),(q=F.nextSibling)!==null)break;F=M,M=F.parentNode}F=q}o=S===-1||C===-1?null:{start:S,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(lu={focusedElem:t,selectionRange:o},Co=!1,K=i;K!==null;)if(i=K,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,K=t;else for(;K!==null;){i=K;try{var Y=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var X=Y.memoizedProps,qe=Y.memoizedState,N=i.stateNode,E=N.getSnapshotBeforeUpdate(i.elementType===i.type?X:Wt(i.type,X),qe);N.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var k=i.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(B){We(i,i.return,B)}if(t=i.sibling,t!==null){t.return=i.return,K=t;break}K=i.return}return Y=jp,jp=!1,Y}function ys(t,i,o){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var h=d.destroy;d.destroy=void 0,h!==void 0&&Ku(i,o,h)}d=d.next}while(d!==u)}}function rl(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==i)}}function Qu(t){var i=t.ref;if(i!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof i=="function"?i(t):i.current=t}}function Fp(t){var i=t.alternate;i!==null&&(t.alternate=null,Fp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[rn],delete i[as],delete i[du],delete i[xw],delete i[Nw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Up(t){return t.tag===5||t.tag===3||t.tag===4}function zp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Up(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yu(t,i,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(t,i):o.insertBefore(t,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(t,o)):(i=o,i.appendChild(t)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Do));else if(u!==4&&(t=t.child,t!==null))for(Yu(t,i,o),t=t.sibling;t!==null;)Yu(t,i,o),t=t.sibling}function Ju(t,i,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?o.insertBefore(t,i):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Ju(t,i,o),t=t.sibling;t!==null;)Ju(t,i,o),t=t.sibling}var ot=null,Vt=!1;function Bn(t,i,o){for(o=o.child;o!==null;)$p(t,i,o),o=o.sibling}function $p(t,i,o){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(go,o)}catch{}switch(o.tag){case 5:ft||li(o,i);case 6:var u=ot,d=Vt;ot=null,Bn(t,i,o),ot=u,Vt=d,ot!==null&&(Vt?(t=ot,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):ot.removeChild(o.stateNode));break;case 18:ot!==null&&(Vt?(t=ot,o=o.stateNode,t.nodeType===8?cu(t.parentNode,o):t.nodeType===1&&cu(t,o),Ji(t)):cu(ot,o.stateNode));break;case 4:u=ot,d=Vt,ot=o.stateNode.containerInfo,Vt=!0,Bn(t,i,o),ot=u,Vt=d;break;case 0:case 11:case 14:case 15:if(!ft&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var h=d,v=h.destroy;h=h.tag,v!==void 0&&((h&2)!==0||(h&4)!==0)&&Ku(o,i,v),d=d.next}while(d!==u)}Bn(t,i,o);break;case 1:if(!ft&&(li(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(S){We(o,i,S)}Bn(t,i,o);break;case 21:Bn(t,i,o);break;case 22:o.mode&1?(ft=(u=ft)||o.memoizedState!==null,Bn(t,i,o),ft=u):Bn(t,i,o);break;default:Bn(t,i,o)}}function Bp(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Bw),i.forEach(function(u){var d=Xw.bind(null,t,u);o.has(u)||(o.add(u),u.then(d,d))})}}function Ht(t,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];try{var h=t,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:ot=S.stateNode,Vt=!1;break e;case 3:ot=S.stateNode.containerInfo,Vt=!0;break e;case 4:ot=S.stateNode.containerInfo,Vt=!0;break e}S=S.return}if(ot===null)throw Error(n(160));$p(h,v,d),ot=null,Vt=!1;var C=d.alternate;C!==null&&(C.return=null),d.return=null}catch(T){We(d,i,T)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Wp(i,t),i=i.sibling}function Wp(t,i){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(i,t),ln(t),u&4){try{ys(3,t,t.return),rl(3,t)}catch(X){We(t,t.return,X)}try{ys(5,t,t.return)}catch(X){We(t,t.return,X)}}break;case 1:Ht(i,t),ln(t),u&512&&o!==null&&li(o,o.return);break;case 5:if(Ht(i,t),ln(t),u&512&&o!==null&&li(o,o.return),t.flags&32){var d=t.stateNode;try{zi(d,"")}catch(X){We(t,t.return,X)}}if(u&4&&(d=t.stateNode,d!=null)){var h=t.memoizedProps,v=o!==null?o.memoizedProps:h,S=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{S==="input"&&h.type==="radio"&&h.name!=null&&gh(d,h),Ta(S,v);var T=Ta(S,h);for(v=0;v<C.length;v+=2){var j=C[v],F=C[v+1];j==="style"?Ih(d,F):j==="dangerouslySetInnerHTML"?Ch(d,F):j==="children"?zi(d,F):G(d,j,F,T)}switch(S){case"input":Ea(d,h);break;case"textarea":yh(d,h);break;case"select":var M=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!h.multiple;var q=h.value;q!=null?zr(d,!!h.multiple,q,!1):M!==!!h.multiple&&(h.defaultValue!=null?zr(d,!!h.multiple,h.defaultValue,!0):zr(d,!!h.multiple,h.multiple?[]:"",!1))}d[as]=h}catch(X){We(t,t.return,X)}}break;case 6:if(Ht(i,t),ln(t),u&4){if(t.stateNode===null)throw Error(n(162));d=t.stateNode,h=t.memoizedProps;try{d.nodeValue=h}catch(X){We(t,t.return,X)}}break;case 3:if(Ht(i,t),ln(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ji(i.containerInfo)}catch(X){We(t,t.return,X)}break;case 4:Ht(i,t),ln(t);break;case 13:Ht(i,t),ln(t),d=t.child,d.flags&8192&&(h=d.memoizedState!==null,d.stateNode.isHidden=h,!h||d.alternate!==null&&d.alternate.memoizedState!==null||(ec=Ge())),u&4&&Bp(t);break;case 22:if(j=o!==null&&o.memoizedState!==null,t.mode&1?(ft=(T=ft)||j,Ht(i,t),ft=T):Ht(i,t),ln(t),u&8192){if(T=t.memoizedState!==null,(t.stateNode.isHidden=T)&&!j&&(t.mode&1)!==0)for(K=t,j=t.child;j!==null;){for(F=K=j;K!==null;){switch(M=K,q=M.child,M.tag){case 0:case 11:case 14:case 15:ys(4,M,M.return);break;case 1:li(M,M.return);var Y=M.stateNode;if(typeof Y.componentWillUnmount=="function"){u=M,o=M.return;try{i=u,Y.props=i.memoizedProps,Y.state=i.memoizedState,Y.componentWillUnmount()}catch(X){We(u,o,X)}}break;case 5:li(M,M.return);break;case 22:if(M.memoizedState!==null){Gp(F);continue}}q!==null?(q.return=M,K=q):Gp(F)}j=j.sibling}e:for(j=null,F=t;;){if(F.tag===5){if(j===null){j=F;try{d=F.stateNode,T?(h=d.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(S=F.stateNode,C=F.memoizedProps.style,v=C!=null&&C.hasOwnProperty("display")?C.display:null,S.style.display=Eh("display",v))}catch(X){We(t,t.return,X)}}}else if(F.tag===6){if(j===null)try{F.stateNode.nodeValue=T?"":F.memoizedProps}catch(X){We(t,t.return,X)}}else if((F.tag!==22&&F.tag!==23||F.memoizedState===null||F===t)&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===t)break e;for(;F.sibling===null;){if(F.return===null||F.return===t)break e;j===F&&(j=null),F=F.return}j===F&&(j=null),F.sibling.return=F.return,F=F.sibling}}break;case 19:Ht(i,t),ln(t),u&4&&Bp(t);break;case 21:break;default:Ht(i,t),ln(t)}}function ln(t){var i=t.flags;if(i&2){try{e:{for(var o=t.return;o!==null;){if(Up(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(zi(d,""),u.flags&=-33);var h=zp(t);Ju(t,h,d);break;case 3:case 4:var v=u.stateNode.containerInfo,S=zp(t);Yu(t,S,v);break;default:throw Error(n(161))}}catch(C){We(t,t.return,C)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Vw(t,i,o){K=t,Vp(t)}function Vp(t,i,o){for(var u=(t.mode&1)!==0;K!==null;){var d=K,h=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||nl;if(!v){var S=d.alternate,C=S!==null&&S.memoizedState!==null||ft;S=nl;var T=ft;if(nl=v,(ft=C)&&!T)for(K=d;K!==null;)v=K,C=v.child,v.tag===22&&v.memoizedState!==null?qp(d):C!==null?(C.return=v,K=C):qp(d);for(;h!==null;)K=h,Vp(h),h=h.sibling;K=d,nl=S,ft=T}Hp(t)}else(d.subtreeFlags&8772)!==0&&h!==null?(h.return=d,K=h):Hp(t)}}function Hp(t){for(;K!==null;){var i=K;if((i.flags&8772)!==0){var o=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ft||rl(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!ft)if(o===null)u.componentDidMount();else{var d=i.elementType===i.type?o.memoizedProps:Wt(i.type,o.memoizedProps);u.componentDidUpdate(d,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var h=i.updateQueue;h!==null&&Gf(i,h,u);break;case 3:var v=i.updateQueue;if(v!==null){if(o=null,i.child!==null)switch(i.child.tag){case 5:o=i.child.stateNode;break;case 1:o=i.child.stateNode}Gf(i,v,o)}break;case 5:var S=i.stateNode;if(o===null&&i.flags&4){o=S;var C=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&o.focus();break;case"img":C.src&&(o.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var T=i.alternate;if(T!==null){var j=T.memoizedState;if(j!==null){var F=j.dehydrated;F!==null&&Ji(F)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ft||i.flags&512&&Qu(i)}catch(M){We(i,i.return,M)}}if(i===t){K=null;break}if(o=i.sibling,o!==null){o.return=i.return,K=o;break}K=i.return}}function Gp(t){for(;K!==null;){var i=K;if(i===t){K=null;break}var o=i.sibling;if(o!==null){o.return=i.return,K=o;break}K=i.return}}function qp(t){for(;K!==null;){var i=K;try{switch(i.tag){case 0:case 11:case 15:var o=i.return;try{rl(4,i)}catch(C){We(i,o,C)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(C){We(i,d,C)}}var h=i.return;try{Qu(i)}catch(C){We(i,h,C)}break;case 5:var v=i.return;try{Qu(i)}catch(C){We(i,v,C)}}}catch(C){We(i,i.return,C)}if(i===t){K=null;break}var S=i.sibling;if(S!==null){S.return=i.return,K=S;break}K=i.return}}var Hw=Math.ceil,il=V.ReactCurrentDispatcher,Xu=V.ReactCurrentOwner,Mt=V.ReactCurrentBatchConfig,Ce=0,tt=null,Ke=null,lt=0,At=0,ai=jn(0),Je=0,ws=null,wr=0,sl=0,Zu=0,Ss=null,Et=null,ec=0,ui=1/0,_n=null,ol=!1,tc=null,Wn=null,ll=!1,Vn=null,al=0,Cs=0,nc=null,ul=-1,cl=0;function mt(){return(Ce&6)!==0?Ge():ul!==-1?ul:ul=Ge()}function Hn(t){return(t.mode&1)===0?1:(Ce&2)!==0&&lt!==0?lt&-lt:Tw.transition!==null?(cl===0&&(cl=Uh()),cl):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:Kh(t.type)),t)}function Gt(t,i,o,u){if(50<Cs)throw Cs=0,nc=null,Error(n(185));Gi(t,o,u),((Ce&2)===0||t!==tt)&&(t===tt&&((Ce&2)===0&&(sl|=o),Je===4&&Gn(t,lt)),It(t,u),o===1&&Ce===0&&(i.mode&1)===0&&(ui=Ge()+500,Fo&&Un()))}function It(t,i){var o=t.callbackNode;Ty(t,i);var u=yo(t,t===tt?lt:0);if(u===0)o!==null&&Mh(o),t.callbackNode=null,t.callbackPriority=0;else if(i=u&-u,t.callbackPriority!==i){if(o!=null&&Mh(o),i===1)t.tag===0?kw(Qp.bind(null,t)):Df(Qp.bind(null,t)),Ew(function(){(Ce&6)===0&&Un()}),o=null;else{switch(zh(u)){case 1:o=La;break;case 4:o=jh;break;case 16:o=mo;break;case 536870912:o=Fh;break;default:o=mo}o=rm(o,Kp.bind(null,t))}t.callbackPriority=i,t.callbackNode=o}}function Kp(t,i){if(ul=-1,cl=0,(Ce&6)!==0)throw Error(n(327));var o=t.callbackNode;if(ci()&&t.callbackNode!==o)return null;var u=yo(t,t===tt?lt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||i)i=dl(t,u);else{i=u;var d=Ce;Ce|=2;var h=Jp();(tt!==t||lt!==i)&&(_n=null,ui=Ge()+500,Cr(t,i));do try{Kw();break}catch(S){Yp(t,S)}while(!0);wu(),il.current=h,Ce=d,Ke!==null?i=0:(tt=null,lt=0,i=Je)}if(i!==0){if(i===2&&(d=Ma(t),d!==0&&(u=d,i=rc(t,d))),i===1)throw o=ws,Cr(t,0),Gn(t,u),It(t,Ge()),o;if(i===6)Gn(t,u);else{if(d=t.current.alternate,(u&30)===0&&!Gw(d)&&(i=dl(t,u),i===2&&(h=Ma(t),h!==0&&(u=h,i=rc(t,h))),i===1))throw o=ws,Cr(t,0),Gn(t,u),It(t,Ge()),o;switch(t.finishedWork=d,t.finishedLanes=u,i){case 0:case 1:throw Error(n(345));case 2:Er(t,Et,_n);break;case 3:if(Gn(t,u),(u&130023424)===u&&(i=ec+500-Ge(),10<i)){if(yo(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){mt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=uu(Er.bind(null,t,Et,_n),i);break}Er(t,Et,_n);break;case 4:if(Gn(t,u),(u&4194240)===u)break;for(i=t.eventTimes,d=-1;0<u;){var v=31-zt(u);h=1<<v,v=i[v],v>d&&(d=v),u&=~h}if(u=d,u=Ge()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Hw(u/1960))-u,10<u){t.timeoutHandle=uu(Er.bind(null,t,Et,_n),u);break}Er(t,Et,_n);break;case 5:Er(t,Et,_n);break;default:throw Error(n(329))}}}return It(t,Ge()),t.callbackNode===o?Kp.bind(null,t):null}function rc(t,i){var o=Ss;return t.current.memoizedState.isDehydrated&&(Cr(t,i).flags|=256),t=dl(t,i),t!==2&&(i=Et,Et=o,i!==null&&ic(i)),t}function ic(t){Et===null?Et=t:Et.push.apply(Et,t)}function Gw(t){for(var i=t;;){if(i.flags&16384){var o=i.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var d=o[u],h=d.getSnapshot;d=d.value;try{if(!$t(h(),d))return!1}catch{return!1}}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gn(t,i){for(i&=~Zu,i&=~sl,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var o=31-zt(i),u=1<<o;t[o]=-1,i&=~u}}function Qp(t){if((Ce&6)!==0)throw Error(n(327));ci();var i=yo(t,0);if((i&1)===0)return It(t,Ge()),null;var o=dl(t,i);if(t.tag!==0&&o===2){var u=Ma(t);u!==0&&(i=u,o=rc(t,u))}if(o===1)throw o=ws,Cr(t,0),Gn(t,i),It(t,Ge()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,Er(t,Et,_n),It(t,Ge()),null}function sc(t,i){var o=Ce;Ce|=1;try{return t(i)}finally{Ce=o,Ce===0&&(ui=Ge()+500,Fo&&Un())}}function Sr(t){Vn!==null&&Vn.tag===0&&(Ce&6)===0&&ci();var i=Ce;Ce|=1;var o=Mt.transition,u=Ne;try{if(Mt.transition=null,Ne=1,t)return t()}finally{Ne=u,Mt.transition=o,Ce=i,(Ce&6)===0&&Un()}}function oc(){At=ai.current,Me(ai)}function Cr(t,i){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Cw(o)),Ke!==null)for(o=Ke.return;o!==null;){var u=o;switch(mu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Mo();break;case 3:si(),Me(wt),Me(ct),Tu();break;case 5:Nu(u);break;case 4:si();break;case 13:Me(ze);break;case 19:Me(ze);break;case 10:Su(u.type._context);break;case 22:case 23:oc()}o=o.return}if(tt=t,Ke=t=qn(t.current,null),lt=At=i,Je=0,ws=null,Zu=sl=wr=0,Et=Ss=null,vr!==null){for(i=0;i<vr.length;i++)if(o=vr[i],u=o.interleaved,u!==null){o.interleaved=null;var d=u.next,h=o.pending;if(h!==null){var v=h.next;h.next=d,u.next=v}o.pending=u}vr=null}return t}function Yp(t,i){do{var o=Ke;try{if(wu(),Ko.current=Xo,Qo){for(var u=$e.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Qo=!1}if(yr=0,et=Ye=$e=null,ps=!1,ms=0,Xu.current=null,o===null||o.return===null){Je=1,ws=i,Ke=null;break}e:{var h=t,v=o.return,S=o,C=i;if(i=lt,S.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var T=C,j=S,F=j.tag;if((j.mode&1)===0&&(F===0||F===11||F===15)){var M=j.alternate;M?(j.updateQueue=M.updateQueue,j.memoizedState=M.memoizedState,j.lanes=M.lanes):(j.updateQueue=null,j.memoizedState=null)}var q=Sp(v);if(q!==null){q.flags&=-257,Cp(q,v,S,h,i),q.mode&1&&wp(h,T,i),i=q,C=T;var Y=i.updateQueue;if(Y===null){var X=new Set;X.add(C),i.updateQueue=X}else Y.add(C);break e}else{if((i&1)===0){wp(h,T,i),lc();break e}C=Error(n(426))}}else if(Ue&&S.mode&1){var qe=Sp(v);if(qe!==null){(qe.flags&65536)===0&&(qe.flags|=256),Cp(qe,v,S,h,i),_u(oi(C,S));break e}}h=C=oi(C,S),Je!==4&&(Je=2),Ss===null?Ss=[h]:Ss.push(h),h=v;do{switch(h.tag){case 3:h.flags|=65536,i&=-i,h.lanes|=i;var N=_p(h,C,i);Hf(h,N);break e;case 1:S=C;var E=h.type,k=h.stateNode;if((h.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Wn===null||!Wn.has(k)))){h.flags|=65536,i&=-i,h.lanes|=i;var B=yp(h,S,i);Hf(h,B);break e}}h=h.return}while(h!==null)}Zp(o)}catch(ne){i=ne,Ke===o&&o!==null&&(Ke=o=o.return);continue}break}while(!0)}function Jp(){var t=il.current;return il.current=Xo,t===null?Xo:t}function lc(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||(wr&268435455)===0&&(sl&268435455)===0||Gn(tt,lt)}function dl(t,i){var o=Ce;Ce|=2;var u=Jp();(tt!==t||lt!==i)&&(_n=null,Cr(t,i));do try{qw();break}catch(d){Yp(t,d)}while(!0);if(wu(),Ce=o,il.current=u,Ke!==null)throw Error(n(261));return tt=null,lt=0,Je}function qw(){for(;Ke!==null;)Xp(Ke)}function Kw(){for(;Ke!==null&&!yy();)Xp(Ke)}function Xp(t){var i=nm(t.alternate,t,At);t.memoizedProps=t.pendingProps,i===null?Zp(t):Ke=i,Xu.current=null}function Zp(t){var i=t;do{var o=i.alternate;if(t=i.return,(i.flags&32768)===0){if(o=zw(o,i,At),o!==null){Ke=o;return}}else{if(o=$w(o,i),o!==null){o.flags&=32767,Ke=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Ke=null;return}}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=t}while(i!==null);Je===0&&(Je=5)}function Er(t,i,o){var u=Ne,d=Mt.transition;try{Mt.transition=null,Ne=1,Qw(t,i,o,u)}finally{Mt.transition=d,Ne=u}return null}function Qw(t,i,o,u){do ci();while(Vn!==null);if((Ce&6)!==0)throw Error(n(327));o=t.finishedWork;var d=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var h=o.lanes|o.childLanes;if(Py(t,h),t===tt&&(Ke=tt=null,lt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||ll||(ll=!0,rm(mo,function(){return ci(),null})),h=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||h){h=Mt.transition,Mt.transition=null;var v=Ne;Ne=1;var S=Ce;Ce|=4,Xu.current=null,Ww(t,o),Wp(o,t),mw(lu),Co=!!ou,lu=ou=null,t.current=o,Vw(o),wy(),Ce=S,Ne=v,Mt.transition=h}else t.current=o;if(ll&&(ll=!1,Vn=t,al=d),h=t.pendingLanes,h===0&&(Wn=null),Ey(o.stateNode),It(t,Ge()),i!==null)for(u=t.onRecoverableError,o=0;o<i.length;o++)d=i[o],u(d.value,{componentStack:d.stack,digest:d.digest});if(ol)throw ol=!1,t=tc,tc=null,t;return(al&1)!==0&&t.tag!==0&&ci(),h=t.pendingLanes,(h&1)!==0?t===nc?Cs++:(Cs=0,nc=t):Cs=0,Un(),null}function ci(){if(Vn!==null){var t=zh(al),i=Mt.transition,o=Ne;try{if(Mt.transition=null,Ne=16>t?16:t,Vn===null)var u=!1;else{if(t=Vn,Vn=null,al=0,(Ce&6)!==0)throw Error(n(331));var d=Ce;for(Ce|=4,K=t.current;K!==null;){var h=K,v=h.child;if((K.flags&16)!==0){var S=h.deletions;if(S!==null){for(var C=0;C<S.length;C++){var T=S[C];for(K=T;K!==null;){var j=K;switch(j.tag){case 0:case 11:case 15:ys(8,j,h)}var F=j.child;if(F!==null)F.return=j,K=F;else for(;K!==null;){j=K;var M=j.sibling,q=j.return;if(Fp(j),j===T){K=null;break}if(M!==null){M.return=q,K=M;break}K=q}}}var Y=h.alternate;if(Y!==null){var X=Y.child;if(X!==null){Y.child=null;do{var qe=X.sibling;X.sibling=null,X=qe}while(X!==null)}}K=h}}if((h.subtreeFlags&2064)!==0&&v!==null)v.return=h,K=v;else e:for(;K!==null;){if(h=K,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:ys(9,h,h.return)}var N=h.sibling;if(N!==null){N.return=h.return,K=N;break e}K=h.return}}var E=t.current;for(K=E;K!==null;){v=K;var k=v.child;if((v.subtreeFlags&2064)!==0&&k!==null)k.return=v,K=k;else e:for(v=E;K!==null;){if(S=K,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:rl(9,S)}}catch(ne){We(S,S.return,ne)}if(S===v){K=null;break e}var B=S.sibling;if(B!==null){B.return=S.return,K=B;break e}K=S.return}}if(Ce=d,Un(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(go,t)}catch{}u=!0}return u}finally{Ne=o,Mt.transition=i}}return!1}function em(t,i,o){i=oi(o,i),i=_p(t,i,1),t=$n(t,i,1),i=mt(),t!==null&&(Gi(t,1,i),It(t,i))}function We(t,i,o){if(t.tag===3)em(t,t,o);else for(;i!==null;){if(i.tag===3){em(i,t,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Wn===null||!Wn.has(u))){t=oi(o,t),t=yp(i,t,1),i=$n(i,t,1),t=mt(),i!==null&&(Gi(i,1,t),It(i,t));break}}i=i.return}}function Yw(t,i,o){var u=t.pingCache;u!==null&&u.delete(i),i=mt(),t.pingedLanes|=t.suspendedLanes&o,tt===t&&(lt&o)===o&&(Je===4||Je===3&&(lt&130023424)===lt&&500>Ge()-ec?Cr(t,0):Zu|=o),It(t,i)}function tm(t,i){i===0&&((t.mode&1)===0?i=1:(i=_o,_o<<=1,(_o&130023424)===0&&(_o=4194304)));var o=mt();t=mn(t,i),t!==null&&(Gi(t,i,o),It(t,o))}function Jw(t){var i=t.memoizedState,o=0;i!==null&&(o=i.retryLane),tm(t,o)}function Xw(t,i){var o=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(i),tm(t,o)}var nm;nm=function(t,i,o){if(t!==null)if(t.memoizedProps!==i.pendingProps||wt.current)Ct=!0;else{if((t.lanes&o)===0&&(i.flags&128)===0)return Ct=!1,Uw(t,i,o);Ct=(t.flags&131072)!==0}else Ct=!1,Ue&&(i.flags&1048576)!==0&&Lf(i,zo,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;tl(t,i),t=i.pendingProps;var d=Xr(i,ct.current);ii(i,o),d=Au(null,i,u,t,d,o);var h=bu();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,St(u)?(h=!0,jo(i)):h=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Iu(i),d.updater=Zo,i.stateNode=d,d._reactInternals=i,Fu(i,u,t,o),i=Bu(null,i,u,!0,h,o)):(i.tag=0,Ue&&h&&pu(i),pt(null,i,d,o),i=i.child),i;case 16:u=i.elementType;e:{switch(tl(t,i),t=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=e0(u),t=Wt(u,t),d){case 0:i=$u(null,i,u,t,o);break e;case 1:i=Tp(null,i,u,t,o);break e;case 11:i=Ep(null,i,u,t,o);break e;case 14:i=Ip(null,i,u,Wt(u.type,t),o);break e}throw Error(n(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Wt(u,d),$u(t,i,u,d,o);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Wt(u,d),Tp(t,i,u,d,o);case 3:e:{if(Pp(i),t===null)throw Error(n(387));u=i.pendingProps,h=i.memoizedState,d=h.element,Vf(t,i),Go(i,u,null,o);var v=i.memoizedState;if(u=v.element,h.isDehydrated)if(h={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){d=oi(Error(n(423)),i),i=Rp(t,i,u,o,d);break e}else if(u!==d){d=oi(Error(n(424)),i),i=Rp(t,i,u,o,d);break e}else for(Rt=Mn(i.stateNode.containerInfo.firstChild),Pt=i,Ue=!0,Bt=null,o=Bf(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ti(),u===d){i=vn(t,i,o);break e}pt(t,i,u,o)}i=i.child}return i;case 5:return qf(i),t===null&&vu(i),u=i.type,d=i.pendingProps,h=t!==null?t.memoizedProps:null,v=d.children,au(u,d)?v=null:h!==null&&au(u,h)&&(i.flags|=32),kp(t,i),pt(t,i,v,o),i.child;case 6:return t===null&&vu(i),null;case 13:return Ap(t,i,o);case 4:return xu(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=ni(i,null,u,o):pt(t,i,u,o),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Wt(u,d),Ep(t,i,u,d,o);case 7:return pt(t,i,i.pendingProps,o),i.child;case 8:return pt(t,i,i.pendingProps.children,o),i.child;case 12:return pt(t,i,i.pendingProps.children,o),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,h=i.memoizedProps,v=d.value,be(Wo,u._currentValue),u._currentValue=v,h!==null)if($t(h.value,v)){if(h.children===d.children&&!wt.current){i=vn(t,i,o);break e}}else for(h=i.child,h!==null&&(h.return=i);h!==null;){var S=h.dependencies;if(S!==null){v=h.child;for(var C=S.firstContext;C!==null;){if(C.context===u){if(h.tag===1){C=gn(-1,o&-o),C.tag=2;var T=h.updateQueue;if(T!==null){T=T.shared;var j=T.pending;j===null?C.next=C:(C.next=j.next,j.next=C),T.pending=C}}h.lanes|=o,C=h.alternate,C!==null&&(C.lanes|=o),Cu(h.return,o,i),S.lanes|=o;break}C=C.next}}else if(h.tag===10)v=h.type===i.type?null:h.child;else if(h.tag===18){if(v=h.return,v===null)throw Error(n(341));v.lanes|=o,S=v.alternate,S!==null&&(S.lanes|=o),Cu(v,o,i),v=h.sibling}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===i){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}pt(t,i,d.children,o),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,ii(i,o),d=Dt(d),u=u(d),i.flags|=1,pt(t,i,u,o),i.child;case 14:return u=i.type,d=Wt(u,i.pendingProps),d=Wt(u.type,d),Ip(t,i,u,d,o);case 15:return xp(t,i,i.type,i.pendingProps,o);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Wt(u,d),tl(t,i),i.tag=1,St(u)?(t=!0,jo(i)):t=!1,ii(i,o),gp(i,u,d),Fu(i,u,d,o),Bu(null,i,u,!0,t,o);case 19:return Op(t,i,o);case 22:return Np(t,i,o)}throw Error(n(156,i.tag))};function rm(t,i){return Lh(t,i)}function Zw(t,i,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,i,o,u){return new Zw(t,i,o,u)}function ac(t){return t=t.prototype,!(!t||!t.isReactComponent)}function e0(t){if(typeof t=="function")return ac(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qe)return 11;if(t===se)return 14}return 2}function qn(t,i){var o=t.alternate;return o===null?(o=jt(t.tag,i,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=i,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,i=t.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function hl(t,i,o,u,d,h){var v=2;if(u=t,typeof t=="function")ac(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case ee:return Ir(o.children,d,h,i);case he:v=8,d|=8;break;case xe:return t=jt(12,o,i,d|2),t.elementType=xe,t.lanes=h,t;case je:return t=jt(13,o,i,d),t.elementType=je,t.lanes=h,t;case z:return t=jt(19,o,i,d),t.elementType=z,t.lanes=h,t;case te:return fl(o,d,h,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ke:v=10;break e;case st:v=9;break e;case Qe:v=11;break e;case se:v=14;break e;case ge:v=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return i=jt(v,o,i,d),i.elementType=t,i.type=u,i.lanes=h,i}function Ir(t,i,o,u){return t=jt(7,t,u,i),t.lanes=o,t}function fl(t,i,o,u){return t=jt(22,t,u,i),t.elementType=te,t.lanes=o,t.stateNode={isHidden:!1},t}function uc(t,i,o){return t=jt(6,t,null,i),t.lanes=o,t}function cc(t,i,o){return i=jt(4,t.children!==null?t.children:[],t.key,i),i.lanes=o,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function t0(t,i,o,u,d){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function dc(t,i,o,u,d,h,v,S,C){return t=new t0(t,i,o,S,C),i===1?(i=1,h===!0&&(i|=8)):i=0,h=jt(3,null,null,i),t.current=h,h.stateNode=t,h.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iu(h),t}function n0(t,i,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:u==null?null:""+u,children:t,containerInfo:i,implementation:o}}function im(t){if(!t)return Fn;t=t._reactInternals;e:{if(hr(t)!==t||t.tag!==1)throw Error(n(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(St(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(St(o))return bf(t,o,i)}return i}function sm(t,i,o,u,d,h,v,S,C){return t=dc(o,u,!0,t,d,h,v,S,C),t.context=im(null),o=t.current,u=mt(),d=Hn(o),h=gn(u,d),h.callback=i??null,$n(o,h,d),t.current.lanes=d,Gi(t,d,u),It(t,u),t}function pl(t,i,o,u){var d=i.current,h=mt(),v=Hn(d);return o=im(o),i.context===null?i.context=o:i.pendingContext=o,i=gn(h,v),i.payload={element:t},u=u===void 0?null:u,u!==null&&(i.callback=u),t=$n(d,i,v),t!==null&&(Gt(t,d,v,h),Ho(t,d,v)),v}function ml(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function om(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<i?o:i}}function hc(t,i){om(t,i),(t=t.alternate)&&om(t,i)}function r0(){return null}var lm=typeof reportError=="function"?reportError:function(t){console.error(t)};function fc(t){this._internalRoot=t}gl.prototype.render=fc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(n(409));pl(t,i,null,null)},gl.prototype.unmount=fc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Sr(function(){pl(null,t,null,null)}),i[dn]=null}};function gl(t){this._internalRoot=t}gl.prototype.unstable_scheduleHydration=function(t){if(t){var i=Wh();t={blockedOn:null,target:t,priority:i};for(var o=0;o<On.length&&i!==0&&i<On[o].priority;o++);On.splice(o,0,t),o===0&&Gh(t)}};function pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function am(){}function i0(t,i,o,u,d){if(d){if(typeof u=="function"){var h=u;u=function(){var T=ml(v);h.call(T)}}var v=sm(i,u,t,0,null,!1,!1,"",am);return t._reactRootContainer=v,t[dn]=v.current,os(t.nodeType===8?t.parentNode:t),Sr(),v}for(;d=t.lastChild;)t.removeChild(d);if(typeof u=="function"){var S=u;u=function(){var T=ml(C);S.call(T)}}var C=dc(t,0,!1,null,null,!1,!1,"",am);return t._reactRootContainer=C,t[dn]=C.current,os(t.nodeType===8?t.parentNode:t),Sr(function(){pl(i,C,o,u)}),C}function _l(t,i,o,u,d){var h=o._reactRootContainer;if(h){var v=h;if(typeof d=="function"){var S=d;d=function(){var C=ml(v);S.call(C)}}pl(i,v,t,d)}else v=i0(o,i,t,d,u);return ml(v)}$h=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var o=Hi(i.pendingLanes);o!==0&&(Fa(i,o|1),It(i,Ge()),(Ce&6)===0&&(ui=Ge()+500,Un()))}break;case 13:Sr(function(){var u=mn(t,1);if(u!==null){var d=mt();Gt(u,t,1,d)}}),hc(t,1)}},Ua=function(t){if(t.tag===13){var i=mn(t,134217728);if(i!==null){var o=mt();Gt(i,t,134217728,o)}hc(t,134217728)}},Bh=function(t){if(t.tag===13){var i=Hn(t),o=mn(t,i);if(o!==null){var u=mt();Gt(o,t,i,u)}hc(t,i)}},Wh=function(){return Ne},Vh=function(t,i){var o=Ne;try{return Ne=t,i()}finally{Ne=o}},Aa=function(t,i,o){switch(i){case"input":if(Ea(t,o),i=o.name,o.type==="radio"&&i!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==t&&u.form===t.form){var d=Lo(u);if(!d)throw Error(n(90));tn(u),Ea(u,d)}}}break;case"textarea":yh(t,o);break;case"select":i=o.value,i!=null&&zr(t,!!o.multiple,i,!1)}},Th=sc,Ph=Sr;var s0={usingClientEntryPoint:!1,Events:[us,Yr,Lo,Nh,kh,sc]},Es={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o0={bundleType:Es.bundleType,version:Es.version,rendererPackageName:Es.rendererPackageName,rendererConfig:Es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Oh(t),t===null?null:t.stateNode},findFiberByHostInstance:Es.findFiberByHostInstance||r0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{go=yl.inject(o0),nn=yl}catch{}}return xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s0,xt.createPortal=function(t,i){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pc(i))throw Error(n(200));return n0(t,i,null,o)},xt.createRoot=function(t,i){if(!pc(t))throw Error(n(299));var o=!1,u="",d=lm;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=dc(t,1,!1,null,null,o,!1,u,d),t[dn]=i.current,os(t.nodeType===8?t.parentNode:t),new fc(i)},xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=Oh(i),t=t===null?null:t.stateNode,t},xt.flushSync=function(t){return Sr(t)},xt.hydrate=function(t,i,o){if(!vl(i))throw Error(n(200));return _l(null,t,i,!0,o)},xt.hydrateRoot=function(t,i,o){if(!pc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,d=!1,h="",v=lm;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),i=sm(i,null,t,1,o??null,d,!1,h,v),t[dn]=i.current,os(t),u)for(t=0;t<u.length;t++)o=u[t],d=o._getVersion,d=d(o._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[o,d]:i.mutableSourceEagerHydrationData.push(o,d);return new gl(i)},xt.render=function(t,i,o){if(!vl(i))throw Error(n(200));return _l(null,t,i,!1,o)},xt.unmountComponentAtNode=function(t){if(!vl(t))throw Error(n(40));return t._reactRootContainer?(Sr(function(){_l(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1},xt.unstable_batchedUpdates=sc,xt.unstable_renderSubtreeIntoContainer=function(t,i,o,u){if(!vl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return _l(t,i,o,!1,u)},xt.version="18.3.1-next-f1338f8080-20240426",xt}var gm;function zg(){if(gm)return vc.exports;gm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vc.exports=m0(),vc.exports}var vm;function g0(){if(vm)return wl;vm=1;var r=zg();return wl.createRoot=r.createRoot,wl.hydrateRoot=r.hydrateRoot,wl}var v0=g0();const _0=Fg(v0);zg();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function js(){return js=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},js.apply(this,arguments)}var Zn;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Zn||(Zn={}));const _m="popstate";function y0(r){r===void 0&&(r={});function e(s,l){let{pathname:a,search:c,hash:f}=s.location;return Uc("",{pathname:a,search:c,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){return typeof l=="string"?l:Al(l)}return S0(e,n,null,r)}function Be(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function fd(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function w0(){return Math.random().toString(36).substr(2,8)}function ym(r,e){return{usr:r.state,key:r.key,idx:e}}function Uc(r,e,n,s){return n===void 0&&(n=null),js({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Ti(e):e,{state:n,key:e&&e.key||s||w0()})}function Al(r){let{pathname:e="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ti(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function S0(r,e,n,s){s===void 0&&(s={});let{window:l=document.defaultView,v5Compat:a=!1}=s,c=l.history,f=Zn.Pop,p=null,g=w();g==null&&(g=0,c.replaceState(js({},c.state,{idx:g}),""));function w(){return(c.state||{idx:null}).idx}function _(){f=Zn.Pop;let O=w(),J=O==null?null:O-g;g=O,p&&p({action:f,location:D.location,delta:J})}function y(O,J){f=Zn.Push;let A=Uc(D.location,O,J);g=w()+1;let G=ym(A,g),V=D.createHref(A);try{c.pushState(G,"",V)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;l.location.assign(V)}a&&p&&p({action:f,location:D.location,delta:1})}function R(O,J){f=Zn.Replace;let A=Uc(D.location,O,J);g=w();let G=ym(A,g),V=D.createHref(A);c.replaceState(G,"",V),a&&p&&p({action:f,location:D.location,delta:0})}function b(O){let J=l.location.origin!=="null"?l.location.origin:l.location.href,A=typeof O=="string"?O:Al(O);return A=A.replace(/ $/,"%20"),Be(J,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,J)}let D={get action(){return f},get location(){return r(l,c)},listen(O){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(_m,_),p=O,()=>{l.removeEventListener(_m,_),p=null}},createHref(O){return e(l,O)},createURL:b,encodeLocation(O){let J=b(O);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:y,replace:R,go(O){return c.go(O)}};return D}var wm;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(wm||(wm={}));function C0(r,e,n){return n===void 0&&(n="/"),E0(r,e,n)}function E0(r,e,n,s){let l=typeof e=="string"?Ti(e):e,a=yi(l.pathname||"/",n);if(a==null)return null;let c=$g(r);I0(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let g=L0(a);f=O0(c[p],g)}return f}function $g(r,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let l=(a,c,f)=>{let p={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};p.relativePath.startsWith("/")&&(Be(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let g=tr([s,p.relativePath]),w=n.concat(p);a.children&&a.children.length>0&&(Be(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),$g(a.children,e,w,g)),!(a.path==null&&!a.index)&&e.push({path:g,score:A0(g,a.index),routesMeta:w})};return r.forEach((a,c)=>{var f;if(a.path===""||!((f=a.path)!=null&&f.includes("?")))l(a,c);else for(let p of Bg(a.path))l(a,c,p)}),e}function Bg(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,l=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return l?[a,""]:[a];let c=Bg(s.join("/")),f=[];return f.push(...c.map(p=>p===""?a:[a,p].join("/"))),l&&f.push(...c),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function I0(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:b0(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const x0=/^:[\w-]+$/,N0=3,k0=2,T0=1,P0=10,R0=-2,Sm=r=>r==="*";function A0(r,e){let n=r.split("/"),s=n.length;return n.some(Sm)&&(s+=R0),e&&(s+=k0),n.filter(l=>!Sm(l)).reduce((l,a)=>l+(x0.test(a)?N0:a===""?T0:P0),s)}function b0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,l)=>s===e[l])?r[r.length-1]-e[e.length-1]:0}function O0(r,e,n){let{routesMeta:s}=r,l={},a="/",c=[];for(let f=0;f<s.length;++f){let p=s[f],g=f===s.length-1,w=a==="/"?e:e.slice(a.length)||"/",_=zc({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},w),y=p.route;if(!_)return null;Object.assign(l,_.params),c.push({params:l,pathname:tr([a,_.pathname]),pathnameBase:z0(tr([a,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(a=tr([a,_.pathnameBase]))}return c}function zc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=D0(r.path,r.caseSensitive,r.end),l=e.match(n);if(!l)return null;let a=l[0],c=a.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:s.reduce((g,w,_)=>{let{paramName:y,isOptional:R}=w;if(y==="*"){let D=f[_]||"";c=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const b=f[_];return R&&!b?g[y]=void 0:g[y]=(b||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:c,pattern:r}}function D0(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fd(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),s]}function L0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fd(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function yi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}const M0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j0=r=>M0.test(r);function F0(r,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:l=""}=typeof r=="string"?Ti(r):r,a;if(n)if(j0(n))a=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),fd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?a=Cm(n.substring(1),"/"):a=Cm(n,e)}else a=e;return{pathname:a,search:$0(s),hash:B0(l)}}function Cm(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function wc(r,e,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function U0(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pd(r,e){let n=U0(r);return e?n.map((s,l)=>l===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function md(r,e,n,s){s===void 0&&(s=!1);let l;typeof r=="string"?l=Ti(r):(l=js({},r),Be(!l.pathname||!l.pathname.includes("?"),wc("?","pathname","search",l)),Be(!l.pathname||!l.pathname.includes("#"),wc("#","pathname","hash",l)),Be(!l.search||!l.search.includes("#"),wc("#","search","hash",l)));let a=r===""||l.pathname==="",c=a?"/":l.pathname,f;if(c==null)f=n;else{let _=e.length-1;if(!s&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),_-=1;l.pathname=y.join("/")}f=_>=0?e[_]:"/"}let p=F0(l,f),g=c&&c!=="/"&&c.endsWith("/"),w=(a||c===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||w)&&(p.pathname+="/"),p}const tr=r=>r.join("/").replace(/\/\/+/g,"/"),z0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),$0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,B0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function W0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Wg=["post","put","patch","delete"];new Set(Wg);const V0=["get",...Wg];new Set(V0);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fs(){return Fs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Fs.apply(this,arguments)}const na=P.createContext(null),Vg=P.createContext(null),kn=P.createContext(null),ra=P.createContext(null),cr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Hg=P.createContext(null);function H0(r,e){let{relative:n}=e===void 0?{}:e;Pi()||Be(!1);let{basename:s,navigator:l}=P.useContext(kn),{hash:a,pathname:c,search:f}=ia(r,{relative:n}),p=c;return s!=="/"&&(p=c==="/"?s:tr([s,c])),l.createHref({pathname:p,search:f,hash:a})}function Pi(){return P.useContext(ra)!=null}function jr(){return Pi()||Be(!1),P.useContext(ra).location}function Gg(r){P.useContext(kn).static||P.useLayoutEffect(r)}function gd(){let{isDataRoute:r}=P.useContext(cr);return r?iS():G0()}function G0(){Pi()||Be(!1);let r=P.useContext(na),{basename:e,future:n,navigator:s}=P.useContext(kn),{matches:l}=P.useContext(cr),{pathname:a}=jr(),c=JSON.stringify(pd(l,n.v7_relativeSplatPath)),f=P.useRef(!1);return Gg(()=>{f.current=!0}),P.useCallback(function(g,w){if(w===void 0&&(w={}),!f.current)return;if(typeof g=="number"){s.go(g);return}let _=md(g,JSON.parse(c),a,w.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:tr([e,_.pathname])),(w.replace?s.replace:s.push)(_,w.state,w)},[e,s,c,a,r])}function ia(r,e){let{relative:n}=e===void 0?{}:e,{future:s}=P.useContext(kn),{matches:l}=P.useContext(cr),{pathname:a}=jr(),c=JSON.stringify(pd(l,s.v7_relativeSplatPath));return P.useMemo(()=>md(r,JSON.parse(c),a,n==="path"),[r,c,a,n])}function q0(r,e){return K0(r,e)}function K0(r,e,n,s){Pi()||Be(!1);let{navigator:l}=P.useContext(kn),{matches:a}=P.useContext(cr),c=a[a.length-1],f=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let g=jr(),w;if(e){var _;let O=typeof e=="string"?Ti(e):e;p==="/"||(_=O.pathname)!=null&&_.startsWith(p)||Be(!1),w=O}else w=g;let y=w.pathname||"/",R=y;if(p!=="/"){let O=p.replace(/^\//,"").split("/");R="/"+y.replace(/^\//,"").split("/").slice(O.length).join("/")}let b=C0(r,{pathname:R}),D=Z0(b&&b.map(O=>Object.assign({},O,{params:Object.assign({},f,O.params),pathname:tr([p,l.encodeLocation?l.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:tr([p,l.encodeLocation?l.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),a,n,s);return e&&D?P.createElement(ra.Provider,{value:{location:Fs({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Zn.Pop}},D):D}function Q0(){let r=rS(),e=W0(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:l},n):null,null)}const Y0=P.createElement(Q0,null);class J0 extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(cr.Provider,{value:this.props.routeContext},P.createElement(Hg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function X0(r){let{routeContext:e,match:n,children:s}=r,l=P.useContext(na);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(cr.Provider,{value:e},s)}function Z0(r,e,n,s){var l;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var a;if(!n)return null;if(n.errors)r=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let c=r,f=(l=n)==null?void 0:l.errors;if(f!=null){let w=c.findIndex(_=>_.route.id&&(f==null?void 0:f[_.route.id])!==void 0);w>=0||Be(!1),c=c.slice(0,Math.min(c.length,w+1))}let p=!1,g=-1;if(n&&s&&s.v7_partialHydration)for(let w=0;w<c.length;w++){let _=c[w];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=w),_.route.id){let{loaderData:y,errors:R}=n,b=_.route.loader&&y[_.route.id]===void 0&&(!R||R[_.route.id]===void 0);if(_.route.lazy||b){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((w,_,y)=>{let R,b=!1,D=null,O=null;n&&(R=f&&_.route.id?f[_.route.id]:void 0,D=_.route.errorElement||Y0,p&&(g<0&&y===0?(sS("route-fallback"),b=!0,O=null):g===y&&(b=!0,O=_.route.hydrateFallbackElement||null)));let J=e.concat(c.slice(0,y+1)),A=()=>{let G;return R?G=D:b?G=O:_.route.Component?G=P.createElement(_.route.Component,null):_.route.element?G=_.route.element:G=w,P.createElement(X0,{match:_,routeContext:{outlet:w,matches:J,isDataRoute:n!=null},children:G})};return n&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?P.createElement(J0,{location:n.location,revalidation:n.revalidation,component:D,error:R,children:A(),routeContext:{outlet:null,matches:J,isDataRoute:!0}}):A()},null)}var qg=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(qg||{}),Kg=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Kg||{});function eS(r){let e=P.useContext(na);return e||Be(!1),e}function tS(r){let e=P.useContext(Vg);return e||Be(!1),e}function nS(r){let e=P.useContext(cr);return e||Be(!1),e}function Qg(r){let e=nS(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function rS(){var r;let e=P.useContext(Hg),n=tS(),s=Qg();return e!==void 0?e:(r=n.errors)==null?void 0:r[s]}function iS(){let{router:r}=eS(qg.UseNavigateStable),e=Qg(Kg.UseNavigateStable),n=P.useRef(!1);return Gg(()=>{n.current=!0}),P.useCallback(function(l,a){a===void 0&&(a={}),n.current&&(typeof l=="number"?r.navigate(l):r.navigate(l,Fs({fromRouteId:e},a)))},[r,e])}const Em={};function sS(r,e,n){Em[r]||(Em[r]=!0)}function oS(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function lS(r){let{to:e,replace:n,state:s,relative:l}=r;Pi()||Be(!1);let{future:a,static:c}=P.useContext(kn),{matches:f}=P.useContext(cr),{pathname:p}=jr(),g=gd(),w=md(e,pd(f,a.v7_relativeSplatPath),p,l==="path"),_=JSON.stringify(w);return P.useEffect(()=>g(JSON.parse(_),{replace:n,state:s,relative:l}),[g,_,l,n,s]),null}function hi(r){Be(!1)}function aS(r){let{basename:e="/",children:n=null,location:s,navigationType:l=Zn.Pop,navigator:a,static:c=!1,future:f}=r;Pi()&&Be(!1);let p=e.replace(/^\/*/,"/"),g=P.useMemo(()=>({basename:p,navigator:a,static:c,future:Fs({v7_relativeSplatPath:!1},f)}),[p,f,a,c]);typeof s=="string"&&(s=Ti(s));let{pathname:w="/",search:_="",hash:y="",state:R=null,key:b="default"}=s,D=P.useMemo(()=>{let O=yi(w,p);return O==null?null:{location:{pathname:O,search:_,hash:y,state:R,key:b},navigationType:l}},[p,w,_,y,R,b,l]);return D==null?null:P.createElement(kn.Provider,{value:g},P.createElement(ra.Provider,{children:n,value:D}))}function uS(r){let{children:e,location:n}=r;return q0($c(e),n)}new Promise(()=>{});function $c(r,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(r,(s,l)=>{if(!P.isValidElement(s))return;let a=[...e,l];if(s.type===P.Fragment){n.push.apply(n,$c(s.props.children,a));return}s.type!==hi&&Be(!1),!s.props.index||!s.props.children||Be(!1);let c={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=$c(s.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},bl.apply(this,arguments)}function Yg(r,e){if(r==null)return{};var n={},s=Object.keys(r),l,a;for(a=0;a<s.length;a++)l=s[a],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function cS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function dS(r,e){return r.button===0&&(!e||e==="_self")&&!cS(r)}const hS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],pS="6";try{window.__reactRouterVersion=pS}catch{}const mS=P.createContext({isTransitioning:!1}),gS="startTransition",Im=h0[gS];function vS(r){let{basename:e,children:n,future:s,window:l}=r,a=P.useRef();a.current==null&&(a.current=y0({window:l,v5Compat:!0}));let c=a.current,[f,p]=P.useState({action:c.action,location:c.location}),{v7_startTransition:g}=s||{},w=P.useCallback(_=>{g&&Im?Im(()=>p(_)):p(_)},[p,g]);return P.useLayoutEffect(()=>c.listen(w),[c,w]),P.useEffect(()=>oS(s),[s]),P.createElement(aS,{basename:e,children:n,location:f.location,navigationType:f.action,navigator:c,future:s})}const _S=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wS=P.forwardRef(function(e,n){let{onClick:s,relative:l,reloadDocument:a,replace:c,state:f,target:p,to:g,preventScrollReset:w,viewTransition:_}=e,y=Yg(e,hS),{basename:R}=P.useContext(kn),b,D=!1;if(typeof g=="string"&&yS.test(g)&&(b=g,_S))try{let G=new URL(window.location.href),V=g.startsWith("//")?new URL(G.protocol+g):new URL(g),Q=yi(V.pathname,R);V.origin===G.origin&&Q!=null?g=Q+V.search+V.hash:D=!0}catch{}let O=H0(g,{relative:l}),J=CS(g,{replace:c,state:f,target:p,preventScrollReset:w,relative:l,viewTransition:_});function A(G){s&&s(G),G.defaultPrevented||J(G)}return P.createElement("a",bl({},y,{href:b||O,onClick:D||a?s:A,ref:n,target:p}))}),Sl=P.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:l=!1,className:a="",end:c=!1,style:f,to:p,viewTransition:g,children:w}=e,_=Yg(e,fS),y=ia(p,{relative:_.relative}),R=jr(),b=P.useContext(Vg),{navigator:D,basename:O}=P.useContext(kn),J=b!=null&&ES(y)&&g===!0,A=D.encodeLocation?D.encodeLocation(y).pathname:y.pathname,G=R.pathname,V=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;l||(G=G.toLowerCase(),V=V?V.toLowerCase():null,A=A.toLowerCase()),V&&O&&(V=yi(V,O)||V);const Q=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let Z=G===A||!c&&G.startsWith(A)&&G.charAt(Q)==="/",ee=V!=null&&(V===A||!c&&V.startsWith(A)&&V.charAt(A.length)==="/"),he={isActive:Z,isPending:ee,isTransitioning:J},xe=Z?s:void 0,ke;typeof a=="function"?ke=a(he):ke=[a,Z?"active":null,ee?"pending":null,J?"transitioning":null].filter(Boolean).join(" ");let st=typeof f=="function"?f(he):f;return P.createElement(wS,bl({},_,{"aria-current":xe,className:ke,ref:n,style:st,to:p,viewTransition:g}),typeof w=="function"?w(he):w)});var Bc;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Bc||(Bc={}));var xm;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(xm||(xm={}));function SS(r){let e=P.useContext(na);return e||Be(!1),e}function CS(r,e){let{target:n,replace:s,state:l,preventScrollReset:a,relative:c,viewTransition:f}=e===void 0?{}:e,p=gd(),g=jr(),w=ia(r,{relative:c});return P.useCallback(_=>{if(dS(_,n)){_.preventDefault();let y=s!==void 0?s:Al(g)===Al(w);p(r,{replace:y,state:l,preventScrollReset:a,relative:c,viewTransition:f})}},[g,p,w,s,l,n,r,a,c,f])}function ES(r,e){e===void 0&&(e={});let n=P.useContext(mS);n==null&&Be(!1);let{basename:s}=SS(Bc.useViewTransitionState),l=ia(r,{relative:e.relative});if(!n.isTransitioning)return!1;let a=yi(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=yi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return zc(l.pathname,c)!=null||zc(l.pathname,a)!=null}const IS=()=>{};var Nm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W=function(r,e){if(!r)throw Ri(e)},Ri=function(r){return new Error("Firebase Database ("+Jg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},xS=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const a=r[n++];e[s++]=String.fromCharCode((l&31)<<6|a&63)}else if(l>239&&l<365){const a=r[n++],c=r[n++],f=r[n++],p=((l&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const a=r[n++],c=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(a&63)<<6|c&63)}}return e.join("")},vd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const a=r[l],c=l+1<r.length,f=c?r[l+1]:0,p=l+2<r.length,g=p?r[l+2]:0,w=a>>2,_=(a&3)<<4|f>>4;let y=(f&15)<<2|g>>6,R=g&63;p||(R=64,c||(y=64)),s.push(n[w],n[_],n[y],n[R])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Xg(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):xS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const a=n[r.charAt(l++)],f=l<r.length?n[r.charAt(l)]:0;++l;const g=l<r.length?n[r.charAt(l)]:64;++l;const _=l<r.length?n[r.charAt(l)]:64;if(++l,a==null||f==null||g==null||_==null)throw new NS;const y=a<<2|f>>4;if(s.push(y),g!==64){const R=f<<4&240|g>>2;if(s.push(R),_!==64){const b=g<<6&192|_;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class NS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Zg=function(r){const e=Xg(r);return vd.encodeByteArray(e,!0)},Ol=function(r){return Zg(r).replace(/\./g,"")},Dl=function(r){try{return vd.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(r){return ev(void 0,r)}function ev(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!TS(n)||(r[n]=ev(r[n],e[n]));return r}function TS(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=()=>PS().__FIREBASE_DEFAULTS__,AS=()=>{if(typeof process>"u"||typeof Nm>"u")return;const r=Nm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},bS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Dl(r[1]);return e&&JSON.parse(e)},_d=()=>{try{return IS()||RS()||AS()||bS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},tv=r=>{var e,n;return(n=(e=_d())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},OS=r=>{const e=tv(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},nv=()=>{var r;return(r=_d())===null||r===void 0?void 0:r.config},rv=r=>{var e;return(e=_d())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ol(JSON.stringify(n)),Ol(JSON.stringify(c)),""].join(".")}const Rs={};function LS(){const r={prod:[],emulator:[]};for(const e of Object.keys(Rs))Rs[e]?r.emulator.push(e):r.prod.push(e);return r}function MS(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let km=!1;function sv(r,e){if(typeof window>"u"||typeof document>"u"||!Ai(window.location.host)||Rs[r]===e||Rs[r]||km)return;Rs[r]=e;function n(y){return`__firebase__banner__${y}`}const s="__firebase__banner",a=LS().prod.length>0;function c(){const y=document.getElementById(s);y&&y.remove()}function f(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function p(y,R){y.setAttribute("width","24"),y.setAttribute("id",R),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function g(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{km=!0,c()},y}function w(y,R){y.setAttribute("id",R),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function _(){const y=MS(s),R=n("text"),b=document.getElementById(R)||document.createElement("span"),D=n("learnmore"),O=document.getElementById(D)||document.createElement("a"),J=n("preprendIcon"),A=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const G=y.element;f(G),w(O,D);const V=g();p(A,J),G.append(A,b,O,V),document.body.appendChild(G)}a?(b.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function jS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function ov(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function US(){const r=_t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function zS(){return Jg.NODE_ADMIN===!0}function $S(){try{return typeof indexedDB=="object"}catch{return!1}}function BS(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var a;e(((a=l.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="FirebaseError";class dr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=WS,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zs.prototype.create)}}class Zs{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,a=this.errors[e],c=a?VS(a,s):"Error",f=`${this.serviceName}: ${c} (${l}).`;return new dr(l,f,s)}}function VS(r,e){return r.replace(HS,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const HS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(r){return JSON.parse(r)}function Ze(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=function(r){let e={},n={},s={},l="";try{const a=r.split(".");e=Us(Dl(a[0])||""),n=Us(Dl(a[1])||""),l=a[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:l}},GS=function(r){const e=lv(r),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},qS=function(r){const e=lv(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function wi(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function Wc(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ll(r,e,n){const s={};for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=e.call(n,r[l],l,r));return s}function Ar(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const a=r[l],c=e[l];if(Tm(a)&&Tm(c)){if(!Ar(a,c))return!1}else if(a!==c)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Tm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)s[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)s[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const y=s[_-3]^s[_-8]^s[_-14]^s[_-16];s[_]=(y<<1|y>>>31)&4294967295}let l=this.chain_[0],a=this.chain_[1],c=this.chain_[2],f=this.chain_[3],p=this.chain_[4],g,w;for(let _=0;_<80;_++){_<40?_<20?(g=f^a&(c^f),w=1518500249):(g=a^c^f,w=1859775393):_<60?(g=a&c|f&(a|c),w=2400959708):(g=a^c^f,w=3395469782);const y=(l<<5|l>>>27)+g+p+w+s[_]&4294967295;p=f,f=c,c=(a<<30|a>>>2)&4294967295,a=l,l=y}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let l=0;const a=this.buf_;let c=this.inbuf_;for(;l<n;){if(c===0)for(;l<=s;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(a[c]=e.charCodeAt(l),++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}else for(;l<n;)if(a[c]=e[l],++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let a=24;a>=0;a-=8)e[s]=this.chain_[l]>>a&255,++s;return e}}function QS(r,e){const n=new YS(r,e);return n.subscribe.bind(n)}class YS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");JS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Sc),l.error===void 0&&(l.error=Sc),l.complete===void 0&&(l.complete=Sc);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JS(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Sc(){}function sa(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);if(l>=55296&&l<=56319){const a=l-55296;s++,W(s<r.length,"Surrogate pair missing trail surrogate.");const c=r.charCodeAt(s)-56320;l=65536+(a<<10)+c}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},oa=function(r){let e=0;for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r){return r&&r._delegate?r._delegate:r}class br{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Xs;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(l)return null;throw a}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tC(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:l});s.resolve(a)}catch{}}}}clearInstance(e=Nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nr){return this.instances.has(e)}getOptions(e=Nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);s===f&&c.resolve(l)}return l}onInit(e,n){var s;const l=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(l,a);const c=this.instances.get(l);return c&&e(c,l),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:eC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Nr){return this.component?this.component.multipleInstances?e:Nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eC(r){return r===Nr?void 0:r}function tC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Te||(Te={}));const rC={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},iC=Te.INFO,sC={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},oC=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=sC[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wd{constructor(e){this.name=e,this._logLevel=iC,this._logHandler=oC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const lC=(r,e)=>e.some(n=>r instanceof n);let Pm,Rm;function aC(){return Pm||(Pm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uC(){return Rm||(Rm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const av=new WeakMap,Vc=new WeakMap,uv=new WeakMap,Cc=new WeakMap,Sd=new WeakMap;function cC(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",a),r.removeEventListener("error",c)},a=()=>{n(nr(r.result)),l()},c=()=>{s(r.error),l()};r.addEventListener("success",a),r.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&av.set(n,r)}).catch(()=>{}),Sd.set(e,r),e}function dC(r){if(Vc.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",c),r.removeEventListener("abort",c)},a=()=>{n(),l()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",a),r.addEventListener("error",c),r.addEventListener("abort",c)});Vc.set(r,e)}let Hc={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Vc.get(r);if(e==="objectStoreNames")return r.objectStoreNames||uv.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function hC(r){Hc=r(Hc)}function fC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Ec(this),e,...n);return uv.set(s,e.sort?e.sort():[e]),nr(s)}:uC().includes(r)?function(...e){return r.apply(Ec(this),e),nr(av.get(this))}:function(...e){return nr(r.apply(Ec(this),e))}}function pC(r){return typeof r=="function"?fC(r):(r instanceof IDBTransaction&&dC(r),lC(r,aC())?new Proxy(r,Hc):r)}function nr(r){if(r instanceof IDBRequest)return cC(r);if(Cc.has(r))return Cc.get(r);const e=pC(r);return e!==r&&(Cc.set(r,e),Sd.set(e,r)),e}const Ec=r=>Sd.get(r);function mC(r,e,{blocked:n,upgrade:s,blocking:l,terminated:a}={}){const c=indexedDB.open(r,e),f=nr(c);return s&&c.addEventListener("upgradeneeded",p=>{s(nr(c.result),p.oldVersion,p.newVersion,nr(c.transaction),p)}),n&&c.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),f.then(p=>{a&&p.addEventListener("close",()=>a()),l&&p.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const gC=["get","getKey","getAll","getAllKeys","count"],vC=["put","add","delete","clear"],Ic=new Map;function Am(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ic.get(e))return Ic.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=vC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||gC.includes(n)))return;const a=async function(c,...f){const p=this.transaction(c,l?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(f.shift())),(await Promise.all([g[n](...f),l&&p.done]))[0]};return Ic.set(e,a),a}hC(r=>({...r,get:(e,n,s)=>Am(e,n)||r.get(e,n,s),has:(e,n)=>!!Am(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function yC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gc="@firebase/app",bm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new wd("@firebase/app"),wC="@firebase/app-compat",SC="@firebase/analytics-compat",CC="@firebase/analytics",EC="@firebase/app-check-compat",IC="@firebase/app-check",xC="@firebase/auth",NC="@firebase/auth-compat",kC="@firebase/database",TC="@firebase/data-connect",PC="@firebase/database-compat",RC="@firebase/functions",AC="@firebase/functions-compat",bC="@firebase/installations",OC="@firebase/installations-compat",DC="@firebase/messaging",LC="@firebase/messaging-compat",MC="@firebase/performance",jC="@firebase/performance-compat",FC="@firebase/remote-config",UC="@firebase/remote-config-compat",zC="@firebase/storage",$C="@firebase/storage-compat",BC="@firebase/firestore",WC="@firebase/ai",VC="@firebase/firestore-compat",HC="firebase",GC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="[DEFAULT]",qC={[Gc]:"fire-core",[wC]:"fire-core-compat",[CC]:"fire-analytics",[SC]:"fire-analytics-compat",[IC]:"fire-app-check",[EC]:"fire-app-check-compat",[xC]:"fire-auth",[NC]:"fire-auth-compat",[kC]:"fire-rtdb",[TC]:"fire-data-connect",[PC]:"fire-rtdb-compat",[RC]:"fire-fn",[AC]:"fire-fn-compat",[bC]:"fire-iid",[OC]:"fire-iid-compat",[DC]:"fire-fcm",[LC]:"fire-fcm-compat",[MC]:"fire-perf",[jC]:"fire-perf-compat",[FC]:"fire-rc",[UC]:"fire-rc-compat",[zC]:"fire-gcs",[$C]:"fire-gcs-compat",[BC]:"fire-fst",[VC]:"fire-fst-compat",[WC]:"fire-vertex","fire-js":"fire-js",[HC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=new Map,KC=new Map,Kc=new Map;function Om(r,e){try{r.container.addComponent(e)}catch(n){In.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Si(r){const e=r.name;if(Kc.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;Kc.set(e,r);for(const n of Ml.values())Om(n,r);for(const n of KC.values())Om(n,r);return!0}function Cd(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Kt(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new Zs("app","Firebase",QC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=GC;function cv(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:qc,automaticDataCollectionEnabled:!0},e),l=s.name;if(typeof l!="string"||!l)throw rr.create("bad-app-name",{appName:String(l)});if(n||(n=nv()),!n)throw rr.create("no-options");const a=Ml.get(l);if(a){if(Ar(n,a.options)&&Ar(s,a.config))return a;throw rr.create("duplicate-app",{appName:l})}const c=new nC(l);for(const p of Kc.values())c.addComponent(p);const f=new YC(n,s,c);return Ml.set(l,f),f}function dv(r=qc){const e=Ml.get(r);if(!e&&r===qc&&nv())return cv();if(!e)throw rr.create("no-app",{appName:r});return e}function ir(r,e,n){var s;let l=(s=qC[r])!==null&&s!==void 0?s:r;n&&(l+=`-${n}`);const a=l.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${l}" with version "${e}":`];a&&f.push(`library name "${l}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(f.join(" "));return}Si(new br(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="firebase-heartbeat-database",XC=1,zs="firebase-heartbeat-store";let xc=null;function hv(){return xc||(xc=mC(JC,XC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(zs)}catch(n){console.warn(n)}}}}).catch(r=>{throw rr.create("idb-open",{originalErrorMessage:r.message})})),xc}async function ZC(r){try{const n=(await hv()).transaction(zs),s=await n.objectStore(zs).get(fv(r));return await n.done,s}catch(e){if(e instanceof dr)In.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});In.warn(n.message)}}}async function Dm(r,e){try{const s=(await hv()).transaction(zs,"readwrite");await s.objectStore(zs).put(e,fv(r)),await s.done}catch(n){if(n instanceof dr)In.warn(n.message);else{const s=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});In.warn(s.message)}}}function fv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=1024,tE=30;class nE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Lm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:l}),this._heartbeatsCache.heartbeats.length>tE){const c=sE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){In.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lm(),{heartbeatsToSend:s,unsentEntries:l}=rE(this._heartbeatsCache.heartbeats),a=Ol(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return In.warn(n),""}}}function Lm(){return new Date().toISOString().substring(0,10)}function rE(r,e=eE){const n=[];let s=r.slice();for(const l of r){const a=n.find(c=>c.agent===l.agent);if(a){if(a.dates.push(l.date),Mm(n)>e){a.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Mm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class iE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $S()?BS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Dm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Dm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function Mm(r){return Ol(JSON.stringify({version:2,heartbeats:r})).length}function sE(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(r){Si(new br("platform-logger",e=>new _C(e),"PRIVATE")),Si(new br("heartbeat",e=>new nE(e),"PRIVATE")),ir(Gc,bm,r),ir(Gc,bm,"esm2017"),ir("fire-js","")}oE("");function Ed(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n}function pv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lE=pv,mv=new Zs("auth","Firebase",pv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new wd("@firebase/auth");function aE(r,...e){jl.logLevel<=Te.WARN&&jl.warn(`Auth (${Oi}): ${r}`,...e)}function Nl(r,...e){jl.logLevel<=Te.ERROR&&jl.error(`Auth (${Oi}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(r,...e){throw xd(r,...e)}function Xt(r,...e){return xd(r,...e)}function Id(r,e,n){const s=Object.assign(Object.assign({},lE()),{[e]:n});return new Zs("auth","Firebase",s).create(e,{appName:r.name})}function Rr(r){return Id(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uE(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&un(r,"argument-error"),Id(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xd(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return mv.create(r,...e)}function de(r,e,...n){if(!r)throw xd(e,...n)}function wn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Nl(e),new Error(e)}function xn(r,e){r||wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function cE(){return jm()==="http:"||jm()==="https:"}function jm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cE()||FS()||"connection"in navigator)?navigator.onLine:!0}function hE(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){this.shortDelay=e,this.longDelay=n,xn(n>e,"Short delay should be less than long delay!"),this.isMobile=yd()||ov()}get(){return dE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(r,e){xn(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mE=new eo(3e4,6e4);function kd(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Di(r,e,n,s,l={}){return vv(r,l,async()=>{let a={},c={};s&&(e==="GET"?c=s:a={body:JSON.stringify(s)});const f=bi(Object.assign({key:r.config.apiKey},c)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},a);return jS()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Ai(r.emulatorConfig.host)&&(g.credentials="include"),gv.fetch()(await _v(r,r.config.apiHost,n,f),g)})}async function vv(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},fE),e);try{const l=new vE(r),a=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Cl(r,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const f=a.ok?c.errorMessage:c.error.message,[p,g]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cl(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Cl(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw Cl(r,"user-disabled",c);const w=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Id(r,w,g);un(r,w)}}catch(l){if(l instanceof dr)throw l;un(r,"network-request-failed",{message:String(l)})}}async function gE(r,e,n,s,l={}){const a=await Di(r,e,n,s,l);return"mfaPendingCredential"in a&&un(r,"multi-factor-auth-required",{_serverResponse:a}),a}async function _v(r,e,n,s){const l=`${e}${n}?${s}`,a=r,c=a.config.emulator?Nd(r.config,l):`${r.config.apiScheme}://${l}`;return pE.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}class vE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Xt(this.auth,"network-request-failed")),mE.get())})}}function Cl(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Xt(r,e,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _E(r,e){return Di(r,"POST","/v1/accounts:delete",e)}async function Fl(r,e){return Di(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yE(r,e=!1){const n=yt(r),s=await n.getIdToken(e),l=Td(s);de(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const a=typeof l.firebase=="object"?l.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:l,token:s,authTime:As(Nc(l.auth_time)),issuedAtTime:As(Nc(l.iat)),expirationTime:As(Nc(l.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Nc(r){return Number(r)*1e3}function Td(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Nl("JWT malformed, contained fewer than 3 sections"),null;try{const l=Dl(n);return l?JSON.parse(l):(Nl("Failed to decode base64 JWT payload"),null)}catch(l){return Nl("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Fm(r){const e=Td(r);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof dr&&wE(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function wE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=As(this.lastLoginAt),this.creationTime=As(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(r){var e;const n=r.auth,s=await r.getIdToken(),l=await $s(r,Fl(n,{idToken:s}));de(l==null?void 0:l.users.length,n,"internal-error");const a=l.users[0];r._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?yv(a.providerUserInfo):[],f=EE(r.providerData,c),p=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(f!=null&&f.length),w=p?g:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:f,metadata:new Yc(a.createdAt,a.lastLoginAt),isAnonymous:w};Object.assign(r,_)}async function CE(r){const e=yt(r);await Ul(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EE(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function yv(r){return r.map(e=>{var{providerId:n}=e,s=Ed(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(r,e){const n=await vv(r,{},async()=>{const s=bi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:a}=r.config,c=await _v(r,l,"/v1/token",`key=${a}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return r.emulatorConfig&&Ai(r.emulatorConfig.host)&&(p.credentials="include"),gv.fetch()(c,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xE(r,e){return Di(r,"POST","/v2/accounts:revokeToken",kd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=Fm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:a}=await IE(e,n);this.updateTokensAndExpiration(s,l,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:a}=n,c=new pi;return s&&(de(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),l&&(de(typeof l=="string","internal-error",{appName:e}),c.accessToken=l),a&&(de(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pi,this.toJSON())}_performRefresh(){return wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(r,e){de(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Yt{constructor(e){var{uid:n,auth:s,stsTokenManager:l}=e,a=Ed(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Yc(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await $s(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yE(this,e)}reload(){return CE(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ul(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kt(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await $s(this,_E(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,l,a,c,f,p,g,w;const _=(s=n.displayName)!==null&&s!==void 0?s:void 0,y=(l=n.email)!==null&&l!==void 0?l:void 0,R=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(c=n.photoURL)!==null&&c!==void 0?c:void 0,D=(f=n.tenantId)!==null&&f!==void 0?f:void 0,O=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,J=(g=n.createdAt)!==null&&g!==void 0?g:void 0,A=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:G,emailVerified:V,isAnonymous:Q,providerData:Z,stsTokenManager:ee}=n;de(G&&ee,e,"internal-error");const he=pi.fromJSON(this.name,ee);de(typeof G=="string",e,"internal-error"),Qn(_,e.name),Qn(y,e.name),de(typeof V=="boolean",e,"internal-error"),de(typeof Q=="boolean",e,"internal-error"),Qn(R,e.name),Qn(b,e.name),Qn(D,e.name),Qn(O,e.name),Qn(J,e.name),Qn(A,e.name);const xe=new Yt({uid:G,auth:e,email:y,emailVerified:V,displayName:_,isAnonymous:Q,photoURL:b,phoneNumber:R,tenantId:D,stsTokenManager:he,createdAt:J,lastLoginAt:A});return Z&&Array.isArray(Z)&&(xe.providerData=Z.map(ke=>Object.assign({},ke))),O&&(xe._redirectEventId=O),xe}static async _fromIdTokenResponse(e,n,s=!1){const l=new pi;l.updateFromServerResponse(n);const a=new Yt({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Ul(a),a}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];de(l.localId!==void 0,"internal-error");const a=l.providerUserInfo!==void 0?yv(l.providerUserInfo):[],c=!(l.email&&l.passwordHash)&&!(a!=null&&a.length),f=new pi;f.updateFromIdToken(s);const p=new Yt({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:a,metadata:new Yc(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=new Map;function Sn(r){xn(r instanceof Function,"Expected a class definition");let e=Um.get(r);return e?(xn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Um.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wv.type="NONE";const zm=wv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(r,e,n){return`firebase:${r}:${e}:${n}`}class mi{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:a}=this.auth;this.fullUserKey=kl(this.userKey,l.apiKey,a),this.fullPersistenceKey=kl("persistence",l.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fl(this.auth,{idToken:e}).catch(()=>{});return n?Yt._fromGetAccountInfoResponse(this.auth,n,e):null}return Yt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new mi(Sn(zm),e,s);const l=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=l[0]||Sn(zm);const c=kl(s,e.config.apiKey,e.name);let f=null;for(const g of n)try{const w=await g._get(c);if(w){let _;if(typeof w=="string"){const y=await Fl(e,{idToken:w}).catch(()=>{});if(!y)break;_=await Yt._fromGetAccountInfoResponse(e,y,w)}else _=Yt._fromJSON(e,w);g!==a&&(f=_),a=g;break}}catch{}const p=l.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new mi(a,e,s):(a=p[0],f&&await a._set(c,f.toJSON()),await Promise.all(n.map(async g=>{if(g!==a)try{await g._remove(c)}catch{}})),new mi(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Iv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nv(e))return"Blackberry";if(kv(e))return"Webos";if(Cv(e))return"Safari";if((e.includes("chrome/")||Ev(e))&&!e.includes("edge/"))return"Chrome";if(xv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Sv(r=_t()){return/firefox\//i.test(r)}function Cv(r=_t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ev(r=_t()){return/crios\//i.test(r)}function Iv(r=_t()){return/iemobile/i.test(r)}function xv(r=_t()){return/android/i.test(r)}function Nv(r=_t()){return/blackberry/i.test(r)}function kv(r=_t()){return/webos/i.test(r)}function Pd(r=_t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function NE(r=_t()){var e;return Pd(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kE(){return US()&&document.documentMode===10}function Tv(r=_t()){return Pd(r)||xv(r)||kv(r)||Nv(r)||/windows phone/i.test(r)||Iv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(r,e=[]){let n;switch(r){case"Browser":n=$m(_t());break;case"Worker":n=`${$m(_t())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((c,f)=>{try{const p=e(a);c(p)}catch(p){f(p)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PE(r,e={}){return Di(r,"GET","/v2/passwordPolicy",kd(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=6;class AE{constructor(e){var n,s,l,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:RE,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,l,a,c,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(l=p.containsLowercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bm(this),this.idTokenSubscription=new Bm(this),this.beforeStateQueue=new TE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sn(n)),this._initializationPromise=this.queue(async()=>{var s,l,a;if(!this._deleted&&(this.persistenceManager=await mi.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fl(this,{idToken:e}),s=await Yt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kt(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=l==null?void 0:l._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(l=p.user,a=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(l)}catch(c){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ul(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kt(this.app))return Promise.reject(Rr(this));const n=e?yt(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kt(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kt(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PE(this),n=new AE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zs("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await xE(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sn(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await mi.create(this,[Sn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(f,this,"internal-error"),f.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,l);return()=>{c=!0,p()}}else{const p=e.addObserver(n);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var e;if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&aE(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function la(r){return yt(r)}class Bm{constructor(e){this.auth=e,this.observer=null,this.addObserver=QS(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OE(r){Rd=r}function DE(r){return Rd.loadJS(r)}function LE(){return Rd.gapiScript}function ME(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(r,e){const n=Cd(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),a=n.getOptions();if(Ar(a,e??{}))return l;un(l,"already-initialized")}return n.initialize({options:e})}function FE(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Sn);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function UE(r,e,n){const s=la(r);de(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,a=Rv(e),{host:c,port:f}=zE(e),p=f===null?"":`:${f}`,g={url:`${a}//${c}${p}/`},w=Object.freeze({host:c,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){de(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),de(Ar(g,s.config.emulator)&&Ar(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,Ai(c)?(iv(`${a}//${c}${p}`),sv("Auth",!0)):$E()}function Rv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function zE(r){const e=Rv(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const a=l[1];return{host:a,port:Wm(s.substr(a.length+1))}}else{const[a,c]=s.split(":");return{host:a,port:Wm(c)}}}function Wm(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function $E(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wn("not implemented")}_getIdTokenResponse(e){return wn("not implemented")}_linkToIdToken(e,n){return wn("not implemented")}_getReauthenticationResolver(e){return wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gi(r,e){return gE(r,"POST","/v1/accounts:signInWithIdp",kd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="http://localhost";class Or extends Av{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Or(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l}=n,a=Ed(n,["providerId","signInMethod"]);if(!s||!l)return null;const c=new Or(s,l);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return gi(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,gi(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gi(e,n)}buildRequest(){const e={requestUri:BE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Ad{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends to{constructor(){super("facebook.com")}static credential(e){return Or._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yn.credential(e.oauthAccessToken)}catch{return null}}}Yn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn extends to{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Or._fromParams({providerId:yn.PROVIDER_ID,signInMethod:yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yn.credentialFromTaggedObject(e)}static credentialFromError(e){return yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return yn.credential(n,s)}catch{return null}}}yn.GOOGLE_SIGN_IN_METHOD="google.com";yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends to{constructor(){super("github.com")}static credential(e){return Or._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jn.credential(e.oauthAccessToken)}catch{return null}}}Jn.GITHUB_SIGN_IN_METHOD="github.com";Jn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends to{constructor(){super("twitter.com")}static credential(e,n){return Or._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Xn.credential(n,s)}catch{return null}}}Xn.TWITTER_SIGN_IN_METHOD="twitter.com";Xn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const a=await Yt._fromIdTokenResponse(e,s,l),c=Vm(s);return new Ci({user:a,providerId:c,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=Vm(s);return new Ci({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function Vm(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl extends dr{constructor(e,n,s,l){var a;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,zl.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new zl(e,n,s,l)}}function bv(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?zl._fromErrorAndOperation(r,a,e,s):a})}async function WE(r,e,n=!1){const s=await $s(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Ci._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VE(r,e,n=!1){const{auth:s}=r;if(Kt(s.app))return Promise.reject(Rr(s));const l="reauthenticate";try{const a=await $s(r,bv(s,l,e,r),n);de(a.idToken,s,"internal-error");const c=Td(a.idToken);de(c,s,"internal-error");const{sub:f}=c;return de(r.uid===f,s,"user-mismatch"),Ci._forOperation(r,l,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&un(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(r,e,n=!1){if(Kt(r.app))return Promise.reject(Rr(r));const s="signIn",l=await bv(r,s,e),a=await Ci._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(a.user),a}function GE(r,e,n,s){return yt(r).onIdTokenChanged(e,n,s)}function qE(r,e,n){return yt(r).beforeAuthStateChanged(e,n)}function KE(r,e,n,s){return yt(r).onAuthStateChanged(e,n,s)}function QE(r){return yt(r).signOut()}const $l="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($l,"1"),this.storage.removeItem($l),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=1e3,JE=10;class Dv extends Ov{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const c=this.storage.getItem(s);!n&&this.localCache[s]===c||this.notifyListeners(s,c)},a=this.storage.getItem(s);kE()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,JE):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},YE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dv.type="LOCAL";const XE=Dv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends Ov{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Lv.type="SESSION";const Mv=Lv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new aa(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:a}=n.data,c=this.handlersMap[l];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(c).map(async g=>g(n.origin,a)),p=await ZE(f);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}aa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let a,c;return new Promise((f,p)=>{const g=bd("",20);l.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:l,onMessage(_){const y=_;if(y.data.eventId===g)switch(y.data.status){case"ack":clearTimeout(w),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(y.data.response);break;default:clearTimeout(w),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),l.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[l.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function tI(r){an().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function nI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function iI(){return jv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="firebaseLocalStorageDb",sI=1,Bl="firebaseLocalStorage",Uv="fbase_key";class no{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ua(r,e){return r.transaction([Bl],e?"readwrite":"readonly").objectStore(Bl)}function oI(){const r=indexedDB.deleteDatabase(Fv);return new no(r).toPromise()}function Jc(){const r=indexedDB.open(Fv,sI);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Bl,{keyPath:Uv})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Bl)?e(s):(s.close(),await oI(),e(await Jc()))})})}async function Hm(r,e,n){const s=ua(r,!0).put({[Uv]:e,value:n});return new no(s).toPromise()}async function lI(r,e){const n=ua(r,!1).get(e),s=await new no(n).toPromise();return s===void 0?null:s.value}function Gm(r,e){const n=ua(r,!0).delete(e);return new no(n).toPromise()}const aI=800,uI=3;class zv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>uI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=aa._getInstance(iI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nI(),!this.activeServiceWorker)return;this.sender=new eI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jc();return await Hm(e,$l,"1"),await Gm(e,$l),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hm(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>lI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const a=ua(l,!1).getAll();return new no(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:a}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(a)&&(this.notifyListeners(l,a),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zv.type="LOCAL";const cI=zv;new eo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(r,e){return e?Sn(e):(de(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends Av{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dI(r){return HE(r.auth,new Od(r),r.bypassAuthState)}function hI(r){const{auth:e,user:n}=r;return de(n,e,"internal-error"),VE(n,new Od(r),r.bypassAuthState)}async function fI(r){const{auth:e,user:n}=r;return de(n,e,"internal-error"),WE(n,new Od(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n,s,l,a=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:a,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dI;case"linkViaPopup":case"linkViaRedirect":return fI;case"reauthViaPopup":case"reauthViaRedirect":return hI;default:un(this.auth,"internal-error")}}resolve(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new eo(2e3,1e4);async function mI(r,e,n){if(Kt(r.app))return Promise.reject(Xt(r,"operation-not-supported-in-this-environment"));const s=la(r);uE(r,e,Ad);const l=$v(s,n);return new Tr(s,"signInViaPopup",e,l).executeNotNull()}class Tr extends Bv{constructor(e,n,s,l,a){super(e,n,l,a),this.provider=s,this.authWindow=null,this.pollId=null,Tr.currentPopupAction&&Tr.currentPopupAction.cancel(),Tr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){xn(this.filter.length===1,"Popup operations only handle one event");const e=bd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pI.get())};e()}}Tr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="pendingRedirect",Tl=new Map;class vI extends Bv{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Tl.get(this.auth._key());if(!e){try{const s=await _I(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Tl.set(this.auth._key(),e)}return this.bypassAuthState||Tl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _I(r,e){const n=SI(e),s=wI(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function yI(r,e){Tl.set(r._key(),e)}function wI(r){return Sn(r._redirectPersistence)}function SI(r){return kl(gI,r.config.apiKey,r.name)}async function CI(r,e,n=!1){if(Kt(r.app))return Promise.reject(Rr(r));const s=la(r),l=$v(s,e),c=await new vI(s,l,n).execute();return c&&!n&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=600*1e3;class II{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Wv(e)){const l=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Xt(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EI&&this.cachedEventUids.clear(),this.cachedEventUids.has(qm(e))}saveEventToCache(e){this.cachedEventUids.add(qm(e)),this.lastProcessedEventTime=Date.now()}}function qm(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Wv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(r,e={}){return Di(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TI=/^https?/;async function PI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await NI(r);for(const n of e)try{if(RI(n))return}catch{}un(r,"unauthorized-domain")}function RI(r){const e=Qc(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===s}if(!TI.test(n))return!1;if(kI.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=new eo(3e4,6e4);function Km(){const r=an().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function bI(r){return new Promise((e,n)=>{var s,l,a;function c(){Km(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Km(),n(Xt(r,"network-request-failed"))},timeout:AI.get()})}if(!((l=(s=an().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((a=an().gapi)===null||a===void 0)&&a.load)c();else{const f=ME("iframefcb");return an()[f]=()=>{gapi.load?c():n(Xt(r,"network-request-failed"))},DE(`${LE()}?onload=${f}`).catch(p=>n(p))}}).catch(e=>{throw Pl=null,e})}let Pl=null;function OI(r){return Pl=Pl||bI(r),Pl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=new eo(5e3,15e3),LI="__/auth/iframe",MI="emulator/auth/iframe",jI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UI(r){const e=r.config;de(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Nd(e,MI):`https://${r.config.authDomain}/${LI}`,s={apiKey:e.apiKey,appName:r.name,v:Oi},l=FI.get(r.config.apiHost);l&&(s.eid=l);const a=r._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${bi(s).slice(1)}`}async function zI(r){const e=await OI(r),n=an().gapi;return de(n,r,"internal-error"),e.open({where:document.body,url:UI(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jI,dontclear:!0},s=>new Promise(async(l,a)=>{await s.restyle({setHideOnLeave:!1});const c=Xt(r,"network-request-failed"),f=an().setTimeout(()=>{a(c)},DI.get());function p(){an().clearTimeout(f),l(s)}s.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BI=500,WI=600,VI="_blank",HI="http://localhost";class Qm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GI(r,e,n,s=BI,l=WI){const a=Math.max((window.screen.availHeight-l)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p=Object.assign(Object.assign({},$I),{width:s.toString(),height:l.toString(),top:a,left:c}),g=_t().toLowerCase();n&&(f=Ev(g)?VI:n),Sv(g)&&(e=e||HI,p.scrollbars="yes");const w=Object.entries(p).reduce((y,[R,b])=>`${y}${R}=${b},`,"");if(NE(g)&&f!=="_self")return qI(e||"",f),new Qm(null);const _=window.open(e||"",f,w);de(_,r,"popup-blocked");try{_.focus()}catch{}return new Qm(_)}function qI(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="__/auth/handler",QI="emulator/auth/handler",YI=encodeURIComponent("fac");async function Ym(r,e,n,s,l,a){de(r.config.authDomain,r,"auth-domain-config-required"),de(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Oi,eventId:l};if(e instanceof Ad){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",Wc(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,_]of Object.entries({}))c[w]=_}if(e instanceof to){const w=e.getScopes().filter(_=>_!=="");w.length>0&&(c.scopes=w.join(","))}r.tenantId&&(c.tid=r.tenantId);const f=c;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const p=await r._getAppCheckToken(),g=p?`#${YI}=${encodeURIComponent(p)}`:"";return`${JI(r)}?${bi(f).slice(1)}${g}`}function JI({config:r}){return r.emulator?Nd(r,QI):`https://${r.authDomain}/${KI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="webStorageSupport";class XI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mv,this._completeRedirectFn=CI,this._overrideRedirectResult=yI}async _openPopup(e,n,s,l){var a;xn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await Ym(e,n,s,Qc(),l);return GI(e,c,bd())}async _openRedirect(e,n,s,l){await this._originValidation(e);const a=await Ym(e,n,s,Qc(),l);return tI(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:a}=this.eventManagers[n];return l?Promise.resolve(l):(xn(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await zI(e),s=new II(e);return n.register("authEvent",l=>(de(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kc,{type:kc},l=>{var a;const c=(a=l==null?void 0:l[0])===null||a===void 0?void 0:a[kc];c!==void 0&&n(!!c),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Tv()||Cv()||Pd()}}const ZI=XI;var Jm="@firebase/auth",Xm="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nx(r){Si(new br("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;de(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pv(r)},g=new bE(s,l,a,p);return FE(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Si(new br("auth-internal",e=>{const n=la(e.getProvider("auth").getImmediate());return(s=>new ex(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(Jm,Xm,tx(r)),ir(Jm,Xm,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=300,ix=rv("authIdTokenMaxAge")||rx;let Zm=null;const sx=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>ix)return;const l=n==null?void 0:n.token;Zm!==l&&(Zm=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function ox(r=dv()){const e=Cd(r,"auth");if(e.isInitialized())return e.getImmediate();const n=jE(r,{popupRedirectResolver:ZI,persistence:[cI,XE,Mv]}),s=rv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const c=sx(a.toString());qE(n,c,()=>c(n.currentUser)),GE(n,f=>c(f))}}const l=tv("auth");return l&&UE(n,`http://${l}`),n}function lx(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}OE({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const a=Xt("internal-error");a.customData=l,n(a)},s.type="text/javascript",s.charset="UTF-8",lx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nx("Browser");var ax="firebase",ux="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(ax,ux,"app");var eg={};const tg="@firebase/database",ng="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vv="";function cx(r){Vv=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ze(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Us(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return cn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dx(e)}}catch{}return new hx},Pr=Hv("localStorage"),fx=Hv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new wd("@firebase/database"),px=(function(){let r=1;return function(){return r++}})(),Gv=function(r){const e=XS(r),n=new KS;n.update(e);const s=n.digest();return vd.encodeByteArray(s)},ro=function(...r){let e="";for(let n=0;n<r.length;n++){const s=r[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=ro.apply(null,s):typeof s=="object"?e+=Ze(s):e+=s,e+=" "}return e};let bs=null,rg=!0;const mx=function(r,e){W(!0,"Can't turn on custom loggers persistently."),vi.logLevel=Te.VERBOSE,bs=vi.log.bind(vi)},at=function(...r){if(rg===!0&&(rg=!1,bs===null&&fx.get("logging_enabled")===!0&&mx()),bs){const e=ro.apply(null,r);bs(e)}},io=function(r){return function(...e){at(r,...e)}},Xc=function(...r){const e="FIREBASE INTERNAL ERROR: "+ro(...r);vi.error(e)},Nn=function(...r){const e=`FIREBASE FATAL ERROR: ${ro(...r)}`;throw vi.error(e),new Error(e)},vt=function(...r){const e="FIREBASE WARNING: "+ro(...r);vi.warn(e)},gx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Dd=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},vx=function(r){if(document.readyState==="complete")r();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ei="[MIN_NAME]",Dr="[MAX_NAME]",Fr=function(r,e){if(r===e)return 0;if(r===Ei||e===Dr)return-1;if(e===Ei||r===Dr)return 1;{const n=ig(r),s=ig(e);return n!==null?s!==null?n-s===0?r.length-e.length:n-s:-1:s!==null?1:r<e?-1:1}},_x=function(r,e){return r===e?0:r<e?-1:1},xs=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+Ze(e))},Ld=function(r){if(typeof r!="object"||r===null)return Ze(r);const e=[];for(const s in r)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Ze(e[s]),n+=":",n+=Ld(r[e[s]]);return n+="}",n},qv=function(r,e){const n=r.length;if(n<=e)return[r];const s=[];for(let l=0;l<n;l+=e)l+e>n?s.push(r.substring(l,n)):s.push(r.substring(l,l+e));return s};function ut(r,e){for(const n in r)r.hasOwnProperty(n)&&e(n,r[n])}const Kv=function(r){W(!Dd(r),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let l,a,c,f,p;r===0?(a=0,c=0,l=1/r===-1/0?1:0):(l=r<0,r=Math.abs(r),r>=Math.pow(2,1-s)?(f=Math.min(Math.floor(Math.log(r)/Math.LN2),s),a=f+s,c=Math.round(r*Math.pow(2,n-f)-Math.pow(2,n))):(a=0,c=Math.round(r/Math.pow(2,1-s-n))));const g=[];for(p=n;p;p-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(p=e;p;p-=1)g.push(a%2?1:0),a=Math.floor(a/2);g.push(l?1:0),g.reverse();const w=g.join("");let _="";for(p=0;p<64;p+=8){let y=parseInt(w.substr(p,8),2).toString(16);y.length===1&&(y="0"+y),_=_+y}return _.toLowerCase()},yx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},wx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Sx(r,e){let n="Unknown Error";r==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?n="Client doesn't have permission to access the desired data.":r==="unavailable"&&(n="The service is unavailable");const s=new Error(r+" at "+e._path.toString()+": "+n);return s.code=r.toUpperCase(),s}const Cx=new RegExp("^-?(0*)\\d{1,10}$"),Ex=-2147483648,Ix=2147483647,ig=function(r){if(Cx.test(r)){const e=Number(r);if(e>=Ex&&e<=Ix)return e}return null},Li=function(r){try{r()}catch(e){setTimeout(()=>{const n=e.stack||"";throw vt("Exception was thrown by user callback.",n),e},Math.floor(0))}},xx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Os=function(r,e){const n=setTimeout(r,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Kt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){vt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(at("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vt(e)}}class Rl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Rl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="5",Qv="v",Yv="s",Jv="r",Xv="f",Zv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,e_="ls",t_="p",Zc="ac",n_="websocket",r_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n,s,l,a=!1,c="",f=!1,p=!1,g=null){this.secure=n,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Pr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Tx(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function s_(r,e,n){W(typeof e=="string","typeof type must == string"),W(typeof n=="object","typeof params must == object");let s;if(e===n_)s=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===r_)s=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Tx(r)&&(n.ns=r.namespace);const l=[];return ut(n,(a,c)=>{l.push(a+"="+c)}),s+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.counters_={}}incrementCounter(e,n=1){cn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return kS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc={},Pc={};function jd(r){const e=r.toString();return Tc[e]||(Tc[e]=new Px),Tc[e]}function Rx(r,e){const n=r.toString();return Pc[n]||(Pc[n]=e()),Pc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&Li(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="start",bx="close",Ox="pLPCommand",Dx="pRTLPCB",o_="id",l_="pw",a_="ser",Lx="cb",Mx="seg",jx="ts",Fx="d",Ux="dframe",u_=1870,c_=30,zx=u_-c_,$x=25e3,Bx=3e4;class fi{constructor(e,n,s,l,a,c,f){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=l,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=io(e),this.stats_=jd(n),this.urlFn=p=>(this.appCheckToken&&(p[Zc]=this.appCheckToken),s_(n,r_,p))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ax(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Bx)),vx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Fd((...a)=>{const[c,f,p,g,w]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===sg)this.id=f,this.password=p;else if(c===bx)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const s={};s[sg]="t",s[a_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[Lx]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Qv]=Md,this.transportSessionId&&(s[Yv]=this.transportSessionId),this.lastSessionId&&(s[e_]=this.lastSessionId),this.applicationId&&(s[t_]=this.applicationId),this.appCheckToken&&(s[Zc]=this.appCheckToken),typeof location<"u"&&location.hostname&&Zv.test(location.hostname)&&(s[Jv]=Xv);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fi.forceAllow_=!0}static forceDisallow(){fi.forceDisallow_=!0}static isAvailable(){return fi.forceAllow_?!0:!fi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!yx()&&!wx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ze(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Zg(n),l=qv(s,zx);for(let a=0;a<l.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[Ux]="t",s[o_]=e,s[l_]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ze(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Fd{constructor(e,n,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=px(),window[Ox+this.uniqueCallbackIdentifier]=e,window[Dx+this.uniqueCallbackIdentifier]=n,this.myIFrame=Fd.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){at("frame writing exception"),f.stack&&at(f.stack),at(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||at("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[o_]=this.myID,e[l_]=this.myPW,e[a_]=this.currentSerial;let n=this.urlFn(e),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+c_+s.length<=u_;){const c=this.pendingSegs.shift();s=s+"&"+Mx+l+"="+c.seg+"&"+jx+l+"="+c.ts+"&"+Fx+l+"="+c.d,l++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(s,Math.floor($x)),a=()=>{clearTimeout(l),s()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{at("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=16384,Vx=45e3;let Wl=null;typeof MozWebSocket<"u"?Wl=MozWebSocket:typeof WebSocket<"u"&&(Wl=WebSocket);class Qt{constructor(e,n,s,l,a,c,f){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=io(this.connId),this.stats_=jd(n),this.connURL=Qt.connectionURL_(n,c,f,l,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,l,a){const c={};return c[Qv]=Md,typeof location<"u"&&location.hostname&&Zv.test(location.hostname)&&(c[Jv]=Xv),n&&(c[Yv]=n),s&&(c[e_]=s),l&&(c[Zc]=l),a&&(c[t_]=a),s_(e,n_,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pr.set("previous_websocket_failure",!0);try{let s;zS(),this.mySock=new Wl(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){Qt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Wl!==null&&!Qt.forceDisallow_}static previouslyFailed(){return Pr.isInMemoryStorage||Pr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Pr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Us(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Ze(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=qv(n,Wx);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Vx))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qt.responsesRequiredToBeHealthy=2;Qt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{static get ALL_TRANSPORTS(){return[fi,Qt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Qt&&Qt.isAvailable();let s=n&&!Qt.previouslyFailed();if(e.webSocketOnly&&(n||vt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Qt];else{const l=this.transports_=[];for(const a of Bs.ALL_TRANSPORTS)a&&a.isAvailable()&&l.push(a);Bs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Bs.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=6e4,Gx=5e3,qx=10*1024,Kx=100*1024,Rc="t",og="d",Qx="s",lg="r",Yx="e",ag="o",ug="a",cg="n",dg="p",Jx="h";class Xx{constructor(e,n,s,l,a,c,f,p,g,w){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=io("c:"+this.id+":"),this.transportManager_=new Bs(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=Os(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Kx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Rc in e){const n=e[Rc];n===ug?this.upgradeIfSecondaryHealthy_():n===lg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ag&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=xs("t",e),s=xs("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:dg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ug,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:cg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=xs("t",e),s=xs("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=xs(Rc,e);if(og in e){const s=e[og];if(n===Jx){const l=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===cg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Qx?this.onConnectionShutdown_(s):n===lg?this.onReset_(s):n===Yx?Xc("Server Error: "+s):n===ag?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Md!==s&&vt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Os(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Hx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Os(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Gx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:dg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{put(e,n,s,l){}merge(e,n,s,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const l=this.getInitialEvent(e);l&&n.apply(s,l)}off(e,n,s){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let a=0;a<l.length;a++)if(l[a].callback===n&&(!s||s===l[a].context)){l.splice(a,1);return}}validateEventType_(e){W(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends h_{static getInstance(){return new Vl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return W(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=32,fg=768;class Pe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ie(){return new Pe("")}function _e(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function lr(r){return r.pieces_.length-r.pieceNum_}function De(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new Pe(r.pieces_,e)}function Ud(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function Zx(r){let e="";for(let n=r.pieceNum_;n<r.pieces_.length;n++)r.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[n])));return e||"/"}function Ws(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function f_(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let n=r.pieceNum_;n<r.pieces_.length-1;n++)e.push(r.pieces_[n]);return new Pe(e,0)}function Ve(r,e){const n=[];for(let s=r.pieceNum_;s<r.pieces_.length;s++)n.push(r.pieces_[s]);if(e instanceof Pe)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&n.push(s[l])}return new Pe(n,0)}function we(r){return r.pieceNum_>=r.pieces_.length}function gt(r,e){const n=_e(r),s=_e(e);if(n===null)return e;if(n===s)return gt(De(r),De(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function eN(r,e){const n=Ws(r,0),s=Ws(e,0);for(let l=0;l<n.length&&l<s.length;l++){const a=Fr(n[l],s[l]);if(a!==0)return a}return n.length===s.length?0:n.length<s.length?-1:1}function zd(r,e){if(lr(r)!==lr(e))return!1;for(let n=r.pieceNum_,s=e.pieceNum_;n<=r.pieces_.length;n++,s++)if(r.pieces_[n]!==e.pieces_[s])return!1;return!0}function Ft(r,e){let n=r.pieceNum_,s=e.pieceNum_;if(lr(r)>lr(e))return!1;for(;n<r.pieces_.length;){if(r.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class tN{constructor(e,n){this.errorPrefix_=n,this.parts_=Ws(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=oa(this.parts_[s]);p_(this)}}function nN(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=oa(e),p_(r)}function rN(r){const e=r.parts_.pop();r.byteLength_-=oa(e),r.parts_.length>0&&(r.byteLength_-=1)}function p_(r){if(r.byteLength_>fg)throw new Error(r.errorPrefix_+"has a key path longer than "+fg+" bytes ("+r.byteLength_+").");if(r.parts_.length>hg)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hg+") or object contains a cycle "+kr(r))}function kr(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends h_{static getInstance(){return new $d}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return W(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=1e3,iN=300*1e3,pg=30*1e3,sN=1.3,oN=3e4,lN="server_kill",mg=3;class En extends d_{constructor(e,n,s,l,a,c,f,p){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=p,this.id=En.nextPersistentConnectionId_++,this.log_=io("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ns,this.maxReconnectDelay_=iN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$d.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Vl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const l=++this.requestNumber_,a={r:l,a:e,b:n};this.log_(Ze(a)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const n=new Xs,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?n.resolve(f):n.reject(f)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,s,l){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const f={onComplete:l,hashFn:n,query:e,tag:s};this.listens.get(c).set(a,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+s+" for "+l);const a={p:s},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,f=>{const p=f.d,g=f.s;En.warnOnListenWarnings_(p,n),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(s,l),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&cn(e,"w")){const s=wi(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();vt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||qS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=GS(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,l=>{const a=l.s,c=l.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,n)}sendUnlisten_(e,n,s,l){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";l&&(a.q=s,a.t=l),this.sendRequest(c,a)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,l){const a={p:n,d:s};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{l&&setTimeout(()=>{l(c.s,c.d)},Math.floor(0))})}put(e,n,s,l){this.putInternal("p",e,n,s,l)}merge(e,n,s,l){this.putInternal("m",e,n,s,l)}putInternal(e,n,s,l,a){this.initConnection_();const c={p:n,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:l}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ze(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Xc("Unrecognized action received from server: "+Ze(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ns,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ns,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>oN&&(this.reconnectDelay_=Ns),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+En.nextConnectionId_++,a=this.lastSessionId;let c=!1,f=null;const p=function(){f?f.close():(c=!0,s())},g=function(_){W(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(_)};this.realtime_={close:p,sendRequest:g};const w=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,y]=await Promise.all([this.authTokenProvider_.getToken(w),this.appCheckTokenProvider_.getToken(w)]);c?at("getToken() completed but was canceled"):(at("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=y&&y.token,f=new Xx(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,R=>{vt(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(lN)},a))}catch(_){this.log_("Failed to get token: "+_),c||(this.repoInfo_.nodeAdmin&&vt(_),p())}}}interrupt(e){at("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){at("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Wc(this.interruptReasons_)&&(this.reconnectDelay_=Ns,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(a=>Ld(a)).join("$"):s="default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const s=new Pe(e).toString();let l;if(this.listens.has(s)){const a=this.listens.get(s);l=a.get(n),a.delete(n),a.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,n){at("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=mg&&(this.reconnectDelay_=pg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){at("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=mg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Vv.replace(/\./g,"-")]=1,yd()?e["framework.cordova"]=1:ov()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Vl.getInstance().currentlyOnline();return Wc(this.interruptReasons_)&&e}}En.nextPersistentConnectionId_=0;En.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ye(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new ye(Ei,e),l=new ye(Ei,n);return this.compare(s,l)!==0}minPost(){return ye.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El;class m_ extends ca{static get __EMPTY_NODE(){return El}static set __EMPTY_NODE(e){El=e}compare(e,n){return Fr(e.name,n.name)}isDefinedOn(e){throw Ri("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ye.MIN}maxPost(){return new ye(Dr,El)}makePost(e,n){return W(typeof e=="string","KeyIndex indexValue must always be a string."),new ye(e,El)}toString(){return".key"}}const _i=new m_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n,s,l,a=null){this.isReverse_=l,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?s(e.key,n):1,l&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class it{constructor(e,n,s,l,a){this.key=e,this.value=n,this.color=s??it.RED,this.left=l??Nt.EMPTY_NODE,this.right=a??Nt.EMPTY_NODE}copy(e,n,s,l,a){return new it(e??this.key,n??this.value,s??this.color,l??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const a=s(e,l.key);return a<0?l=l.copy(null,null,null,l.left.insert(e,n,s),null):a===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,l;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Nt.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}it.RED=!0;it.BLACK=!1;class aN{copy(e,n,s,l,a){return this}insert(e,n,s){return new it(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Nt{constructor(e,n=Nt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Nt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,it.BLACK,null,null))}remove(e){return new Nt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,it.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,l=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Il(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Il(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Il(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Il(this.root_,null,this.comparator_,!0,e)}}Nt.EMPTY_NODE=new aN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(r,e){return Fr(r.name,e.name)}function Bd(r,e){return Fr(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed;function cN(r){ed=r}const g_=function(r){return typeof r=="number"?"number:"+Kv(r):"string:"+r},v_=function(r){if(r.isLeafNode()){const e=r.val();W(typeof e=="string"||typeof e=="number"||typeof e=="object"&&cn(e,".sv"),"Priority must be a string or number.")}else W(r===ed||r.isEmpty(),"priority of unexpected type.");W(r===ed||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gg;class rt{static set __childrenNodeConstructor(e){gg=e}static get __childrenNodeConstructor(){return gg}constructor(e,n=rt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,W(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),v_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new rt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:rt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return we(e)?this:_e(e)===".priority"?this.priorityNode_:rt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:rt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=_e(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(W(s!==".priority"||lr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,rt.__childrenNodeConstructor.EMPTY_NODE.updateChild(De(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+g_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Kv(this.value_):e+=this.value_,this.lazyHash_=Gv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===rt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof rt.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,l=rt.VALUE_TYPE_ORDER.indexOf(n),a=rt.VALUE_TYPE_ORDER.indexOf(s);return W(l>=0,"Unknown leaf type: "+n),W(a>=0,"Unknown leaf type: "+s),l===a?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}rt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __,y_;function dN(r){__=r}function hN(r){y_=r}class fN extends ca{compare(e,n){const s=e.node.getPriority(),l=n.node.getPriority(),a=s.compareTo(l);return a===0?Fr(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ye.MIN}maxPost(){return new ye(Dr,new rt("[PRIORITY-POST]",y_))}makePost(e,n){const s=__(e);return new ye(n,new rt("[PRIORITY-POST]",s))}toString(){return".priority"}}const He=new fN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=Math.log(2);class mN{constructor(e){const n=a=>parseInt(Math.log(a)/pN,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=s(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Hl=function(r,e,n,s){r.sort(e);const l=function(p,g){const w=g-p;let _,y;if(w===0)return null;if(w===1)return _=r[p],y=n?n(_):_,new it(y,_.node,it.BLACK,null,null);{const R=parseInt(w/2,10)+p,b=l(p,R),D=l(R+1,g);return _=r[R],y=n?n(_):_,new it(y,_.node,it.BLACK,b,D)}},a=function(p){let g=null,w=null,_=r.length;const y=function(b,D){const O=_-b,J=_;_-=b;const A=l(O+1,J),G=r[O],V=n?n(G):G;R(new it(V,G.node,D,null,A))},R=function(b){g?(g.left=b,g=b):(w=b,g=b)};for(let b=0;b<p.count;++b){const D=p.nextBitIsOne(),O=Math.pow(2,p.count-(b+1));D?y(O,it.BLACK):(y(O,it.BLACK),y(O,it.RED))}return w},c=new mN(r.length),f=a(c);return new Nt(s||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac;const di={};class Cn{static get Default(){return W(di&&He,"ChildrenNode.ts has not been loaded"),Ac=Ac||new Cn({".priority":di},{".priority":He}),Ac}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=wi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Nt?n:null}hasIndex(e){return cn(this.indexSet_,e.toString())}addIndex(e,n){W(e!==_i,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const a=n.getIterator(ye.Wrap);let c=a.getNext();for(;c;)l=l||e.isDefinedOn(c.node),s.push(c),c=a.getNext();let f;l?f=Hl(s,e.getCompare()):f=di;const p=e.toString(),g=Object.assign({},this.indexSet_);g[p]=e;const w=Object.assign({},this.indexes_);return w[p]=f,new Cn(w,g)}addToIndexes(e,n){const s=Ll(this.indexes_,(l,a)=>{const c=wi(this.indexSet_,a);if(W(c,"Missing index implementation for "+a),l===di)if(c.isDefinedOn(e.node)){const f=[],p=n.getIterator(ye.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&f.push(g),g=p.getNext();return f.push(e),Hl(f,c.getCompare())}else return di;else{const f=n.get(e.name);let p=l;return f&&(p=p.remove(new ye(e.name,f))),p.insert(e,e.node)}});return new Cn(s,this.indexSet_)}removeFromIndexes(e,n){const s=Ll(this.indexes_,l=>{if(l===di)return l;{const a=n.get(e.name);return a?l.remove(new ye(e.name,a)):l}});return new Cn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ks;class ue{static get EMPTY_NODE(){return ks||(ks=new ue(new Nt(Bd),null,Cn.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&v_(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ks}updatePriority(e){return this.children_.isEmpty()?this:new ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ks:n}}getChild(e){const n=_e(e);return n===null?this:this.getImmediateChild(n).getChild(De(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(W(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new ye(e,n);let l,a;n.isEmpty()?(l=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(s,this.children_));const c=l.isEmpty()?ks:this.priorityNode_;return new ue(l,c,a)}}updateChild(e,n){const s=_e(e);if(s===null)return n;{W(_e(e)!==".priority"||lr(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(De(e),n);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,l=0,a=!0;if(this.forEachChild(He,(c,f)=>{n[c]=f.val(e),s++,a&&ue.INTEGER_REGEXP_.test(c)?l=Math.max(l,Number(c)):a=!1}),!e&&a&&l<2*s){const c=[];for(const f in n)c[f]=n[f];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+g_(this.getPriority().val())+":"),this.forEachChild(He,(n,s)=>{const l=s.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":Gv(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const l=this.resolveIndex_(s);if(l){const a=l.getPredecessorKey(new ye(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ye(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ye(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,ye.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)<0;)l.getNext(),a=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,ye.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)>0;)l.getNext(),a=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===so?-1:0}withIndex(e){if(e===_i||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===_i||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(He),l=n.getIterator(He);let a=s.getNext(),c=l.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=l.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===_i?null:this.indexMap_.get(e.toString())}}ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class gN extends ue{constructor(){super(new Nt(Bd),ue.EMPTY_NODE,Cn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}}const so=new gN;Object.defineProperties(ye,{MIN:{value:new ye(Ei,ue.EMPTY_NODE)},MAX:{value:new ye(Dr,so)}});m_.__EMPTY_NODE=ue.EMPTY_NODE;rt.__childrenNodeConstructor=ue;cN(so);hN(so);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=!0;function Xe(r,e=null){if(r===null)return ue.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),W(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const n=r;return new rt(n,Xe(e))}if(!(r instanceof Array)&&vN){const n=[];let s=!1;if(ut(r,(c,f)=>{if(c.substring(0,1)!=="."){const p=Xe(f);p.isEmpty()||(s=s||!p.getPriority().isEmpty(),n.push(new ye(c,p)))}}),n.length===0)return ue.EMPTY_NODE;const a=Hl(n,uN,c=>c.name,Bd);if(s){const c=Hl(n,He.getCompare());return new ue(a,Xe(e),new Cn({".priority":c},{".priority":He}))}else return new ue(a,Xe(e),Cn.Default)}else{let n=ue.EMPTY_NODE;return ut(r,(s,l)=>{if(cn(r,s)&&s.substring(0,1)!=="."){const a=Xe(l);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(s,a))}}),n.updatePriority(Xe(e))}}dN(Xe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N extends ca{constructor(e){super(),this.indexPath_=e,W(!we(e)&&_e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),l=this.extractChild(n.node),a=s.compareTo(l);return a===0?Fr(e.name,n.name):a}makePost(e,n){const s=Xe(e),l=ue.EMPTY_NODE.updateChild(this.indexPath_,s);return new ye(n,l)}maxPost(){const e=ue.EMPTY_NODE.updateChild(this.indexPath_,so);return new ye(Dr,e)}toString(){return Ws(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN extends ca{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Fr(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ye.MIN}maxPost(){return ye.MAX}makePost(e,n){const s=Xe(e);return new ye(n,s)}toString(){return".value"}}const wN=new yN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(r){return{type:"value",snapshotNode:r}}function Ii(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function Vs(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function Hs(r,e,n){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:n}}function SN(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this.index_=e}updateChild(e,n,s,l,a,c){W(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(n);return f.getChild(l).equals(s.getChild(l))&&f.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?e.hasChild(n)?c.trackChildChange(Vs(n,f)):W(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Ii(n,s)):c.trackChildChange(Hs(n,s,f))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(He,(l,a)=>{n.hasChild(l)||s.trackChildChange(Vs(l,a))}),n.isLeafNode()||n.forEachChild(He,(l,a)=>{if(e.hasChild(l)){const c=e.getImmediateChild(l);c.equals(a)||s.trackChildChange(Hs(l,a,c))}else s.trackChildChange(Ii(l,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.indexedFilter_=new Wd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Gs.getStartPost_(e),this.endPost_=Gs.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,l,a,c){return this.matches(new ye(n,s))||(s=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,l,a,c)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ue.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(ue.EMPTY_NODE);const a=this;return n.forEachChild(He,(c,f)=>{a.matches(new ye(c,f))||(l=l.updateImmediateChild(c,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Gs(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,l,a,c){return this.rangedFilter_.matches(new ye(n,s))||(s=ue.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,l,a,c):this.fullLimitUpdateChild_(e,n,s,a,c)}updateFullNode(e,n,s){let l;if(n.isLeafNode()||n.isEmpty())l=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=ue.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))l=l.updateImmediateChild(f.name,f.node),c++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(ue.EMPTY_NODE);let a;this.reverse_?a=l.getReverseIterator(this.index_):a=l.getIterator(this.index_);let c=0;for(;a.hasNext();){const f=a.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:l=l.updateImmediateChild(f.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,l,a){let c;if(this.reverse_){const _=this.index_.getCompare();c=(y,R)=>_(R,y)}else c=this.index_.getCompare();const f=e;W(f.numChildren()===this.limit_,"");const p=new ye(n,s),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(f.hasChild(n)){const _=f.getImmediateChild(n);let y=l.getChildAfterChild(this.index_,g,this.reverse_);for(;y!=null&&(y.name===n||f.hasChild(y.name));)y=l.getChildAfterChild(this.index_,y,this.reverse_);const R=y==null?1:c(y,p);if(w&&!s.isEmpty()&&R>=0)return a!=null&&a.trackChildChange(Hs(n,s,_)),f.updateImmediateChild(n,s);{a!=null&&a.trackChildChange(Vs(n,_));const D=f.updateImmediateChild(n,ue.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(a!=null&&a.trackChildChange(Ii(y.name,y.node)),D.updateImmediateChild(y.name,y.node)):D}}else return s.isEmpty()?e:w&&c(g,p)>=0?(a!=null&&(a.trackChildChange(Vs(g.name,g.node)),a.trackChildChange(Ii(n,s))),f.updateImmediateChild(n,s).updateImmediateChild(g.name,ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=He}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return W(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ei}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return W(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===He}copy(){const e=new Vd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function EN(r){return r.loadsAllData()?new Wd(r.getIndex()):r.hasLimit()?new CN(r):new Gs(r)}function vg(r){const e={};if(r.isDefault())return e;let n;if(r.index_===He?n="$priority":r.index_===wN?n="$value":r.index_===_i?n="$key":(W(r.index_ instanceof _N,"Unrecognized index type!"),n=r.index_.toString()),e.orderBy=Ze(n),r.startSet_){const s=r.startAfterSet_?"startAfter":"startAt";e[s]=Ze(r.indexStartValue_),r.startNameSet_&&(e[s]+=","+Ze(r.indexStartName_))}if(r.endSet_){const s=r.endBeforeSet_?"endBefore":"endAt";e[s]=Ze(r.indexEndValue_),r.endNameSet_&&(e[s]+=","+Ze(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function _g(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let n=r.viewFrom_;n===""&&(r.isViewFromLeft()?n="l":n="r"),e.vf=n}return r.index_!==He&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends d_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=io("p:rest:"),this.listens_={}}listen(e,n,s,l){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Gl.getListenId_(e,s),f={};this.listens_[c]=f;const p=vg(e._queryParams);this.restRequest_(a+".json",p,(g,w)=>{let _=w;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(a,_,!1,s),wi(this.listens_,c)===f){let y;g?g===401?y="permission_denied":y="rest_error:"+g:y="ok",l(y,null)}})}unlisten(e,n){const s=Gl.getListenId_(e,n);delete this.listens_[s]}get(e){const n=vg(e._queryParams),s=e._path.toString(),l=new Xs;return this.restRequest_(s+".json",n,(a,c)=>{let f=c;a===404&&(f=null,a=null),a===null?(this.onDataUpdate_(s,f,!1,null),l.resolve(f)):l.reject(new Error(f))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,a])=>{l&&l.accessToken&&(n.auth=l.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bi(n);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(s&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let p=null;if(f.status>=200&&f.status<300){try{p=Us(f.responseText)}catch{vt("Failed to parse JSON response for "+c+": "+f.responseText)}s(null,p)}else f.status!==401&&f.status!==404&&vt("Got unsuccessful REST response for "+c+" Status: "+f.status),s(f.status);s=null}},f.open("GET",c,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(){return{value:null,children:new Map}}function S_(r,e,n){if(we(e))r.value=n,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,n);else{const s=_e(e);r.children.has(s)||r.children.set(s,ql());const l=r.children.get(s);e=De(e),S_(l,e,n)}}function td(r,e,n){r.value!==null?n(e,r.value):xN(r,(s,l)=>{const a=new Pe(e.toString()+"/"+s);td(l,a,n)})}function xN(r,e){r.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ut(this.last_,(s,l)=>{n[s]=n[s]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=10*1e3,kN=30*1e3,TN=300*1e3;class PN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new NN(e);const s=yg+(kN-yg)*Math.random();Os(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;ut(e,(l,a)=>{a>0&&cn(this.statsToReport_,l)&&(n[l]=a,s=!0)}),s&&this.server_.reportStats(n),Os(this.reportStats_.bind(this),Math.floor(Math.random()*2*TN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Jt||(Jt={}));function Hd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function qd(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Jt.ACK_USER_WRITE,this.source=Hd()}operationForChild(e){if(we(this.path)){if(this.affectedTree.value!=null)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Pe(e));return new Kl(Ie(),n,this.revert)}}else return W(_e(this.path)===e,"operationForChild called for unrelated child."),new Kl(De(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.source=e,this.path=n,this.type=Jt.LISTEN_COMPLETE}operationForChild(e){return we(this.path)?new qs(this.source,Ie()):new qs(this.source,De(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Jt.OVERWRITE}operationForChild(e){return we(this.path)?new Lr(this.source,Ie(),this.snap.getImmediateChild(e)):new Lr(this.source,De(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Jt.MERGE}operationForChild(e){if(we(this.path)){const n=this.children.subtree(new Pe(e));return n.isEmpty()?null:n.value?new Lr(this.source,Ie(),n.value):new xi(this.source,Ie(),n)}else return W(_e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xi(this.source,De(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(we(e))return this.isFullyInitialized()&&!this.filtered_;const n=_e(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function AN(r,e,n,s){const l=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&r.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(SN(c.childName,c.snapshotNode))}),Ts(r,l,"child_removed",e,s,n),Ts(r,l,"child_added",e,s,n),Ts(r,l,"child_moved",a,s,n),Ts(r,l,"child_changed",e,s,n),Ts(r,l,"value",e,s,n),l}function Ts(r,e,n,s,l,a){const c=s.filter(f=>f.type===n);c.sort((f,p)=>ON(r,f,p)),c.forEach(f=>{const p=bN(r,f,a);l.forEach(g=>{g.respondsTo(f.type)&&e.push(g.createEvent(p,r.query_))})})}function bN(r,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function ON(r,e,n){if(e.childName==null||n.childName==null)throw Ri("Should only compare child_ events.");const s=new ye(e.childName,e.snapshotNode),l=new ye(n.childName,n.snapshotNode);return r.index_.compare(s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(r,e){return{eventCache:r,serverCache:e}}function Ds(r,e,n,s){return da(new ar(e,n,s),r.serverCache)}function C_(r,e,n,s){return da(r.eventCache,new ar(e,n,s))}function Ql(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function Mr(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc;const DN=()=>(bc||(bc=new Nt(_x)),bc);class Oe{static fromObject(e){let n=new Oe(null);return ut(e,(s,l)=>{n=n.set(new Pe(s),l)}),n}constructor(e,n=DN()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ie(),value:this.value};if(we(e))return null;{const s=_e(e),l=this.children.get(s);if(l!==null){const a=l.findRootMostMatchingPathAndValue(De(e),n);return a!=null?{path:Ve(new Pe(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(we(e))return this;{const n=_e(e),s=this.children.get(n);return s!==null?s.subtree(De(e)):new Oe(null)}}set(e,n){if(we(e))return new Oe(n,this.children);{const s=_e(e),a=(this.children.get(s)||new Oe(null)).set(De(e),n),c=this.children.insert(s,a);return new Oe(this.value,c)}}remove(e){if(we(e))return this.children.isEmpty()?new Oe(null):new Oe(null,this.children);{const n=_e(e),s=this.children.get(n);if(s){const l=s.remove(De(e));let a;return l.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,l),this.value===null&&a.isEmpty()?new Oe(null):new Oe(this.value,a)}else return this}}get(e){if(we(e))return this.value;{const n=_e(e),s=this.children.get(n);return s?s.get(De(e)):null}}setTree(e,n){if(we(e))return n;{const s=_e(e),a=(this.children.get(s)||new Oe(null)).setTree(De(e),n);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new Oe(this.value,c)}}fold(e){return this.fold_(Ie(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((l,a)=>{s[l]=a.fold_(Ve(e,l),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Ie(),n)}findOnPath_(e,n,s){const l=this.value?s(n,this.value):!1;if(l)return l;if(we(e))return null;{const a=_e(e),c=this.children.get(a);return c?c.findOnPath_(De(e),Ve(n,a),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ie(),n)}foreachOnPath_(e,n,s){if(we(e))return this;{this.value&&s(n,this.value);const l=_e(e),a=this.children.get(l);return a?a.foreachOnPath_(De(e),Ve(n,l),s):new Oe(null)}}foreach(e){this.foreach_(Ie(),e)}foreach_(e,n){this.children.inorderTraversal((s,l)=>{l.foreach_(Ve(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.writeTree_=e}static empty(){return new Zt(new Oe(null))}}function Ls(r,e,n){if(we(e))return new Zt(new Oe(n));{const s=r.writeTree_.findRootMostValueAndPath(e);if(s!=null){const l=s.path;let a=s.value;const c=gt(l,e);return a=a.updateChild(c,n),new Zt(r.writeTree_.set(l,a))}else{const l=new Oe(n),a=r.writeTree_.setTree(e,l);return new Zt(a)}}}function nd(r,e,n){let s=r;return ut(n,(l,a)=>{s=Ls(s,Ve(e,l),a)}),s}function wg(r,e){if(we(e))return Zt.empty();{const n=r.writeTree_.setTree(e,new Oe(null));return new Zt(n)}}function rd(r,e){return Ur(r,e)!=null}function Ur(r,e){const n=r.writeTree_.findRootMostValueAndPath(e);return n!=null?r.writeTree_.get(n.path).getChild(gt(n.path,e)):null}function Sg(r){const e=[],n=r.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(He,(s,l)=>{e.push(new ye(s,l))}):r.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&e.push(new ye(s,l.value))}),e}function sr(r,e){if(we(e))return r;{const n=Ur(r,e);return n!=null?new Zt(new Oe(n)):new Zt(r.writeTree_.subtree(e))}}function id(r){return r.writeTree_.isEmpty()}function Ni(r,e){return E_(Ie(),r.writeTree_,e)}function E_(r,e,n){if(e.value!=null)return n.updateChild(r,e.value);{let s=null;return e.children.inorderTraversal((l,a)=>{l===".priority"?(W(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):n=E_(Ve(r,l),a,n)}),!n.getChild(r).isEmpty()&&s!==null&&(n=n.updateChild(Ve(r,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(r,e){return k_(e,r)}function LN(r,e,n,s,l){W(s>r.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),r.allWrites.push({path:e,snap:n,writeId:s,visible:l}),l&&(r.visibleWrites=Ls(r.visibleWrites,e,n)),r.lastWriteId=s}function MN(r,e,n,s){W(s>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:n,writeId:s,visible:!0}),r.visibleWrites=nd(r.visibleWrites,e,n),r.lastWriteId=s}function jN(r,e){for(let n=0;n<r.allWrites.length;n++){const s=r.allWrites[n];if(s.writeId===e)return s}return null}function FN(r,e){const n=r.allWrites.findIndex(f=>f.writeId===e);W(n>=0,"removeWrite called with nonexistent writeId.");const s=r.allWrites[n];r.allWrites.splice(n,1);let l=s.visible,a=!1,c=r.allWrites.length-1;for(;l&&c>=0;){const f=r.allWrites[c];f.visible&&(c>=n&&UN(f,s.path)?l=!1:Ft(s.path,f.path)&&(a=!0)),c--}if(l){if(a)return zN(r),!0;if(s.snap)r.visibleWrites=wg(r.visibleWrites,s.path);else{const f=s.children;ut(f,p=>{r.visibleWrites=wg(r.visibleWrites,Ve(s.path,p))})}return!0}else return!1}function UN(r,e){if(r.snap)return Ft(r.path,e);for(const n in r.children)if(r.children.hasOwnProperty(n)&&Ft(Ve(r.path,n),e))return!0;return!1}function zN(r){r.visibleWrites=I_(r.allWrites,$N,Ie()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function $N(r){return r.visible}function I_(r,e,n){let s=Zt.empty();for(let l=0;l<r.length;++l){const a=r[l];if(e(a)){const c=a.path;let f;if(a.snap)Ft(n,c)?(f=gt(n,c),s=Ls(s,f,a.snap)):Ft(c,n)&&(f=gt(c,n),s=Ls(s,Ie(),a.snap.getChild(f)));else if(a.children){if(Ft(n,c))f=gt(n,c),s=nd(s,f,a.children);else if(Ft(c,n))if(f=gt(c,n),we(f))s=nd(s,Ie(),a.children);else{const p=wi(a.children,_e(f));if(p){const g=p.getChild(De(f));s=Ls(s,Ie(),g)}}}else throw Ri("WriteRecord should have .snap or .children")}}return s}function x_(r,e,n,s,l){if(!s&&!l){const a=Ur(r.visibleWrites,e);if(a!=null)return a;{const c=sr(r.visibleWrites,e);if(id(c))return n;if(n==null&&!rd(c,Ie()))return null;{const f=n||ue.EMPTY_NODE;return Ni(c,f)}}}else{const a=sr(r.visibleWrites,e);if(!l&&id(a))return n;if(!l&&n==null&&!rd(a,Ie()))return null;{const c=function(g){return(g.visible||l)&&(!s||!~s.indexOf(g.writeId))&&(Ft(g.path,e)||Ft(e,g.path))},f=I_(r.allWrites,c,e),p=n||ue.EMPTY_NODE;return Ni(f,p)}}}function BN(r,e,n){let s=ue.EMPTY_NODE;const l=Ur(r.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(He,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(n){const a=sr(r.visibleWrites,e);return n.forEachChild(He,(c,f)=>{const p=Ni(sr(a,new Pe(c)),f);s=s.updateImmediateChild(c,p)}),Sg(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=sr(r.visibleWrites,e);return Sg(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function WN(r,e,n,s,l){W(s||l,"Either existingEventSnap or existingServerSnap must exist");const a=Ve(e,n);if(rd(r.visibleWrites,a))return null;{const c=sr(r.visibleWrites,a);return id(c)?l.getChild(n):Ni(c,l.getChild(n))}}function VN(r,e,n,s){const l=Ve(e,n),a=Ur(r.visibleWrites,l);if(a!=null)return a;if(s.isCompleteForChild(n)){const c=sr(r.visibleWrites,l);return Ni(c,s.getNode().getImmediateChild(n))}else return null}function HN(r,e){return Ur(r.visibleWrites,e)}function GN(r,e,n,s,l,a,c){let f;const p=sr(r.visibleWrites,e),g=Ur(p,Ie());if(g!=null)f=g;else if(n!=null)f=Ni(p,n);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const w=[],_=c.getCompare(),y=a?f.getReverseIteratorFrom(s,c):f.getIteratorFrom(s,c);let R=y.getNext();for(;R&&w.length<l;)_(R,s)!==0&&w.push(R),R=y.getNext();return w}else return[]}function qN(){return{visibleWrites:Zt.empty(),allWrites:[],lastWriteId:-1}}function Yl(r,e,n,s){return x_(r.writeTree,r.treePath,e,n,s)}function Kd(r,e){return BN(r.writeTree,r.treePath,e)}function Cg(r,e,n,s){return WN(r.writeTree,r.treePath,e,n,s)}function Jl(r,e){return HN(r.writeTree,Ve(r.treePath,e))}function KN(r,e,n,s,l,a){return GN(r.writeTree,r.treePath,e,n,s,l,a)}function Qd(r,e,n){return VN(r.writeTree,r.treePath,e,n)}function N_(r,e){return k_(Ve(r.treePath,e),r.writeTree)}function k_(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;W(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),W(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const a=l.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(s,Hs(s,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(s,Vs(s,l.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(s,Ii(s,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(s,Hs(s,e.snapshotNode,l.oldSnap));else throw Ri("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const T_=new YN;class Yd{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new ar(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qd(this.writes_,e,s)}}getChildAfterChild(e,n,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Mr(this.viewCache_),a=KN(this.writes_,l,n,1,s,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(r){return{filter:r}}function XN(r,e){W(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),W(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function ZN(r,e,n,s,l){const a=new QN;let c,f;if(n.type===Jt.OVERWRITE){const g=n;g.source.fromUser?c=sd(r,e,g.path,g.snap,s,l,a):(W(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered()&&!we(g.path),c=Xl(r,e,g.path,g.snap,s,l,f,a))}else if(n.type===Jt.MERGE){const g=n;g.source.fromUser?c=t1(r,e,g.path,g.children,s,l,a):(W(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered(),c=od(r,e,g.path,g.children,s,l,f,a))}else if(n.type===Jt.ACK_USER_WRITE){const g=n;g.revert?c=i1(r,e,g.path,s,l,a):c=n1(r,e,g.path,g.affectedTree,s,l,a)}else if(n.type===Jt.LISTEN_COMPLETE)c=r1(r,e,n.path,s,a);else throw Ri("Unknown operation type: "+n.type);const p=a.getChanges();return e1(e,c,p),{viewCache:c,changes:p}}function e1(r,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=Ql(r);(n.length>0||!r.eventCache.isFullyInitialized()||l&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&n.push(w_(Ql(e)))}}function P_(r,e,n,s,l,a){const c=e.eventCache;if(Jl(s,n)!=null)return e;{let f,p;if(we(n))if(W(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Mr(e),w=g instanceof ue?g:ue.EMPTY_NODE,_=Kd(s,w);f=r.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const g=Yl(s,Mr(e));f=r.filter.updateFullNode(e.eventCache.getNode(),g,a)}else{const g=_e(n);if(g===".priority"){W(lr(n)===1,"Can't have a priority with additional path components");const w=c.getNode();p=e.serverCache.getNode();const _=Cg(s,n,w,p);_!=null?f=r.filter.updatePriority(w,_):f=c.getNode()}else{const w=De(n);let _;if(c.isCompleteForChild(g)){p=e.serverCache.getNode();const y=Cg(s,n,c.getNode(),p);y!=null?_=c.getNode().getImmediateChild(g).updateChild(w,y):_=c.getNode().getImmediateChild(g)}else _=Qd(s,g,e.serverCache);_!=null?f=r.filter.updateChild(c.getNode(),g,_,w,l,a):f=c.getNode()}}return Ds(e,f,c.isFullyInitialized()||we(n),r.filter.filtersNodes())}}function Xl(r,e,n,s,l,a,c,f){const p=e.serverCache;let g;const w=c?r.filter:r.filter.getIndexedFilter();if(we(n))g=w.updateFullNode(p.getNode(),s,null);else if(w.filtersNodes()&&!p.isFiltered()){const R=p.getNode().updateChild(n,s);g=w.updateFullNode(p.getNode(),R,null)}else{const R=_e(n);if(!p.isCompleteForPath(n)&&lr(n)>1)return e;const b=De(n),O=p.getNode().getImmediateChild(R).updateChild(b,s);R===".priority"?g=w.updatePriority(p.getNode(),O):g=w.updateChild(p.getNode(),R,O,b,T_,null)}const _=C_(e,g,p.isFullyInitialized()||we(n),w.filtersNodes()),y=new Yd(l,_,a);return P_(r,_,n,l,y,f)}function sd(r,e,n,s,l,a,c){const f=e.eventCache;let p,g;const w=new Yd(l,e,a);if(we(n))g=r.filter.updateFullNode(e.eventCache.getNode(),s,c),p=Ds(e,g,!0,r.filter.filtersNodes());else{const _=_e(n);if(_===".priority")g=r.filter.updatePriority(e.eventCache.getNode(),s),p=Ds(e,g,f.isFullyInitialized(),f.isFiltered());else{const y=De(n),R=f.getNode().getImmediateChild(_);let b;if(we(y))b=s;else{const D=w.getCompleteChild(_);D!=null?Ud(y)===".priority"&&D.getChild(f_(y)).isEmpty()?b=D:b=D.updateChild(y,s):b=ue.EMPTY_NODE}if(R.equals(b))p=e;else{const D=r.filter.updateChild(f.getNode(),_,b,y,w,c);p=Ds(e,D,f.isFullyInitialized(),r.filter.filtersNodes())}}}return p}function Eg(r,e){return r.eventCache.isCompleteForChild(e)}function t1(r,e,n,s,l,a,c){let f=e;return s.foreach((p,g)=>{const w=Ve(n,p);Eg(e,_e(w))&&(f=sd(r,f,w,g,l,a,c))}),s.foreach((p,g)=>{const w=Ve(n,p);Eg(e,_e(w))||(f=sd(r,f,w,g,l,a,c))}),f}function Ig(r,e,n){return n.foreach((s,l)=>{e=e.updateChild(s,l)}),e}function od(r,e,n,s,l,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;we(n)?g=s:g=new Oe(null).setTree(n,s);const w=e.serverCache.getNode();return g.children.inorderTraversal((_,y)=>{if(w.hasChild(_)){const R=e.serverCache.getNode().getImmediateChild(_),b=Ig(r,R,y);p=Xl(r,p,new Pe(_),b,l,a,c,f)}}),g.children.inorderTraversal((_,y)=>{const R=!e.serverCache.isCompleteForChild(_)&&y.value===null;if(!w.hasChild(_)&&!R){const b=e.serverCache.getNode().getImmediateChild(_),D=Ig(r,b,y);p=Xl(r,p,new Pe(_),D,l,a,c,f)}}),p}function n1(r,e,n,s,l,a,c){if(Jl(l,n)!=null)return e;const f=e.serverCache.isFiltered(),p=e.serverCache;if(s.value!=null){if(we(n)&&p.isFullyInitialized()||p.isCompleteForPath(n))return Xl(r,e,n,p.getNode().getChild(n),l,a,f,c);if(we(n)){let g=new Oe(null);return p.getNode().forEachChild(_i,(w,_)=>{g=g.set(new Pe(w),_)}),od(r,e,n,g,l,a,f,c)}else return e}else{let g=new Oe(null);return s.foreach((w,_)=>{const y=Ve(n,w);p.isCompleteForPath(y)&&(g=g.set(w,p.getNode().getChild(y)))}),od(r,e,n,g,l,a,f,c)}}function r1(r,e,n,s,l){const a=e.serverCache,c=C_(e,a.getNode(),a.isFullyInitialized()||we(n),a.isFiltered());return P_(r,c,n,s,T_,l)}function i1(r,e,n,s,l,a){let c;if(Jl(s,n)!=null)return e;{const f=new Yd(s,e,l),p=e.eventCache.getNode();let g;if(we(n)||_e(n)===".priority"){let w;if(e.serverCache.isFullyInitialized())w=Yl(s,Mr(e));else{const _=e.serverCache.getNode();W(_ instanceof ue,"serverChildren would be complete if leaf node"),w=Kd(s,_)}w=w,g=r.filter.updateFullNode(p,w,a)}else{const w=_e(n);let _=Qd(s,w,e.serverCache);_==null&&e.serverCache.isCompleteForChild(w)&&(_=p.getImmediateChild(w)),_!=null?g=r.filter.updateChild(p,w,_,De(n),f,a):e.eventCache.getNode().hasChild(w)?g=r.filter.updateChild(p,w,ue.EMPTY_NODE,De(n),f,a):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Yl(s,Mr(e)),c.isLeafNode()&&(g=r.filter.updateFullNode(g,c,a)))}return c=e.serverCache.isFullyInitialized()||Jl(s,Ie())!=null,Ds(e,g,c,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,l=new Wd(s.getIndex()),a=EN(s);this.processor_=JN(a);const c=n.serverCache,f=n.eventCache,p=l.updateFullNode(ue.EMPTY_NODE,c.getNode(),null),g=a.updateFullNode(ue.EMPTY_NODE,f.getNode(),null),w=new ar(p,c.isFullyInitialized(),l.filtersNodes()),_=new ar(g,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=da(_,w),this.eventGenerator_=new RN(this.query_)}get query(){return this.query_}}function o1(r){return r.viewCache_.serverCache.getNode()}function l1(r){return Ql(r.viewCache_)}function a1(r,e){const n=Mr(r.viewCache_);return n&&(r.query._queryParams.loadsAllData()||!we(e)&&!n.getImmediateChild(_e(e)).isEmpty())?n.getChild(e):null}function xg(r){return r.eventRegistrations_.length===0}function u1(r,e){r.eventRegistrations_.push(e)}function Ng(r,e,n){const s=[];if(n){W(e==null,"A cancel should cancel all event registrations.");const l=r.query._path;r.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,l);c&&s.push(c)})}if(e){let l=[];for(let a=0;a<r.eventRegistrations_.length;++a){const c=r.eventRegistrations_[a];if(!c.matches(e))l.push(c);else if(e.hasAnyCallback()){l=l.concat(r.eventRegistrations_.slice(a+1));break}}r.eventRegistrations_=l}else r.eventRegistrations_=[];return s}function kg(r,e,n,s){e.type===Jt.MERGE&&e.source.queryId!==null&&(W(Mr(r.viewCache_),"We should always have a full cache before handling merges"),W(Ql(r.viewCache_),"Missing event cache, even though we have a server cache"));const l=r.viewCache_,a=ZN(r.processor_,l,e,n,s);return XN(r.processor_,a.viewCache),W(a.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=a.viewCache,R_(r,a.changes,a.viewCache.eventCache.getNode(),null)}function c1(r,e){const n=r.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(He,(a,c)=>{s.push(Ii(a,c))}),n.isFullyInitialized()&&s.push(w_(n.getNode())),R_(r,s,n.getNode(),e)}function R_(r,e,n,s){const l=s?[s]:r.eventRegistrations_;return AN(r.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl;class A_{constructor(){this.views=new Map}}function d1(r){W(!Zl,"__referenceConstructor has already been defined"),Zl=r}function h1(){return W(Zl,"Reference.ts has not been loaded"),Zl}function f1(r){return r.views.size===0}function Jd(r,e,n,s){const l=e.source.queryId;if(l!==null){const a=r.views.get(l);return W(a!=null,"SyncTree gave us an op for an invalid query."),kg(a,e,n,s)}else{let a=[];for(const c of r.views.values())a=a.concat(kg(c,e,n,s));return a}}function b_(r,e,n,s,l){const a=e._queryIdentifier,c=r.views.get(a);if(!c){let f=Yl(n,l?s:null),p=!1;f?p=!0:s instanceof ue?(f=Kd(n,s),p=!1):(f=ue.EMPTY_NODE,p=!1);const g=da(new ar(f,p,!1),new ar(s,l,!1));return new s1(e,g)}return c}function p1(r,e,n,s,l,a){const c=b_(r,e,s,l,a);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,c),u1(c,n),c1(c,n)}function m1(r,e,n,s){const l=e._queryIdentifier,a=[];let c=[];const f=ur(r);if(l==="default")for(const[p,g]of r.views.entries())c=c.concat(Ng(g,n,s)),xg(g)&&(r.views.delete(p),g.query._queryParams.loadsAllData()||a.push(g.query));else{const p=r.views.get(l);p&&(c=c.concat(Ng(p,n,s)),xg(p)&&(r.views.delete(l),p.query._queryParams.loadsAllData()||a.push(p.query)))}return f&&!ur(r)&&a.push(new(h1())(e._repo,e._path)),{removed:a,events:c}}function O_(r){const e=[];for(const n of r.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function or(r,e){let n=null;for(const s of r.views.values())n=n||a1(s,e);return n}function D_(r,e){if(e._queryParams.loadsAllData())return fa(r);{const s=e._queryIdentifier;return r.views.get(s)}}function L_(r,e){return D_(r,e)!=null}function ur(r){return fa(r)!=null}function fa(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea;function g1(r){W(!ea,"__referenceConstructor has already been defined"),ea=r}function v1(){return W(ea,"Reference.ts has not been loaded"),ea}let _1=1;class Tg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Oe(null),this.pendingWriteTree_=qN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function M_(r,e,n,s,l){return LN(r.pendingWriteTree_,e,n,s,l),l?Mi(r,new Lr(Hd(),e,n)):[]}function y1(r,e,n,s){MN(r.pendingWriteTree_,e,n,s);const l=Oe.fromObject(n);return Mi(r,new xi(Hd(),e,l))}function er(r,e,n=!1){const s=jN(r.pendingWriteTree_,e);if(FN(r.pendingWriteTree_,e)){let a=new Oe(null);return s.snap!=null?a=a.set(Ie(),!0):ut(s.children,c=>{a=a.set(new Pe(c),!0)}),Mi(r,new Kl(s.path,a,n))}else return[]}function oo(r,e,n){return Mi(r,new Lr(Gd(),e,n))}function w1(r,e,n){const s=Oe.fromObject(n);return Mi(r,new xi(Gd(),e,s))}function S1(r,e){return Mi(r,new qs(Gd(),e))}function C1(r,e,n){const s=Zd(r,n);if(s){const l=eh(s),a=l.path,c=l.queryId,f=gt(a,e),p=new qs(qd(c),f);return th(r,a,p)}else return[]}function ta(r,e,n,s,l=!1){const a=e._path,c=r.syncPointTree_.get(a);let f=[];if(c&&(e._queryIdentifier==="default"||L_(c,e))){const p=m1(c,e,n,s);f1(c)&&(r.syncPointTree_=r.syncPointTree_.remove(a));const g=p.removed;if(f=p.events,!l){const w=g.findIndex(y=>y._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(a,(y,R)=>ur(R));if(w&&!_){const y=r.syncPointTree_.subtree(a);if(!y.isEmpty()){const R=x1(y);for(let b=0;b<R.length;++b){const D=R[b],O=D.query,J=z_(r,D);r.listenProvider_.startListening(Ms(O),Ks(r,O),J.hashFn,J.onComplete)}}}!_&&g.length>0&&!s&&(w?r.listenProvider_.stopListening(Ms(e),null):g.forEach(y=>{const R=r.queryToTagMap.get(pa(y));r.listenProvider_.stopListening(Ms(y),R)}))}N1(r,g)}return f}function j_(r,e,n,s){const l=Zd(r,s);if(l!=null){const a=eh(l),c=a.path,f=a.queryId,p=gt(c,e),g=new Lr(qd(f),p,n);return th(r,c,g)}else return[]}function E1(r,e,n,s){const l=Zd(r,s);if(l){const a=eh(l),c=a.path,f=a.queryId,p=gt(c,e),g=Oe.fromObject(n),w=new xi(qd(f),p,g);return th(r,c,w)}else return[]}function ld(r,e,n,s=!1){const l=e._path;let a=null,c=!1;r.syncPointTree_.foreachOnPath(l,(y,R)=>{const b=gt(y,l);a=a||or(R,b),c=c||ur(R)});let f=r.syncPointTree_.get(l);f?(c=c||ur(f),a=a||or(f,Ie())):(f=new A_,r.syncPointTree_=r.syncPointTree_.set(l,f));let p;a!=null?p=!0:(p=!1,a=ue.EMPTY_NODE,r.syncPointTree_.subtree(l).foreachChild((R,b)=>{const D=or(b,Ie());D&&(a=a.updateImmediateChild(R,D))}));const g=L_(f,e);if(!g&&!e._queryParams.loadsAllData()){const y=pa(e);W(!r.queryToTagMap.has(y),"View does not exist, but we have a tag");const R=k1();r.queryToTagMap.set(y,R),r.tagToQueryMap.set(R,y)}const w=ha(r.pendingWriteTree_,l);let _=p1(f,e,n,w,a,p);if(!g&&!c&&!s){const y=D_(f,e);_=_.concat(T1(r,e,y))}return _}function Xd(r,e,n){const l=r.pendingWriteTree_,a=r.syncPointTree_.findOnPath(e,(c,f)=>{const p=gt(c,e),g=or(f,p);if(g)return g});return x_(l,e,a,n,!0)}function I1(r,e){const n=e._path;let s=null;r.syncPointTree_.foreachOnPath(n,(g,w)=>{const _=gt(g,n);s=s||or(w,_)});let l=r.syncPointTree_.get(n);l?s=s||or(l,Ie()):(l=new A_,r.syncPointTree_=r.syncPointTree_.set(n,l));const a=s!=null,c=a?new ar(s,!0,!1):null,f=ha(r.pendingWriteTree_,e._path),p=b_(l,e,f,a?c.getNode():ue.EMPTY_NODE,a);return l1(p)}function Mi(r,e){return F_(e,r.syncPointTree_,null,ha(r.pendingWriteTree_,Ie()))}function F_(r,e,n,s){if(we(r.path))return U_(r,e,n,s);{const l=e.get(Ie());n==null&&l!=null&&(n=or(l,Ie()));let a=[];const c=_e(r.path),f=r.operationForChild(c),p=e.children.get(c);if(p&&f){const g=n?n.getImmediateChild(c):null,w=N_(s,c);a=a.concat(F_(f,p,g,w))}return l&&(a=a.concat(Jd(l,r,s,n))),a}}function U_(r,e,n,s){const l=e.get(Ie());n==null&&l!=null&&(n=or(l,Ie()));let a=[];return e.children.inorderTraversal((c,f)=>{const p=n?n.getImmediateChild(c):null,g=N_(s,c),w=r.operationForChild(c);w&&(a=a.concat(U_(w,f,p,g)))}),l&&(a=a.concat(Jd(l,r,s,n))),a}function z_(r,e){const n=e.query,s=Ks(r,n);return{hashFn:()=>(o1(e)||ue.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return s?C1(r,n._path,s):S1(r,n._path);{const a=Sx(l,n);return ta(r,n,null,a)}}}}function Ks(r,e){const n=pa(e);return r.queryToTagMap.get(n)}function pa(r){return r._path.toString()+"$"+r._queryIdentifier}function Zd(r,e){return r.tagToQueryMap.get(e)}function eh(r){const e=r.indexOf("$");return W(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new Pe(r.substr(0,e))}}function th(r,e,n){const s=r.syncPointTree_.get(e);W(s,"Missing sync point for query tag that we're tracking");const l=ha(r.pendingWriteTree_,e);return Jd(s,n,l,null)}function x1(r){return r.fold((e,n,s)=>{if(n&&ur(n))return[fa(n)];{let l=[];return n&&(l=O_(n)),ut(s,(a,c)=>{l=l.concat(c)}),l}})}function Ms(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(v1())(r._repo,r._path):r}function N1(r,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const l=pa(s),a=r.queryToTagMap.get(l);r.queryToTagMap.delete(l),r.tagToQueryMap.delete(a)}}}function k1(){return _1++}function T1(r,e,n){const s=e._path,l=Ks(r,e),a=z_(r,n),c=r.listenProvider_.startListening(Ms(e),l,a.hashFn,a.onComplete),f=r.syncPointTree_.subtree(s);if(l)W(!ur(f.value),"If we're adding a query, it shouldn't be shadowed");else{const p=f.fold((g,w,_)=>{if(!we(g)&&w&&ur(w))return[fa(w).query];{let y=[];return w&&(y=y.concat(O_(w).map(R=>R.query))),ut(_,(R,b)=>{y=y.concat(b)}),y}});for(let g=0;g<p.length;++g){const w=p[g];r.listenProvider_.stopListening(Ms(w),Ks(r,w))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new nh(n)}node(){return this.node_}}class rh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ve(this.path_,e);return new rh(this.syncTree_,n)}node(){return Xd(this.syncTree_,this.path_)}}const P1=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},Pg=function(r,e,n){if(!r||typeof r!="object")return r;if(W(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return R1(r[".sv"],e,n);if(typeof r[".sv"]=="object")return A1(r[".sv"],e);W(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},R1=function(r,e,n){switch(r){case"timestamp":return n.timestamp;default:W(!1,"Unexpected server value: "+r)}},A1=function(r,e,n){r.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const s=r.increment;typeof s!="number"&&W(!1,"Unexpected increment value: "+s);const l=e.node();if(W(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const c=l.getValue();return typeof c!="number"?s:c+s},$_=function(r,e,n,s){return ih(e,new rh(n,r),s)},B_=function(r,e,n){return ih(r,new nh(e),n)};function ih(r,e,n){const s=r.getPriority().val(),l=Pg(s,e.getImmediateChild(".priority"),n);let a;if(r.isLeafNode()){const c=r,f=Pg(c.getValue(),e,n);return f!==c.getValue()||l!==c.getPriority().val()?new rt(f,Xe(l)):r}else{const c=r;return a=c,l!==c.getPriority().val()&&(a=a.updatePriority(new rt(l))),c.forEachChild(He,(f,p)=>{const g=ih(p,e.getImmediateChild(f),n);g!==p&&(a=a.updateImmediateChild(f,g))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function oh(r,e){let n=e instanceof Pe?e:new Pe(e),s=r,l=_e(n);for(;l!==null;){const a=wi(s.node.children,l)||{children:{},childCount:0};s=new sh(l,s,a),n=De(n),l=_e(n)}return s}function ji(r){return r.node.value}function W_(r,e){r.node.value=e,ad(r)}function V_(r){return r.node.childCount>0}function b1(r){return ji(r)===void 0&&!V_(r)}function ma(r,e){ut(r.node.children,(n,s)=>{e(new sh(n,r,s))})}function H_(r,e,n,s){n&&e(r),ma(r,l=>{H_(l,e,!0)})}function O1(r,e,n){let s=r.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function lo(r){return new Pe(r.parent===null?r.name:lo(r.parent)+"/"+r.name)}function ad(r){r.parent!==null&&D1(r.parent,r.name,r)}function D1(r,e,n){const s=b1(n),l=cn(r.node.children,e);s&&l?(delete r.node.children[e],r.node.childCount--,ad(r)):!s&&!l&&(r.node.children[e]=n.node,r.node.childCount++,ad(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=/[\[\].#$\/\u0000-\u001F\u007F]/,M1=/[\[\].#$\u0000-\u001F\u007F]/,Oc=10*1024*1024,lh=function(r){return typeof r=="string"&&r.length!==0&&!L1.test(r)},G_=function(r){return typeof r=="string"&&r.length!==0&&!M1.test(r)},j1=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),G_(r)},F1=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!Dd(r)||r&&typeof r=="object"&&cn(r,".sv")},q_=function(r,e,n,s){s&&e===void 0||ga(sa(r,"value"),e,n)},ga=function(r,e,n){const s=n instanceof Pe?new tN(n,r):n;if(e===void 0)throw new Error(r+"contains undefined "+kr(s));if(typeof e=="function")throw new Error(r+"contains a function "+kr(s)+" with contents = "+e.toString());if(Dd(e))throw new Error(r+"contains "+e.toString()+" "+kr(s));if(typeof e=="string"&&e.length>Oc/3&&oa(e)>Oc)throw new Error(r+"contains a string greater than "+Oc+" utf8 bytes "+kr(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,a=!1;if(ut(e,(c,f)=>{if(c===".value")l=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!lh(c)))throw new Error(r+" contains an invalid key ("+c+") "+kr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nN(s,c),ga(r,f,s),rN(s)}),l&&a)throw new Error(r+' contains ".value" child '+kr(s)+" in addition to actual children.")}},U1=function(r,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const a=Ws(s);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!lh(a[c]))throw new Error(r+"contains an invalid key ("+a[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(eN);let l=null;for(n=0;n<e.length;n++){if(s=e[n],l!==null&&Ft(l,s))throw new Error(r+"contains a path "+l.toString()+" that is ancestor of another path "+s.toString());l=s}},z1=function(r,e,n,s){const l=sa(r,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const a=[];ut(e,(c,f)=>{const p=new Pe(c);if(ga(l,f,Ve(n,p)),Ud(p)===".priority"&&!F1(f))throw new Error(l+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(p)}),U1(l,a)},K_=function(r,e,n,s){if(!G_(n))throw new Error(sa(r,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$1=function(r,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),K_(r,e,n)},ah=function(r,e){if(_e(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},B1=function(r,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!lh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!j1(n))throw new Error(sa(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function va(r,e){let n=null;for(let s=0;s<e.length;s++){const l=e[s],a=l.getPath();n!==null&&!zd(a,n.path)&&(r.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(l)}n&&r.eventLists_.push(n)}function Q_(r,e,n){va(r,n),Y_(r,s=>zd(s,e))}function Ut(r,e,n){va(r,n),Y_(r,s=>Ft(s,e)||Ft(e,s))}function Y_(r,e){r.recursionDepth_++;let n=!0;for(let s=0;s<r.eventLists_.length;s++){const l=r.eventLists_[s];if(l){const a=l.path;e(a)?(V1(r.eventLists_[s]),r.eventLists_[s]=null):n=!1}}n&&(r.eventLists_=[]),r.recursionDepth_--}function V1(r){for(let e=0;e<r.events.length;e++){const n=r.events[e];if(n!==null){r.events[e]=null;const s=n.getEventRunner();bs&&at("event: "+n.toString()),Li(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="repo_interrupt",G1=25;class q1{constructor(e,n,s,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new W1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ql(),this.transactionQueueTree_=new sh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function K1(r,e,n){if(r.stats_=jd(r.repoInfo_),r.forceRestClient_||xx())r.server_=new Gl(r.repoInfo_,(s,l,a,c)=>{Rg(r,s,l,a,c)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Ag(r,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ze(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}r.persistentConnection_=new En(r.repoInfo_,e,(s,l,a,c)=>{Rg(r,s,l,a,c)},s=>{Ag(r,s)},s=>{Q1(r,s)},r.authTokenProvider_,r.appCheckProvider_,n),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(s=>{r.server_.refreshAuthToken(s)}),r.appCheckProvider_.addTokenChangeListener(s=>{r.server_.refreshAppCheckToken(s.token)}),r.statsReporter_=Rx(r.repoInfo_,()=>new PN(r.stats_,r.server_)),r.infoData_=new IN,r.infoSyncTree_=new Tg({startListening:(s,l,a,c)=>{let f=[];const p=r.infoData_.getNode(s._path);return p.isEmpty()||(f=oo(r.infoSyncTree_,s._path,p),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),uh(r,"connected",!1),r.serverSyncTree_=new Tg({startListening:(s,l,a,c)=>(r.server_.listen(s,a,l,(f,p)=>{const g=c(f,p);Ut(r.eventQueue_,s._path,g)}),[]),stopListening:(s,l)=>{r.server_.unlisten(s,l)}})}function J_(r){const n=r.infoData_.getNode(new Pe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function _a(r){return P1({timestamp:J_(r)})}function Rg(r,e,n,s,l){r.dataUpdateCount++;const a=new Pe(e);n=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,n):n;let c=[];if(l)if(s){const p=Ll(n,g=>Xe(g));c=E1(r.serverSyncTree_,a,p,l)}else{const p=Xe(n);c=j_(r.serverSyncTree_,a,p,l)}else if(s){const p=Ll(n,g=>Xe(g));c=w1(r.serverSyncTree_,a,p)}else{const p=Xe(n);c=oo(r.serverSyncTree_,a,p)}let f=a;c.length>0&&(f=ki(r,a)),Ut(r.eventQueue_,f,c)}function Ag(r,e){uh(r,"connected",e),e===!1&&Z1(r)}function Q1(r,e){ut(e,(n,s)=>{uh(r,n,s)})}function uh(r,e,n){const s=new Pe("/.info/"+e),l=Xe(n);r.infoData_.updateSnapshot(s,l);const a=oo(r.infoSyncTree_,s,l);Ut(r.eventQueue_,s,a)}function ch(r){return r.nextWriteId_++}function Y1(r,e,n){const s=I1(r.serverSyncTree_,e);return s!=null?Promise.resolve(s):r.server_.get(e).then(l=>{const a=Xe(l).withIndex(e._queryParams.getIndex());ld(r.serverSyncTree_,e,n,!0);let c;if(e._queryParams.loadsAllData())c=oo(r.serverSyncTree_,e._path,a);else{const f=Ks(r.serverSyncTree_,e);c=j_(r.serverSyncTree_,e._path,a,f)}return Ut(r.eventQueue_,e._path,c),ta(r.serverSyncTree_,e,n,null,!0),a},l=>(ao(r,"get for query "+Ze(e)+" failed: "+l),Promise.reject(new Error(l))))}function J1(r,e,n,s,l){ao(r,"set",{path:e.toString(),value:n,priority:s});const a=_a(r),c=Xe(n,s),f=Xd(r.serverSyncTree_,e),p=B_(c,f,a),g=ch(r),w=M_(r.serverSyncTree_,e,p,g,!0);va(r.eventQueue_,w),r.server_.put(e.toString(),c.val(!0),(y,R)=>{const b=y==="ok";b||vt("set at "+e+" failed: "+y);const D=er(r.serverSyncTree_,g,!b);Ut(r.eventQueue_,e,D),ud(r,l,y,R)});const _=hh(r,e);ki(r,_),Ut(r.eventQueue_,_,[])}function X1(r,e,n,s){ao(r,"update",{path:e.toString(),value:n});let l=!0;const a=_a(r),c={};if(ut(n,(f,p)=>{l=!1,c[f]=$_(Ve(e,f),Xe(p),r.serverSyncTree_,a)}),l)at("update() called with empty data.  Don't do anything."),ud(r,s,"ok",void 0);else{const f=ch(r),p=y1(r.serverSyncTree_,e,c,f);va(r.eventQueue_,p),r.server_.merge(e.toString(),n,(g,w)=>{const _=g==="ok";_||vt("update at "+e+" failed: "+g);const y=er(r.serverSyncTree_,f,!_),R=y.length>0?ki(r,e):e;Ut(r.eventQueue_,R,y),ud(r,s,g,w)}),ut(n,g=>{const w=hh(r,Ve(e,g));ki(r,w)}),Ut(r.eventQueue_,e,[])}}function Z1(r){ao(r,"onDisconnectEvents");const e=_a(r),n=ql();td(r.onDisconnect_,Ie(),(l,a)=>{const c=$_(l,a,r.serverSyncTree_,e);S_(n,l,c)});let s=[];td(n,Ie(),(l,a)=>{s=s.concat(oo(r.serverSyncTree_,l,a));const c=hh(r,l);ki(r,c)}),r.onDisconnect_=ql(),Ut(r.eventQueue_,Ie(),s)}function ek(r,e,n){let s;_e(e._path)===".info"?s=ld(r.infoSyncTree_,e,n):s=ld(r.serverSyncTree_,e,n),Q_(r.eventQueue_,e._path,s)}function tk(r,e,n){let s;_e(e._path)===".info"?s=ta(r.infoSyncTree_,e,n):s=ta(r.serverSyncTree_,e,n),Q_(r.eventQueue_,e._path,s)}function nk(r){r.persistentConnection_&&r.persistentConnection_.interrupt(H1)}function ao(r,...e){let n="";r.persistentConnection_&&(n=r.persistentConnection_.id+":"),at(n,...e)}function ud(r,e,n,s){e&&Li(()=>{if(n==="ok")e(null);else{const l=(n||"error").toUpperCase();let a=l;s&&(a+=": "+s);const c=new Error(a);c.code=l,e(c)}})}function X_(r,e,n){return Xd(r.serverSyncTree_,e,n)||ue.EMPTY_NODE}function dh(r,e=r.transactionQueueTree_){if(e||ya(r,e),ji(e)){const n=ey(r,e);W(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&rk(r,lo(e),n)}else V_(e)&&ma(e,n=>{dh(r,n)})}function rk(r,e,n){const s=n.map(g=>g.currentWriteId),l=X_(r,e,s);let a=l;const c=l.hash();for(let g=0;g<n.length;g++){const w=n[g];W(w.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const _=gt(e,w.path);a=a.updateChild(_,w.currentOutputSnapshotRaw)}const f=a.val(!0),p=e;r.server_.put(p.toString(),f,g=>{ao(r,"transaction put response",{path:p.toString(),status:g});let w=[];if(g==="ok"){const _=[];for(let y=0;y<n.length;y++)n[y].status=2,w=w.concat(er(r.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&_.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();ya(r,oh(r.transactionQueueTree_,e)),dh(r,r.transactionQueueTree_),Ut(r.eventQueue_,e,w);for(let y=0;y<_.length;y++)Li(_[y])}else{if(g==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{vt("transaction at "+p.toString()+" failed: "+g);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=g}ki(r,e)}},c)}function ki(r,e){const n=Z_(r,e),s=lo(n),l=ey(r,n);return ik(r,l,s),s}function ik(r,e,n){if(e.length===0)return;const s=[];let l=[];const c=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const p=e[f],g=gt(n,p.path);let w=!1,_;if(W(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)w=!0,_=p.abortReason,l=l.concat(er(r.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=G1)w=!0,_="maxretry",l=l.concat(er(r.serverSyncTree_,p.currentWriteId,!0));else{const y=X_(r,p.path,c);p.currentInputSnapshot=y;const R=e[f].update(y.val());if(R!==void 0){ga("transaction failed: Data returned ",R,p.path);let b=Xe(R);typeof R=="object"&&R!=null&&cn(R,".priority")||(b=b.updatePriority(y.getPriority()));const O=p.currentWriteId,J=_a(r),A=B_(b,y,J);p.currentOutputSnapshotRaw=b,p.currentOutputSnapshotResolved=A,p.currentWriteId=ch(r),c.splice(c.indexOf(O),1),l=l.concat(M_(r.serverSyncTree_,p.path,A,p.currentWriteId,p.applyLocally)),l=l.concat(er(r.serverSyncTree_,O,!0))}else w=!0,_="nodata",l=l.concat(er(r.serverSyncTree_,p.currentWriteId,!0))}Ut(r.eventQueue_,n,l),l=[],w&&(e[f].status=2,(function(y){setTimeout(y,Math.floor(0))})(e[f].unwatcher),e[f].onComplete&&(_==="nodata"?s.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):s.push(()=>e[f].onComplete(new Error(_),!1,null))))}ya(r,r.transactionQueueTree_);for(let f=0;f<s.length;f++)Li(s[f]);dh(r,r.transactionQueueTree_)}function Z_(r,e){let n,s=r.transactionQueueTree_;for(n=_e(e);n!==null&&ji(s)===void 0;)s=oh(s,n),e=De(e),n=_e(e);return s}function ey(r,e){const n=[];return ty(r,e,n),n.sort((s,l)=>s.order-l.order),n}function ty(r,e,n){const s=ji(e);if(s)for(let l=0;l<s.length;l++)n.push(s[l]);ma(e,l=>{ty(r,l,n)})}function ya(r,e){const n=ji(e);if(n){let s=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[s]=n[l],s++);n.length=s,W_(e,n.length>0?n:void 0)}ma(e,s=>{ya(r,s)})}function hh(r,e){const n=lo(Z_(r,e)),s=oh(r.transactionQueueTree_,e);return O1(s,l=>{Dc(r,l)}),Dc(r,s),H_(s,l=>{Dc(r,l)}),n}function Dc(r,e){const n=ji(e);if(n){const s=[];let l=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(W(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(W(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),l=l.concat(er(r.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&s.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?W_(e,void 0):n.length=a+1,Ut(r.eventQueue_,lo(e),l);for(let c=0;c<s.length;c++)Li(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(r){let e="";const n=r.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let l=n[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function ok(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const n of r.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):vt(`Invalid query segment '${n}' in query '${r}'`)}return e}const bg=function(r,e){const n=lk(r),s=n.namespace;n.domain==="firebase.com"&&Nn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Nn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||gx();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new i_(n.host,n.secure,s,l,e,"",s!==n.subdomain),path:new Pe(n.pathString)}},lk=function(r){let e="",n="",s="",l="",a="",c=!0,f="https",p=443;if(typeof r=="string"){let g=r.indexOf("//");g>=0&&(f=r.substring(0,g-1),r=r.substring(g+2));let w=r.indexOf("/");w===-1&&(w=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),e=r.substring(0,Math.min(w,_)),w<_&&(l=sk(r.substring(w,_)));const y=ok(r.substring(Math.min(r.length,_)));g=e.indexOf(":"),g>=0?(c=f==="https"||f==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const R=e.slice(0,g);if(R.toLowerCase()==="localhost")n="localhost";else if(R.split(".").length<=2)n=R;else{const b=e.indexOf(".");s=e.substring(0,b).toLowerCase(),n=e.substring(b+1),a=s}"ns"in y&&(a=y.ns)}return{host:e,port:p,domain:n,subdomain:s,secure:c,scheme:f,pathString:l,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ak=(function(){let r=0;const e=[];return function(n){const s=n===r;r=n;let l;const a=new Array(8);for(l=7;l>=0;l--)a[l]=Og.charAt(n%64),n=Math.floor(n/64);W(n===0,"Cannot push at time == 0");let c=a.join("");if(s){for(l=11;l>=0&&e[l]===63;l--)e[l]=0;e[l]++}else for(l=0;l<12;l++)e[l]=Math.floor(Math.random()*64);for(l=0;l<12;l++)c+=Og.charAt(e[l]);return W(c.length===20,"nextPushId: Length should be 20."),c}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,s,l){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ze(this.snapshot.exportVal())}}class ck{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return W(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n,s,l){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=l}get key(){return we(this._path)?null:Ud(this._path)}get ref(){return new Tn(this._repo,this._path)}get _queryIdentifier(){const e=_g(this._queryParams),n=Ld(e);return n==="{}"?"default":n}get _queryObject(){return _g(this._queryParams)}isEqual(e){if(e=yt(e),!(e instanceof fh))return!1;const n=this._repo===e._repo,s=zd(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+Zx(this._path)}}class Tn extends fh{constructor(e,n){super(e,n,new Vd,!1)}get parent(){const e=f_(this._path);return e===null?null:new Tn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Qs{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Pe(e),s=Ys(this.ref,e);return new Qs(this._node.getChild(n),s,He)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,l)=>e(new Qs(l,Ys(this.ref,s),He)))}hasChild(e){const n=new Pe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Re(r,e){return r=yt(r),r._checkNotDeleted("ref"),e!==void 0?Ys(r._root,e):r._root}function Ys(r,e){return r=yt(r),_e(r._path)===null?$1("child","path",e):K_("child","path",e),new Tn(r._repo,Ve(r._path,e))}function ry(r,e){r=yt(r),ah("push",r._path),q_("push",e,r._path,!0);const n=J_(r._repo),s=ak(n),l=Ys(r,s),a=Ys(r,s);let c;return c=Promise.resolve(a),l.then=c.then.bind(c),l.catch=c.then.bind(c,void 0),l}function cd(r){return ah("remove",r._path),dk(r,null)}function dk(r,e){r=yt(r),ah("set",r._path),q_("set",e,r._path,!1);const n=new Xs;return J1(r._repo,r._path,e,null,n.wrapCallback(()=>{})),n.promise}function kt(r,e){z1("update",e,r._path);const n=new Xs;return X1(r._repo,r._path,e,n.wrapCallback(()=>{})),n.promise}function Pn(r){r=yt(r);const e=new ny(()=>{}),n=new wa(e);return Y1(r._repo,r,n).then(s=>new Qs(s,new Tn(r._repo,r._path),r._queryParams.getIndex()))}class wa{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new uk("value",this,new Qs(e.snapshotNode,new Tn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ck(this,e,n):null}matches(e){return e instanceof wa?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function hk(r,e,n,s,l){const a=new ny(n,void 0),c=new wa(a);return ek(r._repo,r,c),()=>tk(r._repo,r,c)}function Js(r,e,n,s){return hk(r,"value",e)}d1(Tn);g1(Tn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="FIREBASE_DATABASE_EMULATOR_HOST",dd={};let pk=!1;function mk(r,e,n,s){const l=e.lastIndexOf(":"),a=e.substring(0,l),c=Ai(a);r.repoInfo_=new i_(e,c,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(r.authTokenProvider_=s)}function gk(r,e,n,s,l){let a=s||r.options.databaseURL;a===void 0&&(r.options.projectId||Nn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),at("Using default host for project ",r.options.projectId),a=`${r.options.projectId}-default-rtdb.firebaseio.com`);let c=bg(a,l),f=c.repoInfo,p;typeof process<"u"&&eg&&(p=eg[fk]),p?(a=`http://${p}?ns=${f.namespace}`,c=bg(a,l),f=c.repoInfo):c.repoInfo.secure;const g=new kx(r.name,r.options,e);B1("Invalid Firebase Database URL",c),we(c.path)||Nn("Database URL must point to the root of a Firebase Database (not including a child path).");const w=_k(f,r,g,new Nx(r,n));return new yk(w,r)}function vk(r,e){const n=dd[e];(!n||n[r.key]!==r)&&Nn(`Database ${e}(${r.repoInfo_}) has already been deleted.`),nk(r),delete n[r.key]}function _k(r,e,n,s){let l=dd[e.name];l||(l={},dd[e.name]=l);let a=l[r.toURLString()];return a&&Nn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new q1(r,pk,n,s),l[r.toURLString()]=a,a}class yk{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(K1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tn(this._repo,Ie())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Nn("Cannot call "+e+" on a deleted database.")}}function wk(r=dv(),e){const n=Cd(r,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=OS("database");s&&Sk(n,...s)}return n}function Sk(r,e,n,s={}){r=yt(r),r._checkNotDeleted("useEmulator");const l=`${e}:${n}`,a=r._repoInternal;if(r._instanceStarted){if(l===r._repoInternal.repoInfo_.host&&Ar(s,a.repoInfo_.emulatorOptions))return;Nn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)s.mockUserToken&&Nn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Rl(Rl.OWNER);else if(s.mockUserToken){const f=typeof s.mockUserToken=="string"?s.mockUserToken:DS(s.mockUserToken,r.app.options.projectId);c=new Rl(f)}Ai(e)&&(iv(e),sv("Database",!0)),mk(a,l,s,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(r){cx(Oi),Si(new br("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return gk(s,l,a,n)},"PUBLIC").setMultipleInstances(!0)),ir(tg,ng,r),ir(tg,ng,"esm2017")}En.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};En.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};Ck();const Ek={apiKey:"AIzaSyCrFLv4OkNYI86ll6U0Xjo5OegDaUzqFMA",authDomain:"stockduloft.firebaseapp.com",databaseURL:"https://stockduloft-default-rtdb.firebaseio.com",projectId:"stockduloft",storageBucket:"stockduloft.firebasestorage.app",messagingSenderId:"375022059708",appId:"1:375022059708:web:f059d080070233a5b590b9",measurementId:"G-C7CW1SSW2Z"},iy=cv(Ek),Ae=wk(iy),Lc=ox(iy),Ik=new yn,sy=P.createContext(null);function xk({children:r}){const[e,n]=P.useState(null),[s,l]=P.useState(!0);P.useEffect(()=>KE(Lc,p=>{n(p),l(!1)}),[]);const a=async()=>{try{await mI(Lc,Ik)}catch(f){throw console.error("Erreur de connexion:",f),f}},c=async()=>{try{await QE(Lc)}catch(f){console.error("Erreur de dconnexion:",f)}};return s?m.jsxs("div",{className:"loading-screen",children:[m.jsx("div",{className:"loading-spinner"}),m.jsx("p",{children:"Chargement..."})]}):m.jsx(sy.Provider,{value:{user:e,login:a,logout:c},children:r})}function ph(){const r=P.useContext(sy);if(!r)throw new Error("useAuth doit tre utilis dans un AuthProvider");return r}const Mc=600,jc=600,Nk=.6,xl=80,kk=.4;function oy(r){return new Promise((e,n)=>{const s=new FileReader;s.onload=l=>{const a=new Image;a.onload=()=>{const c=document.createElement("canvas");let{width:f,height:p}=a;f>p?f>Mc&&(p=Math.round(p*Mc/f),f=Mc):p>jc&&(f=Math.round(f*jc/p),p=jc),c.width=f,c.height=p,c.getContext("2d").drawImage(a,0,0,f,p);const w=c.toDataURL("image/jpeg",Nk);e(w)},a.onerror=()=>n(new Error("Impossible de charger l'image")),a.src=l.target.result},s.onerror=()=>n(new Error("Impossible de lire le fichier")),s.readAsDataURL(r)})}function Tk(r){return new Promise((e,n)=>{const s=new FileReader;s.onload=l=>{const a=new Image;a.onload=()=>{const c=document.createElement("canvas");c.width=xl,c.height=xl;const f=c.getContext("2d"),p=Math.min(a.width,a.height),g=(a.width-p)/2,w=(a.height-p)/2;f.drawImage(a,g,w,p,p,0,0,xl,xl);const _=c.toDataURL("image/jpeg",kk);e(_)},a.onerror=()=>n(new Error("Impossible de charger l'image")),a.src=l.target.result},s.onerror=()=>n(new Error("Impossible de lire le fichier")),s.readAsDataURL(r)})}const en="stockduloft/items",Fi="stockduloft/photos",uo="stockduloft/stores",Sa=4;async function Pk(r){const e=Re(Ae,`${Fi}/${r}`),n=await Pn(e);return n.exists()&&n.val().photoBase64||null}async function Fc(r){const e=Re(Ae,`${Fi}/${r}`),n=await Pn(e);if(!n.exists())return[];const s=n.val(),l=[];s.photoBase64&&l.push(s.photoBase64);for(let a=1;a<=Sa;a++)s[`photo_${a}`]&&l.push(s[`photo_${a}`]);return l}async function Rk(r,e){const n=Re(Ae,`${Fi}/${r}`),s=await Pn(n),l=s.exists()?s.val():{};let a=null;for(let g=1;g<=Sa;g++)if(!l[`photo_${g}`]){a=g;break}if(a===null)return null;const c=await oy(e);await kt(n,{[`photo_${a}`]:c});const f=ly(l)+1,p=Re(Ae,`${en}/${r}`);return await kt(p,{photoCount:f,updatedAt:Date.now()}),a}async function Ak(r,e){if(e<1||e>Sa)return;const n=Re(Ae,`${Fi}/${r}`);await kt(n,{[`photo_${e}`]:null});const s=await Pn(n),l=s.exists()?s.val():{},a=ly(l),c=Re(Ae,`${en}/${r}`);await kt(c,{photoCount:a,updatedAt:Date.now()})}function ly(r){let e=0;r.photoBase64&&e++;for(let n=1;n<=Sa;n++)r[`photo_${n}`]&&e++;return e}function ay(r){const e=Re(Ae,uo);return Js(e,s=>{const l=[];s.exists()&&s.forEach(a=>{l.push({id:a.key,...a.val()})}),l.sort((a,c)=>(a.name||"").localeCompare(c.name||"")),r(l)})}async function uy(r){const e=Re(Ae,`${uo}/${r}`),n=await Pn(e);return n.exists()?{id:r,...n.val()}:null}async function bk({name:r,commissionPercent:e,locationFee:n}){const s={name:r.trim(),commissionPercent:parseFloat(e)||0,locationFee:parseFloat(n)||0,active:!0,createdAt:Date.now()},l=Re(Ae,uo),a=ry(l);return await kt(a,s),{id:a.key,...s}}async function Ok(r,e){const n=Re(Ae,`${uo}/${r}`);await kt(n,e)}async function Dk(r){const e=Re(Ae,`${uo}/${r}`);await cd(e)}async function Lk({uniqueId:r,description:e,longDescription:n,price:s,photoFile:l,category:a,itemDate:c}){const f={uniqueId:r.toUpperCase().trim(),description:e.trim(),longDescription:(n==null?void 0:n.trim())||"",price:parseFloat(s),hasPhoto:!1,photoCount:0,category:a||"",status:"inventory",itemDate:c||new Date().toISOString().split("T")[0],consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,sellerName:"",createdAt:Date.now(),updatedAt:Date.now()},p=Re(Ae,en),g=ry(p);if(await kt(g,f),l){const[w,_]=await Promise.all([oy(l),Tk(l)]),y=Re(Ae,`${Fi}/${g.key}`);await kt(y,{photoBase64:w}),await kt(g,{hasPhoto:!0,thumbnail:_,photoCount:1}),f.hasPhoto=!0,f.thumbnail=_,f.photoCount=1}return{id:g.key,...f}}async function Mk(r,e){const n=Re(Ae,`${en}/${r}`);await kt(n,{...e,updatedAt:Date.now()})}async function jk(r){const e=Re(Ae,`${en}/${r}`),n=Re(Ae,`${Fi}/${r}`);await cd(n),await cd(e)}async function cy(r){const e=Re(Ae,en),n=await Pn(e);if(!n.exists())return null;const s=r.toUpperCase().trim();let l=null;return n.forEach(a=>{const c=a.val();c.uniqueId===s&&(l={id:a.key,...c})}),l&&l.hasPhoto&&(l.photoBase64=await Pk(l.id)),l}async function Dg(r="ADL"){const e=Re(Ae,en),n=await Pn(e);let s=0;n.exists()&&n.forEach(a=>{const p=(a.val().uniqueId||"").match(new RegExp(`^${r}-(\\d+)$`,"i"));if(p){const g=parseInt(p[1],10);g>s&&(s=g)}});const l=s+1;return`${r}-${String(l).padStart(3,"0")}`}async function Fk(r,e,n=null,s=null,l="",a=!1,c=""){const f=Re(Ae,`${en}/${r}`),p=await Pn(f),g=p.exists()?p.val():{},w=a?0:s!==null?parseFloat(s):g.price,_={status:"sold",sellerName:e.trim(),saleDate:n||new Date().toISOString().split("T")[0],salePrice:w,marketName:l.trim(),isGift:a,giftNote:a?c.trim():"",updatedAt:Date.now()};if(g.status==="consignment"&&g.consignmentStoreId&&!a){const y=await uy(g.consignmentStoreId);if(y&&y.commissionPercent>0){const R=Math.round(w*y.commissionPercent)/100;_.commissionPercent=y.commissionPercent,_.commissionAmount=R,_.netRevenue=Math.round((w-R)*100)/100}else _.commissionPercent=0,_.commissionAmount=0,_.netRevenue=w}return await kt(f,_),_}async function Uk(r,e,n=null,s=""){const l=Re(Ae,`${en}/${r}`);await kt(l,{status:"consignment",consignmentStore:e.trim(),consignmentStoreId:s,consignmentDate:n||new Date().toISOString().split("T")[0],updatedAt:Date.now()})}async function zk(r){const e=Re(Ae,`${en}/${r}`);await kt(e,{status:"inventory",consignmentStore:"",consignmentStoreId:"",consignmentDate:null,saleDate:null,salePrice:null,marketName:"",sellerName:"",isGift:!1,giftNote:"",commissionPercent:null,commissionAmount:null,netRevenue:null,updatedAt:Date.now()})}function dy(r){const e=Re(Ae,en);return Js(e,s=>{const l=[];s.exists()&&s.forEach(a=>{l.push({id:a.key,...a.val()})}),l.sort((a,c)=>(c.createdAt||0)-(a.createdAt||0)),r(l)})}const Lg={all:"Tous",inventory:"En stock",consignment:"En consigne",sold:"Vendus"},$k={inventory:"#2ecc71",consignment:"#f39c12",sold:"#e74c3c"};function xr(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function Bk(){const[r,e]=P.useState([]),[n,s]=P.useState([]),[l,a]=P.useState("all"),[c,f]=P.useState(""),[p,g]=P.useState(null),[w,_]=P.useState(!0),[y,R]=P.useState({}),[b,D]=P.useState({}),[O,J]=P.useState(null),[A,G]=P.useState({description:"",longDescription:"",price:"",category:""}),[V,Q]=P.useState(!1),[Z,ee]=P.useState(null),[he,xe]=P.useState(""),[ke,st]=P.useState(""),Qe=P.useRef(null);P.useEffect(()=>dy(re=>{e(re),_(!1)}),[]),P.useEffect(()=>ay(s),[]);const je=async x=>{if(p===x.id){g(null);return}if(g(x.id),D(re=>({...re,[x.id]:0})),!y[x.id]&&(x.hasPhoto||x.photoBase64)){const re=await Fc(x.id);re.length===0&&x.photoBase64?R(ae=>({...ae,[x.id]:[x.photoBase64]})):R(ae=>({...ae,[x.id]:re}))}},z=async(x,re)=>{var pe;const ae=(pe=re.target.files)==null?void 0:pe[0];if(ae){Q(!0);try{if(await Rk(x.id,ae)===null)alert("Maximum de 5 photos atteint pour cet article.");else{const Fe=await Fc(x.id);R(tn=>({...tn,[x.id]:Fe}))}}catch(ie){console.error("Erreur ajout photo:",ie),alert("Erreur lors de l'ajout de la photo.")}finally{Q(!1),Qe.current&&(Qe.current.value="")}}},se=async(x,re)=>{if(re===0){alert("La photo principale ne peut pas tre supprime ici.");return}if(confirm("Supprimer cette photo?"))try{await Ak(x.id,re);const ae=await Fc(x.id);R(pe=>({...pe,[x.id]:ae})),D(pe=>({...pe,[x.id]:0}))}catch(ae){console.error("Erreur suppression photo:",ae)}},ge=r.filter(x=>{var pe,ie;const re=l==="all"||x.status===l,ae=c===""||((pe=x.uniqueId)==null?void 0:pe.toLowerCase().includes(c.toLowerCase()))||((ie=x.description)==null?void 0:ie.toLowerCase().includes(c.toLowerCase()));return re&&ae}),te={all:r.length,inventory:r.filter(x=>x.status==="inventory").length,consignment:r.filter(x=>x.status==="consignment").length,sold:r.filter(x=>x.status==="sold").length},U=x=>{var re;J(x.id),G({description:x.description||"",longDescription:x.longDescription||"",price:((re=x.price)==null?void 0:re.toString())||"",category:x.category||""})},$=async x=>{await Mk(x.id,{description:A.description.trim(),longDescription:A.longDescription.trim(),price:parseFloat(A.price)||0,category:A.category.trim()}),J(null)},H=()=>{J(null)},I=async x=>{confirm(`Remettre "${x.uniqueId}" en inventaire?`)&&(await zk(x.id),g(null))},L=async x=>{confirm(`Supprimer dfinitivement "${x.uniqueId}"?`)&&(await jk(x.id),g(null),R(re=>{const ae={...re};return delete ae[x.id],ae}))},fe=x=>{ee(x.id),xe(""),st("")},me=async x=>{let re=ke.trim(),ae=he;if(he&&he!=="other"){const pe=n.find(ie=>ie.id===he);pe&&(re=pe.name)}if(!re){alert("Entrez le nom du magasin");return}await Uk(x.id,re,null,ae==="other"?"":ae),ee(null),g(null)},Se=()=>{ee(null)};return w?m.jsxs("div",{className:"page-loading",children:[m.jsx("div",{className:"loading-spinner"}),m.jsx("p",{children:"Chargement de l'inventaire..."})]}):m.jsxs("div",{className:"page inventory-page",children:[m.jsxs("div",{className:"search-bar",children:[m.jsx("input",{type:"text",placeholder:" Rechercher par # ou description...",value:c,onChange:x=>f(x.target.value),className:"search-input"}),c&&m.jsx("button",{className:"search-clear",onClick:()=>f(""),children:""})]}),m.jsx("div",{className:"status-filters",children:Object.entries(Lg).map(([x,re])=>m.jsxs("button",{className:`filter-btn ${l===x?"active":""}`,onClick:()=>a(x),children:[re,m.jsx("span",{className:"filter-count",children:te[x]})]},x))}),ge.length===0?m.jsxs("div",{className:"empty-state",children:[m.jsx("p",{className:"empty-icon",children:""}),m.jsx("p",{children:c?"Aucun rsultat trouv":"Aucun item dans cette catgorie"})]}):m.jsx("div",{className:"items-list",children:ge.map(x=>{var re,ae,pe;return m.jsxs("div",{className:`item-card ${p===x.id?"expanded":""}`,onClick:()=>je(x),children:[m.jsxs("div",{className:"item-row",children:[m.jsxs("div",{className:"item-photo",children:[x.thumbnail?m.jsx("img",{src:x.thumbnail,alt:x.description,className:"item-thumbnail"}):x.hasPhoto||x.photoBase64?m.jsx("div",{className:"photo-placeholder",children:""}):m.jsx("div",{className:"photo-placeholder",children:""}),x.photoCount>1&&m.jsx("span",{className:"photo-count-badge",children:x.photoCount})]}),m.jsxs("div",{className:"item-info",children:[m.jsxs("div",{className:"item-id-row",children:[m.jsxs("span",{className:"item-unique-id",children:["#",x.uniqueId]}),m.jsx("span",{className:"item-status-badge",style:{backgroundColor:$k[x.status]},children:Lg[x.status]})]}),m.jsx("p",{className:"item-description",children:x.description}),m.jsxs("div",{className:"item-meta",children:[m.jsxs("span",{className:"item-price",children:[xr(x.price)," $"]}),x.itemDate&&m.jsxs("span",{className:"item-date",children:[" ",x.itemDate]}),x.status==="consignment"&&m.jsxs("span",{className:"item-consignment",children:[" ",x.consignmentStore," ",x.consignmentDate&&`(${x.consignmentDate})`]}),x.status==="sold"&&m.jsxs("span",{className:"item-sold-info",children:[x.isGift?m.jsxs(m.Fragment,{children:[" Cadeau",x.giftNote?`  ${x.giftNote}`:"","  "]}):x.salePrice&&x.salePrice!==x.price?m.jsxs(m.Fragment,{children:[m.jsxs("s",{children:[xr(x.price)," $"]}),"  ",xr(x.salePrice)," $  "]}):"",x.saleDate,"  ",x.sellerName,x.marketName?`   ${x.marketName}`:"",x.commissionAmount>0&&m.jsxs(m.Fragment,{children:["   Net: ",xr(x.netRevenue)," $"]})]})]})]})]}),p===x.id&&m.jsxs("div",{onClick:ie=>ie.stopPropagation(),children:[y[x.id]&&y[x.id].length>0&&m.jsxs("div",{className:"photo-gallery",children:[m.jsx("div",{className:"gallery-main",children:m.jsx("img",{src:y[x.id][b[x.id]||0],alt:x.description})}),y[x.id].length>1&&m.jsx("div",{className:"gallery-thumbs",children:y[x.id].map((ie,Fe)=>m.jsxs("div",{className:`gallery-thumb ${(b[x.id]||0)===Fe?"active":""}`,onClick:()=>D(tn=>({...tn,[x.id]:Fe})),children:[m.jsx("img",{src:ie,alt:`Photo ${Fe+1}`}),Fe>0&&O===x.id&&m.jsx("button",{className:"gallery-thumb-delete",onClick:tn=>{tn.stopPropagation(),se(x,Fe)},children:""})]},Fe))})]}),x.hasPhoto&&!y[x.id]&&m.jsx("div",{className:"item-expanded-photo loading",children:m.jsx("div",{className:"loading-spinner"})}),x.longDescription&&O!==x.id&&m.jsx("div",{className:"item-long-description",children:m.jsx("p",{children:x.longDescription})}),x.status==="sold"&&x.commissionAmount>0&&m.jsxs("div",{className:"item-commission-info",children:[m.jsxs("div",{className:"commission-row",children:[m.jsx("span",{children:"Prix de vente"}),m.jsxs("span",{children:[xr(x.salePrice)," $"]})]}),m.jsxs("div",{className:"commission-row commission-negative",children:[m.jsxs("span",{children:["Commission ",x.consignmentStore," (",x.commissionPercent,"%)"]}),m.jsxs("span",{children:["-",xr(x.commissionAmount)," $"]})]}),m.jsxs("div",{className:"commission-row commission-total",children:[m.jsx("span",{children:"Revenu net"}),m.jsxs("span",{children:[xr(x.netRevenue)," $"]})]})]}),m.jsx("div",{className:"item-actions",children:Z===x.id?m.jsxs("div",{className:"item-edit-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Magasin de consigne"}),n.length>0?m.jsxs("select",{value:he,onChange:ie=>{if(xe(ie.target.value),ie.target.value!=="other"){const Fe=n.find(tn=>tn.id===ie.target.value);Fe&&st(Fe.name)}},className:"form-input",children:[m.jsx("option",{value:"",children:" Choisir un magasin "}),n.map(ie=>m.jsxs("option",{value:ie.id,children:[ie.name,ie.commissionPercent>0?` (${ie.commissionPercent}%)`:"",ie.locationFee>0?` + ${ie.locationFee}$/mois`:""]},ie.id)),m.jsx("option",{value:"other",children:" Autre magasin..."})]}):m.jsx("input",{type:"text",value:ke,onChange:ie=>st(ie.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),he==="other"&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Nom du magasin"}),m.jsx("input",{type:"text",value:ke,onChange:ie=>st(ie.target.value),className:"form-input",placeholder:"Nom du magasin",autoFocus:!0})]}),m.jsxs("div",{className:"item-edit-actions",children:[m.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>me(x),disabled:!he&&!ke.trim(),children:" Confirmer consigne"}),m.jsx("button",{className:"btn btn-small btn-secondary",onClick:Se,children:"Annuler"})]})]}):O===x.id?m.jsxs("div",{className:"item-edit-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Titre"}),m.jsx("input",{type:"text",value:A.description,onChange:ie=>G(Fe=>({...Fe,description:ie.target.value})),className:"form-input"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Description dtaille"}),m.jsx("textarea",{value:A.longDescription,onChange:ie=>G(Fe=>({...Fe,longDescription:ie.target.value})),className:"form-input form-textarea",rows:"4",placeholder:"Dcrivez l'article en dtail..."})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Prix ($)"}),m.jsx("input",{type:"number",value:A.price,onChange:ie=>G(Fe=>({...Fe,price:ie.target.value})),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Catgorie"}),m.jsx("input",{type:"text",value:A.category,onChange:ie=>G(Fe=>({...Fe,category:ie.target.value})),className:"form-input"})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{className:"form-label",children:[" Photos (",((re=y[x.id])==null?void 0:re.length)||(x.hasPhoto?1:0),"/5)"]}),(((ae=y[x.id])==null?void 0:ae.length)||0)<5&&m.jsxs(m.Fragment,{children:[m.jsx("input",{ref:Qe,type:"file",accept:"image/*",capture:"environment",onChange:ie=>z(x,ie),className:"hidden-input"}),m.jsx("button",{type:"button",className:"btn btn-small btn-add-photo",onClick:()=>{var ie;return(ie=Qe.current)==null?void 0:ie.click()},disabled:V,children:V?" Ajout en cours...":" Ajouter une photo"})]}),(((pe=y[x.id])==null?void 0:pe.length)||0)>=5&&m.jsx("p",{className:"form-hint",children:"Maximum de 5 photos atteint"})]}),m.jsxs("div",{className:"item-edit-actions",children:[m.jsx("button",{className:"btn btn-small btn-save",onClick:()=>$(x),children:" Sauvegarder"}),m.jsx("button",{className:"btn btn-small btn-secondary",onClick:H,children:"Annuler"})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>U(x),children:" Modifier"}),x.status==="inventory"&&m.jsx("button",{className:"btn btn-small btn-consign",onClick:()=>fe(x),children:" Consigne"}),(x.status==="consignment"||x.status==="sold")&&m.jsx("button",{className:"btn btn-small btn-return",onClick:()=>I(x),children:" Retour inventaire"}),m.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>L(x),children:" Supprimer"})]})})]})]},x.id)})})]})}const Wk="https://us-central1-stockduloft.cloudfunctions.net/analyzePhoto";async function Vk(r,e=[],n=""){try{const s=await fetch(Wk,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:r,categories:e,userHint:n})});if(!s.ok)throw new Error(`Erreur serveur: ${s.status}`);const l=await s.json();if(l.success)return{category:l.category,title:l.title,description:l.description};throw new Error(l.error||"Erreur inconnue")}catch(s){throw console.error("Erreur AI:",s),s}}function Hk({imageBase64:r,categories:e,onSuggestion:n}){const[s,l]=P.useState(!1),[a,c]=P.useState(null),[f,p]=P.useState(""),g=async()=>{if(!r){c("Prenez une photo d'abord");return}l(!0),c(null);try{const w=await Vk(r,e,f);n(w)}catch(w){c("Impossible d'analyser la photo. Ressayez."),console.error(w)}finally{l(!1)}};return m.jsxs("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[m.jsx("input",{type:"text",value:f,onChange:w=>p(w.target.value),placeholder:"C'est quoi? Ex: butoir de porte, sac  lunch, coussin...",style:{width:"100%",padding:"10px 12px",fontSize:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",marginBottom:"8px",boxSizing:"border-box"}}),m.jsx("button",{type:"button",onClick:g,disabled:s||!r,style:{padding:"10px 20px",backgroundColor:s?"#ccc":"#7c3aed",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:s?"wait":"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:s?m.jsxs(m.Fragment,{children:[m.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid white",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Analyse en cours..."]}):m.jsx(m.Fragment,{children:" Suggestion AI"})}),a&&m.jsx("p",{style:{color:"red",fontSize:"14px",marginTop:"5px"},children:a}),m.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function Gk(){const r=gd(),e=P.useRef(null),[n,s]=P.useState({uniqueId:"",description:"",longDescription:"",price:"",category:"",itemDate:new Date().toISOString().split("T")[0]}),[l,a]=P.useState(null),[c,f]=P.useState(null),[p,g]=P.useState(!1),[w,_]=P.useState(""),[y,R]=P.useState("");P.useEffect(()=>{Dg("ADL").then(Q=>{s(Z=>({...Z,uniqueId:Q})),R(Q)})},[]);const b=Q=>{const{name:Z,value:ee}=Q.target;s(he=>({...he,[Z]:ee})),Z==="uniqueId"&&_("")},D=Q=>{var he;const Z=(he=Q.target.files)==null?void 0:he[0];if(!Z)return;a(Z);const ee=new FileReader;ee.onload=xe=>f(xe.target.result),ee.readAsDataURL(Z)},O=()=>{var Q;(Q=e.current)==null||Q.click()},J=()=>{a(null),f(null),e.current&&(e.current.value="")},A=()=>{s(Q=>({...Q,uniqueId:y})),_("")},G=Q=>{s(Z=>({...Z,...Q.category?{category:Q.category}:{},...Q.title?{description:Q.title}:{},...Q.description?{longDescription:Q.description}:{}}))},V=async Q=>{if(Q.preventDefault(),_(""),!n.uniqueId.trim()){_("Le numro unique est requis");return}if(!n.price||parseFloat(n.price)<=0){_("Le prix doit tre suprieur  0");return}if(await cy(n.uniqueId)){const ee=await Dg("ADL");R(ee),_(`Le numro "${n.uniqueId.toUpperCase()}" existe dj !`);return}g(!0);try{await Lk({uniqueId:n.uniqueId,description:n.description,longDescription:n.longDescription,price:n.price,category:n.category,itemDate:n.itemDate,photoFile:l}),r("/")}catch(ee){console.error("Erreur:",ee),_("Erreur lors de la sauvegarde. Ressayez.")}finally{g(!1)}};return m.jsxs("div",{className:"page add-item-page",children:[m.jsx("h2",{className:"page-title",children:"Nouvel item"}),m.jsxs("form",{onSubmit:V,className:"add-form",children:[m.jsxs("div",{className:"photo-section",children:[m.jsx("input",{ref:e,type:"file",accept:"image/*",capture:"environment",onChange:D,className:"hidden-input"}),c?m.jsxs("div",{className:"photo-preview-container",children:[m.jsx("img",{src:c,alt:"Aperu",className:"photo-preview"}),m.jsx("button",{type:"button",className:"photo-remove",onClick:J,children:""})]}):m.jsxs("button",{type:"button",className:"photo-capture-btn",onClick:O,children:[m.jsx("span",{className:"capture-icon",children:""}),m.jsx("span",{children:"Prendre une photo"})]}),m.jsx("p",{className:"photo-hint",children:" Photo principale  vous pourrez ajouter d'autres photos en modifiant l'article"})]}),c&&m.jsx(Hk,{imageBase64:c,onSuggestion:G}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Numro unique *"}),m.jsx("input",{type:"text",name:"uniqueId",value:n.uniqueId,onChange:b,placeholder:"Ex: ADL-001",className:"form-input",autoComplete:"off",style:{textTransform:"uppercase"}})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Titre / Description courte"}),m.jsx("input",{type:"text",name:"description",value:n.description,onChange:b,placeholder:"Ex: Sac  main fleuri",className:"form-input"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Description dtaille"}),m.jsx("textarea",{name:"longDescription",value:n.longDescription,onChange:b,placeholder:"Dcrivez l'article en dtail : matriaux, dimensions, couleurs, entretien...",className:"form-input form-textarea",rows:"4"}),m.jsx("p",{className:"form-hint",children:"Affich dans la vitrine publique"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Prix ($) *"}),m.jsx("input",{type:"number",name:"price",value:n.price,onChange:b,placeholder:"0.00",className:"form-input",step:"0.01",min:"0",inputMode:"decimal"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Catgorie"}),m.jsx("input",{type:"text",name:"category",value:n.category,onChange:b,placeholder:"Ex: Sacs, Vtements, Accessoires...",className:"form-input"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Date de cration"}),m.jsx("input",{type:"date",name:"itemDate",value:n.itemDate,onChange:b,className:"form-input"})]}),w&&m.jsxs("div",{className:"error-block",children:[m.jsx("p",{className:"error-text",children:w}),y&&w.includes("existe dj")&&m.jsxs("button",{type:"button",className:"btn btn-small btn-suggest",onClick:A,children:["Utiliser ",y]})]}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:p,children:p?"Sauvegarde en cours...":" Ajouter  l'inventaire"}),m.jsx("button",{type:"button",className:"btn btn-secondary btn-full",onClick:()=>r("/"),children:"Annuler"})]})]})]})}function qt(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function qk(){var ge;const{user:r}=ph(),[e,n]=P.useState("ADL-"),[s,l]=P.useState(null),[a,c]=P.useState(null),[f,p]=P.useState(((ge=r==null?void 0:r.displayName)==null?void 0:ge.split(" ")[0])||""),[g,w]=P.useState(new Date().toISOString().split("T")[0]),[_,y]=P.useState(""),[R,b]=P.useState(()=>localStorage.getItem("sdl_marketName")||""),[D,O]=P.useState(!1),[J,A]=P.useState(!1),[G,V]=P.useState(""),[Q,Z]=P.useState(""),[ee,he]=P.useState(!1),[xe,ke]=P.useState(""),st=async te=>{var U;if(te==null||te.preventDefault(),!!e.trim()){O(!0),V(""),Z(""),l(null),c(null);try{const $=await cy(e);if(!$){V(`Aucun item trouv avec le numro "${e.toUpperCase()}"`);return}if($.status==="sold"){V(`Cet item est dj vendu (${$.saleDate} par ${$.sellerName})`);return}if(l($),y(((U=$.price)==null?void 0:U.toFixed(2))||""),$.status==="consignment"&&$.consignmentStoreId){const H=await uy($.consignmentStoreId);c(H)}}catch($){console.error($),V("Erreur de recherche. Ressayez.")}finally{O(!1)}}},je=(()=>{if(!a||!a.commissionPercent||ee)return null;const te=parseFloat(_)||0,U=Math.round(te*a.commissionPercent)/100,$=Math.round((te-U)*100)/100;return{commissionAmount:U,netRevenue:$,percent:a.commissionPercent}})(),z=async()=>{if(!(!s||!f.trim())){A(!0),V("");try{const te=ee?0:parseFloat(_)||s.price,U=await Fk(s.id,f,g,te,R,ee,xe);let $;ee?$=` ${s.uniqueId} donn en cadeau${xe?`  ${xe}`:""}`:U.commissionAmount>0?$=` ${s.uniqueId} vendu pour ${qt(te)} $
 Commission ${s.consignmentStore}: -${qt(U.commissionAmount)} $
 Revenu net: ${qt(U.netRevenue)} $`:$=` ${s.uniqueId} vendu pour ${qt(te)} $${R?` au ${R}`:""}`,Z($),l(null),c(null),n("ADL-"),y(""),he(!1),ke("")}catch(te){console.error(te),V("Erreur lors de la vente. Ressayez.")}finally{A(!1)}}},se=()=>{n("ADL-"),l(null),c(null),y(""),V(""),Z(""),he(!1),ke("")};return m.jsxs("div",{className:"page sale-page",children:[m.jsx("h2",{className:"page-title",children:" Vente rapide"}),m.jsx("form",{onSubmit:st,className:"sale-search-form",children:m.jsxs("div",{className:"sale-search-row",children:[m.jsx("input",{type:"text",value:e,onChange:te=>n(te.target.value.toUpperCase()),placeholder:"Ex: ADL-001",className:"form-input sale-search-input",autoComplete:"off",autoFocus:!0}),m.jsx("button",{type:"submit",className:"btn btn-primary sale-search-btn",disabled:D||!e.trim(),children:D?"...":""})]})}),Q&&m.jsxs("div",{className:"sale-success",children:[m.jsx("p",{style:{whiteSpace:"pre-line"},children:Q}),m.jsx("button",{className:"btn btn-primary btn-full",onClick:se,children:"Prochaine vente"})]}),G&&m.jsxs("div",{className:"sale-error",children:[m.jsx("p",{children:G}),m.jsx("button",{className:"btn btn-secondary",onClick:se,children:"Ressayer"})]}),s&&m.jsxs("div",{className:"sale-confirmation",children:[m.jsxs("div",{className:"sale-item-card",children:[s.photoBase64?m.jsx("img",{src:s.photoBase64,alt:s.description,className:"sale-item-photo"}):m.jsx("div",{className:"sale-photo-placeholder",children:""}),m.jsxs("div",{className:"sale-item-details",children:[m.jsxs("span",{className:"sale-item-id",children:["#",s.uniqueId]}),m.jsx("p",{className:"sale-item-desc",children:s.description}),m.jsxs("p",{className:"sale-item-price",children:[qt(s.price)," $"]}),s.status==="consignment"&&m.jsxs("p",{className:"sale-item-consign",children:[" En consigne: ",s.consignmentStore,a&&a.commissionPercent>0&&m.jsxs("span",{className:"sale-commission-badge",children:[a.commissionPercent,"% commission"]})]})]})]}),m.jsxs("div",{className:"sale-form",children:[m.jsx("div",{className:"form-group",children:m.jsxs("label",{className:"gift-toggle",children:[m.jsx("input",{type:"checkbox",checked:ee,onChange:te=>{var U;he(te.target.checked),te.target.checked?y("0"):y(((U=s.price)==null?void 0:U.toFixed(2))||"")}}),m.jsx("span",{children:" Donn en cadeau"})]})}),ee&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Note"}),m.jsx("input",{type:"text",value:xe,onChange:te=>ke(te.target.value),className:"form-input",placeholder:"Ex: Cadeau pour maman, change, etc."})]}),!ee&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Prix de vente ($)"}),m.jsxs("div",{className:"sale-price-row",children:[m.jsx("input",{type:"number",value:_,onChange:te=>y(te.target.value),className:"form-input",step:"0.01",min:"0",inputMode:"decimal"}),parseFloat(_)<s.price&&m.jsxs("span",{className:"sale-discount",children:["Rabais de ",qt(s.price-parseFloat(_))," $"]})]})]}),je&&m.jsxs("div",{className:"sale-commission-preview",children:[m.jsxs("div",{className:"commission-row",children:[m.jsx("span",{children:"Prix de vente"}),m.jsxs("span",{children:[qt(parseFloat(_))," $"]})]}),m.jsxs("div",{className:"commission-row commission-negative",children:[m.jsxs("span",{children:["Commission ",s.consignmentStore," (",je.percent,"%)"]}),m.jsxs("span",{children:["-",qt(je.commissionAmount)," $"]})]}),m.jsxs("div",{className:"commission-row commission-total",children:[m.jsx("span",{children:"Revenu net pour Jose"}),m.jsxs("span",{children:[qt(je.netRevenue)," $"]})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Vendeuse"}),m.jsx("input",{type:"text",value:f,onChange:te=>p(te.target.value),className:"form-input",placeholder:"Nom de la vendeuse"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"March / Point de vente"}),m.jsx("input",{type:"text",value:R,onChange:te=>{b(te.target.value),localStorage.setItem("sdl_marketName",te.target.value)},className:"form-input",placeholder:"Ex: March Jean-Talon, Facebook, etc."})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Date de vente"}),m.jsx("input",{type:"date",value:g,onChange:te=>w(te.target.value),className:"form-input"})]}),m.jsxs("div",{className:"sale-actions",children:[m.jsx("button",{className:"btn btn-sell btn-full",onClick:z,disabled:J||!f.trim(),children:J?"En cours...":ee?" Confirmer le cadeau":je?`Confirmer  Net: ${qt(je.netRevenue)} $`:`Confirmer la vente  ${qt(parseFloat(_||0))} $`}),m.jsx("button",{className:"btn btn-secondary btn-full",onClick:se,children:"Annuler"})]})]})]}),!s&&!G&&!Q&&m.jsxs("div",{className:"sale-hint",children:[m.jsx("p",{className:"hint-icon",children:""}),m.jsxs("p",{children:["Entre le numro de l'tiquette",m.jsx("br",{}),"pour enregistrer une vente"]})]})]})}const Mg="stockduloft/settings";function Ps(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}const Kk={free:{name:"Dcouverte",badge:"",articlesLimit:25,vitrineLimit:10,price:null},artisan:{name:"Artisan",badge:"",articlesLimit:1/0,vitrineLimit:1/0,price:{monthly:12.99,yearly:100}}};function Qk(){const[r,e]=P.useState(7),[n,s]=P.useState([]),[l,a]=P.useState([]),[c,f]=P.useState(!1),[p,g]=P.useState(null),[w,_]=P.useState({name:"",commissionPercent:"",locationFee:""}),[y,R]=P.useState(null),[b,D]=P.useState(()=>{const z=new Date;return`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}`});P.useEffect(()=>{const z=Re(Ae,Mg);return Js(z,ge=>{if(ge.exists()){const te=ge.val();te.vitrineSoldDays!==void 0&&e(te.vitrineSoldDays),te.subscription?R(te.subscription):R({plan:"free",planType:null,startDate:null,expiryDate:null})}})},[]),P.useEffect(()=>ay(s),[]),P.useEffect(()=>dy(a),[]);const O=async z=>{const se=parseInt(z);e(se),await kt(Re(Ae,Mg),{vitrineSoldDays:se})},J=Kk[(y==null?void 0:y.plan)||"free"],A=l.filter(z=>z.status!=="sold").length,G=J.articlesLimit===1/0?0:Math.min(100,Math.round(A/J.articlesLimit*100)),V=((y==null?void 0:y.plan)||"free")==="free",Q=z=>z?new Date(z).toLocaleDateString("fr-CA",{year:"numeric",month:"long",day:"numeric"}):"",Z=()=>{if(!(y!=null&&y.expiryDate))return null;const z=new Date,se=new Date(y.expiryDate);return Math.ceil((se-z)/(1e3*60*60*24))},ee=async()=>{w.name.trim()&&(await bk(w),_({name:"",commissionPercent:"",locationFee:""}),f(!1))},he=z=>{var se,ge;g(z.id),_({name:z.name,commissionPercent:((se=z.commissionPercent)==null?void 0:se.toString())||"",locationFee:((ge=z.locationFee)==null?void 0:ge.toString())||""})},xe=async z=>{await Ok(z,{name:w.name.trim(),commissionPercent:parseFloat(w.commissionPercent)||0,locationFee:parseFloat(w.locationFee)||0}),g(null),_({name:"",commissionPercent:"",locationFee:""})},ke=async z=>{const se=l.filter(ge=>ge.status==="consignment"&&ge.consignmentStoreId===z.id);if(se.length>0){alert(`Impossible de supprimer : ${se.length} article(s) en consigne chez ${z.name}`);return}confirm(`Supprimer le magasin "${z.name}" ?`)&&await Dk(z.id)},Qe=(()=>{const[z,se]=b.split("-").map(Number),ge=`${z}-${String(se).padStart(2,"0")}-01`,te=se===12?`${z+1}-01-01`:`${z}-${String(se+1).padStart(2,"0")}-01`,U={};return n.forEach($=>{U[$.id]={storeName:$.name,commissionPercent:$.commissionPercent,locationFee:$.locationFee,totalSales:0,totalCommission:0,totalNet:0,itemsSold:0,itemsInConsignment:0}}),l.forEach($=>{if($.status==="consignment"&&$.consignmentStoreId&&U[$.consignmentStoreId]&&U[$.consignmentStoreId].itemsInConsignment++,$.status==="sold"&&$.saleDate&&$.saleDate>=ge&&$.saleDate<te&&$.consignmentStoreId&&U[$.consignmentStoreId]){const H=U[$.consignmentStoreId];H.itemsSold++,H.totalSales+=$.salePrice||0,H.totalCommission+=$.commissionAmount||0,H.totalNet+=$.netRevenue||$.salePrice||0}}),Object.values(U)})(),je=Qe.some(z=>z.itemsSold>0||z.itemsInConsignment>0);return m.jsxs("div",{className:"page about-page",children:[m.jsx("h2",{className:"page-title",children:"  propos"}),m.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[m.jsx("h4",{children:" Mon abonnement"}),m.jsxs("div",{className:"subscription-section",children:[m.jsx("div",{className:"subscription-plan-row",children:m.jsxs("div",{className:"subscription-plan-info",children:[m.jsxs("span",{className:"subscription-plan-badge",children:[J.badge," ",J.name]}),!V&&(y==null?void 0:y.planType)&&m.jsx("span",{className:"subscription-plan-type",children:y.planType==="yearly"?"100.00 $/an":"12.99 $/mois"})]})}),m.jsxs("div",{className:"subscription-articles",children:[m.jsxs("div",{className:"subscription-articles-label",children:[m.jsx("span",{children:" Articles actifs"}),m.jsxs("span",{children:[A,V?` / ${J.articlesLimit}`:"  Illimit"]})]}),V&&m.jsx("div",{className:"subscription-progress-bar",children:m.jsx("div",{className:`subscription-progress-fill ${G>=80?"warning":""} ${G>=100?"full":""}`,style:{width:`${G}%`}})})]}),m.jsxs("div",{className:"subscription-detail-row",children:[m.jsx("span",{children:" Vitrine publique"}),m.jsx("span",{children:V?`${J.vitrineLimit} articles max`:"Illimite"})]}),m.jsxs("div",{className:"subscription-detail-row",children:[m.jsx("span",{children:" Suivi consignes"}),m.jsx("span",{children:V?"":""})]}),m.jsxs("div",{className:"subscription-detail-row",children:[m.jsx("span",{children:" tiquettes QR"}),m.jsx("span",{children:V?"":""})]}),!V&&(y==null?void 0:y.expiryDate)&&m.jsxs("div",{className:"subscription-renewal",children:[m.jsx("span",{children:" Renouvellement"}),m.jsxs("span",{className:Z()<=7?"renewal-soon":"",children:[Q(y.expiryDate),Z()<=7&&Z()>0&&m.jsxs("span",{className:"renewal-badge",children:["Dans ",Z()," jour(s)"]})]})]}),V?m.jsxs("div",{className:"subscription-upgrade",children:[m.jsx("p",{className:"subscription-upgrade-pitch",children:"Passez au plan Artisan pour des articles illimits, la vitrine complte, le suivi des consignes et plus encore."}),m.jsxs("div",{className:"subscription-upgrade-options",children:[m.jsx("button",{className:"btn btn-upgrade btn-full",children:" Plan Artisan  12.99 $/mois"}),m.jsxs("button",{className:"btn btn-upgrade-yearly btn-full",children:[" Plan Annuel  100 $/an",m.jsx("span",{className:"upgrade-savings",children:"conomisez 56 $ !"})]})]})]}):m.jsx("div",{className:"subscription-manage",children:m.jsx("button",{className:"btn btn-small btn-secondary btn-full",children:"Grer mon abonnement"})})]})]}),m.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[m.jsx("h4",{children:" Magasins de consigne"}),n.length===0?m.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",margin:"12px 0"},children:"Aucun magasin configur"}):m.jsx("div",{className:"stores-list",children:n.map(z=>m.jsx("div",{className:"store-card",children:p===z.id?m.jsxs("div",{className:"store-edit-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Nom"}),m.jsx("input",{type:"text",value:w.name,onChange:se=>_(ge=>({...ge,name:se.target.value})),className:"form-input"})]}),m.jsxs("div",{className:"store-form-row",children:[m.jsxs("div",{className:"form-group",style:{flex:1},children:[m.jsx("label",{className:"form-label",children:"Commission (%)"}),m.jsx("input",{type:"number",value:w.commissionPercent,onChange:se=>_(ge=>({...ge,commissionPercent:se.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"0"})]}),m.jsxs("div",{className:"form-group",style:{flex:1},children:[m.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),m.jsx("input",{type:"number",value:w.locationFee,onChange:se=>_(ge=>({...ge,locationFee:se.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"0"})]})]}),m.jsxs("div",{className:"store-edit-actions",children:[m.jsx("button",{className:"btn btn-small btn-save",onClick:()=>xe(z.id),children:" Sauvegarder"}),m.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>g(null),children:"Annuler"})]})]}):m.jsxs("div",{className:"store-info",children:[m.jsxs("div",{className:"store-header",children:[m.jsx("span",{className:"store-name",children:z.name}),m.jsxs("div",{className:"store-actions-btns",children:[m.jsx("button",{className:"btn btn-small btn-edit",onClick:()=>he(z),children:""}),m.jsx("button",{className:"btn btn-small btn-delete",onClick:()=>ke(z),children:""})]})]}),m.jsxs("div",{className:"store-details",children:[z.commissionPercent>0&&m.jsxs("span",{className:"store-tag store-tag-commission",children:[z.commissionPercent,"% commission"]}),z.locationFee>0&&m.jsxs("span",{className:"store-tag store-tag-location",children:[Ps(z.locationFee)," $/mois loyer"]}),!z.commissionPercent&&!z.locationFee&&m.jsx("span",{className:"store-tag",children:"Aucun frais configur"})]}),l.filter(se=>se.status==="consignment"&&se.consignmentStoreId===z.id).length>0&&m.jsxs("p",{className:"store-consigned-count",children:[" ",l.filter(se=>se.status==="consignment"&&se.consignmentStoreId===z.id).length," article(s) en consigne"]})]})},z.id))}),c?m.jsxs("div",{className:"store-add-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Nom du magasin"}),m.jsx("input",{type:"text",value:w.name,onChange:z=>_(se=>({...se,name:z.target.value})),className:"form-input",placeholder:"Ex: SF Studios",autoFocus:!0})]}),m.jsxs("div",{className:"store-form-row",children:[m.jsxs("div",{className:"form-group",style:{flex:1},children:[m.jsx("label",{className:"form-label",children:"Commission (%)"}),m.jsx("input",{type:"number",value:w.commissionPercent,onChange:z=>_(se=>({...se,commissionPercent:z.target.value})),className:"form-input",step:"0.5",min:"0",max:"100",inputMode:"decimal",placeholder:"Ex: 30"})]}),m.jsxs("div",{className:"form-group",style:{flex:1},children:[m.jsx("label",{className:"form-label",children:"Loyer ($/mois)"}),m.jsx("input",{type:"number",value:w.locationFee,onChange:z=>_(se=>({...se,locationFee:z.target.value})),className:"form-input",step:"1",min:"0",inputMode:"decimal",placeholder:"Ex: 50"})]})]}),m.jsxs("div",{className:"store-edit-actions",children:[m.jsx("button",{className:"btn btn-small btn-save",onClick:ee,disabled:!w.name.trim(),children:" Ajouter"}),m.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>{f(!1),_({name:"",commissionPercent:"",locationFee:""})},children:"Annuler"})]})]}):m.jsx("button",{className:"btn btn-small btn-add-store",onClick:()=>{f(!0),_({name:"",commissionPercent:"",locationFee:""})},style:{marginTop:"10px"},children:" Ajouter un magasin"})]}),m.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[m.jsx("h4",{children:" Rapport consignes"}),m.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[m.jsx("label",{className:"form-label",children:"Mois"}),m.jsx("input",{type:"month",value:b,onChange:z=>D(z.target.value),className:"form-input"})]}),je?m.jsx("div",{className:"report-list",children:Qe.filter(z=>z.itemsSold>0||z.itemsInConsignment>0).map((z,se)=>m.jsxs("div",{className:"report-store-card",children:[m.jsx("div",{className:"report-store-name",children:z.storeName}),z.itemsInConsignment>0&&m.jsxs("div",{className:"report-row",children:[m.jsx("span",{children:" En consigne actuellement"}),m.jsxs("span",{children:[z.itemsInConsignment," article(s)"]})]}),z.itemsSold>0&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"report-row",children:[m.jsx("span",{children:" Articles vendus"}),m.jsx("span",{children:z.itemsSold})]}),m.jsxs("div",{className:"report-row",children:[m.jsx("span",{children:" Total ventes"}),m.jsxs("span",{children:[Ps(z.totalSales)," $"]})]}),z.commissionPercent>0&&m.jsxs("div",{className:"report-row report-row-negative",children:[m.jsxs("span",{children:[" Commission (",z.commissionPercent,"%)"]}),m.jsxs("span",{children:["-",Ps(z.totalCommission)," $"]})]}),z.locationFee>0&&m.jsxs("div",{className:"report-row report-row-negative",children:[m.jsx("span",{children:" Loyer mensuel"}),m.jsxs("span",{children:["-",Ps(z.locationFee)," $"]})]}),m.jsxs("div",{className:"report-row report-row-total",children:[m.jsx("span",{children:" Revenu net"}),m.jsxs("span",{children:[Ps(z.totalNet-(z.locationFee||0))," $"]})]})]})]},se))}):m.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginTop:"10px"},children:"Aucune activit de consigne pour ce mois"})]}),m.jsxs("div",{className:"about-card",style:{marginBottom:"12px"},children:[m.jsx("h4",{children:" Paramtres Vitrine"}),m.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[m.jsx("label",{className:"form-label",children:"Afficher les articles vendus pendant :"}),m.jsxs("select",{value:r,onChange:z=>O(z.target.value),className:"form-input",children:[m.jsx("option",{value:0,children:"Ne pas afficher"}),m.jsx("option",{value:3,children:"3 jours"}),m.jsx("option",{value:7,children:"7 jours (1 semaine)"}),m.jsx("option",{value:14,children:"14 jours (2 semaines)"}),m.jsx("option",{value:30,children:"30 jours (1 mois)"})]}),m.jsx("p",{className:"about-setting-hint",children:"Les articles vendus apparatront avec un bandeau  VENDU  dans la vitrine publique."})]})]}),m.jsxs("div",{className:"about-card",children:[m.jsx("div",{className:"about-logo",children:m.jsx("img",{src:"/pwa-192x192.png",alt:"Stock du Loft"})}),m.jsx("h3",{children:" Stock du Loft"}),m.jsx("p",{className:"about-version",children:"Version 1.2"}),m.jsx("p",{className:"about-description",children:"Application de gestion d'inventaire conue pour les artisans et crateurs. Grez vos articles, suivez vos consignes et enregistrez vos ventes en toute simplicit."}),m.jsxs("div",{className:"about-author",children:[m.jsxs("p",{children:["Cr par ",m.jsx("strong",{children:"Jean-Marc Lacroix"})]}),m.jsx("p",{children:" 2026  Tous droits rservs"}),m.jsx("p",{style:{marginTop:"12px"},children:" Commentaires et suggestions bienvenus"}),m.jsx("a",{href:"mailto:lacroix.jeanmarc@gmail.com",className:"about-email",children:" lacroix.jeanmarc@gmail.com"})]})]})]})}const Yk="stockduloft/items",Jk="stockduloft/photos",Xk="stockduloft/settings",Zk=4;function jg(r){return r==null?void 0:r.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function eT(r,e){if(r.status!=="sold"||!r.saleDate)return!1;const n=new Date(r.saleDate);return(new Date-n)/(1e3*60*60*24)<=e}function tT(r){const e=[];if(!r)return e;r.photoBase64&&e.push(r.photoBase64);for(let n=1;n<=Zk;n++)r[`photo_${n}`]&&e.push(r[`photo_${n}`]);return e}function nT(){const[r,e]=P.useState([]),[n,s]=P.useState(!0),[l,a]=P.useState("all"),[c,f]=P.useState(null),[p,g]=P.useState({}),[w,_]=P.useState({}),[y,R]=P.useState(7);P.useEffect(()=>{const A=Re(Ae,Xk);return Js(A,V=>{if(V.exists()){const Q=V.val();Q.vitrineSoldDays!==void 0&&R(Q.vitrineSoldDays)}})},[]),P.useEffect(()=>{const A=Re(Ae,Yk);return Js(A,V=>{const Q=[];V.exists()&&V.forEach(Z=>{const ee={id:Z.key,...Z.val()};(ee.status==="inventory"||ee.status==="consignment"||eT(ee,y))&&Q.push(ee)}),Q.sort((Z,ee)=>(ee.createdAt||0)-(Z.createdAt||0)),e(Q),s(!1),Q.forEach(async Z=>{if(Z.hasPhoto&&!Z.photoBase64)try{const ee=Re(Ae,`${Jk}/${Z.id}`),he=await Pn(ee);if(he.exists()){const xe=tT(he.val());g(ke=>({...ke,[Z.id]:xe}))}}catch(ee){console.error("Erreur photo:",ee)}})})},[y]);const b=[...new Set(r.map(A=>A.category).filter(Boolean))].sort(),D=l==="all"?r:r.filter(A=>A.category===l),O=A=>{c===A?f(null):(f(A),_(G=>({...G,[A]:0})))},J=A=>p[A.id]&&p[A.id].length>0?p[A.id]:A.photoBase64?[A.photoBase64]:[];return n?m.jsx("div",{className:"vitrine",children:m.jsxs("div",{className:"vitrine-loading",children:[m.jsx("div",{className:"loading-spinner"}),m.jsx("p",{children:"Chargement du catalogue..."})]})}):m.jsxs("div",{className:"vitrine",children:[m.jsxs("header",{className:"vitrine-header",children:[m.jsx("img",{src:"/pwa-192x192.png",alt:"Logo",className:"vitrine-logo"}),m.jsxs("div",{children:[m.jsx("h1",{className:"vitrine-title",children:" L'Atelier du Loft"}),m.jsx("p",{className:"vitrine-subtitle-name",children:"Jose Bourgouin"}),m.jsxs("p",{className:"vitrine-subtitle",children:[D.length," article",D.length>1?"s":""," disponible",D.length>1?"s":""]})]})]}),b.length>0&&m.jsxs("div",{className:"vitrine-filters",children:[m.jsx("button",{className:`vitrine-filter-btn ${l==="all"?"active":""}`,onClick:()=>a("all"),children:"Tous"}),b.map(A=>m.jsx("button",{className:`vitrine-filter-btn ${l===A?"active":""}`,onClick:()=>a(A),children:A},A))]}),D.length===0?m.jsxs("div",{className:"vitrine-empty",children:[m.jsx("p",{children:""}),m.jsx("p",{children:"Aucun article disponible pour le moment"})]}):m.jsx("div",{className:"vitrine-grid",children:D.map(A=>{const G=c===A.id,V=J(A),Q=w[A.id]||0;return m.jsxs("div",{className:`vitrine-card ${G?"expanded":""}`,onClick:()=>O(A.id),children:[!G&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"vitrine-card-photo",children:[V.length>0?m.jsx("img",{src:V[0],alt:A.description}):A.thumbnail?m.jsx("img",{src:A.thumbnail,alt:A.description,className:"vitrine-thumb-blur"}):m.jsx("div",{className:"vitrine-card-no-photo",children:""}),A.status==="sold"&&m.jsx("div",{className:"vitrine-sold-overlay",children:m.jsx("span",{children:"VENDU"})}),V.length>1&&m.jsxs("span",{className:"vitrine-photo-count",children:[" ",V.length]})]}),m.jsxs("div",{className:"vitrine-card-info",children:[m.jsx("p",{className:"vitrine-card-desc",children:A.description||"Sans description"}),m.jsxs("p",{className:"vitrine-card-price",children:[jg(A.price)," $"]}),A.category&&m.jsx("span",{className:"vitrine-card-category",children:A.category})]})]}),G&&m.jsxs("div",{className:"vitrine-detail",onClick:Z=>Z.stopPropagation(),children:[m.jsx("button",{className:"vitrine-detail-close",onClick:()=>f(null),children:" Fermer"}),V.length>0&&m.jsxs("div",{className:"vitrine-gallery",children:[m.jsxs("div",{className:"vitrine-gallery-main",children:[m.jsx("img",{src:V[Q],alt:A.description}),A.status==="sold"&&m.jsx("div",{className:"vitrine-sold-overlay",children:m.jsx("span",{children:"VENDU"})})]}),V.length>1&&m.jsx("div",{className:"vitrine-gallery-thumbs",children:V.map((Z,ee)=>m.jsx("div",{className:`vitrine-gallery-thumb ${Q===ee?"active":""}`,onClick:he=>{he.stopPropagation(),_(xe=>({...xe,[A.id]:ee}))},children:m.jsx("img",{src:Z,alt:`Photo ${ee+1}`})},ee))})]}),m.jsxs("div",{className:"vitrine-detail-info",children:[m.jsx("h3",{className:"vitrine-detail-title",children:A.description||"Sans titre"}),m.jsxs("p",{className:"vitrine-detail-price",children:[jg(A.price)," $"]}),m.jsxs("p",{className:"vitrine-detail-id",children:["#",A.uniqueId]}),A.category&&m.jsx("span",{className:"vitrine-card-category",children:A.category}),A.longDescription&&m.jsx("div",{className:"vitrine-detail-description",children:m.jsx("p",{children:A.longDescription})}),A.status==="consignment"&&A.consignmentStore&&m.jsxs("p",{className:"vitrine-detail-consignment",children:[" Disponible chez: ",A.consignmentStore]}),A.itemDate&&m.jsxs("p",{className:"vitrine-detail-date",children:[" Cr le ",A.itemDate]})]})]})]},A.id)})}),m.jsxs("footer",{className:"vitrine-footer",children:[m.jsx("p",{children:" L'Atelier du Loft  Jose Bourgouin"}),m.jsx("p",{className:"vitrine-footer-cta",children:"crivez-moi si quelque chose vous intresse!"}),m.jsx("a",{href:"mailto:Jose.Bourgouin@gmail.com",children:" Jose.Bourgouin@gmail.com"})]})]})}function rT(){const{login:r}=ph(),[e,n]=P.useState(""),[s,l]=P.useState(!1),a=async()=>{n(""),l(!0);try{await r()}catch{n("Erreur de connexion. Ressayez.")}finally{l(!1)}};return m.jsx("div",{className:"login-page",children:m.jsxs("div",{className:"login-card",children:[m.jsx("div",{className:"login-logo",children:""}),m.jsx("h1",{className:"login-title",children:"Stock du Loft"}),m.jsxs("p",{className:"login-subtitle",children:["Gestion d'inventaire pour",m.jsx("br",{}),"L'Atelier du Loft"]}),m.jsx("button",{onClick:a,className:"btn btn-primary btn-login",disabled:s,children:s?"Connexion...":" Se connecter avec Google"}),e&&m.jsx("p",{className:"error-text",children:e})]})})}function iT(){var s;const{user:r,logout:e}=ph();return jr().pathname==="/vitrine"?m.jsx(nT,{}):r?m.jsxs("div",{className:"app",children:[m.jsx("header",{className:"app-header",children:m.jsxs("div",{className:"header-content",children:[m.jsxs("h1",{className:"app-title",children:[m.jsx("span",{className:"title-icon",children:""}),"Stock du Loft"]}),m.jsxs("div",{className:"header-user",children:[m.jsx("span",{className:"user-name",children:(s=r.displayName)==null?void 0:s.split(" ")[0]}),m.jsx("button",{onClick:e,className:"btn-logout",title:"Dconnexion",children:""})]})]})}),m.jsx("main",{className:"app-main",children:m.jsxs(uS,{children:[m.jsx(hi,{path:"/",element:m.jsx(Bk,{})}),m.jsx(hi,{path:"/add",element:m.jsx(Gk,{})}),m.jsx(hi,{path:"/sale",element:m.jsx(qk,{})}),m.jsx(hi,{path:"/about",element:m.jsx(Qk,{})}),m.jsx(hi,{path:"*",element:m.jsx(lS,{to:"/",replace:!0})})]})}),m.jsxs("nav",{className:"bottom-nav",children:[m.jsxs(Sl,{to:"/",end:!0,className:({isActive:l})=>`nav-item ${l?"active":""}`,children:[m.jsx("span",{className:"nav-icon",children:""}),m.jsx("span",{className:"nav-label",children:"Inventaire"})]}),m.jsxs(Sl,{to:"/sale",className:({isActive:l})=>`nav-item ${l?"active":""}`,children:[m.jsx("span",{className:"nav-icon",children:""}),m.jsx("span",{className:"nav-label",children:"Vente"})]}),m.jsxs(Sl,{to:"/add",className:({isActive:l})=>`nav-item ${l?"active":""}`,children:[m.jsx("span",{className:"nav-icon",children:""}),m.jsx("span",{className:"nav-label",children:"Ajouter"})]}),m.jsxs(Sl,{to:"/about",className:({isActive:l})=>`nav-item ${l?"active":""}`,children:[m.jsx("span",{className:"nav-icon",children:""}),m.jsx("span",{className:"nav-label",children:"Info"})]})]})]}):m.jsx(rT,{})}function sT(){return m.jsx(xk,{children:m.jsx(iT,{})})}_0.createRoot(document.getElementById("root")).render(m.jsx(Ug.StrictMode,{children:m.jsx(vS,{children:m.jsx(sT,{})})}));
